/*
 * GoJS™ v1.0.0 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software®, http://www.nwoods.com/
 *
 * Copyright © 1998-2012 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.0.0/license.html.
 */
(function(window) { var f=void 0,h=!0,m=null,o=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function r(a){return function(){return this[a]}}function ca(a){return function(){return a}}var ea,ga={};if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});
Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.kE===h});Object.freeze||(Object.freeze=function(a){a.kE=h});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});
var s={gr:o,NB:o,MB:o,Gy:o,eC:o,trace:function(a){window&&window.console&&window.console.log(a)},aB:o,assert:function(a,b){if(!a&&s.aB){if(window){window.console&&window.console.log(b);window.alert(b)}throw Error(b);}},nr:m,JB:function(a,b){if(a===f)a=s.nr;if(b===f)b=a.Ti("").lb;var c=b.length,d=a.oa.getContext("2d");d.fillStyle="rgba(255,255,0,.3)";for(var e=0;e<c;e++){var g=b.V(e),i=g.ta;if(g.sa!==m)s.JB(a,g.sa);else{var j=g.li.copy();j.pG(g.ae);d.save();d.transform(j.m11,j.m12,j.m21,j.m22,j.La,
j.Ma);d.fillRect(i.x,i.y,i.width,i.height);d.restore()}}},KB:function(a,b){if(!a)a=s.nr;if(!b)b=a.Ti("").lb;var c=a.oa.getContext("2d"),d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=b.V(e),i=g.ja,j=g.li;if(g.sa!==m)s.KB(a,g.sa);else{c.save();c.transform(j.m11,j.m12,j.m21,j.m22,j.La,j.Ma);c.fillRect(i.x,i.y,i.width,i.height);c.restore()}}},xF:function(a,b){if(!a)a=s.nr;if(!b)b=a.Ti("").lb;var c=a.oa.getContext("2d"),d=b.length;c.fillStyle="rgba(0,0,255,.3)";for(var e=0;e<d;e++){var g=
b.V(e),i=g.la,j=g.li;if(g.sa!==m)s.xF(a,g.sa);else{c.save();c.transform(j.m11,j.m12,j.m21,j.m22,j.La,j.Ma);c.fillRect(i.x||0,i.y||0,i.width,i.height);c.restore()}}},zI:function(){s.KB();s.JB()},AI:function(a){if(!a)a=s.nr;var b=a.gc,a=a.oa.getContext("2d");a.strokeStyle="rgba(0,255,0,.9)";a.strokeRect(b.x,b.y,b.width,b.height)},yF:function(a,b){a.lineWidth=2;a.strokeStyle="rgba(255,0,0,.5)";a.strokeRect(b.Cb.x,b.Cb.y,b.Cb.width,b.Cb.height);if(b.stroke!==f)a.strokeStyle=b.stroke;if(b.Jd!==f)a.lineWidth=
b.Jd;if(b.Y!==m&&b.Y.type===ja){a.lineWidth=1;a.strokeStyle="rgba(10,200,10,.6)";if(b.stroke!==f)a.strokeStyle=b.stroke;if(b.Jd!==f)a.lineWidth=b.Jd}},zF:function(a,b){a.lineWidth=1;a.strokeStyle="rgba(0,0,255,.5)";a.strokeRect(b.ja.x,b.ja.y,b.ja.width,b.ja.height);if(b.stroke!==f)a.strokeStyle=b.stroke;if(b.Jd!==f)a.lineWidth=b.Jd},LB:function(a,b){for(var c=b.yb.length,d=0;d<c;d++)for(var e=b.yb.V(d),g=e.lb.length,i=0;i<g;i++){var j=e.lb.V(i);if(j.location!==f&&j.location!==m){if(j.location.aa()){var k=
j.location.x,l=j.location.y;a.beginPath();a.strokeStyle="limegreen";a.lineWidth=2;a.moveTo(k,l+6);a.lineTo(k,l);a.lineTo(k+6,l);a.moveTo(k,l);a.lineTo(k+10,l+20);a.stroke()}k=j.position.x;l=j.position.y;a.beginPath();a.strokeStyle="red";a.lineWidth=2;a.moveTo(k,l+6);a.lineTo(k,l);a.lineTo(k+6,l);a.moveTo(k,l);a.lineTo(k+20,l+10);a.stroke()}}},AF:function(a,b,c,d,e){a.fillStyle="rgba(0,255,0,.2)";a.fillRect(b,c,d,e)},uI:function(a){if(!a)a=s.nr;for(a=a.Fn;a.next();)s.trace(a.value.toString())},TJ:function(a,
b){var c=b.Gg(a),d=b.dc;d.xc=b.fo(c);d.F=c;return ka(b,d,a)},OJ:function(a,b){if(b.Sc(a.F)){b.yg.fillStyle="lime";b.yg.Ek="lime";b.yg.fillRect(a.xc.x,a.xc.y,1*b.scale,1*b.scale)}},PJ:function(a){var b=la(a,o,m);if(!b.Dl)for(var a=a.yg,c=0;c<=b.Vm;c++)for(var d=0;d<=b.Wm;d++){var e=b.Db[c][d];if(e!==na){var g=c*b.hd+b.$f,i=d*b.Uc+b.ag;if(e!==0){a.fillStyle="rgba(255, 0, 0, .2)";a.fillRect(g,i,b.hd,b.Uc)}if(!(e>=pa)){e=e%10;a.fillStyle="blue";a.fillText(e.toString(),g,i+b.Uc)}}}}};ga.Debug=s;
var t={mw:{},Mz:0,jE:{},Ot:document.createElement("canvas").getContext("2d"),Pt:"",mx:[],Dt:m,Fz:[],bx:"ontouchstart"in window,EA:"ongesturestart"in window,Dz:o,g:function(a){s&&s.aB&&alert(a);throw Error(a);},u:function(a,b){if(a.Na){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c=c+("  to value: "+b));t.g(c)}},c:function(a,b,c,d){if(!(a instanceof b)){c=t.ih(c);d!==f&&(c=c+("."+d));t.wc(a,b,c)}},e:function(a,b,c,d){if(typeof a!==b){c=t.ih(c);d!==f&&(c=c+("."+
d));t.wc(a,b,c)}},h:function(a,b,c){if(!isFinite(a)){b=t.ih(b);c!==f&&(b=b+("."+c));t.g(b+" must be a real number and not NaN or Infinity: "+a)}},Va:function(a,b,c,d){if(!(a instanceof qa)||a.Nd!==b){c=t.ih(c);d!==f&&(c=c+("."+d));t.wc(a,"a constant of class "+t.Vi(b),c)}},wc:function(a,b,c,d){b=t.ih(b);c=t.ih(c);d!==f&&(c=c+("."+d));t.g(c+" value is not an instance of "+b+": "+a)},ga:function(a,b,c,d){c=t.ih(c);d!==f&&(c=c+("."+d));t.g(c+" is not in the range "+b+": "+a)},trace:function(a){window&&
window.console&&window.console.log(a)},isArray:function(a){return a instanceof Array||a instanceof NodeList||a instanceof HTMLCollection},eB:function(a,b,c){t.isArray(a)||t.wc(a,"Array or NodeList or HTMLCollection",b,c)},Eb:function(a){return a.length},rb:function(a,b){return a[b]},aF:function(a,b,c){a instanceof Array?a[b]=c:t.g("Cannot replace an object in an HTMLCollection or NodeList at "+b)},Ax:function(a,b){if(a instanceof Array)return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===
b)return d;return-1},Uh:function(a,b,c){a instanceof Array?b>=a.length?a.push(c):a.splice(b,0,c):t.g("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Vh:function(a,b){a instanceof Array?b>=a.length?a.pop():a.splice(b,1):t.g("Cannot remove an object from an HTMLCollection or NodeList at "+b)},oz:1,Lb:function(a){a.__gohashid=t.oz++},Bn:function(a){var b=a.__gohashid;if(b===f){b=t.oz++;a.__gohashid=b}return b},jc:function(a){return a.__gohashid},a:function(a,b,c){a[b]=c},
J:function(a,b){b.uz=a;ga[a]=b},ua:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){t.e(a,"function","Util.defineProperty:classfunc");t.e(b,"object","Util.defineProperty:propname");t.e(c,"function","Util.defineProperty:getter");t.e(d,"function","Util.defineProperty:setter");c={get:c,set:d};if(e!==f)for(var g in e)c[g]=e[g];for(var i in b){Object.defineProperty(a.prototype,i,c);e=Object.getOwnPropertyDescriptor(a.prototype,
i);b[i]&&e&&Object.defineProperty(a.prototype,b[i],e)}},m:function(a,b,c,d){t.e(a,"function","Util.defineReadOnlyProperty:classfunc");t.e(b,"object","Util.defineReadOnlyProperty:propname");t.e(c,"function","Util.defineReadOnlyProperty:getter");c={get:c,set:function(a){t.g("The property "+b+" is read-only and cannot be set to "+a)}};if(d!==f)for(var e in d)c[e]=d[e];for(var g in b){Object.defineProperty(a.prototype,g,c);d=Object.getOwnPropertyDescriptor(a.prototype,g);b[g]&&d&&Object.defineProperty(a.prototype,
b[g],d)}},sf:function(a,b){for(var c in b)b[c]=h;a.prototype.oE=b},ih:function(a){return a===f?"":typeof a==="string"?a:typeof a==="function"?t.Vi(a):a===m?"*":""},Vi:function(a){return typeof a==="function"?a.uz:typeof a==="object"&&a.constructor?a.constructor.uz:typeof a},l:function(a,b,c){t.e(a,"function","Util.defineEnumValue:classfunc");t.e(b,"string","Util.defineEnumValue:name");t.e(c,"number","Util.defineEnumValue:num");c=new qa(a,b,c);Object.freeze(c);a[b]=c;var d=a.nz;if(!d){d=new ra("string",
qa);a.nz=d}d.add(b,c);return c},Zx:function(a,b){if(!b)return m;t.e(a,"function","Util.findEnumValueForName:classfunc");t.e(b,"string","Util.findEnumValueForName:name");var c=a.nz;return!c?m:c.da(b)},iF:function(a,b,c,d){var e={},g;for(g in a){for(var i=o,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Za:function(a,b){if(!a||!b)return m;var c=f;try{if(b instanceof Function)c=b(a);else if(typeof a.getAttribute==="function"){c=a.getAttribute(b);c===m&&(c=f)}else c=
a[b]}catch(d){s&&t.trace("property get error: "+d.toString())}return c},fb:function(a,b,c){if(a&&b)try{b instanceof Function?b(a,c):typeof a.setAttribute==="function"?a.setAttribute(b,c):a[b]=c}catch(d){s&&t.trace("property set error: "+d.toString())}},Sy:function(a,b){t.e(a,"object","Setting properties requires Objects as arguments");t.e(b,"object","Setting properties requires Objects as arguments");b.constructor!==Object&&t.g("Properties must be on a plain Object, not: "+b.toString());var c=s;c||
(s=t);var d=a instanceof v,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");if(j>0){var k=e.substring(0,j),g=a.Pe(k);g!==m?i=e.substr(j+1):t.g("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}i[0]!=="_"&&!t.iy(g,i)&&t.g('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e];if(i[0]==="_"){j=g.Mk;if(!j){j=[];g.Mk=j}j.push(i)}}s=c;return a},iy:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;
var d=c.oE;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return o},fB:function(a,b){if(!(b instanceof Object)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if(typeof d!=="string"){c===""&&(c=b+"\n");c=c+("  "+d+" is not a string property\n")}else if(d.charAt(0)!=="_"&&!(d.length<=2)){var e=t.Za(b,d);if(e!==m&&typeof e!=="function"&&!t.iy(b,d)){c===""&&(c=b+"\n");c=c+('  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}}return c},ws:function(a,b){if(b&&
!(typeof b==="number"||typeof b==="string"||typeof b==="boolean"||typeof b==="function"))if(t.jc(b)!==f){if(!t.Mt.contains(b)){t.Mt.add(b);t.lt.add(t.fB(a,b));if(b instanceof z||b instanceof ta||b instanceof ra)for(var c=b.f;c.next();)t.ws(a+"["+c.key+"]",c.value);else for(c in b){var d=t.Za(b,c);if(!(d===f||d===m||!(d instanceof Object))&&c!=="_ownProperties"){if(b instanceof ua){if(c==="_lines")continue}else if(b instanceof v){if(c==="data"||c==="_data")continue;if(c==="itemArray"||c==="_itemArray")continue}else if(!(b instanceof
A))if(b instanceof va){if(c==="archetypeGroupData"||c==="_archetypeGroupData")continue}else if(b instanceof wa){if(c==="archetypeLinkData"||c==="_archetypeLinkData")continue;if(c==="archetypeLabelNodeData"||c==="_archetypeLabelNodeData")continue}else if(b instanceof xa){if(c==="archetypeNodeData"||c==="_archetypeNodeData")continue}else if(b instanceof C){if(c==="nodeDataArray"||c==="_nodeDataArray")continue;if(c==="linkDataArray"||c==="_linkDataArray"||c==="_linkDataSet")continue;if(c==="_mapKeyNodeData"||
c==="_delayedNodeReferences")continue}t.ws(a+"."+c,d)}}}}else if(b instanceof Array)for(c=0;c<b.length;c++)t.ws(a+"["+c+"]",b[c]);else t.lt.add(t.fB(a,b))},dF:function(a){t.Mt===f?t.Mt=new ta:t.Mt.clear();t.lt=new ya;t.ws("",a);a=t.lt.toString();t.lt=m;return a},AG:function(a){for(var b=[],c=0;c<256;c++)b[c]=c;for(var d=0,e,c=0;c<256;c++){d=(d+b[c]+119)%256;e=b[c];b[c]=b[d];b[d]=e}for(var d=c=0,g="",i=0;i<a.length;i++){c=(c+1)%256;d=(d+b[c])%256;e=b[c];b[c]=b[d];b[d]=e;g=g+String.fromCharCode(a.charCodeAt(i)^
b[(b[c]+b[d])%256])}return g},PF:function(a){for(var b=[],c=0;c<256;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c=c+2)d[e++]=b[a.substr(c,2)];a=d.join("");return a===""?"0":a},fc:function(a){return t.AG(t.PF(a))},nv:m,GE:"7da71ca0ad381e90",eF:"@COLOR1",fF:"@COLOR2"},Aa=t,Da=document.createElement("canvas"),Ea=Da.getContext("2d");Ea[t.fc("7ca11abfd022028846")]=t.fc("398c3597c01238");
for(var Fa=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22462913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],Ga=1;5>Ga;Ga++)Ea[t.fc("7ca11abfd7330390")](t.fc(Fa[Ga-1]),10,15*Ga+0);Ea[t.fc("7ca11abfd022028846")]=t.fc("39f046ebb36e4b");for(Ga=1;5>Ga;Ga++)Ea[t.fc("7ca11abfd7330390")](t.fc(Fa[Ga-1]),10,15*Ga+0);Aa.nv=Da;function qa(a,b,c){t.Lb(this);this.tz=a;this.vb=b;this.vE=c}
qa.prototype.toString=function(){return t.Vi(this.tz)+"."+this.vb};t.m(qa,{Nd:"classType"},r("tz"));t.m(qa,{name:"name"},r("vb"));t.m(qa,{value:"value"},r("vE"));function ya(){this.Vv=[];this.Ej=0;this.GA="  "}ya.prototype.toString=function(){return this.Vv.join("")};ya.prototype.add=function(a){a&&this.Vv.push(a)};function Ja(a){a.Ej--;if(a.Ej<0)a.Ej=0}function Ka(a){for(var b="\n",c=a.Ej;c>0;c--)b=b+a.GA;a.Vv.push(b)}function La(){}t.m(La,{f:"iterator"},function(){return this});
La.prototype.reset=La.prototype.reset=aa();La.prototype.next=La.prototype.next=ca(o);t.m(La,{count:"count"},ca(0));La.prototype.Rf=aa();La.prototype.toString=ca("EmptyIterator");t.Kf=new La;function Ma(a){this.key=-1;this.value=a}t.sf(Ma,{key:h,value:h});t.m(Ma,{f:"iterator"},function(){return this});Ma.prototype.reset=Ma.prototype.reset=function(){this.key=-1};Ma.prototype.next=Ma.prototype.next=function(){if(this.key===-1){this.key=0;return h}return o};t.m(Ma,{count:"count"},ca(1));
Ma.prototype.Rf=function(){this.value=m};Ma.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Na(a){this.Yf=a;this.Et=m;this.reset()}t.sf(Na,{key:h,value:h});t.m(Na,{f:"iterator"},function(){return this});t.a(Na,"predicate",Na.prototype.Wu);t.defineProperty(Na,{Wu:"predicate"},r("Et"),ba("Et"));Na.prototype.reset=Na.prototype.reset=function(){var a=this.Yf;a.Jg=m;this.cb=a.Ub;this.W=-1};
Na.prototype.next=Na.prototype.next=function(){var a=this.Yf;a.Ub!==this.cb&&t.g("the List has been modified during iteration");var a=a.j,b=a.length,c=++this.W,d=this.Et;if(d!==m)for(;c<b;){var e=a[c];if(d(e)){this.key=this.W=c;this.value=e;return h}c++}else{if(c<b){this.key=c;this.value=a[c];return h}this.Rf()}return o};t.m(Na,{count:"count"},function(){var a=this.Et;if(a!==m){for(var b=0,c=this.Yf.j,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Yf.j.length});
Na.prototype.Rf=function(){this.key=-1;this.value=m;this.cb=-1;this.Yf.Jg=this};Na.prototype.toString=function(){return"ListIterator@"+this.W+"/"+this.Yf.count};function Pa(a){this.Yf=a;this.reset()}t.sf(Pa,{key:h,value:h});t.m(Pa,{f:"iterator"},function(){return this});Pa.prototype.reset=Pa.prototype.reset=function(){var a=this.Yf;a.zw=m;this.cb=a.Ub;this.W=a.j.length};
Pa.prototype.next=Pa.prototype.next=function(){var a=this.Yf;a.Ub!==this.cb&&t.g("the List has been modified during iteration");var b=--this.W;if(b>=0){this.key=b;this.value=a.j[b];return h}this.Rf();return o};t.m(Pa,{count:"count"},function(){return this.Yf.j.length});Pa.prototype.Rf=function(){this.key=-1;this.value=m;this.cb=-1;this.Yf.zw=this};Pa.prototype.toString=function(){return"ListIteratorBackwards("+this.W+"/"+this.Yf.count+")"};
function z(a){t.Lb(this);this.Na=o;this.j=[];this.Ub=0;this.zw=this.Jg=m;a===f||a===m?this.K=m:typeof a==="string"?a==="string"||a==="number"||a==="boolean"||a==="function"?this.K=a:t.ga(a,"the string 'number', 'string', 'boolean', or 'function'","List constructor: type"):typeof a==="function"?this.K=a:t.ga(a,"null, a primitive type name, or a class type","List constructor: type")}t.J("List",z);
z.prototype.Mf=function(a){this.K!==m&&(typeof this.K==="string"?typeof a!==this.K&&t.wc(a,this.K):a instanceof this.K||t.wc(a,this.K))};z.prototype.ad=function(){var a=this.Ub;a++;a>999999999&&(a=0);this.Ub=a};z.prototype.freeze=z.prototype.freeze=function(){this.Na=h;return this};z.prototype.thaw=z.prototype.Ba=function(){this.Na=o;return this};z.prototype.toString=function(){return"List("+t.ih(this.K)+")#"+t.jc(this)};
z.prototype.add=z.prototype.add=function(a){if(a!==m){s&&this.Mf(a);t.u(this,a);this.j.push(a);this.ad()}};z.prototype.addAll=z.prototype.kg=function(a){if(a===m)return this;t.u(this);var b=this.j;if(t.isArray(a))for(var c=t.Eb(a),d=0;d<c;d++){var e=t.rb(a,d);s&&this.Mf(e);b.push(e)}else for(a=a.f;a.next();){e=a.value;s&&this.Mf(e);b.push(e)}this.ad();return this};z.prototype.clear=z.prototype.clear=function(){t.u(this);this.j=[];this.ad()};
z.prototype.contains=z.prototype.contains=function(a){if(a===m)return o;s&&this.Mf(a);return this.j.indexOf(a)!==-1};z.prototype.indexOf=z.prototype.indexOf=function(a){if(a===m)return-1;s&&this.Mf(a);return this.j.indexOf(a)};z.prototype.elt=z.prototype.V=function(a){s&&t.h(a,z,"elt:i");var b=this.j;(a<0||a>=b.length)&&t.ga(a,"0 <= i < length",z,"elt:i");return b[a]};
z.prototype.setElt=z.prototype.cv=function(a,b){if(s){this.Mf(b);t.h(a,z,"setElt:i")}var c=this.j;(a<0||a>=c.length)&&t.ga(a,"0 <= i < length",z,"setElt:i");t.u(this,a);c[a]=b};z.prototype.first=z.prototype.hc=function(){var a=this.j;return a.length===0?m:a[0]};z.prototype.insertAt=z.prototype.kc=function(a,b){if(s){this.Mf(b);t.h(a,z,"insertAt:i")}a<0&&t.ga(a,">= 0",z,"insertAt:i");t.u(this,a);var c=this.j;a>=c.length?c.push(b):c.splice(a,0,b);this.ad();return h};
z.prototype.remove=z.prototype.remove=function(a){if(a===m)return o;s&&this.Mf(a);t.u(this,a);var b=this.j,a=b.indexOf(a);if(a===-1)return o;a===b.length-1?b.pop():b.splice(a,1);this.ad();return h};z.prototype.removeAt=z.prototype.We=function(a){s&&t.h(a,z,"removeAt:i");var b=this.j;(a<0||a>=b.length)&&t.ga(a,"0 <= i < length",z,"removeAt:i");t.u(this,a);a===b.length-1?b.pop():b.splice(a,1);this.ad()};
z.prototype.removeRange=z.prototype.removeRange=function(a,b){if(s){t.h(a,z,"removeRange:from");t.h(b,z,"removeRange:to")}var c=this.j;(a<0||a>=c.length)&&t.ga(a,"0 <= from < length",z,"elt:from");(b<0||b>=c.length)&&t.ga(b,"0 <= to < length",z,"elt:to");t.u(this,a);var d=c.slice((b||a)+1||c.length);c.length=a<0?c.length+a:a;c.push.apply(c,d);this.ad()};z.prototype.copy=z.prototype.copy=function(){for(var a=new z(this.K),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
z.prototype.toArray=z.prototype.Jf=function(){for(var a=[],b=this.j,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};z.prototype.toSet=z.prototype.bH=function(){for(var a=new ta(this.K),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};z.prototype.sort=z.prototype.sort=function(a){s&&t.e(a,"function",z,"sort:sortfunc");t.u(this);this.j.sort(a);this.ad();return this};
z.prototype.sortRange=z.prototype.bo=function(a,b,c){var d=this.j,e=d.length;b===f&&(b=0);c===f&&(c=e);if(s){t.e(a,"function",z,"sortRange:sortfunc");t.h(b,z,"sortRange:from");t.h(c,z,"sortRange:to")}t.u(this);var g=c-b;if(g<=1)return this;(b<0||b>=e-1)&&t.ga(b,"0 <= from < length",z,"sortRange:from");if(g===2){c=d[b];e=d[b+1];if(a(c,e)>0){d[b]=e;d[b+1]=c;this.ad()}return this}if(b===0)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.ad();return this};z.prototype.reverse=z.prototype.reverse=function(){t.u(this);this.j.reverse();this.ad();return this};t.m(z,{count:"count"},function(){return this.j.length});t.m(z,{length:"length"},function(){return this.j.length});t.m(z,{f:"iterator"},function(){if(this.j.length<=0)return t.Kf;var a=this.Jg;if(a!==m){a.reset();return a}return new Na(this)});
t.m(z,{En:"iteratorBackwards"},function(){if(this.j.length<=0)return t.Kf;var a=this.zw;if(a!==m){a.reset();return a}return new Pa(this)});function Ra(a){this.$d=a;this.reset()}t.sf(Ra,{key:h,value:h});t.m(Ra,{f:"iterator"},function(){return this});Ra.prototype.reset=Ra.prototype.reset=function(){var a=this.$d;a.Jg=m;this.cb=a.Ub;this.Xd=m};
Ra.prototype.next=Ra.prototype.next=function(){var a=this.$d;a.Ub!==this.cb&&t.g("the Set has been modified during iteration");var b=this.Xd,b=b===m?a.af:b.zi;if(b!==m){this.Xd=b;this.value=b.value;this.key=b.key;return h}this.Rf();return o};t.m(Ra,{count:"count"},function(){return this.$d.Ud});Ra.prototype.Rf=function(){this.value=m;this.cb=-1;this.$d.Jg=this};Ra.prototype.toString=function(){return this.Xd!==m?"SetIterator@"+this.Xd.value:"SetIterator"};
function ta(a){t.Lb(this);this.Na=o;a===f||a===m?this.K=m:typeof a==="string"?a==="string"||a==="number"?this.K=a:t.ga(a,"the string 'number' or 'string'","Set constructor: type"):typeof a==="function"?this.K=a:t.ga(a,"null, a primitive type name, or a class type","Set constructor: type");this.nc={};this.Ud=0;this.Jg=m;this.Ub=0;this.Kg=this.af=m}t.J("Set",ta);ta.prototype.Mf=function(a){this.K!==m&&(typeof this.K==="string"?typeof a!==this.K&&t.wc(a,this.K):a instanceof this.K||t.wc(a,this.K))};
ta.prototype.ad=function(){var a=this.Ub;a++;a>999999999&&(a=0);this.Ub=a};ta.prototype.freeze=ta.prototype.freeze=function(){this.Na=h;return this};ta.prototype.thaw=ta.prototype.Ba=function(){this.Na=o;return this};ta.prototype.toString=function(){return"Set("+t.ih(this.K)+")#"+t.jc(this)};
ta.prototype.add=ta.prototype.add=function(a){if(a===m)return o;s&&this.Mf(a);t.u(this,a);var b=a;a instanceof Object&&(b=t.Bn(a));if(this.nc[b]===f){this.Ud++;a=new Sa(a,a);this.nc[b]=a;b=this.Kg;if(b===m)this.af=a;else{a.Gm=b;b.zi=a}this.Kg=a;this.ad();return h}return o};ta.prototype.addAll=ta.prototype.kg=function(a){if(a===m)return this;t.u(this);if(t.isArray(a))for(var b=t.Eb(a),c=0;c<b;c++)this.add(t.rb(a,c));else for(a=a.f;a.next();)this.add(a.value);return this};
ta.prototype.contains=ta.prototype.contains=function(a){if(a===m)return o;s&&this.Mf(a);var b=a;if(a instanceof Object){b=t.jc(a);if(b===f)return o}return this.nc[b]!==f};ta.prototype.containsAll=ta.prototype.iI=function(a){if(a===m)return h;for(a=a.f;a.next();)if(!this.contains(a.value))return o;return h};ta.prototype.containsAny=ta.prototype.jI=function(a){if(a===m)return h;for(a=a.f;a.next();)if(this.contains(a.value))return h;return o};
ta.prototype.first=ta.prototype.hc=function(){var a=this.af;return a===m?m:a.value};ta.prototype.remove=ta.prototype.remove=function(a){if(a===m)return o;s&&this.Mf(a);t.u(this,a);var b=a;if(a instanceof Object){b=t.jc(a);if(b===f)return o}a=this.nc[b];if(a===f)return o;var c=a.zi,d=a.Gm;if(c!==m)c.Gm=d;if(d!==m)d.zi=c;if(this.af===a)this.af=c;if(this.Kg===a)this.Kg=d;delete this.nc[b];this.Ud--;this.ad();return h};
ta.prototype.removeAll=ta.prototype.ZJ=function(a){if(a===m)return this;t.u(this);for(a=a.f;a.next();)this.remove(a.value);return this};ta.prototype.retainAll=ta.prototype.gK=function(a){if(a===m||this.count===0)return this;t.u(this);var b=new ta(this.K);b.kg(a);for(var a=new z(this.K),c=this.f;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.f;b.next();)this.remove(b.value);return this};ta.prototype.clear=ta.prototype.clear=function(){t.u(this);this.nc={};this.Ud=0;this.Kg=this.af=m;this.ad()};
ta.prototype.copy=ta.prototype.copy=function(){var a=new ta(this.K),b=this.nc,c;for(c in b)a.add(b[c].value);return a};ta.prototype.toArray=ta.prototype.Jf=function(){var a=[],b=this.nc,c;for(c in b)a.push(b[c].value);return a};ta.prototype.toList=ta.prototype.aH=function(){var a=new z(this.K),b=this.nc,c;for(c in b)a.add(b[c]);return a};t.m(ta,{count:"count"},r("Ud"));t.m(ta,{f:"iterator"},function(){if(this.Ud<=0)return t.Kf;var a=this.Jg;if(a!==m){a.reset();return a}return new Ra(this)});
function Ua(a){this.$c=a;this.reset()}t.sf(Ua,{key:h,value:h});t.m(Ua,{f:"iterator"},function(){return this});Ua.prototype.reset=Ua.prototype.reset=function(){this.cb=this.$c.Ub;this.Xd=m};Ua.prototype.next=Ua.prototype.next=function(){var a=this.$c;a.Ub!==this.cb&&t.g("the Map has been modified during iteration");var b=this.Xd,b=b===m?a.af:b.zi;if(b!==m){this.Xd=b;this.value=b.key;return h}this.Rf();return o};t.m(Ua,{count:"count"},function(){return this.$c.Ud});
Ua.prototype.Rf=function(){this.value=m;this.cb=-1};Ua.prototype.toString=function(){return this.Xd!==m?"MapKeySetIterator@"+this.Xd.value:"MapKeySetIterator"};function Xa(a){t.Lb(this);this.$c=a}t.ua(Xa,ta);Xa.prototype.freeze=function(){return this};Xa.prototype.Ba=function(){return this};Xa.prototype.toString=function(){return"MapKeySet("+this.$c.toString()+")"};Xa.prototype.add=Xa.prototype.add=function(){t.g("This Set is read-only: "+this.toString());return o};
Xa.prototype.contains=Xa.prototype.contains=function(a){return this.$c.contains(a)};Xa.prototype.remove=Xa.prototype.remove=function(){t.g("This Set is read-only: "+this.toString());return o};Xa.prototype.clear=Xa.prototype.clear=function(){t.g("This Set is read-only: "+this.toString())};Xa.prototype.copy=Xa.prototype.copy=function(){return new Xa(this.$c)};Xa.prototype.toSet=Xa.prototype.bH=function(){var a=new ta(this.$c.K),b=this.$c.nc,c;for(c in b)a.add(b[c].key);return a};
Xa.prototype.toArray=Xa.prototype.Jf=function(){var a=[],b=this.$c.nc,c;for(c in b)a.push(b[c].key);return a};Xa.prototype.toList=Xa.prototype.aH=function(){var a=new z(this.K),b=this.$c.nc,c;for(c in b)a.add(b[c].key);return a};t.m(Xa,{count:"count"},function(){return this.$c.Ud});t.m(Xa,{f:"iterator"},function(){return this.$c.Ud<=0?t.Kf:new Ua(this.$c)});function Sa(a,b){this.key=a;this.value=b;this.Gm=this.zi=m}t.sf(Sa,{key:h,value:h});
Sa.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function $a(a){this.$c=a;this.reset()}t.sf($a,{key:h,value:h});t.m($a,{f:"iterator"},function(){return this});$a.prototype.reset=$a.prototype.reset=function(){var a=this.$c;a.Jg=m;this.cb=a.Ub;this.Xd=m};
$a.prototype.next=$a.prototype.next=function(){var a=this.$c;a.Ub!==this.cb&&t.g("the Map has been modified during iteration");var b=this.Xd,b=b===m?a.af:b.zi;if(b!==m){this.Xd=b;this.key=b.key;this.value=b.value;return h}this.Rf();return o};t.m($a,{count:"count"},function(){return this.$c.Ud});$a.prototype.Rf=function(){this.value=this.key=m;this.cb=-1;this.$c.Jg=this};$a.prototype.toString=function(){return this.Xd!==m?"MapIterator@"+this.Xd:"MapIterator"};
function ra(a,b){t.Lb(this);this.Na=o;a===f||a===m?this.Dh=m:typeof a==="string"?a==="string"||a==="number"?this.Dh=a:t.ga(a,"the string 'number' or 'string'","Map constructor: keytype"):typeof a==="function"?this.Dh=a:t.ga(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===m?this.Rh=m:typeof b==="string"?b==="string"||b==="boolean"||b==="number"||b==="function"?this.Rh=b:t.ga(b,"the string 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):
typeof b==="function"?this.Rh=b:t.ga(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.nc={};this.Ud=0;this.Jg=m;this.Ub=0;this.Kg=this.af=m}t.J("Map",ra);function cb(a,b){a.Dh!==m&&(typeof a.Dh==="string"?typeof b!==a.Dh&&t.wc(b,a.Dh):b instanceof a.Dh||t.wc(b,a.Dh))}ra.prototype.ad=function(){var a=this.Ub;a++;a>999999999&&(a=0);this.Ub=a};ra.prototype.freeze=ra.prototype.freeze=function(){this.Na=h;return this};
ra.prototype.thaw=ra.prototype.Ba=function(){this.Na=o;return this};ra.prototype.toString=function(){return"Map("+t.ih(this.Dh)+","+t.ih(this.Rh)+")#"+t.jc(this)};
ra.prototype.add=ra.prototype.add=function(a,b){if(s){cb(this,a);this.Rh!==m&&(typeof this.Rh==="string"?typeof b!==this.Rh&&t.wc(b,this.Rh):b instanceof this.Rh||t.wc(b,this.Rh))}t.u(this,a);var c=a;a instanceof Object&&(c=t.Bn(a));var d=this.nc[c];if(d===f){this.Ud++;d=new Sa(a,b);this.nc[c]=d;c=this.Kg;if(c===m)this.af=d;else{d.Gm=c;c.zi=d}this.Kg=d;this.ad();return h}d.value=b;return o};
ra.prototype.addAll=ra.prototype.kg=function(a){if(a===m)return this;s&&t.c(a,ra,ra,"addAll:map");for(a=a.f;a.next();)this.add(a.key,a.value);return this};ra.prototype.contains=ra.prototype.contains=function(a){s&&cb(this,a);var b=a;if(a instanceof Object){b=t.jc(a);if(b===f)return o}return this.nc[b]!==f};ra.prototype.getValue=ra.prototype.da=function(a){s&&cb(this,a);var b=a;if(a instanceof Object){b=t.jc(a);if(b===f)return m}a=this.nc[b];return a===f?m:a.value};
ra.prototype.remove=ra.prototype.remove=function(a){if(a===m)return o;s&&cb(this,a);t.u(this,a);var b=a;if(a instanceof Object){b=t.jc(a);if(b===f)return o}a=this.nc[b];if(a===f)return o;var c=a.zi,d=a.Gm;if(c!==m)c.Gm=d;if(d!==m)d.zi=c;if(this.af===a)this.af=c;if(this.Kg===a)this.Kg=d;delete this.nc[b];this.Ud--;this.ad();return h};ra.prototype.clear=ra.prototype.clear=function(){t.u(this);this.nc={};this.Ud=0;this.Kg=this.af=m;this.ad()};
ra.prototype.copy=ra.prototype.copy=function(){var a=new ra(this.Dh,this.Rh),b=this.nc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ra.prototype.toArray=ra.prototype.Jf=function(){var a=[],b=this.nc,c;for(c in b){var d=b[c];a.push(new Sa(d.key,d.value))}return a};ra.prototype.toKeySet=ra.prototype.hj=function(){return new Xa(this)};t.m(ra,{count:"count"},r("Ud"));t.m(ra,{f:"iterator"},function(){if(this.count<=0)return t.Kf;var a=this.Jg;if(a!==m){a.reset();return a}return new $a(this)});
function D(a,b){if(a===f)this.s=this.r=0;else if(typeof a==="number"&&typeof b==="number"){this.r=a;this.s=b}else t.g("Invalid arguments to Point constructor")}t.J("Point",D);D.prototype.Ua=function(a){s&&t.c(a,D,D,"assign:p");this.r=a.r;this.s=a.s};D.prototype.$d=function(a,b){this.r=a;this.s=b};D.prototype.setTo=D.prototype.as=function(a,b){if(s){t.e(a,"number",D,"setTo:x");t.e(b,"number",D,"setTo:y")}t.u(this);this.r=a;this.s=b;return this};
D.prototype.set=D.prototype.set=function(a){s&&t.c(a,D,D,"set:p");t.u(this);this.r=a.r;this.s=a.s;return this};D.prototype.copy=D.prototype.copy=function(){var a=new D;a.r=this.r;a.s=this.s;return a};D.prototype.Ka=function(){this.Na=h;Object.freeze(this);return this};D.prototype.D=function(){return Object.isFrozen(this)?this:this.copy().freeze()};D.prototype.freeze=function(){this.Na=h;return this};D.prototype.Ba=function(){Object.isFrozen(this)&&t.g("cannot thaw constant: "+this);this.Na=o;return this};
D.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));return new D(c,e)}return new D};var eb;D.stringify=eb=function(a){return a instanceof D?a.x.toString()+" "+a.y.toString():a.toString()};D.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};D.prototype.equals=D.prototype.z=function(a){return!(a instanceof D)?o:this.r===a.x&&this.s===a.y};
D.prototype.equalTo=D.prototype.Yx=function(a,b){return this.r===a&&this.s===b};D.prototype.Au=function(a){return fb(this.r,a.x)&&fb(this.s,a.y)};D.prototype.mk=function(a){return gb(this.r,a.x)&&gb(this.s,a.y)};D.prototype.add=D.prototype.add=function(a){s&&t.c(a,D,D,"add:p");t.u(this);this.r=this.r+a.x;this.s=this.s+a.y;return this};D.prototype.subtract=D.prototype.es=function(a){s&&t.c(a,D,D,"subtract:p");t.u(this);this.r=this.r-a.x;this.s=this.s-a.y;return this};
D.prototype.offset=D.prototype.offset=function(a,b){if(s){t.h(a,D,"offset:dx");t.h(b,D,"offset:dy")}t.u(this);this.r=this.r+a;this.s=this.s+b;return this};D.prototype.rotate=D.prototype.rotate=function(a){s&&t.h(a,D,"rotate:angle");t.u(this);if(a===0)return this;var b=this.r,c=this.s;if(b===0&&c===0)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.r=a*b-d*c;this.s=d*b+a*c;return this};
D.prototype.scale=D.prototype.scale=function(a,b){if(s){t.h(a,D,"scale:sx");t.h(b,D,"scale:sy")}this.r=this.r*a;this.s=this.s*b;return this};D.prototype.distanceSquaredPoint=D.prototype.$h=function(a){s&&t.c(a,D,D,"distanceSquaredPoint:p");var b=a.x-this.r,a=a.y-this.s;return b*b+a*a};D.prototype.distanceSquared=D.prototype.vI=function(a,b){if(s){t.h(a,D,"distanceSquared:px");t.h(b,D,"distanceSquared:py")}var c=a-this.r,d=b-this.s;return c*c+d*d};
D.prototype.normalize=D.prototype.normalize=function(){t.u(this);var a=this.r,b=this.s,c=Math.sqrt(a*a+b*b);if(c>0){this.r=a/c;this.s=b/c}return this};D.prototype.directionPoint=D.prototype.Zh=function(a){s&&t.c(a,D,D,"directionPoint:p");return jb(a.x-this.r,a.y-this.s)};D.prototype.direction=D.prototype.direction=function(a,b){if(s){t.h(a,D,"direction:px");t.h(b,D,"direction:py")}return jb(a-this.r,b-this.s)};
function jb(a,b){if(a===0)return b>0?90:b<0?270:0;if(b===0)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;var c=Math.atan(Math.abs(b/a))*180/Math.PI;a<0?c=b<0?c+180:180-c:b<0&&(c=360-c);return c}D.prototype.setRectSpot=D.prototype.ao=function(a,b){if(s){t.c(a,E,D,"setRectSpot:r");t.c(b,J,D,"setRectSpot:spot")}t.u(this);this.r=a.x+b.x*a.width+b.offsetX;this.s=a.y+b.y*a.height+b.offsetY;return this};
D.prototype.setSpot=D.prototype.Nl=function(a,b,c,d,e){if(s){t.h(a,D,"setSpot:x");t.h(b,D,"setSpot:y");t.h(c,D,"setSpot:w");t.h(d,D,"setSpot:h");(c<0||d<0)&&t.g("Point.setSpot:Width and height cannot be negative");t.c(e,J,D,"setSpot:spot")}t.u(this);this.r=a+e.x*c+e.offsetX;this.s=b+e.y*d+e.offsetY;return this};D.prototype.transform=function(a){s&&t.c(a,kb,D,"transform:t");a.Bb(this);return this};function lb(a,b){s&&t.c(b,kb,D,"transformInverted:t");b.fi(a);return a}var nb;
D.distanceLineSegmentSquared=nb=function(a,b,c,d,e,g){if(s){t.h(a,D,"distanceLineSegmentSquared:px");t.h(b,D,"distanceLineSegmentSquared:py");t.h(c,D,"distanceLineSegmentSquared:ax");t.h(d,D,"distanceLineSegmentSquared:ay");t.h(e,D,"distanceLineSegmentSquared:bx");t.h(g,D,"distanceLineSegmentSquared:by")}var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(l<=0||l>=k){i=e-a;j=g-b;return Math.min(c*c+d*d,i*i+j*j)}a=i*d-j*c;return a*a/k};
D.distanceSquared=function(a,b,c,d){if(s){t.h(a,D,"distanceSquared:px");t.h(b,D,"distanceSquared:py");t.h(c,D,"distanceSquared:qx");t.h(d,D,"distanceSquared:qy")}a=c-a;b=d-b;return a*a+b*b};var ob;
D.direction=ob=function(a,b,c,d){if(s){t.h(a,D,"direction:px");t.h(b,D,"direction:py");t.h(c,D,"direction:qx");t.h(d,D,"direction:qy")}a=c-a;b=d-b;if(a===0)return b>0?90:b<0?270:0;if(b===0)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;d=Math.atan(Math.abs(b/a))*180/Math.PI;a<0?d=b<0?d+180:180-d:b<0&&(d=360-d);return d};t.a(D,"x",D.prototype.x);t.defineProperty(D,{x:"x"},r("r"),function(a){t.u(this,a);s&&t.e(a,"number",D,"x");this.r=a});t.a(D,"y",D.prototype.y);
t.defineProperty(D,{y:"y"},r("s"),function(a){t.u(this,a);s&&t.e(a,"number",D,"y");this.s=a});D.prototype.isReal=D.prototype.aa=function(){return isFinite(this.x)&&isFinite(this.y)};function K(a,b){if(a===f)this.Z=this.$=0;else if(typeof a==="number"&&(a>=0||isNaN(a))&&typeof b==="number"&&(b>=0||isNaN(b))){this.$=a;this.Z=b}else t.g("Invalid arguments to Size constructor")}t.J("Size",K);K.prototype.Ua=function(a){s&&t.c(a,K,K,"assign:s");this.$=a.$;this.Z=a.Z};
K.prototype.$d=function(a,b){this.$=a;this.Z=b};K.prototype.setTo=K.prototype.as=function(a,b){if(s){t.e(a,"number",K,"setTo:w");t.e(b,"number",K,"setTo:h")}a<0&&t.ga(a,">= 0",K,"setTo:w");b<0&&t.ga(b,">= 0",K,"setTo:h");t.u(this);this.$=a;this.Z=b;return this};K.prototype.set=K.prototype.set=function(a){s&&t.c(a,K,K,"set:s");t.u(this);this.$=a.$;this.Z=a.Z;return this};K.prototype.copy=K.prototype.copy=function(){var a=new K;a.$=this.$;a.Z=this.Z;return a};
K.prototype.Ka=function(){this.Na=h;Object.freeze(this);return this};K.prototype.D=function(){return Object.isFrozen(this)?this:this.copy().freeze()};K.prototype.freeze=function(){this.Na=h;return this};K.prototype.Ba=function(){Object.isFrozen(this)&&t.g("cannot thaw constant: "+this);this.Na=o;return this};
K.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));return new K(c,e)}return new K};var qb;K.stringify=qb=function(a){return a instanceof K?a.width.toString()+" "+a.height.toString():a.toString()};K.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
K.prototype.equals=K.prototype.z=function(a){return!(a instanceof K)?o:this.$===a.width&&this.Z===a.height};K.prototype.equalTo=K.prototype.Yx=function(a,b){return this.$===a&&this.Z===b};K.prototype.Au=function(a){return fb(this.$,a.width)&&fb(this.Z,a.height)};K.prototype.mk=function(a){return gb(this.$,a.width)&&gb(this.Z,a.height)};t.a(K,"width",K.prototype.width);
t.defineProperty(K,{width:"width"},r("$"),function(a){t.u(this,a);s&&t.e(a,"number",K,"width");a<0&&t.ga(a,">= 0",K,"width");this.$=a});t.a(K,"height",K.prototype.height);t.defineProperty(K,{height:"height"},r("Z"),function(a){t.u(this,a);s&&t.e(a,"number",K,"height");a<0&&t.ga(a,">= 0",K,"height");this.Z=a});K.prototype.isReal=K.prototype.aa=function(){return isFinite(this.width)&&isFinite(this.height)};
function E(a,b,c,d){if(a===f)this.Z=this.$=this.s=this.r=0;else if(a instanceof D)if(b instanceof D){this.r=Math.min(a.r,b.r);this.s=Math.min(a.s,b.s);this.$=Math.abs(a.r-b.r);this.Z=Math.abs(a.s-b.s)}else if(b instanceof K){this.r=a.r;this.s=a.s;this.$=b.$;this.Z=b.Z}else t.g("Incorrect arguments supplied");else if(typeof a==="number"&&typeof b==="number"&&typeof c==="number"&&(c>=0||isNaN(c))&&typeof d==="number"&&(d>=0||isNaN(d))){this.r=a;this.s=b;this.$=c;this.Z=d}else t.g("Invalid arguments to Rect constructor")}
t.J("Rect",E);E.prototype.Ua=function(a){s&&t.c(a,E,E,"assign:r");this.r=a.r;this.s=a.s;this.$=a.$;this.Z=a.Z};E.prototype.$d=function(a,b,c,d){this.r=a;this.s=b;this.$=c;this.Z=d};function rb(a,b,c){a.$=b;a.Z=c}E.prototype.setTo=E.prototype.as=function(a,b,c,d){if(s){t.e(a,"number",E,"setTo:x");t.e(b,"number",E,"setTo:y");t.e(c,"number",E,"setTo:w");t.e(d,"number",E,"setTo:h")}c<0&&t.ga(c,">= 0",E,"setTo:w");d<0&&t.ga(d,">= 0",E,"setTo:h");t.u(this);this.r=a;this.s=b;this.$=c;this.Z=d;return this};
E.prototype.set=E.prototype.set=function(a){s&&t.c(a,E,E,"set:r");t.u(this);this.r=a.r;this.s=a.s;this.$=a.$;this.Z=a.Z;return this};E.prototype.setPoint=E.prototype.A=function(a){s&&t.c(a,D,E,"setPoint:p");t.u(this);this.r=a.r;this.s=a.s;return this};E.prototype.setSize=E.prototype.RG=function(a){s&&t.c(a,K,E,"setSize:s");t.u(this);this.$=a.$;this.Z=a.Z;return this};E.prototype.copy=E.prototype.copy=function(){var a=new E;a.r=this.r;a.s=this.s;a.$=this.$;a.Z=this.Z;return a};
E.prototype.Ka=function(){this.Na=h;Object.freeze(this);return this};E.prototype.D=function(){return Object.isFrozen(this)?this:this.copy().freeze()};E.prototype.freeze=function(){this.Na=h;return this};E.prototype.Ba=function(){Object.isFrozen(this)&&t.g("cannot thaw constant: "+this);this.Na=o;return this};function sb(a){var b=a.count,c=h,d=m;if(b===0)return new E;for(var e=0;e<b;e++){var g=a.j[e];if(c){d=new E(g.r,g.s,0,0);c=o}else tb(d,g.r,g.s,0,0)}return d}
E.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new E(c,e,g,i)}return new E};var zb;E.stringify=zb=function(a){return a instanceof E?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
E.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};E.prototype.equals=E.prototype.z=function(a){return!(a instanceof E)?o:this.r===a.x&&this.s===a.y&&this.$===a.width&&this.Z===a.height};E.prototype.equalTo=E.prototype.Yx=function(a,b,c,d){return this.r===a&&this.s===b&&this.$===c&&this.Z===d};E.prototype.Au=function(a){return fb(this.r,a.x)&&fb(this.s,a.y)&&fb(this.$,a.width)&&fb(this.Z,a.height)};
E.prototype.mk=function(a){return gb(this.r,a.x)&&gb(this.s,a.y)&&gb(this.$,a.width)&&gb(this.Z,a.height)};E.prototype.containsPoint=E.prototype.ka=function(a){s&&t.c(a,D,E,"containsPoint:p");return this.r<=a.x&&this.r+this.$>=a.x&&this.s<=a.y&&this.s+this.Z>=a.y};E.prototype.containsRect=E.prototype.rl=function(a){s&&t.c(a,E,E,"containsRect:r");return this.r<=a.x&&a.x+a.width<=this.r+this.$&&this.s<=a.y&&a.y+a.height<=this.s+this.Z};
E.prototype.contains=E.prototype.contains=function(a,b,c,d){if(s){t.h(a,E,"contains:x");t.h(b,E,"contains:y");c===f?c=0:t.h(c,E,"contains:w");d===f?d=0:t.h(d,E,"contains:h");(c<0||d<0)&&t.g("Rect.contains:Width and height cannot be negative")}else{c===f&&(c=0);d===f&&(d=0)}return this.r<=a&&a+c<=this.r+this.$&&this.s<=b&&b+d<=this.s+this.Z};E.prototype.reset=function(){t.u(this);this.Z=this.$=this.s=this.r=0};
E.prototype.offset=E.prototype.offset=function(a,b){if(s){t.h(a,E,"offset:dx");t.h(b,E,"offset:dy")}t.u(this);this.r=this.r+a;this.s=this.s+b;return this};E.prototype.inflate=E.prototype.uf=function(a,b){if(s){t.h(a,E,"inflate:w");t.h(b,E,"inflate:h")}return Ab(this,b,a,b,a)};E.prototype.addMargin=E.prototype.wx=function(a){s&&t.c(a,Eb,E,"addMargin:m");return Ab(this,a.top,a.right,a.bottom,a.left)};
E.prototype.subtractMargin=E.prototype.xK=function(a){s&&t.c(a,Eb,E,"subtractMargin:m");return Ab(this,-a.top,-a.right,-a.bottom,-a.left)};E.prototype.grow=E.prototype.bJ=function(a,b,c,d){if(s){t.h(a,E,"grow:t");t.h(b,E,"grow:r");t.h(c,E,"grow:b");t.h(d,E,"grow:l")}return Ab(this,a,b,c,d)};function Ab(a,b,c,d,e){t.u(a);var g=a.$;if(c+e<=-g){a.r=a.r+g/2;a.$=0}else{a.r=a.r-e;a.$=a.$+(c+e)}c=a.Z;if(b+d<=-c){a.s=a.s+c/2;a.Z=0}else{a.s=a.s-b;a.Z=a.Z+(b+d)}return a}
E.prototype.intersectRect=E.prototype.lJ=function(a){s&&t.c(a,E,E,"intersectRect:r");return Fb(this,a.x,a.y,a.width,a.height)};E.prototype.intersect=E.prototype.kJ=function(a,b,c,d){if(s){t.h(a,E,"intersect:x");t.h(b,E,"intersect:y");t.h(c,E,"intersect:w");t.h(d,E,"intersect:h");(c<0||d<0)&&t.g("Rect.intersect:Width and height cannot be negative")}return Fb(this,a,b,c,d)};
function Fb(a,b,c,d,e){t.u(a);var g=Math.max(a.r,b),i=Math.max(a.s,c),b=Math.min(a.r+a.$,b+d),c=Math.min(a.s+a.Z,c+e);a.r=g;a.s=i;a.$=Math.max(0,b-g);a.Z=Math.max(0,c-i);return a}E.prototype.intersectsRect=E.prototype.ie=function(a){s&&t.c(a,E,E,"intersectsRect:r");return this.VF(a.x,a.y,a.width,a.height)};
E.prototype.intersects=E.prototype.VF=function(a,b,c,d){if(s){t.h(a,E,"intersects:x");t.h(b,E,"intersects:y");t.h(a,E,"intersects:w");t.h(b,E,"intersects:h");(c<0||d<0)&&t.g("Rect.intersects:Width and height cannot be negative")}var e=this.$,g=this.r;if(e!==Infinity&&c!==Infinity){e=e+g;c=c+a;if(isNaN(c)||isNaN(e)||g>c||a>e)return o}a=this.Z;e=this.s;if(a!==Infinity&&d!==Infinity){a=a+e;d=d+b;if(isNaN(d)||isNaN(a)||e>d||b>a)return o}return h};
E.prototype.unionPoint=E.prototype.jv=function(a){s&&t.c(a,D,E,"unionPoint:p");return tb(this,a.x,a.y,0,0)};E.prototype.unionRect=E.prototype.zk=function(a){s&&t.c(a,E,E,"unionRect:r");return tb(this,a.r,a.s,a.$,a.Z)};E.prototype.union=E.prototype.BK=function(a,b,c,d){t.u(this);if(s){t.h(a,E,"union:x");t.h(b,E,"union:y");c===f?c=0:t.h(c,E,"union:w");d===f?d=0:t.h(d,E,"union:h");(c<0||d<0)&&t.g("Rect.union:Width and height cannot be negative")}else{c===f&&(c=0);d===f&&(d=0)}return tb(this,a,b,c,d)};
function tb(a,b,c,d,e){var g=Math.min(a.r,b),i=Math.min(a.s,c),b=Math.max(a.r+a.$,b+d),c=Math.max(a.s+a.Z,c+e);a.r=g;a.s=i;a.$=b-g;a.Z=c-i;return a}E.prototype.setSpot=E.prototype.Nl=function(a,b,c){if(s){t.h(a,E,"setSpot:x");t.h(b,E,"setSpot:y");t.c(c,J,E,"setSpot:spot")}t.u(this);this.r=a-c.offsetX-c.x*this.$;this.s=b-c.offsetY-c.y*this.Z;return this};var Jb;
E.contains=Jb=function(a,b,c,d,e,g,i,j){if(s){t.h(a,E,"contains:rx");t.h(b,E,"contains:ry");t.h(c,E,"contains:rw");t.h(d,E,"contains:rh");t.h(e,E,"contains:x");t.h(g,E,"contains:y");i===f?i=0:t.h(i,E,"contains:w");j===f?j=0:t.h(j,E,"contains:h");(c<0||d<0||i<0||j<0)&&t.g("Rect.contains:Width and height cannot be negative")}else{i===f&&(i=0);j===f&&(j=0)}return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
E.intersects=function(a,b,c,d,e,g,i,j){if(s){t.h(a,E,"intersects:rx");t.h(b,E,"intersects:ry");t.h(c,E,"intersects:rw");t.h(d,E,"intersects:rh");t.h(e,E,"intersects:x");t.h(g,E,"intersects:y");t.h(i,E,"intersects:w");t.h(j,E,"intersects:h");(c<0||d<0||i<0||j<0)&&t.g("Rect.intersects:Width and height cannot be negative")}return a>i+e||e>c+a?o:b>j+g||g>d+b?o:h};t.a(E,"x",E.prototype.x);t.defineProperty(E,{x:"x"},r("r"),function(a){t.u(this,a);s&&t.e(a,"number",E,"x");this.r=a});t.a(E,"y",E.prototype.y);
t.defineProperty(E,{y:"y"},r("s"),function(a){t.u(this,a);s&&t.e(a,"number",E,"y");this.s=a});t.a(E,"width",E.prototype.width);t.defineProperty(E,{width:"width"},r("$"),function(a){t.u(this,a);s&&t.e(a,"number",E,"width");a<0&&t.ga(a,">= 0",E,"width");this.$=a});t.a(E,"height",E.prototype.height);t.defineProperty(E,{height:"height"},r("Z"),function(a){t.u(this,a);s&&t.e(a,"number",E,"height");a<0&&t.ga(a,">= 0",E,"height");this.Z=a});t.a(E,"left",E.prototype.left);
t.defineProperty(E,{left:"left"},r("r"),function(a){t.u(this,a);s&&t.e(a,"number",E,"left");this.r=a});t.a(E,"top",E.prototype.top);t.defineProperty(E,{top:"top"},r("s"),function(a){t.u(this,a);s&&t.e(a,"number",E,"top");this.s=a});t.a(E,"right",E.prototype.right);t.defineProperty(E,{right:"right"},function(){return this.r+this.$},function(a){t.u(this,a);s&&t.h(a,E,"right");this.r=this.r+(a-(this.r+this.$))});t.a(E,"bottom",E.prototype.bottom);
t.defineProperty(E,{bottom:"bottom"},function(){return this.s+this.Z},function(a){t.u(this,a);s&&t.h(a,E,"top");this.s=this.s+(a-(this.s+this.Z))});t.a(E,"position",E.prototype.position);t.defineProperty(E,{position:"position"},function(){return new D(this.r,this.s)},function(a){t.u(this,a);s&&t.c(a,D,E,"position");this.r=a.x;this.s=a.y});t.a(E,"size",E.prototype.size);
t.defineProperty(E,{size:"size"},function(){return new K(this.$,this.Z)},function(a){t.u(this,a);s&&t.c(a,K,E,"size");this.$=a.width;this.Z=a.height});t.a(E,"center",E.prototype.mu);t.defineProperty(E,{mu:"center"},function(){return new D(this.r+this.$/2,this.s+this.Z/2)},function(a){t.u(this,a);s&&t.c(a,D,E,"center");this.r=a.x-this.$/2;this.s=a.y-this.Z/2});t.a(E,"centerX",E.prototype.Da);
t.defineProperty(E,{Da:"centerX"},function(){return this.r+this.$/2},function(a){t.u(this,a);s&&t.h(a,E,"centerX");this.r=a-this.$/2});t.a(E,"centerY",E.prototype.Ea);t.defineProperty(E,{Ea:"centerY"},function(){return this.s+this.Z/2},function(a){t.u(this,a);s&&t.h(a,E,"centerY");this.s=a-this.Z/2});E.prototype.isReal=E.prototype.aa=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};
E.prototype.isEmpty=E.prototype.nJ=function(){return this.width===0&&this.height===0};function Eb(a,b,c,d){if(a===f)this.gf=this.Ze=this.lf=this.of=0;else if(b===f)this.left=this.bottom=this.right=this.top=a;else if(c===f){this.top=a;this.right=b;this.bottom=a;this.left=b}else if(d!==f){this.top=a;this.right=b;this.bottom=c;this.left=d}else t.g("Invalid arguments to Margin constructor")}t.J("Margin",Eb);
Eb.prototype.Ua=function(a){s&&t.c(a,Eb,Eb,"assign:m");this.of=a.of;this.lf=a.lf;this.Ze=a.Ze;this.gf=a.gf};Eb.prototype.setTo=Eb.prototype.as=function(a,b,c,d){if(s){t.e(a,"number",Eb,"setTo:t");t.e(b,"number",Eb,"setTo:r");t.e(c,"number",Eb,"setTo:b");t.e(d,"number",Eb,"setTo:l")}t.u(this);this.of=a;this.lf=b;this.Ze=c;this.gf=d;return this};Eb.prototype.set=Eb.prototype.set=function(a){s&&t.c(a,Eb,Eb,"assign:m");t.u(this);this.of=a.of;this.lf=a.lf;this.Ze=a.Ze;this.gf=a.gf;return this};
Eb.prototype.copy=Eb.prototype.copy=function(){var a=new Eb;a.of=this.of;a.lf=this.lf;a.Ze=this.Ze;a.gf=this.gf;return a};Eb.prototype.Ka=function(){this.Na=h;Object.freeze(this);return this};Eb.prototype.D=function(){return Object.isFrozen(this)?this:this.copy().freeze()};Eb.prototype.freeze=function(){this.Na=h;return this};Eb.prototype.Ba=function(){Object.isFrozen(this)&&t.g("cannot thaw constant: "+this);this.Na=o;return this};
Eb.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new Eb(c,e,g,i)}return new Eb};var Kb;Eb.stringify=Kb=function(a){return a instanceof Eb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};
Eb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};Eb.prototype.equals=Eb.prototype.z=function(a){return!(a instanceof Eb)?o:this.of===a.top&&this.lf===a.right&&this.Ze===a.bottom&&this.gf===a.left};Eb.prototype.equalTo=Eb.prototype.Yx=function(a,b,c,d){return this.of===a&&this.lf===b&&this.Ze===c&&this.gf===d};Eb.prototype.Au=function(a){return fb(this.of,a.top)&&fb(this.lf,a.right)&&fb(this.Ze,a.bottom)&&fb(this.gf,a.left)};
Eb.prototype.mk=function(a){return gb(this.of,a.top)&&gb(this.lf,a.right)&&gb(this.Ze,a.bottom)&&gb(this.gf,a.left)};t.a(Eb,"top",Eb.prototype.top);t.defineProperty(Eb,{top:"top"},r("of"),function(a){t.u(this,a);s&&t.h(a,Eb,"top");this.of=a});t.a(Eb,"right",Eb.prototype.right);t.defineProperty(Eb,{right:"right"},r("lf"),function(a){t.u(this,a);s&&t.h(a,Eb,"right");this.lf=a});t.a(Eb,"bottom",Eb.prototype.bottom);
t.defineProperty(Eb,{bottom:"bottom"},r("Ze"),function(a){t.u(this,a);s&&t.h(a,Eb,"bottom");this.Ze=a});t.a(Eb,"left",Eb.prototype.left);t.defineProperty(Eb,{left:"left"},r("gf"),function(a){t.u(this,a);s&&t.h(a,Eb,"left");this.gf=a});Eb.prototype.isReal=Eb.prototype.aa=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function kb(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Ma=this.La=0}t.sf(kb,{m11:h,m12:h,m21:h,m22:h,La:h,Ma:h});
kb.prototype.set=kb.prototype.set=function(a){s&&t.c(a,kb,kb,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.La=a.La;this.Ma=a.Ma;return this};kb.prototype.copy=kb.prototype.copy=function(){var a=new kb;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.La=this.La;a.Ma=this.Ma;return a};kb.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.La+","+this.Ma+")"};
kb.prototype.equals=kb.prototype.z=function(a){return!(a instanceof kb)?o:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.La===a.La&&this.Ma===a.Ma};kb.prototype.reset=kb.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Ma=this.La=0};
kb.prototype.multiply=kb.prototype.multiply=function(a){s&&t.c(a,kb,kb,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.La+this.m21*a.Ma+this.La,g=this.m12*a.La+this.m22*a.Ma+this.Ma;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.La=e;this.Ma=g;return this};
kb.prototype.multiplyInverted=kb.prototype.pG=function(a){s&&t.c(a,kb,kb,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.Ma-a.m22*a.La),j=b*(a.m12*a.La-a.m11*a.Ma),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.La,i=this.m12*i+this.m22*j+this.Ma;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.La=g;this.Ma=i;return this};
kb.prototype.invert=kb.prototype.Lu=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.Ma-this.m22*this.La),g=a*(this.m12*this.La-this.m11*this.Ma);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.La=e;this.Ma=g};
kb.prototype.rotate=kb.prototype.rotate=function(a,b,c){if(s){t.h(a,kb,"rotate:angle");t.h(b,kb,"rotate:rx");t.h(c,kb,"rotate:ry")}this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
kb.prototype.translate=kb.prototype.translate=function(a,b){if(s){t.h(a,kb,"translate:x");t.h(b,kb,"translate:y")}this.La=this.La+(this.m11*a+this.m21*b);this.Ma=this.Ma+(this.m12*a+this.m22*b)};kb.prototype.scale=kb.prototype.scale=function(a,b){b===f&&(b=a);if(s){t.h(a,kb,"translate:sx");t.h(b,kb,"translate:sy")}this.m11=this.m11*a;this.m12=this.m12*a;this.m21=this.m21*b;this.m22=this.m22*b};
kb.prototype.transformPoint=kb.prototype.Bb=function(a){s&&t.c(a,D,kb,"transformPoint:p");var b=a.r,c=a.s;a.r=b*this.m11+c*this.m21+this.La;a.s=b*this.m12+c*this.m22+this.Ma;return a};kb.prototype.invertedTransformPoint=kb.prototype.fi=function(a){s&&t.c(a,D,kb,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.La-this.m11*this.Ma),g=a.r,i=a.s;a.r=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.Ma-this.m22*this.La);a.s=g*c+i*d+e;return a};
kb.prototype.transformRect=kb.prototype.KD=function(a){s&&t.c(a,E,kb,"transformRect:rect");var b=a.r,c=a.s,d=b+a.$,e=c+a.Z,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.La,n=this.Ma,q=b*g+c*j+l,p=b*i+c*k+n,u=d*g+c*j+l,c=d*i+c*k+n,w=b*g+e*j+l,b=b*i+e*k+n,g=d*g+e*j+l,d=d*i+e*k+n,e=q,i=p,q=Math.min(q,u),e=Math.max(e,u),i=Math.min(i,c),p=Math.max(p,c),q=Math.min(q,w),e=Math.max(e,w),i=Math.min(i,b),p=Math.max(p,b),q=Math.min(q,g),e=Math.max(e,g),i=Math.min(i,d),p=Math.max(p,d);a.r=q;a.s=i;a.$=e-
q;a.Z=p-i};function Lb(a,b){return new D(b.r*a.m11+b.s*a.m21+a.La,b.r*a.m12+b.s*a.m22+a.Ma)}kb.prototype.isIdentity=kb.prototype.my=function(){return this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1&&this.La===0&&this.Ma===0};function J(a,b,c,d){if(a===f)this.kf=this.jf=this.s=this.r=0;else{b===f&&(b=0);c===f&&(c=0);d===f&&(d=0);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d}}t.J("Spot",J);J.prototype.Ua=function(a){s&&t.c(a,J,J,"assign:s");this.r=a.r;this.s=a.s;this.jf=a.jf;this.kf=a.kf};
J.prototype.setTo=J.prototype.as=function(a,b,c,d){if(s){Mb(a,"setTo:x");Mb(b,"setTo:y");Nb(c,"setTo:offx");Nb(d,"setTo:offy")}t.u(this);this.r=a;this.s=b;this.jf=c;this.kf=d;return this};J.prototype.set=J.prototype.set=function(a){s&&t.c(a,J,J,"set:s");t.u(this);this.r=a.r;this.s=a.s;this.jf=a.jf;this.kf=a.kf;return this};J.prototype.copy=J.prototype.copy=function(){var a=new J;a.r=this.r;a.s=this.s;a.jf=this.jf;a.kf=this.kf;return a};J.prototype.Ka=function(){this.Na=h;Object.freeze(this);return this};
J.prototype.D=function(){return Object.isFrozen(this)?this:this.copy().freeze()};J.prototype.freeze=function(){this.Na=h;return this};J.prototype.Ba=function(){Object.isFrozen(this)&&t.g("cannot thaw constant: "+this);this.Na=o;return this};function Ob(a,b){a.r=NaN;a.s=NaN;a.jf=b;return a}function Mb(a,b){(isNaN(a)||a>1||a<0)&&t.ga(a,"0 <= "+b+" <= 1",J,b)}function Nb(a,b){(isNaN(a)||a===Infinity||a===-Infinity)&&t.ga(a,"real number, not NaN or Infinity",J,b)}var Rb;
J.parse=Rb=function(a){if(typeof a==="string"){a=a.trim();if(a==="None")return t.NONE;if(a==="TopLeft")return t.Iv;if(a==="Top"||a==="TopCenter"||a==="MiddleTop")return t.lo;if(a==="TopRight")return t.Kv;if(a==="Left"||a==="LeftCenter"||a==="MiddleLeft")return t.jo;if(a==="Center")return t.yv;if(a==="Right"||a==="RightCenter"||a==="MiddleRight")return t.ko;if(a==="BottomLeft")return t.tv;if(a==="Bottom"||a==="BottomCenter"||a==="MiddleBottom")return t.io;if(a==="BottomRight")return t.vv;if(a==="TopSide")return t.Mv;
if(a==="LeftSide")return t.Bv;if(a==="RightSide")return t.Gv;if(a==="BottomSide")return t.xv;if(a==="TopBottomSides")return t.Hv;if(a==="LeftRightSides")return t.Av;if(a==="TopLeftSides")return t.Jv;if(a==="TopRightSides")return t.Lv;if(a==="BottomLeftSides")return t.uv;if(a==="BottomRightSides")return t.wv;if(a==="NotTopSide")return t.Fv;if(a==="NotLeftSide")return t.Dv;if(a==="NotRightSide")return t.Ev;if(a==="NotBottomSide")return t.Cv;if(a==="AllSides")return t.sv;if(a==="Default")return t.zv;
for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new J(c,e,g,i)}return new J};var Sb;J.stringify=Sb=function(a){return a instanceof J?Tb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
J.prototype.toString=function(){return Tb(this)?this.jf===0&&this.kf===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.z(t.NONE)?"None":this.z(t.Iv)?"TopLeft":this.z(t.lo)?"Top":this.z(t.Kv)?"TopRight":this.z(t.jo)?"Left":this.z(t.yv)?"Center":this.z(t.ko)?"Right":this.z(t.tv)?"BottomLeft":this.z(t.io)?"Bottom":this.z(t.vv)?"BottomRight":this.z(t.Mv)?"TopSide":this.z(t.Bv)?"LeftSide":this.z(t.Gv)?"RightSide":this.z(t.xv)?"BottomSide":this.z(t.Hv)?
"TopBottomSides":this.z(t.Av)?"LeftRightSides":this.z(t.Jv)?"TopLeftSides":this.z(t.Lv)?"TopRightSides":this.z(t.uv)?"BottomLeftSides":this.z(t.wv)?"BottomRightSides":this.z(t.Fv)?"NotTopSide":this.z(t.Dv)?"NotLeftSide":this.z(t.Ev)?"NotRightSide":this.z(t.Cv)?"NotBottomSide":this.z(t.sv)?"AllSides":this.z(t.zv)?"Default":"None"};
J.prototype.equals=J.prototype.z=function(a){return!(a instanceof J)?o:(this.r===a.x||isNaN(this.r)&&isNaN(a.x))&&(this.s===a.y||isNaN(this.s)&&isNaN(a.y))&&this.jf===a.offsetX&&this.kf===a.offsetY};J.prototype.opposite=J.prototype.NJ=function(){return new J(0.5-(this.r-0.5),0.5-(this.s-0.5),-this.jf,-this.kf)};J.prototype.includesSide=J.prototype.eJ=function(a){if(!Vb(this)||!Vb(a))return o;a=a.offsetY;return(this.kf&a)===a};t.a(J,"x",J.prototype.x);
t.defineProperty(J,{x:"x"},r("r"),function(a){t.u(this,a);s&&Mb(a,"x");this.r=a});t.a(J,"y",J.prototype.y);t.defineProperty(J,{y:"y"},r("s"),function(a){t.u(this,a);s&&Mb(a,"y");this.s=a});t.a(J,"offsetX",J.prototype.offsetX);t.defineProperty(J,{offsetX:"offsetX"},r("jf"),function(a){t.u(this,a);s&&Nb(a,"offsetX");this.jf=a});t.a(J,"offsetY",J.prototype.offsetY);t.defineProperty(J,{offsetY:"offsetY"},r("kf"),function(a){t.u(this,a);s&&Nb(a,"offsetY");this.kf=a});
function Tb(a){return!isNaN(a.x)&&!isNaN(a.y)}function Wb(a){return isNaN(a.x)||isNaN(a.y)}function Vb(a){return Wb(a)&&a.offsetX===1&&a.offsetY!==0}function Xb(a){return isNaN(a.x)&&isNaN(a.y)&&a.offsetX===-1&&a.offsetY===0}t.Tc=1;t.yc=2;t.Jc=4;t.Ic=8;t.NONE=Ob(new J(0,0,0,0),0).Ka();t.zv=Ob(new J(0,0,-1,0),-1).Ka();t.Iv=(new J(0,0,0,0)).Ka();t.lo=(new J(0.5,0,0,0)).Ka();t.Kv=(new J(1,0,0,0)).Ka();t.jo=(new J(0,0.5,0,0)).Ka();t.yv=(new J(0.5,0.5,0,0)).Ka();t.ko=(new J(1,0.5,0,0)).Ka();
t.tv=(new J(0,1,0,0)).Ka();t.io=(new J(0.5,1,0,0)).Ka();t.vv=(new J(1,1,0,0)).Ka();t.Mv=Ob(new J(0,0,1,t.Tc),1).Ka();t.Bv=Ob(new J(0,0,1,t.yc),1).Ka();t.Gv=Ob(new J(0,0,1,t.Jc),1).Ka();t.xv=Ob(new J(0,0,1,t.Ic),1).Ka();t.Hv=Ob(new J(0,0,1,t.Tc|t.Ic),1).Ka();t.Av=Ob(new J(0,0,1,t.yc|t.Jc),1).Ka();t.Jv=Ob(new J(0,0,1,t.Tc|t.yc),1).Ka();t.Lv=Ob(new J(0,0,1,t.Tc|t.Jc),1).Ka();t.uv=Ob(new J(0,0,1,t.Ic|t.yc),1).Ka();t.wv=Ob(new J(0,0,1,t.Ic|t.Jc),1).Ka();t.Fv=Ob(new J(0,0,1,t.yc|t.Jc|t.Ic),1).Ka();
t.Dv=Ob(new J(0,0,1,t.Tc|t.Jc|t.Ic),1).Ka();t.Ev=Ob(new J(0,0,1,t.Tc|t.yc|t.Ic),1).Ka();t.Cv=Ob(new J(0,0,1,t.Tc|t.yc|t.Jc),1).Ka();t.sv=Ob(new J(0,0,1,t.Tc|t.yc|t.Jc|t.Ic),1).Ka();var Yb;J.None=Yb=t.NONE;var cc;J.Default=cc=t.zv;var dc;J.TopLeft=dc=t.Iv;var ec;J.TopCenter=ec=t.lo;var fc;J.TopRight=fc=t.Kv;J.LeftCenter=t.jo;var mc;J.Center=mc=t.yv;J.RightCenter=t.ko;var nc;J.BottomLeft=nc=t.tv;var oc;J.BottomCenter=oc=t.io;var qc;J.BottomRight=qc=t.vv;var rc;J.MiddleTop=rc=t.lo;var sc;
J.MiddleLeft=sc=t.jo;var tc;J.MiddleRight=tc=t.ko;var vc;J.MiddleBottom=vc=t.io;J.Top=t.lo;J.Left=t.jo;J.Right=t.ko;J.Bottom=t.io;var zc;J.TopSide=zc=t.Mv;var Ac;J.LeftSide=Ac=t.Bv;var Bc;J.RightSide=Bc=t.Gv;var Gc;J.BottomSide=Gc=t.xv;J.TopBottomSides=t.Hv;J.LeftRightSides=t.Av;J.TopLeftSides=t.Jv;J.TopRightSides=t.Lv;J.BottomLeftSides=t.uv;J.BottomRightSides=t.wv;J.NotTopSide=t.Fv;J.NotLeftSide=t.Dv;J.NotRightSide=t.Ev;J.NotBottomSide=t.Cv;var Hc;J.AllSides=Hc=t.sv;
var Ic=4*((Math.sqrt(2)-1)/3),Jc=(new D(0,0)).Ka(),Kc=(new K(Infinity,Infinity)).Ka(),Qc=(new D(-Infinity,-Infinity)).Ka(),Rc=(new D(Infinity,Infinity)).Ka(),Sc=(new K(0,0)).Ka(),Tc=(new D(NaN,NaN)).Ka();function gb(a,b){var c=a-b;return c<0.5&&c>-0.5}function fb(a,b){var c=a-b;return c<5E-8&&c>-5E-8}
function Uc(a,b,c,d,e,g,i){e<=0&&(e=1E-6);var j,k,l,n;if(a<c){k=a;j=c}else{k=c;j=a}if(b<d){n=b;l=d}else{n=d;l=b}if(a===c)return n<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j=j+e;k=k-e;if(k<=g&&g<=j){l=l+e;n=n-e;if(n<=i&&i<=l)if(j-k>l-n)if(a-c>e||c-a>e){g=(d-b)/(c-a)*(g-a)+b;if(g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){i=(c-a)/(d-b)*(i-b)+a;if(i-e<=g&&g<=i+e)return h}else return h}return o}
function Vc(a,b,c,d,e,g,i,j,k,l,n){if(!Uc(a,b,i,j,k,c,d)||!Uc(a,b,i,j,k,e,g)){var q=(a+c)/2,p=(b+d)/2,u=(c+e)/2,w=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(q+u)/2,c=(p+w)/2,u=(u+e)/2,w=(w+g)/2,B=(d+u)/2,F=(c+w)/2;return Vc(a,b,q,p,d,c,B,F,k,l,n)||Vc(B,F,u,w,e,g,i,j,k,l,n)}return Uc(a,b,i,j,k,l,n)}
function Yc(a,b,c,d,e,g,i,j,k,l){if(!Uc(a,b,i,j,k,c,d)||!Uc(a,b,i,j,k,e,g)){var n=(a+c)/2,q=(b+d)/2,p=(c+e)/2,u=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(n+p)/2,c=(q+u)/2,p=(p+e)/2,u=(u+g)/2,w=(d+p)/2,B=(c+u)/2;Yc(a,b,n,q,d,c,w,B,k,l);Yc(w,B,p,u,e,g,i,j,k,l)}else{tb(l,a,b,0,0);tb(l,i,j,0,0)}}function Zc(a,b,c,d,e,g,i,j,k){if(Uc(a,b,e,g,i,c,d))return Uc(a,b,e,g,i,j,k);var l=(a+c)/2,n=(b+d)/2,c=(c+e)/2,d=(d+g)/2,q=(l+c)/2,p=(n+d)/2;return Zc(a,b,l,n,q,p,i,j,k)||Zc(q,p,c,d,e,g,i,j,k)}
function $c(a,b,c,d,e,g,i,j){if(Uc(a,b,e,g,i,c,d)){tb(j,a,b,0,0);tb(j,e,g,0,0)}else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,n=(k+c)/2,q=(l+d)/2;$c(a,b,k,l,n,q,i,j);$c(n,q,c,d,e,g,i,j)}}
function ad(a,b,c,d,e,g,i,j,k,l,n,q,p,u){p<=0&&(p=1E-6);if(!Uc(a,b,i,j,p,c,d)||!Uc(a,b,i,j,p,e,g)){var w=(a+c)/2,B=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,F=(w+c)/2,H=(B+d)/2,c=(c+e)/2,d=(d+g)/2,x=(F+c)/2,I=(H+d)/2,y=(n-k)*(n-k)+(q-l)*(q-l),G=o;if(ad(a,b,w,B,F,H,x,I,k,l,n,q,p,u)){a=(u.x-k)*(u.x-k)+(u.y-l)*(u.y-l);if(a<y){y=a;G=h}}b=u.x;w=u.y;if(ad(x,I,c,d,e,g,i,j,k,l,n,q,p,u)){a=(u.x-k)*(u.x-k)+(u.y-l)*(u.y-l);if(a<y)G=h;else{u.x=b;u.y=w}}return G}w=(a-i)*(l-q)-(b-j)*(k-n);if(!w)return o;
p=((a*j-b*i)*(k-n)-(a-i)*(k*q-l*n))/w;w=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*n))/w;if((k>n?k-n:n-k)<(l>q?l-q:q-l)){if(b<j){k=b;i=j}else{k=j;i=b}if(w<k||w>i)return o}else{if(a<i)k=a;else{k=i;i=a}if(p<k||p>i)return o}u.x=p;u.y=w;return h}
function bd(a,b,c,d,e,g,i,j,k,l,n,q,p){var u=0;p<=0&&(p=1E-6);if(!Uc(a,b,i,j,p,c,d)||!Uc(a,b,i,j,p,e,g))var w=(a+c)/2,B=(b+d)/2,F=(c+e)/2,H=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(w+F)/2,c=(B+H)/2,F=(F+e)/2,H=(H+g)/2,x=(d+F)/2,I=(c+H)/2,u=u+bd(a,b,w,B,d,c,x,I,k,l,n,q,p),u=u+bd(x,I,F,H,e,g,i,j,k,l,n,q,p);else{p=(a-i)*(l-q)-(b-j)*(k-n);if(!p)return u;w=((a*j-b*i)*(k-n)-(a-i)*(k*q-l*n))/p;B=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*n))/p;if(w>=n)return u;if((k>n?k-n:n-k)<(l>q?l-q:q-l)){if(b<j){k=b;a=j}else{k=j;a=b}if(B<
k||B>a)return u}else{if(a<i){k=a;a=i}else k=i;if(w<k||w>a)return u}p>0?u++:p<0&&u--}return u}
function ed(a,b,c,d,e,g,i){if(fb(a,c)){var j;if(b<d){j=b;c=d}else{j=d;c=b}d=g;if(d<j){i.x=a;i.y=j;return o}if(d>c){i.x=a;i.y=c;return o}i.x=a;i.y=d;return h}if(fb(b,d)){if(a<c)j=a;else{j=c;c=a}d=e;if(d<j){i.x=j;i.y=b;return o}if(d>c){i.x=c;i.y=b;return o}i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(j<-5E-6){i.x=a;i.y=b;return o}if(j>1.000005){i.x=c;i.y=d;return o}i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function fd(a,b,c,d,e,g,i,j,k){if(gb(a,c)&&gb(b,d)){k.x=a;k.y=b;return o}if(fb(e,i)){if(fb(a,c)){ed(a,b,c,d,e,g,k);return o}return ed(a,b,c,d,e,(d-b)/(c-a)*(e-a)+b,k)}j=(j-g)/(i-e);if(fb(a,c)){c=j*(a-e)+g;if(b<d)e=b;else{e=d;d=b}if(c<e){k.x=a;k.y=e;return o}if(c>d){k.x=a;k.y=d;return o}k.x=a;k.y=c;return h}i=(d-b)/(c-a);if(fb(j,i)){ed(a,b,c,d,e,g,k);return o}g=(i*a-j*e+g-b)/(i-j);if(fb(i,0)){if(a<c){e=a;d=c}else{e=c;d=a}if(g<e){k.x=e;k.y=b;return o}if(g>d){k.x=d;k.y=b;return o}k.x=g;k.y=b;return h}return ed(a,
b,c,d,g,i*(g-a)+b,k)}
function gd(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);if(e<n){n=e;k.x=c;k.y=d}}var n=Infinity;l(k.x,k.y);var q,p,u,w;if(e<i){q=e;p=i}else{q=i;p=e}if(g<j){u=e;w=i}else{u=i;w=e}q=(p-q)/2+0;u=(w-u)/2+0;e=(e+i)/2;g=(g+j)/2;if(!(q===0||u===0))if((c>a?c-a:a-c)<0.5){q=1-(c-e)*(c-e)/(q*q);if(!(q<0)){q=Math.sqrt(q);d=-u*q+g;l(c,u*q+g);l(c,d)}}else{c=(d-b)/(c-a);d=1/(q*q)+c*c/(u*u);j=2*c*(b-c*a)/(u*u)-2*c*g/(u*u)-2*e/(q*q);u=j*j-4*d*(2*c*a*g/(u*u)-2*b*g/(u*u)+g*g/(u*u)+e*e/(q*q)-1+(b-
c*a)*(b-c*a)/(u*u));if(!(u<0)){q=Math.sqrt(u);u=(-j+q)/(2*d);l(u,c*u-c*a+b);u=(-j-q)/(2*d);l(u,c*u-c*a+b)}}}
function hd(a,b,c,d){var e=a.left,g=a.right,i=a.top,a=a.bottom,j=b.x,b=b.y,k=c.x,c=c.y,l=1E21,n=e,q=i;if(fd(e,i,e,a,j,b,k,c,d)){var p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(fd(g,i,g,a,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(fd(e,i,g,i,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(fd(e,a,g,a,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}d.x=n;d.y=q;return l<1E21}
function id(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,n=a.bottom;if(d===g){if(e<i){a=e;g=i}else{a=i;g=e}return j<=d&&d<=k&&a<=n&&g>=l}if(e===i){if(d<g)a=d;else{a=g;g=d}return l<=e&&e<=n&&a<=k&&g>=j}return a.ka(b)||a.ka(c)||jd(j,l,k,l,d,e,g,i)||jd(k,l,k,n,d,e,g,i)||jd(k,n,j,n,d,e,g,i)||jd(j,n,j,l,d,e,g,i)?h:o}function jd(a,b,c,d,e,g,i,j){return vd(a,b,c,d,e,g)*vd(a,b,c,d,i,j)<=0&&vd(e,g,i,j,a,b)*vd(e,g,i,j,c,d)<=0}
function vd(a,b,c,d,e,g){c=c-a;d=d-b;a=e-a;b=g-b;g=a*d-b*c;if(g===0){g=a*c+b*d;if(g>0){g=(a-c)*c+(b-d)*d;g<0&&(g=0)}}return g<0?-1:g>0?1:0}function wd(a){a<0&&(a=a+360);a>=360&&(a=a-360);return a}function xd(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new D(i,a)}function yd(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do{e=c%d;c=g=d;d=e}while(e>0);return g}
function Fd(a){t.Lb(this);a===f?a=Id:s&&t.Va(a,Fd,Fd,"constructor:type");this.K=a;this.Kc=this.Ac=this.Zb=this.Ob=0;this.Ok=new z(Jd);this.Ns=this.Ok.Ub;this.As=(new E).freeze();this.Ia=h;this.mH=new D;this.Nh=dc;this.Oh=qc;this.Us=this.Vs=NaN;this.Mc=Sc;this.Mb=Kd}t.J("Geometry",Fd);
Fd.prototype.copy=Fd.prototype.copy=function(){var a=new Fd;a.K=this.K;a.Ob=this.Ob;a.Zb=this.Zb;a.Ac=this.Ac;a.Kc=this.Kc;for(var b=this.Ok,c=b.length,d=a.Ok,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.Ns=this.Ns;a.As.Ua(this.As);a.Ia=this.Ia;a.Nh=this.Nh.D();a.Oh=this.Oh.D();a.Vs=this.Vs;a.Us=this.Us;a.Mc=this.Mc.D();a.Mb=this.Mb;return a};var Ld;Fd.Line=Ld=t.l(Fd,"Line",0);var Md;Fd.Rectangle=Md=t.l(Fd,"Rectangle",1);var Nd;Fd.Ellipse=Nd=t.l(Fd,"Ellipse",2);var Id;Fd.Path=Id=t.l(Fd,"Path",3);
Fd.prototype.Ka=function(){this.freeze();Object.freeze(this);return this};Fd.prototype.freeze=function(){this.Na=h;var a=this.vc;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};Fd.prototype.Ba=function(){Object.isFrozen(this)&&t.g("cannot thaw constant: "+this);this.Na=o;var a=this.vc;a.Ba();for(var b=a.length,c=0;c<b;c++)a.j[c].Ba();return this};
Fd.prototype.toString=function(a){switch(this.type){case Ld:return"M"+this.Ra.toFixed(a)+" "+this.Sa.toFixed(a)+"L"+this.ea.toFixed(a)+" "+this.fa.toFixed(a);case Md:var b=new E(this.Ra,this.Sa,0,0);tb(b,this.ea,this.fa,0,0);return"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Nd:b=new E(this.Ra,this.Sa,0,0);tb(b,this.ea,this.fa,0,0);var c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/2).toFixed(a)+" "+
(b.height/2).toFixed(a)+" 0 0 1 "+(b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a))+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case Id:for(var b="",c=this.vc,d=c.length,e=0;e<d;e++){var g=c.j[e];e>0&&(b=b+" ");b=b+g.toString(a)}return b;default:return this.type.toString()}};var Od;
Fd.parse=Od=function(a,b){function c(){return l>=w-1?h:k[l+1].match(/[A-Za-z]/)!==m}function d(){l++;return k[l]}function e(){var a=new D(parseFloat(d()),parseFloat(d()));if(n===n.toLowerCase()){a.x=u.x+a.x;a.y=u.y+a.y}return a}function g(){return u=e()}function i(){return p=e()}function j(){return q.toLowerCase()!=="c"&&q.toLowerCase()!=="s"?u:new D(2*u.x-p.x,2*u.y-p.y)}b===f&&(b=h);var a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,n="",q="";new D(0,0);for(var p=new D(0,0),u=new D(0,0),w=k.length,B=new L,F;!(l>=w-1);){q=n;n=d();if(n!=="")switch(n.toUpperCase()){case "M":F=g();
for(B.bc===m?M(B,F.x,F.y,o,o):B.moveTo(F.x,F.y);!c();){F=g();B.lineTo(F.x,F.y)}break;case "L":for(;!c();){F=g();B.lineTo(F.x,F.y)}break;case "H":for(;!c();){u=F=new D((n===n.toLowerCase()?u.x:0)+parseFloat(d()),u.y);B.lineTo(u.x,u.y)}break;case "V":for(;!c();){u=F=new D(u.x,(n===n.toLowerCase()?u.y:0)+parseFloat(d()));B.lineTo(u.x,u.y)}break;case "C":for(;!c();){F=e();var H=i(),x=g();N(B,F.x,F.y,H.x,H.y,x.x,x.y)}break;case "S":for(;!c();){F=j();H=i();x=g();N(B,F.x,F.y,H.x,H.y,x.x,x.y)}break;case "Q":for(;!c();){H=
i();x=g();Zd(B,H.x,H.y,x.x,x.y)}break;case "T":for(;!c();){p=H=j();x=g();Zd(B,H.x,H.y,x.x,x.y)}break;case "B":for(;!c();){F=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];if(!c()){F.push(parseFloat(d()));c()||F.push(parseFloat(d()))}if(n===n.toLowerCase()){F[2]=F[2]+u.x;F[3]=F[3]+u.y}B.arcTo(F[0],F[1],F[2],F[3],F[4],F[5],F[6])}break;case "Z":O(B);break;case "F":b=h}}B=B.k;if(b)for(F=B.vc.f;F.next();)F.value.Er=h;return B};
Fd.prototype.oy=function(){if(this.Ia)return h;var a=this.vc;if(this.Ns!==a.Ub)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].oy())return h;return o};Fd.prototype.fz=function(){this.Ia=o;var a=this.vc;this.Ns=a.Ub;for(var b=a.length,c=0;c<b;c++)a.j[c].fz()};
Fd.prototype.de=function(){var a=this.As;a.Ba();a.reset();a.RG(this.Mc);switch(this.type){case Ld:case Md:case Nd:tb(a,this.Ob,this.Zb,0,0);tb(a,this.Ac,this.Kc,0,0);break;case Id:for(var b=this.vc,c=b.length,d=0;d<c;d++){var e=b.j[d];tb(a,e.Ra,e.Sa,0,0);for(var g=e.xb,i=g.length,j=e.Ra,e=e.Sa,k=0;k<i;k++){var l=g.j[k];switch(l.type){case $d:case ae:j=l.ea;e=l.fa;tb(a,j,e,0,0);break;case be:Yc(j,e,l.Fd,l.Df,l.Vn,l.Wn,l.ea,l.fa,0.5,a);j=l.ea;e=l.fa;break;case ke:$c(j,e,l.Fd,l.Df,l.ea,l.fa,0.5,a);j=
l.ea;e=l.fa;break;case le:for(var l=me(l),n=l.length,q=m,d=0;d<n;d++){q=l[d];Yc(q.Ul,q.Vl,q.ov,q.qv,q.pv,q.rv,q.Ak,q.Bk,0.5,a)}if(q!==m){j=q.Ak;e=q.Bk}break;default:t.g("Unknown Segment type: "+l.type)}}}break;default:t.g("Unknown Geometry type: "+this.type)}tb(a,0,0,0,0);a.freeze()};
Fd.prototype.ka=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.mb.x-20,a=a.y,j=0,k,l,n,q,p,u,w,B=this.vc.j,F=B.length,H=0;H<F;H++){var x=B[H];if(x.Er){if(c&&x.ka(e,g,b))return h;var I=x.xb;k=x.Ra;l=x.Sa;for(var y=k,G=l,fa=0;fa<=I.length;fa++){if(fa!==I.length){n=I.j[fa];q=n.type;u=n.ea;w=n.fa}else{q=$d;u=x.Ra;w=x.Sa}switch(q){case ae:p=ne(e,g,i,a,k,l,y,G);if(p===h)return h;j=j+p;y=u;G=w;break;case $d:p=ne(e,g,i,a,k,l,u,w);if(p===h)return h;j=j+p;break;case be:p=bd(k,l,n.Fd,n.Df,n.Vn,n.Wn,u,w,i,a,e,
g,0.5);j=j+p;break;case ke:p=bd(k,l,(k+2*n.Fd)/3,(l+2*n.Df)/3,(n.Fd+2*u)/3,(n.Fd+2*u)/3,u,w,i,a,e,g,0.5);j=j+p;break;case le:q=me(n);for(var R=q.length,S=m,da=0;da<R;da++){S=q[da];if(da===0){p=ne(e,g,i,a,k,l,S.Ul,S.Vl);if(p===h)return h;j=j+p}p=bd(S.Ul,S.Vl,S.ov,S.qv,S.pv,S.rv,S.Ak,S.Bk,i,a,e,g,0.5);j=j+p}if(S!==m){u=S.Ak;w=S.Bk}break;default:t.g("Unknown Segment type: "+n.type)}k=u;l=w}if(j!==0)return h;j=0}else if(x.ka(e,g,d?b:b+2))return h}return j!==0};
function ne(a,b,c,d,e,g,i,j){if(Uc(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(k===0)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j){a=g;e=j}else{a=j;e=g}if(b<a||b>e)return 0}else{if(e<i){a=e;e=i}else a=i;if(l<a||l>e)return 0}return k>0?1:-1}function oe(a,b,c,d){for(var e=a.vc.length,g=0;g<e;g++)if(a.vc.j[g].ka(b,c,d))return h;return o}t.a(Fd,"type",Fd.prototype.type);
t.defineProperty(Fd,{type:"type"},r("K"),function(a){if(this.K!==a){s&&t.Va(a,Fd,Fd,"type");t.u(this,a);this.K=a;this.Ia=h}});t.a(Fd,"startX",Fd.prototype.Ra);t.defineProperty(Fd,{Ra:"startX"},r("Ob"),function(a){if(this.Ob!==a){s&&t.h(a,Fd,"startX");t.u(this,a);this.Ob=a;this.Ia=h}});t.a(Fd,"startY",Fd.prototype.Sa);t.defineProperty(Fd,{Sa:"startY"},r("Zb"),function(a){if(this.Zb!==a){s&&t.h(a,Fd,"startY");t.u(this,a);this.Zb=a;this.Ia=h}});t.a(Fd,"endX",Fd.prototype.ea);
t.defineProperty(Fd,{ea:"endX"},r("Ac"),function(a){if(this.Ac!==a){s&&t.h(a,Fd,"endX");t.u(this,a);this.Ac=a;this.Ia=h}});t.a(Fd,"endY",Fd.prototype.fa);t.defineProperty(Fd,{fa:"endY"},r("Kc"),function(a){if(this.Kc!==a){s&&t.h(a,Fd,"endY");t.u(this,a);this.Kc=a;this.Ia=h}});t.a(Fd,"figures",Fd.prototype.vc);t.defineProperty(Fd,{vc:"figures"},r("Ok"),function(a){if(this.Ok!==a){s&&t.c(a,z,Fd,"figures");t.u(this,a);this.Ok=a;this.Ia=h}});
t.defineProperty(Fd,{n:"spot1"},r("Nh"),function(a){s&&t.c(a,J,Fd,"spot1");t.u(this,a);this.Nh=a.D()});t.defineProperty(Fd,{o:"spot2"},r("Oh"),function(a){s&&t.c(a,J,Fd,"spot2");t.u(this,a);this.Oh=a.D()});t.m(Fd,{mb:"bounds"},function(){if(this.oy()){this.fz();this.de()}return this.As});t.a(Fd,"minSize",Fd.prototype.Td);
t.defineProperty(Fd,{Td:"minSize"},r("Mc"),function(a){if(!this.Mc.z(a)){s&&t.c(a,K,Fd,"minSize");a=a.D();if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;a.freeze();this.Mc=a}});function Jd(a,b,c,d){t.Lb(this);d===f&&(d=h);this.op=d;this.df=h;if(a!==f){s&&t.h(a,Jd,"sx");this.Ob=a}else this.Ob=0;if(b!==f){s&&t.h(b,Jd,"sy");this.Zb=b}else this.Zb=0;this.Aq=new z(pe);this.Nt=this.Aq.Ub;this.Ia=h}t.J("PathFigure",Jd);
Jd.prototype.copy=Jd.prototype.copy=function(){var a=new Jd;a.op=this.op;a.df=this.df;a.Ob=this.Ob;a.Zb=this.Zb;for(var b=this.Aq,c=b.length,d=a.Aq,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.Nt=this.Nt;a.Ia=this.Ia;return a};ea=Jd.prototype;ea.toString=function(a){for(var b="M"+this.Ra.toFixed(a)+" "+this.Sa.toFixed(a),c=this.xb,d=c.length,e=0;e<d;e++)b=b+(" "+c.j[e].toString(a));this.Er&&(b=b+"\t");return b};
ea.freeze=function(){this.Na=h;var a=this.xb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};ea.Ba=function(){this.Na=o;var a=this.xb;a.Ba();for(var b=a.length,c=0;c<b;c++)a.j[c].Ba();return this};ea.oy=function(){if(this.Ia)return h;var a=this.xb;if(this.Nt!==a.Ub)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].Ia)return h;return o};ea.fz=function(){this.Ia=o;var a=this.xb;this.Nt=a.Ub;for(var b=a.length,c=0;c<b;c++)a.j[c].Ia=o};t.a(Jd,"isFilled",Jd.prototype.Er);
t.defineProperty(Jd,{Er:"isFilled"},r("op"),function(a){s&&t.e(a,"boolean",Jd,"isFilled");t.u(this,a);this.op=a});t.a(Jd,"isShadowed",Jd.prototype.Fr);t.defineProperty(Jd,{Fr:"isShadowed"},r("df"),function(a){s&&t.e(a,"boolean",Jd,"isShadowed");t.u(this,a);this.df=a});t.a(Jd,"subPath",Jd.prototype.WG);t.defineProperty(Jd,{WG:"subPath"},r("rE"),function(a){s&&t.e(a,"boolean",Jd,"subPath");t.u(this,a);this.rE=a});t.a(Jd,"startX",Jd.prototype.Ra);
t.defineProperty(Jd,{Ra:"startX"},r("Ob"),function(a){s&&t.h(a,Jd,"startX");t.u(this,a);this.Ob=a;this.Ia=h});t.a(Jd,"startY",Jd.prototype.Sa);t.defineProperty(Jd,{Sa:"startY"},r("Zb"),function(a){s&&t.h(a,Jd,"startY");t.u(this,a);this.Zb=a;this.Ia=h});t.a(Jd,"segments",Jd.prototype.xb);t.defineProperty(Jd,{xb:"segments"},r("Aq"),function(a){s&&t.c(a,z,Jd,"segments");t.u(this,a);this.Aq=a;this.Ia=h});
Jd.prototype.ka=function(a,b,c){for(var d=this.Ra,e=this.Sa,g=d,i=e,j=this.xb.j,k=j.length,l=0;l<k;l++){var n=j[l];switch(n.type){case ae:g=n.ea;i=n.fa;break;case $d:if(Uc(d,e,n.ea,n.fa,c,a,b))return h;break;case be:if(Vc(d,e,n.Fd,n.Df,n.Vn,n.Wn,n.ea,n.fa,c,a,b))return h;break;case ke:if(Zc(d,e,n.Fd,n.Df,n.ea,n.fa,c,a,b))return h;break;case le:for(var q=me(n),p=q.length,u=m,w=0;w<p;w++){u=q[w];if(w===0&&Uc(d,e,u.Ul,u.Vl,c,a,b)||Vc(u.Ul,u.Vl,u.ov,u.qv,u.pv,u.rv,u.Ak,u.Bk,c,a,b))return h}if(u!==m){n.ea=
u.Ak;n.fa=u.Bk}break;default:t.g("Unknown Segment type: "+n.type)}d=n.ea;e=n.fa;if(n.ui&&(d!==g||e!==i)&&Uc(d,e,g,i,c,a,b))return h}return o};
function pe(a,b,c,d,e,g,i){t.Lb(this);a===f?a=$d:s&&t.Va(a,pe,pe,"constructor:type");this.K=a;if(a===le){if(b!==f){s&&t.h(b,pe,"ex");this.Pg=b}else this.Pg=0;if(c!==f){s&&t.h(c,pe,"ey");this.Rg=c}else this.Rg=0;if(d!==f){s&&t.h(d,pe,"x1");this.bm=d}if(e!==f){s&&t.h(e,pe,"y1");this.cm=e}if(g!==f){s&&t.h(g,pe,"x2");this.Ht=g}if(i!==f){s&&t.h(i,pe,"y2");this.It=i}}else{if(b!==f){s&&t.h(b,pe,"ex");this.el=b}else this.el=0;if(c!==f){s&&t.h(c,pe,"ey");this.fl=c}else this.fl=0;if(d!==f){s&&t.h(d,pe,"x1");
this.Vj=d}if(e!==f){s&&t.h(e,pe,"y1");this.Wj=e}if(g!==f){s&&t.h(g,pe,"x2");this.cl=g}if(i!==f){s&&t.h(i,pe,"y2");this.dl=i}}this.Ia=h;this.ui=o}t.J("PathSegment",pe);pe.prototype.copy=pe.prototype.copy=function(){var a=new pe;a.K=this.K;if(this.K===le){a.Pg=this.Pg;a.Rg=this.Rg;a.bm=this.bm;a.cm=this.cm;a.Ht=this.Ht;a.It=this.It}else{a.el=this.el;a.fl=this.fl;a.Vj=this.Vj;a.Wj=this.Wj;a.cl=this.cl;a.dl=this.dl}a.Ia=this.Ia;a.ui=this.ui;return a};
pe.prototype.toString=function(a){switch(this.type){case ae:a="M"+this.ea.toFixed(a)+" "+this.fa.toFixed(a);break;case $d:a="L"+this.ea.toFixed(a)+" "+this.fa.toFixed(a);break;case be:a="C"+this.Fd.toFixed(a)+" "+this.Df.toFixed(a)+" "+this.Vn.toFixed(a)+" "+this.Wn.toFixed(a)+" "+this.ea.toFixed(a)+" "+this.fa.toFixed(a);break;case ke:case le:a="A";break;default:a=this.type.toString()}return a+(this.ui?"z":"")};var ae;pe.Move=ae=t.l(pe,"Move",0);var $d;pe.Line=$d=t.l(pe,"Line",1);var be;
pe.Bezier=be=t.l(pe,"Bezier",2);var ke;pe.QuadraticBezier=ke=t.l(pe,"QuadraticBezier",3);var le;pe.Arc=le=t.l(pe,"Arc",4);pe.prototype.freeze=function(){this.Na=h;return this};pe.prototype.Ba=function(){this.Na=o;return this};pe.prototype.close=pe.prototype.close=function(){this.ui=h;return this};
function me(a){if(a.Uv&&a.Ia===o)return a.Uv;for(var b=a.bm,c=a.cm,d=a.Ky,e=a.uk,g=a.uk+a.Pl,i=Math.PI,e=e*(i/180),g=g*(i/180),j=e<g?1:-1,k=[],l=i/2,n=e,e=Math.min(i*2+1E-5,Math.abs(g-e));e>1E-5;){var g=n+j*Math.min(e,l),q=(g-n)/2,p=d*Math.cos(q),u=d*Math.sin(q),w=0.5522847498*Math.tan(q),i=p+w*u,p=-u+w*p,u=-p,w=q+n,q=Math.cos(w),w=Math.sin(w);k.push({Ul:b+d*Math.cos(n),Vl:c+d*Math.sin(n),ov:b+i*q-p*w,qv:c+i*w+p*q,pv:b+i*q-u*w,rv:c+i*w+u*q,Ak:b+d*Math.cos(g),Bk:c+d*Math.sin(g)});e=e-Math.abs(g-n);
n=g}a.Uv=k;return a.Uv}t.a(pe,"isClosed",pe.prototype.mC);t.defineProperty(pe,{mC:"isClosed"},r("ui"),function(a){if(this.ui!==a){this.ui=a;this.Ia=h}});t.a(pe,"type",pe.prototype.type);t.defineProperty(pe,{type:"type"},r("K"),function(a){s&&t.Va(a,pe,pe,"type");t.u(this,a);this.K=a;this.Ia=h});t.a(pe,"endX",pe.prototype.ea);t.defineProperty(pe,{ea:"endX"},r("el"),function(a){s&&t.h(a,pe,"endX");t.u(this,a);this.el=a;this.Ia=h});t.a(pe,"endY",pe.prototype.fa);
t.defineProperty(pe,{fa:"endY"},r("fl"),function(a){s&&t.h(a,pe,"endY");t.u(this,a);this.fl=a;this.Ia=h});t.defineProperty(pe,{Fd:"point1X"},r("Vj"),function(a){s&&t.h(a,pe,"point1X");t.u(this,a);this.Vj=a;this.Ia=h});t.defineProperty(pe,{Df:"point1Y"},r("Wj"),function(a){s&&t.h(a,pe,"point1Y");t.u(this,a);this.Wj=a;this.Ia=h});t.defineProperty(pe,{Vn:"point2X"},r("cl"),function(a){s&&t.h(a,pe,"point2X");t.u(this,a);this.cl=a;this.Ia=h});
t.defineProperty(pe,{Wn:"point2Y"},r("dl"),function(a){s&&t.h(a,pe,"point2Y");t.u(this,a);this.dl=a;this.Ia=h});t.defineProperty(pe,{Da:"centerX"},r("bm"),function(a){s&&t.h(a,pe,"centerX");t.u(this,a);this.bm=a;this.Ia=h});t.defineProperty(pe,{Ea:"centerY"},r("cm"),function(a){s&&t.h(a,pe,"centerY");t.u(this,a);this.cm=a;this.Ia=h});t.defineProperty(pe,{Ky:"radiusX"},r("Ht"),function(a){s&&t.h(a,pe,"radiusX");t.u(this,a);this.Ht=a;this.Ia=h});
t.defineProperty(pe,{zG:"radiusY"},r("It"),function(a){s&&t.h(a,pe,"radiusY");t.u(this,a);this.It=a;this.Ia=h});t.defineProperty(pe,{uk:"startAngle"},r("Pg"),function(a){s&&t.h(a,pe,"startAngle");t.u(this,a);this.Pg=a;this.Ia=h});t.defineProperty(pe,{Pl:"sweepAngle"},r("Rg"),function(a){s&&t.h(a,pe,"sweepAngle");t.u(this,a);this.Rg=a;this.Ia=h});
function qe(){this.O=m;this.px=(new D(0,0)).freeze();this.hw=(new D(0,0)).freeze();this.ts=this.ot=0;this.at="";this.Is=this.xs=0;this.mi=this.Ps=o;this.qi=m;this.$t=0;this.nf=this.Xt=m}t.J("InputEvent",qe);qe.prototype.copy=qe.prototype.copy=function(){var a=new qe;a.O=this.O;a.px=this.xc.copy().freeze();a.hw=this.F.copy().freeze();a.ot=this.ot;a.ts=this.ts;a.at=this.at;a.xs=this.xs;a.Is=this.Is;a.Ps=this.Ps;a.mi=this.mi;a.qi=this.qi;a.$t=this.$t;a.Xt=this.Xt;a.nf=this.nf;return a};
qe.prototype.toString=function(){var a="^";this.jh&&(a=a+("M:"+this.jh));this.button&&(a=a+("B:"+this.button));this.key&&(a=a+("K:"+this.key));this.Le&&(a=a+("C:"+this.Le));this.Qi&&(a=a+("D:"+this.Qi));this.zd&&(a=a+"h");this.bubbles&&(a=a+"b");this.F!==m&&(a=a+("@"+this.F.toString()));return a};t.a(qe,"diagram",qe.prototype.b);t.defineProperty(qe,{b:"diagram"},r("O"),ba("O"));t.a(qe,"viewPoint",qe.prototype.xc);t.defineProperty(qe,{xc:"viewPoint"},r("px"),function(a){t.c(a,D,qe,"viewPoint");this.px.Ua(a)});
t.a(qe,"documentPoint",qe.prototype.F);t.defineProperty(qe,{F:"documentPoint"},r("hw"),function(a){t.c(a,D,qe,"documentPoint");this.hw.Ua(a)});t.a(qe,"modifiers",qe.prototype.jh);t.defineProperty(qe,{jh:"modifiers"},r("ot"),ba("ot"));t.a(qe,"button",qe.prototype.button);t.defineProperty(qe,{button:"button"},r("ts"),ba("ts"));t.a(qe,"key",qe.prototype.key);t.defineProperty(qe,{key:"key"},r("at"),ba("at"));t.a(qe,"clickCount",qe.prototype.Le);t.defineProperty(qe,{Le:"clickCount"},r("xs"),ba("xs"));
t.a(qe,"delta",qe.prototype.Qi);t.defineProperty(qe,{Qi:"delta"},r("Is"),ba("Is"));t.a(qe,"handled",qe.prototype.zd);t.defineProperty(qe,{zd:"handled"},r("Ps"),ba("Ps"));t.a(qe,"bubbles",qe.prototype.bubbles);t.defineProperty(qe,{bubbles:"bubbles"},r("mi"),ba("mi"));t.a(qe,"event",qe.prototype.event);t.defineProperty(qe,{event:"event"},r("qi"),ba("qi"));t.a(qe,"timestamp",qe.prototype.timestamp);t.defineProperty(qe,{timestamp:"timestamp"},r("$t"),ba("$t"));t.a(qe,"targetDiagram",qe.prototype.Hf);
t.defineProperty(qe,{Hf:"targetDiagram"},r("Xt"),ba("Xt"));t.a(qe,"targetObject",qe.prototype.gd);t.defineProperty(qe,{gd:"targetObject"},r("nf"),ba("nf"));t.m(qe,{jk:"control"},function(){return(this.jh&1)!==0});t.m(qe,{shift:"shift"},function(){return(this.jh&4)!==0});t.m(qe,{alt:"alt"},function(){return(this.jh&2)!==0});t.m(qe,{IJ:"meta"},function(){return(this.jh&8)!==0});t.m(qe,{left:"left"},function(){return this.button===0});t.m(qe,{JJ:"middle"},function(){return this.button===1});
t.m(qe,{right:"right"},function(){return this.button===2});function re(){this.O=m;this.vb="";this.Bt=this.Tt=m;this.us=o}t.J("DiagramEvent",re);re.prototype.copy=re.prototype.copy=function(){var a=new re;a.O=this.O;a.vb=this.vb;a.Tt=this.Tt;a.Bt=this.Bt;a.us=this.us;return a};re.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a=a+"x");this.hv!==m&&(a=a+(":"+this.hv.toString()));this.Vu!==m&&(a=a+("("+this.Vu.toString()+")"));return a};t.a(re,"diagram",re.prototype.b);
t.defineProperty(re,{b:"diagram"},r("O"),ba("O"));t.a(re,"name",re.prototype.name);t.defineProperty(re,{name:"name"},r("vb"),ba("vb"));t.a(re,"subject",re.prototype.hv);t.defineProperty(re,{hv:"subject"},r("Tt"),ba("Tt"));t.a(re,"parameter",re.prototype.Vu);t.defineProperty(re,{Vu:"parameter"},r("Bt"),ba("Bt"));t.a(re,"cancel",re.prototype.cancel);t.defineProperty(re,{cancel:"cancel"},r("us"),ba("us"));function se(){this.clear()}t.J("ChangedEvent",se);var te;
se.Transaction=te=t.l(se,"Transaction",-1);var ue;se.Property=ue=t.l(se,"Property",0);var ve;se.Insert=ve=t.l(se,"Insert",1);var we;se.Remove=we=t.l(se,"Remove",2);se.prototype.clear=se.prototype.clear=function(){this.vs=ue;this.Gt=this.nt="";this.rt=this.st=this.yt=this.zt=this.xt=this.O=this.bg=m};
se.prototype.copy=se.prototype.copy=function(){var a=new se;a.bg=this.bg;a.O=this.O;a.vs=this.vs;a.nt=this.nt;a.Gt=this.Gt;a.xt=this.xt;var b=this.zt;a.zt=b instanceof Object&&b.D!==f?b.D():b;b=this.yt;a.yt=b instanceof Object&&b.D!==f?b.D():b;b=this.st;a.st=b instanceof Object&&b.D!==f?b.D():b;b=this.rt;a.rt=b instanceof Object&&b.D!==f?b.D():b;return a};
se.prototype.toString=function(){var a="",a=this.Rc===te?a+"* ":this.Rc===ue?a+(this.L!==m?"!m":"!d"):a+((this.L!==m?"!m":"!d")+this.Rc);this.propertyName&&typeof this.propertyName==="string"&&(a=a+(" "+this.propertyName));this.me&&this.me!==this.propertyName&&(a=a+(" "+this.me));a=a+": ";if(this.Rc===te)this.oldValue!==m&&(a=a+(" "+this.oldValue));else{this.object!==m&&(a=a+Ie(this.object));this.oldValue!==m&&(a=a+("  old: "+Ie(this.oldValue)));this.Te!==m&&(a=a+(" "+this.Te));this.newValue!==m&&
(a=a+("  new: "+Ie(this.newValue)));this.Se!==m&&(a=a+(" "+this.Se))}return a};se.prototype.getValue=se.prototype.da=function(a){return a?this.oldValue:this.newValue};se.prototype.getParam=se.prototype.WI=function(a){return a?this.Te:this.Se};se.prototype.canUndo=se.prototype.hk=function(){return this.L!==m||this.b!==m?h:o};se.prototype.undo=se.prototype.yk=function(){this.hk()&&(this.L!==m?this.L.ir(this,h):this.b!==m&&this.b.ir(this,h))};
se.prototype.canRedo=se.prototype.gk=function(){return this.L!==m||this.b!==m?h:o};se.prototype.redo=se.prototype.Xn=function(){this.gk()&&(this.L!==m?this.L.ir(this,o):this.b!==m&&this.b.ir(this,o))};t.a(se,"model",se.prototype.L);t.defineProperty(se,{L:"model"},r("bg"),ba("bg"));t.a(se,"diagram",se.prototype.b);t.defineProperty(se,{b:"diagram"},r("O"),ba("O"));t.a(se,"change",se.prototype.Rc);t.defineProperty(se,{Rc:"change"},r("vs"),function(a){s&&t.Va(a,se,se,"change");this.vs=a});
t.a(se,"modelChange",se.prototype.me);t.defineProperty(se,{me:"modelChange"},r("nt"),function(a){s&&t.e(a,"string",se,"modelChange");this.nt=a});t.a(se,"propertyName",se.prototype.propertyName);t.defineProperty(se,{propertyName:"propertyName"},r("Gt"),function(a){s&&typeof a!=="string"&&t.c(a,Function,se,"propertyName");this.Gt=a});t.a(se,"object",se.prototype.object);t.defineProperty(se,{object:"object"},r("xt"),ba("xt"));t.a(se,"oldValue",se.prototype.oldValue);
t.defineProperty(se,{oldValue:"oldValue"},r("zt"),ba("zt"));t.a(se,"oldParam",se.prototype.Te);t.defineProperty(se,{Te:"oldParam"},r("yt"),ba("yt"));t.a(se,"newValue",se.prototype.newValue);t.defineProperty(se,{newValue:"newValue"},r("st"),ba("st"));t.a(se,"newParam",se.prototype.Se);t.defineProperty(se,{Se:"newParam"},r("rt"),ba("rt"));
function C(a){t.Lb(this);this.bw=this.vb="";this.Kj=o;this.eg=[];this.Cc=new ra(m,Object);this.bq="key";this.Ds=this.dt=m;this.$p="category";this.zg=new ra(m,ta);this.vi=m;this.Sk=this.Fi=o;this.lx=m;this.ha=new Je;if(a!==f)this.lh=a}t.J("Model",C);C.prototype.clear=C.prototype.clear=function(){this.eg=[];this.Cc.clear();this.zg.clear();this.ha.clear()};
C.prototype.writeJsonProtected=C.prototype.UD=function(){var a="";this.name!==""&&(a=a+(',\n  "name": '+this.quote(this.name)));this.ul!==""&&(a=a+(',\n  "dataFormat": '+this.quote(this.ul)));this.Pa&&(a=a+(',\n  "isReadOnly": '+this.Pa));this.Il!=="key"&&typeof this.Il==="string"&&(a=a+(',\n  "nodeKeyProperty": '+this.quote(this.Il)));this.Hl!=="category"&&typeof this.Hl==="string"&&(a=a+(',\n  "nodeCategoryProperty": '+this.quote(this.Hl)));return a};
C.prototype.jz=function(){return',\n  "nodeDataArray": '+Ke(this,this.lh,h)};C.prototype.readJsonProtected=C.prototype.VC=function(a){if(a.name)this.name=a.name;if(a.dataFormat)this.ul=a.dataFormat;if(a.isReadOnly)this.Pa=a.isReadOnly;if(a.nodeKeyProperty)this.Il=a.nodeKeyProperty;if(a.nodeCategoryProperty)this.Hl=a.nodeCategoryProperty};C.prototype.Ly=function(a){if(a.nodeDataArray){a=a.nodeDataArray;Le(this,a);this.lh=a}};
C.prototype.toString=function(a){a===f&&(a=0);if(a>=2)return this.BD();var b=(this.name!==""?this.name:"")+" Model";if(a>0){var b=b+"\n node data:",a=this.lh,c=t.Eb(a),d;for(d=0;d<c;d++)var e=t.rb(a,d),b=b+(" "+this.$b(e)+":"+Ie(e))}return b};C.prototype.toJson=C.prototype.BD=function(a){a===f&&(a=this.constructor===C?"go.Model":this.constructor===P?"go.GraphLinksModel":t.Vi(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.jz()+"}"};
C.fromJson=function(a,b){b===f&&(b=m);t.e(a,"string",C,"fromJson:s");b&&t.c(b,C,C,"fromJson:model");var c=m;if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){s&&t.trace("JSON.parse error: "+d.toString())}else t.trace("WARNING: no JSON.parse available");if(c===m)return m;if(b===m){var e;e=m;var g=c["class"];if(typeof g==="string")try{var i=m;if(g.indexOf("go.")===0){g=g.substr(3);i=ga[g]}else(i=ga[g])||(i=window[g]);typeof i==="function"&&(e=new i)}catch(j){}e===m||e instanceof
C?b=e:t.g("Unable to construct a Model of declared class: "+c["class"])}b===m&&(b=new P);b.readJsonProtected(c);b.Ly(c);return b};
function Le(a,b){if(t.isArray(b))for(var c=t.Eb(b),d=0;d<c;d++){var e=t.rb(b,d);e instanceof Object&&t.aF(b,d,Le(a,e))}else if(b instanceof Object){for(d in b){e=b[d];e instanceof Object&&(b[d]=Le(a,e))}if(typeof b!=="object")c=b;else{e=b;d=b["class"];if(d==="NaN")e=NaN;else if(d==="go.Point")e=new D(b.x,b.y);else if(d==="go.Size")e=new K(b.width,b.height);else if(d==="go.Rect")e=new E(b.x,b.y,b.width,b.height);else if(d==="go.Margin")e=new Eb(b.top,b.right,b.bottom,b.left);else if(d==="go.Spot")e=
typeof b["enum"]==="string"?Rb(b["enum"]):new J(b.x,b.y,b.offsetX,b.offsetY);else if(d==="go.Brush"){e=new Me;e.type=t.Zx(Me,b.type);if(b.start instanceof J)e.start=b.start;if(b.end instanceof J)e.end=b.end;if(typeof b.startRadius==="number")e.eo=b.startRadius;if(typeof b.endRadius==="number")e.rn=b.endRadius;if(d=b.colorStops)for(c in d)e.addColorStop(parseFloat(c),d[c])}else if(d==="go.Geometry"){e=typeof b.path==="string"?Od(b.path):new Fd;e.type=t.Zx(Fd,b.type);if(typeof b.startX==="number")e.Ra=
b.startX;if(typeof b.startY==="number")e.Sa=b.startY;if(typeof b.endX==="number")e.ea=b.endX;if(typeof b.endY==="number")e.fa=b.endY;if(b.spot1 instanceof J)e.n=b.spot1;if(b.spot2 instanceof J)e.o=b.spot2}c=e}return c}return b}C.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b=e==='"'||e==="\\"?b+("\\"+e):e==="\b"?b+"\\b":e==="\f"?b+"\\f":e==="\n"?b+"\\n":e==="\r"?b+"\\r":e==="\t"?b+"\\t":b+e;return'"'+b+'"'};
C.prototype.writeJsonValue=C.prototype.VD=function(a){var b;if(a===f)b="undefined";else if(a===m)b="null";else if(a===h)b="true";else if(a===o)b="false";else if(typeof a==="string")b=this.quote(a);else if(typeof a==="number")b=a===Infinity?"9e9999":a===-Infinity?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(t.isArray(a))b=Ke(this,a);else if(a instanceof Object){var c=a;if(c instanceof D)a={"class":"go.Point",x:c.x,y:c.y};else if(c instanceof K)a={"class":"go.Size",width:c.width,height:c.height};
else if(c instanceof E)a={"class":"go.Rect",x:c.x,y:c.y,width:c.width,height:c.height};else if(c instanceof Eb)a={"class":"go.Margin",top:c.top,right:c.right,bottom:c.bottom,left:c.left};else if(c instanceof J)a=Tb(c)?{"class":"go.Spot",x:c.x,y:c.y,offsetX:c.offsetX,offsetY:c.offsetY}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Me){a={"class":"go.Brush",type:c.type.name};if(c.type===Ne)a.color=c.color;else if(c.type===Oe||c.type===Pe){a.start=c.start;a.end=c.end;if(c.type===Pe){if(c.eo!==
0)a.startRadius=c.eo;if(!isNaN(c.rn))a.endRadius=c.rn}}if(c.nn!==m){for(var d={},c=c.nn.f;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else if(c instanceof Fd){a={"class":"go.Geometry",type:c.type.name};if(c.Ra!==0)a.startX=c.Ra;if(c.Sa!==0)a.startY=c.Sa;if(c.ea!==0)a.endX=c.ea;if(c.fa!==0)a.endY=c.fa;if(!c.n.z(dc))a.spot1=c.n;if(!c.o.z(qc))a.spot2=c.o;c.vc.count>0&&(a.path=a.toString())}d="{";c=h;for(b in a){var e=t.Za(a,b);if(!(e===f||b==="__gohashid"||b[0]==="_"||typeof e==="function")){c?
c=o:d=d+", ";d=d+('"'+b+'":'+this.VD(e))}}b=d+"}"}else b=typeof a==="function"?"null":a.toString();return b};function Ke(a,b,c){var d=t.Eb(b),e="[ ";c&&d>1&&(e=e+"\n");for(var g=0;g<d;g++){var i=t.rb(b,g);if(i!==f){if(g>0){e=e+",";c&&(e=e+"\n")}e=e+a.VD(i)}}c&&d>1&&(e=e+"\n");return e+" ]"}t.a(C,"name",C.prototype.name);t.defineProperty(C,{name:"name"},r("vb"),function(a){var b=this.vb;if(b!==a){t.e(a,"string",C,"name");this.vb=a;this.d("name",b,a)}});t.a(C,"dataFormat",C.prototype.ul);
t.defineProperty(C,{ul:"dataFormat"},r("bw"),function(a){var b=this.bw;if(b!==a){t.e(a,"string",C,"dataFormat");this.bw=a;this.d("dataFormat",b,a)}});t.a(C,"isReadOnly",C.prototype.Pa);t.defineProperty(C,{Pa:"isReadOnly"},r("Kj"),function(a){var b=this.Kj;if(b!==a){t.e(a,"boolean",C,"isReadOnly");this.Kj=a;this.d("isReadOnly",b,a)}});C.prototype.addChangedListener=C.prototype.vx=function(a){t.e(a,"function",C,"addChangedListener:listener");if(this.vi===m)this.vi=new z("function");this.vi.add(a)};
C.prototype.removeChangedListener=C.prototype.Ny=function(a){t.e(a,"function",C,"removeChangedListener:listener");if(this.vi!==m){this.vi.remove(a);if(this.vi.count===0)this.vi=m}};C.prototype.lu=function(a){this.gb||this.ha.dC(a);if(this.vi!==m)for(var b=this.vi.f;b.next();){var c=b.value;c(a)}};C.prototype.raiseChangedEvent=C.prototype.pe=function(a,b,c,d,e,g,i){Qe(this,"",a,b,c,d,e,g,i)};C.prototype.raiseChanged=C.prototype.d=function(a,b,c,d,e){Qe(this,"",ue,a,this,b,c,d,e)};
C.prototype.raiseDataChanged=C.prototype.WJ=function(a,b,c,d,e,g){Qe(this,"",ue,b,a,c,d,e,g)};function Qe(a,b,c,d,e,g,i,j,k){j===f&&(j=m);k===f&&(k=m);var l=new se;l.L=a;l.Rc=c;l.me=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Te=j;l.newValue=i;l.Se=k;a.lu(l)}t.a(C,"undoManager",C.prototype.ha);t.defineProperty(C,{ha:"undoManager"},r("lx"),function(a){var b=this.lx;if(b!==a){t.c(a,Je,C,"undoManager");b!==m&&b.FG(this);this.lx=a;a!==m&&a.EE(this)}});t.a(C,"skipsUndoManager",C.prototype.gb);
t.defineProperty(C,{gb:"skipsUndoManager"},r("Fi"),function(a){t.e(a,"boolean",C,"skipsUndoManager");this.Fi=a});C.prototype.ir=function(a,b){if(a!==m&&a.L===this){var c=this.Sk;try{this.Sk=h;this.Fx(a,b)}finally{this.Sk=c}}};
C.prototype.Fx=function(a,b){if(a.Rc===ue){var c=a.object,d=a.propertyName,e=a.da(b);t.fb(c,d,e)}else if(a.Rc===ve)if(a.me==="nodeDataArray"){c=a.newValue;if(c instanceof Object){d=this.$b(c);if(b){t.Vh(this.eg,a.Se);this.Cc.remove(d)}else{t.Uh(this.eg,a.Se,c);this.Cc.add(d,c)}}}else if(a.me===""){c=a.object;!t.isArray(c)&&a.propertyName&&(c=t.Za(a.object,a.propertyName));if(t.isArray(c)){d=a.newValue;e=a.Se;b?t.Vh(c,e):t.Uh(c,e,d)}}else t.g("unknown ChangedEvent.Insert object: "+a.toString());else if(a.Rc===
we)if(a.me==="nodeDataArray"){c=a.oldValue;if(c instanceof Object){d=this.$b(c);if(b){t.Uh(this.eg,a.Te,c);this.Cc.add(d,c)}else{t.Vh(this.eg,a.Te);this.Cc.remove(d)}}}else if(a.me===""){c=a.object;!t.isArray(c)&&a.propertyName&&(c=t.Za(a.object,a.propertyName));if(t.isArray(c)){d=a.oldValue;e=a.Te;b?t.Uh(c,e,d):t.Vh(c,e)}}else t.g("unknown ChangedEvent.Remove object: "+a.toString());else a.Rc!==te&&t.g("unknown ChangedEvent: "+a.toString())};C.prototype.startTransaction=C.prototype.Kb=function(a){return this.ha.Kb(a)};
C.prototype.commitTransaction=C.prototype.Pd=function(a){return this.ha.Pd(a)};C.prototype.rollbackTransaction=C.prototype.Wr=function(){return this.ha.Wr()};C.prototype.updateTargetBindings=C.prototype.mc=function(a,b){b===f&&(b="");Qe(this,"SourceChanged",te,b,a,m,m)};t.a(C,"nodeKeyProperty",C.prototype.Il);
t.defineProperty(C,{Il:"nodeKeyProperty"},r("bq"),function(a){var b=this.bq;if(b!==a){Re(a,C,"nodeKeyProperty");this.Cc.count>0&&t.g("Cannot set Model.nodeKeyProperty when there is existing node data");this.bq=a;this.d("nodeKeyProperty",b,a)}});function Re(a,b,c){typeof a!=="string"&&typeof a!=="function"&&t.wc(a,"string or function",b,c)}
C.prototype.getKeyForNodeData=C.prototype.$b=function(a){if(a!==m){var b=this.bq;if(b!==""){b=t.Za(a,b);if(b!==f){if(Se(b))return b;s&&t.trace("Key value for node data "+a+" is not a number or a string: "+b)}}}};t.a(C,"makeUniqueKeyFunction",C.prototype.kG);t.defineProperty(C,{kG:"makeUniqueKeyFunction"},r("dt"),function(a){var b=this.dt;if(b!==a){a!==m&&t.e(a,"function",C,"makeUniqueKeyFunction");this.dt=a;this.d("makeUniqueKeyFunction",b,a)}});
function Se(a){return typeof a==="number"||typeof a==="string"}C.prototype.containsNodeData=C.prototype.Mi=function(a){a=this.$b(a);return a===f?o:this.Cc.contains(a)};C.prototype.findNodeDataForKey=C.prototype.fh=function(a){a===m&&t.g("Model.findNodeDataForKey:key must not be null");return a===f||!Se(a)?m:this.Cc.da(a)};t.a(C,"nodeDataArray",C.prototype.lh);
t.defineProperty(C,{lh:"nodeDataArray"},r("eg"),function(a){var b=this.eg;if(b!==a){t.eB(a,C,"nodeDataArray");this.Cc.clear();this.dz();for(var c=t.Eb(a),d=0;d<c;d++){var e=t.rb(a,d);if(!(e instanceof Object)){t.g("Model.nodeDataArray must only contain Objects, not: "+e);return}t.Bn(e)}this.eg=a;for(var g=new z(Object),d=0;d<c;d++){var e=t.rb(a,d),i=this.$b(e);i===f?g.add(e):this.Cc.da(i)!==m?g.add(e):this.Cc.add(i,e)}for(d=g.f;d.next();){e=d.value;this.BC(e);g=this.$b(e);this.Cc.add(g,e)}Qe(this,
"nodeDataArray",ue,"nodeDataArray",this,b,a);for(d=0;d<c;d++){e=t.rb(a,d);this.Yu(e);this.Xu(e)}this.gB();if(!(a instanceof Array))this.Pa=h}});
C.prototype.makeNodeDataKeyUnique=C.prototype.BC=function(a){if(a!==m){var b=this.bq;if(b!==""){var c=this.$b(a);if(c===f||this.Cc.contains(c)){var d=this.dt;if(d!==m){c=d(this,a);if(c!==f&&c!==m&&!this.Cc.contains(c)){t.fb(a,b,c);return}}if(typeof c==="string"){for(d=2;this.Cc.contains(c+d);)d++;t.fb(a,b,c+d)}else if(c===f||typeof c==="number"){for(d=-this.Cc.count-1;this.Cc.contains(d);)d--;t.fb(a,b,d)}else t.g("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
C.prototype.addNodeData=C.prototype.gu=function(a){if(a!==m){t.Bn(a);var b=this.$b(a);if(!(b!==f&&this.Cc.da(b)===a)){this.BC(a);b=this.$b(a);this.Cc.add(b,a);b=t.Eb(this.eg);t.Uh(this.eg,b,a);Qe(this,"nodeDataArray",ve,"nodeDataArray",this,m,a,m,b);this.Yu(a);this.Xu(a)}}};
C.prototype.removeNodeData=C.prototype.$C=function(a){if(a!==m){var b=this.$b(a);if(b!==f&&this.Cc.contains(b)){this.Cc.remove(b);b=t.Ax(this.eg,a);if(!(b<0)){t.Vh(this.eg,b);Qe(this,"nodeDataArray",we,"nodeDataArray",this,a,m,b,m);this.ez(a)}}}};C.prototype.dz=aa();C.prototype.Yu=aa();C.prototype.Xu=aa();C.prototype.ez=aa();C.prototype.delayReference=C.prototype.ng=function(a,b){if(a!==f){var c=this.zg.da(a);if(c===m){c=new ta;this.zg.add(a,c)}c.add(b)}};
C.prototype.forgetDelayedReference=C.prototype.gh=function(a,b){if(a!==f){var c=this.zg.da(a);if(c instanceof ta)if(b===f||b===m)this.zg.remove(a);else{c.remove(b);c.count===0&&this.zg.remove(a)}}};C.prototype.dumpDelayedReferences=C.prototype.CI=function(){t.trace("DelayedReferences ("+this.zg.count+")");for(var a=this.zg.f;a.next();){for(var b="",c=a.value.f;c.next();)b=b+(Ie(c.value)+", ");t.trace("  "+a.key+": "+b)}};
C.prototype.findDelayedReferences=C.prototype.PB=function(a){if(a===f)return m;a=this.zg.da(a);return a instanceof ta?a:m};C.prototype.clearUnresolvedReferences=C.prototype.gB=function(a){a===f?this.zg.clear():this.zg.remove(a)};t.a(C,"copyNodeDataFunction",C.prototype.kF);t.defineProperty(C,{kF:"copyNodeDataFunction"},r("Ds"),function(a){var b=this.Ds;if(b!==a){a!==m&&t.e(a,"function",C,"copyNodeDataFunction");this.Ds=a;this.d("copyNodeDataFunction",b,a)}});
C.prototype.copyNodeData=C.prototype.on=function(a){if(a===m)return m;var b=m,b=this.Ds;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)t.fb(b,c,t.Za(a,c))}b&&t.Lb(b);return b};
C.prototype.setDataProperty=C.prototype.QG=function(a,b,c){if(s){t.e(a,"object",C,"setDataProperty:data");t.e(b,"string",C,"setDataProperty:propname");b===""&&t.g("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)}if(this.Mi(a))if(b===this.Il)t.g("Model.setDataProperty: property name must not be the key for the node data: "+b);else if(b===this.Hl&&typeof c==="string"){this.rD(a,c);return}var d=t.Za(a,b);if(d!==c){t.fb(a,b,c);Qe(this,"",ue,b,a,d,c)}};
C.prototype.insertArrayItem=C.prototype.hJ=function(a,b,c){if(s){t.isArray(a)||t.g("Model.insertArrayItem:arr must be an Array-like object, not: "+a);t.h(b,C,"insertArrayItem:idx")}b<0&&(b=t.Eb(a));t.Uh(a,b,c);Qe(this,"",ve,"",a,m,c,m,b)};
C.prototype.removeArrayItem=C.prototype.$J=function(a,b){b===f&&(b=-1);if(s){t.isArray(a)||t.g("Model.removeArrayItem:arr must be an Array-like object, not: "+a);t.h(b,C,"removeArrayItem:idx")}b===-1&&(b=t.Eb(a)-1);var c=t.rb(a,b);t.Vh(a,b);Qe(this,"",we,"",a,c,m,b,m)};t.a(C,"nodeCategoryProperty",C.prototype.Hl);t.defineProperty(C,{Hl:"nodeCategoryProperty"},r("$p"),function(a){var b=this.$p;if(b!==a){Re(a,C,"nodeCategoryProperty");this.$p=a;this.d("nodeCategoryProperty",b,a)}});
C.prototype.getCategoryForNodeData=C.prototype.XB=function(a){if(a===m)return"";var b=this.$p;if(b==="")return"";b=t.Za(a,b);if(b===f)return"";if(typeof b==="string")return b;s&&t.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
C.prototype.setCategoryForNodeData=C.prototype.rD=function(a,b){t.e(b,"string",C,"setCategoryForNodeData:val");if(a!==m){var c=this.$p;if(c!=="")if(this.Mi(a)){var d=t.Za(a,c);if(d!==b){t.fb(a,c,b);Qe(this,"nodeCategory",ue,c,a,d,b)}}else t.fb(a,c,b)}};function P(a,b){C.call(this);this.Mj=[];this.Gp=new ta(Object);this.Cs=m;this.Nj="from";this.Pj="to";this.Jp=this.Ip="";this.Ep="category";this.Fh=this.ut="";this.tt="isGroup";this.Sj="group";if(a!==f)this.lh=a;if(b!==f)this.qg=b}
t.J("GraphLinksModel",P);t.ua(P,C);P.prototype.clear=P.prototype.clear=function(){C.prototype.clear.call(this);this.Mj=[];this.Gp.clear()};P.prototype.toString=function(a){a===f&&(a=0);if(a>=2)return this.BD();var b=(this.name!==""?this.name:"")+" GraphLinksModel";if(a>0){var b=b+"\n node data:",a=this.lh,c=t.Eb(a),d;for(d=0;d<c;d++)var e=t.rb(a,d),b=b+(" "+this.$b(e)+":"+Ie(e));b=b+"\n link data:";a=this.qg;c=t.Eb(a);for(d=0;d<c;d++){e=t.rb(a,d);b=b+(" "+this.zn(e)+"--\>"+this.An(e))}}return b};
P.prototype.writeJsonProtected=P.prototype.UD=function(){var a=C.prototype.UD.call(this),b="";this.Gn!=="category"&&typeof this.Gn==="string"&&(b=b+(',\n  "linkCategoryProperty": '+this.quote(this.Gn)));this.Hn!=="from"&&typeof this.Hn==="string"&&(b=b+(',\n "linkFromKeyProperty": '+this.quote(this.Hn)));this.Ln!=="to"&&typeof this.Ln==="string"&&(b=b+(',\n  "linkToKeyProperty": '+this.quote(this.Ln)));this.In!==""&&typeof this.In==="string"&&(b=b+(',\n  "linkFromPortIdProperty": '+this.quote(this.In)));
this.Mn!==""&&typeof this.Mn==="string"&&(b=b+(',\n  "linkToPortIdProperty": '+this.quote(this.Mn)));this.Un!==""&&typeof this.Un==="string"&&(b=b+(',\n "nodeIsLinkLabelProperty": '+this.quote(this.Un)));this.Jn!==""&&typeof this.Jn==="string"&&(b=b+(',\n  "linkLabelKeysProperty": '+this.quote(this.Jn)));this.Tn!=="isGroup"&&typeof this.Tn==="string"&&(b=b+(',\n "nodeIsGroupProperty": '+this.quote(this.Tn)));this.Sn!=="group"&&typeof this.Sn==="string"&&(b=b+(',\n  "nodeGroupKeyProperty": '+this.quote(this.Sn)));
return a+b};P.prototype.jz=function(){var a=C.prototype.jz.call(this),b=',\n  "linkDataArray": '+Ke(this,this.qg,h);return a+b};
P.prototype.readJsonProtected=P.prototype.VC=function(a){C.prototype.VC.call(this,a);if(a.linkFromKeyProperty)this.Hn=a.linkFromKeyProperty;if(a.linkToKeyProperty)this.Ln=a.linkToKeyProperty;if(a.linkFromPortIdProperty)this.In=a.linkFromPortIdProperty;if(a.linkToPortIdProperty)this.Mn=a.linkToPortIdProperty;if(a.linkCategoryProperty)this.Gn=a.linkCategoryProperty;if(a.nodeIsLinkLabelProperty)this.Un=a.nodeIsLinkLabelProperty;if(a.linkLabelKeysProperty)this.Jn=a.linkLabelKeysProperty;if(a.nodeIsGroupProperty)this.Tn=
a.nodeIsGroupProperty;if(a.nodeGroupKeyProperty)this.Sn=a.nodeGroupKeyProperty};P.prototype.Ly=function(a){C.prototype.Ly.call(this,a);if(a.linkDataArray){a=a.linkDataArray;Le(this,a);this.qg=a}};
P.prototype.Fx=function(a,b){if(a.Rc===ve){var c=m;a.me==="linkDataArray"?c=this.qg:a.me==="linkLabelKeys"&&(c=this.Al(a.object));if(t.isArray(c)){b?t.Vh(c,a.Se):t.Uh(c,a.Se,a.newValue);return}}else if(a.Rc===we){c=m;a.me==="linkDataArray"?c=this.qg:a.me==="linkLabelKeys"&&(c=this.Al(a.object));if(t.isArray(c)){b?t.Uh(c,a.Te,a.oldValue):t.Vh(c,a.Te);return}}C.prototype.Fx.call(this,a,b)};t.a(P,"linkFromKeyProperty",P.prototype.Hn);
t.defineProperty(P,{Hn:"linkFromKeyProperty"},r("Nj"),function(a){var b=this.Nj;if(b!==a){Re(a,P,"linkFromKeyProperty");this.Nj=a;this.d("linkFromKeyProperty",b,a)}});P.prototype.getFromKeyForLinkData=P.prototype.zn=function(a){if(a!==m){var b=this.Nj;if(b!==""){b=t.Za(a,b);if(b!==f){if(Se(b))return b;s&&t.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setFromKeyForLinkData=P.prototype.dv=function(a,b){s&&b!==f&&!Se(b)&&t.wc(b,"number or string",P,"setFromKeyForLinkData:key");if(a!==m){var c=this.Nj;if(c!=="")if(this.Yh(a)){var d=t.Za(a,c);if(d!==b){this.gh(d,a);t.fb(a,c,b);this.fh(b)===m&&this.ng(b,a);Qe(this,"linkFromKey",ue,c,a,d,b);typeof c==="string"&&this.mc(a,c)}}else t.fb(a,c,b)}};t.a(P,"linkToKeyProperty",P.prototype.Ln);
t.defineProperty(P,{Ln:"linkToKeyProperty"},r("Pj"),function(a){var b=this.Pj;if(b!==a){Re(a,P,"linkToKeyProperty");this.Pj=a;this.d("linkToKeyProperty",b,a)}});P.prototype.getToKeyForLinkData=P.prototype.An=function(a){if(a!==m){var b=this.Pj;if(b!==""){b=t.Za(a,b);if(b!==f){if(Se(b))return b;s&&t.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setToKeyForLinkData=P.prototype.ev=function(a,b){s&&b!==f&&!Se(b)&&t.wc(b,"number or string",P,"setToKeyForLinkData:key");if(a!==m){var c=this.Pj;if(c!=="")if(this.Yh(a)){var d=t.Za(a,c);if(d!==b){this.gh(d,a);t.fb(a,c,b);this.fh(b)===m&&this.ng(b,a);Qe(this,"linkToKey",ue,c,a,d,b);typeof c==="string"&&this.mc(a,c)}}else t.fb(a,c,b)}};t.a(P,"linkFromPortIdProperty",P.prototype.In);
t.defineProperty(P,{In:"linkFromPortIdProperty"},r("Ip"),function(a){var b=this.Ip;if(b!==a){Re(a,P,"linkFromPortIdProperty");this.Ip=a;this.d("linkFromPortIdProperty",b,a)}});P.prototype.getFromPortIdForLinkData=P.prototype.JF=function(a){if(a===m)return"";var b=this.Ip;if(b==="")return"";a=t.Za(a,b);return a===f?"":a};
P.prototype.setFromPortIdForLinkData=P.prototype.$r=function(a,b){t.e(b,"string",P,"setFromPortIdForLinkData:portname");if(a!==m){var c=this.Ip;if(c!=="")if(this.Yh(a)){var d=t.Za(a,c);if(d!==b){t.fb(a,c,b);Qe(this,"linkFromPortId",ue,c,a,d,b);typeof c==="string"&&this.mc(a,c)}}else t.fb(a,c,b)}};t.a(P,"linkToPortIdProperty",P.prototype.Mn);
t.defineProperty(P,{Mn:"linkToPortIdProperty"},r("Jp"),function(a){var b=this.Jp;if(b!==a){Re(a,P,"linkToPortIdProperty");this.Jp=a;this.d("linkToPortIdProperty",b,a)}});P.prototype.getToPortIdForLinkData=P.prototype.LF=function(a){if(a===m)return"";var b=this.Jp;if(b==="")return"";a=t.Za(a,b);return a===f?"":a};
P.prototype.setToPortIdForLinkData=P.prototype.bs=function(a,b){t.e(b,"string",P,"setToPortIdForLinkData:portname");if(a!==m){var c=this.Jp;if(c!=="")if(this.Yh(a)){var d=t.Za(a,c);if(d!==b){t.fb(a,c,b);Qe(this,"linkToPortId",ue,c,a,d,b);typeof c==="string"&&this.mc(a,c)}}else t.fb(a,c,b)}};t.a(P,"nodeIsLinkLabelProperty",P.prototype.Un);
t.defineProperty(P,{Un:"nodeIsLinkLabelProperty"},r("ut"),function(a){var b=this.ut;if(b!==a){Re(a,P,"nodeIsLinkLabelProperty");this.ut=a;this.d("nodeIsLinkLabelProperty",b,a)}});P.prototype.isLinkLabelForNodeData=P.prototype.qy=function(a){if(a===m)return o;var b=this.ut;return b===""?o:t.Za(a,b)?h:o};t.a(P,"linkLabelKeysProperty",P.prototype.Jn);
t.defineProperty(P,{Jn:"linkLabelKeysProperty"},r("Fh"),function(a){var b=this.Fh;if(b!==a){Re(a,P,"linkLabelKeysProperty");this.Fh=a;this.d("linkLabelKeysProperty",b,a)}});P.prototype.getLabelKeysForLinkData=P.prototype.Al=function(a){if(a===m)return[];var b=this.Fh;if(b==="")return[];a=t.Za(a,b);return a===f?[]:a};
P.prototype.setLabelKeysForLinkData=P.prototype.sD=function(a,b){t.c(b,Array,P,"setLabelKeysForLinkData:arr");if(a!==m){var c=this.Fh;if(c!=="")if(this.Yh(a)){var d=t.Za(a,c);if(d!==b){for(var e=t.Eb(d),g=0;g<e;g++){var i=t.rb(d,g);this.gh(i,a)}t.fb(a,c,b);e=t.Eb(b);for(g=0;g<e;g++){i=t.rb(b,g);this.fh(i)===m&&this.ng(i,a)}Qe(this,"linkLabelKeys",ue,c,a,d,b);typeof c==="string"&&this.mc(a,c)}}else t.fb(a,c,b)}};
P.prototype.addLabelKeyForLinkData=P.prototype.SA=function(a,b){s&&(Se(b)||t.wc(b,"number or string",P,"addLabelKeyForLinkData:key"));if(a!==m){var c=this.Fh;if(c!==""){var d=t.Za(a,c);if(d===f)this.sD(a,[b]);else if(t.isArray(d)){if(!(t.Ax(d,b)>=0)){t.Uh(d,Infinity,b);if(this.Yh(a)){this.fh(b)===m&&this.ng(b,a);Qe(this,"linkLabelKeys",ve,c,a,m,b)}}}else t.g(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
P.prototype.removeLabelKeyForLinkData=P.prototype.DG=function(a,b){s&&(Se(b)||t.wc(b,"number or string",P,"removeLabelKeyForLinkData:key"));if(a!==m){var c=this.Fh;if(c!==""){var d=t.Za(a,c);if(t.isArray(d)){var e=t.Ax(d,b);if(!(e<0)){t.Vh(d,e);if(this.Yh(a)){this.gh(b,a);Qe(this,"linkLabelKeys",we,c,a,b,m)}}}else d!==f&&t.g(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};t.a(P,"linkDataArray",P.prototype.qg);
t.defineProperty(P,{qg:"linkDataArray"},r("Mj"),function(a){var b=this.Mj;if(b!==a){t.eB(a,P,"linkDataArray");for(var c=t.Eb(a),d=0;d<c;d++){var e=t.rb(a,d);if(!(e instanceof Object)){t.g("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}t.Bn(e)}this.Mj=a;for(var g=new ta(Object),d=0;d<c;d++){e=t.rb(a,d);g.add(e)}this.Gp=g;Qe(this,"linkDataArray",ue,"linkDataArray",this,b,a);for(d=0;d<c;d++){e=t.rb(a,d);Te(this,e)}}});
P.prototype.containsLinkData=P.prototype.Yh=function(a){return a===m?o:this.Gp.contains(a)};P.prototype.addLinkData=P.prototype.TA=function(a){if(a!==m){if(t.jc(a)===f)t.Lb(a);else if(this.Yh(a))return;this.Gp.add(a);var b=t.Eb(this.Mj);t.Uh(this.Mj,b,a);Qe(this,"linkDataArray",ve,"linkDataArray",this,m,a,m,b);Te(this,a)}};
P.prototype.removeLinkData=P.prototype.EG=function(a){if(a!==m){this.Gp.remove(a);var b=this.Mj.indexOf(a);if(!(b<0)){t.Vh(this.Mj,b);Qe(this,"linkDataArray",we,"linkDataArray",this,a,m,b,m);b=this.zn(a);this.gh(b,a);b=this.An(a);this.gh(b,a);for(var c=this.Al(a),d=t.Eb(c),e=0;e<d;e++){b=t.rb(c,e);this.gh(b,a)}}}};function Te(a,b){var c=a.zn(b);a.fh(c)===m&&a.ng(c,b);c=a.An(b);a.fh(c)===m&&a.ng(c,b);for(var d=a.Al(b),e=t.Eb(d),g=0;g<e;g++){c=t.rb(d,g);a.fh(c)===m&&a.ng(c,b)}}
t.a(P,"copyLinkDataFunction",P.prototype.jF);t.defineProperty(P,{jF:"copyLinkDataFunction"},r("Cs"),function(a){var b=this.Cs;if(b!==a){a!==m&&t.e(a,"function",P,"copyLinkDataFunction");this.Cs=a;this.d("copyLinkDataFunction",b,a)}});
P.prototype.copyLinkData=P.prototype.pB=function(a){if(a===m)return m;var b=m,b=this.Cs;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)t.fb(b,c,t.Za(a,c))}if(b){t.Lb(b);this.Nj!==""&&t.fb(b,this.Nj,f);this.Pj!==""&&t.fb(b,this.Pj,f);this.Fh!==""&&t.fb(b,this.Fh,[])}return b};t.a(P,"nodeIsGroupProperty",P.prototype.Tn);t.defineProperty(P,{Tn:"nodeIsGroupProperty"},r("tt"),function(a){var b=this.tt;if(b!==a){Re(a,P,"nodeIsGroupProperty");this.tt=a;this.d("nodeIsGroupProperty",b,a)}});
P.prototype.isGroupForNodeData=P.prototype.ly=function(a){if(a===m)return o;var b=this.tt;return b===""?o:t.Za(a,b)?h:o};t.a(P,"nodeGroupKeyProperty",P.prototype.Sn);t.defineProperty(P,{Sn:"nodeGroupKeyProperty"},r("Sj"),function(a){var b=this.Sj;if(b!==a){Re(a,P,"nodeGroupKeyProperty");this.Sj=a;this.d("nodeGroupKeyProperty",b,a)}});
P.prototype.getGroupKeyForNodeData=P.prototype.zr=function(a){if(a!==m){var b=this.Sj;if(b!==""){b=t.Za(a,b);if(b!==f){if(Se(b))return b;s&&t.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setGroupKeyForNodeData=P.prototype.Ty=function(a,b){s&&b!==f&&!Se(b)&&t.wc(b,"number or string",P,"setGroupKeyForNodeData:key");if(a!==m){var c=this.Sj;if(c!=="")if(this.Mi(a)){var d=t.Za(a,c);if(d!==b){this.gh(d,a);t.fb(a,c,b);this.fh(b)===m&&this.ng(b,a);Qe(this,"nodeGroupKey",ue,c,a,d,b);typeof c==="string"&&this.mc(a,c)}}else t.fb(a,c,b)}};P.prototype.copyNodeData=P.prototype.on=function(a){if(a===m)return m;a=C.prototype.on.call(this,a);this.Sj!==""&&t.fb(a,this.Sj,f);return a};
P.prototype.setDataProperty=P.prototype.QG=function(a,b,c){if(s){t.e(a,"object",P,"setDataProperty:data");t.e(b,"string",P,"setDataProperty:propname");b===""&&t.g("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)}if(this.Mi(a))if(b===this.Il)t.g("GraphLinksModel.setDataProperty: property name must not be the key for the node data: "+b);else{if(b===this.Hl&&typeof c==="string"){this.rD(a,c);return}if(b===this.Sn&&(typeof c==="string"||typeof c===
"number")){this.Ty(a,c);return}b===this.Tn?t.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.Un&&t.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.Yh(a)){if(b===this.Hn&&(typeof c==="string"||typeof c==="number")){this.dv(a,c);return}if(b===this.Ln&&(typeof c==="string"||typeof c==="number")){this.ev(a,c);return}if(b===this.In&&typeof c==="string"){this.$r(a,c);return}if(b===this.Mn&&
typeof c==="string"){this.bs(a,c);return}if(b===this.Gn&&typeof c==="string"){this.PG(a,c);return}if(b===this.Jn&&c instanceof Array){this.sD(a,c);return}}var d=t.Za(a,b);if(d!==c){t.fb(a,b,c);Qe(this,"",ue,b,a,d,c)}};P.prototype.dz=function(){C.prototype.dz.call(this);for(var a=this.qg,b=t.Eb(a),c=0;c<b;c++)Te(this,t.rb(a,c))};
P.prototype.Yu=function(a){C.prototype.Yu.call(this,a);var a=this.$b(a),b=this.PB(a);if(b!==m){for(var c=new z(Object),b=b.f;b.next();){var d=b.value;if(this.Mi(d)){if(this.zr(d)===a){var e=this.Sj;Qe(this,"nodeGroupKey",ue,e,d,a,a);typeof e==="string"&&this.mc(d,e);c.add(d)}}else{if(this.zn(d)===a){e=this.Nj;Qe(this,"linkFromKey",ue,e,d,a,a);typeof e==="string"&&this.mc(d,e);c.add(d)}if(this.An(d)===a){e=this.Pj;Qe(this,"linkToKey",ue,e,d,a,a);typeof e==="string"&&this.mc(d,e);c.add(d)}for(var g=
this.Al(d),i=t.Eb(g),e=this.Fh,j=0;j<i;j++)if(t.rb(g,j)===a){Qe(this,"linkLabelKeys",ve,e,d,a,a);c.add(d)}}}for(c=c.f;c.next();)this.gh(a,c.value)}};P.prototype.Xu=function(a){C.prototype.Xu.call(this,a);var b=this.zr(a);this.fh(b)===m&&this.ng(b,a)};P.prototype.ez=function(a){C.prototype.ez.call(this,a);var b=this.zr(a);this.gh(b,a)};t.a(P,"linkCategoryProperty",P.prototype.Gn);
t.defineProperty(P,{Gn:"linkCategoryProperty"},r("Ep"),function(a){var b=this.Ep;if(b!==a){Re(a,P,"linkCategoryProperty");this.Ep=a;this.d("linkCategoryProperty",b,a)}});P.prototype.getCategoryForLinkData=P.prototype.WB=function(a){if(a===m)return"";var b=this.Ep;if(b==="")return"";b=t.Za(a,b);if(b===f)return"";if(typeof b==="string")return b;s&&t.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
P.prototype.setCategoryForLinkData=P.prototype.PG=function(a,b){t.e(b,"string",P,"setCategoryForLinkData:val");if(a!==m){var c=this.Ep;if(c==="")return"";if(this.Yh(a)){var d=t.Za(a,c);if(d!==b){t.fb(a,c,b);Qe(this,"linkCategory",ue,c,a,d,b);typeof c==="string"&&this.mc(a,c)}}else t.fb(a,c,b)}};
function Ue(a,b,c){t.Lb(this);a===f?a="":t.e(a,"string",Ue,"constructor:targetprop");b===f?b=a:t.e(b,"string",Ue,"constructor:sourceprop");c===f?c=m:c!==m&&t.e(c,"function",Ue,"constructor:conv");this.HA="";this.nf=m;this.Yt=a;this.Wt=this.dx=0;this.zA=m;this.Rt=b;this.Zv=c;this.Ew=Ve;this.Tv=m}t.J("Binding",Ue);var Ve;Ue.OneWay=Ve=t.l(Ue,"OneWay",1);var We;Ue.TwoWay=We=t.l(Ue,"TwoWay",2);
Ue.parseEnum=function(a,b){t.e(a,"function",Ue,"parseEnum:ctor");t.Va(b,a,Ue,"parseEnum:defval");return function(c){return t.Zx(a,c)||b}};var Ie;Ue.toString=Ie=function(a){var b=a;a instanceof Object&&(a.text?b=a.text:a.name?b=a.name:a.key!==f?b=a.key:a.id!==f&&(b=a.id));return b===f?"undefined":b===m?"null":b.toString()};Ue.prototype.toString=function(){return"Binding("+this.Ql+" "+this.$y+":"+this.Vy+")"};Ue.prototype.freeze=function(){this.Na=h;return this};
Ue.prototype.Ba=function(){this.Na=o;return this};t.a(Ue,"targetId",Ue.prototype.Ql);t.defineProperty(Ue,{Ql:"targetId"},r("HA"),function(a){t.u(this);t.e(a,"string",Ue,"targetId");this.HA=a});t.a(Ue,"targetProperty",Ue.prototype.$y);t.defineProperty(Ue,{$y:"targetProperty"},r("Yt"),function(a){t.u(this);t.e(a,"string",Ue,"targetProperty");this.Yt=a});t.a(Ue,"sourceName",Ue.prototype.co);t.defineProperty(Ue,{co:"sourceName"},r("zA"),function(a){t.u(this);t.e(a,"string",Ue,"sourceName");this.zA=a});
t.a(Ue,"sourceProperty",Ue.prototype.Vy);t.defineProperty(Ue,{Vy:"sourceProperty"},r("Rt"),function(a){t.u(this);t.e(a,"string",Ue,"sourceProperty");this.Rt=a});t.a(Ue,"converter",Ue.prototype.mB);t.defineProperty(Ue,{mB:"converter"},r("Zv"),function(a){t.u(this);a!==m&&t.e(a,"function",Ue,"converter");this.Zv=a});t.a(Ue,"backConverter",Ue.prototype.dB);t.defineProperty(Ue,{dB:"backConverter"},r("Tv"),function(a){t.u(this);a!==m&&t.e(a,"function",Ue,"backConverter");this.Tv=a});t.a(Ue,"mode",Ue.prototype.mode);
t.defineProperty(Ue,{mode:"mode"},r("Ew"),function(a){t.u(this);t.Va(a,Ue,Ue,"mode");this.Ew=a});Ue.prototype.makeTwoWay=Ue.prototype.AJ=function(a){a===f&&(a=m);this.mode=We;this.dB=a;return this};Ue.prototype.ofObject=Ue.prototype.Iy=function(a){a===f&&(a="");s&&t.e(a,"string",Ue,"ofObject:srcname");this.co=a;return this};
Ue.prototype.updateTarget=Ue.prototype.QD=function(a,b,c){var d=this.Rt;if(!(c&&d!==c)){var c=this.Yt,e=this.Zv;if(!(e===m&&c==="")){s&&(typeof c==="string"&&typeof a.setAttribute!=="function"&&!t.iy(a,c))&&t.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;d!==""&&(g=t.Za(b,d));if(g!==f)if(e===m)c!==""&&t.fb(a,c,g);else try{if(c!==""){var i=e(g,a);t.fb(a,c,i)}else e(g,a)}catch(j){s&&t.trace("Binding error: "+j.toString())}}}};
Ue.prototype.updateSource=Ue.prototype.PD=function(a,b,c){if(this.Ew===We){var d=this.Yt;if(!(c&&d!==c)){var c=this.Rt,e=this.Tv;if(!(e===m&&c==="")){var g=a;d!==""&&(g=t.Za(a,d));if(g!==f)if(e===m)t.fb(b,c,g);else try{if(c!==""){var i=e(g,b);t.fb(b,c,i)}else e(g,b)}catch(j){s&&t.trace("Binding error: "+j.toString())}}}}};function Xe(){this.bE=(new z(se)).freeze();this.vb="";this.Uz=o}t.J("Transaction",Xe);
Xe.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.$g.count.toString()+(this.Cn?"":", incomplete");if(a!==f&&a>0)for(var c=this.$g.count,d=0;d<c;d++){var e=this.$g.V(d);e!==m&&(b=b+("\n  "+e.toString(a-1)))}return b};Xe.prototype.clear=Xe.prototype.clear=function(){var a=this.$g;a.Ba();for(var b=a.count-1;b>=0;b--){var c=a.V(b);c!==m&&c.clear()}a.clear();a.freeze()};Xe.prototype.canUndo=Xe.prototype.hk=r("Cn");
Xe.prototype.undo=Xe.prototype.yk=function(){if(this.hk())for(var a=this.$g.count-1;a>=0;a--){var b=this.$g.V(a);b!==m&&b.yk()}};Xe.prototype.canRedo=Xe.prototype.gk=r("Cn");Xe.prototype.redo=Xe.prototype.Xn=function(){if(this.gk())for(var a=this.$g.count,b=0;b<a;b++){var c=this.$g.V(b);c!==m&&c.Xn()}};t.m(Xe,{$g:"changes"},r("bE"));t.a(Xe,"name",Xe.prototype.name);t.defineProperty(Xe,{name:"name"},r("vb"),ba("vb"));t.a(Xe,"isComplete",Xe.prototype.Cn);
t.defineProperty(Xe,{Cn:"isComplete"},r("Uz"),ba("Uz"));function Je(){this.Fw=new ta(C);this.Bh=o;this.iE=(new z(Xe)).freeze();this.Dj=-1;this.$z=999;this.Ch=o;this.Hs=m;this.ck=0;this.Wv=o;if(s)this.Wv=h;this.dg=(new z("string")).freeze();this.Em=new z("number");this.lw=h}t.J("UndoManager",Je);
Je.prototype.toString=function(a){for(var b="UndoManager "+this.Wi+"<"+this.history.count+"<="+this.yy,b=b+"[",c=this.MC.count,d=0;d<c;d++){d>0&&(b=b+" ");b=b+this.MC.V(d)}b=b+"]";if(a!==f&&a>0){c=this.history.count;for(d=0;d<c;d++)b=b+("\n "+this.history.V(d).toString(a-1))}return b};
Je.prototype.clear=Je.prototype.clear=function(){var a=this.history;a.Ba();for(var b=a.count-1;b>=0;b--){var c=a.V(b);c!==m&&c.clear()}a.clear();this.Dj=-1;a.freeze();this.Ch=o;this.Hs=m;this.ck=0;this.dg.Ba();this.dg.clear();this.dg.freeze();this.Em.clear()};Je.prototype.addModel=Je.prototype.EE=function(a){this.Fw.add(a)};Je.prototype.removeModel=Je.prototype.FG=function(a){this.Fw.remove(a)};
Je.prototype.startTransaction=Je.prototype.Kb=function(a){a===m&&(a="");if(this.eb)return o;if(this.lw===h){this.lw=o;this.ck++;this.wd("StartingFirstTransaction",a,this.tl);this.ck>0&&this.ck--}if(this.isEnabled){this.dg.Ba();this.dg.add(a);this.dg.freeze();this.tl===m?this.Em.add(0):this.Em.add(this.tl.$g.count)}this.ck++;var b=this.xk===1;b&&this.wd("StartedTransaction",a);return b};Je.prototype.commitTransaction=Je.prototype.Pd=function(a){return Ye(this,h,a)};
Je.prototype.rollbackTransaction=Je.prototype.Wr=function(){return Ye(this,o,"")};
function Ye(a,b,c){if(a.eb)return o;a.Gx&&a.xk<1&&t.trace("Ending transaction without having started a transaction: "+c);var d=a.xk===1;d&&(b&&a.isEnabled)&&a.wd("CommittingTransaction",c,a.tl);var e=0;if(a.xk>0){a.ck--;if(a.isEnabled){var g=a.dg.count;if(g>0){c===""&&(c=a.dg.V(0));a.dg.Ba();a.dg.We(g-1);a.dg.freeze()}g=a.Em.count;if(g>0){e=a.Em.V(g-1);a.Em.We(g-1)}}}g=a.tl;if(d){if(b){if(a.isEnabled&&g!==m){b=g;b.Cn=h;b.name=c;d=a.history;d.Ba();for(e=d.count-1;e>a.Wi;e--){g=d.V(e);g!==m&&g.clear();
d.We(e)}e=a.yy;e===0&&(e=1);if(e>0&&d.count>=e){g=d.V(0);g!==m&&g.clear();d.We(0);a.Dj--}d.add(b);a.Dj++;d.freeze();g=b}a.wd("CommittedTransaction",c,g)}else{a.Ch=h;try{if(a.isEnabled&&g!==m){g.Cn=h;g.yk()}}finally{a.wd("RolledBackTransaction",c,g);a.Ch=o}g!==m&&g.clear()}a.Hs=m;return h}if(a.isEnabled&&!b&&g!==m){a=e;c=g.$g;c.Ba();for(b=c.count-1;b>=a;b--){d=c.V(b);d!==m&&d.yk();c.We(b)}c.freeze()}return o}
Je.prototype.canUndo=Je.prototype.hk=function(){if(!this.isEnabled||this.xk>0||this.eb)return o;var a=this.JD;return a!==m&&a.hk()?h:o};Je.prototype.undo=Je.prototype.yk=function(){if(this.hk()){var a=this.JD;try{this.wd("StartingUndo","Undo",a);this.Ch=h;this.Dj--;a.yk()}catch(b){t.trace("undo error: "+b.toString())}finally{this.Ch=o;this.wd("FinishedUndo","Undo",a)}}};
Je.prototype.canRedo=Je.prototype.gk=function(){if(!this.isEnabled||this.xk>0||this.eb)return o;var a=this.ID;return a!==m&&a.gk()?h:o};Je.prototype.redo=Je.prototype.Xn=function(){if(this.gk()){var a=this.ID;try{this.wd("StartingRedo","Redo",a);this.Ch=h;this.Dj++;a.Xn()}catch(b){t.trace("redo error: "+b.toString())}finally{this.Ch=o;this.wd("FinishedRedo","Redo",a)}}};
Je.prototype.wd=function(a,b,c){c===f&&(c=m);var d=new se;d.Rc=te;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.oG;a.next();){b=a.value;d.L=b;b.lu(d)}};Je.prototype.handleChanged=Je.prototype.dC=function(a){if(this.isEnabled&&!this.eb&&!this.skipsEvent(a)){var b=this.tl;if(b===m)this.Hs=b=new Xe;var c=a.copy(),b=b.$g;b.Ba();b.add(c);b.freeze();if(this.Gx&&this.xk<=0&&!this.lw){a=a.b;a!==m&&a.Hg===o||t.trace("Change not within a transaction: "+c.toString())}}};
Je.prototype.skipsEvent=Je.prototype.oK=function(a){if(a===m||a.Rc.value<0)return h;a=a.object;if(a instanceof Q){a=a.xa;if(a!==m&&a.ed)return h}else if(a instanceof Ze&&a.ed)return h;return o};t.m(Je,{oG:"models"},function(){return this.Fw.f});t.a(Je,"isEnabled",Je.prototype.isEnabled);t.defineProperty(Je,{isEnabled:"isEnabled"},r("Bh"),ba("Bh"));t.m(Je,{JD:"transactionToUndo"},function(){return this.Wi>=0&&this.Wi<=this.history.count-1?this.history.V(this.Wi):m});
t.m(Je,{ID:"transactionToRedo"},function(){return this.Wi<this.history.count-1?this.history.V(this.Wi+1):m});t.m(Je,{eb:"isUndoingRedoing"},r("Ch"));t.m(Je,{history:"history"},r("iE"));t.a(Je,"maxHistoryLength",Je.prototype.yy);t.defineProperty(Je,{yy:"maxHistoryLength"},r("$z"),ba("$z"));t.m(Je,{Wi:"historyIndex"},r("Dj"));t.m(Je,{tl:"currentTransaction"},r("Hs"));t.m(Je,{xk:"transactionLevel"},r("ck"));t.m(Je,{XF:"isInTransaction"},function(){return this.ck>0});
t.defineProperty(Je,{Gx:"checksTransactionLevel"},r("Wv"),ba("Wv"));t.m(Je,{MC:"nestedTransactionNames"},r("dg"));function va(){this.O=m;this.Ez=this.zz=o;this.Rj=this.sz=m}t.J("CommandHandler",va);var $e=m,lf="";va.prototype.toString=ca("CommandHandler");t.m(va,{b:"diagram"},r("O"));va.prototype.Ef=function(a){s&&a!==m&&t.c(a,A,va,"setDiagram");this.O=a};
va.prototype.doKeyDown=va.prototype.Sx=function(){var a=this.b;if(a!==m){var b=a.H,c=b.jk,d=b.shift,e=b.alt,g=b.key;if(c&&(g==="C"||g==="Insert"))this.canCopySelection()&&this.copySelection();else if(c&&g==="X"||d&&g==="Del")this.canCutSelection()&&this.cutSelection();else if(g==="Del")this.canDeleteSelection()&&this.deleteSelection();else if(c&&g==="V"||d&&g==="Insert")this.canPasteSelection()&&this.pasteSelection();else if(c&&g==="Y"||e&&d&&g==="Backspace")this.canRedo()&&this.redo();else if(c&&
g==="Z"||e&&g==="Backspace")this.canUndo()&&this.undo();else if(c&&g==="A")this.canSelectAll()&&this.selectAll();else if(c&&g==="P")this.canPrint()&&this.print();else if(g==="Esc")this.canStopCommand()&&this.stopCommand();else if(g==="Up")a.Ke&&(c?a.scroll("pixel","up"):a.scroll("line","up"));else if(g==="Down")a.Ke&&(c?a.scroll("pixel","down"):a.scroll("line","down"));else if(g==="Left")a.Je&&(c?a.scroll("pixel","left"):a.scroll("line","left"));else if(g==="Right")a.Je&&(c?a.scroll("pixel","right"):
a.scroll("line","right"));else if(g==="PageUp")a.Je?a.scroll("page","left"):!c&&a.Ke&&a.scroll("page","up");else if(g==="PageDown")a.Je?a.scroll("page","right"):!c&&a.Ke&&a.scroll("page","down");else if(g==="Home"){b=a.gc;if(c&&a.Ke)a.position=new D(a.position.x,b.y);else if(!c&&a.Je)a.position=new D(b.x,a.position.y)}else if(g==="End"){b=a.gc;d=a.ob;if(c&&a.Ke)a.position=new D(d.x,b.bottom-d.height);else if(!c&&a.Je)a.position=new D(b.right-d.width,d.y)}else g==="Subtract"?this.canDecreaseZoom()&&
this.decreaseZoom():g==="Add"?this.canIncreaseZoom()&&this.increaseZoom():c&&g==="0"?this.canResetZoom()&&this.resetZoom():c&&!d&&g==="G"?this.canGroupSelection()&&this.groupSelection():c&&d&&g==="G"?this.canUngroupSelection()&&this.ungroupSelection():b.event&&b.event.which===113?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};va.prototype.doKeyUp=va.prototype.Tx=function(){var a=this.b;if(a!==m)a.H.bubbles=h};
va.prototype.stopCommand=va.prototype.vK=function(){var a=this.b;if(a!==m){var b=a.va;b instanceof mf&&a.Ld&&a.Ix();b!==m&&b.doCancel()}};va.prototype.canStopCommand=va.prototype.UH=ca(h);va.prototype.selectAll=va.prototype.iK=function(){var a=this.b;if(a!==m)try{a.uc="wait";a.na("ChangingSelection");for(var b=a.cj;b.next();)b.value.Ha=h;for(b=a.sk;b.next();)b.value.Ha=h;for(b=a.links;b.next();)b.value.Ha=h}finally{a.na("ChangedSelection");a.uc=""}};
va.prototype.canSelectAll=va.prototype.TH=function(){var a=this.b;return a!==m&&a.Ld};va.prototype.deleteSelection=va.prototype.tI=function(){var a=this.b;if(a!==m&&!a.na("SelectionDeleting",a.selection))try{a.uc="wait";a.Kb("Delete");a.na("ChangingSelection");for(var b=new ta(T),c=a.selection.f;c.next();)nf(b,c.value,h,this.EB,function(a){return a.canDelete()});this.deleteParts(b,h);a.na("SelectionDeleted",b)}finally{a.na("ChangedSelection");a.Pd("Delete");a.uc=""}};
va.prototype.canDeleteSelection=va.prototype.DH=function(){var a=this.b;return a===m||(a.Pa||a.Rd)||!a.ek||a.selection.count===0?o:h};va.prototype.deleteParts=va.prototype.sI=function(a,b){for(var c=a.f;c.next();){var d=c.value;if(!b||d.canDelete()){var e=d.b;e!==m&&e.remove(d)}}};
function nf(a,b,c,d,e){if(!a.contains(b)){e===f&&(e=m);if((e===m||e(b))&&!(b instanceof of)){a.add(b);if(b instanceof U){if(c&&b instanceof V)for(var g=b.lc;g.next();){var i=g.value;nf(a,i,c,d,e)}for(i=b.le;i.next();){g=i.value;if(!a.contains(g)){var j=g.ia,k=g.ma;j!==m&&a.contains(j)&&k!==m&&a.contains(k)?nf(a,g,c,d,e):(j===m||k===m)&&nf(a,g,c,d,e)}}if(d){i=h;g=b.b;if(g!==m)i=g.xf;for(b=i?b.un():b.tn();b.next();){i=b.value;nf(a,i,c,d,e)}}}else if(b instanceof W)for(i=b.hi;i.next();)nf(a,i.value,
c,d,e)}}}va.prototype.copyParts=va.prototype.kI=function(a,b,c){for(var d=new ra(T,T),a=a.f;a.next();)pf(this,a.value,b,d,c);for(b=d.f;b.next();)b.value.mc();return d};
function pf(a,b,c,d,e){if(b===m||e&&!b.canCopy())return m;if(d.contains(b)){a=d.da(b);return a instanceof T?a:m}var g=m,i=b.data;if(i!==m&&c!==m){var j=c.L;if(b instanceof W){if(j instanceof P){i=j.pB(i);if(i instanceof Object){j.TA(i);g=c.pg(i)}}}else{i=j.on(i);if(i instanceof Object){j.gu(i);g=c.pg(i)}}}else{qf(b);g=b.copy();c!==m&&g instanceof T&&c.add(g)}if(!(g instanceof T))return m;g.Ha=o;d.add(b,g);if(b instanceof U){for(j=b.le;j.next();){i=j.value;if(i.ia===b){var k=d.da(i);if(k!==m)k.ia=
g}if(i.ma===b){k=d.da(i);if(k!==m)k.ma=g}}if(b instanceof V&&g instanceof V)for(b=b.lc;b.next();){j=pf(a,b.value,c,d,e);if(!(j instanceof W)&&j!==m)j.Wa=g}}else if(b instanceof W){j=b.ia;if(j!==m){j=d.da(j);if(j!==m)g.ia=j}j=b.ma;if(j!==m){j=d.da(j);if(j!==m)g.ma=j}for(b=b.hi;b.next();){j=pf(a,b.value,c,d,e);if(j!==m)j.ke=g}}return g}
va.prototype.copySelection=va.prototype.mI=function(){var a=this.b;if(a!==m){for(var b=new ta(T),a=a.selection.f;a.next();)nf(b,a.value,h,this.oB,function(a){return a.canCopy()});this.copyToClipboard(b)}};va.prototype.canCopySelection=va.prototype.zH=function(){var a=this.b;return a===m||(!a.Sh||!a.iu)||a.selection.count===0?o:h};va.prototype.cutSelection=va.prototype.pI=function(){this.copySelection();this.deleteSelection()};
va.prototype.canCutSelection=va.prototype.AH=function(){var a=this.b;return a===m||(a.Pa||a.Rd)||(!a.Sh||!a.ek||!a.iu)||a.selection.count===0?o:h};va.prototype.copyToClipboard=va.prototype.nI=function(a){var b=this.b;if(b!==m){var c=m;if(a===m){$e=m;lf=""}else{a=this.copyParts(a,m,h);c=new z(T);c.kg(a);$e=c;lf=b.L.ul}b.na("ClipboardChanged",c)}};
va.prototype.pasteFromClipboard=va.prototype.RJ=function(){var a=$e;if(a===m)return t.Kf;var b=this.b;if(b===m||lf!==b.L.ul)return t.Kf;b=this.copyParts(a,b,o);a=new ta(T);for(b=b.f;b.next();){var c=b.value;if(!c.location.aa())c.location=b.key.location.copy();if(!c.position.aa())c.position=b.key.position.copy();a.add(c)}return a};
va.prototype.pasteSelection=va.prototype.SJ=function(a){var b=this.b;if(b!==m)try{b.uc="wait";b.Kb("Paste");b.na("ChangingSelection");var c=this.pasteFromClipboard();c.count>0&&rf(b);for(var d=c.f;d.next();)d.value.Ha=h;b.na("ChangedSelection");if(a instanceof D){var e=this.computeBounds(b.selection);if(e){var g=b.Rb.fe,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new D(a.x-e.Da,a.y-e.Ea),o)}}b.na("ClipboardPasted",c)}finally{b.Pd("Paste");b.uc=""}};
va.prototype.canPasteSelection=va.prototype.MH=function(){var a=this.b;return a===m||(a.Pa||a.Rd)||(!a.en||!a.iu)||$e===m||lf!==a.L.ul?o:h};va.prototype.computeBounds=va.prototype.de=function(a){for(var b=m,a=a.f;a.next();){var c=a.value;if(!(c instanceof W)){c.ci();b===m?b=c.ta:b.zk(c.ta)}}return b};va.prototype.undo=va.prototype.yk=function(){var a=this.b;a!==m&&a.ha.yk()};va.prototype.canUndo=va.prototype.hk=function(){var a=this.b;return a===m||a.Pa||a.Rd?o:a.xx&&a.ha.hk()};
va.prototype.redo=va.prototype.Xn=function(){var a=this.b;a!==m&&a.ha.Xn()};va.prototype.canRedo=va.prototype.gk=function(){var a=this.b;return a===m||a.Pa||a.Rd?o:a.xx&&a.ha.gk()};va.prototype.decreaseZoom=va.prototype.lF=function(a){a===f&&(a=1/1.05);var b=this.b;if(b!==m){a=b.scale*a;if(!(a<b.bj||a>b.aj)){b.scale=a;sf(b)}}};va.prototype.canDecreaseZoom=va.prototype.BH=function(a){a===f&&(a=1/1.05);var b=this.b;if(b===m)return o;a=b.scale*a;return a<b.bj||a>b.aj?o:b.fr};
va.prototype.increaseZoom=va.prototype.RF=function(a){a===f&&(a=1.05);var b=this.b;if(b!==m){a=b.scale*a;if(!(a<b.bj||a>b.aj)){b.scale=a;sf(b)}}};va.prototype.canIncreaseZoom=va.prototype.KH=function(a){a===f&&(a=1.05);var b=this.b;if(b===m)return o;a=b.scale*a;return a<b.bj||a>b.aj?o:b.fr};va.prototype.resetZoom=va.prototype.dK=function(a){a===f&&(a=1);var b=this.b;if(b!==m&&!(a<b.bj||a>b.aj)){b.scale=a;sf(b)}};
va.prototype.canResetZoom=va.prototype.PH=function(a){a===f&&(a=1);var b=this.b;return b===m||a<b.bj||a>b.aj?o:b.fr};va.prototype.collapseTree=va.prototype.kr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Kb("Collapse Tree");var c=new z(U);if(a instanceof U&&a.Sd){a.kr();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof U&&d.Sd){d.kr();c.add(d)}}b.na("TreeCollapsed",c);b.Pd("Collapse Tree")};
va.prototype.canCollapseTree=va.prototype.xH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Pa)return o;if(a instanceof U){if(!a.Sd)return o;if(b.xf){if(a.un().count>0)return h}else if(a.tn().count>0)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&c.Sd)if(b.xf){if(c.un().count>0)return h}else if(c.tn().count>0)return h}return o};
va.prototype.expandTree=va.prototype.sr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Kb("Expand Tree");var c=new z(U);if(a instanceof U&&!a.Sd){a.sr();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof U&&!d.Sd){d.sr();c.add(d)}}b.na("TreeExpanded",c);b.Pd("Expand Tree")};
va.prototype.canExpandTree=va.prototype.HH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Pa)return o;if(a instanceof U){if(a.Sd)return o;if(b.xf){if(a.un().count>0)return h}else if(a.tn().count>0)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&!c.Sd)if(b.xf){if(c.un().count>0)return h}else if(c.tn().count>0)return h}return o};
va.prototype.groupSelection=va.prototype.aJ=function(){var a=this.b;if(a!==m){var b=a.L;if(b!==m&&b instanceof P){var c=this.yx;if(c!==m)try{a.uc="wait";a.Kb("Group");a.na("ChangingSelection");for(var d=new z(T),e=a.selection.f;e.next();){var g=e.value;(g instanceof U||g.constructor===T)&&g.canGroup()&&d.add(g)}for(var i=new z(T),j=d.f;j.next();){for(var k=j.value,g=o,e=d.f;e.next();)if(k.El(e.value)){g=h;break}g||i.add(k)}if(i.count>0){e=i.f;e.next();var l=e.value.Wa;if(l!==m)for(;l!==m;){e=i.f;
e.next();for(d=o;e.next();){k=e.value;if(!k.El(l)){d=h;break}}if(d)l=l.Wa;else break}var n=m;if(c instanceof V){qf(c);n=c.copy();n instanceof V&&a.add(n)}else if(b.ly(c)){var q=b.on(c);if(q instanceof Object){b.gu(q);n=a.pg(q)}}if(n instanceof V){if(l!==m&&this.isValidMember(l,n))n.Wa=l;for(e=i.f;e.next();){k=e.value;if(this.isValidMember(n,k))k.Wa=n}a.select(n)}}a.na("ChangedSelection");a.na("SelectionGrouped",n)}finally{a.Pd("Group");a.uc=""}}}};
va.prototype.canGroupSelection=va.prototype.JH=function(){var a=this.b;if(a===m||a.Pa||a.Rd||!a.en||!a.dn)return o;var b=a.L;if(b===m||!(b instanceof P)||this.yx===m)return o;for(a=a.selection.f;a.next();){b=a.value;if((b instanceof U||b.constructor===T)&&b.canGroup())return h}return o};
va.prototype.findUnnestedNodes=va.prototype.ay=function(a){for(var b=[],a=a.f;a.next();){var c=a.value;c instanceof W||b.push(c)}for(var a=new ta(T),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.El(b[i])){g=o;break}g&&a.add(e)}return a};
va.prototype.isValidMember=va.prototype.ry=function(a,b){if(b===m||a===b||b instanceof W)return o;if(a!==m){if(a===b||a.El(b))return o;var c=a.Lr;if(c!==m&&!c(a,b)||a.data===m&&b.data!==m||a.data!==m&&b.data===m)return o}c=this.Lr;return c!==m?c(a,b):h};
va.prototype.ungroupSelection=va.prototype.AK=function(a){a===f&&(a=m);var b=this.b;if(b!==m){var c=b.L;if(c!==m&&c instanceof P)try{b.uc="wait";b.Kb("Ungroup");b.na("ChangingSelection");var d=new z(V);if(a instanceof V)d.add(a);else for(var e=b.selection.f;e.next();){var g=e.value;g instanceof V&&g.canUngroup()&&d.add(g)}if(d.count>0){b.Ix();for(e=d.f;e.next();){var i=e.value,j=i.data,k=i.Wa,l=k!==m&&k.data!==m?c.$b(k.data):f,n=new z(T);n.kg(i.lc);for(var q=n.f;q.next();){var p=q.value;if(!(p instanceof
W)){var u=p.data;u!==m?c.Ty(u,l):p.Wa=k;p.Ha=h}}j!==m?c.$C(j):b.remove(i)}}b.na("ChangedSelection");b.na("SelectionUngrouped",d)}finally{b.Pd("Ungroup");b.uc=""}}};va.prototype.canUngroupSelection=va.prototype.WH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Pa||b.Rd||!b.ek||!b.ln)return o;var c=b.L;if(c===m||!(c instanceof P))return o;if(a instanceof V){if(a.canUngroup())return h}else for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&b.canUngroup())return h}return o};
va.prototype.addTopLevelParts=va.prototype.sH=function(a,b){for(var c=h,d=this.ay(a).f;d.next();){var e=d.value;if(e.Wa!==m)!b||this.ry(m,e)?e.Wa=m:c=o}return c};va.prototype.collapseSubGraph=va.prototype.jr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Kb("Collapse SubGraph");var c=new z(V);if(a instanceof V&&a.je){a.jr();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof V&&d.je){d.jr();c.add(d)}}b.na("SubGraphCollapsed",c);b.Pd("Collapse SubGraph")};
va.prototype.canCollapseSubGraph=va.prototype.wH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Pa)return o;if(a instanceof V)return!a.je?o:h;for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&b.je)return h}return o};
va.prototype.expandSubGraph=va.prototype.rr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Kb("Expand SubGraph");var c=new z(V);if(a instanceof V&&!a.je){a.rr();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof V&&!d.je){d.rr();c.add(d)}}b.na("SubGraphExpanded",c);b.Pd("Expand SubGraph")};
va.prototype.canExpandSubGraph=va.prototype.GH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Pa)return o;if(a instanceof V)return a.je?o:h;for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&!b.je)return h}return o};
va.prototype.editTextBlock=va.prototype.DI=function(a){a===f&&(a=m);var b=this.b;if(b!==m&&b.Rb!==m){var c=b.Rb.iv;if(c!==m){if(a===m){for(var a=b.selection.f,d=m;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===m)return;a=d.RB(function(a){return a instanceof ua&&a.yu})}if(a!==m&&a instanceof ua){c.If=a;b.va=c}}}};
va.prototype.canEditTextBlock=va.prototype.FH=function(a){a===f&&(a=m);var b=this.b;if(b===m||(b.Pa||b.Rd)||!b.kn||b.Rb===m||b.Rb.iv===m)return o;if(a instanceof ua){a=a.ba;if(a!==m&&a.canEdit())return h}else for(b=b.selection.f;b.next();){a=b.value;if(a.canEdit()){a=a.RB(function(a){return a instanceof ua&&a.yu});if(a!==m)return h}}return o};va.prototype.print=va.prototype.print=aa();va.prototype.canPrint=va.prototype.bF=function(){var a=this.b;return a!==m&&a.fn};t.a(va,"copiesTree",va.prototype.oB);
t.defineProperty(va,{oB:"copiesTree"},r("zz"),ba("zz"));t.a(va,"deletesTree",va.prototype.EB);t.defineProperty(va,{EB:"deletesTree"},r("Ez"),ba("Ez"));t.a(va,"archetypeGroupData",va.prototype.yx);
t.defineProperty(va,{yx:"archetypeGroupData"},r("sz"),function(a){a!==m&&t.c(a,Object,va,"archetypeGroupData");var b=this.b;if(b!==m){b=b.L;b!==m&&!(a instanceof V)&&!b.ly(a)&&t.g("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)}this.sz=a});t.a(va,"memberValidation",va.prototype.Lr);t.defineProperty(va,{Lr:"memberValidation"},r("Rj"),function(a){a!==m&&t.e(a,"function",va,"memberValidation");this.Rj=a});
function tf(){t.Lb(this);this.O=m;this.vb="";this.Bh=h;this.Sz=o;this.MA=m;this.du=-1}t.J("Tool",tf);tf.prototype.Ef=function(a){s&&a!==m&&t.c(a,A,tf,"setDiagram");this.O=a};tf.prototype.toString=function(){return this.name!==""?this.name+" Tool":t.Vi(Object.getPrototypeOf(this))};tf.prototype.updateAdornments=tf.prototype.ki=aa();tf.prototype.canStart=tf.prototype.qf=r("isEnabled");tf.prototype.doStart=tf.prototype.Ux=aa();tf.prototype.doActivate=tf.prototype.bi=function(){this.S=h};
tf.prototype.doDeactivate=tf.prototype.lk=function(){this.S=o};tf.prototype.doStop=tf.prototype.Si=aa();tf.prototype.doCancel=tf.prototype.Ri=function(){this.stopTool()};tf.prototype.stopTool=tf.prototype.wK=function(){var a=this.b;if(a!==m&&a.va===this){a.va=m;a.uc=""}};tf.prototype.doMouseDown=tf.prototype.xu=function(){!this.S&&this.canStart()&&this.doActivate()};tf.prototype.doMouseMove=tf.prototype.eh=aa();tf.prototype.doMouseUp=tf.prototype.Oe=function(){this.stopTool()};
tf.prototype.doMouseWheel=tf.prototype.tF=aa();tf.prototype.doKeyDown=tf.prototype.Sx=function(){var a=this.b;a!==m&&a.H.key==="Esc"&&this.doCancel()};tf.prototype.doKeyUp=tf.prototype.Tx=aa();tf.prototype.startTransaction=tf.prototype.Kb=function(a){this.te=m;var b=this.b;return b===m?o:b.Kb(a)};tf.prototype.stopTransaction=tf.prototype.gj=function(){var a=this.b;return a===m?o:this.te===m?a.Wr():a.Pd(this.te)};
tf.prototype.standardMouseSelect=tf.prototype.UG=function(){var a=this.b;if(a!==m&&a.Ld){var b=a.H,c=a.tr(b.F,h);if(c!==m)if(b.jk){a.na("ChangingSelection");c.Ha=!c.Ha;a.na("ChangedSelection")}else if(b.shift){if(!c.Ha){a.na("ChangingSelection");c.Ha=h;a.na("ChangedSelection")}}else c.Ha||a.select(c);else b.left&&(!b.jk&&!b.shift)&&a.Ix()}};
tf.prototype.standardMouseClick=tf.prototype.rK=function(a,b){a===f&&(a=m);b===f&&(b=function(a){return!a.xa.ed});var c=this.b;if(c!==m){var d=c.H,e=c.Sc(d.F,a,b);d.gd=e;uf(e,d,c)}};
function uf(a,b,c){var d=0;b.left?d=b.Le===1?1:b.Le===2?2:1:b.right&&b.Le===1&&(d=3);var e="";if(a!==m){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}d!==0&&c.na(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}d!==0&&c.na(e)}if(a!==m)for(;a!==m;){e=m;switch(d){case 1:e=a.click;break;case 2:e=a.wl?a.wl:a.click;break;case 3:e=a.lr}if(e!==m){e(b,
a);if(b.zd)break}a=a.Y}else{e=m;switch(d){case 1:e=c.click;break;case 2:e=c.wl?c.wl:c.click;break;case 3:e=c.lr}e!==m&&e(b)}}
tf.prototype.standardMouseOver=tf.prototype.sK=function(){var a=this.b;if(a!==m){var b=a.H,c=a.Sc(b.F,m,m);b.gd=c;var d=a.gb;a.gb=h;var e=o;if(c!==a.em){var g=a.em;a.Uw=g;a.em=c;for(this.doCurrentObjectChanged(g,c);g!==m;){var i=g.Cy;if(i!==m){if(c===g)break;if(c!==m&&c.gi(g))break;i(b,g,c);e=h;if(b.zd)break}g=g.Y}for(g=a.Uw;c!==m;){i=c.By;if(i!==m){if(g===c)break;if(g!==m&&g.gi(c))break;i(b,c,g);e=h;if(b.zd)break}c=c.Y}c=a.em}if(c!==m){g=c;for(i="";g!==m;){i=g.cursor;if(i!=="")break;g=g.Y}a.uc=i;
for(g=c;g!==m;){i=g.Qr;if(i!==m){i(b,g);e=h;if(b.zd)break}g=g.Y}}else{a.uc="";i=a.Qr;if(i!==m){i(b);e=h}}e&&a.update();a.gb=d}};tf.prototype.doCurrentObjectChanged=tf.prototype.sF=aa();
tf.prototype.standardMouseWheel=tf.prototype.tK=function(){var a=this.b;if(a!==m){var b=a.H,c=b.Qi;if(c!==0){var d=a.Rb.Gl;if(a.fr&&(d===vf&&!b.shift||d===wf&&b.jk)){d=a.Ck;a.Ck=b.xc;var e=a.Od;e!==m?c>0?e.RF():e.lF():a.scale=c>0?a.scale*1.05:a.scale/1.05;a.Ck=d;b.bubbles=o}else if(d===vf&&b.shift||d===wf&&!b.jk){d=a.position.copy();!b.shift&&a.Ke?c>0?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.Je&&(c>0?a.scroll("line","left",3):a.scroll("line","right",3));if(!a.position.z(d))b.bubbles=
o}}}};tf.prototype.standardWaitAfter=tf.prototype.uK=function(a){t.e(a,"number",tf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.du=window.setTimeout(function(){b.doWaitAfter()},a)};tf.prototype.cancelWaitAfter=tf.prototype.XH=function(){this.du!==-1&&window.clearTimeout(this.du);this.du=-1};tf.prototype.doWaitAfter=tf.prototype.wF=aa();
tf.prototype.findToolHandleAt=tf.prototype.QI=function(a,b){var c=this.b;if(c===m)return m;c=c.Sc(a,m,function(a){a=a.ba;return a===m?o:a.Kd!==m});if(c===m)return m;var d=c.ba;return d===m||d.od!==b?m:c};tf.prototype.isBeyondDragSize=tf.prototype.mJ=function(){var a=this.b;if(a===m)return o;var b=a.ic.xc,a=a.H.xc,c=2;t.bx&&(c=c+4);return Math.abs(a.x-b.x)>c||Math.abs(a.y-b.y)>c};t.m(tf,{b:"diagram"},r("O"));t.a(tf,"name",tf.prototype.name);t.defineProperty(tf,{name:"name"},r("vb"),ba("vb"));
t.a(tf,"isEnabled",tf.prototype.isEnabled);t.defineProperty(tf,{isEnabled:"isEnabled"},r("Bh"),ba("Bh"));t.a(tf,"isActive",tf.prototype.S);t.defineProperty(tf,{S:"isActive"},r("Sz"),ba("Sz"));t.a(tf,"transactionResult",tf.prototype.te);t.defineProperty(tf,{te:"transactionResult"},r("MA"),ba("MA"));function xf(a){this.Rw=a!==f?a.copy():new D;this.yA=m}xf.prototype.toString=function(){return this.Rw.toString()};t.a(xf,"point",xf.prototype.mh);t.defineProperty(xf,{mh:"point"},r("Rw"),ba("Rw"));
function yf(){tf.call(this);this.name="Dragging";this.yz=h;this.Tk=this.Lz=o;this.ow=(new K(NaN,NaN)).freeze();this.pw=dc;this.qw=(new D(NaN,NaN)).freeze();this.Iz=this.Vz=o;this.Jz=this.xz=this.Kz=this.Bz=m;this.So=this.Hz=o;this.Nm=new D(NaN,NaN);this.Ph=new D;this.Ut=o;this.Qt=h;this.im=100;this.Nk=this.Ft=m}t.J("DraggingTool",yf);t.ua(yf,tf);t.a(yf,"copiesEffectiveCollection",yf.prototype.nB);t.defineProperty(yf,{nB:"copiesEffectiveCollection"},r("yz"),ba("yz"));t.a(yf,"dragsTree",yf.prototype.IB);
t.defineProperty(yf,{IB:"dragsTree"},r("Lz"),ba("Lz"));t.a(yf,"isGridSnapEnabled",yf.prototype.Dn);t.defineProperty(yf,{Dn:"isGridSnapEnabled"},r("Tk"),function(a){if(this.Tk!==a){t.e(a,"boolean",yf,"isGridSnapEnabled");this.Tk=a}});t.a(yf,"gridSnapCellSize",yf.prototype.gy);t.defineProperty(yf,{gy:"gridSnapCellSize"},r("ow"),function(a){if(!this.ow.z(a)){t.c(a,K,yf,"gridSnapCellSize");this.ow=a=a.D()}});t.a(yf,"gridSnapCellSpot",yf.prototype.$B);
t.defineProperty(yf,{$B:"gridSnapCellSpot"},r("pw"),function(a){if(!this.pw.z(a)){t.c(a,J,yf,"gridSnapCellSpot");this.pw=a=a.D()}});t.a(yf,"gridSnapOrigin",yf.prototype.aC);t.defineProperty(yf,{aC:"gridSnapOrigin"},r("qw"),function(a){if(!this.qw.z(a)){t.c(a,D,yf,"gridSnapOrigin");this.qw=a=a.D()}});t.a(yf,"isDragSnapEnabled",yf.prototype.WF);t.defineProperty(yf,{WF:"isDragSnapEnabled"},r("Vz"),ba("Vz"));t.a(yf,"draggableLinks",yf.prototype.xl);t.defineProperty(yf,{xl:"draggableLinks"},r("Iz"),ba("Iz"));
t.a(yf,"currentPart",yf.prototype.sl);t.defineProperty(yf,{sl:"currentPart"},r("Bz"),ba("Bz"));t.a(yf,"copiedParts",yf.prototype.tc);t.defineProperty(yf,{tc:"copiedParts"},r("xz"),ba("xz"));t.a(yf,"draggedParts",yf.prototype.Pb);t.defineProperty(yf,{Pb:"draggedParts"},r("Kz"),ba("Kz"));t.a(yf,"draggedLink",yf.prototype.Hb);t.defineProperty(yf,{Hb:"draggedLink"},r("Jz"),ba("Jz"));t.a(yf,"dragOutStarted",yf.prototype.Wx);t.defineProperty(yf,{Wx:"dragOutStarted"},r("Hz"),ba("Hz"));t.a(yf,"delay",yf.prototype.vu);
t.defineProperty(yf,{vu:"delay"},r("im"),ba("im"));yf.prototype.canStart=yf.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||!a.fk&&!a.Sh&&!a.ju||!a.Ld)return o;var b=a.H;return!b.left||a.va!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.qi!==m&&b.qi instanceof window.TouchEvent)&&b.timestamp-a.ic.timestamp<this.im)?o:this.findDraggablePart()!==m};
yf.prototype.findDraggablePart=yf.prototype.II=function(){var a=this.b;if(a===m)return m;a=a.tr(a.ic.F,h);return a!==m&&(a.canMove()||a.canCopy())?a:m};yf.prototype.standardMouseSelect=yf.prototype.UG=function(){var a=this.b;if(a!==m&&a.Ld){this.sl=a.tr(a.ic.F,h);if(this.sl!==m&&!this.sl.Ha){a.na("ChangingSelection");var b=a.H;!b.jk&&!b.shift&&rf(a);this.sl.Ha=h;a.na("ChangedSelection")}}};
yf.prototype.doActivate=yf.prototype.bi=function(){var a=this.b;if(a!==m){this.standardMouseSelect();var b=this.sl;if(!(b===m||!b.canMove()&&!b.canCopy())){this.S=h;this.Nm.set(a.position);zf(this,a.selection);this.Nk=this.Ft=m;this.Pb=this.computeEffectiveCollection(a.selection);Af(this,this.Pb);this.Kb("Drag");this.Ph.set(a.ic.F);if(a.ju){this.Wx=h;this.So=o;Bf=this;this.b.Gc=h}else a.Gc=h}}};
function zf(a,b){if(a.xl){var c=a.b;if(c!==m&&c.Ki)if(b.count===1){c=b.f;c.next();a.Hb=c.value;a.Hb!==m&&(a.Hb.canRelinkFrom()&&a.Hb.canRelinkTo())&&a.Hb.ah()}else a.Hb=m}}
yf.prototype.computeEffectiveCollection=yf.prototype.bI=function(a){var b=this.b!==m&&this.b.va===this,c=new ra(T,xf);if(a===m)return c;for(var d=a.f;d.next();){var e=d.value;Cf(this,c,e,b)}if(this.Hb!==m&&this.xl)return c;for(d=a.f;d.next();){e=d.value;if(e instanceof W){a=e;b=a.ia;if(b!==m&&!c.contains(b))c.remove(a);else{b=a.ma;b!==m&&!c.contains(b)&&c.remove(a)}}}return c};
function Cf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof U){b.add(c,new xf(c.location));if(c instanceof V)for(var e=c.lc;e.next();){var g=e.value;Cf(a,b,g,d)}for(g=c.le;g.next();){e=g.value;if(!b.contains(e)){var i=e.ia,j=e.ma;i!==m&&(b.contains(i)&&j!==m&&b.contains(j))&&Cf(a,b,e,d)}}if(a.IB){g=h;e=c.b;if(e!==m)g=e.xf;for(c=g?c.un():c.tn();c.next();){g=c.value;Cf(a,b,g,d)}}}else if(c instanceof W){e=c;b.add(e,new xf);for(g=e.hi;g.next();)Cf(a,b,g.value,d)}else c.constructor===
T&&b.add(c,new xf(c.location))}yf.prototype.doStop=yf.prototype.Si=function(){var a=this.b;a!==m&&Df(a);Ef(this);Ff(this,this.Pb);this.Pb=m;this.So=this.Wx=o;if(Gf.count>0){for(var b=Gf.length,c=0;c<b;c++){var d=Gf.j[c];if(d.Hb!==m)d.Hb=m;Hf(d);Ef(d);d.b!==m&&Df(d.b)}Gf.clear()}if(this.Hb!==m)this.Hb=m;this.Nm.as(NaN,NaN);Bf=If=m;Hf(this);a.Gc=o;this.gj()};
function Ef(a){var b=a.b;if(b!==m){var c=b.gb;b.gb=h;for(var d=b.H,e=a.Nk;e!==m;){var g=e.Ay;if(g!==m){g(d,e,m);if(d.zd)break}e=e.Y}b.gb=c}a.Ft=m;a.Nk=m}yf.prototype.doCancel=yf.prototype.Ri=function(){Hf(this);Qf(this);var a=this.b;if(a!==m&&this.Nm.aa())a.position=this.Nm;this.stopTool()};function Af(a,b){if(b!==m){a.Ut=h;for(var c=b.f;c.next();){var d=c.key;if(d instanceof W)d.Rm=h}}}
function Ff(a,b){if(b!==m&&a.Ut){for(var c=b.f;c.next();){var d=c.key;if(d instanceof W){d.Rm=o;d.Xe===Rf?Sf(d):d.N()}}a.Ut=o}}yf.prototype.doKeyDown=yf.prototype.Sx=function(){var a=this.b;if(a!==m){a=a.H;a!==m&&this.S&&(a.key==="Esc"?this.doCancel():this.doMouseMove())}};yf.prototype.doKeyUp=yf.prototype.Tx=function(){var a=this.b;a!==m&&a.H!==m&&this.S&&this.doMouseMove()};
function Tf(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.f;a.next();){var g=a.value;if(g instanceof U||g.constructor===T){var i=g.location,g=i.x,i=i.y;if(!isNaN(g)&&!isNaN(i)){g<b&&(b=g);i<c&&(c=i);g>d&&(d=g);i>e&&(e=i)}}}return b===Infinity?new E(0,0,0,0):new E(b,c,d-b,e-c)}
function Uf(a,b){if(a.tc===m){var c=a.b;if(!(c===m||c.Pa||c.Rd)&&a.Pb!==m){c.gb=!b;c.L.gb=!b;c.er=!b;Qf(a);a.Ph.set(c.ic.F);for(var c=a.nB?c.Od.copyParts(a.Pb.hj(),c,h):c.Od.copyParts(c.selection,c,h),d=c.f;d.next();)d.value.location=d.key.location.copy();d=Tf(c);new D(d.x+d.width/2,d.y+d.height/2);for(var d=new ra(T,xf),e=a.Pb.f;e.next();){var g=e.key;if((g instanceof U||g.constructor===T)&&g.canCopy()){g=c.da(g);if(g!==m){g.ci();d.add(g,new xf(g.location))}}}for(c=c.f;c.next();){e=c.value;e instanceof
W&&e.canCopy()&&d.add(e,new xf)}a.tc=d;zf(a,d.hj());if(a.Hb!==m){c=a.Hb;d=sb(c.nb);c.rk(a.Ph.x-(d.x+d.width/2),a.Ph.y-(d.y+d.height/2))}}}}function Hf(a){var b=a.b;if(b!==m){if(a.tc!==m){b.Od.deleteParts(a.tc.hj(),o);a.tc=m}b.gb=o;b.L.gb=o;b.er=o;a.Ph.set(b.ic.F)}}function Vf(a,b){var c=a.b;if(c!==m){var d=a.Ph;a.moveParts(b,c.H.F.copy().es(d),h)}}
yf.prototype.moveParts=yf.prototype.MJ=function(a,b,c){if(!(a===m||a.count===0)){var d=b.copy();if(isNaN(d.x))d.x=0;if(isNaN(d.y))d.y=0;var e=this.Ut;e||Af(this,a);for(var g=new z,i=new z(Sa),j=a.f;j.next();){var k=j.key;if(k instanceof U||k.constructor===T){var l=Wf(this,k,a);if(l!==m)g.add({kh:k,info:j.value,MF:l});else if(!c||k.canMove()){var l=j.value.mh,n=this.computeMove(k,l.copy().add(d),a);k.location=n;j.value.yA=n.copy().es(l)}}else j.key instanceof W&&i.add(j.Xd)}for(c=g.f;c.next();){g=
c.value;l=g.info.mh;n=l.copy().add(g.MF.yA);g.kh.location=n}for(i=i.f;i.next();){j=i.value;l=j.key;if(l instanceof W)if(l.Rm){c=l.ia;g=l.ma;if(this.Hb!==m&&this.xl){j=j.value.mh;a.add(l,new xf(d));n=b.x-j.x;c=b.y-j.y;l.rk(n,c)}else{n=new D(0,0);if(c!==m){n.set(c.location);var q=a.da(c);q!==m&&n.es(q.mh)}k=new D(0,0);if(g!==m){k.set(g.location);q=a.da(g);q!==m&&k.es(q.mh)}if(c!==m&&g!==m)if(n.mk(k)){j=j.value.mh;c=n.copy();c.es(j);a.add(l,new xf(n));l.rk(c.x,c.y)}else{l.Rm=o;Sf(l)}else{j=j.value.mh;
a.add(l,new xf(c!==m?n:g!==m?k:b));n=d.x-j.x;c=d.y-j.y;l.rk(n,c)}}}else if(l.ia===m||l.ma===m){j=j.value.mh;a.add(l,new xf(b));n=d.x-j.x;c=d.y-j.y;l.rk(n,c)}}e||Ff(this,a)}};function Wf(a,b,c){b=b.Wa;if(b!==m){a=Wf(a,b,c);if(a!==m)return a;a=c.da(b);if(a!==m&&a instanceof xf)return a}return m}
function Qf(a){if(a.Pb!==m){var b=a.b,c=o,d=o;if(b!==m){c=b.gb;d=b.L.gb;b.gb=h;b.L.gb=h}for(var e=a.Pb.f;e.next();){var g=e.key;if(g instanceof U||g.constructor===T)g.location=e.value.mh}for(e=a.Pb.f;e.next();){g=e.key;if(g instanceof W&&g.Rm){var i=e.value.mh;a.Pb.add(g,new xf);g.rk(-i.x,-i.y)}}if(b!==m){b.gb=c;b.L.gb=d;b.Xi()}}}
yf.prototype.computeMove=yf.prototype.eI=function(a,b){if(a===m)return b;var c=b,c=b;if(this.Dn){c=b.copy();if(a!==m){var d=this.b;if(d!==m){var e=d.Ku,g=this.gy,d=g.width,g=g.height,i=this.aC,j=i.x,i=i.y,k=this.$B;if(e!==m){var l=e.Ar;if(isNaN(d))d=l.width;if(isNaN(g))g=l.height;e=e.fy;if(isNaN(j))j=e.x;if(isNaN(i))i=e.y}e=(new D).Nl(0,0,d,g,k);c=xd(c.x,c.y,j+e.x,i+e.y,d,g)}}}c=a.Vx!==m?a.Vx(a,b,c):c;g=a.IC;d=g.x;if(isNaN(d))d=a.location.x;g=g.y;if(isNaN(g))g=a.location.y;e=a.CC;j=e.x;if(isNaN(j))j=
a.location.x;e=e.y;if(isNaN(e))e=a.location.y;return new D(Math.max(d,Math.min(c.x,j)),Math.max(g,Math.min(c.y,e)))};function Xf(a,b){if(b===m)return h;var c=b.ba;return c===m||c.Ha||c instanceof of||c.xa.ed||a.Pb&&a.Pb.contains(c)||a.tc&&a.tc.contains(c)?h:o}
yf.prototype.dragOver=yf.prototype.yI=function(a,b,c){var d=this.b;if(d!==m){if(this.xl&&this.Hb!==m){var e=this.b.L;if(e instanceof P){this.Hb.ia!==m&&e.$r(this.Hb.data,"");this.Hb.ma!==m&&e.bs(this.Hb.data,"")}}e=o;if(this.Qt===o){e=d.gb;d.gb=h}var g=o,i=this,j=Yf(d,a,m,function(a){return!Xf(i,a)}),k=d.H;k.gd=j;var l=d.gb;d.gb=h;if(j!==this.Nk){var n=this.Nk;this.Ft=n;for(this.Nk=j;n!==m;){var q=n.Ay;if(q!==m){if(j===n)break;if(j!==m&&j.gi(n))break;q(k,n,j);g=h;if(k.zd)break}n=n.Y}for(n=this.Ft;j!==
m;){q=j.JC;if(q!==m){if(n===j)break;if(n!==m&&n.gi(j))break;q(k,j,n);g=h;if(k.zd)break}j=j.Y}j=this.Nk}if(j===m){q=d.KC;if(q!==m){q(k);g=h}}d.gb=l;g&&d.update();if(this.Qt===o)d.gb=e;if((d.Je||d.Ke)&&(b||c)){d.Sv=d.fo(a);Zf(d,d.Sv).mk(d.position)?Df(d):$f(d)}}};
yf.prototype.dropOnto=yf.prototype.BI=function(a){var b=this.b;if(b!==m&&b.L!==m){var c=this;Ef(this);var d=Yf(b,a,m,function(a){return!Xf(c,a)}),a=b.H;a.gd=d;if(d!==m)for(;d!==m;){var e=d.Mr;if(e!==m){e(a,d);if(a.zd)break}d=d.Y}else{e=b.Mr;e!==m&&e(a)}for(a=b.selection.f;a.next();){d=a.value;d instanceof U&&ag(b,d.ta)}}};
yf.prototype.doMouseMove=yf.prototype.eh=function(){if(this.S){var a=this.b;if(a!==m&&this.sl!==m&&this.Pb!==m){var b=o,c=o;if(this.mayCopy()){b=h;Uf(this,o);Vf(this,this.tc)}else if(this.mayMove()){c=h;Hf(this);Vf(this,this.Pb)}else Hf(this);this.dragOver(a.H.F,c,b);sf(a)}}};
yf.prototype.doMouseUp=yf.prototype.Oe=function(){if(this.S){this.So=h;var a=this.b;if(a!==m){var b=o,c=this.mayCopy();if(c&&this.tc!==m){Qf(this);Hf(this);Uf(this,h);Vf(this,this.tc);this.tc!==m&&a.Ry(this.tc.hj())}else{b=h;if(this.mayMove()){this.Qt=o;this.dragOver(a.H.F,h,o);this.Qt=h}}this.dropOnto(a.H.F);if(this.S){this.tc=m;if(b&&this.Pb!==m)for(b=this.Pb.f;b.next();){var d=b.key;if(d instanceof U){d=d.Wa;d!==m&&d.placeholder!==m&&!this.Pb.contains(d)&&d.placeholder.Ox&&d.N()}}a.Xi();Ff(this,
this.Pb);this.te=c?"Copy":"Move";a.na(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};yf.prototype.mayCopy=yf.prototype.FJ=function(){var a=this.b;if(a===m||(a.Pa||a.Rd||!a.en||!a.Sh)||!a.H.jk)return o;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===T)&&b.canCopy())return h}return this.Hb!==m&&this.xl&&this.Hb.canCopy()?h:o};
yf.prototype.mayMove=yf.prototype.HJ=function(){var a=this.b;if(a===m||a.Pa||!a.fk)return o;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===T)&&b.canMove())return h}return this.Hb!==m&&this.xl&&this.Hb.canMove()?h:o};var Gf=new z(yf),Bf=m,If=m;yf.prototype.mayCopyExternal=yf.prototype.GJ=function(){var a=this.b;return a===m||(!a.WA||a.Pa||a.Rd||!a.en)||a.L===m?o:h};
yf.prototype.doSimulatedDragEnter=yf.prototype.FB=function(){this.mayCopyExternal()&&(Gf.contains(this)||Gf.add(this))};yf.prototype.doSimulatedDragLeave=yf.prototype.GB=function(){Hf(this);var a=this.b;if(a!==m&&a.va!==this&&this.Nm.aa())a.position=this.Nm};yf.prototype.doSimulatedDragOver=yf.prototype.uF=function(){if(this.mayCopyExternal()){var a=this.b;if(a!==m){var b=Bf;if(b!==m&&b.Pb!==m){bg(this,b.Pb.hj(),o);Vf(this,this.tc);a.Ry(this.tc.hj());this.dragOver(a.H.F,o,h);sf(a)}}}};
yf.prototype.doSimulatedDrop=yf.prototype.vF=function(){var a=Bf;if(a!==m){a.So=h;Hf(this);if(this.mayCopyExternal()){var b=this.b;if(b!==m){this.Kb("Drop");bg(this,a.Pb.hj(),h);Vf(this,this.tc);this.tc!==m&&b.Ry(this.tc.hj());this.te="ExternalCopy";this.dropOnto(b.H.F);this.tc=m;b.na("ExternalObjectsDropped",b.selection);this.gj();b.Xi()}}}};
function bg(a,b,c){if(a.tc===m){var d=a.b;if(!(d===m||d.Pa||d.Rd)){var e=d.L;if(e!==m){e.gb=!c;d.er=!c;a.Ph.set(d.H.F);for(var d=d.Od.copyParts(b,d,h),c=Tf(b),e=new D(c.x+c.width/2,c.y+c.height/2),g=a.Ph,c=new ra(T,xf),b=b.f;b.next();){var i=b.value;if((i instanceof U||i.constructor===T)&&i.canCopy()){var j=i.location,i=d.da(i);i.location=new D(g.x-(e.x-j.x),g.y-(e.y-j.y));i.ci();c.add(i,new xf(i.location))}}for(d=d.f;d.next();){b=d.value;b instanceof W&&b.canCopy()&&c.add(b,new xf)}a.tc=c;zf(a,c.hj());
if(a.Hb!==m){c=a.Hb;d=sb(c.nb);c.rk(a.Ph.x-(d.x+d.width/2),a.Ph.y-(d.y+d.height/2))}}}}}
function cg(){tf.call(this);this.Sw=100;this.ox=o;var a=new W;a.$n="PATH";var b=new X;b.Zi=h;b.name="PATH";b.stroke="blue";a.add(b);b=new X;b.Tl="Standard";b.fill="blue";a.add(b);a.Cd="Tool";this.hx=a;a=new U;b=new X;b.oe="";b.Xa="Rectangle";b.fill=m;b.stroke="magenta";b.Ta=2;b.pa=new K(1,1);a.add(b);a.tk=o;a.Cd="Tool";this.fx=a;this.gx=b;a=new U;b=new X;b.oe="";b.Xa="Rectangle";b.fill=m;b.stroke="magenta";b.Ta=2;b.pa=new K(1,1);a.add(b);a.tk=o;a.Cd="Tool";this.ix=a;this.jx=b;this.Qw=this.Pw=this.Mw=
this.Lw=this.Nw=m;this.Ws=h;this.uE=new ra(Q,"boolean");this.Zz=this.ex=m}t.J("LinkingBaseTool",cg);t.ua(cg,tf);cg.prototype.doStop=cg.prototype.Si=function(){this.Cf=this.Ve=this.Bf=this.Ue=this.Ib=m;this.kv.clear();this.qe=m};t.a(cg,"portGravity",cg.prototype.SC);t.defineProperty(cg,{SC:"portGravity"},r("Sw"),function(a){if(this.Sw!==a){s&&t.e(a,"number",cg,"portGravity");this.Sw=a}});t.a(cg,"validUnconnectedLinks",cg.prototype.ho);
t.defineProperty(cg,{ho:"validUnconnectedLinks"},r("ox"),function(a){if(this.ox!==a){s&&t.e(a,"boolean",cg,"validUnconnectedLinks");this.ox=a}});t.a(cg,"temporaryLink",cg.prototype.ph);t.defineProperty(cg,{ph:"temporaryLink"},r("hx"),function(a){if(this.hx!==a){s&&t.c(a,W,cg,"temporaryLink");this.hx=a}});t.a(cg,"temporaryFromNode",cg.prototype.re);t.defineProperty(cg,{re:"temporaryFromNode"},r("fx"),function(a){if(this.fx!==a){s&&t.c(a,U,cg,"temporaryFromNode");this.fx=a}});
t.a(cg,"temporaryFromPort",cg.prototype.Rl);t.defineProperty(cg,{Rl:"temporaryFromPort"},r("gx"),function(a){if(this.gx!==a){s&&t.c(a,Q,cg,"temporaryFromPort");this.gx=a}});t.a(cg,"temporaryToNode",cg.prototype.se);t.defineProperty(cg,{se:"temporaryToNode"},r("ix"),function(a){if(this.ix!==a){s&&t.c(a,U,cg,"temporaryToNode");this.ix=a}});t.a(cg,"temporaryToPort",cg.prototype.Sl);
t.defineProperty(cg,{Sl:"temporaryToPort"},r("jx"),function(a){if(this.jx!==a){s&&t.c(a,Q,cg,"temporaryToPort");this.jx=a}});t.a(cg,"originalLink",cg.prototype.Ib);t.defineProperty(cg,{Ib:"originalLink"},r("Nw"),function(a){if(this.Nw!==a){s&&a!==m&&t.c(a,W,cg,"originalLink");this.Nw=a}});t.a(cg,"originalFromNode",cg.prototype.Ue);t.defineProperty(cg,{Ue:"originalFromNode"},r("Lw"),function(a){if(this.Lw!==a){s&&a!==m&&t.c(a,U,cg,"originalFromNode");this.Lw=a}});t.a(cg,"originalFromPort",cg.prototype.Bf);
t.defineProperty(cg,{Bf:"originalFromPort"},r("Mw"),function(a){if(this.Mw!==a){s&&a!==m&&t.c(a,Q,cg,"originalFromPort");this.Mw=a}});t.a(cg,"originalToNode",cg.prototype.Ve);t.defineProperty(cg,{Ve:"originalToNode"},r("Pw"),function(a){if(this.Pw!==a){s&&a!==m&&t.c(a,U,cg,"originalToNode");this.Pw=a}});t.a(cg,"originalToPort",cg.prototype.Cf);t.defineProperty(cg,{Cf:"originalToPort"},r("Qw"),function(a){if(this.Qw!==a){s&&a!==m&&t.c(a,Q,cg,"originalToPort");this.Qw=a}});
t.m(cg,{Bd:"isForwards"},r("Ws"));t.m(cg,{kv:"validPortsCache"},r("uE"));t.a(cg,"targetPort",cg.prototype.qe);t.defineProperty(cg,{qe:"targetPort"},r("ex"),function(a){if(this.ex!==a){s&&a!==m&&t.c(a,Q,cg,"targetPort");this.ex=a}});cg.prototype.copyPortProperties=cg.prototype.lI=function(a,b,c,d,e){if(!(a===m||b===m||c===m||d===m)){d.pa=b.ta.size;if(e){d.$a=b.$a;d.wk=b.wk}else{d.Ya=b.Ya;d.nk=b.nk}c.yf=mc;c.location=b.zb(mc);d.Qa=b.yn();c.vf()}};
cg.prototype.setNoTargetPortProperties=cg.prototype.kK=function(a,b){if(b!==m){b.pa=new K(1,1);b.Ya=Yb;b.$a=Yb}if(a!==m)a.location=this.b.H.F};
cg.prototype.doMouseMove=cg.prototype.eh=function(){if(this.S){var a=this.b;if(a!==m){this.qe=this.findTargetPort(this.Bd);if(this.qe!==m){var b=this.qe.ba;if(b instanceof U){this.Bd?this.copyPortProperties(b,this.qe,this.se,this.Sl,h):this.copyPortProperties(b,this.qe,this.re,this.Rl,o);sf(a);return}}this.Bd?this.setNoTargetPortProperties(this.se,this.Sl):this.setNoTargetPortProperties(this.re,this.Rl);sf(a)}}};
cg.prototype.findValidLinkablePort=cg.prototype.SI=function(a,b){if(a===m)return m;var c=a.ba;if(!(c instanceof U))return m;for(;a!==m;){var d=b?a.bz:a.cy;if(d===h&&(a.oe!==m||a instanceof U)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===o)break;a=a.Y}return m};
cg.prototype.findTargetPort=cg.prototype.MI=function(a){for(var b=this.b,c=b.H.F,d=this.SC,e=this,g=b.wn(c,d,function(b){return e.findValidLinkablePort(b,a)},m),b=d*d,d=m,g=g.f;g.next();){var i=g.value,j=i.ba;if(j instanceof U){var k=i.zb(mc),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;if(l<b){k=this.kv.da(i);if(k!==m){if(k){d=i;b=l}}else if(a&&this.isValidLink(this.Ue,this.Bf,j,i)||!a&&this.isValidLink(j,i,this.Ve,this.Cf)){this.kv.add(i,h);d=i;b=l}else this.kv.add(i,o)}}}if(d!==m){c=d.ba;if(c instanceof U&&(c.xa===
m||c.xa.ml))return d}return m};cg.prototype.isValidFrom=cg.prototype.sJ=function(a,b){if(a===m||b===m)return this.ho;if(this.b.va===this&&(a.xa!==m&&!a.xa.ml||b.cy!==h))return o;var c=b.VB;if(c<Infinity){if(this.Ib!==m&&a===this.Ue&&b===this.Bf)return h;var d=b.oe;d===m&&(d="");if(a.$x(d).count>=c)return o}return h};
cg.prototype.isValidTo=cg.prototype.vJ=function(a,b){if(a===m||b===m)return this.ho;if(this.b.va===this&&(a.xa!==m&&!a.xa.ml||b.bz!==h))return o;var c=b.ED;if(c<Infinity){if(this.Ib!==m&&a===this.Ve&&b===this.Cf)return h;var d=b.oe;d===m&&(d="");if(a.$x(d).count>=c)return o}return h};cg.prototype.isInSameNode=cg.prototype.oJ=function(a,b){if(a===m||b===m)return o;if(a===b)return h;var c=a.ba,d=b.ba;return c!==m&&c===d};
cg.prototype.isLinked=cg.prototype.qJ=function(a,b){if(a===m||b===m)return o;var c=a.ba;if(!(c instanceof U))return o;var d=a.oe;d===m&&(d="");var e=b.ba;if(!(e instanceof U))return o;var g=b.oe;g===m&&(g="");for(e=e.tf(g);e.next();){g=e.value;if(g.ia===c&&g.hh===d)return h}return o};
cg.prototype.isValidLink=cg.prototype.tJ=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==m&&d!==m&&((!b.UB||!d.DD)&&this.isInSameNode(b,d)||(!b.TB||!d.CD)&&this.isLinked(b,d))||this.Ib!==m&&(a!==m&&a.El(this.Ib)||c!==m&&c.El(this.Ib))||a!==m&&c!==m&&(a.data===m&&c.data!==m||a.data!==m&&c.data===m)||!dg(this,a,c,this.Ib)?o:this.wy!==m?this.wy(a,b,c,d,this.Ib):h};
function dg(a,b,c,d){if(b===m||c===m)return o;var e=a.b.RD;if(e!==eg){if(e===fg){for(e=c.le;e.next();){var g=e.value;if(g!==d&&g.ma===c)return o}return!gg(a,b,c,d)}if(e===hg){for(e=b.le;e.next();){g=e.value;if(g!==d&&g.ia===b)return o}return!gg(a,b,c,d)}if(e===ig){if(b===c)a=h;else{e=new ta(U);e.add(c);a=kg(a,e,b,c,d)}return!a}if(e===lg)return!gg(a,b,c,d);if(e===mg){if(b===c)a=h;else{e=new ta(U);e.add(c);a=ng(a,e,b,c,d)}return!a}}return h}
function gg(a,b,c,d){if(b===c)return h;if(b===m||c===m)return o;for(var e=b.le;e.next();){var g=e.value;if(g!==d&&g.ma===b){g=g.ia;if(g!==b&&gg(a,g,c,d))return h}}return o}function kg(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return o;b.add(c);for(var g=c.le;g.next();){var i=g.value;if(i!==e&&i.ma===c){i=i.ia;if(i!==c&&kg(a,b,i,d,e))return h}}return o}
function ng(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return o;b.add(c);for(var g=c.le;g.next();){var i=g.value;if(i!==e){var j=i.ia,i=i.ma,j=j===c?i:j;if(j!==c&&ng(a,b,j,d,e))return h}}return o}t.a(cg,"linkValidation",cg.prototype.wy);t.defineProperty(cg,{wy:"linkValidation"},r("Zz"),function(a){a!==m&&t.e(a,"function",cg,"linkValidation");this.Zz=a});function wa(){cg.call(this);this.name="Linking";this.Qv={};this.Pv=m;this.Q=og;this.$w=this.Zw=m}t.J("LinkingTool",wa);t.ua(wa,cg);
var og;wa.Either=og=t.l(wa,"Either",0);var pg;wa.ForwardsOnly=pg=t.l(wa,"ForwardsOnly",0);var qg;wa.BackwardsOnly=qg=t.l(wa,"BackwardsOnly",0);t.a(wa,"archetypeLinkData",wa.prototype.YA);t.defineProperty(wa,{YA:"archetypeLinkData"},r("Qv"),function(a){if(this.Qv!==a){a!==m&&t.c(a,Object,wa,"archetypeLinkData");this.Qv=a}});t.a(wa,"archetypeLabelNodeData",wa.prototype.XA);
t.defineProperty(wa,{XA:"archetypeLabelNodeData"},r("Pv"),function(a){if(this.Pv!==a){a!==m&&t.c(a,Object,wa,"archetypeLabelNodeData");var b=this.b;if(b!==m){b=b.L;b!==m&&!(a instanceof U)&&!b.qy(a)&&t.g("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a)}this.Pv=a}});t.a(wa,"direction",wa.prototype.direction);
t.defineProperty(wa,{direction:"direction"},r("Q"),function(a){if(this.Q!==a){s&&t.Va(a,wa,wa,"direction");this.Q=a}});t.a(wa,"startObject",wa.prototype.Wy);t.defineProperty(wa,{Wy:"startObject"},r("Zw"),function(a){if(this.Zw!==a){s&&a!==m&&t.c(a,Q,wa,"startObject");this.Zw=a}});t.m(wa,{gv:"startPort"},r("$w"));
wa.prototype.canStart=wa.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||(a.Pa||a.Rd)||!a.ml)return o;var b=a.L;return b===m||!(b instanceof P)||!a.H.left||a.va!==this&&!this.isBeyondDragSize()?o:this.findLinkablePort()!==m};
wa.prototype.findLinkablePort=wa.prototype.JI=function(){var a=this.b;if(a===m)return m;var b=this.Wy;b===m&&(b=a.Sc(a.ic.F,m,m));if(b===m||!(b.ba instanceof U))return m;var c=this.direction;if(c===og||c===pg){a=this.findValidLinkablePort(b,o);if(a!==m){this.Ws=h;return a}}if(c===og||c===qg){a=this.findValidLinkablePort(b,h);if(a!==m){this.Ws=o;return a}}return m};
wa.prototype.doActivate=wa.prototype.bi=function(){var a=this.b;if(a!==m){if(this.gv===m)this.$w=this.findLinkablePort();if(this.gv!==m){this.Kb(this.name);a.Gc=h;a.uc="hand";a.add(this.re);a.add(this.se);if(this.Bd){this.Bf=this.gv;var b=this.Bf.ba;if(b instanceof U)this.Ue=b;this.copyPortProperties(this.Ue,this.Bf,this.re,this.Rl,o)}else{this.Cf=this.gv;b=this.Cf.ba;if(b instanceof U)this.Ve=b;this.copyPortProperties(this.Ve,this.Cf,this.se,this.Sl,h)}if(this.ph){if(this.re!==m)this.ph.ia=this.re;
if(this.se!==m)this.ph.ma=this.se;a.add(this.ph)}this.S=h}}};wa.prototype.doDeactivate=wa.prototype.lk=function(){this.S=o;var a=this.b;if(a!==m){a.remove(this.ph);a.remove(this.re);a.remove(this.se);a.Gc=o;a.uc="";this.gj()}};wa.prototype.doStop=wa.prototype.Si=function(){cg.prototype.Si.call(this);this.Wy=this.$w=m};
wa.prototype.doMouseUp=wa.prototype.Oe=function(){if(this.S){var a=this.b;if(a===m)return;var b=this.te=m,c=m,d=m,e=m,g=this.qe=this.findTargetPort(this.Bd),i=m;if(g!==m){i=g.ba;if(i instanceof U)if(this.Bd){if(this.Ue!==m){b=this.Ue;c=this.Bf}d=i;e=g}else{b=i;c=g;if(this.Ve!==m){d=this.Ve;e=this.Cf}}}else if(this.Bd){if(this.Ue!==m&&this.ho){b=this.Ue;c=this.Bf}}else if(this.Ve!==m&&this.ho){d=this.Ve;e=this.Cf}if(b!==m||d!==m){b=this.insertLink(b,c,d,e);if(b!==m){if(g===m)this.Bd?b.nF=a.H.F:b.mF=
a.H.F;a.Ld&&a.select(b);this.te=this.name;a.na("LinkDrawn",b)}else a.L.gB()}}this.stopTool()};
wa.prototype.insertLink=wa.prototype.iJ=function(a,b,c,d){var e=this.b;if(e===m)return m;var g=e.L;if(g===m||!(g instanceof P))return m;b===m&&(b=a);b=b.oe;b===m&&(b="");d===m&&(d=c);var i=d.oe;i===m&&(i="");d=this.YA;if(d instanceof W){qf(d);g=d.copy();if(g instanceof W){g.ia=a;g.hh=b;g.ma=c;g.ji=i;e.add(g);return g}}else if(d!==m){d=g.pB(d);if(d instanceof Object){g.dv(d,g.$b(a.data));g.$r(d,b);g.ev(d,g.$b(c.data));g.bs(d,i);g.TA(d);a=this.XA;if(a!==m&&g.qy(a)){a=g.on(a);if(a instanceof Object){g.gu(a);
a=g.$b(a);a!==f&&g.SA(d,a)}}return g=e.Ui(d)}}return m};function rg(){cg.call(this);this.name="Relinking";var a=new X;a.Xa="Diamond";a.pa=new K(8,8);a.fill="cyan";a.cursor="pointer";a.nh=0;this.Oz=a;a=new X;a.Xa="Diamond";a.pa=new K(8,8);a.fill="cyan";a.cursor="pointer";a.nh=-1;this.JA=a;this.Xb=m;this.lA=new E}t.J("RelinkingTool",rg);t.ua(rg,cg);
rg.prototype.updateAdornments=rg.prototype.ki=function(a){if(a instanceof W){var b=m,c="RelinkFrom";if(a.Ha){var d=a.Zn;if(d!==m&&a.kb()&&a.canRelinkFrom()&&d.qk()&&d.ta.aa()){b=a.sn(c);if(b===m){b=this.makeAdornment(d,o);b.od=c}b!==m&&b.N()}a.Zm(c,b)}else a.Ll(c);b=m;c="RelinkTo";if(a.Ha){d=a.Zn;if(d!==m&&a.kb()&&a.canRelinkTo()&&d.qk()&&d.ta.aa()){b=a.sn(c);if(b===m){b=this.makeAdornment(d,h);b.od=c}b!==m&&b.N()}a.Zm(c,b)}else a.Ll(c)}};
rg.prototype.makeAdornment=rg.prototype.xy=function(a,b){var c=new of;c.type=sg;var d=b?this.$G:this.HF;d!==m&&c.add(d.copy());c.Kd=a;return c};t.defineProperty(rg,{HF:"fromHandleArchetype"},r("Oz"),function(a){a&&t.c(a,Q,rg,"fromHandleArchetype");this.Oz=a});t.defineProperty(rg,{$G:"toHandleArchetype"},r("JA"),function(a){a&&t.c(a,Q,rg,"toHandleArchetype");this.JA=a});t.m(rg,{handle:"handle"},r("Xb"));
rg.prototype.canStart=rg.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||(a.Pa||a.Rd)||!a.Ki)return o;var b=a.L;if(b===m||!(b instanceof P)||!a.H.left)return o;b=this.findToolHandleAt(a.ic.F,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.ic.F,"RelinkTo"));return b!==m};
rg.prototype.doActivate=rg.prototype.bi=function(){var a=this.b;if(a!==m){var b=this.findToolHandleAt(a.ic.F,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.ic.F,"RelinkTo"));if(b!==m){var c=b.ba;if(c instanceof of&&c.cn instanceof W){this.Xb=b;this.Kb(this.name);a.Gc=h;a.uc="hand";this.Ws=c===m||c.od==="RelinkTo";this.Ib=c.cn;this.Bf=this.Ib.Fc;this.Ue=this.Ib.ia;this.Cf=this.Ib.rd;this.Ve=this.Ib.ma;this.lA=this.Ib.ta;a.add(this.re);a.add(this.se);this.Bd?this.copyPortProperties(this.Ue,this.Bf,
this.re,this.Rl,h):this.copyPortProperties(this.Ve,this.Cf,this.se,this.Sl,o);if(this.Ib!==m&&this.Ib.ca>0){if(this.Ue===m){if(this.Rl!==m)this.Rl.pa=new K(0,0);if(this.re!==m)this.re.location=this.Ib.i(0)}if(this.Ve===m){if(this.Sl!==m)this.Sl.pa=new K(0,0);if(this.se!==m)this.se.location=this.Ib.i(this.Ib.ca-1)}}if(this.ph!==m){if(this.re!==m)this.ph.ia=this.re;if(this.se!==m)this.ph.ma=this.se;a.add(this.ph)}this.S=h}}}};
rg.prototype.doDeactivate=rg.prototype.lk=function(){this.S=o;var a=this.b;if(a!==m){a.remove(this.ph);a.remove(this.re);a.remove(this.se);a.Gc=o;a.uc="";this.gj()}};rg.prototype.doStop=rg.prototype.Si=function(){cg.prototype.Si.call(this);this.Xb=m};
rg.prototype.doMouseUp=rg.prototype.Oe=function(){if(this.S){var a=this.b;if(a===m)return;this.te=m;var b=this.Ue,c=this.Bf,d=this.Ve,e=this.Cf,g=this.Ib;this.qe=this.findTargetPort(this.Bd);if(this.qe!==m){var i=this.qe.ba;if(i instanceof U)if(this.Bd){d=i;e=this.qe}else{b=i;c=this.qe}}else if(this.ho)if(this.Bd)e=d=m;else c=b=m;else g=m;if(g!==m){this.reconnectLink(g,this.Bd?d:b,this.Bd?e:c,this.Bd);if(this.qe===m){this.Bd?g.nF=a.H.F:g.mF=a.H.F;Sf(g)}if(a.Ld)g.Ha=h;this.te=this.name;a.na("LinkRelinked",
g,this.Bd?this.Cf:this.Bf)}tg(this.Ib,this.lA)}this.stopTool()};rg.prototype.reconnectLink=rg.prototype.XJ=function(a,b,c,d){var e=this.b;if(e===m)return o;var g=b!==m?b.data:m,g=g!==m?e.L.$b(g):f,c=c.oe!==m?c.oe:"",a=a.data;if(a!==m&&g!==f){b=e.L;if(b===m||!(b instanceof P))return o;if(d){b.ev(a,g);b.bs(a,c)}else{b.dv(a,g);b.$r(a,c)}}else if(d){this.Ib.ma=b;this.Ib.ji=c}else{this.Ib.ia=b;this.Ib.hh=c}return h};
function ug(){tf.call(this);this.name="LinkReshaping";var a=new X;a.Xa="Rectangle";a.pa=new K(6,6);a.fill="cyan";this.Cj=a;this.Ow=this.nA=this.Ov=this.Xb=m}t.J("LinkReshapingTool",ug);t.ua(ug,tf);var vg;ug.None=vg=t.l(ug,"None",0);var Cg;ug.Horizontal=Cg=t.l(ug,"Horizontal",1);var Hg;ug.Vertical=Hg=t.l(ug,"Vertical",2);var Ig;ug.All=Ig=t.l(ug,"All",3);
ug.prototype.updateAdornments=ug.prototype.ki=function(a){if(a instanceof W){var b=m;if(a.Ha){var c=a.path;if(c!==m&&a.kb()&&a.canReshape()&&c.qk()&&c.ta.aa()){b=a.sn(this.name);if(b===m){b=this.makeAdornment(c);b.od=this.name}if(b!==m){b.location=a.position;b.N()}}a.Zm(this.name,b)}else a.Ll(this.name)}};
ug.prototype.makeAdornment=ug.prototype.xy=function(a){var b=new of;b.type=sg;var c=a.ba,d=c.ca,e=Jg(c);if(c.nb!==m&&d>2){for(var d=c.Fu,g=c.ty,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==m){j.nh=i;if(i!==d)if(i===d+1&&e){var k=c.i(d),l=c.i(d+1);gb(k.x,l.x)&&gb(k.y,l.y)&&(l=c.i(d-1));if(gb(k.x,l.x)){j.Yn=Hg;j.cursor="n-resize"}else if(gb(k.y,l.y)){j.Yn=Cg;j.cursor="w-resize"}}else if(i===g-1&&e){k=c.i(g-1);l=c.i(g);gb(k.x,l.x)&&gb(k.y,l.y)&&(k=c.i(g+1));if(gb(k.x,l.x)){j.Yn=Hg;j.cursor="n-resize"}else if(gb(k.y,
l.y)){j.Yn=Cg;j.cursor="w-resize"}}else if(i!==g){j.Yn=Ig;j.cursor="move"}b.add(j)}}b.Kd=a}return b};ug.prototype.makeHandle=ug.prototype.iG=function(){var a=this.Br;return a===m?m:a.copy()};t.defineProperty(ug,{Br:"handleArchetype"},r("Cj"),function(a){a&&t.c(a,Q,ug,"handleArchetype");this.Cj=a});t.m(ug,{handle:"handle"},r("Xb"));t.m(ug,{bn:"adornedLink"},r("Ov"));
ug.prototype.canStart=ug.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Pa||!a.gn?o:this.findToolHandleAt(a.ic.F,this.name)!==m};ug.prototype.doActivate=ug.prototype.bi=function(){var a=this.b;if(a!==m){this.Xb=this.findToolHandleAt(a.ic.F,this.name);if(this.Xb!==m){var b=this.Xb.ba.cn;if(b instanceof W){this.Ov=b;a.Gc=h;this.nA=b.i(this.Xb.nh);this.Ow=b.nb.copy();this.Kb(this.name);this.S=h}}}};
ug.prototype.doDeactivate=ug.prototype.lk=function(){this.gj();this.Ow=this.nA=this.Ov=this.Xb=m;var a=this.b;if(a!==m)a.Gc=o;this.S=o};ug.prototype.doCancel=ug.prototype.Ri=function(){var a=this.bn;if(a!==m)a.nb=this.Ow;this.stopTool()};ug.prototype.doMouseMove=ug.prototype.eh=function(){var a=this.b;if(this.S&&a!==m){a=this.computeReshape(a.H.F);this.reshape(a)}};
ug.prototype.doMouseUp=ug.prototype.Oe=function(){var a=this.b;if(this.S&&a!==m){var b=this.computeReshape(a.H.F);this.reshape(b);b=this.bn;if(b!==m)b.nb=this.bn.nb;a.Xi();this.te=this.name;a.na("LinkReshaped",this.bn)}this.stopTool()};
ug.prototype.reshape=ug.prototype.eK=function(a){var b=this.bn;b.vk();var c=this.handle.nh,d=this.handle.Yn;if(Jg(b))if(c===b.Fu+1){c=b.Fu+1;if(d==Hg){b.A(c,new D(b.i(c-1).x,a.y));b.A(c+1,new D(b.i(c+2).x,a.y))}else if(d==Cg){b.A(c,new D(a.x,b.i(c-1).y));b.A(c+1,new D(a.x,b.i(c+2).y))}}else if(c===b.ty-1){c=b.ty-1;if(d===Hg){b.A(c-1,new D(b.i(c-2).x,a.y));b.A(c,new D(b.i(c+1).x,a.y))}else if(d===Cg){b.A(c-1,new D(a.x,b.i(c-2).y));b.A(c,new D(a.x,b.i(c+1).y))}}else{var d=c,e=b.i(d),g=b.i(d-1),i=b.i(d+
1);if(gb(g.x,e.x)&&gb(e.y,i.y)){if(gb(g.x,b.i(d-2).x)&&!gb(g.y,b.i(d-2).y)){e=b.nb;e.kc(d,new D(a.x,g.y));b.nb=e;c++;d++}else b.A(d-1,new D(a.x,g.y));if(gb(i.y,b.i(d+2).y)&&!gb(i.x,b.i(d+2).x)){e=b.nb;e.kc(d+1,new D(i.x,a.y));b.nb=e}else b.A(d+1,new D(i.x,a.y))}else if(gb(g.y,e.y)&&gb(e.x,i.x)){if(gb(g.y,b.i(d-2).y)&&!gb(g.x,b.i(d-2).x)){e=b.nb;e.kc(d,new D(g.x,a.y));b.nb=e;c++;d++}else b.A(d-1,new D(g.x,a.y));if(gb(i.x,b.i(d+2).x)&&!gb(i.y,b.i(d+2).y)){e=b.nb;e.kc(d+1,new D(a.x,i.y));b.nb=e}else b.A(d+
1,new D(a.x,i.y))}else if(gb(g.x,e.x)&&gb(e.x,i.x)){if(gb(g.x,b.i(d-2).x)&&!gb(g.y,b.i(d-2).y)){e=b.nb;e.kc(d,new D(a.x,g.y));b.nb=e;c++;d++}else b.A(d-1,new D(a.x,g.y));if(gb(i.x,b.i(d+2).x)&&!gb(i.y,b.i(d+2).y)){e=b.nb;e.kc(d+1,new D(a.x,i.y));b.nb=e}else b.A(d+1,new D(a.x,i.y))}else if(gb(g.y,e.y)&&gb(e.y,i.y)){if(gb(g.y,b.i(d-2).y)&&!gb(g.x,b.i(d-2).x)){e=b.nb;e.kc(d,new D(g.x,a.y));b.nb=e;c++;d++}else b.A(d-1,new D(g.x,a.y));if(gb(i.y,b.i(d+2).y)&&!gb(i.x,b.i(d+2).x)){e=b.nb;e.kc(d+1,new D(i.x,
a.y));b.nb=e}else b.A(d+1,new D(i.x,a.y))}b.A(c,a.copy())}else b.A(c,a.copy());b.Xh()};ug.prototype.computeReshape=ug.prototype.fI=function(a){var b=this.bn,c=this.handle.nh;switch(this.handle.Yn){case Ig:return a;case Hg:b=b.i(c);return new D(b.x,a.y);case Cg:b=b.i(c);return new D(a.x,b.y);default:case vg:return b.i(c)}};
function Kg(){tf.call(this);this.name="Resizing";this.Mc=(new K(1,1)).freeze();this.Zf=(new K(9999,9999)).freeze();this.ni=(new K(NaN,NaN)).freeze();this.Tk=o;this.ya=m;var a=new X;a.Ji=mc;a.Xa="Rectangle";a.pa=new K(6,6);a.fill="cyan";a.stroke="black";a.Ta=1;a.cursor="pointer";this.Cj=a;this.Xb=m;this.cq=0;this.mE=new E;this.Kw=new K;this.mA=new D;this.kw=new K(1,1)}t.J("ResizingTool",Kg);t.ua(Kg,tf);
Kg.prototype.updateAdornments=Kg.prototype.ki=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Ha){var c=a.HG;if(c!==m&&a.kb()&&a.canResize()&&c.qk()&&c.ta.aa()){b=a.sn(this.name);if(b===m){b=this.makeAdornment(c);b.od=this.name}if(b!==m){var d=c.yn();b.Qa=d;b.location=c.zb(dc);var e=b.placeholder;if(e!==m){var g=c.zl(),c=c.ja;e.pa=new K(c.width*g,c.height*g)}Lg(this,b,d)}}a.Zm(this.name,b)}else a.Ll(this.name)}};
Kg.prototype.makeAdornment=Kg.prototype.xy=function(a){var b=m,b=a.ba.dD;if(b===m){b=new of;b.type=Mg;var c=new Ng;c.Zi=h;b.add(c);b.add(this.makeHandle(a,dc));b.add(this.makeHandle(a,fc));b.add(this.makeHandle(a,qc));b.add(this.makeHandle(a,nc));b.add(this.makeHandle(a,rc));b.add(this.makeHandle(a,tc));b.add(this.makeHandle(a,vc));b.add(this.makeHandle(a,sc))}else{qf(b);b=b.copy();if(!(b instanceof of))return m}b.Kd=a;return b};
Kg.prototype.makeHandle=Kg.prototype.iG=function(a,b){var c=this.Br;if(c===m)return m;c=c.copy();c.qb=b;return c};
function Lg(a,b,c){if(b!==m)if(!Xb(b.qb)&&b.cursor!=="")a:{a=b.qb;Wb(a)&&(a=mc);if(a.x<=0)c=a.y<=0?c+225:a.y>=1?c+135:c+180;else if(a.x>=1)a.y<=0?c=c+315:a.y>=1&&(c=c+45);else if(a.y<=0)c=c+270;else if(a.y>=1)c=c+90;else break a;c<0?c=c+360:c>=360&&(c=c-360);b.cursor=c<22.5?"e-resize":c<67.5?"se-resize":c<112.5?"s-resize":c<157.5?"sw-resize":c<202.5?"w-resize":c<247.5?"nw-resize":c<292.5?"n-resize":c<337.5?"ne-resize":"e-resize"}else if(b instanceof v)for(b=b.elements;b.next();)Lg(a,b.value,c)}
t.defineProperty(Kg,{Br:"handleArchetype"},r("Cj"),function(a){a&&t.c(a,Q,Kg,"handleArchetype");this.Cj=a});t.m(Kg,{handle:"handle"},r("Xb"));t.m(Kg,{Kd:"adornedObject"},r("ya"));Kg.prototype.canStart=Kg.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Pa||!a.hn||!a.H.left?o:this.findToolHandleAt(a.ic.F,this.name)!==m?h:o};
Kg.prototype.doActivate=Kg.prototype.bi=function(){var a=this.b;if(a!==m){this.Xb=this.findToolHandleAt(a.ic.F,this.name);if(this.Xb!==m){this.ya=this.Xb.ba.Kd;this.cq=this.ya.Qa;this.mE.set(this.ya.ja);this.mA.set(this.ya.ba.location);this.Kw.set(this.ya.pa);this.kw=this.computeCellSize();this.Mc=this.computeMinSize();this.Zf=this.computeMaxSize();a.Gc=h;this.Kb(this.name);this.S=h}}};
Kg.prototype.doDeactivate=Kg.prototype.lk=function(){var a=this.b;if(a!==m){this.gj();this.ya=this.Xb=m;this.S=a.Gc=o}};Kg.prototype.doCancel=Kg.prototype.Ri=function(){this.ya.pa=this.Kw;this.ya.ba.location=this.mA;this.stopTool()};Kg.prototype.doMouseMove=Kg.prototype.eh=function(){var a=this.b;if(this.S&&a!==m){var b=this.Mc,c=this.Zf,d=this.kw,e=this.ya.YB(a.H.F),g=this.ya.xn;if(g===Og)g=this.ya.za.Mb;b=this.computeResize(e,this.Xb.qb,b,c,d,!(g===Pg||g===Qg||a.H.shift));this.resize(b);Rg(a)}};
Kg.prototype.doMouseUp=Kg.prototype.Oe=function(){var a=this.b;if(this.S&&a!==m){var b=this.Mc,c=this.Zf,d=this.kw,e=this.ya.YB(a.H.F),g=this.ya.xn;if(g===Og)g=this.ya.za.Mb;b=this.computeResize(e,this.Xb.qb,b,c,d,!(g===Pg||g===Qg||a.H.shift));this.resize(b);a.Xi();this.te=this.name;a.na("PartResized",this.ya,this.Kw)}this.stopTool()};
Kg.prototype.resize=Kg.prototype.fK=function(a){var b=this.b;if(b!==m){var c=this.ya.ba,d=c.position.copy(),e=this.ya.ja.copy(),g=this.ya.yn();g>=360?g=g-360:g<0&&(g=g+360);var i=Math.PI*g/180,j=Math.cos(i),i=Math.sin(i),k=a.width-e.width,e=a.height-e.height,l=g>90&&g<270?1:0;d.x=d.x+((a.x+k*l)*j-(a.y+e*(g>0&&g<180?1:0))*i);d.y=d.y+((a.x+k*(g>180&&g<360?1:0))*i+(a.y+e*l)*j);this.ya.pa=a.size;c.ci();c.position=d;sf(b)}};
Kg.prototype.computeResize=Kg.prototype.gI=function(a,b,c,d,e,g){Wb(b)&&(b=mc);var i=this.ya.ja,j=i.x,k=i.y,l=i.x+i.width,n=i.y+i.height,q=1;if(!g){var q=i.width,p=i.height;q<=0&&(q=1);p<=0&&(p=1);q=p/q}a=xd(a.x,a.y,j,k,e.width,e.height);e=i.copy();if(b.x<=0)if(b.y<=0){e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=Math.max(l-e.x,c.width);e.y=Math.max(a.y,n-d.height);e.y=Math.min(e.y,n-c.height);e.height=Math.max(n-e.y,c.height);if(!g){a=e.height/e.width;if(q<a){e.height=q*e.width;
e.y=n-e.height}else{e.width=e.height/q;e.x=l-e.width}}}else if(b.y>=1){e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=Math.max(l-e.x,c.width);e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){a=e.height/e.width;if(q<a)e.height=q*e.width;else{e.width=e.height/q;e.x=l-e.width}}}else{e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=l-e.x;if(!g){e.height=q*e.width;e.y=k+0.5*(n-k-e.height)}}else if(b.x>=1)if(b.y<=0){e.width=Math.max(Math.min(a.x-j,d.width),c.width);
e.y=Math.max(a.y,n-d.height);e.y=Math.min(e.y,n-c.height);e.height=Math.max(n-e.y,c.height);if(!g){a=e.height/e.width;if(q<a){e.height=q*e.width;e.y=n-e.height}else e.width=e.height/q}}else if(b.y>=1){e.width=Math.max(Math.min(a.x-j,d.width),c.width);e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){a=e.height/e.width;q<a?e.height=q*e.width:e.width=e.height/q}}else{e.width=Math.max(Math.min(a.x-j,d.width),c.width);if(!g){e.height=q*e.width;e.y=k+0.5*(n-k-e.height)}}else if(b.y<=0){e.y=Math.max(a.y,
n-d.height);e.y=Math.min(e.y,n-c.height);e.height=n-e.y;if(!g){e.width=e.height/q;e.x=j+0.5*(l-j-e.width)}}else if(b.y>=1){e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){e.width=e.height/q;e.x=j+0.5*(l-j-e.width)}}return e};Kg.prototype.computeMinSize=Kg.prototype.dI=function(){var a=this.ya.Td.copy(),b=this.Td;if(!isNaN(b.width)&&b.width>a.width)a.width=b.width;if(!isNaN(b.height)&&b.height>a.height)a.height=b.height;return a};
Kg.prototype.computeMaxSize=Kg.prototype.cI=function(){var a=this.ya.Dd.copy(),b=this.Dd;if(!isNaN(b.width)&&b.width<a.width)a.width=b.width;if(!isNaN(b.height)&&b.height<a.height)a.height=b.height;return a};
Kg.prototype.computeCellSize=Kg.prototype.aI=function(){var a=new K(NaN,NaN),b=this.ya.ba;if(b){var c=b.eD;if(!isNaN(c.width)&&c.width>0)a.width=c.width;if(!isNaN(c.height)&&c.height>0)a.height=c.height}c=this.ik;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&!isNaN(c.height)&&c.height>0)a.height=c.height;b=this.b;if((isNaN(a.width)||isNaN(a.height))&&b){c=b.Rb.fe;if(c!==m&&c.Dn){c=c.gy;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&
!isNaN(c.height)&&c.height>0)a.height=c.height}b=b.Ku;if(b!==m&&b.visible&&this.Dn){c=b.Ar;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&!isNaN(c.height)&&c.height>0)a.height=c.height}}if(isNaN(a.width)||a.width===0||a.width===Infinity)a.width=1;if(isNaN(a.height)||a.height===0||a.height===Infinity)a.height=1;return a};t.a(Kg,"minSize",Kg.prototype.Td);
t.defineProperty(Kg,{Td:"minSize"},r("Mc"),function(a){if(!this.Mc.z(a)){s&&t.c(a,K,Kg,"minSize");if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;this.Mc.Ua(a)}});t.a(Kg,"maxSize",Kg.prototype.Dd);t.defineProperty(Kg,{Dd:"maxSize"},r("Zf"),function(a){if(!this.Zf.z(a)){s&&t.c(a,K,Kg,"maxSize");if(isNaN(a.width))a.width=Infinity;if(isNaN(a.height))a.height=Infinity;this.Zf.Ua(a)}});t.a(Kg,"cellSize",Kg.prototype.ik);
t.defineProperty(Kg,{ik:"cellSize"},r("ni"),function(a){if(!this.ni.z(a)){s&&t.c(a,K,Kg,"cellSize");this.ni.Ua(a)}});t.a(Kg,"isGridSnapEnabled",Kg.prototype.Dn);t.defineProperty(Kg,{Dn:"isGridSnapEnabled"},r("Tk"),function(a){if(this.Tk!==a){t.e(a,"boolean",Kg,"isGridSnapEnabled");this.Tk=a}});
function Sg(){tf.call(this);this.name="Rotating";this.Yw=45;this.Xw=2;this.ya=m;var a=new X;a.Xa="Ellipse";a.pa=new K(6,6);a.fill="yellow";a.stroke="black";a.Ta=1;a.cursor="pointer";this.Cj=a;this.Xb=m;this.cq=0;this.rA=new D}t.J("RotatingTool",Sg);t.ua(Sg,tf);
Sg.prototype.updateAdornments=Sg.prototype.ki=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Ha){var c=a.LG;if(c!==m&&a.kb()&&a.canRotate()&&c.qk()&&c.ta.aa()){b=a.sn(this.name);if(b===m){b=this.makeAdornment(c);b.od=this.name}if(b!==m){b.Qa=c.yn();var d=m,e=m;if(c===a||c===a.Ab){d=a.Ab;e=a.yf}else{d=c;e=mc}for(var g=d.ja,e=new D(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==m&&d!==c;){d.transform.Bb(e);d=d.Y}d=e.y;e=Math.max(e.x-c.ja.width,0);b.yf=mc;b.location=c.zb(new J(1,0,50+e,d))}}a.Zm(this.name,
b)}else a.Ll(this.name)}};Sg.prototype.makeAdornment=Sg.prototype.xy=function(a){var b=m,b=a.ba.iD;if(b===m){b=new of;b.type=Tg;var c=this.Br;c!==m&&b.add(c.copy())}else{qf(b);b=b.copy();if(!(b instanceof of))return m}b.Kd=a;return b};t.defineProperty(Sg,{Br:"handleArchetype"},r("Cj"),function(a){a&&t.c(a,Q,Sg,"handleArchetype");this.Cj=a});t.m(Sg,{handle:"handle"},r("Xb"));t.m(Sg,{Kd:"adornedObject"},r("ya"));
Sg.prototype.canStart=Sg.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Pa||!a.jn||!a.H.left?o:this.findToolHandleAt(a.ic.F,this.name)!==m?h:o};Sg.prototype.doActivate=Sg.prototype.bi=function(){var a=this.b;if(a!==m){this.Xb=this.findToolHandleAt(a.ic.F,this.name);if(this.Xb!==m){this.ya=this.Xb.ba.Kd;var b=this.ya.ba,c=b.Ab;this.rA=this.ya===b||this.ya===c?c.zb(b.yf):this.ya.zb(mc);this.cq=this.ya.Qa;a.Gc=h;this.Kb(this.name);this.S=h}}};
Sg.prototype.doDeactivate=Sg.prototype.lk=function(){var a=this.b;if(a!==m){this.gj();this.ya=this.Xb=m;this.S=a.Gc=o}};Sg.prototype.doCancel=Sg.prototype.Ri=function(){this.rotate(this.cq);this.stopTool()};Sg.prototype.doMouseMove=Sg.prototype.eh=function(){var a=this.b;if(this.S&&a!==m){a=this.computeRotate(a.H.F);this.rotate(a)}};
Sg.prototype.doMouseUp=Sg.prototype.Oe=function(){var a=this.b;if(this.S&&a!==m){var b=this.computeRotate(a.H.F);this.rotate(b);a.Xi();this.te=this.name;a.na("PartRotated",this.ya,this.cq)}this.stopTool()};Sg.prototype.rotate=Sg.prototype.rotate=function(a){if(this.ya!==m){this.ya.Qa=a;sf(this.b)}};
Sg.prototype.computeRotate=Sg.prototype.hI=function(a){var a=this.rA.Zh(a),b=this.ya.Y;if(b){a=a-b.yn();a>=360?a=a-360:a<0&&(a=a+360)}var b=Math.min(Math.abs(this.wD),180),c=Math.min(Math.abs(this.vD),b/2);!this.b.H.shift&&(b>0&&c>0)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));a>=360?a=a-360:a<0&&(a=a+360);return a};t.a(Sg,"snapAngleMultiple",Sg.prototype.wD);
t.defineProperty(Sg,{wD:"snapAngleMultiple"},r("Yw"),function(a){if(this.Yw!==a){s&&t.e(a,"number",Sg,"snapAngleMultiple");this.Yw=a}});t.a(Sg,"snapAngleEpsilon",Sg.prototype.vD);t.defineProperty(Sg,{vD:"snapAngleEpsilon"},r("Xw"),function(a){if(this.Xw!==a){s&&t.e(a,"number",Sg,"snapAngleEpsilon");this.Xw=a}});function Ug(){tf.call(this);this.name="ClickSelecting"}t.J("ClickSelectingTool",Ug);t.ua(Ug,tf);
Ug.prototype.canStart=Ug.prototype.qf=function(){return!this.isEnabled||this.b===m||this.isBeyondDragSize()?o:h};Ug.prototype.doMouseUp=Ug.prototype.Oe=function(){if(this.S){this.standardMouseSelect();this.standardMouseClick()}this.stopTool()};function Vg(){tf.call(this);this.name="Action";this.Xl=m}t.J("ActionTool",Vg);t.ua(Vg,tf);
Vg.prototype.canStart=Vg.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m)return o;var b=a.H,c=a.Sc(b.F,function(a){for(;a.Y!==m;){if(a.Mu)return a;a=a.Y}return m},function(a){return a.Mu});if(c!==m){this.Xl=c;a.em=a.Sc(b.F,m,m);return h}return o};Vg.prototype.doMouseDown=Vg.prototype.xu=function(){if(this.S){var a=this.b.H,b=this.Xl;if(b!==m){a.gd=b;b.sx!==m&&b.sx(a,b)}}else this.canStart()&&this.doActivate()};
Vg.prototype.doMouseMove=Vg.prototype.eh=function(){if(this.S){var a=this.b.H,b=this.Xl;if(b!==m){a.gd=b;b.tx!==m&&b.tx(a,b)}}};Vg.prototype.doMouseUp=Vg.prototype.Oe=function(){if(this.S){var a=this.b,b=a.H,c=this.Xl;if(c===m)return;b.gd=c;c.ux!==m&&c.ux(b,c);this.isBeyondDragSize()||uf(c,b,a)}this.stopTool()};Vg.prototype.doCancel=Vg.prototype.Ri=function(){var a=this.b;if(a!==m){var a=a.H,b=this.Xl;if(b===m)return;a.gd=b;b.rx!==m&&b.rx(a,b)}this.stopTool()};
Vg.prototype.doStop=Vg.prototype.Si=function(){this.Xl=m};function xa(){tf.call(this);this.name="ClickCreating";this.Rv=m;this.vw=h}t.J("ClickCreatingTool",xa);t.ua(xa,tf);xa.prototype.canStart=xa.prototype.qf=function(){if(!this.isEnabled||this.zx===m)return o;var a=this.b;if(a===m||(a.Pa||a.Rd)||!a.en||!a.H.left||this.isBeyondDragSize())return o;if(this.nC){if(a.H.Le!==2)return o}else if(a.H.Le!==1)return o;return a.va!==this&&a.tr(a.H.F,h)!==m?o:h};
xa.prototype.doMouseUp=xa.prototype.Oe=function(){var a=this.b;this.S&&a!==m&&this.insertPart(a.H.F);this.stopTool()};xa.prototype.insertPart=xa.prototype.jJ=function(a){var b=this.b;if(b!==m){var c=this.zx;if(c!==m){this.Kb(this.name);var d=m;if(c instanceof U||c.constructor===T){qf(c);d=c.copy();d instanceof T&&b.add(d)}else if(c!==m){c=b.L.on(c);if(c instanceof Object){b.L.gu(c);d=b.pg(c)}}if(d instanceof T){d.location=a;b.Ld&&b.select(d)}b.Xi();this.te=this.name;b.na("PartCreated",d);this.gj()}}};
t.a(xa,"archetypeNodeData",xa.prototype.zx);t.defineProperty(xa,{zx:"archetypeNodeData"},r("Rv"),function(a){if(this.Rv!==a){a!==m&&t.c(a,Object,xa,"archetypeNodeData");this.Rv=a}});t.a(xa,"isDoubleClick",xa.prototype.nC);t.defineProperty(xa,{nC:"isDoubleClick"},r("vw"),function(a){if(this.vw!==a){t.e(a,"boolean",xa,"isDoubleClick");this.vw=a}});
function Wg(){tf.call(this);this.name="ContextMenu";this.Az=m;this.cA=new D;this.hm=m;if(t.bx===h){this.hm=new of;this.cw=m;var a=this;this.KA=function(){a.stopTool()};if(t.Dz===o){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 6px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();
return o},o);b.addEventListener("selectstart",function(a){a.preventDefault();return o},o);c.addEventListener("contextmenu",function(a){a.preventDefault();return o},o);if(document.body){document.body.appendChild(b);document.body.appendChild(c)}t.zs=b;t.ys=c;t.Dz=h}}}t.J("ContextMenuTool",Wg);t.ua(Wg,tf);Wg.prototype.canStart=Wg.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||this.isBeyondDragSize()||!a.H.right?o:this.hm!==m||this.findObjectWithContextMenu()!==m?h:o};
Wg.prototype.doStart=Wg.prototype.Ux=function(){var a=this.b;a!==m&&this.cA.set(a.ic.F)};Wg.prototype.doStop=Wg.prototype.Si=function(){this.hideDefaultContextMenu();this.hideContextMenu()};Wg.prototype.findObjectWithContextMenu=Wg.prototype.KI=function(){var a=this.b;if(a===m)return m;var b=a.Sc(a.H.F,m,function(a){return!a.xa.ed});if(b!==m){for(a=b;a!==m;){var c=a.contextMenu;if(c!==m)return a;a=a.Y}if(this.hm!==m)return b.ba}else{c=a.contextMenu;if(c!==m)return a}return m};
Wg.prototype.doActivate=Wg.prototype.bi=aa();Wg.prototype.doMouseDown=Wg.prototype.xu=function(){this.S&&Xg(this,o)};Wg.prototype.doMouseUp=Wg.prototype.Oe=function(){if(!this.S&&this.canStart())this.S=h;Xg(this,h)};
function Xg(a,b){if(a.ee===m){a.standardMouseSelect();var c=a.findObjectWithContextMenu();if(c!==m){var d=c.contextMenu;d!==m?a.showContextMenu(d,c instanceof Q?c:m):a.showDefaultContextMenu()}else a.showDefaultContextMenu()}else{c=a.b;d=c.Sc(c.H.F,m,m);if(d!==m&&d.gi(a.ee)){a.standardMouseClick(m,m);a.stopTool()}else{a.stopTool();b?c.va.doMouseUp():c.va.doMouseDown()}}}Wg.prototype.doMouseMove=Wg.prototype.eh=function(){this.S&&this.standardMouseOver()};
Wg.prototype.showContextMenu=Wg.prototype.lK=function(a,b){t.c(a,of,Wg,"showContextMenu:contextmenu");b!==m&&t.c(b,Q,Wg,"showContextMenu:obj");var c=this.b;if(c!==m){a!==this.ee&&this.hideContextMenu();a.Cd="Tool";a.tk=o;c.add(a);if(b!==m){var d=m,e=b.vr();if(e!==m)d=e.data;a.Kd=b;a.data=d}else a.data=c.L;a.ci();this.positionContextMenu(a,b);this.ee=a;sf(c)}};
Wg.prototype.positionContextMenu=Wg.prototype.UJ=function(a){var b=this.b;if(b!==m){var c=b.H.F.copy(),d=a.la,b=b.ob;if(c.x+d.width>b.right)c.x=c.x-(d.width+5);if(c.y+d.height>b.bottom)c.y=c.y-(d.height+5);a.position=c}};Wg.prototype.hideContextMenu=Wg.prototype.cJ=function(){var a=this.b;if(a!==m&&this.ee!==m){this.ee.data=m;this.ee.Kd=m;a.remove(this.ee);this.ee=m;this.standardMouseOver();sf(a)}};
Wg.prototype.initializeDefaultButtons=Wg.prototype.fJ=function(){if(this.b===m)return m;var a=new z,b=this.b.Od;a.add({text:"Copy",rf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",rf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",rf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",rf:function(a){b.pasteSelection(a.H.F)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",rf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",rf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",rf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",rf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",rf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Reset Zoom",rf:function(){b.resetZoom()},
visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",rf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",rf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",rf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});return a};
Wg.prototype.showDefaultContextMenu=Wg.prototype.mK=function(){var a=this.b;if(a!==m){if(this.cw===m)this.cw=this.initializeDefaultButtons();this.hm!==this.ee&&this.hideContextMenu();t.zs.innerHTML="";t.ys.addEventListener("click",this.KA,o);var b=this,c=document.createElement("ul");c.className="defaultCXul";t.zs.appendChild(c);c.innerHTML="";for(var d=this.cw.f;d.next();){var e=d.value,g=e.text,i=e.visible;if(typeof i!=="function"||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.cE=e.rf;j.addEventListener("click",function(){this.cE(a);b.stopTool()},o);j.textContent=g;i.appendChild(j);c.appendChild(i)}}t.zs.style.display="block";t.ys.style.display="block";this.ee=this.hm}};Wg.prototype.hideDefaultContextMenu=Wg.prototype.dJ=function(){if(this.ee!==m&&this.ee===this.hm){t.zs.style.display="none";t.ys.style.display="none";t.ys.removeEventListener("click",this.KA,o);this.ee=m}};t.a(Wg,"currentContextMenu",Wg.prototype.ee);
t.defineProperty(Wg,{ee:"currentContextMenu"},r("Az"),ba("Az"));t.m(Wg,{LJ:"mouseDownPoint"},r("cA"));function Yg(){tf.call(this);this.name="DragSelecting";this.im=175;this.Yz=o;var a=new T;a.Cd="Tool";a.tk=o;var b=new X;b.name="Shape";b.Xa="Rectangle";b.fill=m;b.stroke="magenta";b.position=new D(0,0);a.add(b);this.am=a}t.J("DragSelectingTool",Yg);t.ua(Yg,tf);
Yg.prototype.canStart=Yg.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||!a.Ld)return o;var b=a.H;return!b.left||a.va!==this&&(!this.isBeyondDragSize()||b.timestamp-a.ic.timestamp<this.vu||a.tr(b.F,h)!==m)?o:h};Yg.prototype.doActivate=Yg.prototype.bi=function(){var a=this.b;if(a!==m){this.S=h;a.Gc=h;a.gb=h;a.add(this.lg)}};Yg.prototype.doDeactivate=Yg.prototype.lk=function(){var a=this.b;if(a!==m){a.remove(this.lg);a.gb=o;this.S=a.Gc=o;sf(a)}};
Yg.prototype.doMouseMove=Yg.prototype.eh=function(){var a=this.b;if(a!==m&&this.S&&this.lg!==m){var b=this.computeBoxBounds();this.lg.Pe("Shape").pa=b.size;this.lg.position=b.position;sf(a)}};Yg.prototype.doMouseUp=Yg.prototype.Oe=function(){if(this.S){var a=this.b;a.remove(this.lg);try{a.uc="wait";this.selectInRect(this.computeBoxBounds())}finally{a.uc=""}}this.stopTool()};Yg.prototype.computeBoxBounds=Yg.prototype.$H=function(){var a=this.b;return a===m?new E(0,0,0,0):new E(a.ic.F,a.H.F)};
Yg.prototype.selectInRect=Yg.prototype.jK=function(a){var b=this.b;if(b!==m){var c=b.H;b.na("ChangingSelection");a=b.yl(a,m,function(a){return a instanceof T&&a.Ex()},this.rC);if(c.jk)if(c.shift)for(a=a.f;a.next();){c=a.value;if(c.Ha)c.Ha=o}else for(a=a.f;a.next();){c=a.value;c.Ha=!c.Ha}else{if(!c.shift){for(var d=new z(T),e=b.selection.f;e.next();){c=e.value;a.contains(c)||d.add(c)}for(d=d.f;d.next();){c=d.value;c.Ha=o}}for(a=a.f;a.next();){c=a.value;if(!c.Ha)c.Ha=h}}b.na("ChangedSelection")}};
t.a(Yg,"delay",Yg.prototype.vu);t.defineProperty(Yg,{vu:"delay"},r("im"),ba("im"));t.a(Yg,"isPartialInclusion",Yg.prototype.rC);t.defineProperty(Yg,{rC:"isPartialInclusion"},r("Yz"),ba("Yz"));t.a(Yg,"box",Yg.prototype.lg);t.defineProperty(Yg,{lg:"box"},r("am"),ba("am"));function Zg(){tf.call(this);this.name="Panning";this.oA=new D;this.mi=o;var a=this;this.yD=function(){document.removeEventListener("scroll",a.yD,o);a.stopTool()}}t.J("PanningTool",Zg);t.ua(Zg,tf);
Zg.prototype.canStart=Zg.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||!a.Je&&!a.Ke||!a.H.left||a.va!==this&&!this.isBeyondDragSize()?o:h};Zg.prototype.doActivate=Zg.prototype.bi=function(){var a=this.b;if(a!==m){if(this.mi){a.H.bubbles=h;document.addEventListener("scroll",this.yD,o)}else{a.uc="move";a.Gc=h;this.oA=a.position}this.S=h}};Zg.prototype.doDeactivate=Zg.prototype.lk=function(){var a=this.b;if(a!==m){a.uc="";this.S=a.Gc=o}};
Zg.prototype.doCancel=Zg.prototype.Ri=function(){var a=this.b;if(a!==m){a.position=this.oA;a.Gc=o}this.stopTool()};Zg.prototype.doMouseMove=Zg.prototype.eh=function(){var a=this.b;if(this.S&&a)if(this.mi)a.H.bubbles=h;else{var b=a.position,c=a.ic.F,d=a.H.F,e=b.x+c.x-d.x,c=b.y+c.y-d.y;if(!a.Je)e=b.x;if(!a.Ke)c=b.y;a.position=new D(e,c);a.update()}};t.a(Zg,"bubbles",Zg.prototype.bubbles);t.defineProperty(Zg,{bubbles:"bubbles"},r("mi"),ba("mi"));
function $g(){tf.call(this);this.name="TextEditing";this.dw=this.Cz=this.kx=m;this.ax=ah;this.Hi=m;this.cb=bh;this.Tj=m}t.J("TextEditingTool",$g);t.ua($g,tf);var ch;$g.LostFocus=ch=t.l($g,"LostFocus",0);var dh;$g.MouseDown=dh=t.l($g,"MouseDown",1);var eh;$g.Tab=eh=t.l($g,"Tab",2);var fh;$g.Enter=fh=t.l($g,"Enter",3);$g.SingleClick=t.l($g,"SingleClick",0);var ah;$g.SingleClickSelected=ah=t.l($g,"SingleClickSelected",1);
var bh=t.l($g,"StateNone",0),gh=t.l($g,"StateActive",1),hh=t.l($g,"StateEditing",2),mh=t.l($g,"StateEditing2",3),nh=t.l($g,"StateValidating",4),oh=t.l($g,"StateValidated",5);t.a($g,"textBlock",$g.prototype.If);t.defineProperty($g,{If:"textBlock"},r("kx"),ba("kx"));t.a($g,"currentTextEditor",$g.prototype.mg);t.defineProperty($g,{mg:"currentTextEditor"},r("Cz"),ba("Cz"));t.a($g,"defaultTextEditor",$g.prototype.zB);t.defineProperty($g,{zB:"defaultTextEditor"},r("dw"),ba("dw"));t.a($g,"starting",$g.prototype.xD);
t.defineProperty($g,{xD:"starting"},r("ax"),function(a){if(this.ax!==a){s&&t.Va(a,$g,$g,"starting");this.ax=a}});$g.prototype.canStart=$g.prototype.qf=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||a.Pa||!a.H.left||this.isBeyondDragSize())return o;a=a.Sc(a.H.F,m,function(a){return a instanceof ua});if(!(a instanceof ua)||!a.yu)return o;a=a.ba;return a===m||this.xD===ah&&!a.Ha?o:h};$g.prototype.doStart=$g.prototype.Ux=function(){!this.S&&this.If!==m&&this.doActivate()};
$g.prototype.doActivate=$g.prototype.bi=function(){if(!this.S){var a=this.b;if(a!==m){var b=this.If;if(b===m){b=a.Sc(a.H.F,function(a){return a instanceof ua?a:m});b=b instanceof ua?b:m}if(b!==m){this.If=b;if(b.ba!==m){this.S=h;this.cb=gh;this.Kb(this.name);var c=this.zB,d=o;if(b.az!==m)c=b.az;c!==m&&!c.pz&&(d=h);if(c===m){c=document.createElement("textarea");c.pz=h;this.dw=c;var e=this.If.copy();c.addEventListener("input",function(){e.text=this.value;ph(e,Infinity,Infinity);this.style.width=20+e.la.width*
this.ZG+"px";this.rows=e.Yk},o);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==m)if(b==13)c.qx(fh);else{if(b==9){c.qx(eh);a.preventDefault();return o}if(b==27){c.doCancel();c.b&&c.b.focus()}}},o);c.addEventListener("focus",function(){var a=this.textEditingTool;if(a.cb===gh)a.cb=hh;else if(a.cb===oh)a.cb=mh;else if(a.cb===mh)a.cb=hh},o)}if(c.pz){var g=b.zb(mc),i=a.position,j=a.scale,k=b.zl()*j,l=b.ja.width*k;qh(b,b.font);g=new D((g.x-i.x)*j,(g.y-i.y)*j);c.value=
b.text;a.ai.style.font=b.font;c.style.font="inherit";c.style.fontSize=k*100+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.Yk;a.ai.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.ai.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.ZG=k;if(d&&c.onActivate!==f)c.onActivate();this.mg=c;c.focus()}}}}};
$g.prototype.doCancel=$g.prototype.Ri=function(){if(this.Tj!==m){this.mg.style.border=this.Tj;this.Tj=m}this.stopTool()};$g.prototype.doMouseUp=$g.prototype.Oe=function(){!this.S&&this.canStart()&&this.doActivate()};$g.prototype.doMouseDown=$g.prototype.xu=function(){this.S&&this.qx(dh)};
$g.prototype.acceptText=$g.prototype.qx=function(a){switch(a){case dh:if(this.cb===oh||this.cb===mh)this.mg.focus();else if(this.cb===gh||this.cb===hh){this.cb=nh;rh(this)}break;case ch:case fh:case eh:if(fh===a&&this.kx.Nu===h)break;if(this.cb===gh||this.cb===hh){this.cb=nh;rh(this)}}};
function rh(a){if(a.If!==m&&a.mg!==m){var b=a.If,c=a.If.text,d=a.mg.value,e="",e=typeof d==="function"?d():d;if(!a.isValidText(a.If,c,e)){a.cb=hh;b.qr!==m&&b.qr(a,c,e);if(a.Tj===m){a.Tj=a.mg.style.border;a.mg.style.border="3px solid red"}a.mg.focus();return}a.cb=oh;if(c!==e)a.If.text=e;a.te=a.name;b=a.b;b!==m&&b.na("TextEdited",a.If,c);a.stopTool();b!==m&&b.focus()}if(a.Tj!==m){a.mg.style.border=a.Tj;a.Tj=m}}
$g.prototype.doDeactivate=$g.prototype.lk=function(){var a=this.b;if(a!==m){this.S&&this.gj();this.cb=bh;this.If=m;if(this.mg!==m){var b=this.mg;if(b.onDeactivate!==f)b.onDeactivate();b!==m&&a.ai.removeChild(b)}this.S=o}};$g.prototype.isValidText=$g.prototype.uJ=function(a,b,c){t.c(a,ua,$g,"isValidText:textblock");var d=this.fs;if(d!==m&&!d(a,b,c))return o;d=a.fs;return d!==m&&!d(a,b,c)?o:h};t.a($g,"textValidation",$g.prototype.fs);
t.defineProperty($g,{fs:"textValidation"},r("Hi"),function(a){if(this.Hi!==a)this.Hi=a});function mf(){tf.call(this);this.name="ToolManager";this.dA=new z(tf);this.eA=new z(tf);this.fA=new z(tf);this.Qz=this.Rz=1E3;this.Gs=this.aw=m;this.gA=wf}t.J("ToolManager",mf);t.ua(mf,tf);var wf;mf.WheelScroll=wf=t.l(mf,"WheelScroll",0);var vf;mf.WheelZoom=vf=t.l(mf,"WheelZoom",1);t.a(mf,"mouseWheelBehavior",mf.prototype.Gl);t.defineProperty(mf,{Gl:"mouseWheelBehavior"},r("gA"),ba("gA"));
mf.prototype.initializeStandardTools=mf.prototype.gJ=function(){this.OA=new Vg;this.YC=new rg;this.yC=new ug;this.gD=new Kg;this.kD=new Sg;this.AC=new wa;this.fe=new yf;this.HB=new Yg;this.QC=new Zg;this.lB=new Wg;this.iv=new $g;this.hB=new xa;this.iB=new Ug};
mf.prototype.doMouseDown=mf.prototype.xu=function(){var a=this.b;if(a!==m){var b=a.ha;b.Gx&&b.xk!==0&&t.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ne.length,c=0;c<b;c++){var d=this.ne.V(c);if(d.canStart()){a.va=d;if(a.va===d){d.S||d.doActivate();d.doMouseDown()}return}}if(a.H.button===1)if(this.Gl===wf)this.Gl=vf;else if(this.Gl===vf)this.Gl=wf;this.doActivate();this.standardWaitAfter(this.jy)}};
mf.prototype.doMouseMove=mf.prototype.eh=function(){var a=this.b;if(a!==m){if(this.S)for(var b=this.rg.length,c=0;c<b;c++){var d=this.rg.V(c);if(d.canStart()){a.va=d;if(a.va===d){d.S||d.doActivate();d.doMouseMove()}return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.S?this.jy:this.hC)}};mf.prototype.doCurrentObjectChanged=mf.prototype.sF=function(a,b){var c=this.kk;c!==m&&!(b!==m&&(b===c||b.gi(c)))&&this.hideToolTip()};
mf.prototype.doWaitAfter=mf.prototype.wF=function(){if(this.b&&this.b.oa){this.doMouseHover();this.S||this.doToolTip()}};mf.prototype.doMouseHover=mf.prototype.wI=function(){var a=this.b;if(a!==m){var b=a.H;if(b.gd===m)b.gd=a.Sc(b.F,m,m);var c=b.gd;if(c!==m)for(;c!==m;){a=this.S?c.Nr:c.Pr;if(a!==m){a(b,c);if(b.zd)break}c=c.Y}else{a=this.S?a.Nr:a.Pr;a!==m&&a(b)}}};
mf.prototype.doToolTip=mf.prototype.xI=function(){var a=this.b;if(a!==m){var b=a.H;if(b.gd===m)b.gd=a.Sc(b.F,m,m);b=b.gd;if(b!==m){if(!(b===this.kk||b.gi(this.kk))){for(;b!==m;){a=b.is;if(a!==m){this.showToolTip(a,b);return}b=b.Y}this.hideToolTip()}}else{a=a.is;a!==m?this.showToolTip(a,m):this.hideToolTip()}}};
mf.prototype.showToolTip=mf.prototype.nK=function(a,b){t.c(a,of,mf,"showToolTip:tooltip");b!==m&&t.c(b,Q,mf,"showToolTip:obj");var c=this.b;if(c!==m){a!==this.kk&&this.hideToolTip();a.Cd="Tool";a.tk=o;c.add(a);if(b!==m&&b!==this.Gs){var d=m,e=b.ba;if(e!==m)d=e.data;a.Kd=b;a.data=d}else if(b===m)a.data=c.L;if(b===m||b!==this.Gs){a.ci();this.positionToolTip(a,b)}this.aw=a;this.Gs=b;sf(c)}};
mf.prototype.positionToolTip=mf.prototype.VJ=function(a){var b=this.b;if(b!==m){var c=b.H.F.copy(),d=a.la,b=b.ob;if(c.x+d.width>b.right)c.x=c.x-(d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};mf.prototype.hideToolTip=mf.prototype.QF=function(){if(this.kk!==m){var a=this.b;if(a!==m){this.kk.data=m;this.kk.Kd=m;a.remove(this.kk);this.Gs=this.aw=m;sf(a)}}};t.m(mf,{kk:"currentToolTip"},r("aw"));
mf.prototype.doMouseUp=mf.prototype.Oe=function(){this.cancelWaitAfter();if(this.S){var a=this.b;if(a===m)return;for(var b=this.sg.length,c=0;c<b;c++){var d=this.sg.V(c);if(d.canStart()){a.va=d;if(a.va===d){d.S||d.doActivate();d.doMouseUp()}return}}}this.doDeactivate()};mf.prototype.doMouseWheel=mf.prototype.tF=function(){this.standardMouseWheel()};mf.prototype.doKeyDown=mf.prototype.Sx=function(){var a=this.b;a!==m&&a.Od.doKeyDown()};
mf.prototype.doKeyUp=mf.prototype.Tx=function(){var a=this.b;a!==m&&a.Od.doKeyUp()};mf.prototype.doCancel=mf.prototype.Ri=function(){Bf!==m&&Bf.doCancel();tf.prototype.Ri.call(this)};mf.prototype.findTool=mf.prototype.Qe=function(a){t.e(a,"string",mf,"findTool:name");for(var b=this.ne.length,c=0;c<b;c++){var d=this.ne.V(c);if(d.name===a)return d}b=this.rg.length;for(c=0;c<b;c++){d=this.rg.V(c);if(d.name===a)return d}b=this.sg.length;for(c=0;c<b;c++){d=this.sg.V(c);if(d.name===a)return d}return m};
mf.prototype.replaceTool=mf.prototype.GG=function(a,b){t.e(a,"string",mf,"replaceTool:name");if(b!==m){t.c(b,tf,mf,"replaceTool:newtool");b.b&&b.b!==this.b&&t.g("Cannot share tools between Diagrams: "+b.toString());b.Ef(this.b)}for(var c=this.ne.length,d=0;d<c;d++){var e=this.ne.V(d);if(e.name===a){b!==m?this.ne.cv(d,b):this.ne.We(d);return e}}c=this.rg.length;for(d=0;d<c;d++){e=this.rg.V(d);if(e.name===a){b!==m?this.rg.cv(d,b):this.rg.We(d);return e}}c=this.sg.length;for(d=0;d<c;d++){e=this.sg.V(d);
if(e.name===a){b!==m?this.sg.cv(d,b):this.sg.We(d);return e}}return m};function sh(a,b,c,d){t.e(b,"string",mf,"replaceStandardTool:name");t.c(d,z,mf,"replaceStandardTool:list");if(c!==m){t.c(c,tf,mf,"replaceStandardTool:newtool");c.b&&c.b!==a.b&&t.g("Cannot share tools between Diagrams: "+c.toString());c.name=b;c.Ef(a.b)}a.Qe(b)?a.GG(b,c):c!==m&&d.add(c)}t.m(mf,{ne:"mouseDownTools"},r("dA"));t.m(mf,{rg:"mouseMoveTools"},r("eA"));t.m(mf,{sg:"mouseUpTools"},r("fA"));t.a(mf,"hoverDelay",mf.prototype.hC);
t.defineProperty(mf,{hC:"hoverDelay"},r("Rz"),ba("Rz"));t.a(mf,"holdDelay",mf.prototype.jy);t.defineProperty(mf,{jy:"holdDelay"},r("Qz"),ba("Qz"));t.a(mf,"actionTool",mf.prototype.OA);t.defineProperty(mf,{OA:"actionTool"},function(){return this.Qe("Action")},function(a){sh(this,"Action",a,this.ne)});t.a(mf,"relinkingTool",mf.prototype.YC);t.defineProperty(mf,{YC:"relinkingTool"},function(){return this.Qe("Relinking")},function(a){sh(this,"Relinking",a,this.ne)});t.a(mf,"linkReshapingTool",mf.prototype.yC);
t.defineProperty(mf,{yC:"linkReshapingTool"},function(){return this.Qe("LinkReshaping")},function(a){sh(this,"LinkReshaping",a,this.ne)});t.a(mf,"resizingTool",mf.prototype.gD);t.defineProperty(mf,{gD:"resizingTool"},function(){return this.Qe("Resizing")},function(a){sh(this,"Resizing",a,this.ne)});t.a(mf,"rotatingTool",mf.prototype.kD);t.defineProperty(mf,{kD:"rotatingTool"},function(){return this.Qe("Rotating")},function(a){sh(this,"Rotating",a,this.ne)});t.a(mf,"linkingTool",mf.prototype.AC);
t.defineProperty(mf,{AC:"linkingTool"},function(){return this.Qe("Linking")},function(a){sh(this,"Linking",a,this.rg)});t.a(mf,"draggingTool",mf.prototype.fe);t.defineProperty(mf,{fe:"draggingTool"},function(){return this.Qe("Dragging")},function(a){sh(this,"Dragging",a,this.rg)});t.a(mf,"dragSelectingTool",mf.prototype.HB);t.defineProperty(mf,{HB:"dragSelectingTool"},function(){return this.Qe("DragSelecting")},function(a){sh(this,"DragSelecting",a,this.rg)});t.a(mf,"panningTool",mf.prototype.QC);
t.defineProperty(mf,{QC:"panningTool"},function(){return this.Qe("Panning")},function(a){sh(this,"Panning",a,this.rg)});t.a(mf,"contextMenuTool",mf.prototype.lB);t.defineProperty(mf,{lB:"contextMenuTool"},function(){return this.Qe("ContextMenu")},function(a){sh(this,"ContextMenu",a,this.sg)});t.a(mf,"textEditingTool",mf.prototype.iv);t.defineProperty(mf,{iv:"textEditingTool"},function(){return this.Qe("TextEditing")},function(a){sh(this,"TextEditing",a,this.sg)});t.a(mf,"clickCreatingTool",mf.prototype.hB);
t.defineProperty(mf,{hB:"clickCreatingTool"},function(){return this.Qe("ClickCreating")},function(a){sh(this,"ClickCreating",a,this.sg)});t.a(mf,"clickSelectingTool",mf.prototype.iB);t.defineProperty(mf,{iB:"clickSelectingTool"},function(){return this.Qe("ClickSelecting")},function(a){sh(this,"ClickSelecting",a,this.sg)});
function Ze(){t.Lb(this);this.O=m;this.lb=new z(T);this.vb="";this.xw=o;this.Yg=this.sj=this.rj=this.qj=this.pj=this.nj=this.mj=this.oj=this.lj=this.uj=this.kj=this.tj=this.jj=this.ij=h;this.nE=[]}t.J("Layer",Ze);Ze.prototype.Ef=ba("O");
Ze.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(a<=0)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.lb.f;j.next();){var k=j.value.constructor;k===T?c++:k===U?d++:k===V?e++:k===W?g++:k===of&&i++}j="";c>0&&(j=j+(c+" Parts "));d>0&&(j=j+(d+" Nodes "));e>0&&(j=j+(e+" Groups "));g>0&&(j=j+(g+" Links "));i>0&&(j=j+(i+" Adornments "));if(a>1)for(c=this.lb.f;c.next();){d=c.value;j=j+("\n    "+d.toString(a-1));(e=d.data)&&t.jc(e)&&(j=j+(" #"+t.jc(e)));d instanceof U?j=j+(" "+Ie(e)):
d instanceof W&&(j=j+(" "+Ie(d.ia)+" "+Ie(d.ma)))}return b+" "+this.lb.count+": "+j};Ze.prototype.findObjectAt=Ze.prototype.Sc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.lb,e=o;this.b.ob.ka(a)&&(e=h);for(var g=new D,i=d.length;i--;){var j=d.V(i);if(!(e===h&&j.bf===o)&&j.kb()){lb(g.set(a),j.ce);j=j.Sc(g,b,c);if(j!==m){b!==m&&(j=b(j));if(j&&(c===m||c(j)))return j}}}return m};
Ze.prototype.findObjectsAt=Ze.prototype.vn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);!(d instanceof z)&&!(d instanceof ta)&&(d=new z(Q));var e=this.lb,g=o;this.b.ob.ka(a)&&(g=h);for(var i=new D,j=e.length;j--;){var k=e.V(j);if(!(g===h&&k.bf===o)&&k.kb()){lb(i.set(a),k.ce);if(k.vn(i,b,c,d)){b!==m&&(k=b(k));k&&(c===m||c(k))&&d.add(k)}}}return d};
Ze.prototype.findObjectsIn=Ze.prototype.yl=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=o);!(e instanceof z)&&!(e instanceof ta)&&(e=new z(Q));var g=this.lb,i=o;this.b.ob.rl(a)&&(i=h);for(var j=g.length;j--;){var k=g.V(j);if(!(i===h&&k.bf===o)&&k.kb()&&k.yl(a,b,c,d,e)){b!==m&&(k=b(k));k&&(c===m||c(k))&&e.add(k)}}return e};
Ze.prototype.findObjectsNear=Ze.prototype.wn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof z)&&!(e instanceof ta)&&(e=new z(Q));var g=this.lb,i=o;this.b.ob.ka(a)&&(i=h);for(var j=new D,k=g.length;k--;){var l=g.j[k];if(!(i===h&&l.bf===o)&&l.kb()){lb(j.set(a),l.ce);var n=new D(a.x+b,a.y);lb(n,l.ce);if(l.wn(j,n,c,d,e)){c!==m&&(l=c(l));l&&(d===m||d(l))&&e.add(l)}}}return e};ea=Ze.prototype;
ea.og=function(a,b){if(this.visible){var c=this.lb,d=b.ob,e=[];if(b.um)for(var g=c.length,i=0;i<g;i++){var j=c.j[i];j.lE=i;if(j instanceof W){(j.Ei===Rf||j.Ei===th)&&e.push(j);if(j.jl===o)continue}if(j.ta.ie(d)){j.og(a,b);j.bf=h}else j.bf=o}else{g=c.length;for(i=0;i<g;i++){j=c.j[i];if(j.bf){if(j instanceof W){(j.Ei===Rf||j.Ei===th)&&e.push(j);if(j.jl===o)continue}j.og(a,b)}}}this.nE=e}};ea.d=function(a,b,c,d,e){var g=this.b;g!==m&&g.pe(ue,a,this,b,c,d,e)};
ea.ok=function(a,b,c){var d=this.lb;b.w=this;if(a>=d.count)a=d.count;else if(d.V(a)===b)return-1;d.kc(a,b);b.Cr();d=this.b;d!==m&&(c?uh(d):d.ok(b));b instanceof V&&this.fv(b);return a};ea.Ad=function(a,b,c){var d=this.lb;if(a<0||a>=d.length){a=d.indexOf(b);if(a<0)return-1}else if(d.V(a)!==b){a=d.indexOf(b);if(a<0)return-1}b.Dr();d.We(a);d=this.b;d!==m&&(c?uh(d):d.Ad(b));b.w=m;return a};
ea.fv=function(a){for(;a!==m;){if(a.xa===this){var b=a;if(b.lc.next()){for(var c=-1,d=-1,e=this.lb.j,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b){c=i;if(d>=0)break}if(d<0&&j.Wa===b){d=i;if(c>=0)break}}d<0&&(d=0);if(d<c){e=this.lb;e.We(c);e.kc(d,b)}}}a=a.Wa}};ea.clear=function(){for(var a=this.lb.Jf(),b=a.length,c=0;c<b;c++){a[c].bf=o;this.Ad(-1,a[c])}};t.m(Ze,{cj:"parts"},function(){return this.lb.f});t.m(Ze,{QJ:"partsBackwards"},function(){return this.lb.En});t.m(Ze,{b:"diagram"},r("O"));
t.a(Ze,"name",Ze.prototype.name);t.defineProperty(Ze,{name:"name"},r("vb"),function(a){t.e(a,"string",Ze,"name");var b=this.vb;if(b!==a){var c=this.b;if(c!==m){b===""&&t.g("Cannot rename default Layer to: "+a);for(c=c.Fn;c.next();)c.value.name===a&&t.g("Layer.name is already present in this diagram: "+a)}this.vb=a;this.d("name",b,a)}});t.a(Ze,"isTemporary",Ze.prototype.ed);
t.defineProperty(Ze,{ed:"isTemporary"},r("xw"),function(a){var b=this.xw;if(b!==a){t.e(a,"boolean",Ze,"isTemporary");this.xw=a;this.d("isTemporary",b,a)}});t.a(Ze,"visible",Ze.prototype.visible);t.defineProperty(Ze,{visible:"visible"},r("Yg"),function(a){var b=this.Yg;if(b!==a){t.e(a,"boolean",Ze,"visible");this.Yg=a;this.d("visible",b,a);for(a=this.lb.f;a.next();)a.value.updateAdornments();a=this.b;a!==m&&uh(a)}});t.a(Ze,"allowCopy",Ze.prototype.Sh);
t.defineProperty(Ze,{Sh:"allowCopy"},r("ij"),function(a){var b=this.ij;if(b!==a){t.e(a,"boolean",Ze,"allowCopy");this.ij=a;this.d("allowCopy",b,a)}});t.a(Ze,"allowDelete",Ze.prototype.ek);t.defineProperty(Ze,{ek:"allowDelete"},r("jj"),function(a){var b=this.jj;if(b!==a){t.e(a,"boolean",Ze,"allowDelete");this.jj=a;this.d("allowDelete",b,a)}});t.a(Ze,"allowTextEdit",Ze.prototype.kn);
t.defineProperty(Ze,{kn:"allowTextEdit"},r("tj"),function(a){var b=this.tj;if(b!==a){t.e(a,"boolean",Ze,"allowTextEdit");this.tj=a;this.d("allowTextEdit",b,a)}});t.a(Ze,"allowGroup",Ze.prototype.dn);t.defineProperty(Ze,{dn:"allowGroup"},r("kj"),function(a){var b=this.kj;if(b!==a){t.e(a,"boolean",Ze,"allowGroup");this.kj=a;this.d("allowGroup",b,a)}});t.a(Ze,"allowUngroup",Ze.prototype.ln);
t.defineProperty(Ze,{ln:"allowUngroup"},r("uj"),function(a){var b=this.uj;if(b!==a){t.e(a,"boolean",Ze,"allowUngroup");this.uj=a;this.d("allowUngroup",b,a)}});t.a(Ze,"allowLink",Ze.prototype.ml);t.defineProperty(Ze,{ml:"allowLink"},r("lj"),function(a){var b=this.lj;if(b!==a){t.e(a,"boolean",Ze,"allowLink");this.lj=a;this.d("allowLink",b,a)}});t.a(Ze,"allowRelink",Ze.prototype.Ki);
t.defineProperty(Ze,{Ki:"allowRelink"},r("oj"),function(a){var b=this.oj;if(b!==a){t.e(a,"boolean",Ze,"allowRelink");this.oj=a;this.d("allowRelink",b,a)}});t.a(Ze,"allowMove",Ze.prototype.fk);t.defineProperty(Ze,{fk:"allowMove"},r("mj"),function(a){var b=this.mj;if(b!==a){t.e(a,"boolean",Ze,"allowMove");this.mj=a;this.d("allowMove",b,a)}});t.a(Ze,"allowPrint",Ze.prototype.fn);
t.defineProperty(Ze,{fn:"allowPrint"},r("nj"),function(a){var b=this.nj;if(b!==a){t.e(a,"boolean",Ze,"allowPrint");this.nj=a;this.d("allowPrint",b,a)}});t.a(Ze,"allowReshape",Ze.prototype.gn);t.defineProperty(Ze,{gn:"allowReshape"},r("pj"),function(a){var b=this.pj;if(b!==a){t.e(a,"boolean",Ze,"allowReshape");this.pj=a;this.d("allowReshape",b,a)}});t.a(Ze,"allowResize",Ze.prototype.hn);
t.defineProperty(Ze,{hn:"allowResize"},r("qj"),function(a){var b=this.qj;if(b!==a){t.e(a,"boolean",Ze,"allowResize");this.qj=a;this.d("allowResize",b,a)}});t.a(Ze,"allowRotate",Ze.prototype.jn);t.defineProperty(Ze,{jn:"allowRotate"},r("rj"),function(a){var b=this.rj;if(b!==a){t.e(a,"boolean",Ze,"allowRotate");this.rj=a;this.d("allowRotate",b,a)}});t.a(Ze,"allowSelect",Ze.prototype.Ld);
t.defineProperty(Ze,{Ld:"allowSelect"},r("sj"),function(a){var b=this.sj;if(b!==a){t.e(a,"boolean",Ze,"allowSelect");this.sj=a;this.d("allowSelect",b,a)}});
function A(a){function b(a){var b=a.toLowerCase(),c=new z("function");d.add(a,c);d.add(b,c);e.add(a,a);e.add(b,a)}t.Lb(this);t.Fz=[];this.Bc=h;this.Fe=17;var c=this;document.body!==m?vh(this):document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,o);vh(c)},o);this.yb=new z(Ze);this.BA=this.AA=this.DA=this.CA=this.Gb=this.yg=this.oa=m;this.pb=(new D(NaN,NaN)).freeze();this.Nb=1;this.mt=1E-4;this.ht=100;this.ae=new kb;this.eu=(new D(NaN,
NaN)).freeze();this.Os=(new E(NaN,NaN,NaN,NaN)).freeze();this.Gk=wh;this.Lk=cc;this.Fj=wh;this.rm=cc;this.Ts=this.Ss=dc;this.Ig=new ta(Q);this.ti=h;this.jm=new ra(W,E);this.Ro=h;this.aE=250;this.$D=1E3;this.wg=m;this.ss=(new Eb(16,16,16,16)).freeze();this.Gz=h;this.Xq=this.Xg=o;this.Yo=h;this.nx=o;this.Nz=16;this.Tf=new qe;this.pc=new qe;this.dc=new qe;this.oi=m;this.Vt=-1;this.cx=o;this.gw=new ra("string",z);this.fw=new ra("string","string");var d=new ra("string",z),e=new ra("string","string");b("BackgroundSingleClicked");
b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");
b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.gw=d;this.fw=e;this.vt=new ta(U);this.il=new ta(V);this.bt=new ta(W);this.lb=new ta(T);this.Zs=h;this.Tz=o;this.bu=eg;this.$v=this.ew=this.au=m;this.Fs="";this.Ko="auto";this.xh=this.Qh=this.Hh=this.pt=this.Ih=this.Jh=this.Kh=this.wh=this.yh=this.vh=m;this.Qk=h;this.Xv=m;this.Sk=this.Fi=this.rz=o;this.Aa=h;this.bg=m;var g=this;
this.aA=function(a){if(a.L===g.L&&g.Aa){g.Aa=o;try{var b=a.Rc;a.me===""&&b===ue&&xh(g,a.object,a.propertyName)}finally{g.Aa=h}}};this.bA=function(a){if(a.L===g.L&&g.Aa){g.Aa=o;try{var b=a.Rc,c=a.me;if(c!=="")if(b===ue)if(c==="linkFromKey"){var d=a.object,e=g.Ui(d);if(e!==m){var q=a.newValue,p=g.di(q);e.ia=p}}else if(c==="linkToKey"){d=a.object;e=g.Ui(d);if(e!==m){q=a.newValue;p=g.di(q);e.ma=p}}else if(c==="linkFromPortId"){d=a.object;e=g.Ui(d);if(e!==m){var u=a.newValue;if(typeof u==="string")e.hh=
u}}else if(c==="linkToPortId"){d=a.object;e=g.Ui(d);if(e!==m){u=a.newValue;if(typeof u==="string")e.ji=u}}else if(c==="nodeGroupKey"){var d=a.object,w=g.pg(d);if(w!==m){var B=a.newValue;if(B!==f){var F=g.di(B);w.Wa=F instanceof V?F:m}else w.Wa=m}}else if(c==="linkLabelKeys"){d=a.object;e=g.Ui(d);if(e!==m){var H=a.oldValue,x=a.newValue;if(t.isArray(H))for(var I=t.Eb(H),y=0;y<I;y++){var G=t.rb(H,y),p=g.di(G);if(p!==m)p.ke=m}if(t.isArray(x)){I=t.Eb(x);for(y=0;y<I;y++){G=t.rb(x,y);p=g.di(G);if(p!==m)p.ke=
e}}}}else if(c==="nodeCategory"){var d=a.object,fa=g.pg(d),R=a.newValue;if(fa!==m&&typeof R==="string")fa.od=R}else if(c==="linkCategory"){var d=a.object,S=g.Ui(d),R=a.newValue;if(S!==m&&typeof R==="string")S.od=R}else if(c==="nodeDataArray"){var da=a.oldValue;yh(g,da);var ma=a.newValue;zh(g,ma)}else{if(c==="linkDataArray"){da=a.oldValue;yh(g,da);ma=a.newValue;Ah(g,ma)}}else if(b===ve){ma=a.newValue;if(ma instanceof Object)if(c==="nodeDataArray")Bh(g,ma);else if(c==="linkDataArray")Ch(g,ma);else if(c===
"linkLabelKeys"){e=g.Ui(a.object);p=g.di(ma);if(e!==m&&p!==m)p.ke=e}}else if(b===we){da=a.oldValue;if(da instanceof Object)if(c==="nodeDataArray")Dh(g,da);else if(c==="linkDataArray")Dh(g,da);else if(c==="linkLabelKeys"){p=g.DF(da);if(p!==m)p.ke=m}}else{if(b===te&&c==="SourceChanged"){var w=g.pg(a.object),Ha=a.propertyName;w!==m&&typeof Ha==="string"&&w.mc(Ha)}}else if(b===ue){var sa=a.propertyName,d=a.object;if(d===g.L){if(sa==="nodeKeyProperty"||sa==="nodeCategoryProperty"||sa==="linkFromKeyProperty"||
sa==="linkToKeyProperty"||sa==="linkFromPortIdProperty"||sa==="linkToPortIdProperty"||sa==="nodeIsLinkLabelProperty"||sa==="linkLabelKeysProperty"||sa==="nodeIsGroupProperty"||sa==="nodeGroupKeyProperty"||sa==="linkCategoryProperty")g.ha.eb||g.Kl()}else xh(g,d,sa)}else if(b===ve||b===we){var db=a.Rc===ve,Ya=db?a.Se:a.Te,bb=db?a.newValue:a.oldValue,Oa=g.Vk.da(a.object);if(Oa instanceof Array)for(a=0;a<Oa.length;a++){var hb=Oa[a];typeof Ya==="number"&&(db?bb instanceof Object&&Eh(hb,bb,Ya):hb.Ad(Ya))}}else if(b===
te){var Va=a.propertyName;if(Va[0]!=="S"){if(Va!=="CommittingTransaction"){if(Va==="FinishedUndo"||Va==="FinishedRedo"){g.ha.Ch=h;Fh(g);g.ha.Ch=o}g.Hg&&g.va.standardMouseOver();for(var uc=g.selection.f;uc.next();)uc.value.updateAdornments()}g.Xq=h;g.update();Rg(g)}else if(Va==="StartingFirstTransaction"&&!g.Uf&&!g.Hg){g.Xq=h;if(g.Yo)g.Xg=h;g.update()}}}finally{g.Aa=h}}};this.Qf=new ra(Object,T);this.Vk=new ra(Object,Array);this.Kj=o;this.jj=this.ij=this.js=this.Bh=h;this.ls=this.ks=o;this.qs=this.os=
this.sj=this.rj=this.qj=this.pj=this.nj=this.mj=this.oj=this.lj=this.ns=this.uj=this.kj=this.tj=h;this.Xz=o;this.ps=this.ms=this.Rs=this.Qs=h;this.Lt=this.Kt=16;this.Jt=o;this.Id=(new Eb(5)).freeze();this.xA=new ta(T);this.it=999999999;this.um=this.Jj=this.Hj=h;this.kp=this.jp=o;this.Zc=m;this.rs=h;this.Hg=o;this.Oc=m;this.kA=1;this.NA=(new E(NaN,NaN,NaN,NaN)).freeze();this.Ks=(new E(NaN,NaN,NaN,NaN)).freeze();this.Uf=o;this.At=new ta;Gh(this);Hh(this);this.em=this.Uw=this.Wc=m;this.Rb=new mf;this.Rb.initializeStandardTools();
this.va=this.uu=this.Rb;this.Od=new va;this.L=new P;this.Fi=h;this.wb=new Ih;this.Fi=o;a===f&&(a=document.createElement("div"));this.Pz=new Jh;Kh(this,a);this.Fq=this.fH=m;this.Bc=o}t.J("Diagram",A);
function Hh(a){a.Ai=new ra("string",T);var b=new U,c=new ua;c.bind(new Ue("text","",Ie));b.add(c);a.gE=b;a.Ai.add("",b);b=new U;c=new ua;c.stroke="brown";c.bind(new Ue("text","",Ie));b.add(c);a.Ai.add("Comment",b);b=new U;b.tk=o;b.Cx=o;c=new X;c.Xa="Ellipse";c.fill="black";c.stroke=m;c.pa=new K(3,3);b.add(c);a.Ai.add("LinkLabel",b);a.Pk=new ra("string",V);b=new V;b.$n="GROUPPANEL";b.type=Lh;c=new ua;c.font="bold 12pt sans-serif";c.bind(new Ue("text","",Ie));b.add(c);c=new v(Mh);c.name="GROUPPANEL";
var d=new X;d.Xa="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Ng;d.padding=new Eb(5,5,5,5);c.add(d);b.add(c);a.dE=b;a.Pk.add("",b);a.Oj=new ra("string",W);b=new W;c=new X;c.Zi=h;b.add(c);c=new X;c.Tl="Standard";c.fill="black";c.stroke=m;b.add(c);a.fE=b;a.Oj.add("",b);b=new W;c=new X;c.Zi=h;c.stroke="brown";b.add(c);a.Oj.add("Comment",b);b=new v;c=new ua;c.bind(new Ue("text","",Ie));b.add(c);a.eE=b;b=new of;b.type=Mh;c=new X;c.fill=m;c.stroke="magenta";c.Ta=2;b.add(c);
c=new Ng;c.margin=new Eb(1,1,1,1);b.add(c);a.Iw=b;a.sw=b;b=new of;b.type=sg;c=new X;c.Zi=h;c.fill=m;c.stroke="magenta";c.Ta=0;b.add(c);a.Aw=b}
function vh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;if(d===b)b=c.clientWidth;document.body.removeChild(c);a.Fe=d-b}
A.prototype.toString=function(a){a===f&&(a=0);var b="";if(this.id)b=this.id;if(this.ai&&this.ai.id)b=this.ai.id;b='Diagram "'+b+'"';if(a<=0)return b;for(var c=this.yb.f;c.next();)b=b+("\n  "+c.value.toString(a-1));return b};A.prototype.dumpReferences=A.prototype.OB=function(){for(var a=this.Fn;a.next();){var b=a.value;t.trace(b.toString());for(b=b.cj;b.next();)b.value.OB()}};A.prototype.checkProperties=A.prototype.ZH=function(){return t.dF(this)};
A.fromDiv=function(a){var b=a;typeof a==="string"&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.O instanceof A?b.O:m};t.a(A,"div",A.prototype.ai);
t.defineProperty(A,{ai:"div"},r("Gb"),function(a){a!==m&&t.c(a,HTMLDivElement,A,"div");if(this.Gb!==a){var b=this.Gb;if(b!==m){delete b.O;b.innerHTML="";if(this.oa!==m){this.oa.O=m;this.oa.removeEventListener("touchstart",this.HD,o);this.oa.removeEventListener("touchmove",this.GD,o);this.oa.removeEventListener("touchend",this.FD,o)}b=this.au;if(b!==m){for(var c=b.dA,d=c.length,e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.eA;d=c.length;for(e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.fA;d=c.length;for(e=0;e<
d;e++)c.j[e].cancelWaitAfter()}b.cancelWaitAfter();this.yg=this.oa=m;window.removeEventListener("resize",this.zy,o);window.removeEventListener("mousemove",this.On,h);window.removeEventListener("mousedown",this.Nn,h);window.removeEventListener("mouseup",this.Qn,h);window.removeEventListener("mousewheel",this.tg,h);window.removeEventListener("DOMMouseScroll",this.tg,h);window.removeEventListener("mouseout",this.Pn,h)}this.Gb=m;if(a!==m){if(b=a.O)b.ai=m;Kh(this,a)}}});
function Jh(){this.FA=h;this.gH=o;this.hH=212;this.nH="63ad05bbe23a1786468a4c741b6d2e";if(this.Ls=0>window[t.fc("76a715b2f73f148a")][t.fc("72ba13b5")].indexOf(t.fc(t.GE)))for(var a=document[t.fc("69bc0fbfe6051381469f4c")],b=a.length,c=0;c<b;c++){var d=a[c][t.fc("79bb0581f63a1e97")];if(d!==m){for(var e=d.length,g=0;g<e;g++)if(d[g][t.fc("69ad1ab6e0221496778e4767")]==t.fc("02cncncn")){var i=d[g][t.fc("69bc0fbfe6")][t.fc("78a704b7e6242f8b53a8507f1b7b")];if(!i)return;if(i.indexOf(t.fc(t.eF))!==-1&&i.indexOf(t.fc(t.fF))!==
-1){this.Ls=o;break}}if(this.Ls===o)break}}this.iH=new D(NaN,NaN)}Jh.prototype.nv=function(a){a.ZD();return 0<this.Ls&&this!==this.FA?h:o};Jh.prototype.t=Jh.prototype.yK=function(){this.FA=m};
function Kh(a,b){(b===f||b===m)&&t.g("Diagram setup requires an argument DIV.");a.Gb!==m&&t.g("Diagram has already completed setup.");typeof b==="string"?a.Gb=document.getElementById(b):b instanceof HTMLDivElement?a.Gb=b:t.g("No DIV or DIV id supplied: "+b);a.Gb===m&&t.g("Invalid DIV id; could not get element with id: "+b);a.Gb.O!==f&&t.g("Invalid div id; div already has a Diagram associated with it.");if(window.getComputedStyle(a.Gb,m).position==="static")a.Gb.style.position="relative";a.Gb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.Gb.innerHTML="";a.Gb.O=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.Gb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.zIndex="2";c.width=a.Gb.clientWidth||1;c.height=a.Gb.clientHeight||1;if(document.defaultView&&document.defaultView.getComputedStyle){a.CA=
parseInt(document.defaultView.getComputedStyle(c,m).paddingLeft,10)||0;a.DA=parseInt(document.defaultView.getComputedStyle(c,m).paddingTop,10)||0;a.AA=parseInt(document.defaultView.getComputedStyle(c,m).borderLeftWidth,10)||0;a.BA=parseInt(document.defaultView.getComputedStyle(c,m).borderTopWidth,10)||0}a.uw=0;a.tw=0;if(document.body){var d=document.body.parentNode;a.uw=d.offsetTop||0;a.tw=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;
a.uw=b.offsetTop||0;a.tw=b.offsetLeft||0}},o);c.O=a;a.oa=c;a.yg=c.getContext("2d");d=a.yg;a.ZD=d[t.fc("69ad0287f137159745844d7e")][t.fc("78a118b7")](d,1,0,0,1,0,0);a.YD=d[t.fc("7eba17a4ca3b1a8346")][t.fc("78a118b7")](d,t.nv,4,4);a.Gb.insertBefore(c,a.Gb.firstChild);if(a.Gz!==m){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.oa.width+"px";d.style.height=
a.oa.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.oa.width+"px";e.style.height=a.oa.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.Gb.appendChild(d);a.Gb.appendChild(e);d.appendChild(g);e.appendChild(i);d.onscroll=a.iA;d.onmousedown=a.jA;d.O=a;d.vA=h;e.onscroll=a.iA;e.onmousedown=a.jA;e.O=a;e.wA=h;a.$j=d;a.ak=e;a.tA=g;a.uA=
i}a.preventDefault=function(a){a.preventDefault();return o};a.On=function(b){if(a.isEnabled){var c=a.pc;if(window.TouchEvent&&c.qi!==m&&c.qi instanceof window.TouchEvent){b.preventDefault();b.simulated=h;a.Fq=b}else{a.pc=a.dc;a.dc=c;Nh(a,b,c,h);if(!Oh(b,new D,b.target.O)){a.va.doMouseMove();a.va.isBeyondDragSize()&&Ph(a)}}}};a.Nn=function(b){if(a.isEnabled){var c=a.pc;if(a.Fq!==m){a.Fq=b;b.preventDefault()}else{a.pc=a.dc;a.dc=c;Nh(a,b,c,h);c.Le=b.detail;a.Tf=c.copy();if(c.qi.simulated===h){b.preventDefault();
b.simulated=h}else{if(s&&s.Gy){window.Gy=a.vn(c.F).j;s.trace(window.Gy)}Bf=m;a.va.doMouseDown();if(b.button===1){b.preventDefault();return o}}}}};a.Qn=function(b){if(a.isEnabled){var c=a.pc;if(a.Fq!==m){a.Fq=m;b.preventDefault()}else{a.pc=a.dc;a.dc=c;Nh(a,b,c,h);c.Le=b.detail;if(b.target.O)c.Hf=b.target.O;if(!Qh(a,b,new D,c.Hf)){a.va.doMouseUp();Df(a);ka(a,c,b)}}}};a.tg=function(b){if(a.isEnabled){var c=a.pc;a.pc=a.dc;a.dc=c;Nh(a,b,c,h);c.bubbles=h;c.Qi=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;
a.va.doMouseWheel();ka(a,c,b)}};a.Pn=function(){if(a.isEnabled){var b=a.va;b.cancelWaitAfter();b instanceof mf&&b.QF()}};a.zy=function(){var b=a.oa,c=a.Gb,d=0;if(a.kp)d=a.Fe;var e=0;if(a.jp)e=a.Fe;if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e){a.Jj=h;a.ti=h}sf(a)};a.HD=function(b){if(a.isEnabled){a.cx=o;if(b.touches.length>1){a.va.doCancel();if(a.Qk&&t.EA){b.preventDefault();b.cancelBubble=h;return o}Ph(a);b.cancelBubble=o;return h}var c=a.pc;a.pc=a.dc;a.dc=c;c.b=a;var d=a.Gg(b.targetTouches[0]);
c.xc=a.fo(d);c.F=d;c.jh=0;c.button=0;c.Le=1;c.Qi=0;c.zd=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.Hf=b.target.O?b.target.O:m;c.gd=m;a.Tf=c.copy();Bf=m;a.va.doMouseDown();var e=c.copy();a.Vt=setTimeout(function(){e.button=2;a.H=e;a.cx=h;a.va.doMouseUp()},850);ka(a,c,b)}};a.GD=function(b){if(a.isEnabled){if(b.touches.length>1){a.va.doCancel();Ph(a);if(a.Qk&&t.EA){b.preventDefault();b.cancelBubble=h;return o}b.cancelBubble=o;return h}var c=a.pc;a.pc=a.dc;a.dc=c;var d=m,e,g=m;b.changedTouches.length>
0?g=b.changedTouches[0]:b.targetTouches.length>0&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;if(d&&d.O){e=d.O.Gg(g);i=d.O}else{e=a.Gg(b.changedTouches[0]);i=a}c.F=e;c.xc=i.fo(e)}else if(a.pc!==m){c.F=a.pc.F;c.xc=a.pc.xc;d=a.pc.Hf}else if(a.Tf!==m){c.F=a.Tf.F;c.xc=a.Tf.xc;d=a.Tf.Hf}c.jh=0;c.button=0;c.Le=1;c.Qi=0;c.zd=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.Hf=d===m?b.target.O:d.O?d.O:m;c.gd=m;a.va.isBeyondDragSize()&&Ph(a);if(!Oh(g?g:b,new D,
c.Hf)){a.va.doMouseMove();ka(a,c,b)}}};a.FD=function(b){if(a.isEnabled){Ph(a);if(a.cx){b.preventDefault();return o}var c=a.pc;a.pc=a.dc;a.dc=c;if(!(b.touches.length>1)){var d=m,e,g=m;b.changedTouches.length>0?g=b.changedTouches[0]:b.targetTouches.length>0&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;if(d&&d.O){e=d.O.Gg(g);i=d.O}else{e=a.Gg(b.changedTouches[0]);i=a}c.F=e;c.xc=i.fo(e)}else if(a.pc!==m){c.F=a.pc.F;c.xc=a.pc.xc;d=a.pc.Hf}else if(a.Tf!==m){c.F=
a.Tf.F;c.xc=a.Tf.xc;d=a.Tf.Hf}c.jh=0;c.button=0;c.Le=1;c.Qi=0;c.zd=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.Hf=d===m?b.target.O:d.O?d.O:m;c.gd=m;if(!Qh(a,g?g:b,new D,c.Hf)){a.va.doMouseUp();ka(a,c,b)}}}};c.addEventListener("touchstart",a.HD,o);c.addEventListener("touchmove",a.GD,o);c.addEventListener("touchend",a.FD,o);c.addEventListener("gesturestart",function(){if(a.Qk!==o){a.kA=a.scale;a.va.doCancel()}},o);c.addEventListener("gesturechange",function(b){if(a.Qk!==o){var c=a.Gg(b),d=a.Ck;
a.Ck=c;a.scale=a.kA*b.scale;a.Ck=d}},o);c.addEventListener("mousemove",a.On,o);c.addEventListener("mousedown",a.Nn,o);c.addEventListener("mouseup",a.Qn,o);c.addEventListener("mousewheel",a.tg,o);c.addEventListener("DOMMouseScroll",a.tg,o);c.addEventListener("mouseout",a.Pn,o);c.addEventListener("keydown",a.dG,o);c.addEventListener("keyup",a.eG,o);c.addEventListener("selectstart",function(a){a.preventDefault();return o},o);c.addEventListener("contextmenu",function(a){a.preventDefault();return o},o);
window.addEventListener("resize",a.zy,o);c.tabIndex=0;Rh(a)}}A.prototype.focus=function(){this.oa.focus()};function Rh(a,b){if(b===f)b=a.yg;b.Nv="";b.Wl="";b.Ek=""}function Gh(a){var b=new Ze;b.name="Background";a.cr(b);b=new Ze;b.name="";a.cr(b);b=new Ze;b.name="Foreground";a.cr(b);b=new Ze;b.name="Adornment";b.ed=h;a.cr(b);b=new Ze;b.name="Tool";b.ed=h;a.cr(b);b=new Ze;b.name="Grid";b.Ld=o;b.ed=h;a.DE(b,a.Ti("Background"))}
function Sh(a){a.Wc=new v(ai);a.Wc.name="GRID";var b=new X;b.Xa="LineH";b.stroke="lightgray";b.Ta=0.5;b.ei=1;a.Wc.add(b);b=new X;b.Xa="LineH";b.stroke="gray";b.Ta=0.5;b.ei=5;a.Wc.add(b);b=new X;b.Xa="LineH";b.stroke="gray";b.Ta=1;b.ei=10;a.Wc.add(b);b=new X;b.Xa="LineV";b.stroke="lightgray";b.Ta=0.5;b.ei=1;a.Wc.add(b);b=new X;b.Xa="LineV";b.stroke="gray";b.Ta=0.5;b.ei=5;a.Wc.add(b);b=new X;b.Xa="LineV";b.stroke="gray";b.Ta=1;b.ei=10;a.Wc.add(b);b=new T;b.add(a.Wc);b.Cd="Grid";b.ny=o;b.RC=o;b.Jr="GRID";
a.add(b);a.lb.remove(b);a.Wc.visible=o}
A.prototype.iA=function(){var a=this.O;if(a.sA){a.Jt=h;var b=a.gc,c=a.ob,d=b.width,e=c.width,g=b.height,i=c.height,j=b.right,k=c.right,l=b.bottom,n=c.bottom,q=b.x,p=c.x,b=b.y,c=c.y;if(e<d||i<g){if(this.vA&&a.Je)a.position=new D(this.scrollLeft+q,a.position.y);else if(this.wA&&a.Ke)a.position=new D(a.position.x,this.scrollTop+b);bi(a);uh(a);a.Jt=o;a.Jj=o}else{var u=a.scale;if(this.vA&&a.Je){if(q<p)a.position=new D(this.scrollLeft+q,a.position.y);if(j>k)a.position=new D(-(a.$j.Fe-a.oa.width)+this.scrollLeft-
a.oa.width/u+a.gc.right,a.position.y)}if(this.wA&&a.Ke){if(b<c)a.position=new D(a.position.x,this.scrollTop+b);if(l>n)a.position=new D(a.position.x,-(a.ak.scrollHeight-a.oa.height)+this.scrollTop-a.oa.height/u+a.gc.bottom)}bi(a);a.Jt=o;a.Jj=o;uh(a);b=a.gc;c=a.ob;j=b.right;k=c.right;l=b.bottom;n=c.bottom;q=b.x;p=c.x;b=b.y;c=c.y;if(e>=d&&q>=p&&j<=k)a.tA.style.width="1px";if(i>=g&&b>=c&&l<=n)a.uA.style.height="1px";ci(a)}}};A.prototype.jA=function(){this.O.sA=h};
A.prototype.computeBounds=A.prototype.de=function(){this.Ig.count>0&&Fh(this);if(this.by.aa()){var a=this.by.copy();a.wx(this.padding);return a}for(var b=h,c=this.yb,d=c.length,e=0;e<d;e++){var g=c.j[e];if(g.visible&&!g.ed)for(var g=g.lb,i=g.length,j=0;j<i;j++){var k=g.j[j];if(k.ny&&k.kb()){k=k.ta;if(k.aa())if(b){b=o;a=k.copy()}else a.zk(k)}}}b&&(a=new E(0,0,0,0));a.wx(this.padding);return a};
function di(a,b){if((b||a.Hg)&&!a.Bc&&a.gc.aa()){a.Bc=h;var c=a.Gk;if(b&&a.Fj!==wh)c=a.Fj;var d=c!==wh?ei(a,c):a.scale,c=a.ob.copy(),e=a.oa.width/d,g=a.oa.height/d;a.position.Ba();var i=a.Lk;if(b&&Tb(a.rm))i=a.rm;fi(a,a.pb,a.gc,e,g,i);a.position.freeze();a.scale=d;a.Bc=o;d=a.ob;d.mk(c)||a.Ur(c,d)}}
function ei(a,b){var c=a.gc;if(!c.aa())return 1;var d=c.width,c=c.height,e=a.oa.width,g=a.oa.height,i=e/d,j=g/c,k=1;if(b===gi){k=Math.min(j,i);k>1&&(k=1);return k}if(b===hi){k=j>i?(g-a.Fe)/c:(e-a.Fe)/d;k>1&&(k=1);return k}return a.scale}A.prototype.zoomToFit=A.prototype.EK=function(){this.scale=ei(this,gi);sf(this)};
A.prototype.alignDocument=A.prototype.tH=function(a,b){this.Hj&&ii(this,this.de());var c=this.gc,d=this.ob,e=this.Bc;this.Bc=h;this.position=new D(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.Bc=e;this.Uf||sf(this)};
function fi(a,b,c,d,e,g){if(Tb(g)){if(d>c.width)b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX);if(e>c.height)b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)}if(d<c.width){g=b.x+d/2;g=Math.min(g,c.right-d/2);g=Math.max(g,c.left+d/2);b.x=g-d/2}else if(b.x>c.left)b.x=c.left;else if(b.x<c.right-d)b.x=c.right-d;if(e<c.height){d=b.y+e/2;d=Math.min(d,c.bottom-e/2);d=Math.max(d,c.top+e/2);b.y=d-e/2}else if(b.y>c.top)b.y=c.top;else if(b.y<c.bottom-e)b.y=c.bottom-e;if(!isFinite(b.x))b.x=-a.padding.left;
if(!isFinite(b.y))b.y=-a.padding.top}A.prototype.findPartAt=A.prototype.tr=function(a,b){var c=b?Yf(this,a,function(a){return a.ba},function(a){return a.Ex()}):this.Sc(a,function(a){return a.ba});return c instanceof T?c:m};A.prototype.findObjectAt=A.prototype.Sc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.yb.En;for(Fh(this);d.next();){var e=d.value;if(e.visible){e=e.Sc(a,b,c);if(e!==m)return e}}return m};
function Yf(a,b,c,d){c===f&&(c=m);d===f&&(d=m);var e=a.yb.En;for(Fh(a);e.next();){a=e.value;if(a.visible&&!a.ed){a=a.Sc(b,c,d);if(a!==m)return a}}return m}A.prototype.findObjectsAt=A.prototype.vn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);if(!(d instanceof z)||!(d instanceof ta))d=new z(Q);Fh(this);for(var e=this.yb.En;e.next();){var g=e.value;g.visible&&g.vn(a,b,c,d)}return d};
A.prototype.findObjectsIn=A.prototype.yl=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=o);if(!(e instanceof z)||!(e instanceof ta))e=new z(Q);Fh(this);for(var g=this.yb.En;g.next();){var i=g.value;i.visible&&i.yl(a,b,c,d,e)}return e};A.prototype.findObjectsNear=A.prototype.wn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof z)&&!(e instanceof ta)&&(e=new z(Q));Fh(this);for(var g=this.yb.En;g.next();){var i=g.value;i.visible&&i.wn(a,b,c,d,e)}return e};
function Ph(a){if(a.Vt!==-1){clearTimeout(a.Vt);a.Vt=-1}}function Nh(a,b,c,d){c.b=a;if(d){d=a.Gg(b);c.xc=a.fo(d);c.F=d}else{c.xc=a.dc.xc;c.F=a.dc.F}a=0;b.ctrlKey&&(a=a+1);b.altKey&&(a=a+2);b.shiftKey&&(a=a+4);c.jh=a;c.button=b.button;c.Le=1;c.Qi=0;c.zd=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.Hf=b.target.O?b.target.O:m;c.gd=m}
function ka(a,b,c){if(b.bubbles){s&&(s.trace&&s.eC)&&s.trace("NOT handled "+c.type+" "+b.toString());return h}s&&(s.trace&&s.eC)&&s.trace("handled "+c.type+" "+a.va.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.type!=="touchstart"&&c.preventDefault();c.cancelBubble=h;return o}
A.prototype.dG=function(a){if(this.O.isEnabled){var b=this.O.dc;Nh(this.O,a,b,o);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.O.va.doKeyDown();if((a.which===187||a.which===189||a.which===48||a.which===107||a.which===109)&&a.ctrlKey===h){a.cancelBubble=h;a.preventDefault!==f?a.preventDefault():a.returnValue=o;if(Event.stop){t.g("Event.stop can fire for this browser");Event.stop(a)}a.stopPropagation!==f&&a.stopPropagation();return o}return ka(this.O,b,a)}};
A.prototype.eG=function(a){if(this.O.isEnabled){var b=this.O.dc;Nh(this.O,a,b,o);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.O.va.doKeyUp();return ka(this.O,b,a)}};
A.prototype.Gg=function(a){var b=this.oa,c=0,d=0;if(b.offsetParent!==f){do{c=c+b.offsetLeft;d=d+b.offsetTop}while(b=b.offsetParent)}c=c+(this.CA+this.AA+this.tw);d=d+(this.DA+this.BA+this.uw);b=a.pageX-c;a=a.pageY-d;if(this.ae!==m){a=new D(b,a);lb(a,this.ae);b=a.x;a=a.y}return new D(b,a)};A.prototype.invalidateDocumentBounds=A.prototype.Xi=function(){ji(this);if(this.nx===o){this.nx=h;var a=this;setTimeout(function(){if(!(a.oa===m||a.Xg===h)){Rg(a);a.nx=o}},a.Nz)}};
function Rg(a){a.Uf||Fh(a);a.Hj&&ii(a,a.de());di(a);!a.Bc&&a.Jj&&ki(a);for(a=a.At.f;a.next();)Rg(a.value)}A.prototype.redraw=A.prototype.YJ=function(){if(!this.Bc&&!this.Uf){uh(this);ci(this);bi(this);ji(this);this.update()}};A.prototype.isUpdateRequested=A.prototype.rJ=r("Xg");function sf(a){if(!a.Bc&&!a.Uf&&a.Xg===o){a.Xg=h;setTimeout(function(){if(a.Xg){a.update();a.Xg=o}},a.Nz)}}
A.prototype.update=A.prototype.update=function(){if(!(this.Gb===m||this.Uf))if(!this.Yo||this.Xg){if(this.Yo)this.Yo=o;this.Uf=h;this.zy();this.Xg=o;Fh(this);var a=o;if(!this.Hg||this.Xq&&this.rs){li(this);this.Xq=o;a=h}Fh(this);this.gc.aa()||ii(this,this.de());if(a){if(!this.Hg){if(this.Fj!==wh)this.scale=ei(this,this.Fj);else if(this.Gk!==wh)this.scale=ei(this,this.Gk);var b=this.position;if(b.aa())this.position=b;else{b=new D;b.ao(this.gc,this.jC);var c=this.ob,c=new E(0,0,c.width,c.height),d=
new D;d.ao(c,this.kC);c=this.LD(d);this.position=new D(b.x-c.x,b.y-c.y);di(this,h)}this.na("InitialLayoutCompleted");b=this.ha;b!==m&&b.clear();mi(this)}this.na("LayoutCompleted")}Fh(this);!this.Bc&&this.Jj&&(ki(this)||ki(this));if(a&&!this.Hg)this.Hg=h;this.og();this.Uf=o}};
function Fh(a){for(var b=0;b<23;b++){var c=a.Ig.f;if(c===m||a.Ig.count===0)break;a.Ig=new ta(Q);for(var d=a,e=a.Ig;c.next();){var g=c.value,i=g.constructor;i===V&&ni(d,g)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(!(i!==U&&i!==T))if(d.pk()){ph(d,Infinity,Infinity);d.sc()}else e.add(d)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(i===W)if(d.pk()){ph(d,Infinity,Infinity);d.sc();oi(d)}else e.add(d)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(i===of)if(d.pk()){ph(d,Infinity,
Infinity);d.sc()}else e.add(d)}}}function ni(a,b){for(var c=b.lc,d=[];c.next();){var e=c.value,g=e.constructor;if(g===V)ni(a,e);else if(g===W)d.push(e);else{ph(e,Infinity,Infinity);e.sc()}}c=d.length;for(e=0;e<c;e++){g=d[e];ph(g,Infinity,Infinity);g.sc()}ph(b,Infinity,Infinity);b.sc()}
A.prototype.og=function(a){this.Gb===m&&t.g("No div specified");this.oa===m&&t.g("No canvas specified");if(!a)a=this.yg;var b=a!==this.yg;if(b)Rh(this);else if(!this.ti)return;if(this.jm.count>0){for(var c=this.jm.f;c.next();)tg(c.key,c.value);this.jm.clear()}a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.oa.width,this.oa.height);c=this.ae;c.reset();this.Nb!==1&&c.scale(this.Nb);var d=this.pb;(d.x!==0||d.y!==0)&&c.translate(-d.x,-d.y);a.setTransform(c.m11,c.m12,c.m21,c.m22,c.La,c.Ma);if(s&&s.gr){a.fillStyle=
"red";a.fillRect(0,0,8,8);a.lineWidth=8;a.strokeStyle="rgba(255,255,0,.6)";c=this.ob;a.strokeRect(c.x,c.y,c.width,c.height);a.fillStyle="rgba(0,255,0,.2)";a.fillRect(this.gc.x,this.gc.y,this.gc.width,this.gc.height)}c=this.yb.length;for(d=0;d<c;d++)this.yb.j[d].og(a,this);s&&(s.NB||s.gr)&&s.LB(a,this);this.Pz?this.Pz.nv(this)&&this.YD():this.Gg=aa();if(b)Rh(this);else this.ti=this.um=o};function ji(a){if(a.Hj===o||a.Xg===o){a.Hj=h;sf(a)}}
function uh(a,b){if(a.ti===o&&(b===f||a.ob.ie(b))){a.ti=h;sf(a)}for(var c=a.At.f;c.next();)uh(c.value)}function ci(a){if(a.Jj===o)a.Jj=h}function bi(a){if(a.um===o)a.um=h}
function ki(a){var b=a.oa;if(b!==m){var c=a.Gb,d=b.width,e=b.height,g=a.NA.copy(),i=o,j=0;if(a.kp)j=a.Fe;var k=0;if(a.jp)k=a.Fe;if(c.clientWidth!==b.width+j||c.clientHeight!==b.height+k){b.width=c.clientWidth-j;b.height=c.clientHeight-k;Rh(a)}a.Jj=o;if(!a.Gz||a.Jt)(d!==b.width||e!==b.height)&&a.update();else{var l=a.ob,n=a.gc,q=n.width,c=n.height,p=l.width,j=l.height,u=n.x,w=l.x,B=n.right,F=l.right,k=n.y,H=l.y,n=n.bottom,l=l.bottom,x="1px";if(a.fC&&a.Je)if(p+1<q){x=q-p+b.width+"px";a.$j.scrollLeft=
a.position.x-u}else if(u+1<w){x=w-u+b.width+"px";a.$j.scrollLeft=a.$j.scrollWidth-a.$j.clientWidth}else if(B>F+1){x=B-F+b.width+"px";a.$j.scrollLeft=a.position.x}q=x!=="1px";if(q!==a.jp){b.height=x==="1px"?b.height+a.Fe:b.height-a.Fe;Rh(a);i=h}a.jp=q;a.tA.style.width=x;q="1px";if(a.gC&&a.Ke)if(j+1<c){q=c-j+b.height+"px";a.ak.scrollTop=a.position.y-k}else if(k+1<H){q=H-k+b.height+"px";a.ak.scrollTop=a.ak.scrollHeight-a.ak.clientHeight}else if(n>l+1){q=n-l+b.height+"px";a.ak.scrollTop=a.position.y}c=
q!=="1px";if(c!==a.kp){b.width=q==="1px"?b.width+a.Fe:b.width-a.Fe;Rh(a);i=h}a.kp=c;a.uA.style.height=q;c=b.width;j=b.height;a.ak.style.height=j+"px";a.ak.style.width=a.kp?c+a.Fe+"px":c+"px";a.$j.style.width=c+"px";a.$j.style.height=a.jp?j+a.Fe+"px":j+"px";a.sA=o;if(d!==b.width||e!==b.height){l=a.ob;a.Ur(g,l,i?h:f);a.update();return o}return h}}}
function pi(a,b){for(var c=a.yb,d=c.count,e=0;e<d;e++)c.V(e).name===b&&t.g("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}t.a(A,"addsToTemporaryLayer",A.prototype.er);t.defineProperty(A,{er:m},r("rz"),function(a){t.e(a,"boolean",A,"addsToTemporaryLayer");this.rz=a});
A.prototype.add=A.prototype.add=function(a){t.c(a,T,A,"add:part");var b=this.er?"Tool":a.Cd,c=this.Ti(b);c===m&&(c=this.Ti(""));c===m&&t.g('Cannot add a Part when unable find a Layer named "'+b+'" and there is no default Layer');if(a.xa!==c){b=a.b===this?c.ok(99999999,a,h):c.ok(99999999,a);b>=0&&this.pe(ve,"parts",c,m,a,m,b);this.Xi();a.v(qi);b=a.Hr;b!==m&&b(a,m,c)}};
A.prototype.ok=function(a){if(a instanceof U){this.vt.add(a);if(a instanceof V){var b=a.Wa;b===m?this.il.add(a):b.bl.add(a);b=a.wb;if(b!==m)b.b=this}}else a instanceof W?this.bt.add(a):a.constructor===T&&this.lb.add(a);if(b=a.data){a instanceof of||this.Qf.add(b,a);var c=this;ri(a,a,function(a){si(c,a)})}(a.Lc===h||a.Ij===h)&&this.Ig.add(a);ti(a,h);if(a.kb()){uh(this);ji(this)}};
A.prototype.Ad=function(a){if(a instanceof U){this.vt.remove(a);if(a instanceof V){var b=a.Wa;b===m?this.il.remove(a):b.bl.remove(a);b=a.wb;if(b!==m)b.b=m}}else a instanceof W?this.bt.remove(a):a.constructor===T&&this.lb.remove(a);if(b=a.data){a instanceof of||this.Qf.remove(b);var c=this;ri(a,a,function(a){ui(c,a)})}this.Ig.remove(a);if(a.kb()){uh(this);ji(this)}};
A.prototype.remove=A.prototype.remove=function(a){t.c(a,T,A,"remove:part");var b=a.xa;if(b!==m&&b.b===this){a.Ha=o;a.v(vi);a.vl();var c=b.Ad(-1,a);c>=0&&this.pe(we,"parts",b,a,m,c,m);c=a.Hr;c!==m&&c(a,b,m);this.Xi();this.va.standardMouseOver()}};A.prototype.addLayer=A.prototype.cr=function(a){t.c(a,Ze,A,"addLayer:layer");pi(this,a.name);a.Ef(this);var b=this.yb,c=b.count-1;if(!a.ed)for(;c>=0&&b.V(c).ed;)c--;b.kc(c+1,a);ji(this)};
A.prototype.addLayerBefore=A.prototype.DE=function(a,b){t.c(a,Ze,A,"addLayer:layer");pi(this,a.name);a.Ef(this);for(var c=this.yb.count,d=0;d<c;d++)if(this.yb.V(d)===b){this.yb.kc(d,a);break}ji(this)};A.prototype.addLayerAfter=A.prototype.pH=function(a,b){t.c(a,Ze,A,"addLayer:layer");pi(this,a.name);a.Ef(this);for(var c=this.yb.count,d=0;d<c;d++)if(this.yb.V(d)===b){this.yb.kc(d+1,a);break}ji(this)};
A.prototype.removeLayer=A.prototype.bK=function(a){if(a.name!==""&&this.yb.remove(a)){for(var b=a.lb.copy().f;b.next();){var c=b.value,d=c.Cd;c.Cd="";if(d!==a.name)c.Cd=d}ji(this)}};A.prototype.findLayer=A.prototype.Ti=function(a){for(var b=this.Fn;b.next();){var c=b.value;if(c.name===a)return c}return m};A.prototype.addChangedListener=A.prototype.vx=function(a){t.e(a,"function",A,"addChangedListener:listener");if(this.oi===m)this.oi=new z("function");this.oi.add(a)};
A.prototype.removeChangedListener=A.prototype.Ny=function(a){t.e(a,"function",A,"removeChangedListener:listener");if(this.oi!==m){this.oi.remove(a);if(this.oi.count===0)this.oi=m}};A.prototype.lu=function(a){this.gb||this.ha.dC(a);if(this.oi!==m)for(var b=this.oi.f;b.next();){var c=b.value;c(a)}};A.prototype.raiseChangedEvent=A.prototype.pe=function(a,b,c,d,e,g,i){g===f&&(g=m);i===f&&(i=m);var j=new se;j.b=this;j.Rc=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Te=g;j.newValue=e;j.Se=i;this.lu(j)};
A.prototype.raiseChanged=A.prototype.d=function(a,b,c,d,e){this.pe(ue,a,this,b,c,d,e)};t.m(A,{ha:"undoManager"},function(){return this.bg.ha});t.a(A,"skipsUndoManager",A.prototype.gb);t.defineProperty(A,{gb:"skipsUndoManager"},r("Fi"),function(a){t.e(a,"boolean",A,"skipsUndoManager");this.Fi=a});
A.prototype.changeState=A.prototype.ir=function(a,b){if(a!==m&&a.b===this){var c=this.Sk;try{this.Sk=h;var d=a.Rc;if(d===ue){var e=a.object,g=a.propertyName,i=a.da(b);t.fb(e,g,i);if(e instanceof Q){var j=e.ba;j!==m&&j.ah()}}else if(d===ve){var k=a.object,l=a.Se,e=a.newValue;if(k instanceof v){if(typeof l==="number"&&e instanceof Q){var n=k;b?n.Ad(l):n.kc(l,e);j=k.ba;j!==m&&j.ah()}}else if(k instanceof Ze){var q=a.Te===h;if(typeof l==="number"&&e instanceof T){var p=k;if(b){e.ah();p.Ad(l,e,q)}else p.ok(l,
e,q)}}else t.g("unknown ChangedEvent.Insert object: "+a.toString())}else if(d===we){k=a.object;l=a.Te;e=a.oldValue;if(k instanceof v){if(typeof l==="number"&&e instanceof Q){n=k;b?n.kc(l,e):n.Ad(l)}}else if(k instanceof Ze){q=a.Se===h;if(typeof l==="number"&&e instanceof T){p=k;if(b)p.ok(l,e,q);else{e.ah();p.Ad(l,e,q)}}}else t.g("unknown ChangedEvent.Remove object: "+a.toString())}else d!==te&&t.g("unknown ChangedEvent: "+a.toString())}finally{this.Sk=c}}};
A.prototype.startTransaction=A.prototype.Kb=function(a){return this.ha.Kb(a)};A.prototype.commitTransaction=A.prototype.Pd=function(a){return this.ha.Pd(a)};A.prototype.rollbackTransaction=A.prototype.Wr=function(){return this.ha.Wr()};A.prototype.updateAllTargetBindings=A.prototype.CK=function(){for(var a=this.cj;a.next();)a.value.mc();for(a=this.sk;a.next();)a.value.mc();for(a=this.links;a.next();)a.value.mc()};
A.prototype.Ur=function(a,b,c){if(!this.Bc){bi(this);uh(this);ci(this);ji(this);var d=this.wb;d!==m&&(d.Pu&&!c&&(a.width!==b.width||a.height!==b.height))&&d.v();di(this);this.na("ViewportBoundsChanged",c?{}:m,a);mi(this)}};
function mi(a){var b=a.Wc;if(b!==m&&b.visible){for(var c,d=c=1,e=b.sa.length,g=0;g<e;g++){var i=b.sa.j[g],j=i.ei;j<2||(i.Xa==="LineV"?d=d*j/yd(d,j):c=c*j/yd(c,j))}e=b.Ar;c=new K(c*e.width,d*e.height);a=a.ob;if(a.aa()){b.width=a.width+c.width*2;b.height=a.height+c.height*2;a=xd(a.x,a.y,0,0,c.width,c.height);b.ba.location=new D(a.x-c.width,a.y-c.height)}}}A.prototype.clearSelection=A.prototype.Ix=function(){this.na("ChangingSelection");rf(this);this.na("ChangedSelection")};
function rf(a){if(a.selection.count>0){for(var b=a.selection.Jf(),c=b.length,d=0;d<c;d++)b[d].Ha=o;a.selection.clear()}}A.prototype.select=A.prototype.select=function(a){if(a!==m&&a.xa.b===this&&(!a.Ha||this.selection.count>1)){this.na("ChangingSelection");rf(this);a.Ha=h;this.na("ChangedSelection")}};A.prototype.selectCollection=A.prototype.Ry=function(a){this.na("ChangingSelection");rf(this);for(a=a.f;a.next();)a.value.Ha=h;this.na("ChangedSelection")};
A.prototype.scroll=function(a,b,c){c===f&&(c=1);var d=b==="up"||b==="down",e;if(a==="pixel")e=c;else if(a==="line")e=c*(d?this.Yr:this.Xr);else if(a==="page"){if(window.innerHeight!==0){e=Math.max(window.innerHeight-(d?this.Yr:this.Xr),0);e=c*e}}else t.g("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e=e/this.scale;c=this.position.copy();b==="up"?c.y=this.position.y-e:b==="down"?c.y=this.position.y+e:b==="left"?c.x=this.position.x-e:b==="right"?c.x=this.position.x+e:t.g("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};A.prototype.scrollToRect=A.prototype.hK=function(a){var b=this.ob;if(!b.rl(a)){a=a.mu;a.x=a.x-b.width/2;a.y=a.y-b.height/2;this.position=a}};A.prototype.centerRect=A.prototype.YH=function(a){var b=this.ob,a=a.mu;a.x=a.x-b.width/2;a.y=a.y-b.height/2;this.position=a};A.prototype.transformDocToView=A.prototype.fo=function(a){var b=this.ae;b.reset();this.Nb!==1&&b.scale(this.Nb);var c=this.pb;(c.x!==0||c.y!==0)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.ae)};
A.prototype.transformViewToDoc=A.prototype.LD=function(a){var b=this.ae;b.reset();this.Nb!==1&&b.scale(this.Nb);var c=this.pb;(c.x!==0||c.y!==0)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return lb(a.copy(),this.ae)};var wh;A.None=wh=t.l(A,"None",0);var gi;A.Uniform=gi=t.l(A,"Uniform",1);var hi;A.UniformToFill=hi=t.l(A,"UniformToFill",2);var eg;A.CycleAll=eg=t.l(A,"CycleAll",10);var ig;A.CycleNotDirected=ig=t.l(A,"CycleNotDirected",11);var lg;
A.CycleNotDirectedFast=lg=t.l(A,"CycleNotDirectedFast",12);var mg;A.CycleNotUndirected=mg=t.l(A,"CycleNotUndirected",13);var fg;A.CycleDestinationTree=fg=t.l(A,"CycleDestinationTree",14);var hg;A.CycleSourceTree=hg=t.l(A,"CycleSourceTree",15);t.a(A,"validCycle",A.prototype.RD);t.defineProperty(A,{RD:"validCycle"},r("bu"),function(a){var b=this.bu;if(b!==a){t.Va(a,A,A,"validCycle");this.bu=a;this.d("validCycle",b,a)}});t.m(A,{Fn:"layers"},function(){return this.yb.f});t.a(A,"isModelReadOnly",A.prototype.Rd);
t.defineProperty(A,{Rd:"isModelReadOnly"},function(){var a=this.bg;return a===m?o:a.Pa},function(a){var b=this.bg;if(b!==m)b.Pa=a});t.a(A,"isReadOnly",A.prototype.Pa);t.defineProperty(A,{Pa:"isReadOnly"},r("Kj"),function(a){var b=this.Kj;if(b!==a){t.e(a,"boolean",A,"isReadOnly");this.Kj=a;this.d("isReadOnly",b,a)}});t.a(A,"isEnabled",A.prototype.isEnabled);
t.defineProperty(A,{isEnabled:"isEnabled"},r("Bh"),function(a){var b=this.Bh;if(b!==a){t.e(a,"boolean",A,"isEnabled");this.Bh=a;this.d("isEnabled",b,a)}});t.a(A,"allowClipboard",A.prototype.iu);t.defineProperty(A,{iu:"allowClipboard"},r("js"),function(a){var b=this.js;if(b!==a){t.e(a,"boolean",A,"allowClipboard");this.js=a;this.d("allowClipboard",b,a)}});t.a(A,"allowCopy",A.prototype.Sh);
t.defineProperty(A,{Sh:"allowCopy"},r("ij"),function(a){var b=this.ij;if(b!==a){t.e(a,"boolean",A,"allowCopy");this.ij=a;this.d("allowCopy",b,a)}});t.a(A,"allowDelete",A.prototype.ek);t.defineProperty(A,{ek:"allowDelete"},r("jj"),function(a){var b=this.jj;if(b!==a){t.e(a,"boolean",A,"allowDelete");this.jj=a;this.d("allowDelete",b,a)}});t.a(A,"allowDragOut",A.prototype.ju);
t.defineProperty(A,{ju:"allowDragOut"},r("ks"),function(a){var b=this.ks;if(b!==a){t.e(a,"boolean",A,"allowDragOut");this.ks=a;this.d("allowDragOut",b,a)}});t.a(A,"allowDrop",A.prototype.WA);t.defineProperty(A,{WA:"allowDrop"},r("ls"),function(a){var b=this.ls;if(b!==a){t.e(a,"boolean",A,"allowDrop");this.ls=a;this.d("allowDrop",b,a)}});t.a(A,"allowTextEdit",A.prototype.kn);
t.defineProperty(A,{kn:"allowTextEdit"},r("tj"),function(a){var b=this.tj;if(b!==a){t.e(a,"boolean",A,"allowTextEdit");this.tj=a;this.d("allowTextEdit",b,a)}});t.a(A,"allowGroup",A.prototype.dn);t.defineProperty(A,{dn:"allowGroup"},r("kj"),function(a){var b=this.kj;if(b!==a){t.e(a,"boolean",A,"allowGroup");this.kj=a;this.d("allowGroup",b,a)}});t.a(A,"allowUngroup",A.prototype.ln);
t.defineProperty(A,{ln:"allowUngroup"},r("uj"),function(a){var b=this.uj;if(b!==a){t.e(a,"boolean",A,"allowUngroup");this.uj=a;this.d("allowUngroup",b,a)}});t.a(A,"allowInsert",A.prototype.en);t.defineProperty(A,{en:"allowInsert"},r("ns"),function(a){var b=this.ns;if(b!==a){t.e(a,"boolean",A,"allowInsert");this.ns=a;this.d("allowInsert",b,a)}});t.a(A,"allowLink",A.prototype.ml);
t.defineProperty(A,{ml:"allowLink"},r("lj"),function(a){var b=this.lj;if(b!==a){t.e(a,"boolean",A,"allowLink");this.lj=a;this.d("allowLink",b,a)}});t.a(A,"allowRelink",A.prototype.Ki);t.defineProperty(A,{Ki:"allowRelink"},r("oj"),function(a){var b=this.oj;if(b!==a){t.e(a,"boolean",A,"allowRelink");this.oj=a;this.d("allowRelink",b,a)}});t.a(A,"allowMove",A.prototype.fk);
t.defineProperty(A,{fk:"allowMove"},r("mj"),function(a){var b=this.mj;if(b!==a){t.e(a,"boolean",A,"allowMove");this.mj=a;this.d("allowMove",b,a)}});t.a(A,"allowPrint",A.prototype.fn);t.defineProperty(A,{fn:"allowPrint"},r("nj"),function(a){var b=this.nj;if(b!==a){t.e(a,"boolean",A,"allowPrint");this.nj=a;this.d("allowPrint",b,a)}});t.a(A,"allowReshape",A.prototype.gn);
t.defineProperty(A,{gn:"allowReshape"},r("pj"),function(a){var b=this.pj;if(b!==a){t.e(a,"boolean",A,"allowReshape");this.pj=a;this.d("allowReshape",b,a)}});t.a(A,"allowResize",A.prototype.hn);t.defineProperty(A,{hn:"allowResize"},r("qj"),function(a){var b=this.qj;if(b!==a){t.e(a,"boolean",A,"allowResize");this.qj=a;this.d("allowResize",b,a)}});t.a(A,"allowRotate",A.prototype.jn);
t.defineProperty(A,{jn:"allowRotate"},r("rj"),function(a){var b=this.rj;if(b!==a){t.e(a,"boolean",A,"allowRotate");this.rj=a;this.d("allowRotate",b,a)}});t.a(A,"allowSelect",A.prototype.Ld);t.defineProperty(A,{Ld:"allowSelect"},r("sj"),function(a){var b=this.sj;if(b!==a){t.e(a,"boolean",A,"allowSelect");this.sj=a;this.d("allowSelect",b,a)}});t.a(A,"allowUndo",A.prototype.xx);
t.defineProperty(A,{xx:"allowUndo"},r("os"),function(a){var b=this.os;if(b!==a){t.e(a,"boolean",A,"allowUndo");this.os=a;this.d("allowUndo",b,a)}});t.a(A,"allowZoom",A.prototype.fr);t.defineProperty(A,{fr:"allowZoom"},r("qs"),function(a){var b=this.qs;if(b!==a){t.e(a,"boolean",A,"allowZoom");this.qs=a;this.d("allowZoom",b,a)}});t.a(A,"hasVerticalScrollbar",A.prototype.gC);
t.defineProperty(A,{gC:"hasVerticalScrollbar"},r("Rs"),function(a){var b=this.Rs;if(b!==a){t.e(a,"boolean",A,"hasVerticalScrollbar");this.Rs=a;this.d("hasVerticalScrollbar",b,a);di(this)}});t.a(A,"hasHorizontalScrollbar",A.prototype.fC);t.defineProperty(A,{fC:"hasHorizontalScrollbar"},r("Qs"),function(a){var b=this.Qs;if(b!==a){t.e(a,"boolean",A,"hasHorizontalScrollbar");this.Qs=a;this.d("hasHorizontalScrollbar",b,a);di(this)}});t.a(A,"allowHorizontalScroll",A.prototype.Je);
t.defineProperty(A,{Je:"allowHorizontalScroll"},r("ms"),function(a){var b=this.ms;if(b!==a){t.e(a,"boolean",A,"allowHorizontalScroll");this.ms=a;this.d("allowHorizontalScroll",b,a);di(this)}});t.a(A,"allowVerticalScroll",A.prototype.Ke);t.defineProperty(A,{Ke:"allowVerticalScroll"},r("ps"),function(a){var b=this.ps;if(b!==a){t.e(a,"boolean",A,"allowVerticalScroll");this.ps=a;this.d("allowVerticalScroll",b,a);di(this)}});t.a(A,"scrollHorizontalLineChange",A.prototype.Xr);
t.defineProperty(A,{Xr:"scrollHorizontalLineChange"},r("Kt"),function(a){var b=this.Kt;if(b!==a){t.e(a,"number",A,"scrollHorizontalLineChange");a<0&&t.ga(a,">= 0",A,"scrollHorizontalLineChange");this.Kt=a;this.d("scrollHorizontalLineChange",b,a)}});t.a(A,"scrollVerticalLineChange",A.prototype.Yr);
t.defineProperty(A,{Yr:"scrollVerticalLineChange"},r("Lt"),function(a){var b=this.Lt;if(b!==a){t.e(a,"number",A,"scrollVerticalLineChange");a<0&&t.ga(a,">= 0",A,"scrollVerticalLineChange");this.Lt=a;this.d("scrollVerticalLineChange",b,a)}});t.a(A,"lastInput",A.prototype.H);t.defineProperty(A,{H:"lastInput"},r("dc"),function(a){s&&t.c(a,qe,A,"lastInput");this.dc=a});t.a(A,"firstInput",A.prototype.ic);t.defineProperty(A,{ic:"firstInput"},r("Tf"),function(a){s&&t.c(a,qe,A,"firstInput");this.Tf=a});
t.a(A,"currentCursor",A.prototype.uc);t.defineProperty(A,{uc:"currentCursor"},r("Fs"),function(a){t.e(a,"string",A,"currentCursor");if(!(this.Fs===a||a===""&&this.Fs===this.Ko)){this.Fs=a;if(a!==""){this.oa.style.cursor=a;document.body.style.cursor=a}else{this.oa.style.cursor=this.Qx;document.body.style.cursor=this.Qx}}});t.a(A,"defaultCursor",A.prototype.Qx);
t.defineProperty(A,{Qx:"defaultCursor"},r("Ko"),function(a){t.e(a,"string",A,"defaultCursor");var b=this.Ko;if(b!==a){this.Ko=a;this.d("defaultCursor",b,a)}});t.a(A,"hasGestureZoom",A.prototype.OF);t.defineProperty(A,{OF:"hasGestureZoom"},r("Qk"),function(a){var b=this.Qk;if(b!==a){t.e(a,"boolean",A,"hasGestureZoom");this.Qk=a;this.d("hasGestureZoom",b,a)}});t.a(A,"click",A.prototype.click);
t.defineProperty(A,{click:"click"},r("vh"),function(a){var b=this.vh;if(b!==a){a!==m&&t.e(a,"function",A,"click");this.vh=a;this.d("click",b,a)}});t.a(A,"doubleClick",A.prototype.wl);t.defineProperty(A,{wl:"doubleClick"},r("yh"),function(a){var b=this.yh;if(b!==a){a!==m&&t.e(a,"function",A,"doubleClick");this.yh=a;this.d("doubleClick",b,a)}});t.a(A,"contextClick",A.prototype.lr);
t.defineProperty(A,{lr:"contextClick"},r("wh"),function(a){var b=this.wh;if(b!==a){a!==m&&t.e(a,"function",A,"contextClick");this.wh=a;this.d("contextClick",b,a)}});t.a(A,"mouseOver",A.prototype.Qr);t.defineProperty(A,{Qr:"mouseOver"},r("Kh"),function(a){var b=this.Kh;if(b!==a){a!==m&&t.e(a,"function",A,"mouseOver");this.Kh=a;this.d("mouseOver",b,a)}});t.a(A,"mouseHover",A.prototype.Pr);
t.defineProperty(A,{Pr:"mouseHover"},r("Jh"),function(a){var b=this.Jh;if(b!==a){a!==m&&t.e(a,"function",A,"mouseHover");this.Jh=a;this.d("mouseHover",b,a)}});t.a(A,"mouseHold",A.prototype.Nr);t.defineProperty(A,{Nr:"mouseHold"},r("Ih"),function(a){var b=this.Ih;if(b!==a){a!==m&&t.e(a,"function",A,"mouseHold");this.Ih=a;this.d("mouseHold",b,a)}});t.a(A,"mouseDragOver",A.prototype.KC);
t.defineProperty(A,{KC:"mouseDragOver"},r("pt"),function(a){var b=this.pt;if(b!==a){a!==m&&t.e(a,"function",A,"mouseDragOver");this.pt=a;this.d("mouseDragOver",b,a)}});t.a(A,"mouseDrop",A.prototype.Mr);t.defineProperty(A,{Mr:"mouseDrop"},r("Hh"),function(a){var b=this.Hh;if(b!==a){a!==m&&t.e(a,"function",A,"mouseDrop");this.Hh=a;this.d("mouseDrop",b,a)}});t.a(A,"toolTip",A.prototype.is);
t.defineProperty(A,{is:"toolTip"},r("Qh"),function(a){var b=this.Qh;if(b!==a){a!==m&&t.c(a,of,A,"toolTip");this.Qh=a;this.d("toolTip",b,a)}});t.a(A,"contextMenu",A.prototype.contextMenu);t.defineProperty(A,{contextMenu:"contextMenu"},r("xh"),function(a){var b=this.xh;if(b!==a){a!==m&&t.c(a,of,A,"contextMenu");this.xh=a;this.d("contextMenu",b,a)}});t.a(A,"commandHandler",A.prototype.Od);
t.defineProperty(A,{Od:"commandHandler"},r("Xv"),function(a){var b=this.Xv;if(b!==a){t.c(a,va,A,"commandHandler");a.b!==m&&t.g("Cannot share CommandHandlers between Diagrams: "+a.toString());b!==m&&b.Ef(m);this.Xv=a;a.Ef(this)}});t.a(A,"toolManager",A.prototype.Rb);t.defineProperty(A,{Rb:"toolManager"},r("au"),function(a){var b=this.au;if(b!==a){t.c(a,mf,A,"toolManager");a.b!==m&&t.g("Cannot share ToolManagers between Diagrams: "+a.toString());b!==m&&b.Ef(m);this.au=a;a.Ef(this)}});
t.a(A,"defaultTool",A.prototype.uu);t.defineProperty(A,{uu:"defaultTool"},r("ew"),function(a){var b=this.ew;if(b!==a){t.c(a,tf,A,"defaultTool");this.ew=a;if(this.va===b)this.va=a}});t.a(A,"currentTool",A.prototype.va);t.defineProperty(A,{va:"currentTool"},r("$v"),function(a){var b=this.$v;if(b!==m){b.S&&b.doDeactivate();b.cancelWaitAfter();b.doStop()}if(a===m)a=this.uu;if(a!==m){t.c(a,tf,A,"currentTool");this.$v=a;a.Ef(this);a.doStart()}});t.m(A,{selection:"selection"},r("xA"));
t.a(A,"maxSelectionCount",A.prototype.DC);t.defineProperty(A,{DC:"maxSelectionCount"},r("it"),function(a){var b=this.it;if(b!==a){t.e(a,"number",A,"maxSelectionCount");if(a>=0&&!isNaN(a)){this.it=a;this.d("maxSelectionCount",b,a);if(!this.ha.eb){a=this.selection.count-a;if(a>0){this.na("ChangingSelection");for(var b=this.selection.Jf(),c=0;c<a;c++)b[c].Ha=o;this.na("ChangedSelection")}}}else t.ga(a,">= 0",A,"maxSelectionCount")}});t.a(A,"nodeSelectionAdornmentTemplate",A.prototype.NC);
t.defineProperty(A,{NC:"nodeSelectionAdornmentTemplate"},r("Iw"),function(a){var b=this.Iw;if(b!==a){t.c(a,of,A,"nodeSelectionAdornmentTemplate");this.Iw=a;this.d("nodeSelectionAdornmentTemplate",b,a)}});t.a(A,"groupSelectionAdornmentTemplate",A.prototype.bC);t.defineProperty(A,{bC:"groupSelectionAdornmentTemplate"},r("sw"),function(a){var b=this.sw;if(b!==a){t.c(a,of,A,"groupSelectionAdornmentTemplate");this.sw=a;this.d("groupSelectionAdornmentTemplate",b,a)}});
t.a(A,"linkSelectionAdornmentTemplate",A.prototype.zC);t.defineProperty(A,{zC:"linkSelectionAdornmentTemplate"},r("Aw"),function(a){var b=this.Aw;if(b!==a){t.c(a,of,A,"linkSelectionAdornmentTemplate");this.Aw=a;this.d("linkSelectionAdornmentTemplate",b,a)}});t.a(A,"isModified",A.prototype.ZF);t.defineProperty(A,{ZF:"isModified"},function(){var a=this.ha;return a===m?this.Wz:a.tl!==m?h:this.Wz&&this.Dj!==a.Wi},function(a){t.e(a,"boolean",A,"isModified");this.Wz=a;var b=this.ha;if(!a&&b)this.Dj=b.Wi});
t.a(A,"model",A.prototype.L);t.defineProperty(A,{L:"model"},r("bg"),function(a){var b=this.bg;if(b!==a){t.c(a,C,A,"model");b!==m&&(b.ha!==a.ha&&b.ha.XF)&&t.g("Do not replace a Diagram.model while a transaction is in progress.");this.Hg=o;this.Yo=h;this.Xg=o;var c=this.Uf;this.Uf=h;if(b!==m){b.Ny(this.bA);b instanceof P&&yh(this,b.qg);yh(this,b.lh)}this.bg=a;a.vx(this.aA);zh(this,a.lh);a instanceof P&&Ah(this,a.qg);a.Ny(this.aA);a.vx(this.bA);this.Uf=c;sf(this);if(b!==m)a.ha.isEnabled=b.ha.isEnabled}});
function xh(a,b,c){var d=a.pg(b);if(d!==m&&typeof c==="string")d.mc(c);else{d=m;for(a=a.Vk.f;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];if(i.ef!==m){i=i.ef.da(b);if(i!==m){d===m&&(d=[]);d.push(i)}}}if(d!==m)break}b=d;if(b!==m&&typeof c==="string")for(d=0;d<b.length;d++)b[d].mc(c)}}function si(a,b){var c=b.Lj;if(t.isArray(c)){var d=a.Vk.da(c);if(d===m)a.Vk.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function ui(a,b){var c=b.Lj;if(t.isArray(c)){var d=a.Vk.da(c);if(d!==m)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);d.length===0&&a.Vk.remove(c);break}}}
A.prototype.clear=A.prototype.clear=function(){var a=m;if(this.Wc!==m)a=this.Wc.ba;this.L.clear();for(var b=this.yb.length,c=0;c<b;c++)this.yb.j[c].clear();this.Ig.clear();this.jm.clear();this.vt.clear();this.il.clear();this.bt.clear();this.lb.clear();this.Qf.clear();this.Vk.clear();this.xA.clear();this.em=this.Uw=m;this.Ks=(new E(NaN,NaN,NaN,NaN)).freeze();if(a!==m){this.add(a);this.lb.remove(a)}};
A.prototype.reset=A.prototype.reset=function(){this.clear();this.yb=new z(Ze);this.pb=(new D(NaN,NaN)).freeze();this.Nb=1;this.mt=1E-4;this.ht=100;this.eu=(new D(NaN,NaN)).freeze();this.Os=(new E(NaN,NaN,NaN,NaN)).freeze();this.Gk=wh;this.Lk=cc;this.Fj=wh;this.rm=cc;this.Ts=this.Ss=dc;this.ss=(new Eb(16,16,16,16)).freeze();this.Zs=h;this.bu=eg;this.Ko="auto";this.bg=this.xh=this.Qh=this.Hh=this.pt=this.Ih=this.Jh=this.Kh=this.wh=this.yh=this.vh=m;this.Kj=o;this.jj=this.ij=this.js=this.Bh=h;this.ls=
this.ks=o;this.ps=this.ms=this.Rs=this.Qs=this.qs=this.os=this.sj=this.rj=this.qj=this.pj=this.nj=this.mj=this.oj=this.lj=this.ns=this.uj=this.kj=this.tj=h;this.Lt=this.Kt=16;this.Id=(new Eb(5)).freeze();this.it=999999999;this.Zc=m;Gh(this);Hh(this);this.Wc=m;this.L=new P;this.Fi=h;this.wb=new Ih;this.Fi=o};
A.prototype.rebuildParts=A.prototype.Kl=function(){for(var a=[],b=this.selection.f;b.next();){var c=b.value.data;c&&a.push(c)}b=this.L;b instanceof P&&yh(this,b.qg);yh(this,b.lh);zh(this,b.lh);b instanceof P&&Ah(this,b.qg);for(b=0;b<a.length;b++)if(c=this.pg(a[b]))c.Ha=h};function zh(a,b){if(b!==m){for(var c=a.L,d=t.Eb(b),e=0;e<d;e++){var g=t.rb(b,e);c.Mi(g)?Bh(a,g,o):Ch(a,g)}if(c instanceof P){for(e=0;e<d;e++){g=t.rb(b,e);c.Mi(g)&&wi(a,g)}for(c=a.links;c.next();)xi(c.value)}a.ky(o)}}
function Bh(a,b,c){if(!(b===f||b===m)&&!a.ha.eb&&!a.Qf.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);if(e instanceof T){qf(e);e=e.copy();if(e instanceof T){e.vj=d;a.add(e);e.data=b;c&&wi(a,b)}}}}A.prototype.getCategoryForNodeData=A.prototype.XB=function(a){var b=this.L,c=b.XB(a),d=o;b instanceof P&&(d=b.qy(a));d&&c===""&&(c="LinkLabel");return c};
A.prototype.findTemplateForNodeData=A.prototype.OI=function(a,b){var c=o,d=this.L;d instanceof P&&(c=d.ly(a));if(c){c=this.hy.da(b);if(c===m){c=this.hy.da("");if(c===m){if(t.wE===f){t.wE=h;t.trace('No Group template found for category "'+b+'"');t.trace("  Using default group template")}c=this.dE}}}else{c=this.Hy.da(b);if(c===m){c=this.Hy.da("");if(c===m){if(t.zE===f){t.zE=h;t.trace('No Node template found for category "'+b+'"');t.trace("  Using default node template")}c=this.gE}}}return c instanceof
T?c:m};function wi(a,b){var c=a.L;if(c instanceof P){var d=c.$b(b);if(d!==f){var e=c.PB(d),g=a.pg(b);if(e!==m&&g!==m&&g instanceof U){for(e=e.f;e.next();){var i=e.value;if(c.Mi(i)){if(g instanceof V&&c.zr(i)===d){var j=a.pg(i);if(j!==m)j.Wa=g}}else{j=a.Ui(i);if(j!==m){if(c.zn(i)===d)j.ia=g;if(c.An(i)===d)j.ma=g;for(var i=c.Al(i),k=0;k<i.length;k++)if(i[k]===d){g.ke=j;break}}}}c.gh(d)}c=c.zr(b);if(c!==f){c=a.di(c);if(c instanceof V)g.Wa=c}}}}
function Ah(a,b){if(b!==m){for(var c=t.Eb(b),d=0;d<c;d++)Ch(a,t.rb(b,d));a.ky(o)}}
function Ch(a,b){if(!(b===f||b===m)&&!a.ha.eb&&!a.Qf.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof W){qf(d);d=d.copy();if(d instanceof W){d.vj=c;var c=a.L,e=c.zn(b);if(e!==f){e=a.di(e);if(e instanceof U)d.ia=e}e=c.JF(b);d.hh=e;e=c.An(b);if(e!==f){e=a.di(e);if(e instanceof U)d.ma=e}e=c.LF(b);d.ji=e;c=c.Al(b);if(t.isArray(c))for(var e=t.Eb(c),g=0;g<e;g++){var i=a.di(t.rb(c,g));if(i!==m)i.ke=d}a.add(d);d.data=b}}}}
A.prototype.getCategoryForLinkData=A.prototype.WB=function(a){return this.L.WB(a)};A.prototype.findTemplateForLinkData=A.prototype.NI=function(a,b){var c=this.vy.da(b);if(c===m){c=this.vy.da("");if(c===m){if(t.yE===f){t.yE=h;t.trace('No Link template found for category "'+b+'"');t.trace("  Using default link template")}c=this.fE}}return c instanceof W?c:m};function yh(a,b){for(var c=t.Eb(b),d=0;d<c;d++)Dh(a,t.rb(b,d))}
function Dh(a,b){if(!(b===f||b===m)){var c=a.pg(b);if(c instanceof T){var d=c.xa;if(!(d===m||d.b!==a)){var e=a.L;if(e instanceof P&&c instanceof U){var g=e.$b(c.data);if(g!==f){for(var i=c.le;i.next();){var j=i.value.data;e.ng(g,j)}if(c.Yi){i=c.ke;if(i!==m){j=i.data;e.ng(g,j)}}if(c instanceof V)for(i=c.lc;i.next();){j=i.value.data;e.Mi(j)&&e.ng(g,j)}}}c.Ha=o;e=d.Ad(-1,c);e>=0&&a.pe(we,"parts",d,c,m,e,m);e=c.Hr;e!==m&&e(c,d,m)}}}}
A.prototype.findPartForKey=A.prototype.LI=function(a){if(a===m||a===f)return m;a=this.L.fh(a);if(a===m)return m;a=this.Qf.da(a);return a instanceof T?a:m};A.prototype.findNodeForKey=A.prototype.di=function(a){if(a===m||a===f)return m;a=this.L.fh(a);if(a===m)return m;a=this.Qf.da(a);return a instanceof U?a:m};A.prototype.findPartForData=A.prototype.pg=function(a){if(a===m)return m;a=this.Qf.da(a);return a instanceof T?a:m};
A.prototype.findNodeForData=A.prototype.DF=function(a){if(a===m)return m;a=this.Qf.da(a);return a instanceof U?a:m};A.prototype.findLinkForData=A.prototype.Ui=function(a){if(a===m)return m;a=this.Qf.da(a);return a instanceof W?a:m};t.a(A,"nodeTemplate",A.prototype.sG);t.defineProperty(A,{sG:"nodeTemplate"},function(){return this.Ai.da("")},function(a){var b=this.Ai.da("");if(b!==a){t.c(a,T,A,"nodeTemplate");this.Ai.add("",a);this.d("nodeTemplate",b,a);this.ha.eb||this.Kl()}});
t.a(A,"nodeTemplateMap",A.prototype.Hy);t.defineProperty(A,{Hy:"nodeTemplateMap"},r("Ai"),function(a){var b=this.Ai;if(b!==a){t.c(a,ra,A,"nodeTemplateMap");this.Ai=a;this.d("nodeTemplateMap",b,a);this.ha.eb||this.Kl()}});t.a(A,"groupTemplate",A.prototype.NF);t.defineProperty(A,{NF:"groupTemplate"},function(){return this.Pk.da("")},function(a){var b=this.Pk.da("");if(b!==a){t.c(a,V,A,"groupTemplate");this.Pk.add("",a);this.d("groupTemplate",b,a);this.ha.eb||this.Kl()}});t.a(A,"groupTemplateMap",A.prototype.hy);
t.defineProperty(A,{hy:"groupTemplateMap"},r("Pk"),function(a){var b=this.Pk;if(b!==a){t.c(a,ra,A,"groupTemplateMap");this.Pk=a;this.d("groupTemplateMap",b,a);this.ha.eb||this.Kl()}});t.a(A,"linkTemplate",A.prototype.hG);t.defineProperty(A,{hG:"linkTemplate"},function(){return this.Oj.da("")},function(a){var b=this.Oj.da("");if(b!==a){t.c(a,W,A,"linkTemplate");this.Oj.add("",a);this.d("linkTemplate",b,a);this.ha.eb||this.Kl()}});t.a(A,"linkTemplateMap",A.prototype.vy);
t.defineProperty(A,{vy:"linkTemplateMap"},r("Oj"),function(a){var b=this.Oj;if(b!==a){t.c(a,ra,A,"linkTemplateMap");this.Oj=a;this.d("linkTemplateMap",b,a);this.ha.eb||this.Kl()}});t.a(A,"isMouseCaptured",A.prototype.Gc);
t.defineProperty(A,{Gc:"isMouseCaptured"},r("Xz"),function(a){var b=this.oa;if(a){this.H.bubbles=o;b.removeEventListener("mousemove",this.On,o);b.removeEventListener("mousedown",this.Nn,o);b.removeEventListener("mouseup",this.Qn,o);b.removeEventListener("mousewheel",this.tg,o);b.removeEventListener("DOMMouseScroll",this.tg,o);b.removeEventListener("mouseout",this.Pn,o);window.addEventListener("mousemove",this.On,h);window.addEventListener("mousedown",this.Nn,h);window.addEventListener("mouseup",this.Qn,
h);window.addEventListener("mousewheel",this.tg,h);window.addEventListener("DOMMouseScroll",this.tg,h);window.addEventListener("mouseout",this.Pn,h);window.addEventListener("selectstart",this.preventDefault,o)}else{window.removeEventListener("mousemove",this.On,h);window.removeEventListener("mousedown",this.Nn,h);window.removeEventListener("mouseup",this.Qn,h);window.removeEventListener("mousewheel",this.tg,h);window.removeEventListener("DOMMouseScroll",this.tg,h);window.removeEventListener("mouseout",
this.Pn,h);window.removeEventListener("selectstart",this.preventDefault,o);b.addEventListener("mousemove",this.On,o);b.addEventListener("mousedown",this.Nn,o);b.addEventListener("mouseup",this.Qn,o);b.addEventListener("mousewheel",this.tg,o);b.addEventListener("DOMMouseScroll",this.tg,o);b.addEventListener("mouseout",this.Pn,o)}this.Xz=a});t.a(A,"position",A.prototype.position);
t.defineProperty(A,{position:"position"},r("pb"),function(a){var b=this.pb;if(!b.z(a)){t.c(a,D,A,"position");var c=this.ob.copy();c.x=b.x;c.y=b.y;if(b.Au(a))a=b;else if(!this.Bc){this.Bc=h;b=this.scale;fi(this,a,this.gc,this.oa.width/b,this.oa.height/b,this.Lk);this.Bc=o}this.pb=a.D();this.Ur(c,this.ob);sf(this)}});t.a(A,"grid",A.prototype.Ku);
t.defineProperty(A,{Ku:"grid"},function(){this.Wc===m&&Sh(this);return this.Wc},function(a){var b=this.Wc;if(b!==a){if(b===m){Sh(this);b=this.Wc}t.c(a,v,A,"grid");a.type!==ai&&t.g("Diagram.grid must be a Panel of type Panel.Grid");b.Y.remove(b);this.Wc=a;a.name="GRID";b.Y.add(a);uh(this);this.d("grid",b,a)}});t.m(A,{ob:"viewportBounds"},function(){var a=this.pb,b=this.Nb,c=this.oa,d=this.NA;d.$d(a.x,a.y,Math.max(c.width,0)/b,Math.max(c.height,0)/b);return d});t.a(A,"fixedBounds",A.prototype.by);
t.defineProperty(A,{by:"fixedBounds"},r("Os"),function(a){var b=this.Os;if(!b.z(a)){t.c(a,E,A,"fixedBounds");this.Os=a=a.D();ji(this);this.d("fixedBounds",b,a)}});t.m(A,{gc:"documentBounds"},r("Ks"));function ii(a,b){var c=a.Ks;if(!c.z(b)){b=b.D();a.Ks=b;a.Hj=o;di(a);a.na("DocumentBoundsChanged",m,c.copy());ci(a)}}t.a(A,"scale",A.prototype.scale);
t.defineProperty(A,{scale:"scale"},r("Nb"),function(a){var b=this.Nb;if(b!==a){t.h(a,A,"scale");this.Nb=a;var c=a;if(a<this.bj)c=this.bj;if(a>this.aj)c=this.aj;if(!isNaN(a)&&!this.Bc&&!this.Uf){this.Bc=h;var d=this.ob.copy(),e=this.oa.width/c,g=this.oa.height/c;d.width=this.oa.width/b;d.height=this.oa.height/b;var i=this.Ck.copy();if(isNaN(i.x))switch(this.ru){case Ac:i.x=0;break;case Bc:i.x=e-1;break;case mc:i.x=e/2;break;case cc:case Hc:i.x=e/2}if(isNaN(i.y))switch(this.ru){case zc:i.y=0;break;
case Gc:i.y=g-1;break;case mc:i.y=g/2;break;case cc:case Hc:i.y=g/2}var j=this.position,a=new D(j.x+i.x/b-i.x/a,j.y+i.y/b-i.y/a);fi(this,a,this.gc,e,g,this.Lk);this.position=a;this.Bc=o;e=this.ob;this.Nb=c;this.Ur(d,e)}uh(this);ci(this)}});t.a(A,"autoScale",A.prototype.Bx);t.defineProperty(A,{Bx:"autoScale"},r("Gk"),function(a){var b=this.Gk;if(b!==a){t.Va(a,A,A,"autoScale");this.Gk=a;this.d("autoScale",b,a);a!==wh&&di(this)}});t.a(A,"initialAutoScale",A.prototype.SF);
t.defineProperty(A,{SF:"initialAutoScale"},r("Fj"),function(a){var b=this.Fj;if(b!==a){t.Va(a,A,A,"initialAutoScale");this.Fj=a;this.d("initialAutoScale",b,a)}});t.a(A,"initialViewportSpot",A.prototype.kC);t.defineProperty(A,{kC:"initialViewportSpot"},r("Ts"),function(a){var b=this.Ts;if(b!==a){t.c(a,J,A,"initialViewportSpot");Tb(a)||t.g("initialViewportSpot must be a real Spot: "+a);this.Ts=a;this.d("initialViewportSpot",b,a)}});t.a(A,"initialDocumentSpot",A.prototype.jC);
t.defineProperty(A,{jC:"initialDocumentSpot"},r("Ss"),function(a){var b=this.Ss;if(b!==a){t.c(a,J,A,"initialDocumentSpot");Tb(a)||t.g("initialViewportSpot must be a real Spot: "+a);this.Ss=a;this.d("initialDocumentSpot",b,a)}});t.a(A,"minScale",A.prototype.bj);t.defineProperty(A,{bj:"minScale"},r("mt"),function(a){t.h(a,A,"minScale");var b=this.mt;if(b!==a&&a>0){this.mt=a;this.d("minScale",b,a);if(a>this.scale)this.scale=a}else t.ga(a,"> 0",A,"minScale")});t.a(A,"maxScale",A.prototype.aj);
t.defineProperty(A,{aj:"maxScale"},r("ht"),function(a){t.h(a,A,"maxScale");var b=this.ht;if(b!==a&&a>0){this.ht=a;this.d("maxScale",b,a);if(a<this.scale)this.scale=a}else t.ga(a,"> 0",A,"maxScale")});t.a(A,"zoomPoint",A.prototype.Ck);t.defineProperty(A,{Ck:"zoomPoint"},r("eu"),function(a){if(!this.eu.z(a)){t.c(a,D,A,"zoomPoint");this.eu=a=a.D();ji(this)}});t.a(A,"contentAlignment",A.prototype.ru);
t.defineProperty(A,{ru:"contentAlignment"},r("Lk"),function(a){var b=this.Lk;if(!b.z(a)){t.c(a,J,A,"contentAlignment");this.Lk=a=a.D();this.d("contentAlignment",b,a);di(this)}});t.a(A,"initialContentAlignment",A.prototype.TF);t.defineProperty(A,{TF:"initialContentAlignment"},r("rm"),function(a){var b=this.rm;if(!b.z(a)){t.c(a,J,A,"initialContentAlignment");this.rm=a=a.D();this.d("initialContentAlignment",b,a)}});t.a(A,"padding",A.prototype.padding);
t.defineProperty(A,{padding:"padding"},r("Id"),function(a){typeof a==="number"?a=new Eb(a):t.c(a,Eb,A,"padding");var b=this.Id;if(!b.z(a)){this.Id=a=a.D();ji(this);this.d("padding",b,a)}});t.m(A,{sk:"nodes"},function(){return this.vt.f});t.m(A,{links:"links"},function(){return this.bt.f});t.m(A,{cj:"parts"},function(){return this.lb.f});t.a(A,"layout",A.prototype.wb);
t.defineProperty(A,{wb:"layout"},r("Zc"),function(a){var b=this.Zc;if(b!==a){t.c(a,Ih,A,"layout");if(b!==m){b.b=m;b.group=m}this.Zc=a;a.b=this;a.group=m;this.rs=h;this.d("layout",b,a)}});A.prototype.layoutDiagram=A.prototype.wJ=function(a){Fh(this);a&&this.ky(h);li(this)};A.prototype.invalidateAllLayouts=A.prototype.ky=function(a){for(var b=this.il.f;b.next();)yi(this,b.value,a);if(this.wb!==m)a?this.wb.Re=o:this.wb.v()};
function yi(a,b,c){if(b!==m){for(var d=b.bl.f;d.next();)yi(a,d.value,c);if(b.wb!==m)c?b.wb.Re=o:b.wb.v()}}function li(a){for(var b=a.il.f;b.next();)zi(a,b.value);b=a.wb;if(b!==m&&!b.Re){b.doLayout(a);b.Re=h}a.rs=o}function zi(a,b){if(b!==m){for(var c=b.bl.f;c.next();)zi(a,c.value);c=b.wb;if(c!==m&&!c.Re){b.hA=!b.location.aa();c.doLayout(b);b.v(Ai);c.Re=h}}}t.a(A,"isTreePathToChildren",A.prototype.xf);
t.defineProperty(A,{xf:"isTreePathToChildren"},r("Zs"),function(a){var b=this.Zs;if(b!==a){t.e(a,"boolean",A,"isTreePathToChildren");this.Zs=a;this.d("isTreePathToChildren",b,a);if(!this.ha.eb)for(a=this.sk;a.next();)Bi(a.value)}});t.a(A,"isCollapsingExpanding",A.prototype.wf);t.defineProperty(A,{wf:m},r("Tz"),ba("Tz"));function Ci(a,b){var c=a.gw.da(b);if(c!==m)return c;c=a.gw.da(b.toLowerCase());if(c!==m)return c;t.g("Unknown DiagramEvent name: "+b);return m}
A.prototype.addDiagramListener=A.prototype.RA=function(a,b){t.e(a,"string",A,"addDiagramListener:name");t.e(b,"function",A,"addDiagramListener:listener");var c=Ci(this,a);c!==m&&c.add(b)};A.prototype.removeDiagramListener=A.prototype.ZC=function(a,b){t.e(a,"string",A,"removeDiagramListener:name");t.e(b,"function",A,"addDiagramListener:listener");var c=Ci(this,a);c!==m&&c.remove(b)};
A.prototype.raiseDiagramEvent=A.prototype.na=function(a,b,c){s&&t.e(a,"string",A,"raiseDiagramEvent:name");var d=Ci(this,a),e=new re;e.b=this;var g=this.fw.da(a),a=g!==m?g:this.fw.da(a.toLowerCase());e.name=a;if(b!==f)e.hv=b;if(c!==f)e.Vu=c;for(b=d.f;b.next();){c=b.value;c(e)}return e.cancel};function ag(a,b){for(var c=a.yl(b,function(a){return a.ba},function(a){return a instanceof W},h).f;c.next();){var d=c.value;d.Xe===Rf&&Sf(d)}}
function la(a,b,c){if(a.Oc===m)a.Oc=new Di;var d=m;a.Oc.Dl||(d=c!==m?c.Wa:m);if(a.Oc.Dl||a.Oc.group!==d){if(d===m){a.Hj&&ii(a,a.de());b=a.gc.copy();b.uf(100,100);Ei(a.Oc,b);for(b=a.sk;b.next();){var c=b.value,e=c.xa;e===m||(!e.visible||e.ed)||Fi(a,c)}}else{b=d.ta.copy();b.uf(20,20);Ei(a.Oc,b);for(b=d.lc;b.next();){c=b.value;c instanceof U&&Fi(a,c)}}a.Oc.group=d;a.Oc.Dl=o}else b&&Gi(a.Oc);return a.Oc}
function Fi(a,b){if(b!==m&&b.canAvoid()){for(var c=b.getAvoidableRectangle(),d=a.Oc.pl,e=a.Oc.ol,g=c.x+c.width,i=c.y+c.height,j=c.x;j<g;j=j+d){for(var k=c.y;k<i;k=k+e)Hi(a.Oc,j,k);Hi(a.Oc,j,i)}for(k=c.y;k<i;k=k+e)Hi(a.Oc,g,k);Hi(a.Oc,g,i)}}function Ii(a,b){if(a.Oc!==m&&!a.Oc.Dl&&(b===m||b.canAvoid()))a.Oc.Dl=h}
function Oh(a,b,c){if(Bf!==m){c instanceof A||(c=m);var d=If;if(c!==d){d!==m&&d.Rb.fe!==m&&d.Rb.fe.GB();c!==m&&c.Rb.fe!==m&&c.Rb.fe.FB()}If=c;if(c===m)return h;d=c.Rb.fe;if(d!==m){a!==m&&(b=c.Gg(a));c.dc.F=b;d.uF()}return h}return o}
function Qh(a,b,c,d){if(Bf!==m){d===m&&(d=m);var e=If;if(d!==e){e!==m&&e.Rb.fe!==m&&e.Rb.fe.GB();d!==m&&d.Rb.fe!==m&&d.Rb.fe.FB()}If=d;if(d===m){Bf.doCancel();return h}if(d!==a){a=c;b!==m&&(a=d.Gg(b));d.dc.F=a;b=d.Rb.fe;b!==m&&b.vF();Bf!==m&&Bf.doCancel();return h}}return o}t.a(A,"autoScrollRegion",A.prototype.bB);
t.defineProperty(A,{bB:"autoScrollRegion"},r("ss"),function(a){typeof a==="number"?a=new Eb(a):t.c(a,Eb,A,"autoScrollRegion");var b=this.ss;if(!b.z(a)){this.ss=a=a.D();ji(this);this.d("autoScrollRegion",b,a)}});
function $f(a){if(a.wg===m){a.wg={};var b;b=a.va!==a.Rb.fe?a.$D:a.aE;a.wg.isEnabled=h;var c=setInterval(function(){var b=c;if(a.wg!==m&&a.wg.isEnabled){a.wg=m;clearInterval(b);b=Zf(a,a.Sv);if(!b.mk(a.position)){a.position=b;a.H.F=a.LD(a.Sv);a.va.doMouseMove();a.Hj=h;ii(a,a.de());a.ti=h;a.update();$f(a)}}},b);a.wg.id=c}}function Df(a){if(a.wg!==m){a.wg.isEnabled&&clearInterval(a.wg.id);a.wg=m}}
function Zf(a,b){var c=a.position,d=a.bB;if(d.top<=0&&d.left<=0&&d.right<=0&&d.bottom<=0)return c;var e=a.ob,g=new E(0,0,e.width,e.height),e=new D(0,0);if(b.x>=g.x&&b.x<g.x+d.left){var i=Math.max(a.Xr,1),i=i|0;e.x=e.x-i;if(b.x<g.x+d.left/2)e.x=e.x-i;if(b.x<g.x+d.left/4)e.x=e.x-4*i}else if(b.x<=g.x+g.width&&b.x>g.x+g.width-d.right){i=Math.max(a.Xr,1);i=i|0;e.x=e.x+i;if(b.x>g.x+g.width-d.right/2)e.x=e.x+i;if(b.x>g.x+g.width-d.right/4)e.x=e.x+4*i}if(b.y>=g.y&&b.y<g.y+d.top){i=Math.max(a.Yr,1);i=i|0;
e.y=e.y-i;if(b.y<g.y+d.top/2)e.y=e.y-i;if(b.y<g.y+d.top/4)e.y=e.y-4*i}else if(b.y<=g.y+g.height&&b.y>g.y+g.height-d.bottom){i=Math.max(a.Yr,1);i=i|0;e.y=e.y+i;if(b.y>g.y+g.height-d.bottom/2)e.y=e.y+i;if(b.y>g.y+g.height-d.bottom/4)e.y=e.y+4*i}if(!e.mk(new D(0,0))){d=a.scale;c=new D(c.x+e.x/d,c.y+e.y/d)}return c}
A.prototype.makeImage=A.prototype.yJ=function(a){if(this.oa===m)return m;typeof a!=="object"&&t.g("properties argument must be an Object.");this.Ro=o;Rh(this);var b=document.createElement("canvas");b.width=this.oa.width;b.height=this.oa.height;var c=b.getContext("2d");uh(this);this.og(c);Rh(this);this.Ro=h;c=new Image;c.src=b.toDataURL(a.type,a.details);return c};
A.prototype.makeImageData=A.prototype.zJ=function(a){if(this.oa===m)return"";typeof a!=="object"&&t.g("properties argument must be an Object.");this.Ro=o;Rh(this);var b=document.createElement("canvas");b.width=this.oa.width;b.height=this.oa.height;var c=b.getContext("2d");uh(this);this.og(c);Rh(this);this.Ro=h;return b.toDataURL(a.type,a.details)};
A.prototype.renderJson=A.prototype.ug=function(a){this.zh=new ra;this.Ag=new ya;if(a instanceof Object&&a._tabString!==f)this.Ag.GA=a._tabString;Ji(this,this);this.zh.clear();a=this.Ag.toString();this.Ag=m;return a};
function Ji(a,b){if(b instanceof Object&&(!(b instanceof T)||b.kb()))if(!(b instanceof Q)||b.visible)if(!(b instanceof Ze)||b.visible){var c=a.Ag;if(b instanceof D)c.add('"'+eb(b)+'"');else if(b instanceof K)c.add('"'+qb(b)+'"');else if(b instanceof E)c.add('"'+zb(b)+'"');else if(b instanceof Eb)c.add('"'+Kb(b)+'"');else if(b instanceof J)c.add('"'+Sb(b)+'"');else{var d;b instanceof Fd?d=a.zh.da(b):b instanceof Me&&(d=a.zh.da(b));d=typeof d==="number"?d:-1;if(d>-1)c.add('{ "class":"ref", "id":'+d+
" }");else{c.Ej++;c.add('{ "class": "'+t.Vi(b)+'"');d=-1;if(b instanceof Fd){d=a.zh.count;a.zh.add(b,d)}else if(b instanceof Me){d=a.zh.count;a.zh.add(b,d)}d>-1&&c.add(', "id":'+d);b instanceof Q?b.ug():Ki(a,b,Object.getPrototypeOf(b));c.add(" }");Ja(c)}}}}function Ki(a,b,c){if(c&&c.constructor!==Object){Ki(a,b,Object.getPrototypeOf(c));if(c.constructor){c=c.constructor.kH;if(c instanceof Array)for(var d=0;d<c.length;d++){var e=c[d];if(typeof e==="string"){var g=t.Za(b,e);Li(a,e,g)}}}}}
function Li(a,b,c){if(c!==f){var d=a.Ag;d.add(",");Ka(d);d.add('"'+b+'": ');Mi(a,c)}}
function Mi(a,b){var c=a.Ag;if(b===f)c.add("undefined");else if(b===m)c.add("null");else if(b===h)c.add("true");else if(b===o)c.add("false");else if(typeof b==="string")c.add(a.L.quote(b));else if(typeof b==="number"){b===Infinity&&c.add("9e9999");b===-Infinity&&c.add("-9e9999");isNaN(b)?c.add('{"class":"NaN"}'):c.add(b.toString())}else if(typeof b==="function")c.add("null");else if(t.isArray(b)){c=a.Ag;c.Ej++;for(var d=t.Eb(b),e=o,g=0;g<d;g++){var i=t.rb(b,g);if(typeof i==="object"){e=h;break}}c.add("[");
e&&Ka(c);for(g=0;g<d;g++){i=t.rb(b,g);if(i!==f){if(g>0){c.add(",");e&&Ka(c)}Mi(a,i)}}e&&c.add(" ");c.add("]");Ja(c)}else if(b instanceof qa)c.add(a.L.quote(b.toString()));else if(b instanceof ra){c=a.Ag;c.Ej++;c.add("{");Ka(c);d=b.f;for(e=h;d.next();){g=d.key;i=d.value;if(e)e=o;else{c.add(",");Ka(c)}c.add('"'+g+'": ');Mi(a,i)}c.add(" }");Ja(c)}else if(b instanceof z||b instanceof ta||b.f!==f){c=a.Ag;c.Ej++;c.add("[");Ka(c);d=b.f;for(e=0;d.next();){g=d.value;if(g!==f){if(e>0){c.add(",");Ka(c)}Mi(a,
g);e++}}c.add(" ]");Ja(c)}else b instanceof Object?Ji(a,b):c.add(b.toString())}A.inherit=function(a,b){t.ua(a,b)};function Ni(a){A.call(this,a);this.ju=h;this.fk=o;this.Pa=h;this.ru=ec;this.wb=new Oi}t.J("Palette",Ni);t.ua(Ni,A);
function Pi(a){A.call(this,a);this.Bc=h;this.Ci=m;var a=new T,b=new X;b.stroke="magenta";b.Ta=2;b.fill=m;b.name="BOXSHAPE";a.$n="BOXSHAPE";a.Jr="BOXSHAPE";a.add(b);this.am=a;a=new Qi;a.Ef(this);this.Rb.ne.kc(0,a);var c=this;this.PC=function(){Ri(c)};this.OC=function(){if(c.Ci!==m){ji(c);uh(c)}};this.Pa=h;this.Sh=this.Ld=o;this.Bx=gi;this.Rb.Gl=vf;this.Bc=o}t.J("Overview",Pi);t.ua(Pi,A);
Pi.prototype.og=function(){this.Gb===m&&t.g("No div specified");this.oa===m&&t.g("No canvas specified");if(this.ti){var a=this.Ci;if(a!==m){var b=this.yg;b.Nv="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.oa.width,this.oa.height);var c=this.ae;c.reset();this.Nb!==1&&c.scale(this.scale);(this.position.x!==0||this.position.y!==0)&&c.translate(-this.pb.x,-this.pb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.La,c.Ma);for(var d=this.ob,e=a.yb.length,c=0;c<e;c++)for(var g=b,i=d,j=a.yb.j[c].lb,k=j.length,
l=0;l<k;l++){var n=j.j[l];n.ta.ie(i)&&n.og(g,this)}a=this.yb.length;for(c=0;c<a;c++)this.yb.j[c].og(b,this);s&&(s.NB||s.gr)&&s.LB(b,this);this.ti=this.um=o}}};t.a(Pi,"observed",Pi.prototype.tG);
t.defineProperty(Pi,{tG:"observed"},r("Ci"),function(a){var b=this.Ci;a!==m&&t.c(a,A,Pi,"observed");if(b!==a&&!(a instanceof Pi)){if(b!==m){this.remove(this.lg);b.ZC("ViewportBoundsChanged",this.PC);b.ZC("DocumentBoundsChanged",this.OC);b.At.remove(this)}this.Ci=a;if(a!==m){a.RA("ViewportBoundsChanged",this.PC);a.RA("DocumentBoundsChanged",this.OC);a.At.add(this);this.add(this.lg);Ri(this)}ji(this);this.d("observed",b,a)}});t.a(Pi,"box",Pi.prototype.lg);
t.defineProperty(Pi,{lg:"box"},r("am"),function(a){var b=this.am;if(b!==a){this.am=a;this.d("box",b,a)}});function Ri(a){var b=a.lg;if(b!==m){var c=a.Ci;if(c!==m){a.ti=h;var c=c.ob,d=b.Zn;d.pa=new K(c.width,c.height);a=2/a.scale;if(d instanceof X)d.Ta=a;b.location=new D(c.x-a/2,c.y-a/2)}}}Pi.prototype.de=function(){var a=this.Ci;return a===m?new E(0,0,0,0):a.gc};Pi.prototype.Ur=function(a){if(!this.Bc){bi(this);uh(this);ci(this);ji(this);Ri(this);this.na("ViewportBoundsChanged",a)}};
function Qi(){tf.call(this);this.name="MoveBox"}t.ua(Qi,tf);Qi.prototype.doStart=Qi.prototype.Ux=function(){this.S=this.b.Gc=h};Qi.prototype.doMouseMove=Qi.prototype.eh=function(){if(this.S){var a=this.b;if(!(a===m||a.Ci===m)){var b=a.Ci,c=b.ob,d=a.H.F;b.position=new D(d.x-c.width/2,d.y-c.height/2);sf(a)}}};Qi.prototype.doMouseUp=Qi.prototype.Oe=function(){this.S&&this.doMouseMove();this.stopTool()};Qi.prototype.doStop=Qi.prototype.Si=function(){this.S=o;var a=this.b;a.Gc=o;Ri(a)};
function Me(a){t.Lb(this);this.Na=o;if(a===f){this.K=Ne;this.dm="black"}else if(typeof a==="string"){this.K=Ne;this.dm=a}else{s&&t.Va(a,Me,Me,"constructor:type");this.K=a;this.dm="black"}a=this.K;if(a===Oe){this.Mm=ec;this.mm=oc}else if(a===Pe)this.mm=this.Mm=mc;else this.mm=this.Mm=Yb;this.St=0;this.Ms=NaN;this.vz=this.wz=this.Pf=this.Ct=this.Nf=m}t.J("Brush",Me);var Ne;Me.Solid=Ne=t.l(Me,"Solid",0);var Oe;Me.Linear=Oe=t.l(Me,"Linear",1);var Pe;Me.Radial=Pe=t.l(Me,"Radial",2);var Si;
Me.Pattern=Si=t.l(Me,"Pattern",2);Me.prototype.copy=Me.prototype.copy=function(){var a=new Me;a.K=this.K;a.dm=this.dm;a.Mm=this.Mm;a.mm=this.mm;a.St=this.St;a.Ms=this.Ms;if(this.Nf!==m)a.Nf=this.Nf.copy();a.Ct=this.Ct;return a};Me.prototype.Ka=function(){this.freeze();Object.freeze(this);return this};Me.prototype.freeze=function(){this.Na=h;this.Nf!==m&&this.Nf.freeze();return this};
Me.prototype.Ba=function(){Object.isFrozen(this)&&t.g("cannot thaw constant: "+this);this.Na=o;this.Nf!==m&&this.Nf.Ba();return this};Me.prototype.toString=function(){var a="Brush(";if(this.type===Ne)a=a+this.color;else{a=this.type===Oe?a+"Linear ":this.type===Pe?a+"Radial ":this.type===Si?a+"Pattern ":a+"(unknown) ";a=a+(this.start+" "+this.end);if(this.nn!==m)for(var b=this.nn.f;b.next();)a=a+(" "+b.key+":"+b.value)}return a+")"};
Me.prototype.addColorStop=Me.prototype.addColorStop=function(a,b){t.u(this);(a===m||a>1||a<0)&&t.ga(a,"0 <= loc <= 1",Me,"addColorStop:loc");t.e(b,"string",Me,"addColorStop:color");if(this.Nf===m)this.Nf=new ra("number","string");this.Nf.add(a,b);if(this.K===Ne)this.type=Oe;this.Pf=m};t.a(Me,"type",Me.prototype.type);
t.defineProperty(Me,{type:"type"},r("K"),function(a){t.u(this,a);t.Va(a,Me,Me,"type");this.K=a;if(Wb(this.start))if(a===Oe)this.start=ec;else if(a===Pe)this.start=mc;if(Wb(this.end))if(a===Oe)this.end=oc;else if(a===Pe)this.end=mc;this.Pf=m});t.a(Me,"color",Me.prototype.color);t.defineProperty(Me,{color:"color"},r("dm"),function(a){t.u(this,a);t.e(a,"string",Me,"color");this.dm=a;this.Pf=m});t.a(Me,"start",Me.prototype.start);
t.defineProperty(Me,{start:"start"},r("Mm"),function(a){t.u(this,a);a instanceof J||t.wc(a,"Spot",Me,"start");this.Mm=a.D();this.Pf=m});t.a(Me,"end",Me.prototype.end);t.defineProperty(Me,{end:"end"},r("mm"),function(a){t.u(this,a);a instanceof J||t.wc(a,"Spot",Me,"end");this.mm=a.D();this.Pf=m});t.a(Me,"startRadius",Me.prototype.eo);t.defineProperty(Me,{eo:"startRadius"},r("St"),function(a){t.u(this,a);t.h(a,Me,"startRadius");a<0&&t.ga(a,">= zero",Me,"startRadius");this.St=a;this.Pf=m});
t.a(Me,"endRadius",Me.prototype.rn);t.defineProperty(Me,{rn:"endRadius"},r("Ms"),function(a){t.u(this,a);t.h(a,Me,"endRadius");a<0&&t.ga(a,">= zero",Me,"endRadius");this.Ms=a;this.Pf=m});t.a(Me,"colorStops",Me.prototype.nn);t.defineProperty(Me,{nn:"colorStops"},r("Nf"),function(a){t.u(this,a);s&&t.c(a,ra,Me,"colorStops");this.Nf=a;this.Pf=m});t.a(Me,"pattern",Me.prototype.pattern);t.defineProperty(Me,{pattern:"pattern"},r("Ct"),function(a){t.u(this,a);this.Ct=a;this.Pf=m});
Me.randomColor=function(a,b){a===f&&(a=128);if(s){t.h(a,Me,"randomColor:min");(a<0||a>255)&&t.ga(a,"0 <= min <= 255",Me,"randomColor:min")}b===f&&(b=Math.max(a,255));if(s){t.h(b,Me,"randomColor:max");(b<a||b>255)&&t.ga(b,"min <= max <= 255",Me,"randomColor:max")}var c=Math.abs(b-a);return"#"+Math.floor(a+Math.random()*c).toString(16)+Math.floor(a+Math.random()*c).toString(16)+Math.floor(a+Math.random()*c).toString(16)};
function Q(){t.Lb(this);this.Uj=m;this.vb="";this.vd=this.Yg=h;this.sh=this.th=m;this.pb=(new D(NaN,NaN)).freeze();this.Vd=(new K(NaN,NaN)).freeze();this.Mc=Sc;this.Zf=Kc;this.ae=new kb;this.li=new kb;this.Bm=new kb;this.Nb=1;this.Sb=0;this.Qg=Og;this.Mp=(new Eb(0)).freeze();this.Dc=(new E(NaN,NaN,NaN,NaN)).freeze();this.Cb=(new E(NaN,NaN,NaN,NaN)).freeze();this.Nc=(new E(0,0,NaN,NaN)).freeze();this.Lc=this.cc=this.Rk=this.tm=h;this.fq=m;this.Fg=Yb;this.Cg=10;this.Bg=Ti;this.Eg=0;this.$o=m;this.bp=
this.ap=o;this.cp=Infinity;this.Wg=Yb;this.Tg=10;this.Sg=Ti;this.Vg=0;this.Qq=m;this.Sq=this.Rq=o;this.Tq=Infinity;this.md=m;this.qa=cc;this.tp=o;this.ro=cc;this.uq=0;this.Zj=1;this.M=0;this.wj=1;this.xq=-Infinity;this.wq=0;this.yq=Jc;this.zq=Ui;this.Eo="";this.xh=this.Qh=this.Hh=this.Up=this.Tp=this.Ih=this.Jh=this.Kh=this.Wp=this.Vp=this.wh=this.yh=this.vh=m;this.np=o;this.Tb=this.mo=this.po=this.oo=this.no=m;this.$l=o;this.Mk=m;this.IA=new E(NaN,NaN,NaN,NaN);this.xo=o;this.yo=m;this.Zl=o;this.Di=
m}t.J("GraphObject",Q);
Q.prototype.jb=function(a){a.vb=this.vb;a.Yg=this.Yg;a.vd=this.vd;a.th=this.th;a.sh=this.sh;a.pb.Ua(this.pb);a.Vd.Ua(this.Vd);a.Mc=this.Mc.D();a.Zf=this.Zf.D();a.Nb=this.Nb;a.Sb=this.Sb;a.Qg=this.Qg;a.Mp.Ua(this.Mp);a.Dc.Ua(this.Dc);a.Cb.Ua(this.Cb);a.Nc.Ua(this.Nc);a.fq=this.fq;a.Fg=this.Fg.D();a.Cg=this.Cg;a.Bg=this.Bg;a.Eg=this.Eg;a.$o=this.$o;a.ap=this.ap;a.bp=this.bp;a.cp=this.cp;a.Wg=this.Wg.D();a.Tg=this.Tg;a.Sg=this.Sg;a.Vg=this.Vg;a.Qq=this.Qq;a.Rq=this.Rq;a.Sq=this.Sq;a.Tq=this.Tq;a.qa=
this.qa.D();a.tp=this.tp;a.ro=this.ro.D();a.uq=this.uq;a.Zj=this.Zj;a.M=this.M;a.wj=this.wj;a.xq=this.xq;a.wq=this.wq;a.yq=this.yq.D();a.zq=this.zq;a.Eo=this.Eo;a.vh=this.vh;a.yh=this.yh;a.wh=this.wh;a.Vp=this.Vp;a.Wp=this.Wp;a.Kh=this.Kh;a.Jh=this.Jh;a.Ih=this.Ih;a.Tp=this.Tp;a.Up=this.Up;a.Hh=this.Hh;a.Qh=this.Qh;a.xh=this.xh;a.np=this.np;a.no=this.no;a.oo=this.oo;a.po=this.po;a.mo=this.mo;a.Tb=this.Tb;a.$l=this.$l;if(this.Mk instanceof Array){a.Mk=this.Mk.slice(0);for(var b=0;b<this.Mk.length;b++){var c=
this.Mk[b];a[c]=this[c]}}a.Zl=this.Zl};Q.prototype.dh=function(a){a.md=m;a.Di=m;a.N()};Q.prototype.copy=Q.prototype.copy=function(){var a=new this.constructor;this.jb(a);return a};Q.prototype.toString=function(){return t.Vi(Object.getPrototypeOf(this))+"#"+t.jc(this)};var Vi;Q.None=Vi=t.l(Q,"None",0);var Og;Q.Default=Og=t.l(Q,"Default",0);var Kd;Q.Fill=Kd=t.l(Q,"Fill",3);var Pg;Q.Uniform=Pg=t.l(Q,"Uniform",1);var Qg;Q.UniformToFill=Qg=t.l(Q,"UniformToFill",2);var Wi;
Q.Vertical=Wi=t.l(Q,"Vertical",4);var Xi;Q.Horizontal=Xi=t.l(Q,"Horizontal",5);Q.prototype.pe=function(a,b,c,d,e,g,i){var j=this.ba;if(j!==m){j.Jl(a,b,c,d,e,g,i);if(this.$l&&c===this&&a===ue){a=this.vr();if(a!==m)for(c=this.Tb.f;c.next();){d=c.value;e=a.data;g=d.co;g!==m&&(e=a.Pe(g));if(e!==m){d.PD(this,e,b);g=d.co;if(g!==m){e=a;g!==""&&(e=a.Pe(g));if(e!==m){g=d.Ql;if(g!==m){i=a;g!==""&&(i=a.Pe(g));i!==m&&d.QD(i,e,b)}}}}}}}};Q.prototype.d=function(a,b,c){this.pe(ue,a,this,b,c)};
function Yi(a,b,c,d,e){var g=a.Dc,i=a.Bm;i.reset();Zi(a,i,b,c,d,e);a.Bm=i;g.x=b;g.y=c;g.width=d;g.height=e;i.my()||i.KD(g)}Q.prototype.SB=function(a,b){if(this.vd===o)return o;var c=this.ja,d=a.$h(b);return nb(a.x,a.y,0,0,0,c.height)<d||nb(a.x,a.y,0,c.height,c.width,c.height)<d||nb(a.x,a.y,c.width,c.height,c.width,0)<d||nb(a.x,a.y,c.width,0,0,0)<d?h:o};
function $i(a,b,c,d){if(a instanceof v)for(var e=a.sa.length;e--;){var g=a.sa.j[e];if(g.visible){var i=g.ta,j=a.ta;if(!(i.x>j.width||i.y>j.height||i.x+i.width<0||i.y+i.height<0)){$i(g,b,c,d);i=g;b!==m&&(i=b(i));i&&(c===m||c(i))&&d.add(g)}}}}
Q.prototype.containsPoint=Q.prototype.ka=function(a){s&&t.c(a,D,Q,"containsPoint:p");var b=Lb(this.transform,a),c=this.ta;if(t.bx){var d=this.ja,e=this.zl()*(this.b!==m?this.b.scale:1),g=1/e;if(d.width*e<10&&d.height*e<10)return Jb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Kd!==f||this instanceof X?Jb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.ka(b))?this.yo&&!this.yo.ka(b)?o:this.sh!==m&&c.ka(b)||this.th!==m&&this.Nc.ka(a)?h:this.Ni(a):o};
Q.prototype.Ni=function(a){var b=this.ja;return Jb(0,0,b.width,b.height,a.x,a.y)};Q.prototype.containsRect=Q.prototype.rl=function(a){s&&t.c(a,E,Q,"containsRect:r");if(this.Qa===0)return this.ta.rl(a);var b=this.ja,b=new E(0,0,b.width,b.height),c=this.transform;return b.ka(c.fi(new D(a.x,a.y)))&&b.ka(c.fi(new D(a.x,a.bottom)))&&b.ka(c.fi(new D(a.right,a.bottom)))&&b.ka(c.fi(new D(a.right,a.y)))};
Q.prototype.containedInRect=Q.prototype.qu=function(a,b){s&&t.c(a,E,Q,"containedInRect:r");if(b===f)return a.rl(this.ta);var c=this.ja;return!a.ka(b.Bb(new D(0,0)))||!a.ka(b.Bb(new D(0,c.height)))||!a.ka(b.Bb(new D(c.width,c.height)))||!a.ka(b.Bb(new D(c.width,0)))?o:h};
Q.prototype.intersectsRect=Q.prototype.ie=function(a,b){s&&t.c(a,E,Q,"intersectsRect:r");if(b===f){b=this.transform;if(this.Qa===0)return a.ie(this.ta)}var c=this.ja,d=b,e=new D(0,0),g=new D(0,c.height),i=new D(c.width,c.height),j=new D(c.width,0);if(a.ka(d.Bb(e))||a.ka(d.Bb(g))||a.ka(d.Bb(i))||a.ka(d.Bb(j)))return h;c=new E(0,0,c.width,c.height);return c.ka(d.fi(new D(a.x,a.y)))||c.ka(d.fi(new D(a.x,a.bottom)))||c.ka(d.fi(new D(a.right,a.bottom)))||c.ka(d.fi(new D(a.right,a.y)))||id(a,e,g)||id(a,
g,i)||id(a,i,j)||id(a,j,e)?h:o};Q.prototype.getDocumentPoint=Q.prototype.zb=function(a){Wb(a)&&t.g("Spot must be real");var b=this.ja,a=new D(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.ce.Bb(a);return a};Q.prototype.getDocumentAngle=Q.prototype.yn=function(){var a=this.ce;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};Q.prototype.getDocumentScale=Q.prototype.zl=function(){var a=this.Nb;return this.Y!==m?a*this.Y.zl():a};Q.prototype.getLocalPoint=Q.prototype.YB=function(a){return this.ce.fi(a.copy())};
Q.prototype.getNearestIntersectionPoint=Q.prototype.Ju=function(a,b,c){var d=this.transform.copy();d.Lu();if(this.Zg!==m)return hd(this.ta,a,b,c);if(!(this instanceof v)||this instanceof v&&this.background!==m){var e=Lb(d,a),b=Lb(d,b),a=new D,b=hd(new E(0,0,this.ja.width,this.ja.height),e,b,a),a=Lb(this.transform,a);c.x=a.x;c.y=a.y;return b}if(this instanceof v&&(this.Zg===m||this.Zg===f)){e=this.sa.j;a=Lb(d,a);d=Lb(d,b);c.set(d);for(var g=(d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y),b=o,i=e.length,j=
new D,k=0;k<i;k++){var l=e[k];if(l.visible&&l.Ju(a,d,j)){b=h;l=(a.x-j.x)*(a.x-j.x)+(a.y-j.y)*(a.y-j.y);if(l<g){g=l;c.set(j)}}}c.transform(this.transform);return b}t.g("Unknown GraphObject case");return o};
function ph(a,b,c,d,e){if(a.cc!==o){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.pa,i=0;if(a.Ta)i=a.Ta;var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof v;switch(aj(a)){case Vi:i=g=0;if(j)c=b=Infinity;break;case Kd:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case Xi:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case Wi:isFinite(c)&&c>e&&(i=c);g=0;j&&(b=Infinity)}var j=a.Dd,k=a.Td;if(g>j.width&&k.width<
j.width)g=j.width;if(i>j.height&&k.height<j.height)i=j.height;d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.Qa;if(g===90||g===270){g=b;b=c;c=g;g=d;d=e;e=g}a.Dc.Ba();a.Kr(b,c,d,e);a.Dc.freeze();a.Dc.aa()||t.g("Non-real measuredBounds has been set");a.cc=o}}ea=Q.prototype;
ea.sc=function(a,b,c,d,e){bj(this);var g=this.IA;g.set(this.Cb);this.Cb.Ba();if(this.Lc===o){var i=this.Cb;i.x=a;i.y=b;i.width=c;i.height=d}else this.Li(a,b,c,d);this.Cb.freeze();this.yo=e===f?m:e;if(e!==f)this.xo=h;else if(this.Y){c=this.Y.Nc;d=this.la;if(this.Zg!==m)d=this.Cb;e=b+d.height;i=a+d.width;this.xo=!(0<=a&&i<=c.width&&0<=b&&e<=c.height);if(this instanceof ua){if(this.gt>d.height)this.xo=h;if(this.Am.ii>d.width)this.xo=h}}this.Cb.aa()||t.g("Non-real actualBounds has been set");cj(this,
g,this.Cb)};ea.Li=aa();function dj(a,b,c,d,e){var g=a.ta;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.pa.aa()){var g=a.Dc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=aj(a);c===d&&g===e&&(b=Vi);switch(b){case Vi:if(c>d||g>e){a.cc=h;ph(a,c>d?d:c,g>e?e:g)}break;case Kd:a.cc=h;ph(a,d,e,0,0);break;case Xi:a.cc=h;ph(a,d,g,0,0);break;case Wi:a.cc=h;ph(a,c,e,0,0)}}}
function cj(a,b,c){a.Lc=o;var d=a.ba;if(d!==m){var e=d.b;if(e!==m){ej(d);if(a instanceof T){d=o;if(e.Hj===o){var g=e.gc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-i.right*2,g=g.height-i.bottom*2;b.aa()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.wt===h||!b.z(c))&&ti(a,d)}else{fj(a,d);gj(a);b=a.ba;if(b!==m&&(b.bk===a||b.gl===a||b.hl===a))b.wt=h}}}}function fj(a,b){if(a.oe!==m)b.wt=h;if(a instanceof v)for(var c=a.sa,d=c.length,e=0;e<d;e++)fj(c.j[e],b)}
ea.og=function(a,b){if(this.Yg){var c=o;if(this instanceof T){c=h;if(!this.kb())return;if(this.df){var d=this.Lm;a.shadowOffsetX=d.x*b.scale;a.shadowOffsetY=d.y*b.scale;a.shadowColor=this.Km;a.shadowBlur=this.Jm}}var e=this.Cb;if(!(e.width===0||e.height===0||isNaN(e.x)||isNaN(e.y))){s&&(s.gr&&!(this instanceof of))&&s.yF(a,this);var d=this.transform,g=this.Y,i=this.li;i.reset();g!==m&&i.multiply(g.ce);i.multiply(this.ae);if(i=this.xo){s&&s.MB&&s.trace("clip"+this.toString());var j=g.ja;if(this.yo)var k=
this.yo,l=Math.max(k.x,Math.max(e.x,j.x)),n=Math.max(k.y,Math.max(e.y,j.y)),q=Math.abs(l-Math.min(k.right,Math.min(e.right,j.right))),k=Math.abs(n-Math.min(k.bottom,Math.min(e.bottom,j.bottom)));else{l=Math.max(e.x,j.x);n=Math.max(e.y,j.y);q=Math.min(e.right,j.right)-l;k=Math.min(e.bottom,j.bottom)-n}if(l>e.width+e.x||e.x>j.width+j.x||n>e.height+e.y||e.y>j.height+j.y)return;s&&s.MB&&s.AF(a,l,n,q,k);a.save();a.beginPath();a.rect(l,n,q,k);a.clip()}if(this.sh!==m){hj(this,a,this.sh,h,h);a.fillRect(e.x,
e.y,e.width,e.height)}d.my()||a.transform(d.m11,d.m12,d.m21,d.m22,d.La,d.Ma);if(this.th!==m){n=this.ja;j=e=0;l=n.width;n=n.height;q=0;if(this instanceof X){n=this.za.mb;e=n.x;j=n.y;l=n.width;n=n.height;q=this.Jd}hj(this,a,this.th,h);a.fillRect(e-q/2,j-q/2,l+q,n+q)}s&&s.gr&&s.zF(a,this);if(this.th!==m||this.sh!==m||g!==m&&g.Zl||g!==m&&g.type===Mh&&g.Nq!==this){this.Zl=h;var p=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.Zl=o;this.pr(a,
b);if(this.Zl===h){a.shadowOffsetX=p[0];a.shadowOffsetY=p[1];a.shadowBlur=p[2]}if(c&&this.df){a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}if(i){a.restore();Rh(b,a)}else if(!d.my()){c=1/(d.m11*d.m22-d.m12*d.m21);a.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.Ma-d.m22*d.La),c*(d.m12*d.La-d.m11*d.Ma))}}}};ea.pr=aa();
ea.ug=function(){var a=this.b;if(a!==m){Li(a,"naturalBounds",this.ja);Li(a,"actualBounds",this.ta);this.Qa!==0&&Li(a,"angle",this.Qa);this.scale!==1&&Li(a,"scale",this.scale);var b=this.ce;Li(a,"allTransforms",[b.m11,b.m12,b.m21,b.m22,b.La,b.Ma]);this.background!==m&&Li(a,"background",this.background);this.Zg!==m&&Li(a,"areaBackground",this.Zg)}};
function hj(a,b,c,d,e){if(c!==m)if(typeof c==="string")if(d){if(b.Ek!==c){b.fillStyle=c;b.Ek=c}}else{if(b.Wl!==c){b.strokeStyle=c;b.Wl=c}}else if(c.type===Ne){c=c.color;if(d){if(b.Ek!==c){b.fillStyle=c;b.Ek=c}}else if(b.Wl!==c){b.strokeStyle=c;b.Wl=c}}else{var g,i=a.ja,j=i.width,i=i.height;if(c.Pf&&c.type===Si||c.wz==j&&c.vz==i)g=c.Pf;else{var k,l,n,q=n=0;if(e){a=a.ta;j=a.width;i=a.height;n=a.x;q=a.y}if(c.start instanceof D){a=c.start.x;e=c.start.y}else if(c.start instanceof J){a=c.start.x*j;e=c.start.y*
i}else{a=mc.x*j;e=mc.y*i}if(c.end instanceof D){k=c.end.x;l=c.end.y}else if(c.end instanceof J){k=c.end.x*j;l=c.end.y*i}else if(c.type===Oe){k=oc.x*j;l=oc.y*i}else{k=mc.x*j;l=mc.y*i}a=a+n;k=k+n;e=e+q;l=l+q;if(c.type===Oe)g=b.createLinearGradient(a,e,k,l);else if(c.type===Pe){n=isNaN(c.rn)?Math.max(j,i)/2:c.rn;if(isNaN(c.eo)){g=0;n=Math.max(j,i)/2}else g=c.eo;g=b.createRadialGradient(a,e,g,k,l,n)}else c.type===Si?g=b.createPattern(c.pattern,"repeat"):t.wc(c.type,"Brush type");if(c.type!==Si)if(n=c.nn)for(n=
n.f;n.next();)g.addColorStop(n.key,n.value);c.Pf=g;c.wz=j;c.vz=i}if(d){if(b.Ek!==g){b.fillStyle=g;b.Ek=g}}else if(b.Wl!==g){b.strokeStyle=g;b.Wl=g}}}Q.prototype.isContainedBy=Q.prototype.gi=function(a){if(a instanceof v)a:{if(!(this===a||a===m))for(var b=this.Y;b!==m;){if(b===a){a=h;break a}b=b.Y}a=o}else a=o;return a};Q.prototype.isVisibleObject=Q.prototype.qk=function(){if(!this.visible)return o;var a=this.Y;return a!==m?a.qk():h};
function ij(a){if(a.tm===h){var b=a.ae;b.reset();if(!a.Cb.aa()||!a.Dc.aa()){a.tm=o;return}b.translate(a.Cb.x,a.Cb.y);b.translate(-a.la.x,-a.la.y);var c=a.ja;Zi(a,b,c.x,c.y,c.width,c.height);a.tm=o;a.Rk=h}if(a.Rk===h)if(a.Y===m){a.li.set(a.ae);a.Rk=o}else if(a.Y.ce!==m){b=a.li;b.reset();b.multiply(a.Y.li);b.multiply(a.ae);a.Rk=o}}
function Zi(a,b,c,d,e,g){a.scale!==1&&b.scale(a.scale);if(a.Qa!==0){var i=mc;if(a.yf&&Tb(a.yf))i=a.yf;var j=new D;if(a instanceof T&&a.Ab!==a){c=a.Ab;d=c.ja;j.Nl(d.x,d.y,d.width,d.height,i);c.Bm.Bb(j);j.offset(-c.la.x,-c.la.y);for(i=c.Y;i!==m&&i!==a;){i.Bm.Bb(j);j.offset(-i.la.x,-i.la.y);i=i.Y}}else j.Nl(c,d,e,g,i);b.rotate(a.Qa,j.x,j.y)}}
Q.prototype.N=function(){if(this.cc!==h){this.Lc=this.cc=h;if(this.Y!==m){this.Y.cc=o;this.Y.N()}else{var a=this.b;if(a!==m){a.Ig.add(this);this instanceof U&&!a.ha.eb&&this.vf();sf(a)}}if(this instanceof v)for(var a=this.K===Mh,b=this.sa.j,c=b.length,d=0;d<c;d++){var e=b[d];(a||!e.pa.aa()||aj(e)!==Vi)&&e.N()}gj(this)}};function jj(a){if(a.cc===o){a.cc=h;a.Lc=h;if(a instanceof v)for(var a=a.sa.j,b=a.length,c=0;c<b;c++)jj(a[c])}}
function kj(a){if(a.Lc===o){if(a.Y!==m)kj(a.Y);else{var b=a.b;if(b!==m){b.Ig.add(a);a instanceof U&&a.vf();sf(b)}}a.Lc=h}}function bj(a){if(a.tm===o){a.tm=h;a.Rk=h;if(a instanceof v)for(a=a.elements;a.next();)lj(a.value)}}function lj(a){a.Rk=h;if(a instanceof v)for(a=a.elements;a.next();)lj(a.value)}function gj(a){if(a.Y!==m)gj(a.Y);else{var b=a.b;b!==m&&a.Cb.aa()&&uh(b,a.Cb)}}
function aj(a){var b=a.oh,c=a.Y;if(c&&c.K===ja)return mj(a,c.yd(a.qd),c.yd(a.pd));if(c&&c.K===Mh&&c.Nq===a)return Kd;if(b===Og){if(c){if(c.Nq===a)return Kd;a=c.Rx;return a===Og?Vi:a}return Vi}return b}function mj(a,b,c){var d=a.oh;if(d!==Og)return d;var e=d=f;switch(b.oh){case Wi:e=h;break;case Kd:e=h}switch(c.oh){case Xi:d=h;break;case Kd:d=h}a=a.Y.Rx;d=d===f&&(a===Xi||a===Kd)?h:o;e=e===f&&(a===Wi||a===Kd)?h:o;return d===h&&e===h?Kd:d===h?Xi:e===h?Wi:Vi}t.a(Q,"segmentOrientation",Q.prototype.Zr);
t.defineProperty(Q,{Zr:"segmentOrientation"},r("zq"),function(a){var b=this.zq;if(b!==a){s&&t.Va(a,W,Q,"segmentOrientation");this.zq=a;this.N();this.d("segmentOrientation",b,a)}});t.a(Q,"segmentIndex",Q.prototype.nh);t.defineProperty(Q,{nh:"segmentIndex"},r("xq"),function(a){s&&t.e(a,"number",Q,"segmentIndex");var a=Math.round(a),b=this.xq;if(b!==a){this.xq=a;this.N();this.d("segmentIndex",b,a)}});t.a(Q,"segmentFraction",Q.prototype.Py);
t.defineProperty(Q,{Py:"segmentFraction"},r("wq"),function(a){s&&t.e(a,"number",Q,"segmentFraction");isNaN(a)?a=0:a<0?a=0:a>1&&(a=1);var b=this.wq;if(b!==a){this.wq=a;this.N();this.d("segmentFraction",b,a)}});t.a(Q,"segmentOffset",Q.prototype.Qy);t.defineProperty(Q,{Qy:"segmentOffset"},r("yq"),function(a){var b=this.yq;if(!b.z(a)){s&&t.c(a,D,Q,"segmentOffset");this.yq=a=a.D();this.N();this.d("segmentOffset",b,a)}});t.a(Q,"stretch",Q.prototype.oh);
t.defineProperty(Q,{oh:"stretch"},r("Qg"),function(a){var b=this.Qg;if(b!==a){s&&t.Va(a,Q,Q,"stretch");this.Qg=a;this.N();this.d("stretch",b,a)}});t.a(Q,"name",Q.prototype.name);t.defineProperty(Q,{name:"name"},r("vb"),function(a){var b=this.vb;if(b!==a){s&&t.e(a,"string",Q,"name");this.vb=a;this.d("name",b,a)}});t.a(Q,"visible",Q.prototype.visible);
t.defineProperty(Q,{visible:"visible"},r("Yg"),function(a){var b=this.Yg;if(b!==a){s&&t.e(a,"boolean",Q,"visible");this.Yg=a;this.d("visible",b,a);b=this.Y;if(b!==m)b.N();else if(this instanceof T){this.N();ej(this);if(a){this.v(nj);this.ki()}else{this.v(oj);this.ah()}}gj(this);yj(this)}});t.a(Q,"areaBackground",Q.prototype.Zg);
t.defineProperty(Q,{Zg:"areaBackground"},r("sh"),function(a){var b=this.sh;if(b!==a&&(a===m||typeof a==="string"||a instanceof Me)){a instanceof Me&&a.freeze();this.sh=a;gj(this);this.d("areaBackground",b,a)}});t.a(Q,"background",Q.prototype.background);t.defineProperty(Q,{background:"background"},r("th"),function(a){var b=this.th;if(b!==a&&(a===m||typeof a==="string"||a instanceof Me)){a instanceof Me&&a.freeze();this.th=a;gj(this);this.d("background",b,a)}});
t.m(Q,{ba:"part"},function(){if(this instanceof T)return this;if(this.Di)return this.Di;var a;for(a=this.Y;a;){if(a instanceof T)return this.Di=a;a=a.Y}return m});Q.prototype.Ml=ba("Uj");t.m(Q,{Y:"panel"},r("Uj"));t.m(Q,{xa:"layer"},function(){var a=this.ba;return a!==m?a.xa:m});t.m(Q,{b:"diagram"},function(){var a=this.ba;return a!==m?a.b:m},{configurable:h});t.a(Q,"position",Q.prototype.position);
t.defineProperty(Q,{position:"position"},r("pb"),function(a){var b=this.pb;if(!b.z(a)){s&&t.c(a,D,Q,"position");if(this instanceof T){if(!a.aa())return;var c=this.wi,d=this.ct,e=c.copy();c.$d(a.x+d.x,a.y+d.y);c.z(e)||this.d("location",e,c);if(this.Lc===o){this.pb=a=a.D();Bj(this);bj(this);this.d("position",b,a);return}}this.pb=a=a.D();kj(this);bj(this);this.d("position",b,a)}});t.m(Q,{ta:"actualBounds"},r("Cb"));t.a(Q,"scale",Q.prototype.scale);
t.defineProperty(Q,{scale:"scale"},r("Nb"),function(a){var b=this.Nb;if(b!==a){s&&t.h(a,Q,"scale");a<=0&&t.g("GraphObject.scale must be greater than zero");this.Nb=a;bj(this);this.N();this.d("scale",b,a)}});t.a(Q,"angle",Q.prototype.Qa);t.defineProperty(Q,{Qa:"angle"},r("Sb"),function(a){var b=this.Sb;if(b!==a){s&&t.h(a,Q,"angle");this.Sb=a;this.N();bj(this);this.d("angle",b,a)}});t.a(Q,"desiredSize",Q.prototype.pa);
t.defineProperty(Q,{pa:"desiredSize"},r("Vd"),function(a){var b=this.Vd;if(!b.z(a)){s&&t.c(a,K,Q,"desiredSize");this.Vd=a=a.D();this.N();this instanceof X&&this.cf();this.d("desiredSize",b,a)}});t.a(Q,"width",Q.prototype.width);t.defineProperty(Q,{width:"width"},function(){return this.Vd.width},function(a){if(this.Vd.width!==a){s&&t.e(a,"number",Q,"width");var b=this.Vd;this.Vd=a=(new K(a,this.Vd.height)).freeze();this.N();this instanceof X&&this.cf();this.d("desiredSize",b,a)}});t.a(Q,"height",Q.prototype.height);
t.defineProperty(Q,{height:"height"},function(){return this.Vd.height},function(a){if(this.Vd.height!==a){s&&t.e(a,"number",Q,"height");var b=this.Vd;this.Vd=a=(new K(this.Vd.width,a)).freeze();this.N();this instanceof X&&this.cf();this.d("desiredSize",b,a)}});t.a(Q,"minSize",Q.prototype.Td);
t.defineProperty(Q,{Td:"minSize"},r("Mc"),function(a){var b=this.Mc;if(!b.z(a)){s&&t.c(a,K,Q,"minSize");a=a.copy();if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;a.freeze();this.Mc=a;this.N();this.d("minSize",b,a)}});t.a(Q,"maxSize",Q.prototype.Dd);t.defineProperty(Q,{Dd:"maxSize"},r("Zf"),function(a){var b=this.Zf;if(!b.z(a)){s&&t.c(a,K,Q,"maxSize");a=a.copy();if(isNaN(a.width))a.width=Infinity;if(isNaN(a.height))a.height=Infinity;a.freeze();this.Zf=a;this.N();this.d("maxSize",b,a)}});
t.m(Q,{la:"measuredBounds"},r("Dc"));t.m(Q,{ja:"naturalBounds"},r("Nc"),{configurable:h});t.a(Q,"margin",Q.prototype.margin);t.defineProperty(Q,{margin:"margin"},r("Mp"),function(a){typeof a==="number"?a=new Eb(a):s&&t.c(a,Eb,Q,"margin");var b=this.Mp;if(!b.z(a)){this.Mp=a=a.D();this.N();this.d("margin",b,a)}});t.m(Q,{transform:m},function(){this.tm===h&&ij(this);return this.ae});t.m(Q,{ce:m},function(){this.Rk===h&&ij(this);return this.li});t.a(Q,"alignment",Q.prototype.qb);
t.defineProperty(Q,{qb:"alignment"},r("qa"),function(a){var b=this.qa;if(!b.z(a)){s?t.c(a,J,Q,"alignment"):Wb(a)&&!Xb(a)&&t.g("alignment must be a real Spot or Spot.Default");this.qa=a=a.D();kj(this);this.d("alignment",b,a)}});t.a(Q,"column",Q.prototype.pd);t.defineProperty(Q,{pd:"column"},r("M"),function(a){s&&t.h(a,Q,"column");var a=Math.round(a),b=this.M;if(b!==a){a<0&&t.ga(a,">= 0",Q,"column");this.M=a;this.N();this.d("column",b,a)}});t.a(Q,"columnSpan",Q.prototype.kB);
t.defineProperty(Q,{kB:"columnSpan"},r("wj"),function(a){s&&t.h(a,Q,"columnSpan");var a=Math.round(a),b=this.wj;if(b!==a){a<1&&t.ga(a,">= 1",Q,"columnSpan");this.wj=a;this.N();this.d("columnSpan",b,a)}});t.a(Q,"row",Q.prototype.qd);t.defineProperty(Q,{qd:"row"},r("uq"),function(a){s&&t.h(a,Q,"row");var a=Math.round(a),b=this.uq;if(b!==a){a<0&&t.ga(a,">= 0",Q,"row");this.uq=a;this.N();this.d("row",b,a)}});t.a(Q,"rowSpan",Q.prototype.rowSpan);
t.defineProperty(Q,{rowSpan:"rowSpan"},r("Zj"),function(a){s&&t.h(a,Q,"rowSpan");var a=Math.round(a),b=this.Zj;if(b!==a){a<1&&t.ga(a,">= 1",Q,"rowSpan");this.Zj=a;this.N();this.d("rowSpan",b,a)}});t.a(Q,"isPanelMain",Q.prototype.Zi);t.defineProperty(Q,{Zi:"isPanelMain"},r("tp"),function(a){var b=this.tp;if(b!==a){s&&t.e(a,"boolean",Q,"isPanelMain");this.tp=a;this.N();this.d("isPanelMain",b,a)}});t.a(Q,"alignmentFocus",Q.prototype.Ji);
t.defineProperty(Q,{Ji:"alignmentFocus"},r("ro"),function(a){var b=this.ro;if(!b.z(a)){s?t.c(a,J,Q,"alignmentFocus"):Wb(a)&&!Xb(a)&&t.g("alignmentFocus must be a real Spot or Spot.Default");this.ro=a=a.D();this.N();this.d("alignmentFocus",b,a)}});t.a(Q,"portId",Q.prototype.oe);
t.defineProperty(Q,{oe:"portId"},r("fq"),function(a){var b=this.fq;if(b!==a){s&&a!==m&&t.e(a,"string",Q,"portId");var c=this.ba;if(c!==m&&!(c instanceof U)){t.g("portID being set on a Link: "+a);c=m}b!==m&&c&&Cj(c,this);this.fq=a;if(a!==m&&c){c.oc===m&&Dj(c);Ej(c,this)}this.d("portId",b,a)}});function Fj(a){var b={value:m};Gj(a,b);return b.value}function Gj(a,b){var c=a.Y;if(c===m){b.value=a;return o}if(!Gj(c,b)&&a.visible){b.value=a;return o}return h}
function yj(a){var b=a.ba;if(b instanceof U)(a=a.b)&&!a.ha.eb&&b.vf()}t.a(Q,"toSpot",Q.prototype.$a);t.defineProperty(Q,{$a:"toSpot"},r("Wg"),function(a){var b=this.Wg;if(!b.z(a)){s&&t.c(a,J,Q,"toSpot");this.Wg=a=a.D();this.d("toSpot",b,a);yj(this)}});t.a(Q,"toEndSegmentLength",Q.prototype.wk);
t.defineProperty(Q,{wk:"toEndSegmentLength"},r("Tg"),function(a){var b=this.Tg;if(b!==a){s&&t.e(a,"number",Q,"toEndSegmentLength");a<0&&t.ga(a,">= 0",Q,"toEndSegmentLength");this.Tg=a;this.d("toEndSegmentLength",b,a);yj(this)}});t.a(Q,"toEndSegmentDirection",Q.prototype.gs);t.defineProperty(Q,{gs:"toEndSegmentDirection"},r("Sg"),function(a){var b=this.Sg;if(b!==a){s&&t.Va(a,U,Q,"toEndSegmentDirection");this.Sg=a;this.d("toEndSegmentDirection",b,a);yj(this)}});t.a(Q,"toShortLength",Q.prototype.hs);
t.defineProperty(Q,{hs:"toShortLength"},r("Vg"),function(a){var b=this.Vg;if(b!==a){s&&t.e(a,"number",Q,"toShortLength");this.Vg=a;this.d("toShortLength",b,a);yj(this)}});t.a(Q,"toLinkable",Q.prototype.bz);t.defineProperty(Q,{bz:"toLinkable"},r("Qq"),function(a){var b=this.Qq;if(b!==a){s&&a!==m&&t.e(a,"boolean",Q,"toLinkable");this.Qq=a;this.d("toLinkable",b,a)}});t.a(Q,"toLinkableDuplicates",Q.prototype.CD);
t.defineProperty(Q,{CD:"toLinkableDuplicates"},r("Rq"),function(a){var b=this.Rq;if(b!==a){s&&t.e(a,"boolean",Q,"toLinkableDuplicates");this.Rq=a;this.d("toLinkableDuplicates",b,a)}});t.a(Q,"toLinkableSelfNode",Q.prototype.DD);t.defineProperty(Q,{DD:"toLinkableSelfNode"},r("Sq"),function(a){var b=this.Sq;if(b!==a){s&&t.e(a,"boolean",Q,"toLinkableSelfNode");this.Sq=a;this.d("toLinkableSelfNode",b,a)}});t.a(Q,"toMaxLinks",Q.prototype.ED);
t.defineProperty(Q,{ED:"toMaxLinks"},r("Tq"),function(a){var b=this.Tq;if(b!==a){s&&t.h(a,Q,"toMaxLinks");a<0&&t.ga(a,">= 0",Q,"toMaxLinks");this.Tq=a;this.d("toMaxLinks",b,a)}});t.a(Q,"fromSpot",Q.prototype.Ya);t.defineProperty(Q,{Ya:"fromSpot"},r("Fg"),function(a){var b=this.Fg;if(!b.z(a)){s&&t.c(a,J,Q,"fromSpot");this.Fg=a=a.D();this.d("fromSpot",b,a);yj(this)}});t.a(Q,"fromEndSegmentLength",Q.prototype.nk);
t.defineProperty(Q,{nk:"fromEndSegmentLength"},r("Cg"),function(a){var b=this.Cg;if(b!==a){s&&t.e(a,"number",Q,"fromEndSegmentLength");a<0&&t.ga(a,">= 0",Q,"fromEndSegmentLength");this.Cg=a;this.d("fromEndSegmentLength",b,a);yj(this)}});t.a(Q,"fromEndSegmentDirection",Q.prototype.wr);t.defineProperty(Q,{wr:"fromEndSegmentDirection"},r("Bg"),function(a){var b=this.Bg;if(b!==a){s&&t.Va(a,U,Q,"fromEndSegmentDirection");this.Bg=a;this.d("fromEndSegmentDirection",b,a);yj(this)}});
t.a(Q,"fromShortLength",Q.prototype.xr);t.defineProperty(Q,{xr:"fromShortLength"},r("Eg"),function(a){var b=this.Eg;if(b!==a){s&&t.e(a,"number",Q,"fromShortLength");this.Eg=a;this.d("fromShortLength",b,a);yj(this)}});t.a(Q,"fromLinkable",Q.prototype.cy);t.defineProperty(Q,{cy:"fromLinkable"},r("$o"),function(a){var b=this.$o;if(b!==a){s&&a!==m&&t.e(a,"boolean",Q,"fromLinkable");this.$o=a;this.d("fromLinkable",b,a)}});t.a(Q,"fromLinkableDuplicates",Q.prototype.TB);
t.defineProperty(Q,{TB:"fromLinkableDuplicates"},r("ap"),function(a){var b=this.ap;if(b!==a){s&&t.e(a,"boolean",Q,"fromLinkableDuplicates");this.ap=a;this.d("fromLinkableDuplicates",b,a)}});t.a(Q,"fromLinkableSelfNode",Q.prototype.UB);t.defineProperty(Q,{UB:"fromLinkableSelfNode"},r("bp"),function(a){var b=this.bp;if(b!==a){s&&t.e(a,"boolean",Q,"fromLinkableSelfNode");this.bp=a;this.d("fromLinkableSelfNode",b,a)}});t.a(Q,"fromMaxLinks",Q.prototype.VB);
t.defineProperty(Q,{VB:"fromMaxLinks"},r("cp"),function(a){var b=this.cp;if(b!==a){s&&t.h(a,Q,"fromMaxLinks");a<0&&t.ga(a,">= 0",Q,"fromMaxLinks");this.cp=a;this.d("fromMaxLinks",b,a)}});t.a(Q,"cursor",Q.prototype.cursor);t.defineProperty(Q,{cursor:"cursor"},r("Eo"),function(a){var b=this.Eo;if(b!==a){t.e(a,"string",Q,"cursor");this.Eo=a;this.d("cursor",b,a)}});t.a(Q,"click",Q.prototype.click);
t.defineProperty(Q,{click:"click"},r("vh"),function(a){var b=this.vh;if(b!==a){a!==m&&t.e(a,"function",Q,"click");this.vh=a;this.d("click",b,a)}});t.a(Q,"doubleClick",Q.prototype.wl);t.defineProperty(Q,{wl:"doubleClick"},r("yh"),function(a){var b=this.yh;if(b!==a){a!==m&&t.e(a,"function",Q,"doubleClick");this.yh=a;this.d("doubleClick",b,a)}});t.a(Q,"contextClick",Q.prototype.lr);
t.defineProperty(Q,{lr:"contextClick"},r("wh"),function(a){var b=this.wh;if(b!==a){a!==m&&t.e(a,"function",Q,"contextClick");this.wh=a;this.d("contextClick",b,a)}});t.a(Q,"mouseEnter",Q.prototype.By);t.defineProperty(Q,{By:"mouseEnter"},r("Vp"),function(a){var b=this.Vp;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseEnter");this.Vp=a;this.d("mouseEnter",b,a)}});t.a(Q,"mouseLeave",Q.prototype.Cy);
t.defineProperty(Q,{Cy:"mouseLeave"},r("Wp"),function(a){var b=this.Wp;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseLeave");this.Wp=a;this.d("mouseLeave",b,a)}});t.a(Q,"mouseOver",Q.prototype.Qr);t.defineProperty(Q,{Qr:"mouseOver"},r("Kh"),function(a){var b=this.Kh;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseOver");this.Kh=a;this.d("mouseOver",b,a)}});t.a(Q,"mouseHover",Q.prototype.Pr);
t.defineProperty(Q,{Pr:"mouseHover"},r("Jh"),function(a){var b=this.Jh;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseHover");this.Jh=a;this.d("mouseHover",b,a)}});t.a(Q,"mouseHold",Q.prototype.Nr);t.defineProperty(Q,{Nr:"mouseHold"},r("Ih"),function(a){var b=this.Ih;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseHold");this.Ih=a;this.d("mouseHold",b,a)}});t.a(Q,"mouseDragEnter",Q.prototype.JC);
t.defineProperty(Q,{JC:"mouseDragEnter"},r("Tp"),function(a){var b=this.Tp;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseDragEnter");this.Tp=a;this.d("mouseDragEnter",b,a)}});t.a(Q,"mouseDragLeave",Q.prototype.Ay);t.defineProperty(Q,{Ay:"mouseDragLeave"},r("Up"),function(a){var b=this.Up;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseDragLeave");this.Up=a;this.d("mouseDragLeave",b,a)}});t.a(Q,"mouseDrop",Q.prototype.Mr);
t.defineProperty(Q,{Mr:"mouseDrop"},r("Hh"),function(a){var b=this.Hh;if(b!==a){a!==m&&t.e(a,"function",Q,"mouseDrop");this.Hh=a;this.d("mouseDrop",b,a)}});t.a(Q,"actionDown",Q.prototype.sx);t.defineProperty(Q,{sx:"actionDown"},r("no"),function(a){var b=this.no;if(b!==a){a!==m&&t.e(a,"function",Q,"actionDown");this.no=a;this.d("actionDown",b,a)}});t.a(Q,"actionUp",Q.prototype.ux);
t.defineProperty(Q,{ux:"actionUp"},r("po"),function(a){var b=this.po;if(b!==a){a!==m&&t.e(a,"function",Q,"actionUp");this.po=a;this.d("actionUp",b,a)}});t.a(Q,"actionMove",Q.prototype.tx);t.defineProperty(Q,{tx:"actionMove"},r("oo"),function(a){var b=this.oo;if(b!==a){a!==m&&t.e(a,"function",Q,"actionMove");this.oo=a;this.d("actionMove",b,a)}});t.a(Q,"actionCancel",Q.prototype.rx);
t.defineProperty(Q,{rx:"actionCancel"},r("mo"),function(a){var b=this.mo;if(b!==a){a!==m&&t.e(a,"function",Q,"actionCancel");this.mo=a;this.d("actionCancel",b,a)}});t.a(Q,"toolTip",Q.prototype.is);t.defineProperty(Q,{is:"toolTip"},r("Qh"),function(a){var b=this.Qh;if(b!==a){a!==m&&t.c(a,of,Q,"toolTip");this.Qh=a;this.d("toolTip",b,a)}});t.a(Q,"contextMenu",Q.prototype.contextMenu);
t.defineProperty(Q,{contextMenu:"contextMenu"},r("xh"),function(a){var b=this.xh;if(b!==a){a!==m&&t.c(a,of,Q,"contextMenu");this.xh=a;this.d("contextMenu",b,a)}});t.a(Q,"isActionable",Q.prototype.Mu);t.defineProperty(Q,{Mu:"isActionable"},r("np"),function(a){var b=this.np;if(b!==a){t.e(a,"boolean",Q,"isActionable");this.np=a;this.d("isActionable",b,a)}});t.a(Q,"pickable",Q.prototype.RC);
t.defineProperty(Q,{RC:"pickable"},r("vd"),function(a){var b=this.vd;if(b!==a){t.e(a,"boolean",Q,"pickable");this.vd=a;this.d("pickable",b,a)}});Q.prototype.bind=Q.prototype.bind=function(a){a.nf=this;var b=this.vr();b!==m&&Hj(b)&&t.g("Cannot add a Binding to a template that has already been copied: "+a);if(this.Tb===m)this.Tb=new z(Ue);this.Tb.add(a)};Q.prototype.findTemplateBinder=Q.prototype.vr=function(){for(var a=this instanceof v?this:this.Y;a!==m;){if(a.Hk!==m&&a instanceof v)return a;a=a.Y}return m};
var Ij;
Q.make=Ij=function(a,b){var c=m,d=m;if(typeof a==="function")d=a;else if(typeof a==="string"){var e=Jj.da(a);typeof e==="function"?c=e():d=ga[a]}if(c===m){(d===m||!d.constructor)&&t.g("GraphObject.make requires a class function or class name, not: "+a);c=new d}e=1;if(c instanceof A&&arguments.length>1){d=arguments[1];if(typeof d==="string"||d instanceof HTMLDivElement){c.ai=m;Kh(c,d);e++}else t.g("Unknown argument to Diagram constructor: "+d)}for(;e<arguments.length;e++){d=arguments[e];if(typeof d==="string")c instanceof
ua?c.text=d:c instanceof X?c.Xa=d:c instanceof Kj?c.source=d:t.g("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof Q){c instanceof v||t.g("A GraphObject can only be added to a Panel, not to: "+c);c.add(d)}else if(d instanceof Lj){c instanceof v||t.g("A RowColumnDefinition can only be added to a Panel, not to: "+c);var g=d.Ou?c.he(d.index):c.yd(d.index);t.c(d,Lj,Lj,"copyFrom:pd");d.Ou?g.height=d.height:g.width=d.width;g.zf=d.zf;g.Ed=d.Ed;g.qb=d.qb;g.cs=d.cs;g.Tb=
d.Tb}else if(d instanceof qa)c instanceof W&&d.Nd===W?d===Rf||d===th?c.Xe=d:d===Mj||d===Nj||d===Oj?c.Me=d:d===Pj||d===Qj||d===Rj?c.hu=d:d===Sj||d===Ui||t.g("Unknown Link enum value for a Link property: "+d):c instanceof v&&d.Nd===v?c.type=d:c instanceof ua&&d.Nd===ua?c.hz=d:c instanceof Q&&d.Nd===W?d.name.indexOf("Orient")===0?c.Zr=d:t.g("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof Q&&d.Nd===Q?c.oh=d:c instanceof A&&d.Nd===A?c.Bx=d:c instanceof Me&&d.Nd===
Me?c.type=d:c instanceof Fd&&d.Nd===Fd?c.type=d:c instanceof pe&&d.Nd===pe?c.type=d:c instanceof Ue&&d.Nd===Ue?c.mode=d:c instanceof se&&d.Nd===se?c.Rc=d:c instanceof Y&&d.Nd===Y?d.name.indexOf("Alignment")===0?c.qb=d:d.name.indexOf("Arrangement")===0?c.Md=d:d.name.indexOf("Compaction")===0?c.pu=d:d.name.indexOf("Path")===0?c.path=d:d.name.indexOf("Sorting")===0?c.Ff=d:d.name.indexOf("Style")===0?c.ND=d:t.g("Unknown enum value: "+d):c instanceof Z&&d.Nd===Z?d.name.indexOf("Aggressive")===0?c.VA=d:
d.name.indexOf("Cycle")===0?c.sB=d:d.name.indexOf("Init")===0?c.lC=d:d.name.indexOf("Layer")===0?c.uC=d:t.g("Unknown enum value: "+d):c instanceof Oi&&d.Nd===Oi?d===Tj||d===Uj||d===Vj||d===Wj?c.Ff=d:d===Xj||d===Yj?c.Md=d:d===Zj||d===$j?c.qb=d:t.g("Unknown enum value: "+d):c instanceof ak&&d.Nd===ak?d===bk||d===ck||d===dk||d===ek||d===fk?c.Ff=d:d===gk||d===hk||d===ik||d===jk?c.direction=d:d===kk||d===lk||d===mk||d===nk?c.Md=d:d===ok||d===pk?c.Tr=d:t.g("Unknown enum value: "+d):t.g("No property to set for this enum value: "+
d);else if(d instanceof Ue)c instanceof Q||c instanceof Lj?c.bind(d):t.g("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof Jd)c instanceof Fd?c.vc.add(d):t.g("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof pe)c instanceof Jd?c.xb.add(d):t.g("A PathSegment can only be added to a PathFigure, not to: "+c);else if(d instanceof Object){d.constructor!==Object&&t.g("Can only get property values from a plain Object, not a: "+
d);if(c instanceof Me){var g={},i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}t.Sy(c,g)}else if(c instanceof Lj){if(d.row!==f){g=d.row;(g===f||g===m||g===Infinity||isNaN(g)||g<0)&&t.g("Must specify non-negative integer row for RowColumnDefinition "+d);c.Uk=h;c.W=g}else if(d.column!==f){g=d.column;(g===f||g===m||g===Infinity||isNaN(g)||g<0)&&t.g("Must specify non-negative integer column for RowColumnDefinition "+d);c.Uk=o;c.W=g}else t.g("Must specify row or column value in a RowColumnDefinition "+
d);g=t.iF(d,"row","column");t.Sy(c,g)}else t.Sy(c,d)}else t.g("Unknown initializer: "+d)}return c};var Jj;Q.Builders=Jj=new ra("string","function");
Jj.add("Button",function(){var a=new Me(Oe);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Me(Oe);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=Ij(v,Mh,{Mu:h},Ij(X,{name:"ButtonBorder",Xa:"RoundedRectangle",fill:a,stroke:"gray"}));c.By=function(a,c){var g=c.V(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.Cy=function(b,c){var g=c.V(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
Jj.add("TreeExpanderButton",function(){var a=Ij("Button",Ij(X,{name:"ButtonIcon",Xa:"MinusLine",pa:new K(6,6)},(new Ue("figure","isTreeExpanded",function(a,c){var d=m,e=c.Y;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Iy("")),{visible:o},(new Ue("visible","isTreeLeaf",function(a){return!a})).Iy(""));a.click=function(a,c){var d=c.ba;if(d instanceof U){var e=d.b;if(!(e===m||e.Pa)){a.zd=h;d.Sd?e.Od.kr(d):e.Od.sr(d)}}};return a});
Jj.add("SubGraphExpanderButton",function(){var a=Ij("Button",Ij(X,{name:"ButtonIcon",Xa:"MinusLine",pa:new K(6,6)},(new Ue("figure","isSubGraphExpanded",function(a,c){var d=m,e=c.Y;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).Iy("")));a.click=function(a,c){var d=c.ba;if(d instanceof V){var e=d.b;if(!(e===m||e.Pa)){a.zd=h;d.je?e.Od.jr(d):e.Od.rr(d)}}};return a});
Jj.add("ContextMenuButton",function(){var a=Ij("Button");a.oh=Xi;var b=a.Pe("ButtonBorder");if(b instanceof X){b.Xa="Rectangle";b.n=new J(0,0,2,2);b.o=new J(1,1,-2,-2)}return a});
function v(a){Q.call(this);if(a===f)arguments.length===0?this.K=Tg:t.g("invalid argument to Panel constructor: undefined");else{t.Va(a,v,v,"type");this.K=a}this.sa=new z(Q);this.Id=(new Eb).freeze();this.Ho=cc;this.Mb=Og;this.Ee=[];this.ve=[];this.zo=this.vq=qk;this.zm=this.Um=0;this.Xm=Pg;this.gp=(new K(10,10)).freeze();this.hp=(new D(0,0)).freeze();this.Hk=this.gm=m;this.yw="";this.Vf=this.Lj=m;this.vm="category";this.ef=m;this.Dk=new E(NaN,NaN,NaN,NaN);this.sE=new E(0,0,0,0);this.lH=new K(0,0);
this.Nq=m}t.J("Panel",v);t.ua(v,Q);
v.prototype.jb=function(a){Q.prototype.jb.call(this,a);a.K=this.K;a.Id.Ua(this.Id);a.Ho=this.Ho.D();a.Mb=this.Mb;if(this.Ee.length>0){for(var b=[],c=this.Ee,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.Ml(a);b[e]=g}a.Ee=b}if(this.ve.length>0){b=[];c=this.ve;d=c.length;for(e=0;e<d;e++)if(c[e]!==f){g=c[e].copy();g.Ml(a);b[e]=g}a.ve=b}a.vq=this.vq;a.zo=this.zo;a.Um=this.Um;a.zm=this.zm;a.Xm=this.Xm;a.gp.Ua(this.gp);a.hp.Ua(this.hp);a.gm=this.gm;a.Hk=this.Hk;a.yw=this.yw;a.Lj=this.Lj;a.Vf=
this.Vf;a.vm=this.vm;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};v.prototype.dh=function(a){Q.prototype.dh.call(this,a);a.sa=this.sa;for(var b=a.sa.f;b.next();)b.value.Uj=a};
v.prototype.copy=v.prototype.copy=function(){var a=Q.prototype.copy.call(this);if(a instanceof v){var b=this.sa;if(b.length>0)for(var c=b.length,d=0;d<c;d++){var e=b.j[d].copy(),g=a;e.Ml(g);e.Di=m;var i=g.sa,j=i.count;i.kc(j,e);i=g.ba;if(i!==m){var k=g.b;k!==m&&k.ha.eb||i.pe(ve,"elements",g,m,e,m,j)}}return a}return m};v.prototype.toString=function(){return"Panel("+this.type+")#"+t.jc(this)};var Tg;v.Position=Tg=t.l(v,"Position",0);v.Horizontal=t.l(v,"Horizontal",1);var Lh;
v.Vertical=Lh=t.l(v,"Vertical",2);var Mg;v.Spot=Mg=t.l(v,"Spot",3);var Mh;v.Auto=Mh=t.l(v,"Auto",4);var ja;v.Table=ja=t.l(v,"Table",5);v.Viewbox=t.l(v,"Viewbox",6);var rk;v.TableRow=rk=t.l(v,"TableRow",7);var sk;v.TableColumn=sk=t.l(v,"TableColumn",8);var sg;v.Link=sg=t.l(v,"Link",9);var ai;v.Grid=ai=t.l(v,"Grid",10);t.m(v,{elements:"elements"},function(){return this.sa.f});t.m(v,{ja:"naturalBounds"},r("Nc"));t.a(v,"padding",v.prototype.padding);
t.defineProperty(v,{padding:"padding"},r("Id"),function(a){typeof a==="number"?a=new Eb(a):t.c(a,Eb,v,"padding");var b=this.Id;if(!b.z(a)){this.Id=a=a.D();this.N();this.d("padding",b,a)}});t.a(v,"type",v.prototype.type);t.defineProperty(v,{type:"type"},r("K"),function(a){var b=this.K;if(b!==a){s&&t.Va(a,v,v,"type");this.K=a;this.N();this.d("type",b,a)}});t.a(v,"defaultAlignment",v.prototype.Pi);
t.defineProperty(v,{Pi:"defaultAlignment"},r("Ho"),function(a){var b=this.Ho;if(!b.z(a)){s&&t.c(a,J,v,"defaultAlignment");this.Ho=a=a.D();this.N();this.d("defaultAlignment",b,a)}});t.a(v,"defaultStretch",v.prototype.Rx);t.defineProperty(v,{Rx:"defaultStretch"},r("Mb"),function(a){var b=this.Mb;if(b!==a){t.Va(a,Q,v,"defaultStretch");this.Mb=a;this.N();this.d("defaultStretch",b,a)}});t.a(v,"viewboxStretch",v.prototype.gz);
t.defineProperty(v,{gz:"viewboxStretch"},r("Xm"),function(a){var b=this.Xm;if(b!==a){t.Va(a,Q,v,"viewboxStretch");this.Xm=a;this.d("viewboxStretch",b,a)}});t.a(v,"gridCellSize",v.prototype.Ar);t.defineProperty(v,{Ar:"gridCellSize"},r("gp"),function(a){var b=this.gp;if(!b.z(a)){t.c(a,K,v,"gridCellSize");(!a.aa()||a.width===0||a.height===0)&&t.g("Invalid Panel.gridCellSize: "+a);this.gp=a.D();this.b!==m&&this===this.b.Ku&&mi(this.b);gj(this);this.d("gridCellSize",b,a)}});t.a(v,"gridOrigin",v.prototype.fy);
t.defineProperty(v,{fy:"gridOrigin"},r("hp"),function(a){var b=this.hp;if(!b.z(a)){t.c(a,D,v,"gridOrigin");a.aa()||t.g("Invalid Panel.gridOrigin: "+a);this.hp=a.D();gj(this);this.d("gridOrigin",b,a)}});ea=v.prototype;
ea.pr=function(a,b){if(this.K===ai){var c=this.zl()*b.scale;c<=0&&(c=1);var d=this.Ar,e=d.width,d=d.height,g=this.ja,i=g.width,g=g.height,j=Math.ceil(i/e),k=Math.ceil(g/d),l=this.fy;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var n=[],q=this.sa.j,p=this.sa.length,u=0;u<p;u++){var w=[];n.push(w);var B=q[u];if(B.visible)for(var B=B.Xa==="LineV",F=u+1;F<p;F++){var H=q[F];if(H.visible&&H.Xa==="LineV"===B){H=H.ei;H>=2&&w.push(H)}}}q=this.sa.length;for(p=0;p<q;p++){B=this.sa.j[p];if(B.visible){u=
n[p];w=B.ei;if(B.Xa==="LineV"){a.lineWidth=B.Ta;hj(this,a,B.stroke,o);a.beginPath();for(F=B=Math.floor(-l.x/e);F<=B+j;F++){H=F*e+l.x;if(0<=H&&H<i&&tk(F,w,u)){a.moveTo(H,0);a.lineTo(H,g);if(e*w*c<2)break}}}else{a.lineWidth=B.Ta;hj(this,a,B.stroke,o);a.beginPath();for(F=B=Math.floor(-l.y/d);F<=B+k;F++){H=F*d+l.y;if(0<=H&&H<=g&&tk(F,w,u)){a.moveTo(0,H);a.lineTo(i,H);if(d*w*c<2)break}}}a.stroke()}}a.restore();Rh(b,a)}else{c=this.sa.length;for(e=0;e<c;e++)this.sa.j[e].og(a,b)}};
ea.ug=function(){Q.prototype.ug.call(this);var a=this.b;if(a!==m){Li(a,"type",this.type);this.gz!==Pg&&Li(a,"viewboxStretch",this.gz);Li(a,"elements",this.elements)}};function tk(a,b,c){if(a%b!==0)return o;for(var b=c.length,d=0;d<b;d++)if(a%c[d]===0)return o;return h}
ea.Kr=function(a,b,c,d){var e=this.Dk;e.width=0;e.height=0;var g=this.pa,i=this.Td;if(c===f){c=i.width;d=i.height}var c=Math.max(c/this.scale,i.width),d=Math.max(d/this.scale,i.height),j=this.Dd;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.sa,n=l.length;if(n===0){var q=this.Nc;rb(q,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);Yi(this,
0,0,q.width,q.height)}else{var p=this.K.vb;switch(p){case "Position":var u=a,w=b,B=c,F=d;e.x=0;e.y=0;e.width=0;for(var H=e.height=0;H<n;H++){var x=l.j[H];if(x.visible||x===this.Ab){var I=x.margin,y=I.right+I.left,G=I.top+I.bottom;ph(x,u,w,B,F);var fa=x.la,R=Math.max(fa.width+y,0),S=Math.max(fa.height+G,0),da=x.position.x,ma=x.position.y;isFinite(da)||(da=0);isFinite(ma)||(ma=0);tb(e,da,ma,R,S)}}break;case "Vertical":for(var Ha=a,sa=c,db=d,Ya=[],bb=0;bb<n;bb++){var Oa=l.j[bb];if(Oa.visible||Oa===this.Ab){var hb=
aj(Oa);if(hb!==Vi&&hb!==Wi)Ya.push(Oa);else{var Va=Oa.margin,uc=Va.right+Va.left,zd=Va.top+Va.bottom;ph(Oa,Ha,Infinity,sa,db);var Wa=Oa.la,Cc=Math.max(Wa.width+uc,0),Ad=Math.max(Wa.height+zd,0);e.width=Math.max(e.width,Cc);e.height=e.height+Ad}}}var pc=Ya.length;if(pc!==0){this.pa.width?Ha=Math.min(this.pa.width,this.Dd.width):e.width!==0&&(Ha=Math.min(e.width,this.Dd.width));for(bb=0;bb<pc;bb++){Oa=Ya[bb];if(Oa.visible||Oa===this.Ab){Va=Oa.margin;uc=Va.right+Va.left;zd=Va.top+Va.bottom;ph(Oa,Ha,
Infinity,sa,db);Wa=Oa.la;Cc=Math.max(Wa.width+uc,0);Ad=Math.max(Wa.height+zd,0);e.width=Math.max(e.width,Cc);e.height=e.height+Ad}}}break;case "Horizontal":for(var Ub=b,gc=c,Dc=d,Gb=[],Bb=0;Bb<n;Bb++){var Za=l.j[Bb];if(Za.visible||Za===this.Ab){var Wc=aj(Za);if(Wc!==Vi&&Wc!==Xi)Gb.push(Za);else{var Lc=Za.margin,kd=Lc.right+Lc.left,oa=Lc.top+Lc.bottom;ph(Za,Infinity,Ub,gc,Dc);var Ia=Za.la,af=Math.max(Ia.width+kd,0),Jf=Math.max(Ia.height+oa,0);e.width=e.width+af;e.height=Math.max(e.height,Jf)}}}var xe=
Gb.length;if(xe!==0){this.pa.height?Ub=Math.min(this.pa.height,this.Dd.height):e.height!==0&&(Ub=Math.min(e.height,this.Dd.height));for(Bb=0;Bb<xe;Bb++){Za=Gb[Bb];if(Za.visible||Za===this.Ab){Lc=Za.margin;kd=Lc.right+Lc.left;oa=Lc.top+Lc.bottom;ph(Za,Infinity,Ub,gc,Dc);Ia=Za.la;af=Math.max(Ia.width+kd,0);Jf=Math.max(Ia.height+oa,0);e.width=e.width+af;e.height=Math.max(e.height,Jf)}}}break;case "Spot":a:{var ye=a,ze=b,Kf=c,Ec=d,wc=uk(this,l,n),mb=wc.margin,Mc,Bd,ld=mb.right+mb.left,Hb=mb.top+mb.bottom;
ph(wc,ye,ze,Kf,Ec);var ub=wc.la,md=ub.width,Nc=ub.height,Oc=Math.max(md+ld,0),Pd=Math.max(Nc+Hb,0);e.x=-mb.left;e.y=-mb.top;e.width=Oc;e.height=Pd;for(var Qd=0;Qd<n;Qd++){var hc=l.j[Qd];if(hc!==wc&&(hc.visible||hc===this.Ab)){mb=hc.margin;Mc=mb.right+mb.left;Bd=mb.top+mb.bottom;ph(hc,ye,ze,0,0);var ub=hc.la,Oc=Math.max(ub.width+Mc,0),Pd=Math.max(ub.height+Bd,0),Zb=hc.qb;if(Xb(Zb))Zb=this.Pi;Tb(Zb)||(Zb=mc);var ab=hc.Ji;Xb(ab)&&(ab=mc);tb(e,Zb.x*md+Zb.offsetX-(ab.x*ub.width-ab.offsetX)-mb.left,Zb.y*
Nc+Zb.offsetY-(ab.y*ub.height-ab.offsetY)-mb.top,Oc,Pd)}}var Cb=wc.oh;Cb===Og&&(Cb=aj(wc));switch(Cb){case Vi:break a;case Kd:if(!isFinite(ye)&&!isFinite(ze))break a;break;case Xi:if(!isFinite(ye))break a;break;case Wi:if(!isFinite(ze))break a}ub=wc.la;md=ub.width;Nc=ub.height;Oc=Math.max(md+ld,0);Pd=Math.max(Nc+Hb,0);mb=wc.margin;e.x=-mb.left;e.y=-mb.top;e.width=Oc;e.height=Pd;for(Qd=0;Qd<n;Qd++){hc=l.j[Qd];if(hc!==wc&&(hc.visible||hc===this.Ab)){mb=hc.margin;Mc=mb.right+mb.left;Bd=mb.top+mb.bottom;
ub=hc.la;Oc=Math.max(ub.width+Mc,0);Pd=Math.max(ub.height+Bd,0);Zb=hc.qb;if(Xb(Zb))Zb=this.Pi;Tb(Zb)||(Zb=mc);ab=hc.Ji;Xb(ab)&&(ab=mc);tb(e,Zb.x*md+Zb.offsetX-(ab.x*ub.width-ab.offsetX)-mb.left,Zb.y*Nc+Zb.offsetY-(ab.y*ub.height-ab.offsetY)-mb.top,Oc,Pd)}}}break;case "Auto":var nd=a,$b=b,vb=c,Rd=d,Pb=uk(this,l,n),ac=Pb.margin,Sd=ac.right+ac.left,Ae=ac.top+ac.bottom;ph(Pb,nd,$b,vb,Rd);var od=Pb.la,cd=Math.max(od.width+Sd,0),Fc=Math.max(od.height+Ae,0),bc=(new D).Nl(0,0,cd,Fc,vk(Pb)),Cd=(new D).Nl(0,
0,cd,Fc,wk(Pb)),bf=new E(bc,Cd),Td=nd,Ud=$b;if(isFinite(nd))Td=bf.width;if(isFinite($b))Ud=bf.height;for(var ce=new K(0,0),pd=0;pd<n;pd++){var qd=l.j[pd];if(qd!==Pb&&(qd.visible||qd===this.Ab)){var ac=qd.margin,ib=ac.right+ac.left,pb=ac.top+ac.bottom;ph(qd,Td,Ud,vb,Rd);od=qd.la;cd=Math.max(od.width+ib,0);Fc=Math.max(od.height+pb,0);ce=new K(Math.max(cd,ce.width),Math.max(Fc,ce.height))}}if(n===1){e.width=cd;e.height=Fc}else{var Xc=vk(Pb),ha=wk(Pb),Ta,Ba;if(ha.x!==Xc.x&&ha.y!==Xc.y){Ta=ce.width/Math.abs(ha.x-
Xc.x);Ba=ce.height/Math.abs(ha.y-Xc.y)}var wb=0;Pb instanceof X&&(wb=Pb.Ta*Pb.scale);Ta=Ta+(Math.abs(Xc.offsetX)+Math.abs(ha.offsetX)+wb);Ba=Ba+(Math.abs(Xc.offsetY)+Math.abs(ha.offsetY)+wb);var ic=Pb.oh;ic===Og&&(ic=aj(Pb));switch(ic){case Vi:Rd=vb=0;break;case Kd:isFinite(nd)&&(Ta=nd);isFinite($b)&&(Ba=$b);break;case Xi:isFinite(nd)&&(Ta=nd);Rd=0;break;case Wi:vb=0;isFinite($b)&&(Ba=$b)}if(Pb instanceof X)Pb.za=m;Pb.cc=h;ph(Pb,Ta,Ba,vb,Rd);e.width=Pb.la.width+Sd;e.height=Pb.la.height+Ae}break;case "Table":for(var rd=
a,sd=b,Qa=n,Qb=c,cf=d,Lf=[],Ca=0;Ca<Qa;Ca++){var ia=l.j[Ca];if(ia instanceof v&&(ia.type===rk||ia.type===sk))for(var de=ia.sa,Dd=de.length,Db=0;Db<Dd;Db++){var td=de.j[Db];if(ia.type===rk)td.qd=ia.qd;else if(ia.type===sk)td.pd=ia.pd;Lf.push(td)}else Lf.push(ia)}for(var Qa=Lf.length,Ed=[],Ca=0;Ca<Qa;Ca++){ia=Lf[Ca];ia.cc=h;ia.Lc=h;Ed[ia.qd]||(Ed[ia.qd]=[]);Ed[ia.qd][ia.pd]||(Ed[ia.qd][ia.pd]=[]);Ed[ia.qd][ia.pd].push(ia)}for(var Th=[],df=[],wg=[],ef={count:0},ee={count:0},ff=rd,fe=sd,za,ud,ih=Ed.length,
Ca=0;Ca<ih;Ca++)if(Ed[Ca]){var gl=Ed[Ca].length,xb=this.he(Ca);xk(xb,0);for(Db=0;Db<gl;Db++)if(Ed[Ca][Db]){var yb=this.yd(Db);if(Th[Db]===f){xk(yb,0);Th[Db]=h}for(var Vd=Ed[Ca][Db],Uh=Vd.length,gf=0;gf<Uh;gf++){ia=Vd[gf];if(ia.visible||ia===this.Ab)if(ia.Zj>1||ia.wj>1)df.push(ia);else{var Pc=mj(ia,xb,yb);if(Pc!==Vi&&!ia.pa.aa()){if(ef[Db]===f){ef[Db]=-1;ef.count++}if(ee[Ca]===f){ee[Ca]=-1;ee.count++}wg.push(ia);ph(ia,Infinity,Infinity,Qb,cf)}else{var xg=isFinite(yb.width)?yb.width:rd,jh=isFinite(xb.height)?
xb.height:sd,Ib=new K(Math.max(yb.zf,Math.min(xg,yb.Ed)),Math.max(xb.zf,Math.min(jh,xb.Ed))),jc=ia.margin,hf=jc.right+jc.left,xc=jc.top+jc.bottom;ph(ia,Infinity,Infinity,Qb,cf);var Wd=ia.la,Be=Math.max(Wd.width+hf,0),dd=Math.max(Wd.height+xc,0);za=this.he(Ca);ud=Math.max(dd-za.Ja,0);ud>fe&&(ud=fe);xk(za,za.Ja+ud);fe=Math.max(fe-ud,0);za=this.yd(Db);ud=Math.max(Be-za.Ja,0);ud>ff&&(ud=ff);xk(za,za.Ja+ud);ff=Math.max(ff-ud,0)}}}}}for(var Ce=0,ge=0,Qa=this.nu,Ca=0;Ca<Qa;Ca++)this.ve[Ca]!==f&&(Ce=Ce+this.yd(Ca).Ja);
Qa=this.$u;for(Ca=0;Ca<Qa;Ca++)this.Ee[Ca]!==f&&(ge=ge+this.he(Ca).Ja);ff=Math.max(rd-Ce,0);fe=Math.max(sd-ge,0);Qa=wg.length;for(Ca=0;Ca<Qa;Ca++){var ia=wg[Ca],xb=this.he(ia.qd),yb=this.yd(ia.pd),yg=ia.la,jc=ia.margin,hf=jc.right+jc.left,xc=jc.top+jc.bottom;ef[ia.pd]=Math.max(yg.width+hf-yb.Ie,0);ee[ia.qd]=Math.max(yg.height+xc-xb.Ie,0)}var Vh=0,Mf=0;for(Ca in ee)Ca!=="count"&&(Vh=Vh+ee[Ca]);for(Ca in ef)Ca!=="count"&&(Mf=Mf+ef[Ca]);for(Ca=0;Ca<Qa;Ca++){ia=wg[Ca];if(ia.visible||ia===this.Ab){xb=
this.he(ia.qd);yb=this.yd(ia.pd);xg=isFinite(yb.width)?yb.width:isFinite(ff)?yb.Ie+ef[ia.pd]/Mf*ff:yb.Ie||ff;jh=isFinite(xb.height)?xb.height:isFinite(fe)?xb.Ie+ee[ia.qd]/Vh*fe:xb.Ie||fe;Ib=new K(Math.max(yb.zf,Math.min(xg,yb.Ed)),Math.max(xb.zf,Math.min(jh,xb.Ed)));Pc=mj(ia,xb,yb);switch(Pc){case Xi:Ib.height=Math.max(Ib.height,ia.la.height);break;case Wi:Ib.width=Math.max(Ib.width,ia.la.width)}jc=ia.margin;hf=jc.right+jc.left;xc=jc.top+jc.bottom;jj(ia);ph(ia,Ib.width,Ib.height,yb.zf,xb.zf);Wd=ia.la;
Be=Math.max(Wd.width+hf,0);dd=Math.max(Wd.height+xc,0);xk(xb,Math.max(xb.Ja,dd));xk(yb,Math.max(yb.Ja,Be))}}Qa=df.length;for(Ca=0;Ca<Qa;Ca++){ia=df[Ca];if(ia.visible||ia===this.Ab){xb=this.he(ia.qd);yb=this.yd(ia.pd);Ib=new K(Math.max(yb.zf,Math.min(rd,yb.Ed)),Math.max(xb.zf,Math.min(sd,xb.Ed)));Pc=mj(ia,xb,yb);switch(Pc){case Kd:if(yb.Ie!==0)Ib.width=Math.min(Ib.width,yb.Ie);if(xb.Ie!==0)Ib.height=Math.min(Ib.height,xb.Ie);break;case Xi:if(yb.Ie!==0)Ib.width=Math.min(Ib.width,yb.Ie);break;case Wi:if(xb.Ie!==
0)Ib.height=Math.min(Ib.height,xb.Ie)}if(isFinite(yb.width))Ib.width=yb.width;if(isFinite(xb.height))Ib.height=xb.height;for(var he=new K(0,0),kc=1;kc<ia.Zj;kc++){if(ia.qd+kc>=this.$u)break;za=this.he(ia.qd+kc);he.height=he.height+Math.max(za.zf,isNaN(za.Ge)?za.Ed:Math.min(za.Ge,za.Ed))}for(kc=1;kc<ia.wj;kc++){if(ia.pd+kc>=this.nu)break;za=this.yd(ia.pd+kc);he.width=he.width+Math.max(za.zf,isNaN(za.Ge)?za.Ed:Math.min(za.Ge,za.Ed))}Ib.width=Ib.width+he.width;Ib.height=Ib.height+he.height;jc=ia.margin;
hf=jc.right+jc.left;xc=jc.top+jc.bottom;ph(ia,Ib.width,Ib.height,Qb,cf);for(var Wd=ia.la,Be=Math.max(Wd.width+hf,0),dd=Math.max(Wd.height+xc,0),zg=0,kc=0;kc<ia.Zj;kc++){za=this.he(ia.qd+kc);zg=zg+(za.Ja||0)}if(zg<dd)for(var Gd=dd-zg;Gd>0;){var yc=za.Ja||0;if(isNaN(za.height)&&za.Ed>yc){xk(za,Math.min(za.Ed,yc+Gd));za.Ja!==yc&&(Gd=Gd-(za.Ja-yc))}if(za.index-1===-1)break;za=this.he(za.index-1)}for(var De=0,kc=0;kc<ia.wj;kc++){za=this.yd(ia.pd+kc);De=De+(za.Ja||0)}if(De<Be)for(Gd=Be-De;Gd>0;){yc=za.Ja||
0;if(isNaN(za.width)&&za.Ed>yc){xk(za,Math.min(za.Ed,yc+Gd));za.Ja!==yc&&(Gd=Gd-(za.Ja-yc))}if(za.index-1===-1)break;za=this.yd(za.index-1)}}}for(var jf=0,Ee=0,Pc=aj(this),Ag=this.pa,Bg=this.Dd,Xd=ge=Ce=0,Nf=0,Qa=this.nu,Ca=0;Ca<Qa;Ca++)if(this.ve[Ca]!==f){za=this.yd(Ca);isFinite(za.width)?Xd=Xd+za.width:yk(za)===zk?Xd=Xd+za.Ja:Ce=Ce+za.Ja}var jf=isFinite(Ag.width)?Math.min(Ag.width,Bg.width):Pc!==Vi&&isFinite(rd)?rd:Ce,jf=Math.max(jf,this.Td.width),jf=Math.max(jf-Xd,0),Dg=Math.max(jf/Ce,1);isFinite(Dg)||
(Dg=1);for(Ca=0;Ca<Qa;Ca++)if(this.ve[Ca]!==f){za=this.yd(Ca);!isFinite(za.width)&&yk(za)!==zk&&xk(za,za.Ja*Dg);za.pb=e.width;e.width=e.width+za.Ja}Qa=this.$u;for(Ca=0;Ca<Qa;Ca++)if(this.Ee[Ca]!==f){za=this.he(Ca);isFinite(za.height)?Nf=Nf+za.height:yk(za)===zk?Nf=Nf+za.Ja:ge=ge+za.Ja}var Ee=isFinite(Ag.height)?Math.min(Ag.height,Bg.height):Pc!==Vi&&isFinite(sd)?sd:ge,Ee=Math.max(Ee,this.Td.height),Ee=Math.max(Ee-Nf,0),Fe=Math.max(Ee/ge,1);isFinite(Fe)||(Fe=1);for(Ca=0;Ca<Qa;Ca++)if(this.Ee[Ca]!==
f){za=this.he(Ca);!isFinite(za.height)&&yk(za)!==zk&&xk(za,za.Ja*Fe);za.pb=e.height;e.height=e.height+za.Ja}this.qE=Ed;break;case "Viewbox":var pj=a,qj=b,Mn=c,Nn=d;n>1&&t.g("Viewbox Panel cannot contain more than one GraphObject.");var Yd=l.j[0];Yd.Nb=1;jj(Yd);ph(Yd,Infinity,Infinity,Mn,Nn);var Wh=Yd.la,rj=Yd.margin,On=rj.right+rj.left,Pn=rj.top+rj.bottom;if(isFinite(pj)||isFinite(qj)){var Dp=Yd.scale,Qn=Wh.width,Rn=Wh.height,Sn=Math.max(pj-On,0),Tn=Math.max(qj-Pn,0);Yd.Nb=this.Xm===Pg?Yd.Nb*Math.min(Sn/
Qn,Tn/Rn):Yd.Nb*Math.max(Sn/Qn,Tn/Rn);if(Dp!==Yd.scale){Yd.cc=h;ph(Yd,Infinity,Infinity,Mn,Nn)}}Wh=Yd.la;e.width=isFinite(pj)?pj:Math.max(Wh.width+On,0);e.height=isFinite(qj)?qj:Math.max(Wh.height+Pn,0);break;case "Link":var Un=this instanceof of?this.cn:this;if(n===0){var sj=this.Nc;rb(sj,0,0);var Hd=this.la;Hd.$d(0,0,0,0)}else{var tj=this.fp(),Ge=this.Bj(),He=Ge.copy();He.x=0;He.y=0;var Eg,kh=this.nw();Eg=this.ca!==f?this.ca:kh.count;for(var uj=new D(Infinity,Infinity),Fg=0;Fg<Eg;Fg++){var Vn=kh.j[Fg];
uj.x=Math.min(Vn.x,uj.x);uj.y=Math.min(Vn.y,uj.y)}this.wi=new D(Ge.x,Ge.y);this.uh.clear();if(tj!==m){Ak(tj,Ge.width,Ge.height);Hd=tj.la;He.zk(Hd);this.uh.add(Hd)}for(var Gg=m,jg=m,Of=m,Fg=0;Fg<n;Fg++){var lc=l.j[Fg];if(lc!==tj)if(lc.Zi&&lc instanceof X){Ak(lc,Ge.width,Ge.height);Hd=lc.la;He.zk(Hd);this.uh.add(Hd)}else if(Eg<2){ph(lc,Infinity,Infinity);Hd=lc.la;He.zk(Hd);this.uh.add(Hd)}else{if(Gg===m){Gg=new kb;jg=new D;Of=new D}var Pf=lc.nh,Xn=lc.Py,hl=lc.Ji;Wb(hl)&&(hl=mc);var vj=lc.Zr,Ep=lc.Qy,
Xh,Yh,wj=0;if(Pf<-Eg||Pf>=Eg){var Yn=Un.HC,xj=Un.GC;if(vj!==Ui){wj=Bk(vj,xj);lc.Qa=wj}Xh=Yn.x-Ge.x;Yh=Yn.y-Ge.y}else{var kf,lh;if(Pf>=0){kf=kh.j[Pf];lh=Pf<Eg-1?kh.j[Pf+1]:kf}else{var il=Eg+Pf;kf=kh.j[il];lh=il>0?kh.j[il-1]:kf}xj=Pf>=0?kf.Zh(lh):lh.Zh(kf);if(vj!==Ui){wj=Bk(vj,xj);lc.Sb=wj}Xh=kf.x+(lh.x-kf.x)*Xn-Ge.x;Yh=kf.y+(lh.y-kf.y)*Xn-Ge.y}ph(lc,Infinity,Infinity);var Hd=lc.la,sj=lc.ja,Zh=0;if(lc instanceof X)Zh=lc.Ta;var Zn=sj.width+Zh,$n=sj.height+Zh;Gg.reset();Gg.translate(-Hd.x,-Hd.y);Gg.scale(lc.scale,
lc.scale);Gg.rotate(lc.Qa,Zn/2,$n/2);var ao=new E(0,0,Zn,$n);jg.ao(ao,hl);Gg.Bb(jg);var Fp=-jg.x+Zh/2,Gp=-jg.y+Zh/2;Of.set(Ep);if(isNaN(Of.x))Of.x=Pf>=0?jg.x+3:-(jg.x+3);if(isNaN(Of.y))Of.y=-(jg.y+3);Of.rotate(xj);Xh=Xh+Of.x;Yh=Yh+Of.y;var $h=ao;$h.set(Hd);$h.x=Xh+Fp;$h.y=Yh+Gp;this.uh.add($h);He.zk($h)}}if(this.ff)for(var bo=this.hi;bo.next();)ph(bo.value,Infinity,Infinity);this.Dk=He;var zj=this.wi;zj&&zj.$d(zj.x+He.x,zj.y+He.y);rb(e,He.width||0,He.height||0)}break;case "Grid":break;default:t.g("Unknown panel type: "+
p)}var ie=e.width,je=e.height,Aj=this.padding,Hp=Aj.top+Aj.bottom,ie=ie+(Aj.left+Aj.right),je=je+Hp;if(isFinite(g.width))ie=g.width;if(isFinite(g.height))je=g.height;ie=Math.min(j.width,ie);je=Math.min(j.height,je);ie=Math.max(i.width,ie);je=Math.max(i.height,je);ie=Math.max(c,ie);je=Math.max(d,je);e.width=ie;e.height=je;q=this.Nc;rb(q,ie,je);Yi(this,0,0,ie,je)}};function uk(a,b,c){for(var d=0;d<c;d++){var e=b.j[d];if(e.Zi===h)return a.Nq=e}b=b.j[0];return a.Nq=b}
ea.Li=function(a,b,c,d){var e=this.Dk,g=this.sa,i=g.length,j=this.sE;j.reset();if(i===0){var k=this.ta;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.pa.aa()){var l=aj(this),n=this.Dc,q=n.width,p=n.height;q===c&&p===d&&(l=Vi);switch(l){case Vi:if(q>c||p>d){this.N();ph(this,q>c?c:q,p>d?d:p)}break;case Kd:this.cc=h;ph(this,c,d,0,0);break;case Xi:this.cc=h;ph(this,c,p,0,0);break;case Wi:this.cc=h;ph(this,q,d,0,0)}}k=this.ta;k.x=a;k.y=b;k.width=c;k.height=d;var u=this.K.vb;switch(u){case "Position":for(var w=
e.x+this.padding.left,B=e.y+this.padding.top,F=0;F<i;F++){var H=g.j[F],x=H.la,I=H.margin,y=H.position.x,G=H.position.y;j.x=isNaN(y)?-w:y-w;j.y=isNaN(G)?-B:G-B;j.x=j.x+I.left;j.y=j.y+I.top;j.width=x.width;j.height=x.height;H.visible&&H.sc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var fa=this.padding.left,R=this.padding.top,S=0;S<i;S++){var da=fa,ma=g.j[S],Ha=ma.la,sa=ma.margin,db=sa.left+sa.right,Ya=Ha.width,bb=aj(ma);if(isNaN(ma.pa.width)&&bb===Kd||bb===Xi)Ya=Math.max(e.width-db,0);var Oa=
Ya+db,hb=ma.qb;if(Xb(hb))hb=this.Pi;Tb(hb)||(hb=mc);j.x=da+hb.offsetX+sa.left+(e.width*hb.x-Oa*hb.x);j.y=R+hb.offsetY+sa.top;j.width=Ya;j.height=Ha.height;if(ma.visible){ma.sc(j.x,j.y,j.width,j.height);R=R+(Ha.height+sa.bottom+sa.top)}}break;case "Horizontal":for(var Va=this.padding.top,uc=this.padding.left,zd=0;zd<i;zd++){var Wa=Va,Cc=g.j[zd],Ad=Cc.la,pc=Cc.margin,Ub=pc.top+pc.bottom,gc=Ad.height,Dc=aj(Cc);if(isNaN(Cc.pa.height)&&Dc===Kd||Dc===Wi)gc=Math.max(e.height-Ub,0);var Gb=gc+Ub,Bb=Cc.qb;
if(Xb(Bb))Bb=this.Pi;Tb(Bb)||(Bb=mc);j.x=uc+Bb.offsetX+pc.left;j.y=Wa+Bb.offsetY+pc.top+(e.height*Bb.y-Gb*Bb.y);j.width=Ad.width;j.height=gc;if(Cc.visible){Cc.sc(j.x,j.y,j.width,j.height);uc=uc+(Ad.width+pc.left+pc.right)}}break;case "Spot":var Za=uk(this,g,i),Wc=Za.la,Lc=Wc.width,kd=Wc.height,oa=this.padding,Ia=oa.left,af=oa.top;j.x=Ia-e.x;j.y=af-e.y;Za.sc(j.x,j.y,Lc,kd);for(var Jf=0;Jf<i;Jf++){var xe=g.j[Jf];if(xe!==Za){var ye=xe.la,ze=ye.width,Kf=ye.height,Ec=xe.qb;if(Xb(Ec))Ec=this.Pi;Tb(Ec)||
(Ec=mc);var wc=xe.Ji;Xb(wc)&&(wc=mc);j.x=Ec.x*Lc+Ec.offsetX-(wc.x*ze-wc.offsetX);j.y=Ec.y*kd+Ec.offsetY-(wc.y*Kf-wc.offsetY);j.x=j.x-e.x;j.y=j.y-e.y;xe.visible&&xe.sc(Ia+j.x,af+j.y,ze,Kf)}}break;case "Auto":var mb=uk(this,g,i),Mc=mb.la,Bd=0;if(mb instanceof X)Bd=mb.Ta;var ld=new E(0,0,Mc.width-Bd,Mc.height-Bd),Hb=new E(0,0,1,1),ub=mb.margin,md=ub.left,Nc=ub.top,Oc=this.padding,Pd=Oc.left,Qd=Oc.top;j.x=md;j.y=Nc;j.width=Mc.width;j.height=Mc.height;mb.sc(Pd+j.x,Qd+j.y,j.width,j.height);var hc=vk(mb),
Zb=wk(mb),ab=(new D).ao(ld,hc),Cb=(new D).ao(ld,Zb);Hb.x=ab.x;Hb.y=ab.y;Hb.jv(Cb);Hb.x=Hb.x+(md+Pd+Bd/2);Hb.y=Hb.y+(Nc+Qd+Bd/2);for(var nd=0;nd<i;nd++){var $b=g.j[nd];if($b!==mb){var vb=$b.la,ub=$b.margin,Rd=Math.max(vb.width+ub.right+ub.left,0),Pb=Math.max(vb.height+ub.top+ub.bottom,0),ac=$b.qb;if(Xb(ac))ac=this.Pi;Tb(ac)||(ac=mc);j.x=Hb.width*ac.x+ac.offsetX-Rd*ac.x+ub.left+Hb.x;j.y=Hb.height*ac.y+ac.offsetY-Pb*ac.y+ub.top+Hb.y;j.width=Hb.width;j.height=Hb.height;$b.visible&&(Jb(Hb.x,Hb.y,Hb.width,
Hb.height,j.x,j.y,vb.width,vb.height)?$b.sc(j.x,j.y,vb.width,vb.height):$b.sc(j.x,j.y,vb.width,vb.height,new E(Hb.x,Hb.y,Hb.width,Hb.height)))}}break;case "Table":for(var Sd=this.qE,Ae,od,cd=Sd.length,Fc=0,bc=0;bc<cd;bc++)Sd[bc]&&(Fc=Math.max(Fc,Sd[bc].length));for(var Cd=Math.min(this.Um,cd-1);Cd!==cd&&(this.Ee[Cd]===f||this.Ee[Cd].Ja===0);)Cd++;for(var Cd=Math.min(Cd,cd-1),bf=-this.Ee[Cd].pb,Td=Math.min(this.zm,Fc-1);Td!==Fc&&(this.ve[Td]===f||this.ve[Td].Ja===0);)Td++;for(var Td=Math.min(Td,Fc-
1),Ud=-this.ve[Td].pb,bc=0;bc<cd;bc++)if(Sd[bc]){var Fc=Sd[bc].length,ce=this.he(bc);od=ce.pb+bf;for(var pd=0;pd<Fc;pd++)if(Sd[bc][pd]){var qd=this.yd(pd);Ae=qd.pb+Ud;for(var ib=Sd[bc][pd],pb=ib.length,Xc=0;Xc<pb;Xc++){for(var ha=ib[Xc],Ta=ha.la,Ba=new K(0,0),wb=1;wb<ha.rowSpan;wb++){if(bc+wb>=this.$u)break;var ic=this.he(bc+wb);Ba.height=Ba.height+ic.Ja}for(wb=1;wb<ha.kB;wb++){if(pd+wb>=this.nu)break;var rd=this.yd(pd+wb);Ba.width=Ba.width+rd.Ja}var sd=qd.Ja+Ba.width,Qa=ce.Ja+Ba.height;j.x=Ae;j.y=
od;j.width=sd;j.height=Qa;var Qb=Ae,cf=od,Lf=sd,Ca=Qa,ia=ha.qb.copy();if(Xb(ia)){ia.Ua(this.Pi);Tb(ia)||ia.Ua(mc);var de=qd.qb;if(Tb(de)){ia.x=de.x;ia.offsetX=de.offsetX}var Dd=ce.qb;if(Tb(Dd)){ia.y=Dd.y;ia.offsetY=Dd.offsetY}}Tb(ia)||(ia=mc);var Db=Ta.width,td=Ta.height,Ed=ha.Dd,Th=ha.Td,Db=Math.min(Ed.width,Db),td=Math.min(Ed.height,td),Db=Math.max(Th.width,Db),td=Math.max(Th.height,td),df=ha.margin,wg=df.left+df.right,ef=df.top+df.bottom,ee=mj(ha,ce,qd);if(isNaN(ha.pa.width)&&ee===Kd||ee===Xi)Db=
Math.max(sd-wg,0);if(isNaN(ha.pa.height)&&ee===Kd||ee===Wi)td=Math.max(Qa-ef,0);var ff=td+ef;j.x=j.x+(j.width*ia.x-(Db+wg)*ia.x+ia.offsetX+df.left);j.y=j.y+(j.height*ia.y-ff*ia.y+ia.offsetY+df.top);ha.visible&&(Jb(Qb,cf,Lf,Ca,j.x,j.y,Db,td)?ha.sc(j.x,j.y,Db,td):ha.sc(j.x,j.y,Db,td,new E(Qb,cf,Lf,Ca)))}}}for(bc=0;bc<i;bc++){ha=g.j[bc];if(ha instanceof v&&(ha.type===rk||ha.type===sk)){ha.li=this.ce.copy();ha.Dc=this.la.D();var fe=this.ta.copy();fe.x=0;fe.y=0;fe.freeze();ha.Nc=this.ja.D()}}break;case "Viewbox":var za=
g.j[0],ud=za.la,ih=za.margin,gl=ih.top+ih.bottom,xb=Math.max(ud.width+(ih.right+ih.left),0),yb=Math.max(ud.height+gl,0),Vd=za.qb;if(Xb(Vd))Vd=this.Pi;Tb(Vd)||(Vd=mc);j.x=e.width*Vd.x-xb*Vd.x+Vd.offsetX;j.y=e.height*Vd.y-yb*Vd.y+Vd.offsetY;j.width=ud.width;j.height=ud.height;za.sc(j.x,j.y,j.width,j.height);break;case "Link":var Uh=this.fp(),gf=0;if(Uh!==m&&gf<this.uh.count){var Pc=this.uh.j[gf];gf++;Uh.sc(Pc.x-this.Dk.x,Pc.y-this.Dk.y,Pc.width,Pc.height)}for(var xg=0;xg<i;xg++){var jh=g.j[xg];if(jh!==
Uh&&gf<this.uh.count){Pc=this.uh.j[gf];gf++;jh.sc(Pc.x-this.Dk.x,Pc.y-this.Dk.y,Pc.width,Pc.height)}}var Ib=this.nw(),jc=Ib.count;if(jc>=2&&this.ff)for(var hf=this.hi;hf.next();){var xc=hf.value,Wd=jc,Be=Ib,dd=xc.nh,Ce=xc.Py,ge=xc.Ji;Wb(ge)&&(ge=mc);var yg=xc.Zr,Vh=xc.Qy,Mf=f,he=f,kc=0;if(dd<-Wd||dd>=Wd){var zg=this.HC,Gd=this.GC;if(yg!==Ui){kc=Bk(yg,Gd);xc.Qa=kc}Mf=zg.x;he=zg.y}else{var yc=f,De=f;if(dd>=0){yc=Be.j[dd];De=dd<Wd-1?Be.j[dd+1]:yc}else var jf=Wd+dd,yc=Be.j[jf],De=jf>0?Be.j[jf-1]:yc;Gd=
dd>=0?yc.Zh(De):De.Zh(yc);if(yg!==Ui){kc=Bk(yg,Gd);xc.Qa=kc}Mf=yc.x+(De.x-yc.x)*Ce;he=yc.y+(De.y-yc.y)*Ce}var Ee=new kb;Ee.scale(xc.scale,xc.scale);Ee.rotate(xc.Qa,0,0);var Ag=xc.ja,Bg=new E(0,0,Ag.width,Ag.height),Xd=new D;Xd.ao(Bg,ge);Ee.Bb(Xd);var Nf=-Xd.x,Dg=-Xd.y,Fe=Vh.copy();if(isNaN(Fe.x))Fe.x=dd>=0?Xd.x+3:-(Xd.x+3);if(isNaN(Fe.y))Fe.y=-(Xd.y+3);Fe.rotate(Gd);Mf=Mf+Fe.x;he=he+Fe.y;Ee.KD(Bg);Nf=Nf+Bg.x;Dg=Dg+Bg.y;xc.position=new D(Mf+Nf,he+Dg)}break;case "Grid":break;default:t.g("Unknown panel type: "+
u)}}};ea.Ni=function(a){var b=this.ja;if(Jb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.sa.length,b=new D;c--;){var d=this.sa.j[0];if(d.visible||d===this.Ab){lb(b.set(a),d.transform);if(d.ka(b))return h}}return this.th===m&&this.sh===m?o:h}return o};function Ck(a,b,c){c(a,b);if(b instanceof v)for(b=b.elements;b.next();)Ck(a,b.value,c)}function ri(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof v&&ri(a,d,c)}}
function Dk(a,b,c){if(c(b))return b;if(b instanceof v)for(b=b.elements;b.next();){var d=Dk(a,b.value,c);if(d!==m){b.Rf();return d}}return m}v.prototype.findObject=v.prototype.Pe=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof v&&!c.YF()){c=c.Pe(a);if(c!==m)return c}}return m};Q.prototype.findObjectByPred=v.prototype.RB=function(a){return a(this)?this:Ek(this,a)};
function Ek(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof v){d=Ek(d,b);if(d!==m)return d}}return m}
v.prototype.Sc=function(a,b,c){if(this.vd===o)return m;if(this.K===ai){if(this.vd===o)a=m;else if(this.Lc)a=m;else{b=this.ja;a=Jb(0,0,b.width,b.height,a.x,a.y)?this:m}return a}b===f&&(b=m);c===f&&(c=m);if(this.Lc)return m;var d=this.ja,e=1/this.zl();if(Jb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,a.x,a.y)){for(var g=this.sa.length,e=new D;g--;){var i=this.sa.j[g];if(i.visible||i===this.Ab){lb(e.set(a),i.transform);var j=m;i instanceof v?j=i.Sc(e,b,c):i.vd===h&&i.ka(e)&&(j=i);if(j!==m){b!==m&&(j=b(j));
if(j&&(c===m||c(j)))return j}}}return this.background===m&&this.Zg===m?m:Jb(0,0,d.width,d.height,a.x,a.y)?this:m}return m};
v.prototype.vn=function(a,b,c,d){if(this.vd===o)return o;if(this.K===ai){if(this.vd===o)a=o;else{!(d instanceof z)&&!(d instanceof ta)&&new z(Q);b=this.ja;a=Jb(0,0,b.width,b.height,a.x,a.y)?this.background!==m||this.Zg!==m:o}return a}b===f&&(b=m);c===f&&(c=m);!(d instanceof z)&&!(d instanceof ta)&&(d=new z(Q));var e=this.ja;if(Jb(0,0,e.width,e.height,a.x,a.y)){for(var g=this.sa.length,e=new D;g--;){var i=this.sa.j[g];if(i.visible||i===this.Ab){lb(e.set(a),i.transform);if((i instanceof v?i.vn(e,b,
c,d):i.ka(e))&&i.vd!==o){b!==m&&(i=b(i));i&&(c===m||c(i))&&d.add(i)}}}return this.background!==m||this.Zg!==m}return o};
v.prototype.yl=function(a,b,c,d,e,g){if(this.vd===o)return o;if(this.K===ai){if(this.vd===o)a=o;else{g===f&&(g=new kb);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.qu(a,g)){$i(this,b,c,e);a=h}else a=this.ie(a,g)?d:o}return a}g===f&&(g=new kb);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.qu(a,g)){$i(this,b,c,e);return h}if(this.ie(a,g)){for(var i=this.sa.length;i--;){var j=this.sa.j[i];if(j.visible||j===this.Ab){var k=j.ta,l=this.ta;if(!(k.x>l.width||k.y>l.height||k.x+
k.width<0||k.y+k.height<0)){if(j instanceof v)k=j.yl(a,b,c,d,e,g.copy());else{var k=j,l=a,n=d,q=g.copy();if(k.vd===o)k=o;else{q===f&&(q=new kb);q.multiply(k.transform);k=n?k.ie(l,q):k.qu(l,q)}}if(k){b!==m&&(j=b(j));j&&(c===m||c(j))&&e.add(j)}}}}return d}return o};
v.prototype.wn=function(a,b,c,d,e){if(this.vd===o)return o;if(this.K===ai){if(this.vd===o)a=o;else{c=this.ja;b=a.$h(b);a=a.x>0&&a.x<c.width&&a.y>0&&a.y<c.height||nb(a.x,a.y,0,0,0,c.height)<b||nb(a.x,a.y,0,c.height,c.width,c.height)<b||nb(a.x,a.y,c.width,c.height,c.width,0)<b||nb(a.x,a.y,c.width,0,0,0)<b?h:o}return a}c===f&&(c=m);d===f&&(d=m);var g=this.ja,i=a.$h(b);if(a.x>0&&a.x<g.width&&a.y>0&&a.y<g.height||nb(a.x,a.y,0,0,0,g.height)<i||nb(a.x,a.y,0,g.height,g.width,g.height)<i||nb(a.x,a.y,g.width,
g.height,g.width,0)<i||nb(a.x,a.y,g.width,0,0,0)<i){for(var g=new D,i=new D,j=this.sa.length;j--;){var k=this.sa.j[j];if(k.visible||k===this.Ab){var l=k.ta,n=this.ta;if(!(l.x>n.width||l.y>n.height||l.x+l.width<0||l.y+l.height<0)){l=k.transform;lb(g.set(a),l);lb(i.set(b),l);if(k instanceof v?k.wn(g,i,c,d,e):k.SB(g,i)){c!==m&&(k=c(k));k&&(d===m||d(k))&&e.add(k)}}}}return h}return o};
function vk(a){var b=a.n;if(b===f||b===cc)b=m;if(b===m&&a instanceof X){a=a.za;if(a!==m)b=a.n}b===m&&(b=dc);return b}function wk(a){var b=a.o;if(b===f||b===cc)b=m;if(b===m&&a instanceof X){a=a.za;if(a!==m)b=a.o}b===m&&(b=qc);return b}v.prototype.add=v.prototype.add=function(a){t.c(a,Q,v,"add:element");this.kc(this.sa.count,a)};v.prototype.elt=v.prototype.V=function(a){return this.sa.V(a)};
v.prototype.insertAt=v.prototype.kc=function(a,b){b instanceof T&&t.g("Cannot add a Part to a Panel: "+b);if(this===b||this.gi(b)){this===b&&t.g("Cannot make a Panel contain itself: "+this.toString());t.g("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString())}this.K===ai&&!(b instanceof X)&&t.g("Can only add Shapes to a Grid Panel, not: "+b);b.Ml(this);b.Di=m;if(this.sy!==m){var c=b.data;if(c!==m&&typeof c==="object"){if(this.ef===m)this.ef=new ra(Object,
v);this.ef.add(c,b)}}c=this.sa;c.kc(a,b);a>=c.count&&(a=c.count-1);this.N();b.N();c=this.ba;if(c!==m){var d=this.b;d!==m&&d.ha.eb||c.pe(ve,"elements",this,m,b,m,a)}};v.prototype.remove=v.prototype.remove=function(a){t.c(a,Q,v,"remove:element");for(var b=this.sa,c=b.count,d=-1,e=0;e<c;e++)if(b.j[e]===a){d=e;break}d!==-1&&this.Ad(d)};v.prototype.removeAt=v.prototype.We=function(a){s&&t.h(a,v,"removeAt:idx");a>=0&&this.Ad(a)};
v.prototype.Ad=function(a){var b=this.sa,c=b.V(a);c.Di=m;if(this.ef!==m){var d=c.data;typeof d==="object"&&this.ef.remove(d)}b.We(a);this.cc=o;this.N();if(this instanceof W&&c===this.Di)this.Di=m;b=this.ba;if(b!==m){d=this.b;d!==m&&d.ha.eb||b.pe(we,"elements",this,c,m,a,m)}};t.m(v,{$u:"rowCount"},function(){return this.Ee.length});
v.prototype.getRowDefinition=v.prototype.he=function(a){s&&t.h(a,v,"getRowDefinition:idx");a<0&&t.ga(a,">= 0",v,"getRowDefinition:idx");var a=Math.round(a),b=this.Ee;if(b[a]===f){var c=new Lj;c.Ml(this);c.Uk=h;c.W=a;b[a]=c}return b[a]};v.prototype.removeRowDefinition=v.prototype.cK=function(a){s&&t.h(a,v,"removeRowDefinition:idx");a<0&&t.ga(a,">= 0",v,"removeRowDefinition:idx");var a=Math.round(a),b=this.Ee;b[a]&&(b[a]=f)};t.m(v,{nu:"columnCount"},function(){return this.ve.length});
v.prototype.getColumnDefinition=v.prototype.yd=function(a){s&&t.h(a,v,"getColumnDefinition:idx");a<0&&t.ga(a,">= 0",v,"getColumnDefinition:idx");var a=Math.round(a),b=this.ve;if(b[a]===f){var c=new Lj;c.Ml(this);c.Uk=h;c.W=a;b[a]=c}return b[a]};v.prototype.removeColumnDefinition=v.prototype.aK=function(a){s&&t.h(a,v,"removeColumnDefinition:idx");a<0&&t.ga(a,">= 0",v,"removeColumnDefinition:idx");var a=Math.round(a),b=this.ve;b[a]&&(b[a]=f)};t.a(v,"rowSizing",v.prototype.lD);
t.defineProperty(v,{lD:"rowSizing"},r("vq"),function(a){var b=this.vq;if(b!==a){a!==qk&&a!==zk&&t.g("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None");this.vq=a;this.N();this.d("rowSizing",b,a)}});t.a(v,"columnSizing",v.prototype.jB);
t.defineProperty(v,{jB:"columnSizing"},r("zo"),function(a){var b=this.zo;if(b!==a){a!==qk&&a!==zk&&t.g("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None");this.zo=a;this.N();this.d("columnSizing",b,a)}});t.a(v,"topIndex",v.prototype.dH);t.defineProperty(v,{dH:"topIndex"},r("Um"),function(a){var b=this.Um;if(b!==a){(!isFinite(a)||a<0)&&t.g("topIndex must be greater than zero and a real number. Was "+a);this.Um=a;kj(this);this.d("topIndex",b,a)}});
t.a(v,"leftIndex",v.prototype.fG);t.defineProperty(v,{fG:"leftIndex"},r("zm"),function(a){var b=this.zm;if(b!==a){(!isFinite(a)||a<0)&&t.g("leftIndex must be greater than zero and a real number. Was "+a);this.zm=a;kj(this);this.d("leftIndex",b,a)}});t.a(v,"data",v.prototype.data);
t.defineProperty(v,{data:"data"},r("gm"),function(a){var b=this.gm;if(b!==a){var c=this instanceof T&&!(this instanceof of);c&&t.e(a,"object",v,"data");qf(this);this.gm=a;var d=this.b;if(d!==m)if(c){b!==m&&d.Qf.remove(b);a!==m&&d.Qf.add(a,this)}else{c=this.Y;if(c!==m&&c.ef!==m){b!==m&&c.ef.remove(b);a!==m&&c.ef.add(a,this)}}this.d("data",b,a);d!==m&&d.ha.eb||a!==m&&this.mc()}});function Hj(a){a=a.Hk;return a!==m&&a.Na}
function qf(a){var b=a.Hk;if(b===m){a.data!==m&&t.g("Template cannot have .data be non-null: "+a);a.Hk=b=new z(Ue)}else if(b.Na)return;var c=new z(Q);Ck(a,a,function(a,d){var e=d.Tb;if(e!==m){d.$l=o;for(var g=e.f;g.next();){e=g.value;if(e.mode===We)d.$l=h;var i=e.co;if(i!==m){var p=a;i!==""&&(p=a.Pe(i));if(p!==m){c.add(p);if(p.Jq===f)p.Jq=new z(Ue);p.Jq.add(e)}}b.add(e)}}if(d instanceof v){if(d.Ee.length>0){g=d.Ee;i=g.length;for(p=0;p<i;p++){var u=g[p];if(u!==f&&u.Tb!==m)for(var w=u.Tb.f;w.next();){e=
w.value;e.nf=u;e.dx=2;e.Wt=u.index;b.add(e)}}}if(d.ve.length>0){g=d.ve;i=g.length;for(p=0;p<i;p++){u=g[p];if(u!==f&&u.Tb!==m)for(w=u.Tb.f;w.next();){e=w.value;e.nf=u;e.dx=1;e.Wt=u.index;b.add(e)}}}}});for(var d=c.f;d.next();){var e=d.value;if(e.Jq!==f){e.$l=h;for(var g=e.Jq.f;g.next();){var i=g.value;if(e.Tb===m)e.Tb=new z(Ue);e.Tb.add(i)}}delete e.Jq}for(d=b.f;d.next();){e=d.value;g=e.nf;if(g!==m){e.nf=m;if(g===a)e.Ql="";else{if(g instanceof Lj)g=g.Y;e.Ql=g.name!==""?g.name:g.name="_"+t.jc(g)}}}b.freeze()}
v.prototype.updateTargetBindings=v.prototype.mc=function(a){var b=this.Hk;if(b!==m){a===f&&(a="");for(b=b.f;b.next();){var c=b.value,d=c.Vy;if(!(a!==""&&d!==a)){d=c.$y;if(!(c.mB===m&&d==="")){var d=this.data,e=c.co;e!==m&&(d=this.Pe(e));if(d===m)s&&t.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.Ql;if(g!==""){e=this.Pe(g);if(e===m)continue}else if(c.nf!==m)e=c.nf;g=c.dx;if(g!==0){if(!(e instanceof v))continue;g===1?e=e.yd(c.Wt):g===2&&(e=e.he(c.Wt))}e!==
f&&c.QD(e,d)}}}}}};t.a(v,"itemArray",v.prototype.sy);t.defineProperty(v,{sy:"itemArray"},r("Lj"),function(a){var b=this.Lj;if(b!==a){s&&(a!==m&&!t.isArray(a))&&t.g("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.b;c!==m&&b!==m&&ui(c,this);this.Lj=a;c!==m&&a!==m&&si(c,this);this.d("itemArray",b,a);c!==m&&c.ha.eb||this.My()}});
v.prototype.rebuildItemElements=v.prototype.My=function(){for(;this.sa.length>0;)this.Ad(0);var a=this.sy;if(a!==m)for(var b=t.Eb(a),c=0;c<b;c++)Eh(this,t.rb(a,c))};
function Eh(a,b,c){if(!(b===f||b===m)){var d=a.getCategoryForItemData(b),e=a.sC,g=m;e!==m&&(g=e.da(d));if(g===m){if(t.xE===f){t.xE=h;t.trace('No item template Panel found for category "'+d+'" on '+a);t.trace("  Using default item template.")}g=a.b.eE}if(g instanceof v){qf(g);e=g.copy();if(typeof b==="object"){if(a.ef===m)a.ef=new ra(Object,v);a.ef.add(b,e)}typeof c==="number"?a.kc(c,e):a.add(e);e.yw=d;e.data=b}}}v.prototype.isItemPanel=v.prototype.YF=function(){return this.Lj!==m||this.Vf!==m};
t.a(v,"itemTemplate",v.prototype.bG);t.defineProperty(v,{bG:"itemTemplate"},function(){return this.Vf===m?m:this.Vf.da("")},function(a){if(this.Vf===m)this.Vf=new ra("string",v);var b=this.Vf.da("");if(b!==a){t.c(a,v,v,"itemTemplate");a instanceof T&&t.g("itemTemplate must not be a Part: "+a);this.Vf.add("",a);this.d("itemTemplate",b,a);a=this.b;a!==m&&a.ha.eb||this.My()}});t.a(v,"itemTemplateMap",v.prototype.sC);
t.defineProperty(v,{sC:"itemTemplateMap"},r("Vf"),function(a){var b=this.Vf;if(b!==a){t.c(a,ra,v,"itemTemplateMap");for(var c=a.f;c.next();){var d=c.value;d instanceof T&&t.g("Template in itemTemplateMap must not be a Part: "+d)}this.Vf=a;this.d("itemTemplateMap",b,a);a=this.b;a!==m&&a.ha.eb||this.My()}});t.a(v,"itemCategoryProperty",v.prototype.aG);
t.defineProperty(v,{aG:"itemCategoryProperty"},r("vm"),function(a){var b=this.vm;if(b!==a){typeof a!=="string"&&typeof a!=="function"&&t.wc(a,"string or function",v,"itemCategoryProperty");this.vm=a;this.d("itemCategoryProperty",b,a)}});
v.prototype.getCategoryForItemData=v.prototype.UI=function(a){if(a===m)return"";var b=this.vm;if(typeof b==="function")b=b(a);else if(typeof b==="string"&&typeof a==="object"){if(b==="")return"";b=t.Za(a,b)}else return"";if(b===f)return"";if(typeof b==="string")return b;s&&t.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
function Lj(){t.Lb(this);this.Uj=m;this.Uk=h;this.W=0;this.Ge=NaN;this.$k=0;this.Zk=Infinity;this.qa=cc;this.pb=this.Ja=0;this.Tb=m;this.Gq=Fk;this.Qg=Og}t.J("RowColumnDefinition",Lj);Lj.prototype.copy=function(){var a=new Lj;a.Uk=this.Uk;a.W=this.W;a.Ge=this.Ge;a.$k=this.$k;a.Zk=this.Zk;a.qa=this.qa;a.Ja=this.Ja;a.pb=this.pb;a.Qg=this.Qg;a.Gq=this.Gq;a.Tb=this.Tb;return a};var Fk;Lj.Default=Fk=t.l(Lj,"Default",0);var zk;Lj.None=zk=t.l(Lj,"None",1);var qk;
Lj.ProportionalExtra=qk=t.l(Lj,"ProportionalExtra",2);Lj.prototype.Ml=ba("Uj");function xk(a,b){a.Ja=isNaN(a.Ge)?Math.max(Math.min(a.Zk,b),a.$k):Math.max(Math.min(a.Zk,a.Ge),a.$k)}Lj.prototype.wd=function(a,b,c,d,e){var g=this.Uj;if(g!==m){g.N();for(var i=this.Ou,j=g.sa,k=j.length,l=0;l<k;l++){var n=j.j[l];(i?n.qd:n.pd)===this.index&&n.N()}g.pe(ue,a,this,b,c,d,e);if(this.Tb!==m){b=g.vr();if(b!==m){b=b.data;if(b!==m)for(c=this.Tb.f;c.next();)c.value.PD(this,b,a)}}}};t.m(Lj,{Y:"panel"},r("Uj"));
t.m(Lj,{Ou:"isRow"},r("Uk"));t.m(Lj,{index:"index"},r("W"));t.a(Lj,"height",Lj.prototype.height);t.defineProperty(Lj,{height:"height"},r("Ge"),function(a){var b=this.Ge;if(b!==a){s&&t.e(a,"number",Lj,"height");a<0&&t.ga(a,">= 0",Lj,"height");this.Ge=a;xk(this,this.Ja);this.wd("size",b,a)}});t.a(Lj,"width",Lj.prototype.width);
t.defineProperty(Lj,{width:"width"},r("Ge"),function(a){var b=this.Ge;if(b!==a){s&&t.e(a,"number",Lj,"width");a<0&&t.ga(a,">= 0",Lj,"width");this.Ge=a;xk(this,this.Ja);this.wd("size",b,a)}});t.a(Lj,"minimum",Lj.prototype.zf);t.defineProperty(Lj,{zf:"minimum"},r("$k"),function(a){var b=this.$k;if(b!==a){s&&t.e(a,"number",Lj,"minimum");(a<0||!isFinite(a))&&t.ga(a,">= 0",Lj,"minimum");this.$k=a;xk(this,this.Ja);this.wd("minimum",b,a)}});t.a(Lj,"maximum",Lj.prototype.Ed);
t.defineProperty(Lj,{Ed:"maximum"},r("Zk"),function(a){var b=this.Zk;if(b!==a){s&&t.e(a,"number",Lj,"maximum");a<0&&t.ga(a,">= 0",Lj,"maximum");this.Zk=a;xk(this,this.Ja);this.wd("maximum",b,a)}});t.a(Lj,"alignment",Lj.prototype.qb);t.defineProperty(Lj,{qb:"alignment"},r("qa"),function(a){var b=this.qa;if(!b.z(a)){s&&t.c(a,J,Lj,"alignment");this.qa=a.D();this.wd("alignment",b,a)}});t.a(Lj,"stretch",Lj.prototype.oh);
t.defineProperty(Lj,{oh:"stretch"},r("Qg"),function(a){var b=this.Qg;if(b!==a){s&&t.Va(a,Q,Lj,"stretch");this.Qg=a;this.wd("stretch",b,a)}});t.a(Lj,"sizing",Lj.prototype.cs);t.defineProperty(Lj,{cs:"sizing"},r("Gq"),function(a){var b=this.Gq;if(b!==a){s&&t.Va(a,Lj,Lj,"sizing");this.Gq=a;this.wd("sizing",b,a)}});function yk(a){if(a.cs===Fk){var b=a.Uj;return a.Ou?b.lD:b.jB}return a.cs}t.m(Lj,{Ie:"actual"},r("Ja"));t.m(Lj,{position:"position"},r("pb"));
Lj.prototype.bind=Lj.prototype.bind=function(a){a.nf=this;var b=this.Y;if(b!==m){b=b.vr();b!==m&&Hj(b)&&t.g("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a)}if(this.Tb===m)this.Tb=new z(Ue);this.Tb.add(a)};function X(){Q.call(this);this.za=m;this.Xo="None";this.Mh=o;this.ep=Og;this.Kk=m;this.rc=this.$e="black";this.Jd=1;this.Om="butt";this.Pm="miter";this.Qm=10;this.Oh=this.Nh=cc;this.eq=this.dq=0;this.up=h;this.tE=new E;this.om=this.Tm="None";this.mp=1}t.J("Shape",X);
t.ua(X,Q);X.prototype.jb=function(a){Q.prototype.jb.call(this,a);a.za=this.za;a.Xo=this.Xo;a.Mh=this.Mh;a.ep=this.ep;a.Kk=this.Kk;a.$e=this.$e;a.rc=this.rc;a.Jd=this.Jd;a.Om=this.Om;a.Pm=this.Pm;a.Qm=this.Qm;a.Nh=this.Nh.D();a.Oh=this.Oh.D();a.dq=this.dq;a.eq=this.eq;a.up=this.up;a.Tm=this.Tm;a.om=this.om;a.mp=this.mp};X.prototype.toString=function(){return"Shape("+(this.Xa!=="None"?this.Xa:this.Tl!=="None"?this.Tl:this.Iu)+")#"+t.jc(this)};
X.prototype.pr=function(a){if(!(this.rc===m&&this.$e===m)){this.$e!==m&&hj(this,a,this.$e,h);this.rc!==m&&hj(this,a,this.rc,o);a.lineWidth=this.Jd;a.lineJoin=this.Pm;a.lineCap=this.Om;a.miterLimit=this.Qm;var b=h;this.rc!==m&&this.$e===m&&(b=o);var c=this.za;if(c!==m)if(c.K===Ld){a.beginPath();a.moveTo(c.Ob,c.Zb);a.lineTo(c.Ac,c.Kc);this.$e!==m&&a.fill();this.rc!==m&&a.stroke()}else if(c.K===Md){var d=c.Ob,e=c.Zb,g=c.Ac,c=c.Kc,i=Math.min(d,g),j=Math.min(e,c),d=Math.abs(g-d),e=Math.abs(c-e);this.$e!==
m&&a.fillRect(i,j,d,e);if(this.rc!==m){if(b){var k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.strokeRect(i,j,d,e);if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=k[1];a.shadowBlur=k[2]}}}else if(c.K===Nd){d=c.Ob;e=c.Zb;g=c.Ac;c=c.Kc;i=Math.abs(g-d)/2;j=Math.abs(c-e)/2;d=Math.min(d,g)+i;e=Math.min(e,c)+j;a.beginPath();a.moveTo(d,e-j);a.bezierCurveTo(d+Ic*i,e-j,d+i,e-Ic*j,d+i,e);a.bezierCurveTo(d+i,e+Ic*j,d+Ic*i,e+j,d,e+j);a.bezierCurveTo(d-Ic*i,e+
j,d-i,e+Ic*j,d-i,e);a.bezierCurveTo(d-i,e-Ic*j,d-Ic*i,e-j,d,e-j);a.closePath();this.$e!==m&&a.fill();if(this.rc!==m){if(b){k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.stroke();if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=k[1];a.shadowBlur=k[2]}}}else if(c.K===Id){e=c.Ok;c=e.length;for(d=0;d<c;d++){b=e.j[d];a.beginPath();a.moveTo(b.Ra,b.Sa);g=b.xb.j;i=g.length;for(j=0;j<i;j++){var l=g[j];switch(l.K){case ae:a.moveTo(l.ea,l.fa);break;case $d:a.lineTo(l.ea,
l.fa);break;case be:a.bezierCurveTo(l.Vj,l.Wj,l.cl,l.dl,l.el,l.fl);break;case ke:a.quadraticCurveTo(l.Vj,l.Wj,l.el,l.fl);break;case le:var n=Math.PI/180;a.arc(l.bm,l.cm,l.Ky,l.uk*n,(l.uk+l.Pl)*n,l.Pl<0?h:o);break;default:t.g("Segment not of valid type")}l.ui&&a.closePath()}if(b.op===h&&this.$e!==m){a.fill();b=h}else b=b.df?o:h;if(this.rc!==m){if(b){k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.stroke();if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=
k[1];a.shadowBlur=k[2]}}}}}};X.prototype.ug=function(){Q.prototype.ug.call(this);var a=this.b;if(a!==m){Li(a,"fill",this.fill);Li(a,"geometry",this.yr);this.xn!==Og&&Li(a,"geometryStretch",this.xn);Li(a,"stroke",this.stroke);this.Xy!=="butt"&&Li(a,"strokeCap",this.Xy);this.Yy!=="miter"&&Li(a,"strokeJoin",this.Yy);this.Zy!==10&&Li(a,"strokeMiterLimit",this.Zy);Li(a,"strokeWidth",this.Ta)}};
X.prototype.getDocumentPoint=X.prototype.zb=function(a){Wb(a)&&t.g("Spot must be real");var b=this.ja,c=this.Ta,a=new D(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.ce.Bb(a);return a};
X.prototype.Ni=function(a,b){var c=this.za;if(c===m||this.fill===m&&this.stroke===m)return o;var d=c.mb,e=this.Ta/2;c.type===Ld&&!b&&(e=e+2);var g=this.tE;g.set(d);g.uf(e+2,e+2);if(!g.ka(a))return o;d=e+1E-4;if(c.type===Ld){if(this.stroke===m)return o;d=(c.ea-c.Ra)*(a.x-c.Ra)+(c.fa-c.Sa)*(a.y-c.Sa);return(c.Ra-c.ea)*(a.x-c.ea)+(c.Sa-c.fa)*(a.y-c.fa)<0||d<0?o:Uc(c.Ra,c.Sa,c.ea,c.fa,e,a.x,a.y)}if(c.type===Md){var i=c.Ra,j=c.Sa,k=c.ea,l=c.fa,c=Math.min(i,k),n=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-
j);g.x=c;g.y=n;g.width=i;g.height=j;if(this.fill===m){g.uf(-d,-d);if(g.ka(a))return o;g.uf(d,d)}this.stroke!==m&&g.uf(e,e);return g.ka(a)}if(c.type===Nd){i=c.Ra;j=c.Sa;k=c.ea;l=c.fa;c=Math.min(i,k);n=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j=j/2;c=a.x-(c+g);n=a.y-(n+j);if(this.fill===m){g=g-d;j=j-d;if(g<=0||j<=0||c*c/(g*g)+n*n/(j*j)<=1)return o;g=g+d;j=j+d}if(this.stroke!==m){g=g+e;j=j+e}return g<=0||j<=0?o:c*c/(g*g)+n*n/(j*j)<=1}if(c.type===Id)return this.fill===m?oe(c,a.x,a.y,e):c.ka(a,
e,this.Ta>1,b);t.g("Unknown Geometry type");return o};
X.prototype.Kr=function(a,b,c,d){var e=this.pa,g=this.Jd,a=Math.max(a,0),b=Math.max(b,0),i;if(this.Mh)i=this.za.mb;else{Gk[this.Xa]===f&&t.g("Unsupported Figure:"+this.Xa);i=Gk[this.Xa].mb}var j=i.width,k=i.height,l=i.width;i=i.height;switch(aj(this)){case Vi:d=c=0;break;case Kd:l=Math.max(a-g,0);i=Math.max(b-g,0);break;case Xi:l=Math.max(a-g,0);d=0;break;case Wi:c=0;i=Math.max(b-g,0)}if(isFinite(e.width))l=e.width;if(isFinite(e.height))i=e.height;var e=this.Dd,n=this.Td,c=Math.max(c/this.scale,n.width)-
g,d=Math.max(d/this.scale,n.height)-g,l=Math.min(e.width,l);i=Math.min(e.height,i);l=Math.max(c,l);i=Math.max(d,i);c=this.xn;c=this.Mh?c===Og?Kd:c:c===Og?Gk[this.Xa].Mb:c;switch(c){case Vi:break;case Kd:j=l;k=i;break;case Pg:l=Math.min(l/j,i/k);isFinite(l)||(l=1);j=j*l;k=k*l;break;default:t.g(c+"is not a valid geometryStretch.")}if(this.Mh){d=this.yr;i=j;c=k;l=d.copy();d=d.mb;i=i/d.width;c=c/d.height;isFinite(i)||(i=1);isFinite(c)||(c=1);if(!(i===1&&c===1)){switch(l.type){case Ld:case Md:case Nd:l.Ob=
l.Ob*i;l.Zb=l.Zb*c;l.Ac=l.Ac*i;l.Kc=l.Kc*c;break;case Id:d=l.vc;e=d.length;for(n=0;n<e;n++){var q=d.j[n];q.Ra=q.Ra*i;q.Sa=q.Sa*c;for(var q=q.xb,p=q.length,u=0;u<p;u++){var w=q.j[u];switch(w.type){case $d:w.ea=w.ea*i;w.fa=w.fa*c;break;case be:w.Vj=w.Vj*i;w.Wj=w.Wj*c;w.cl=w.cl*i;w.dl=w.dl*c;w.Ac=w.Ac*i;w.Kc=w.Kc*c;break;case ke:w.Fd=w.Fd*i;w.Df=w.Df*c;w.ea=w.ea*i;w.fa=w.fa*c;break;default:t.g("Unknown Segment type: "+w.type)}}}}l.Ia=h}this.za=l}else if(this.za===m||this.za.Vs!==a||this.za.Us!==b){l=
j;i=k;d=this.pa;c=d.width;d=d.height;l!==f&&(!isNaN(l)&&isFinite(l))&&(c=l);i!==f&&(!isNaN(i)&&isFinite(i))&&(d=i);isFinite(c)||(c=100);isFinite(d)||(d=100);e=f;if(this.Tl!=="None")e=Hk(this.Tl);else if(this.Iu!=="None")e=Hk(this.Iu);else{n=Ik[this.Xa];typeof n==="string"&&(n=Ik[n]);n===f&&t.g("Unknown Shape.figure: "+this.Xa);e=n(this,c,d);e.Mc=new K(c,d)}if(e===f)(n=Ik.Rectangle)&&(e=n(this,c,d));e.Vs=l;e.Us=i;this.za=e}i=this.za.mb;Yi(this,i.x-g/2,i.y-g/2,a===0&&j===0?0:i.width+g,b===0&&k===0?
0:i.height+g)};function Ak(a,b,c){if(a.cc!==o){a.Dc.Ba();var d=a.Jd*a.Nb;Yi(a,-(d/2),-(d/2),b+d,c+d);b=a.Dc;c=a.Dd;d=a.Td;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.Dc.freeze();a.Dc.aa()||t.g("Non-real measuredBounds has been set");a.cc=o}}X.prototype.Li=function(a,b,c,d){dj(this,a,b,c,d)};
X.prototype.Ju=function(a,b,c){var d=this.transform.copy();d.Lu();var e=Lb(d,a),g=Lb(d,b),i=this.Ta/2,d=this.za;if(d===m){ph(this,Infinity,Infinity);d=this.za}var j=d.mb,k=o;if(d.type===Ld)if(this.Ta<=1.5)k=fd(d.Ob,d.Zb,d.Ac,d.Kc,e.x,e.y,g.x,g.y,c);else{if(d.Ob===d.Ac){a=i;k=0}else{a=(d.Kc-d.Zb)/(d.Ac-d.Ob);k=i/Math.sqrt(1+a*a);a=k*a}i=[];b=new D;fd(d.Ob+a,d.Zb+k,d.Ac+a,d.Kc+k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new D;fd(d.Ob-a,d.Zb-k,d.Ac-a,d.Kc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new D;fd(d.Ob+a,d.Zb+
k,d.Ob-a,d.Zb-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new D;fd(d.Ac+a,d.Kc+k,d.Ac-a,d.Kc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);if(i.length===0)return o;k=h;g=Infinity;for(j=0;j<i.length;j++){var d=i[j],l=(d.x-e.x)*(d.x-e.x)+(d.y-e.y)*(d.y-e.y);if(l<g){g=l;c.x=d.x;c.y=d.y}}}else if(d.type===Md)k=hd(j.copy().uf(i,i),e,g,c);else if(d.type===Nd)a:{d=j.copy().uf(i,i);if(d.width===0)k=fd(d.x,d.y,d.x,d.y+d.height,e.x,e.y,g.x,g.y,c);else if(d.height===0)k=fd(d.x,d.y,d.x+d.width,d.y,e.x,e.y,g.x,g.y,c);else{var a=d.width/
2,n=d.height/2,k=d.x+a,d=d.y+n,b=9999;e.x!==g.x&&(b=(e.y-g.y)/(e.x-g.x));if(Math.abs(b)<9999){g=e.y-d-b*(e.x-k);if(a*a*b*b+n*n-g*g<0){c.x=NaN;c.y=NaN;k=o;break a}j=Math.sqrt(a*a*b*b+n*n-g*g);i=(-(a*a*b*g)+a*n*j)/(n*n+a*a*b*b)+k;n=(-(a*a*b*g)-a*n*j)/(n*n+a*a*b*b)+k;a=b*(i-k)+g+d;d=b*(n-k)+g+d;k=Math.abs((e.x-i)*(e.x-i))+Math.abs((e.y-a)*(e.y-a));b=Math.abs((e.x-n)*(e.x-n))+Math.abs((e.y-d)*(e.y-d));if(k<b){c.x=i;c.y=a}else{c.x=n;c.y=d}}else{i=n*n;k=e.x-k;k=i-i/(a*a)*k*k;if(k<0){c.x=NaN;c.y=NaN;k=o;
break a}j=Math.sqrt(k);a=d+j;d=d-j;k=Math.abs(a-e.y);b=Math.abs(d-e.y);if(k<b){c.x=e.x;c.y=a}else{c.x=e.x;c.y=d}}k=h}}else if(d.type===Id){var q,p,u,w=e.x,B=e.y,F=g.x,H=g.y,x=new D,g=e.$h(g);c.x=F;c.y=H;for(j=0;j<d.vc.count;j++){p=d.vc.j[j];var I=p.xb;q=p.Ra;p=p.Sa;for(var y=q,G=p,fa,R,S=0;S<I.count;S++){fa=I.j[S];R=fa.type;l=fa.ea;u=fa.fa;var da=o;switch(R){case ae:y=l;G=u;break;case $d:da=Jk(q,p,l,u,w,B,F,H,x);break;case be:da=fa.Fd;R=fa.Df;var ma=fa.Vn,Ha=fa.Wn,da=ad(q,p,da,R,ma,Ha,l,u,w,B,F,H,
0.5,x);break;case ke:da=(q+2*fa.Fd)/3;R=(p+2*fa.Df)/3;ma=(fa.Fd*2+l)/3;Ha=(fa.Fd*2+l)/3;da=ad(q,p,da,R,ma,Ha,l,u,w,B,F,H,0.5,x);break;case le:u=me(fa);R=u.length;for(j=0;j<R;j++){n=u[j];if(j===0&&Jk(q,p,n.Ul,n.Vl,w,B,F,H,x)){l=Kk(e,x,g,c);if(l<g){g=l;k=h}}if(ad(n.Ul,n.Vl,n.ov,n.qv,n.pv,n.rv,n.Ak,n.Bk,w,B,F,H,0.5,x)){l=Kk(e,x,g,c);if(l<g){g=l;k=h}}}l=n.Ak;u=n.Bk;break;default:t.g("Unknown Segment type: "+fa.type)}q=l;p=u;if(da){l=Kk(e,x,g,c);if(l<g){g=l;k=h}}if(fa.mC){l=y;u=G;if(Jk(q,p,l,u,w,B,F,H,
x)){l=Kk(e,x,g,c);if(l<g){g=l;k=h}}}}}e=b.x-a.x;d=b.y-a.y;a=Math.sqrt(e*e+d*d);c.x=c.x-e/a*i;c.y=c.y-d/a*i}else t.g("Invalid Geometry type");if(!k)return o;b=Lb(this.transform,c);c.x=b.x;c.y=b.y;return h};function Kk(a,b,c,d){a=a.$h(b);if(a<c){d.x=b.x;d.y=b.y;return a}return c}
function Jk(a,b,c,d,e,g,i,j,k){var l=o,n=(e-i)*(b-d)-(g-j)*(a-c);if(n===0)return o;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/n;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/n;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){e=b<d?b:d;a=b<d?d:b;if((k.y>e||fb(k.y,e))&&(k.y<a||fb(k.y,a)))l=h}else{e=a<c?a:c;a=a<c?c:a;if((k.x>e||fb(k.x,e))&&(k.x<a||fb(k.x,a)))l=h}return l}
X.prototype.containedInRect=X.prototype.qu=function(a,b){if(b===f)return a.rl(this.ta);var c=this.za;if(c===m){ph(this,Infinity,Infinity);c=this.za}var c=c.mb,d=this.Ta/2;return!a.ka(b.Bb(new D(c.x-d,c.y-d)))||!a.ka(b.Bb(new D(c.x-d,c.bottom+d)))||!a.ka(b.Bb(new D(c.right+d,c.bottom+d)))||!a.ka(b.Bb(new D(c.right+d,c.y-d)))?o:h};
X.prototype.intersectsRect=X.prototype.ie=function(a){function b(a,b){i.x=a*c.m11+b*c.m21+c.La;i.y=a*c.m12+b*c.m22+c.Ma}if(a.rl(this.ta))return h;var c=this.transform.copy();c.Lu();var d=a.left,e=a.right,g=a.top,a=a.bottom,i=new D;b(d,g);if(this.Ni(i,h))return h;b(e,g);if(this.Ni(i,h))return h;b(d,a);if(this.Ni(i,h))return h;b(e,a);if(this.Ni(i,h))return h;var j=new D,k=new D;j.x=e;j.y=g;i.x=d;i.y=g;if(Lk(this,i,j,k))return h;i.x=e;i.y=a;if(Lk(this,i,j,k))return h;j.x=d;j.y=a;if(Lk(this,i,j,k))return h;
i.x=d;i.y=g;return Lk(this,i,j,k)?h:o};function Lk(a,b,c,d){if(!a.Ju(b,c,d))return o;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;if(b<g){i=b;a=g}else{i=g;a=b}return d>=i&&d<=a}if(a<e){i=a;a=e}else i=e;return c>=i&&c<=a}
X.prototype.SB=function(a,b){if(this.fill!==m&&this.Ni(a,h))return h;var c=a.$h(b),d=c;if(this.Ta>1.5){c=this.Ta/2+Math.sqrt(c);c=c*c}var e=this.za;if(e===m){ph(this,Infinity,Infinity);e=this.za}var g=e.Ob,i=e.Zb,j=e.Ac,k=e.Kc;if(e.type===Ld){var e=nb(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=((j-g)*(a.x-g)+(k-i)*(a.y-i)>=0&&l>=0?c:d))return h}else if(e.type===Md){if(nb(a.x,a.y,g,i,g,k)<=c||nb(a.x,a.y,g,i,j,i)<=c||nb(a.x,a.y,j,i,j,k)<=c||nb(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===
Nd){var e=a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,n=Math.abs(k-i)/2;if(l===0||n===0){e=nb(a.x,a.y,g,i,j,k);return e<=c?h:o}g=new D(Infinity,Infinity);gd(e,d,0,0,-l,-n,l,n,g);gd(e,d,0,n,-l,-n,l,n,g);gd(e,d,0,-n,-l,-n,l,n,g);gd(e,d,0,l,-l,-n,l,n,g);gd(e,d,0,-l,-l,-n,l,n,g);gd(e,d,l/2,n/2,-l,-n,l,n,g);gd(e,d,-l/2,n/2,-l,-n,l,n,g);gd(e,d,l/2,-n/2,-l,-n,l,n,g);gd(e,d,-l/2,-n/2,-l,-n,l,n,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===Id){k=e.mb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;
if(a.x>j&&a.x<g&&a.y>k&&a.y<i&&nb(a.x,a.y,g,i,g,k)>c&&nb(a.x,a.y,g,i,j,i)>c&&nb(a.x,a.y,j,k,g,k)>c&&nb(a.x,a.y,j,k,j,i)>c)return o;c=Math.sqrt(c);if(this.fill===m?oe(e,a.x,a.y,c):e.ka(a,c,h))return h}return o};t.a(X,"geometry",X.prototype.yr);t.defineProperty(X,{yr:"geometry"},function(){return this.Kk?this.Kk:this.za},function(a){var b=this.za;if(b!==a){if(a!==m){s&&t.c(a,Fd,X,"geometry");this.Kk=this.za=a.freeze()}else this.Kk=this.za=m;this.Mh=h;this.N();this.d("geometry",b,a)}});
X.prototype.cf=function(){this.Mh?this.Kk=m:this.za=m;this.N()};t.a(X,"fill",X.prototype.fill);t.defineProperty(X,{fill:"fill"},r("$e"),function(a){var b=this.$e;if(b!==a&&(a===m||typeof a==="string"||a instanceof Me)){a instanceof Me&&a.freeze();this.$e=a;gj(this);this.d("fill",b,a)}});t.a(X,"stroke",X.prototype.stroke);
t.defineProperty(X,{stroke:"stroke"},r("rc"),function(a){var b=this.rc;if(b!==a&&(a===m||typeof a==="string"||a instanceof Me)){a instanceof Me&&a.freeze();this.rc=a;gj(this);this.d("stroke",b,a)}});t.a(X,"strokeWidth",X.prototype.Ta);t.defineProperty(X,{Ta:"strokeWidth"},r("Jd"),function(a){var b=this.Jd;if(b!==a){s&&t.h(a,X,"strokeWidth");if(a>=0){this.Jd=a;this.N();this.d("strokeWidth",b,a)}}});t.a(X,"strokeCap",X.prototype.Xy);
t.defineProperty(X,{Xy:"strokeCap"},r("Om"),function(a){var b=this.Om;if(b!==a)if(typeof a==="string"&&(a==="butt"||a==="round"||a==="square")){this.Om=a;gj(this);this.d("strokeCap",b,a)}else t.ga(a,'"butt", "round", or "square"',X,"strokeCap")});t.a(X,"strokeJoin",X.prototype.Yy);
t.defineProperty(X,{Yy:"strokeJoin"},r("Pm"),function(a){var b=this.Pm;if(b!==a)if(typeof a==="string"&&(a==="miter"||a==="bevel"||a==="round")){this.Pm=a;gj(this);this.d("strokeJoin",b,a)}else t.ga(a,'"miter", "bevel", or "round"',X,"strokeJoin")});t.a(X,"strokeMiterLimit",X.prototype.Zy);t.defineProperty(X,{Zy:"strokeMiterLimit"},r("Qm"),function(a){var b=this.Qm;if(b!==a){s&&t.h(a,X,"strokeMiterLimit");if(a>0){this.Qm=a;gj(this);this.d("strokeMiterLimit",b,a)}}});t.a(X,"figure",X.prototype.Xa);
t.defineProperty(X,{Xa:"figure"},r("Xo"),function(a){var b=this.Xo;if(b!==a){s&&t.e(a,"string",X,"figure");var c=Ik[a];if(typeof c==="function")c=a;else(c=Ik[a.toLowerCase()])||t.g("Unknown Shape.figure: "+a);if(b!==c){this.Xo=c;this.Mh=o;this.cf();this.d("figure",b,c)}}});t.a(X,"toArrow",X.prototype.Tl);
t.defineProperty(X,{Tl:"toArrow"},r("Tm"),function(a){var b=this.Tm;a===h?a="Standard":a===o&&(a="None");if(b!==a){s&&t.e(a,"string",X,"toArrow");var c=Hk(a);if(c instanceof Fd)c=a;else(c=Hk(a.toLowerCase()))||t.g("Unknown Shape.toArrow: "+a);if(b!==c){this.Tm=c;this.Mh=o;this.cf();Mk(this,c);this.d("toArrow",b,c)}}});t.a(X,"fromArrow",X.prototype.Iu);
t.defineProperty(X,{Iu:"fromArrow"},r("om"),function(a){var b=this.om;a===h?a="Standard":a===o&&(a="None");if(b!==a){s&&t.e(a,"string",X,"fromArrow");var c=Hk(a);if(c instanceof Fd)c=a;else(c=Hk(a.toLowerCase()))||t.g("Unknown Shape.fromArrow: "+a);if(b!==c){this.om=c;this.Mh=o;this.cf();Mk(this,c);this.d("fromArrow",b,c)}}});
function Mk(a,b){var c=a.b;if(!(c!==m&&c.ha.eb)){a.Zr=Nk;c=tc;switch(b){case "halfarrowtop":c=qc;break;case "halftriangletop":c=qc;break;case "openrighttriangletop":c=qc;break;case "opentriangletop":c=qc}if(a.Tm!=="None"){a.nh=-1;a.Ji=c}else if(a.om!=="None"){a.nh=0;a.Ji=new J(1-c.x,c.y)}}}t.defineProperty(X,{n:"spot1"},r("Nh"),function(a){t.c(a,J,X,"spot1");var b=this.Nh;if(!b.z(a)){this.Nh=a=a.D();this.N();this.d("spot1",b,a)}});
t.defineProperty(X,{o:"spot2"},r("Oh"),function(a){t.c(a,J,X,"spot2");var b=this.Oh;if(!b.z(a)){this.Oh=a=a.D();this.N();this.d("spot2",b,a)}});t.defineProperty(X,{Jb:"parameter1"},r("dq"),function(a){var b=this.dq;if(b!==a){this.dq=a;this.N();this.d("parameter1",b,a)}});t.defineProperty(X,{Vr:"parameter2"},r("eq"),function(a){var b=this.eq;if(b!==a){this.eq=a;this.N();this.d("parameter2",b,a)}});
t.m(X,{ja:"naturalBounds"},function(){if(this.za!==m){this.Nc.Ua(this.za.mb);return this.Nc}var a=this.pa;return new E(0,0,a.width,a.height)});t.a(X,"isRectangular",X.prototype.$F);t.defineProperty(X,{$F:"isRectangular"},r("up"),function(a){var b=this.up;if(b!==a){s&&t.e(a,"boolean",X,"isRectangular");this.up=a;this.N();this.d("isRectangular",b,a)}});t.a(X,"geometryStretch",X.prototype.xn);
t.defineProperty(X,{xn:"geometryStretch"},r("ep"),function(a){var b=this.ep;if(b!==a){t.Va(a,Q,X,"geometryStretch");this.ep=a;this.d("geometryStretch",b,a)}});t.a(X,"interval",X.prototype.ei);t.defineProperty(X,{ei:"interval"},r("mp"),function(a){var b=this.mp;s&&t.h(a,X,"interval");a=Math.floor(a);if(b!==a&&a>=0){this.mp=a;this.N();this.d("interval",b,a)}});
function ua(){Q.call(this);this.nd="";this.rc="black";this.ri="13px sans-serif";this.He="start";this.rp=h;this.$s=o;this.kl=Ok;this.gt=this.Yk=0;this.Aj=this.Cw=this.Dw=m;this.Am={};this.Vo=o;this.Wd=this.Hi=this.Pq=m}t.J("TextBlock",ua);t.ua(ua,Q);
ua.prototype.jb=function(a){Q.prototype.jb.call(this,a);a.nd=this.nd;a.rc=this.rc;a.ri=this.ri;a.He=this.He;a.rp=this.rp;a.$s=this.$s;a.kl=this.kl;a.Yk=this.Yk;a.gt=this.gt;a.Dw=this.Dw;a.Cw=this.Cw;a.Aj=this.Aj;a.Am=this.Am;a.Vo=this.Vo;a.Pq=this.Pq;a.Hi=this.Hi;a.Wd=this.Wd};ua.prototype.toString=function(){return this.nd.length>22?'TextBlock("'+this.nd.substring(0,20)+'"...)':'TextBlock("'+this.nd+'")'};var Pk;ua.None=Pk=t.l(ua,"None",0);var Qk;ua.WrapFit=Qk=t.l(ua,"WrapFit",1);var Ok;
ua.WrapDesiredSize=Ok=t.l(ua,"WrapDesiredSize",2);ua.prototype.N=function(){Q.prototype.N.call(this);this.Aj=this.Cw=this.Dw=m};t.a(ua,"font",ua.prototype.font);t.defineProperty(ua,{font:"font"},r("ri"),function(a){var b=this.ri;if(b!==a){s&&t.e(a,"string",ua,"font");this.ri=a;this.N();this.d("font",b,a)}});t.a(ua,"text",ua.prototype.text);t.defineProperty(ua,{text:"text"},r("nd"),function(a){var b=this.nd,a=a!==m&&a!==f?a.toString():"";if(b!==a){this.nd=a;this.N();this.d("text",b,a)}});
t.a(ua,"textAlign",ua.prototype.textAlign);t.defineProperty(ua,{textAlign:"textAlign"},r("He"),function(a){var b=this.He;if(b!==a){s&&t.e(a,"string",ua,"textAlign");if(a==="start"||a==="end"||a==="left"||a==="right"||a==="center"){this.He=a;gj(this);this.d("textAlign",b,a)}else t.ga(a,'"start", "end", "left", "right", or "center"',ua,"textAlign")}});
t.m(ua,{ja:"naturalBounds"},function(){if(!this.Nc.aa()){var a=Rk(this,this.nd,this.font,{},999999).width,b=Sk(this,a,{}),c=this.pa;if(!isNaN(c.width))a=c.width;if(!isNaN(c.height))b=c.height;rb(this.Nc,a,b)}return this.Nc});t.a(ua,"isMultiline",ua.prototype.Nu);t.defineProperty(ua,{Nu:"isMultiline"},r("rp"),function(a){var b=this.rp;if(b!==a){s&&t.e(a,"boolean",ua,"isMultiline");this.rp=a;this.N();this.d("isMultiline",b,a)}});t.a(ua,"wrap",ua.prototype.hz);
t.defineProperty(ua,{hz:"wrap"},r("kl"),function(a){var b=this.kl;if(b!==a){s&&t.Va(a,ua,ua,"wrap");this.kl=a;this.N();this.d("wrap",b,a)}});t.a(ua,"stroke",ua.prototype.stroke);t.defineProperty(ua,{stroke:"stroke"},r("rc"),function(a){var b=this.rc;if(b!==a&&(a===m||typeof a==="string"||a instanceof Me)){a instanceof Me&&a.freeze();this.rc=a;gj(this);this.d("stroke",b,a)}});t.m(ua,{xJ:"lineCount"},r("Yk"));t.a(ua,"editable",ua.prototype.yu);
t.defineProperty(ua,{yu:"editable"},r("Vo"),function(a){var b=this.Vo;if(b!==a){s&&t.e(a,"boolean",ua,"editable");this.Vo=a;this.d("editable",b,a)}});t.a(ua,"textEditor",ua.prototype.az);t.defineProperty(ua,{az:"textEditor"},r("Pq"),function(a){var b=this.Pq;if(b!==a){a instanceof HTMLElement||t.g("textEditor must be an HTMLElement");this.Pq=a;this.d("textEditor",b,a)}});t.a(ua,"errorFunction",ua.prototype.qr);
t.defineProperty(ua,{qr:"errorFunction"},r("Wd"),function(a){var b=this.Wd;if(b!==a){a!==m&&t.e(a,"function",ua,"errorFunction");this.Wd=a;this.d("errorFunction",b,a)}});
ua.prototype.pr=function(a,b){if(this.rc!==m&&this.nd.length!==0){var c=this.ri;if(c!==m){var d=this.ja.width,e=qh(this,c);if(a.Nv!==c){a.font=c;a.Nv=c}a.textAlign=this.He;hj(this,a,this.rc,h);if(this.$s){hj(this,a,this.rc,o);a.lineWidth=e*0.05}var c=this.Am,g=0,i=o,j=this.ce.Bb(new D(0,0)),k=this.ce.Bb(new D(0,e)),j=j.$h(k),k=b.scale;j*k*k<3&&(i=h);j=c.Th.length;for(k=0;k<j;k++){var l=c.Th[k],n=c.nl[k];l>d&&(l=d);var q=a,p=g,u=e,w=i,B=0;this.He==="start"||this.He==="left"?B=0:this.He==="end"||this.He===
"right"?B=d:this.He==="center"?B=d/2:t.g("textAlign must be start, end, left, right, or center");if(w)q.fillRect(0+B-l/2,p+u*0.25,l,1);else{q.fillText(n,0+B,p+u-u*0.25);if(this.$s){this.He==="end"||this.He==="right"?B=B-l:this.He==="center"&&(B=B-l/2);q.moveTo(0+B,p+u-u*0.2);q.lineTo(0+B+l,p+u-u*0.2);q.stroke()}}g=g+e}}}};
ua.prototype.Kr=function(a,b,c,d){var b={},e=0,g=0;if(isNaN(this.pa.width)){e=this.nd;if(e.length===0)e=0;else if(this.Nu){for(var i=g=0,j=o,k={rh:0};!j;){var l=Tk(e,i,k);if(l===-1){l=e.length;j=h}i=Uk(e.substr(i,l-i).replace(/^\s+|\s+$/g,""),this.ri);i>g&&(g=i);i=k.rh}e=g}else{g=Tk(e,0,{});g>=0&&(e=e.substr(0,g));e=i=Uk(e,this.ri)}e=Math.min(e,a/this.scale)}else e=this.pa.width;if(this.Y){e=Math.min(e,this.Y.Dd.width);e=Math.max(e,this.Y.Td.width)}g=Sk(this,e,b);if(!isNaN(this.pa.height))g=this.pa.height;
if(this.hz===Qk||isNaN(this.pa.width))e=b.ii;e=Math.max(c,e);g=Math.max(d,g);rb(this.Nc,e,g);Yi(this,0,0,e,g);this.Am=b};ua.prototype.Li=function(a,b,c,d){dj(this,a,b,c,d)};
function Rk(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");if(d.ii===f)d.ii=0;if(d.Th===f)d.Th=[];if(d.nl===f)d.nl=[];var g=0,i;if(a.kl===Pk){d.rh=1;d.ii=Uk(b,c);d.Th.push(d.ii);d.nl.push(b);return new K(d.ii,qh(a,c))}if(a.Aj===m)a.Aj=qh(a,c);var a=a.Aj,j=b,k=0;if(j.length===0){k=1;d.Th.push(0);d.nl.push(j)}for(;j.length>0;){for(var l=Vk(j),j=j.substr(l.length);Uk(l,c)>e;){var n=1,b=Uk(l.substr(0,n),c);for(i=0;b<=e;){n++;i=b;b=Uk(l.substr(0,n),c)}if(n===1){d.Th[k]=b;g=Math.max(g,b)}else{d.Th[k]=i;g=Math.max(g,
i)}n--;n<1&&(n=1);d.nl[k]=l.substr(0,n);k++;l=l.substr(n)}i=Vk(j);for(b=Uk(l+i,c);i.length>0&&b<=e;){l=l+i;j=j.substr(i.length);i=Vk(j);b=Uk((l+i).replace(/^\s+|\s+$/g,""),c)}l=l.replace(/^\s+|\s+$/g,"");if(l!==""){if(i.length===0){d.Th.push(b);g=Math.max(g,b)}else{i=Uk(l,c);d.Th.push(i);g=Math.max(g,i)}d.nl.push(l);k++}}d.rh=k;d.ii=Math.max(d.ii,g);return new K(d.ii,a*d.rh)}
function Vk(a){for(var b=a.length,c=0;c<b&&a.charAt(c)!==" ";)c++;for(;c<b&&a.charAt(c)===" ";)c++;return c>=b?a:a.substr(0,c)}function Uk(a,b){if(t.Pt!==b){t.Ot.font=b;t.Pt=b}return t.Ot.measureText(a).width}function qh(a,b){if(a.Aj!==m)return a.Aj;if(t.Pt!==b){t.Ot.font=b;t.Pt=b}var c=0;if(t.mw[b]!==f&&t.Mz<5E3)c=t.mw[b];else{c=t.Ot.measureText("M").width*1.3;t.mw[b]=c;t.Mz++}return c}
function Tk(a,b,c){if(c.rh===f)c.rh=0;var d=a.indexOf("\r",b);d===-1&&(d=a.indexOf("\n",b));if(d>=0)c.rh=a[d]==="\r"&&d+1<a.length&&a[d+1]==="\n"?d+2:d+1;return d}
function Sk(a,b,c){var d=a.nd,e=a.ri,g=qh(a,e);if(d.length===0){c.ii=0;a.Yk=1;return g}if(!a.Nu){var i=Tk(d,0,{});i>=0&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,n={rh:0},q=o;!q;){l=Tk(d,k,n);if(l===-1){l=d.length;q=h}if(k<=l){k=d.substr(k,l-k);if(a.kl!==Pk){c.rh=0;k=Rk(a,k,e,c,b);i=i+k.height;j=j+c.rh}else{Rk(a,k,e,c,Infinity);i=i+g;j++}}k=n.rh}a.Yk=j;return a.gt=i}
ua.prototype.ug=function(){Q.prototype.ug.call(this);var a=this.b;if(a!==m){var b=this.Am;if(b!==m){Li(a,"sizeArray",b.Th);Li(a,"textArray",b.nl);Li(a,"font",this.font);Li(a,"stroke",this.stroke);Li(a,"textAlign",this.textAlign)}}};t.a(ua,"textValidation",ua.prototype.fs);t.defineProperty(ua,{fs:"textValidation"},r("Hi"),function(a){var b=this.Hi;if(b!==a){a!==m&&t.e(a,"function",ua,"textValidation");this.Hi=a;this.d("textValidation",b,a)}});
function Kj(){Q.call(this);this.Sf=m;this.Iq="";this.Gi=(new E(NaN,NaN,NaN,NaN)).freeze();this.qm=Kd;this.Sm=this.Wd=m;this.Qj=o}t.J("Picture",Kj);t.ua(Kj,Q);Kj.prototype.jb=function(a){Q.prototype.jb.call(this,a);a.Sf=this.Sf;a.Iq=this.Iq;a.Gi.Ua(this.Gi);a.qm=this.qm;a.Wd=this.Wd};Kj.prototype.toString=function(){return"Picture("+this.source+")#"+t.jc(this)};t.a(Kj,"element",Kj.prototype.element);
t.defineProperty(Kj,{element:"element"},r("Sf"),function(a){var b=this.Sf;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||t.g("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a.onerror=function(a){c.Wd!==m&&c.Wd(c,a)};this.Sf=a;this.d("element",b,a);if(a.complete===h||a.complete===f){this.Qj=h;if(!this.pa.aa()){this.cc=o;this.N()}}else{t.mx.push(this);if(t.Dt===m)t.Dt=setInterval(function(){for(var a=[],b=t.mx,
c=b.length,i=0;i<c;i++){var j=b[i];Wk(j)||a.push(j)}if(a.length===0){clearInterval(t.Dt);t.Dt=m}t.mx=a},600)}}});function Wk(a){var b=a.Sf;if(!b)return h;if(!b.complete)return o;if(a.Qj===h)return h;a.Qj=h;if(a.b){if(!a.pa.aa())a.cc=o;a.pa.aa()||a.N();uh(a.b)}else{var a=t.Fz,c=a.length;if(c===0)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.O&&a.push(e.parentElement.O)}c=a.length;for(b=0;b<c;b++)uh(a[b])}return h}
function Xk(a){var b=document.createElement("canvas").getContext("2d");b.drawImage(a.Sf,0,0);try{b.getImageData(0,0,1,1);a.Sm=o}catch(c){a.Sm=h}}t.a(Kj,"source",Kj.prototype.source);t.defineProperty(Kj,{source:"source"},r("Iq"),function(a){var b=this.Iq;if(b!==a){t.e(a,"string",Kj,"source");this.Iq=a;this.d("source",b,a);b=t.jE;if(b[a]!==f)this.element=b[a];else{var c=new Image;c.src=a;this.element=b[a]=c}}});t.a(Kj,"sourceRect",Kj.prototype.Gf);
t.defineProperty(Kj,{Gf:"sourceRect"},r("Gi"),function(a){var b=this.Gi;if(!b.z(a)){t.c(a,E,Kj,"sourceRect");this.Gi=a=a.D();this.d("sourceRect",b,a)}});t.a(Kj,"imageStretch",Kj.prototype.iC);t.defineProperty(Kj,{iC:"imageStretch"},r("qm"),function(a){var b=this.qm;if(b!==a){t.Va(a,Q,Kj,"imageStretch");this.qm=a;this.d("imageStretch",b,a)}});t.a(Kj,"errorFunction",Kj.prototype.qr);
t.defineProperty(Kj,{qr:"errorFunction"},r("Wd"),function(a){var b=this.Wd;if(b!==a){a!==m&&t.e(a,"function",Kj,"errorFunction");this.Wd=a;if(this.Sf){var c=this;this.Sf.onerror=function(a){c.Wd!==m&&c.Wd(c,a)}}this.d("errorFunction",b,a)}});
Kj.prototype.pr=function(a,b){if(!b.Ro){this.Sm===m&&Xk(this);if(this.Sm)return}var c=this.Sf;if(c!==m){var d=c.src;(d===m||d==="")&&t.g("Element has no source attribute: "+c);var d=this.ja,e=0,g=0,i=c.naturalWidth,j=c.naturalHeight;if(!(i===0||j===0)){i===f&&c.videoWidth&&(i=c.videoWidth||d.width);j===f&&c.videoHeight&&(j=c.videoHeight||d.height);if(this.Gf.aa()){e=this.Gi.x;g=this.Gi.y;i=this.Gi.width;j=this.Gi.height}var k=i,l=j,n=this.qm;switch(n){case Vi:if(this.Gf.aa())break;e=e+Math.max((k-
d.width)/2,0);g=g+Math.max((l-d.height)/2,0);i=Math.min(d.width,k);j=Math.min(d.height,l);break;case Kd:k=d.width;l=d.height;break;case Pg:case Qg:if(n===Pg){n=Math.min(d.height/l,d.width/k);k=k*n;l=l*n}else if(n===Qg){n=Math.max(d.height/l,d.width/k);k=k*n;l=l*n;e=e+(k-d.width)/2;g=g+(l-d.height)/2;i=i*(1/(k/d.width));j=j*(1/(l/d.height));k=d.width;l=d.height}}a.drawImage(c,e,g,i,j,Math.max((d.width-k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}}};
t.m(Kj,{ja:"naturalBounds"},r("Nc"));
Kj.prototype.Kr=function(a,b,c,d){var e=this.pa,g=aj(this),i=this.Sf;if(!this.Qj&&i&&i.complete)this.Qj=h;if(i===m)b=a=0;if(g!==Kd&&g!==Xi)isFinite(e.width)?a=e.width:i!==m&&this.Qj!==o&&(a=this.Gf.aa()?this.Gf.width:i.naturalWidth);else{isFinite(a)||(a=this.Gf.aa()?this.Gf.width:i.naturalWidth);c=0}if(g!==Kd&&g!==Wi)isFinite(e.height)?b=e.height:i!==m&&this.Qj!==o&&(b=this.Gf.aa()?this.Gf.height:i.naturalHeight);else{isFinite(b)||(b=this.Gf.aa()?this.Gf.height:i.naturalHeight);d=0}e=this.Dd;g=this.Td;
c=Math.max(c/this.scale,g.width);d=Math.max(d/this.scale,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);if(i!==m&&!i.complete){isFinite(a)||(a=0);isFinite(b)||(b=0)}rb(this.Nc,a,b);Yi(this,0,0,a,b)};Kj.prototype.Li=function(a,b,c,d){dj(this,a,b,c,d)};
Kj.prototype.ug=function(){Q.prototype.ug.call(this);var a=this.b;if(a!==m){Li(a,"source",this.source);Li(a,"imageStretch",this.iC);this.Gf.aa()&&Li(a,"sourceRect",this.Gf);var b,c;this instanceof Kj&&this.element!==m&&(c=a.zh.da(t.jc(this.element)));b=typeof c==="number"?c:-1;if(b>-1){a=a.Ag;a.add(",");Ka(a);a.add('"base64": { "class":"ref", "id":'+b+" }")}else{c=this.Sf;b=c.naturalWidth;var d=c.naturalHeight;this.Sm===m&&Xk(this);if(!(this.Qj===o||this.Sm===h||b===0||d===0)){if(b===f&&c.videoWidth)b=
c.videoWidth;if(d===f&&c.videoHeight)d=c.videoHeight;var e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(c,0,0);c=e.toDataURL();b=-1;if(this instanceof Kj&&this.element!==m){t.Bn(this.element);b=a.zh.count;a.zh.add(t.jc(this.element),b)}if(b>-1){a=a.Ag;a.add(",");Ka(a);a.add('"base64": { "id":'+b+', "value":"'+c+'" }')}else Li(a,"base64",c)}}}};function L(){this.k=new Fd;this.bc=m}
function M(a,b,c,d,e){a.k===m&&t.g("StreamGeometryContext has been closed");if(e!==f&&e===h){a.bc===m&&t.g("Need to call beginFigure first");d=new pe(ae);d.ea=b;d.fa=c;a.bc.xb.add(d)}else{a.bc=new Jd;a.bc.Ra=b;a.bc.Sa=c;a.bc.Er=d;a.k.vc.add(a.bc)}}function O(a){a.k===m&&t.g("StreamGeometryContext has been closed");a.bc===m&&t.g("Need to call beginFigure first");var b=a.bc.xb.length;b>0&&a.bc.xb.j[b-1].close()}
function Yk(a){a.k===m&&t.g("StreamGeometryContext has been closed");a.bc===m&&t.g("Need to call beginFigure first");a.bc.Fr=o}L.prototype.moveTo=function(a,b,c){this.k===m&&t.g("StreamGeometryContext has been closed");this.bc===m&&t.g("Need to call beginFigure first");var d=new pe(ae);d.ea=a;d.fa=b;c&&d.close();this.bc.xb.add(d)};
L.prototype.lineTo=function(a,b,c){this.k===m&&t.g("StreamGeometryContext has been closed");this.bc===m&&t.g("Need to call beginFigure first");var d=new pe($d);d.ea=a;d.fa=b;c&&d.close();this.bc.xb.add(d)};function N(a,b,c,d,e,g,i,j){a.k===m&&t.g("StreamGeometryContext has been closed");a.bc===m&&t.g("Need to call beginFigure first");var k=new pe(be);k.Fd=b;k.Df=c;k.Vn=d;k.Wn=e;k.ea=g;k.fa=i;j&&k.close();a.bc.xb.add(k)}
function Zd(a,b,c,d,e){a.k===m&&t.g("StreamGeometryContext has been closed");a.bc===m&&t.g("Need to call beginFigure first");var g=new pe(ke);g.Fd=b;g.Df=c;g.ea=d;g.fa=e;a.bc.xb.add(g)}L.prototype.arcTo=function(a,b,c,d,e,g,i){this.k===m&&t.g("StreamGeometryContext has been closed");this.bc===m&&t.g("Need to call beginFigure first");var j=new pe(le);j.uk=a;j.Pl=b;j.Da=c;j.Ea=d;j.Ky=e;if(g)j.zG=g;i&&j.close();this.bc.xb.add(j)};
function Zk(a,b,c,d,e,g,i,j,k,l,n,q,p,u){var w=1-k,a=a*w+c*k,b=b*w+d*k,c=c*w+e*k,d=d*w+g*k,e=e*w+i*k,g=g*w+j*k,j=a*w+c*k,i=b*w+d*k,c=c*w+e*k,d=d*w+g*k;l.x=a;l.y=b;n.x=j;n.y=i;q.x=j*w+c*k;q.y=i*w+d*k;p.x=c;p.y=d;u.x=e;u.y=g}function $k(a){var a=al(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c=c+2,d=d+3){b[d]=a[c];b[d+1]=a[c];b[d+2]=a[c+1]}return b}
function al(a){for(var b=bl(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=a%2===0?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[g*2]=i;c[g*2+1]=cl(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function cl(a,b,c,d,e,g,i,j){c=a-c;i=e-i;if(c===0||i===0)if(c===0){i=(g-j)/i;j=a;e=i*j+(g-i*e)}else{d=(b-d)/c;j=e;e=d*j+(b-d*a)}else{d=(b-d)/c;i=(g-j)/i;a=b-d*a;j=(g-i*e-a)/(d-i);e=d*j+a}return new D(j,e)}
function bl(a){for(var b=[],c=Math.PI*1.5,d=0,e=0;e<a;e++){d=2*Math.PI/a*e+c;b[e]=new D(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d))}b.push(b[0]);return b}
var Ik={None:"Rectangle",Rectangle:function(a,b,c){a=new Fd;a.type=Md;a.Ra=0;a.Sa=0;a.ea=b;a.fa=c;return a},Circle:function(a,b,c){a=new Fd;a.Mb=Pg;a.type=Nd;a.Ra=0;a.Sa=0;a.ea=b;a.fa=c;a.n=new J(0.156,0.156);a.o=new J(0.844,0.844);return a},Connector:"Ellipse",Ellipse:function(a,b,c){a=new Fd;a.type=Nd;a.Ra=0;a.Sa=0;a.ea=b;a.fa=c;a.n=new J(0.156,0.156);a.o=new J(0.844,0.844);return a},TriangleRight:function(a,b,c){var a=new Fd,d=new Jd,e=new pe;e.ea=b;e.fa=0.5*c;d.xb.add(e);b=new pe;b.ea=0;b.fa=
c;d.xb.add(b.close());a.vc.add(d);a.n=new J(0,0.25);a.o=new J(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new Fd,d=new Jd,e=new pe;e.ea=b;e.fa=0;d.xb.add(e);e=new pe;e.ea=0.5*b;e.fa=c;d.xb.add(e.close());a.vc.add(d);a.n=new J(0.25,0);a.o=new J(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new Fd,d=new Jd;d.Ra=b;d.Sa=c;var e=new pe;e.ea=0;e.fa=0.5*c;d.xb.add(e);c=new pe;c.ea=b;c.fa=0;d.xb.add(c.close());a.vc.add(d);a.n=new J(0.5,0.25);a.o=new J(1,0.75);return a},TriangleUp:function(a,
b,c){var a=new Fd,d=new Jd;d.Ra=b;d.Sa=c;var e=new pe;e.ea=0;e.fa=c;d.xb.add(e);c=new pe;c.ea=0.5*b;c.fa=0;d.xb.add(c.close());a.vc.add(d);a.n=new J(0.25,0.5);a.o=new J(0.75,1);return a},Line1:function(a,b,c){a=new Fd;a.type=Ld;a.Ra=0;a.Sa=0;a.ea=b;a.fa=c;return a},Line2:function(a,b,c){a=new Fd;a.type=Ld;a.Ra=b;a.Sa=0;a.ea=0;a.fa=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new Fd;a.type=Ld;a.Ra=0;a.Sa=c/2;a.ea=b;a.fa=c/2;return a},LineV:function(a,b,c){a=new Fd;a.type=Ld;a.Ra=b/2;a.Sa=
0;a.ea=b/2;a.fa=c;return a},Curve1:function(a,b,c){a=new L;M(a,0,0,o);N(a,Ic*b,0,1*b,(1-Ic)*c,b,c);return a.k},Curve2:function(a,b,c){a=new L;M(a,0,0,o);N(a,0,Ic*c,(1-Ic)*b,c,b,c);return a.k},Curve3:function(a,b,c){a=new L;M(a,1*b,0,o);N(a,1*b,Ic*c,Ic*b,1*c,0,1*c);return a.k},Curve4:function(a,b,c){a=new L;M(a,1*b,0,o);N(a,(1-Ic)*b,0,0,(1-Ic)*c,0,1*c);return a.k},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new L;M(a,0.5*b,0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.k;b.n=
new J(0.25,0.5);b.o=new J(0.75,1);return b},Decision:"Diamond",Diamond:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.k;b.n=new J(0.25,0.25);b.o=new J(0.75,0.75);return b},Pentagon:function(a,b,c){var a=bl(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<5;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.2,0.22);b.o=new J(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var a=bl(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);
for(var e=1;e<6;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.07,0.25);b.o=new J(0.93,0.75);return b},Heptagon:function(a,b,c){var a=bl(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<7;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.2,0.15);b.o=new J(0.8,0.85);return b},Octagon:function(a,b,c){var a=bl(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<8;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.15,0.15);b.o=new J(0.85,0.85);return b},Nonagon:function(a,b,c){var a=bl(9),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<9;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.17,0.13);b.o=new J(0.82,0.82);return b},Decagon:function(a,b,c){var a=bl(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<10;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.16,0.16);b.o=new J(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=bl(12),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<12;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.16,0.16);b.o=new J(0.84,0.84);return b},
FivePointedStar:function(a,b,c){var a=al(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<10;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.312,0.383);b.o=new J(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=al(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<12;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.17,0.251);b.o=new J(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=al(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<14;e++)d.lineTo(a[e].x*b,
a[e].y*c);O(d);b=d.k;b.n=new J(0.363,0.361);b.o=new J(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=al(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<16;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.252,0.255);b.o=new J(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=al(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<18;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.355,0.361);b.o=new J(0.645,0.651);return b},TenPointedStar:function(a,b,c){var a=al(10),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<20;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new J(0.281,0.261);b.o=new J(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=$k(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new J(0.312,0.383);b.o=new J(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=$k(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*
b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new J(0.17,0.251);b.o=new J(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=$k(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new J(0.363,0.361);b.o=new J(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=$k(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*
b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new J(0.252,0.255);b.o=new J(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=$k(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new J(0.355,0.361);b.o=new J(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=$k(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*
b,a[e+2].y*c);O(d);b=d.k;b.n=new J(0.281,0.261);b.o=new J(0.723,0.748);return b},Cloud:function(a,b,c){a=new L;M(a,0.08034461*b,0.1944299*c,h);N(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);N(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);N(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);N(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*c);N(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*
c,0.9147671*b,0.3194596*c);N(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);N(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);N(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);N(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);N(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);N(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*b,0.870098*c);N(a,-0.02812061*b,0.9032597*
c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);N(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);N(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);O(a);b=a.k;b.n=new J(0.1,0.1);b.o=new J(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new L;M(a,0,0,h);N(a,1*b,0,1*b,1*c,0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new J(0.511,0.19);b.o=new J(0.776,0.76);return b},FramedRectangle:function(a,b,c){var d=new L,
e=a?a.Jb:0,a=a?a.Vr:0;e===0&&(e=0.1);a===0&&(a=0.1);M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);M(d,e*b,a*c,o,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.k;b.n=new J(e,a);b.o=new J(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new L;M(a,0,0,h);N(a,Ic*b,0,1*b,(0.5-Ic/2)*c,1*b,0.5*c);N(a,1*b,(0.5+Ic/2)*c,Ic*b,1*c,0,1*c);O(a);b=a.k;b.n=new J(0,0.2);b.o=new J(0.75,0.8);return b},Heart:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);
N(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);N(a,0*b,0,0.45*b,0,0.5*b,0.3*c);N(a,0.55*b,0,1*b,0,1*b,0.3*c);N(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);O(a);b=a.k;b.n=new J(0.15,0.29);b.o=new J(0.86,0.68);return b},Spade:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);N(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);N(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);N(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);N(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);N(a,0.4*b,0.8*c,0,0.8*c,0,0.5*c);N(a,0,0.25*c,0.4*b,0.2*c,0.49*
b,0.01*c);O(a);b=a.k;b.n=new J(0.19,0.26);b.o=new J(0.8,0.68);return b},Club:function(a,b,c){a=new L;M(a,0.4*b,0.6*c,h);N(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);N(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-
i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+
e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);O(a);b=a.k;b.n=new J(0.06,0.39);b.o=new J(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new L,a=0.5;M(d,b*0.5,0,h);d.arcTo(270,180,b*0.5,b*0.5,b*0.5);N(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;M(d,(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,b*0.5,
c*e,a*b);O(d);M(d,b*0.5,0,o);d.arcTo(270,-180,b*0.5,b*0.5,b*0.5);Yk(d);e=0.75;M(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,b*0.5,c*e,a*b);O(d);b=d.k;b.Mb=Pg;return b},Peace:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,b,0.5*c,h);N(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);N(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);N(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);N(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);M(a,0.5*b,0.1*c,h,h);N(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-d)*c,0.9*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.5+
d)*b,0.9*c,0.5*b,0.9*c);N(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);N(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*
c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+
g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.k;b.n=new J(0.146,0.146);b.o=new J(0.853,0.853);b.Mb=Pg;return b},NotAllowed:function(a,b,c){var a=Ic*0.5,d=0.5,e=new L;M(e,0.5*b,(0.5-d)*c,h);N(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,(0.5-a)*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5+
a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,(0.5+a)*b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=Ic*0.4,g=new D(0,0),i=new D(0,0),j=new D(0,0),k=new D(0,0);Zk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new D(0,0),n=new D(0,0),q=new D(0,0);Zk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,q,l,n);var p=new D(0,0),u=new D(0,0),w=new D(0,0);Zk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,p,
u,w,k,k);var B=new D(0,0),F=new D(0,0),H=new D(0,0);Zk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,H,B,F);M(e,H.x*b,H.y*c,h,h);N(e,B.x*b,B.y*c,F.x*b,F.y*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);N(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(H.x*b,H.y*c);O(e);M(e,w.x*b,w.y*c,h,h);e.lineTo(q.x*b,q.y*c);N(e,l.x*b,l.y*c,n.x*b,n.y*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,p.x*b,p.y*c,u.x*b,u.y*c,w.x*b,w.y*c);O(e);
e.k.Mb=Pg;return e.k},Fragile:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);N(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);N(a,0.25*b,0.5*c,0,0.25*c,0,0);O(a);b=a.k;b.n=new J(0.25,0);b.o=new J(0.75,
0.4);return b},HourGlass:function(a,b,c){a=new L;M(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);O(a);return a.k},Lightning:function(a,b,c){a=new L;M(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);O(a);return a.k},Parallelogram1:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.1);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=
new J(a,0);b.o=new J(1-a,1);return b},Input:"Output",Output:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);O(a);b=a.k;b.n=new J(0.1,0);b.o=new J(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.25);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new J(a,0);b.o=new J(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.25);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*
b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);b=d.k;b.n=new J(0.5-a/2,0.5-a/2);b.o=new J(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new L;M(d,0.3*b,0,h);d.lineTo(0.5*b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*
b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);O(d);b=d.k;b.n=new J(0.5-a,0.5-a);b.o=new J(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.1);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-
a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);return d.k},ThinX:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);O(a);return a.k},RightTriangle:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=
new J(0,0.5);b.o=new J(0.5,1);return b},RoundedIBeam:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);N(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);return a.k},RoundedRectangle:function(a,b,c){var d=a?a.Jb:0;d<=0&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*Ic,e=new L;M(e,d,0,h);e.lineTo(b-d,0);N(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);N(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);N(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);N(e,0,a,a,0,d,0);O(e);b=e.k;if(a>1){b.n=new J(0,
0,a,a);b.o=new J(1,1,-a,-a)}else{b.n=dc;b.o=qc}return b},Border:function(a,b,c){a=a?a.Jb:0;a<=0&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new L;M(d,a,0,h);d.lineTo(b-a,0);N(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);N(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);N(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);N(d,0,0,0,0,a,0);O(d);b=d.k;b.n=dc;b.o=qc;return b},SquareIBeam:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*
c);d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);O(d);return d.k},Trapezoid:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.2);var d=new L;M(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new J(a,0);b.o=new J(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.Jb:0,d=new L;M(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*
b,1*c);O(d);b=d.k;b.n=new J(0.1,0);b.o=new J(0.9,1);return b},GenderMale:function(a,b,c){var a=new L,d=Ic*0.4,e=0.4,g=new D(0,0),i=new D(0,0),j=new D(0,0),k=new D(0,0);M(a,(0.5-e)*b,0.5*c,h);N(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);Zk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new D(i.x,i.y);Zk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.56,g,g,i,j,k);g=new D(i.x,i.y);a.lineTo((l.x*0.1+0.855)*b,l.y*0.1*c);a.lineTo(0.85*
b,l.y*0.1*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((g.x*0.1+0.9)*b,0.15*c);a.lineTo((g.x*0.1+0.9)*b,(g.y*0.1+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=Ic*0.35;M(a,0.5*b,(0.5-e)*c,h,h);N(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*b,(0.5-d)*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);
N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5-d)*c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);M(a,(0.5-e)*b,0.5*c,h);b=a.k;b.n=new J(0.202,0.257);b.o=new J(0.692,0.839);b.Mb=Pg;return b},GenderFemale:function(a,b,c){var a=new L,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.525+e)*b,(0.5+d+g)*c,h);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-
d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);O(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h,h);N(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*
c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);M(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.k;b.n=new J(0.232,0.136);b.o=new J(0.782,0.611);b.Mb=Pg;return b},PlusLine:function(a,b,c){a=new L;M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},XLine:function(a,b,c){a=new L;M(a,
0,1*c,o);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.k},AsteriskLine:function(a,b,c){var a=new L,d=0.2/Math.SQRT2;M(a,d*b,(1-d)*c,o);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.k},CircleLine:function(a,b,c){var a=Ic*0.5,d=new L;M(d,1*b,0.5*c,o);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,
0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.k;b.n=new J(0.146,0.146);b.o=new J(0.853,0.853);b.Mb=Pg;return b},Pie:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);N(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);N(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},PiePiece:function(a,b,c){var a=Ic/Math.SQRT2*0.5,d=Math.SQRT2/2,e=1-Math.SQRT2/
2,g=new L;M(g,b,c,h);N(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);O(g);return g.k},StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new L;M(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);O(e);b=e.k;if(a&&Xb(a.n))a.n=new J(d/2,d/2);if(a&&Xb(a.o))a.o=new J(1-d/2,1-d/2);return b},LogicImplies:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,o);d.lineTo(1*b,0.5*c);d.lineTo((1-
a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.k;b.n=new J(0,0);b.o=new J(0.8,0.5);return b},LogicIff:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,o);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.k;b.n=new J(0.2,0);b.o=new J(0.8,0.5);return b},LogicNot:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.lineTo(1*b,1*c);return a.k},LogicAnd:function(a,b,c){a=new L;M(a,0,1*c,o);a.lineTo(0.5*
b,0);a.lineTo(1*b,1*c);b=a.k;b.n=new J(0.25,0.5);b.o=new J(0.75,1);return b},LogicOr:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.k;b.n=new J(0.219,0);b.o=new J(0.78,0.409);return b},LogicXor:function(a,b,c){a=new L;M(a,0.5*b,0,o);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=Ic*0.5;N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.Mb=
Pg;return b},LogicTruth:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},LogicFalsity:function(a,b,c){a=new L;M(a,0,1*c,o);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.k},LogicThereExists:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.k},LogicForAll:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*
b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.k;b.n=new J(0.25,0);b.o=new J(0.75,0.5);return b},LogicIsDefinedAs:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.k;b.n=new J(0.01,0.01);b.o=new J(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=Ic*0.5,d=new L;M(d,0,1*c,o);d.lineTo(0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.k;b.n=new J(0,0.5);b.o=new J(1,1);return b},
LogicUnion:function(a,b,c){var a=Ic*0.5,d=new L;M(d,1*b,0,o);d.lineTo(1*b,0.5*c);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.k;b.n=new J(0,0);b.o=new J(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.Jb:0,a=a?a.Vr:0;d===0&&(d=0.3);a===0&&(a=0.3);var e=new L;M(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);O(e);b=e.k;b.n=new J(0,
0.5-a/2);d=cl(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.o=new J(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},DoubleArrow:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*c);a.lineTo(0,1*c);O(a);M(a,0.3*b,0.214*c,o);a.lineTo(0.3*b,0.786*c);Yk(a);return a.k},DoubleEndArrow:function(a,
b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;c=cl(0,0.5,0.3,0,0,0.3,0.3,0.3);b.n=new J(c.x,c.y);c=cl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new J(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);
a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new J(0,0.3);c=cl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new J(c.x,c.y);return b},Pointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);O(a);b=a.k;b.n=new J(0.2,0.35);c=cl(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new J(c.x,c.y);return b},RoundedPointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new J(0.4,0.35);c=
cl(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new J(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new J(0.2,0.3);c=cl(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new J(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);O(a);b=
a.k;b.n=new J(0,0);b.o=new J(0.7,1);return b},Cone1:function(a,b,c){var a=Ic*0.5,d=Ic*0.1,e=new L;M(e,0,0.9*c,h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);O(e);b=e.k;b.n=new J(0.25,0.5);b.o=new J(0.75,0.97);return b},Cone2:function(a,b,c){a=new L;M(a,0,0.9*c,h);N(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*b,0);a.lineTo(0,0.9*c);O(a);M(a,0,0.9*c,o);N(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Yk(a);
b=a.k;b.n=new J(0.25,0.5);b.o=new J(0.75,0.82);return b},Cube1:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);O(a);M(a,0.5*b,1*c,o);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Yk(a);b=a.k;b.n=new J(0,0.3);b.o=new J(0.5,0.85);return b},Cube2:function(a,b,c){a=new L;M(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*
b,0*c);O(a);M(a,0,0.3*c,o);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Yk(a);b=a.k;b.n=new J(0,0.3);b.o=new J(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=Ic*0.5,d=Ic*0.1,e=new L;M(e,0,0.1*c,h);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);M(e,0,0.1*c,o);N(e,0,(0.1+d)*c,(0.5-a)*b,0.2*
c,0.5*b,0.2*c);N(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);Yk(e);b=e.k;b.n=new J(0,0.2);b.o=new J(1,0.9);return b},Cylinder2:function(a,b,c){var a=Ic*0.5,d=Ic*0.1,e=new L;M(e,0,0.9*c,h);e.lineTo(0,0.1*c);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);M(e,0,0.9*c,o);N(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);N(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);Yk(e);b=e.k;
b.n=new J(0,0.1);b.o=new J(1,0.8);return b},Cylinder3:function(a,b,c){var a=Ic*0.1,d=Ic*0.5,e=new L;M(e,0.1*b,0,h);e.lineTo(0.9*b,0);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);M(e,0.1*b,0,o);N(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);N(e,0.2*b,(0.5+d)*c,(0.1+a)*b,1*c,0.1*b,1*c);Yk(e);b=e.k;b.n=new J(0.2,0);b.o=new J(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,
b,c){var a=Ic*0.1,d=Ic*0.5,e=new L;M(e,0.9*b,0,h);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);M(e,0.9*b,0,o);N(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);N(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);Yk(e);b=e.k;b.n=new J(0.1,0);b.o=new J(0.8,1);return b},Prism1:function(a,b,c){a=new L;M(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*
b,c);a.lineTo(0,c);O(a);M(a,0.25*b,0.25*c,o);a.lineTo(0.5*b,c);Yk(a);b=a.k;b.n=new J(0.408,0.172);b.o=new J(0.833,0.662);return b},Prism2:function(a,b,c){a=new L;M(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);M(a,0,c,o);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);Yk(a);b=a.k;b.n=new J(0.25,0.5);b.o=new J(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*
b,1*c);a.lineTo(0,0.75*c);O(a);M(a,0.5*b,0,o);a.lineTo(0.5*b,1*c);Yk(a);b=a.k;b.n=new J(0.25,0.367);b.o=new J(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);O(a);M(a,0.5*b,0,o);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);Yk(a);b=a.k;b.n=new J(0.25,0.367);b.o=new J(0.75,0.875);return b},Actor:function(a,b,c){var d=Ic*0.2,e=Ic*0.1,a=0.5,g=0.1,i=new L;M(i,a*b,(g+0.1)*c,h);N(i,(a-d)*
b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);N(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-0.1)*c);N(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);N(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=Ic*d;M(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;N(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*c);i.lineTo(0.85*b,0.35*c);d=0.025;e=Ic*d;a=0.825;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*
b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;e=Ic*d;a=0.5;g=0.7;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=Ic*d;a=0.175;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=Ic*d;a=0.05;g=0.25;N(i,(a-
d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.k;b.n=new J(0.2,0.2);b.o=new J(0.8,0.65);return b},Card:function(a,b,c){a=new L;M(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);O(a);b=a.k;b.n=new J(0,0.2);b.o=new J(1,1);return b},Collate:function(a,b,c){a=new L;M(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);M(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.k;b.n=new J(0.25,0);b.o=new J(0.75,
0.25);return b},CreateRequest:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,o);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Yk(d);b=d.k;b.n=new J(0,a);b.o=new J(1,1-a);return b},Database:function(a,b,c){var a=new L,d=Ic*0.5,e=Ic*0.1;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,o);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);N(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);N(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,0.3*c);Yk(a);b=a.k;b.n=new J(0,0.4);b.o=new J(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*
b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);N(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);O(a);b=a.k;b.n=new J(0.226,0);b.o=new J(0.81,1);return b},DiskStorage:function(a,b,c){var a=new L,d=Ic*0.5,e=Ic*0.1;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,o);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,
0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);Yk(a);b=a.k;b.n=new J(0,0.3);b.o=new J(1,0.9);return b},Display:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);O(a);b=a.k;b.n=new J(0.25,0);b.o=new J(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.Jb:0;a===0?a=0.2:a<0.15&&(a=0.15);var d=new L,e=Ic*0.2;M(d,0,0.2*c,h);N(d,0,(0.2-e)*c,(0.2-
e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);N(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);N(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);N(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);M(d,0,a*c,o);d.lineTo(1*b,a*c);Yk(d);b=d.k;b.n=new J(0,a);b.o=new J(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.Jb:0;a<0.1&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,o);d.lineTo(1*b,a*c);Yk(d);b=d.k;b.n=new J(0,a);b.o=new J(1,
1);return b},Document:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new J(0,0);b.o=new J(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.Jb:0;a<0.2&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,o);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Yk(d);
b=d.k;b.n=new J(a/2,a/2);b.o=new J(1-a/2,1-a/2);return b},ExternalProcess:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0.1*b,0.4*c,o);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*c);Yk(a);b=a.k;b.n=new J(0.25,0.25);b.o=new J(0.75,0.75);return b},File:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*
b,1*c);a.lineTo(0,1*c);O(a);M(a,0.75*b,0,o);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Yk(a);b=a.k;b.n=new J(0,0.25);b.o=new J(1,1);return b},Interrupt:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,1*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,0);b=a.k;b.n=new J(0,0.25);b.o=new J(0.5,0.75);return b},InternalStorage:function(a,b,c){var d=a?a.Jb:0,a=a?a.Vr:0;d===0&&(d=0.1);a===0&&(a=0.1);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*
b,1*c);e.lineTo(0,1*c);O(e);M(e,d*b,0,o);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Yk(e);b=e.k;b.n=new J(d,a);b.o=new J(1,1);return b},Junction:function(a,b,c){var a=new L,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=Ic*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);N(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);N(a,0,(0.5-g)*c,(0.5-g)*b,0,0.5*b,0);N(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);M(a,(e+d)*b,(e+d)*c,o);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Yk(a);b=a.k;
b.Mb=Pg;return b},LinedDocument:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);M(a,0.1*b,0,o);a.lineTo(0.1*b,0.75*c);Yk(a);b=a.k;b.n=new J(0.1,0);b.o=new J(1,0.6);return b},LoopLimit:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);O(a);b=a.k;b.n=new J(0,0.25);b.o=new J(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,
b,c){var a=new L,d=Ic*0.5;M(a,0.5*b,1*c,h);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.k;b.n=new J(0.15,0.15);b.o=new J(0.85,0.8);return b},ManualInput:function(a,b,c){a=new L;M(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);O(a);b=a.k;b.n=new J(0,0.25);b.o=new J(1,1);return b},MessageFromUser:function(a,
b,c){a=a?a.Jb:0;a===0&&(a=0.7);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new J(0,0);b.o=new J(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.25);var d=new L;M(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new J(0,a);b.o=new J(1,1-a);return b},MicroformRecording:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*
c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new J(0,0.25);b.o=new J(1,0.75);return b},MultiDocument:function(a,b,c){c=c/0.8;a=new L;M(a,b,0,h);a.lineTo(b,0.5*c);N(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);N(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);N(a,0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);O(a);M(a,0.1*b,0.2*c,o);a.lineTo(0.8*
b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Yk(a);b=a.k;b.n=new J(0,0.25);b.o=new J(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new L;M(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);O(a);M(a,0.2*b,0.1*c,o);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);
a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Yk(a);b=a.k;b.n=new J(0,0.2);b.o=new J(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.1);var d=1-a,e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);O(e);M(e,0.5*a*b,a*c,o);e.lineTo((1-0.5*a)*b,a*c);Yk(e);b=e.k;b.n=new J(d/4+0.5*a,a);b.o=new J(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);O(a);
b=a.k;b.n=new J(0,0);b.o=new J(0.75,1);return b},Or:function(a,b,c){var a=new L,d=Ic*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);Yk(a);b=a.k;b.Mb=Pg;return b},PaperTape:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0.3*c);N(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);N(a,
0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new J(0,0.49);b.o=new J(1,0.75);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.Jb:0,a=a?a.Vr:0;d===0&&(d=0.1);a===0&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);O(e);b=e.k;b.n=new J(d,0);b.o=new J(1-a,1);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Jb:0,a=a?a.Vr:0;d===0&&(d=0.1);a===0&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);
e.lineTo(0,1*c);O(e);b=e.k;b.n=new J(d,0);b.o=new J(1-a,1);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,(1-a)*b,0,o);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Yk(d);b=d.k;b.n=new J(a,0);b.o=new J(1-a,1);return b},Process:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,o);d.lineTo(a*
b,1*c);Yk(d);b=d.k;b.n=new J(a,0);b.o=new J(1,1);return b},Sort:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);Yk(a);b=a.k;b.n=new J(0.25,0.25);b.o=new J(0.75,0.5);return b},Start:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);M(a,0.25*b,0,o);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Yk(a);b=a.k;b.n=new J(0.25,
0);b.o=new J(0.75,1);return b},Terminator:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);b=a.k;b.n=new J(0.23,0);b.o=new J(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.Jb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);O(d);b=d.k;b.n=new J(0,0);b.o=new J(1,1-a);return b},AndGate:function(a,b,c){var a=new L,d=Ic*0.5;M(a,0,0,h);a.lineTo(0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new J(0,0);b.o=new J(0.55,1);return b},Buffer:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new J(0,0.25);b.o=new J(0.5,0.75);return b},Clock:function(a,b,c){var a=new L,d=Ic*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*
c,1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,0.5*c);M(a,0.8*b,0.75*c,o);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Yk(a);b=a.k;b.Mb=Pg;return b},Ground:function(a,b,c){a=new L;M(a,0.5*b,0,o);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.k},Inverter:function(a,b,c){var a=new L,
d=Ic*0.1;M(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.n=new J(0,0.25);b.o=new J(0.4,0.75);return b},NandGate:function(a,b,c){var a=new L,d=Ic*0.5,e=Ic*0.4,g=Ic*0.1;M(a,0.8*b,0.5*c,h);N(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*
b,0);N(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.k;b.n=new J(0,0.05);b.o=new J(0.55,0.95);return b},NorGate:function(a,b,c){var a=new L,d=0.5,e=Ic*d,g=0,i=0.5;M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,
0.8*b,0.5*c);d=0.1;e=Ic*0.1;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new J(0.2,0.25);b.o=new J(0.6,0.75);return b},OrGate:function(a,b,c){var a=new L,d=Ic*0.5;M(a,0,0,h);N(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);N(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);O(a);b=a.k;b.n=
new J(0.2,0.25);b.o=new J(0.75,0.75);return b},XnorGate:function(a,b,c){var a=new L,d=0.5,e=Ic*d,g=0.2,i=0.5;M(a,0.1*b,0,o);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=Ic*0.1;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*
b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new J(0.4,0.25);b.o=new J(0.65,0.75);return b},XorGate:function(a,b,c){var a=new L,d=Ic*0.5;M(a,0.1*b,0,o);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.2*b,0,h);N(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);O(a);b=a.k;b.n=new J(0.4,0.25);b.o=new J(0.8,0.75);return b},Capacitor:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0,1*c);a.moveTo(1*b,
0);a.lineTo(1*b,1*c);return a.k},Resistor:function(a,b,c){a=new L;M(a,0,0.5*c,o);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.k},Inductor:function(a,b,c){var a=new L,d=Ic*0.1,e=0.1,g=0.5;M(a,(e-d*0.5)*b,(g+0.1)*c,o);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);
g=e=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+d*0.5)*b,(g+0.1)*c);return a.k},ACvoltageSource:function(a,b,c){var a=new L,d=Ic*0.5;M(a,0*b,0.5*c,o);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+
d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);N(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.k;b.Mb=Pg;return b},DCvoltageSource:function(a,b,c){a=new L;M(a,0,0.75*c,o);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},Diode:function(a,b,c){a=new L;M(a,1*b,0,o);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.k;b.n=new J(0,0.25);b.o=new J(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=b*0.38,
c=c*0.6,a=new L,g=Ic*0.8,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+g*0.5)*b+d,(k-g)*c+e,(j-i+g*0.5)*b+d,k*c+e);N(a,(j-i+g*0.5)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=Ic*0.4;i=0.4;j=0.2;k=0.5;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+
d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+g*0.5)*b+d,(k-g)*c+e,(j-i+g*0.5)*b+d,k*c+e);N(a,(j-i+g*0.5)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=Ic*0.2;i=0.2;k=j=0.5;M(a,(j-i)*b+d,k*c+e,h);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=Ic*0.4;i=0.4;j=0.8;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*b+
d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-g*0.5)*b+d,(k+g)*c+e,(j+i-g*0.5)*b+d,k*c+e);N(a,(j+i-g*0.5)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);g=Ic*0.8;i=0.8;j=1;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-g*0.5)*b+d,(k+g)*c+e,(j+i-g*0.5)*b+d,k*c+e);N(a,(j+i-g*0.5)*
b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);return a.k},Email:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);O(a);M(a,0,0,o);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Yk(a);return a.k},Ethernet:function(a,b,c){a=new L;M(a,0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);O(a);M(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*
b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);O(a);M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Yk(a);return a.k},Power:function(a,b,c){var a=new L,d=Ic*0.4,e=0.4,g=new D(0,0),i=new D(0,0),j=new D(0,0),k=new D(0,0);new D(0,0);Zk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,
0.5+e,0.5,0.5,g,g,i,j,k);new D(i.x,i.y);M(a,i.x*b,i.y*c,h);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);Zk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=Ic*0.3;e=0.3;Zk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);N(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,(0.5+d)*c,(0.5-
d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);Zk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);N(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);O(a);M(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);O(a);b=a.k;b.n=new J(0.25,0.55);b.o=new J(0.75,0.8);return b},Fallout:function(a,b,c){var a=new L,d=Ic*0.5;M(a,0*b,0.5*c,h);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+
d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);O(a);b=a.k;b.Mb=Pg;return b},
IrritationHazard:function(a,b,c){a=new L;M(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);O(a);b=a.k;b.n=new J(0.3,0.3);b.o=new J(0.7,0.7);return b},ElectricalHazard:function(a,b,c){a=new L;M(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*
b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);O(a);return a.k},FireHazard:function(a,b,c){a=new L;M(a,0.1*b,1*c,h);N(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);N(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);N(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);N(a,0.8*b,0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);N(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);N(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);O(a);b=a.k;b.n=
new J(0.05,0.645);b.o=new J(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,o);N(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);N(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.k},BpmnActivityParallel:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0,
1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},BpmnActivitySequential:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.k},BpmnActivityAdHoc:function(a,b,c){a=new L;M(a,0,0,o);M(a,1*b,1*c,o);M(a,0,0.5*c,o);N(a,0.2*b,0.35*c,0.3*b,0.35*c,0.5*b,0.5*c);N(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.k},BpmnActivityCompensation:function(a,b,c){a=new L;M(a,0,0.5*c,h);a.lineTo(0.5*
b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);O(a);return a.k},BpmnTaskMessage:function(a,b,c){a=new L;M(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);O(a);M(a,0,0.2*c,o);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Yk(a);return a.k},BpmnTaskScript:function(a,b,c){a=new L;M(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);N(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);N(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);O(a);M(a,
0.45*b,0.73*c,o);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Yk(a);return a.k},BpmnTaskUser:function(a,b,c){a=new L;M(a,0,0,o);M(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);N(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);N(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,
e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;N(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);N(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);N(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);N(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);M(a,0.2*b,1*c,o);a.lineTo(0.2*b,0.8*c);M(a,0.8*b,1*c,o);a.lineTo(0.8*b,0.8*c);return a.k},
BpmnEventConditional:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.2*b,0.2*c,o);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Yk(a);return a.k},BpmnEventError:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);O(a);return a.k},BpmnEventEscalation:function(a,
b,c){a=new L;M(a,0,0,o);M(a,1*b,1*c,o);M(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},BpmnEventTimer:function(a,b,c){var a=new L,d=Ic*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,0.5*b,0,o);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*
c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Yk(a);b=a.k;b.Mb=Pg;return b}},dl;for(dl in Ik)Ik[dl.toLowerCase()]=dl;
var el={None:"",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",OpenTriangle:"m 0,0 l 8,4 -8,4",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",Line:"m 0,0 l 0,8",
DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 12,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -4 0 4 z",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 -8,-4 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 -8,0 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",Fork:"m 0,4 l 8,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleFork:"F1 m 6,3 b 0 360 -3 0 3 m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
LineFork:"m 0,0 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleLine:"F1 m 8 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",CircleLineFork:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m 4 -4 l 0 8",OpenTriangleTop:"m 0,0 l 8,4 -8,0 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4 -8,0",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",
OpenTriangleLine:"m 0,0 8,4 -8,4 m 8.5,0 l 0,-8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",ForwardSlash:"m 0,8 l 5,-8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",BackSlash:"m 0,0 l 5,8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3"},Gk,fl={},jl;for(jl in Ik){var kl=Ik[jl];"string"===typeof kl&&(kl=Ik[kl]);"string"===typeof kl&&(kl=Ik[kl]);kl&&(fl[jl]=kl(m,100,100));fl[jl].de()}Gk=fl;var ll={};function Hk(a){if(el){for(var b in el){var c=Od(el[b],o);ll[b]=c;ll[b.toLowerCase()]=b}el=f}return ll[a]}X.FigureGenerators=Ik;X.ArrowheadGeometries=ll;
function T(a){arguments.length===0?v.call(this):v.call(this,a);this.xm=this.vj="";this.Bp=m;this.gq=this.Xp=this.ip=this.Oq=this.Po=this.Co=h;this.rq=this.mq=this.lq=o;this.Im=h;this.Eq="";this.Bq=h;this.bk=this.sq=this.nq=this.Cq=m;this.Ys=o;this.vg=this.Dq=m;this.pq="";this.gl=m;this.oq=(new K(NaN,NaN)).freeze();this.tq="";this.hl=m;this.nd="";this.pp=h;this.w=this.Bo=this.xj=m;this.wi=(new D(NaN,NaN)).freeze();this.ct=new D(NaN,NaN);this.Kp="";this.xi=m;this.Lp=dc;this.Sp=Qc;this.Np=Rc;this.Qo=
m;this.qp=h;this.Cp=ml;this.df=o;this.Lm=(new D(6,6)).freeze();this.Km="gray";this.Jm=4;this.lE=-1;this.Ij=h;this.wt=this.bf=o}t.J("Part",T);t.ua(T,v);
T.prototype.jb=function(a){v.prototype.jb.call(this,a);a.vj=this.vj;a.xm=this.xm;a.Bp=this.Bp;a.Co=this.Co;a.Po=this.Po;a.Oq=this.Oq;a.ip=this.ip;a.Xp=this.Xp;a.gq=this.gq;a.lq=this.lq;a.mq=this.mq;a.rq=this.rq;a.Im=this.Im;a.Eq=this.Eq;a.Bq=this.Bq;a.Cq=this.Cq;a.nq=this.nq;a.sq=this.sq;a.Ys=o;a.Dq=this.Dq;a.vg=m;a.pq=this.pq;a.oq.Ua(this.oq);a.tq=this.tq;a.nd=this.nd;a.pp=this.pp;a.Bo=this.Bo;a.wi.Ua(this.wi);a.Kp=this.Kp;a.Lp=this.Lp.D();a.Sp=this.Sp.D();a.Np=this.Np.D();a.Qo=this.Qo;a.qp=this.qp;
a.Cp=this.Cp;a.df=this.df;a.Lm.Ua(this.Lm);a.Km=this.Km;a.Jm=this.Jm};T.prototype.dh=function(a){v.prototype.dh.call(this,a);ej(a);a.bk=m;a.gl=m;a.hl=m;a.xi=m};T.prototype.toString=function(){var a=t.Vi(Object.getPrototypeOf(this))+"#"+t.jc(this);this.data&&(a=a+("("+Ie(this.data)+")"));return a};
T.prototype.dumpReferences=T.prototype.OB=function(){t.trace("References for "+this);this.xa&&t.trace("  "+this.xa.toString()+' LayerName: "'+this.Cd+'"');this.Zn!==this&&t.trace("  SelectionObject: "+this.Zn.toString()+' SelectionObjectName: "'+this.$n+'"');this.Ab!==this&&t.trace("  LocationObject: "+this.Ab.toString()+' LocationObjectName: "'+this.Jr+'"');if(this.vg){for(var a="",b=this.vg.f;b.next();)a=a+(b.key+" ");t.trace("  Adornments: "+a)}this.Wa&&t.trace("  ContainingGroup: "+this.Wa.toString());
if(this instanceof U){if(this.oc)for(b=this.oc.f;b.next(););if(this.le.count>0){a="";for(b=this.le;b.next();)a=a+(b.value.toString()+", ");t.trace("  Links: "+a)}this.ke&&t.trace("  LabeledLink: "+this.ke.toString());if(this instanceof V){t.trace("  Placeholder: "+this.placeholder);a="";for(b=this.lc;b.next();)a=a+(b.value.toString()+", ");t.trace("  Members: "+a);a="";for(b=this.bl.f;b.next();)a=a+(b.value.toString()+", ");t.trace("  NestedGroups: "+a);t.trace("  Layout: "+this.wb)}}else if(this instanceof
W){t.trace("  Path: "+this.path);t.trace("  From: "+this.ia+" "+this.Fc+' "'+this.hh+'"');t.trace("  To: "+this.ma+" "+this.rd+' "'+this.ji+'"');a="";for(b=this.hi;b.next();)a=a+(b.value.toString()+", ");t.trace("  LabelNodes: "+a)}};T.LayoutNone=0;var qi;T.LayoutAdded=qi=1;var vi;T.LayoutRemoved=vi=2;var nj;T.LayoutShown=nj=4;var oj;T.LayoutHidden=oj=8;T.LayoutNodeSized=16;var Ai;T.LayoutGroupLayout=Ai=32;var ml;T.LayoutStandard=ml=qi|vi|nj|oj|16|Ai;
T.prototype.ug=function(){v.prototype.ug.call(this);var a=this.b;if(a!==m&&this.Fr){Li(a,"shadowOffset",this.tD);Li(a,"shadowColor",this.shadowColor);Li(a,"shadowBlur",this.shadowBlur)}};T.prototype.Jl=function(a,b,c,d,e,g,i){var j=this.b;if(j!==m){a===ve&&b==="elements"?e instanceof v&&ri(e,e,function(a){si(j,a)}):a===we&&b==="elements"&&e instanceof v&&ri(e,e,function(a){ui(j,a)});j.pe(a,b,c,d,e,g,i)}};
T.prototype.updateTargetBindings=T.prototype.mc=function(a){v.prototype.mc.call(this,a);if(this.data!==m)for(a=this.elements;a.next();){var b=a.value;b instanceof v&&ri(b,b,function(a){a.data!==m&&a.mc()})}};t.m(T,{FE:"adornments"},function(){return this.vg===m?m:this.vg.f});T.prototype.findAdornment=T.prototype.sn=function(a){s&&t.e(a,"string",T,"findAdornment:category");var b=this.vg;return b===m?m:b.da(a)};
T.prototype.addAdornment=T.prototype.Zm=function(a,b){if(b!==m){if(s){t.e(a,"string",T,"addAdornment:category");t.c(b,of,T,"addAdornment:ad")}var c=m,d=this.vg;d!==m&&(c=d.da(a));if(c!==b){if(c!==m){var e=c.xa;e!==m&&e.Ad(-1,c)}if(d===m)this.vg=d=new ra("string",of);d.add(a,b);c=this.b;if(c!==m){d=c.Ti("Adornment");d===m&&(d=c.Ti(""));if(d!==m){d.ok(99999999,b);b.data=this.data}}}}};
T.prototype.removeAdornment=T.prototype.Ll=function(a){s&&t.e(a,"string",T,"removeAdornment:category");var b=this.vg;if(b!==m){var c=b.da(a);if(c!==m){var d=c.xa;d!==m&&d.Ad(-1,c)}b.remove(a);if(b.count===0)this.vg=m}};T.prototype.clearAdornments=T.prototype.ah=function(){var a=this.vg;if(a!==m){for(var b=[],a=a.f;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.Ll(b[c])}};
T.prototype.updateAdornments=T.prototype.ki=function(){a:{var a=this.b;if(a!==m){var b=m;if(this.Ha&&this.oD){var c=this.Zn;if(c!==m&&this.kb()&&c.qk()&&c.ta.aa()){b=this.sn("Selection");if(b===m){b=this.pD;if(b===m)this instanceof W?b=a.zC:this instanceof T&&(b=this instanceof V?a.bC:a.NC);if(!(b instanceof of))break a;qf(b);b=b.copy();if(!(b instanceof of))break a;b.od="Selection";b.Kd=c}if(b!==m){a=b.placeholder;if(a!==m){var d=c.zl(),e=0;if(c instanceof X)e=c.Ta;a.pa=new K((c.ja.width+e)*d,(c.ja.height+
e)*d)}else if(this instanceof W){a=b.sa;a=uk(b,a,a.length);d=this.path;if(a instanceof X&&d===c){d=c.za;oi(this);d=c.za;a.yr=d;if(a.Ta===0)a.Ta=c.Ta}}b.Qa=c.yn();if(b.type!==sg)b.location=c.zb(dc)}}this.Zm("Selection",b)}else this.Ll("Selection")}}c=this.b;if(c!==m){c=c.Rb.ne.j;b=c.length;for(a=0;a<b;a++){d=c[a];d.isEnabled&&d.updateAdornments(this)}}};t.m(T,{xa:"layer"},r("w"));t.m(T,{b:"diagram"},function(){var a=this.w;return a!==m?a.b:m});t.a(T,"layerName",T.prototype.Cd);
t.defineProperty(T,{Cd:"layerName"},r("xm"),function(a){var b=this.xm;if(b!==a){s&&t.e(a,"string",T,"layerName");this.xm=a;this.d("layerName",b,a);b=this.xa;if(b!==m&&b.name!==a){var c=b.b;if(c!==m){a=c.Ti(a);if(a!==m&&a!==b){var d=b.Ad(-1,this,h);d>=0&&c.pe(we,"parts",b,this,m,d,h);d=a.ok(99999999,this,h);d>=0&&c.pe(ve,"parts",a,m,this,h,d);d=this.Hr;if(d!==m){var e=c.Aa;c.Aa=h;d(this,b,a);c.Aa=e}}}}}});t.a(T,"layerChanged",T.prototype.Hr);
t.defineProperty(T,{Hr:"layerChanged"},r("Bp"),function(a){var b=this.Bp;if(b!==a){a!==m&&t.e(a,"function",T,"layerChanged");this.Bp=a;this.d("layerChanged",b,a)}});t.a(T,"location",T.prototype.location);t.defineProperty(T,{location:"location"},r("wi"),function(a){var b=this.wi;if(!b.z(a)){s&&t.c(a,D,T,"location");this.wi=a=a.D();if(this.Lc===o){var c=this.pb,d=this.ct,e=c.copy();c.$d(a.x-d.x,a.y-d.y);c.z(e)||this.d("position",e,c);Bj(this)}this.d("location",b,a)}});
function Bj(a){if(a.Ij===o){var b=a.b;if(b!==m){b.Ig.add(a);a instanceof U&&!b.ha.eb&&a.vf();sf(b)}a.Ij=h}}function nl(a){if(a.Ij!==o){var b=a.pb,c=a.Cb,d=c.copy();c.Ba();c.x=b.x;c.y=b.y;c.freeze();cj(a,d,c);a.Ij=o}}t.m(T,{Ab:"locationObject"},function(){if(this.xi===m){var a=this.Jr;if(a!==f&&a!==m&&a!==""){a=this.Pe(a);this.xi=a!==m?a:this}else this.xi=this}return this.xi.visible?this.xi:this});t.a(T,"minLocation",T.prototype.IC);
t.defineProperty(T,{IC:"minLocation"},r("Sp"),function(a){var b=this.Sp;if(!b.z(a)){s&&t.c(a,D,T,"minLocation");this.Sp=a=a.D();this.d("minLocation",b,a)}});t.a(T,"maxLocation",T.prototype.CC);t.defineProperty(T,{CC:"maxLocation"},r("Np"),function(a){var b=this.Np;if(!b.z(a)){s&&t.c(a,D,T,"maxLocation");this.Np=a=a.D();this.d("maxLocation",b,a)}});t.a(T,"locationObjectName",T.prototype.Jr);
t.defineProperty(T,{Jr:"locationObjectName"},r("Kp"),function(a){var b=this.Kp;if(b!==a){s&&t.e(a,"string",T,"locationObjectName");this.Kp=a;this.xi=m;kj(this);this.d("locationObjectName",b,a)}});t.a(T,"locationSpot",T.prototype.yf);t.defineProperty(T,{yf:"locationSpot"},r("Lp"),function(a){var b=this.Lp;if(!b.z(a)){if(s){t.c(a,J,T,"locationSpot");Tb(a)||t.g("Part.locationSpot must be a specific Spot value, not: "+a)}this.Lp=a=a.D();kj(this);this.d("locationSpot",b,a)}});
T.prototype.move=T.prototype.move=function(a){this.position=a;this.Lc===o&&nl(this)};
T.prototype.isVisible=T.prototype.kb=function(){if(!this.Yg)return o;var a=this.xa;if(a!==m&&!a.visible)return o;var b=this.Wa;if(b!==m&&!b.je)return o;if(this instanceof U){if(a!==m)if(a.b.xf)for(a=this.tf();a.next();){b=a.value;b=b.ia;if(b!==m&&!b.Sd)return o}else for(a=this.Du();a.next();){b=a.value;b=b.ma;if(b!==m&&!b.Sd)return o}a=this.ke;if(a!==m&&!a.kb())return o}else if(this instanceof W){b=this.ia;if(b!==m&&ol(b)===m)return o;b=this.ma;if(b!==m&&ol(b)===m)return o}return h};
function pl(a,b,c){Wb(c)&&(c=mc);var d=b.ja;if(b===m||b===a)return new D(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new D(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.Bb(c);for(b=b.Y;b!==m&&b!==a;){b.transform.Bb(c);b=b.Y}a.Bm.Bb(c);c.offset(-a.Dc.x,-a.Dc.y);return c}T.prototype.ensureBounds=T.prototype.ci=function(){ph(this,Infinity,Infinity);this.sc()};
T.prototype.sc=function(){bj(this);if(this.Lc===o)nl(this);else{if(this instanceof of&&this.K!==sg&&this.bb!==m)this.xi=this.bb;var a=this.IA;a.set(this.Cb);ij(this);this.Cb.Ba();var b=this.bf;this.Li(0,0,this.Dc.width,this.Dc.height);var c=NaN,d=NaN,e=this.yf,g=this.Ab;Wb(e)&&t.g("Spot must be real: "+e.toString());var i=g.ja,j=this.ct;j.Nl(0,0,i.width,i.height,e);if(g!==this){g.transform.Bb(j);if(g.Ta){e=g.Jd/2;j.offset(-e,-e)}for(g=g.Y;g!==m&&g!==this;){g.transform.Bb(j);g=g.Y}}this.Bm.Bb(j);j.offset(-this.Dc.x,
-this.Dc.y);j=this.ct;g=this.position;e=this.location;if(e.aa()){c=e.x-j.x;d=e.y-j.y;g.copy();g.$d(c,d)}else if(g.aa()){c=g.x;d=g.y;e.copy();e.$d(c+j.x,d+j.y)}j=this.Cb;j.x=c;j.y=d;j.freeze();bj(this);cj(this,a,j);a.z(j)?this.bf=b:(this instanceof U||this.constructor===T)&&(!gb(a.width,j.width)||!gb(a.height,j.height))&&this.v(16);this.Ij=o}};
function ti(a,b){a.wt=o;var c=a.b;if(c!==m){a.updateAdornments();var d=a.FE;if(d!==m){bj(a);for(ij(a);d.next();){ph(d.value,Infinity,Infinity);d.value.sc()}}a instanceof U&&Ii(c,a);!a.xa.ed&&!b&&ji(c);var d=a.Cb,e=c.ob;if(e.aa())if(a.bf){if(!d.ie(e)){a.bf=o;uh(c)}}else{if(d.ie(e))a.bf=h}else c.um=h;a.Cb.aa()&&uh(c,a.Cb)}}T.prototype.pk=ca(h);t.a(T,"isInDocumentBounds",T.prototype.ny);
t.defineProperty(T,{ny:"isInDocumentBounds"},r("pp"),function(a){var b=this.pp;if(b!==a){s&&t.e(a,"boolean",T,"isInDocumentBounds");this.pp=a;this.d("isInDocumentBounds",b,a)}});t.a(T,"category",T.prototype.od);
t.defineProperty(T,{od:"category"},r("vj"),function(a){var b=this.vj;if(b!==a){s&&t.e(a,"string",T,"category");this.vj=a;this.d("category",b,a);var b=this.b,c=this.data;if(b!==m&&c!==m)if(this instanceof U||this.constructor===T){b=b.findTemplateForNodeData(c,a);if(b instanceof T){qf(b);b=b.copy();b instanceof T&&ql(this,b,a)}}else if(this instanceof W){b=b.findTemplateForLinkData(c,a);if(b instanceof W){qf(b);b=b.copy();b instanceof W&&ql(this,b,a)}}}});
function ql(a,b,c){a.ah();var d=a.data,e=a.Cd,g=a.Ha;b.dh(a);b.jb(a);a.vj=c;a.N();gj(a);a.gm=d;d!==m&&a.mc();b=a.Cd;if(b!==e){a.xm=e;a.Cd=b}a.Ha=g}T.prototype.canCopy=T.prototype.yH=function(){if(!this.qB)return o;var a=this.xa;if(a===m)return h;if(!a.Sh)return o;a=a.b;return a===m?h:!a.Sh?o:h};T.prototype.canDelete=T.prototype.CH=function(){if(!this.AB)return o;var a=this.xa;if(a===m)return h;if(!a.ek)return o;a=a.b;return a===m?h:!a.ek?o:h};
T.prototype.canEdit=T.prototype.EH=function(){if(!this.AD)return o;var a=this.xa;if(a===m)return h;if(!a.kn)return o;a=a.b;return a===m?h:!a.kn?o:h};T.prototype.canGroup=T.prototype.IH=function(){if(!this.cC)return o;var a=this.xa;if(a===m)return h;if(!a.dn)return o;a=a.b;return a===m?h:!a.dn?o:h};T.prototype.canMove=T.prototype.LH=function(){if(!this.LC)return o;var a=this.xa;if(a===m)return h;if(!a.fk)return o;a=a.b;return a===m?h:!a.fk?o:h};
T.prototype.canPrint=T.prototype.bF=function(){if(!this.TC)return o;var a=this.xa;if(a===m)return h;if(!a.fn)return o;a=a.b;return a===m?h:!a.fn?o:h};T.prototype.canReshape=T.prototype.QH=function(){if(!this.bD)return o;var a=this.xa;if(a===m)return h;if(!a.gn)return o;a=a.b;return a===m?h:!a.gn?o:h};T.prototype.canResize=T.prototype.RH=function(){if(!this.cD)return o;var a=this.xa;if(a===m)return h;if(!a.hn)return o;a=a.b;return a===m?h:!a.hn?o:h};
T.prototype.canRotate=T.prototype.SH=function(){if(!this.hD)return o;var a=this.xa;if(a===m)return h;if(!a.jn)return o;a=a.b;return a===m?h:!a.jn?o:h};T.prototype.canSelect=T.prototype.Ex=function(){if(!this.tk)return o;var a=this.xa;if(a===m)return h;if(!a.Ld)return o;a=a.b;return a===m?h:!a.Ld?o:h};t.a(T,"copyable",T.prototype.qB);t.defineProperty(T,{qB:"copyable"},r("Co"),function(a){var b=this.Co;if(b!==a){s&&t.e(a,"boolean",T,"copyable");this.Co=a;this.d("copyable",b,a)}});
t.a(T,"deletable",T.prototype.AB);t.defineProperty(T,{AB:"deletable"},r("Po"),function(a){var b=this.Po;if(b!==a){s&&t.e(a,"boolean",T,"deletable");this.Po=a;this.d("deletable",b,a)}});t.a(T,"textEditable",T.prototype.AD);t.defineProperty(T,{AD:"textEditable"},r("Oq"),function(a){var b=this.Oq;if(b!==a){s&&t.e(a,"boolean",T,"textEditable");this.Oq=a;this.d("textEditable",b,a);this.updateAdornments()}});t.a(T,"groupable",T.prototype.cC);
t.defineProperty(T,{cC:"groupable"},r("ip"),function(a){var b=this.ip;if(b!==a){s&&t.e(a,"boolean",T,"groupable");this.ip=a;this.d("groupable",b,a)}});t.a(T,"movable",T.prototype.LC);t.defineProperty(T,{LC:"movable"},r("Xp"),function(a){var b=this.Xp;if(b!==a){s&&t.e(a,"boolean",T,"movable");this.Xp=a;this.d("movable",b,a)}});t.a(T,"printable",T.prototype.TC);
t.defineProperty(T,{TC:"printable"},r("gq"),function(a){var b=this.gq;if(b!==a){s&&t.e(a,"boolean",T,"printable");this.gq=a;this.d("printable",b,a)}});t.a(T,"reshapable",T.prototype.bD);t.defineProperty(T,{bD:"reshapable"},r("lq"),function(a){var b=this.lq;if(b!==a){s&&t.e(a,"boolean",T,"reshapable");this.lq=a;this.d("reshapable",b,a);this.updateAdornments()}});t.a(T,"resizable",T.prototype.cD);
t.defineProperty(T,{cD:"resizable"},r("mq"),function(a){var b=this.mq;if(b!==a){s&&t.e(a,"boolean",T,"resizable");this.mq=a;this.d("resizable",b,a);this.updateAdornments()}});t.a(T,"rotatable",T.prototype.hD);t.defineProperty(T,{hD:"rotatable"},r("rq"),function(a){var b=this.rq;if(b!==a){s&&t.e(a,"boolean",T,"rotatable");this.rq=a;this.d("rotatable",b,a);this.updateAdornments()}});t.a(T,"selectable",T.prototype.tk);
t.defineProperty(T,{tk:"selectable"},r("Im"),function(a){var b=this.Im;if(b!==a){s&&t.e(a,"boolean",T,"selectable");this.Im=a;this.d("selectable",b,a);this.updateAdornments()}});t.a(T,"selectionObjectName",T.prototype.$n);t.defineProperty(T,{$n:"selectionObjectName"},r("Eq"),function(a){var b=this.Eq;if(b!==a){s&&t.e(a,"string",T,"selectionObjectName");this.Eq=a;this.bk=m;this.d("selectionObjectName",b,a)}});t.a(T,"selectionAdorned",T.prototype.oD);
t.defineProperty(T,{oD:"selectionAdorned"},r("Bq"),function(a){var b=this.Bq;if(b!==a){s&&t.e(a,"boolean",T,"selectionAdorned");this.Bq=a;this.d("selectionAdorned",b,a);this.updateAdornments()}});t.a(T,"selectionAdornmentTemplate",T.prototype.pD);t.defineProperty(T,{pD:"selectionAdornmentTemplate"},r("Cq"),function(a){var b=this.Cq;if(b!==a){s&&t.c(a,of,T,"selectionAdornmentTemplate");if(this instanceof W)a.type=sg;this.Cq=a;this.d("selectionAdornmentTemplate",b,a)}});
t.m(T,{Zn:"selectionObject"},function(){if(this.bk===m){var a=this.$n;if(a!==m&&a!==""){a=this.Pe(a);this.bk=a!==m?a:this}else if(this instanceof W){a=this.path;this.bk=a!==m?a:this}else this.bk=this}return this.bk});t.a(T,"isSelected",T.prototype.Ha);
t.defineProperty(T,{Ha:"isSelected"},r("Ys"),function(a){var b=this.Ys;if(b!==a){s&&t.e(a,"boolean",T,"isSelected");var c=this.b;if(!a||this.Ex()&&!(c!==m&&c.selection.count>=c.DC)){this.Ys=a;var d=o;if(c!==m){d=c.gb;c.gb=h;a?c.selection.add(this):c.selection.remove(this)}this.d("isSelected",b,a);this.updateAdornments();a=this.qD;a!==m&&a(this);if(c!==m){sf(c);c.gb=d}}}});t.a(T,"selectionChanged",T.prototype.qD);
t.defineProperty(T,{qD:"selectionChanged"},r("Dq"),function(a){var b=this.Dq;if(b!==a){a!==m&&t.e(a,"function",T,"selectionChanged");this.Dq=a;this.d("selectionChanged",b,a)}});t.a(T,"resizeAdornmentTemplate",T.prototype.dD);t.defineProperty(T,{dD:"resizeAdornmentTemplate"},r("nq"),function(a){var b=this.nq;if(b!==a){s&&t.c(a,of,T,"resizeAdornmentTemplate");this.nq=a;this.d("resizeAdornmentTemplate",b,a)}});t.a(T,"resizeObjectName",T.prototype.fD);
t.defineProperty(T,{fD:"resizeObjectName"},r("pq"),function(a){var b=this.pq;if(b!==a){s&&t.e(a,"string",T,"resizeObjectName");this.pq=a;this.gl=m;this.d("resizeObjectName",b,a)}});t.m(T,{HG:"resizeObject"},function(){if(this.gl===m){var a=this.fD;if(a!==m&&a!==""){a=this.Pe(a);this.gl=a!==m?a:this}else this.gl=this}return this.gl});t.a(T,"resizeCellSize",T.prototype.eD);
t.defineProperty(T,{eD:"resizeCellSize"},r("oq"),function(a){var b=this.oq;if(!b.z(a)){s&&t.c(a,K,T,"resizeCellSize");this.oq=a=a.D();this.d("resizeCellSize",b,a)}});t.a(T,"rotateAdornmentTemplate",T.prototype.iD);t.defineProperty(T,{iD:"rotateAdornmentTemplate"},r("sq"),function(a){var b=this.sq;if(b!==a){s&&t.c(a,of,T,"rotateAdornmentTemplate");this.sq=a;this.d("rotateAdornmentTemplate",b,a)}});t.a(T,"rotateObjectName",T.prototype.jD);
t.defineProperty(T,{jD:"rotateObjectName"},r("tq"),function(a){var b=this.tq;if(b!==a){s&&t.e(a,"string",T,"rotateObjectName");this.tq=a;this.hl=m;this.d("rotateObjectName",b,a)}});t.m(T,{LG:"rotateObject"},function(){if(this.hl===m){var a=this.jD;if(a!==m&&a!==""){a=this.Pe(a);this.hl=a!==m?a:this}else this.hl=this}return this.hl});t.a(T,"text",T.prototype.text);t.defineProperty(T,{text:"text"},r("nd"),function(a){var b=this.nd;if(b!==a){s&&t.e(a,"string",T,"text");this.nd=a;this.d("text",b,a)}});
t.a(T,"containingGroup",T.prototype.Wa);
t.defineProperty(T,{Wa:"containingGroup"},r("xj"),function(a){if(this instanceof U||this.constructor===T){var b=this.xj;if(b!==a){s&&a!==m&&t.c(a,V,T,"containingGroup");if(a!==m&&(this===a||a.El(this))){this===a&&t.g("Cannot make a Group a member of itself: "+this.toString());t.g("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString())}this.v(vi);var c=this.b;b!==m?rl(b,this):this instanceof V&&c!==m&&c.il.remove(this);this.xj=a;a!==m?sl(a,this):this instanceof
V&&c!==m&&c.il.add(this);this.v(qi);if(c!==m){var d=this.data,e=c.L;d!==m&&e instanceof P&&e.Ty(d,e.$b(a!==m?a.data:m))}d=this.Px;if(d!==m){e=h;if(c!==m){e=c.Aa;c.Aa=h}d(this,b,a);if(c!==m)c.Aa=e}if(this instanceof V){c=new ta(T);nf(c,this,h,o);for(c=c.f;c.next();){d=c.value;if(d instanceof U)for(d=d.le;d.next();){e=d.value;xi(e)}}}if(this instanceof U)for(d=this.le;d.next();){e=d.value;xi(e)}this.d("containingGroup",b,a);a!==m&&a.fv()}}else t.g("cannot set the Part.containingGroup of a Link or Adornment")});
function tl(a,b){var c=a.xj;if(c!==b){c!==m&&rl(c,a);a.xj=b;b!==m&&sl(b,a);var d=a.Px;if(d!==m){var e=h,g=a.b;if(g!==m){e=g.Aa;g.Aa=h}d(a,c,b);if(g!==m)g.Aa=e}}}function ej(a){a=a.Wa;if(a!==m){a.N();a.bb!==m&&a.bb.N();a.vf()}}T.prototype.Cr=function(){var a=this.xj;a!==m&&sl(a,this)};T.prototype.Dr=function(){var a=this.xj;a!==m&&rl(a,this)};T.prototype.vl=function(){var a=this.data;if(a!==m){var b=this.b;if(b!==m){b=b.L;b!==m&&b.$C(a)}}};t.a(T,"containingGroupChanged",T.prototype.Px);
t.defineProperty(T,{Px:"containingGroupChanged"},r("Bo"),function(a){var b=this.Bo;if(b!==a){a!==m&&t.e(a,"function",T,"containingGroupChanged");this.Bo=a;this.d("containingGroupChanged",b,a)}});t.m(T,{zK:"topLevelPart"},function(){return ul(this,this)});function ul(a,b){var c=b.Wa;if(c!==m)return ul(a,c);if(b instanceof U){c=b.ke;if(c!==m)return ul(a,c)}return b}t.m(T,{Gr:"isTopLevel"},function(){return this.Wa!==m||this instanceof U&&this.Yi?o:h});
T.prototype.isMemberOf=T.prototype.El=function(a){return!(a instanceof V)?o:vl(this,this,a)};function vl(a,b,c){if(b===c||c===m)return o;var d=b.Wa;if(d!==m&&(d===c||vl(a,d,c)))return h;if(b instanceof U){b=b.ke;if(b!==m)return vl(a,b,c)}return o}T.prototype.findCommonContainingGroup=T.prototype.CF=function(a){return wl(this,this,a)};function wl(a,b,c){if(b===m||c===m)return m;var d=b.Wa;if(d===m)return m;if(b===c)return d;var e=c.Wa;return e===m?m:d===e?e:vl(a,c,d)?d:vl(a,b,e)?e:wl(a,d,e)}
t.a(T,"isLayoutPositioned",T.prototype.py);t.defineProperty(T,{py:"isLayoutPositioned"},r("qp"),function(a){var b=this.qp;if(b!==a){s&&t.e(a,"boolean",T,"isLayoutPositioned");this.qp=a;this.d("isLayoutPositioned",b,a);this.v(a?nj:oj)}});t.a(T,"layoutConditions",T.prototype.vC);t.defineProperty(T,{vC:"layoutConditions"},r("Cp"),function(a){var b=this.Cp;if(b!==a){s&&t.e(a,"number",T,"layoutConditions");this.Cp=a;this.d("layoutConditions",b,a)}});
T.prototype.canLayout=T.prototype.hr=function(){if(!this.py||!this.kb())return o;var a=this.xa;return a!==m&&a.ed||this instanceof U&&this.Yi?o:h};T.prototype.invalidateLayout=T.prototype.v=function(a){a===f&&(a=16777215);var b;if(!this.py||(a&this.vC)===0)b=o;else{b=this.xa;if(b!==m&&b.ed||this instanceof U&&this.Yi)b=o;else{b=this.b;b=b!==m&&b.ha.eb?o:h}}if(b){b=this.xj;if(b!==m){var c=b.wb;c!==m?c.v():b.v(a)}else{a=this.b;if(a!==m){c=a.wb;c!==m&&c.v()}}}};t.a(T,"dragComputation",T.prototype.Vx);
t.defineProperty(T,{Vx:"dragComputation"},r("Qo"),function(a){var b=this.Qo;if(b!==a){a!==m&&t.e(a,"function",T,"dragComputation");this.Qo=a;this.d("dragComputation",b,a)}});t.a(T,"isShadowed",T.prototype.Fr);t.defineProperty(T,{Fr:"isShadowed"},r("df"),function(a){var b=this.df;if(b!==a){s&&t.e(a,"boolean",T,"isShadowed");this.df=a;gj(this);this.d("isShadowed",b,a)}});t.a(T,"shadowOffset",T.prototype.tD);
t.defineProperty(T,{tD:"shadowOffset"},r("Lm"),function(a){var b=this.Lm;if(!b.z(a)){s&&t.c(a,D,T,"shadowOffset");this.Lm=a=a.D();gj(this);this.d("shadowOffset",b,a)}});t.a(T,"shadowColor",T.prototype.shadowColor);t.defineProperty(T,{shadowColor:"shadowColor"},r("Km"),function(a){var b=this.Km;if(b!==a){s&&t.e(a,"string",T,"shadowColor");this.Km=a;gj(this);this.d("shadowColor",b,a)}});t.a(T,"shadowBlur",T.prototype.shadowBlur);
t.defineProperty(T,{shadowBlur:"shadowBlur"},r("Jm"),function(a){var b=this.Jm;if(b!==a){s&&t.e(a,"number",T,"shadowBlur");this.Jm=a;gj(this);this.d("shadowBlur",b,a)}});function of(a){arguments.length===0?T.call(this,Tg):T.call(this,a);this.Cd="Adornment";this.ya=m;this.Im=o;this.wi=new D(NaN,NaN);this.uh=new z(E);this.ec=m;this.Ec=(new z(D)).freeze();this.Zt=new D;this.bb=m}t.J("Adornment",of);t.ua(of,T);
of.prototype.toString=function(){var a=this.cn;return"Adornment("+this.od+")"+(a!==m?a.toString():"")};of.prototype.Bj=function(){return this.ya&&this.ya.ba instanceof W?this.ya.ba.Bj():m};of.prototype.fp=ca(m);of.prototype.nw=function(){var a=this.cn;return a instanceof W?a.Ec:m};t.m(of,{placeholder:"placeholder"},r("bb"));t.a(of,"adornedObject",of.prototype.Kd);t.defineProperty(of,{Kd:"adornedObject"},r("ya"),ba("ya"));t.m(of,{cn:"adornedPart"},function(){var a=this.ya;return a!==m?a.ba:m});
of.prototype.pk=function(){var a=this.ya;if(a===m)return h;a=a.ba;return a===m||!a.Lc};t.m(of,{Wa:"containingGroup"},ca(m));
of.prototype.Jl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")if(e instanceof Ng)this.bb===m?this.bb=e:this.bb!==e&&t.g("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof v){var j=Dk(e,e,function(a){return a instanceof Ng});if(j instanceof Ng)this.bb===m?this.bb=j:this.bb!==j&&t.g("Cannot insert a second Placeholder into the visual tree of an Adornment.")}}else if(a===we&&b==="elements")if(d===this.bb)this.bb=m;else if(d instanceof v&&this.bb.gi(d))this.bb=
m;T.prototype.Jl.call(this,a,b,c,d,e,g,i)};of.prototype.updateAdornments=of.prototype.ki=aa();of.prototype.vl=aa();function U(a){arguments.length===0?T.call(this,Tg):T.call(this,a);this.ud=new z(W);this.wm=this.Hp=this.Fp=m;this.wp=h;this.$q=o;this.Vq=m;this.vo=this.xp=h;this.wo=(new Eb(2)).freeze();this.oc=this.xg=m}t.J("Node",U);t.ua(U,T);U.prototype.jb=function(a){T.prototype.jb.call(this,a);a.Fp=this.Fp;a.Hp=this.Hp;a.wp=this.wp;a.$q=this.$q;a.Vq=this.Vq;a.xp=this.xp;a.vo=this.vo;a.wo.Ua(this.wo)};
U.prototype.dh=function(a){T.prototype.dh.call(this,a);a.vf();a.xg=this.xg;a.oc=m};var xl;U.DirectionDefault=xl=t.l(U,"DirectionDefault",0);U.DirectionAbsolute=t.l(U,"DirectionAbsolute",1);var yl;U.DirectionRotatedNode=yl=t.l(U,"DirectionRotatedNode",2);var Ti;U.DirectionRotatedNodeOrthogonal=Ti=t.l(U,"DirectionRotatedNodeOrthogonal",3);function zl(a,b){if(b!==m){if(a.xg==m)a.xg=new ta(Al);a.xg.add(b)}}
U.prototype.Jl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")this.oc=m;else if(a===we&&b==="elements")this.b===m?this.oc=m:d instanceof Q&&Ck(this,d,function(a,b){Cj(a,b,h)});T.prototype.Jl.call(this,a,b,c,d,e,g,i)};U.prototype.invalidateConnectedLinks=U.prototype.vf=function(a){a===f&&(a=m);for(var b=this.le;b.next();){var c=b.value;if(!(a!==m&&a.contains(c))){var d=c.Fc;if(d!==m)d.md=m;var e=c.rd;if(e!==m&&e!==d)e.md=m;Sf(c)}}};
U.prototype.pk=function(){if(this.Yi===o)return h;var a=this.ke;return a===m?h:!a.Lc};t.a(U,"avoidable",U.prototype.Cx);t.defineProperty(U,{Cx:"avoidable"},r("vo"),function(a){var b=this.vo;if(b!==a){s&&t.e(a,"boolean",U,"avoidable");this.vo=a;var c=this.b;c!==m&&Ii(c,this);this.d("avoidable",b,a)}});t.a(U,"avoidableMargin",U.prototype.cB);
t.defineProperty(U,{cB:"avoidableMargin"},r("wo"),function(a){typeof a==="number"?a=new Eb(a):t.c(a,Eb,U,"avoidableMargin");var b=this.wo;if(!b.z(a)){this.wo=a=a.D();var c=this.b;c!==m&&Ii(c,this);this.d("avoidableMargin",b,a)}});U.prototype.canAvoid=U.prototype.vH=function(){return this.Cx&&!this.Yi};U.prototype.getAvoidableRectangle=U.prototype.TI=function(a){a===f&&(a=new E);a.set(this.ta);a.wx(this.cB);return a};function ol(a){for(;a!==m&&!a.kb();)a=a.Wa;return a}t.m(U,{le:"linksConnected"},function(){return this.ud.f});
U.prototype.findLinksConnected=U.prototype.$x=function(a){a===f&&(a=m);if(a===m)return this.ud.f;s&&t.e(a,"string",U,"findLinksConnected:pid");var b=new Na(this.ud),c=this;b.Wu=function(b){return b.ia===c&&b.hh===a||b.ma===c&&b.ji===a};return b};U.prototype.findLinksOutOf=U.prototype.Du=function(a){a===f&&(a=m);var b=new Na(this.ud),c=this;b.Wu=function(b){return b.ia!==c?o:a===m?h:b.hh===a};return b};
U.prototype.findLinksInto=U.prototype.tf=function(a){a===f&&(a=m);var b=new Na(this.ud),c=this;b.Wu=function(b){return b.ma!==c?o:a===m?h:b.ji===a};return b};
U.prototype.findNodesConnected=U.prototype.QB=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.ud.f;d.next();){var e=d.value;if(e.ia===this){if(a===m||e.hh===a){e=e.ma;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new ta(U);b.add(c);b.add(e)}else c=e}}else if(e.ma===this&&(a===m||e.ji===a)){e=e.ia;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new ta(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ma(c):t.Kf};
U.prototype.findNodesOutOf=U.prototype.un=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.ud.f;d.next();){var e=d.value;if(e.ia===this&&(a===m||e.hh===a)){e=e.ma;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new ta(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ma(c):t.Kf};
U.prototype.findNodesInto=U.prototype.tn=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.ud.f;d.next();){var e=d.value;if(e.ma===this&&(a===m||e.ji===a)){e=e.ia;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new ta(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ma(c):t.Kf};t.a(U,"linkConnected",U.prototype.wC);t.defineProperty(U,{wC:"linkConnected"},r("Fp"),function(a){var b=this.Fp;if(b!==a){a!==m&&t.e(a,"function",U,"linkConnected");this.Fp=a;this.d("linkConnected",b,a)}});
t.a(U,"linkDisconnected",U.prototype.xC);t.defineProperty(U,{xC:"linkDisconnected"},r("Hp"),function(a){var b=this.Hp;if(b!==a){a!==m&&t.e(a,"function",U,"linkDisconnected");this.Hp=a;this.d("linkDisconnected",b,a)}});function Bl(a,b,c){if(!a.ud.contains(b)){a.ud.add(b);var d=a.wC;if(d!==m){var e=h,g=a.b;if(g!==m){e=g.Aa;g.Aa=h}d(a,b,c);if(g!==m)g.Aa=e}if(a.$i){c=h;g=a.b;if(g!==m)c=g.xf;if(c){if(b.ia===a)a.$i=o}else if(b.ma===a)a.$i=o}}}
function Cl(a,b,c){if(a.ud.remove(b)){var d=a.xC,e=a.b;if(d!==m){var g=h;if(e!==m){g=e.Aa;e.Aa=h}d(a,b,c);if(e!==m)e.Aa=g}if(!a.$i&&!(e!==m&&e.ha.eb)){b=a.ud.count;b===0?a.$i=h:b===1&&Bi(a)}}}function Bi(a){if(a.ud.count!==0){var b=h,c=a.b;if(c!==m)b=c.xf;for(c=a.ud.f;c.next();){var d=c.value;if(b){if(d.ia===a){a.$i=o;return}}else if(d.ma===a){a.$i=o;return}}a.$i=h}}U.prototype.Cr=function(){T.prototype.Cr.call(this);Bi(this);var a=this.wm;a!==m&&Dl(a,this)};
U.prototype.Dr=function(){T.prototype.Dr.call(this);var a=this.wm;if(a!==m&&a.ff!==m){a.ff.remove(this);a.N()}};U.prototype.vl=function(){if(this.ud.count>0){var a=this.b;if(a===m)return;for(var b=this.ud.copy().f;b.next();)a.remove(b.value)}T.prototype.vl.call(this)};t.m(U,{Yi:"isLinkLabel"},function(){return this.wm!==m});t.a(U,"labeledLink",U.prototype.ke);
t.defineProperty(U,{ke:"labeledLink"},r("wm"),function(a){var b=this.wm;if(b!==a){s&&a!==m&&t.c(a,W,U,"labeledLink");var c=this.b,d=this.data;if(b!==m){if(b.ff!==m){b.ff.remove(this);b.N()}if(c!==m&&d!==m){var e=b.data,g=c.L;if(e!==m&&g instanceof P){var i=g.$b(d);i!==f&&g.DG(e,i)}}}this.wm=a;if(a!==m){Dl(a,this);if(c!==m&&d!==m){e=a.data;g=c.L;if(e!==m&&g instanceof P){i=g.$b(d);i!==f&&g.SA(e,i)}}}kj(this);this.d("labeledLink",b,a)}});
U.prototype.findPort=U.prototype.ur=function(a){s&&t.e(a,"string",U,"findPort:pid");this.oc===m&&Dj(this);if(this.oc!==m){var b=this.oc.da(a);if(b!==m)return b}if(a!==""&&this.oc!==m){b=this.oc.da("");if(b!==m)return b}this.oc===m&&Dj(this);return this};t.m(U,{port:"port"},function(){return this.ur("")});t.m(U,{ports:"ports"},function(){this.oc===m&&Dj(this);return this.oc!==m?this.oc.f:t.Kf});function Dj(a){a.oc!==m&&a.oc.clear();Ck(a,a,function(a,c){Ej(a,c)})}
function Ej(a,b){var c=b.oe;if(c!==m){if(a.oc===m)a.oc=new ra("string",Q);a.oc.add(c,b)}}function Cj(a,b,c){var d=b.oe;if(d!==m){a.oc!==m&&a.oc.remove(d);b=a.b;if(b!==m&&c){c=m;for(a=a.$x(d);a.next();){c===m&&(c=[]);c.push(a.value)}if(c!==m)for(a=0;a<c.length;a++)b.remove(c[a])}}}
U.prototype.isInTreeOf=U.prototype.pJ=function(a){if(a===m||a===this)return o;var b=h,c=this.b;if(c!==m)b=c.xf;if(b)a:{for(b=this;b!==a;){for(var c=m,d=b.tf();d.next();){c=d.value.ia;if(c!==b)break}if(c===m){a=o;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=m;for(d=b.Du();d.next();){c=d.value.ma;if(c!==b)break}if(c===m){a=o;break a}b=c}a=h}return a};U.prototype.findTreeParts=U.prototype.RI=function(){var a=new ta(T);nf(a,this,o,h);return a};
U.prototype.collapseTree=U.prototype.kr=function(){var a=this.b;if(a!==m&&!a.wf){a.wf=h;var b=a.xf,c=new ta(U);c.add(this);El(this,c,b);a.wf=o}};function El(a,b,c){a.Sd=o;for(var d=c?a.Du():a.tf();d.next();){var e=d.value,g=e.ZB(a);if(g!==m&&g!==a&&!b.contains(g)){b.add(g);gj(e);e.ah();gj(g);g.ah();ej(g);g.v(oj);if(g.Sd){g.mv=g.Sd;El(g,b,c)}}}}U.prototype.expandTree=U.prototype.sr=function(){var a=this.b;if(a!==m&&!a.wf){a.wf=h;var b=a.xf,c=new ta(U);c.add(this);Fl(this,c,b);a.wf=o}};
function Fl(a,b,c){a.Sd=h;for(var d=c?a.Du():a.tf();d.next();){var e=d.value,g=e.ZB(a);if(g!==m&&g!==a&&!b.contains(g)){b.add(g);gj(e);e.ki();gj(g);g.ki();ej(g);g.v(nj);if(g.mv){g.mv=o;Fl(g,b,c)}}}}t.a(U,"isTreeExpanded",U.prototype.Sd);
t.defineProperty(U,{Sd:"isTreeExpanded"},r("wp"),function(a){var b=this.wp;if(b!==a){s&&t.e(a,"boolean",U,"isTreeExpanded");this.wp=a;var c=this.b;c!==m&&uh(c);this.d("isTreeExpanded",b,a);b=this.MD;if(b!==m){var d=h;if(c!==m){d=c.Aa;c.Aa=h}b(this);if(c!==m)c.Aa=d}c!==m&&c.ha.eb||(a?this.sr():this.kr())}});t.a(U,"wasTreeExpanded",U.prototype.mv);
t.defineProperty(U,{mv:"wasTreeExpanded"},r("$q"),function(a){var b=this.$q;if(b!==a){s&&t.e(a,"boolean",U,"wasTreeExpanded");this.$q=a;this.d("wasTreeExpanded",b,a)}});t.a(U,"treeExpandedChanged",U.prototype.MD);t.defineProperty(U,{MD:"treeExpandedChanged"},r("Vq"),function(a){var b=this.Vq;if(b!==a){a!==m&&t.e(a,"function",U,"treeExpandedChanged");this.Vq=a;this.d("treeExpandedChanged",b,a)}});t.a(U,"isTreeLeaf",U.prototype.$i);
t.defineProperty(U,{$i:"isTreeLeaf"},r("xp"),function(a){var b=this.xp;if(b!==a){s&&t.e(a,"boolean",U,"isTreeLeaf");this.xp=a;this.d("isTreeLeaf",b,a)}});
function W(){T.call(this,sg);this.Dg=m;this.si="";this.dp=m;this.Fg=cc;this.Cg=NaN;this.Bg=xl;this.Eg=NaN;this.Ug=m;this.Ii="";this.Uq=m;this.Wg=cc;this.Tg=NaN;this.Sg=xl;this.Vg=NaN;this.kq=this.jq=o;this.qo=Ui;this.Do=0;this.Fo=Ui;this.Go=NaN;this.Ei=Sj;this.Hq=0.5;this.ec=this.ff=m;this.Ec=(new z(D)).freeze();this.gg=m;this.jl=o;this.Tw=m;this.Rm=o;this.Ik=this.Ah=this.za=m;this.Hd=0;this.uh=new z(E);this.Zt=new D;this.Yv=o}t.J("Link",W);t.ua(W,T);
W.prototype.jb=function(a){T.prototype.jb.call(this,a);a.si=this.si;a.dp=this.dp;a.Fg=this.Fg.D();a.Cg=this.Cg;a.Bg=this.Bg;a.Eg=this.Eg;a.Ii=this.Ii;a.Uq=this.Uq;a.Wg=this.Wg.D();a.Tg=this.Tg;a.Sg=this.Sg;a.Vg=this.Vg;a.jq=this.jq;a.kq=this.kq;a.qo=this.qo;a.Do=this.Do;a.Fo=this.Fo;a.Go=this.Go;a.Ei=this.Ei;a.Hq=this.Hq};W.prototype.dh=function(a){T.prototype.dh.call(this,a);a.ec=m;a.gg=m;Sf(a);a.Ik=this.Ik;a.Hd=this.Hd};var Sj;W.Normal=Sj=t.l(W,"Normal",1);var th;
W.Orthogonal=th=t.l(W,"Orthogonal",2);var Rf;W.AvoidsNodes=Rf=t.l(W,"AvoidsNodes",3);var Ui;W.None=Ui=t.l(W,"None",0);var Mj;W.Bezier=Mj=t.l(W,"Bezier",9);var Nj;W.JumpGap=Nj=t.l(W,"JumpGap",10);var Oj;W.JumpOver=Oj=t.l(W,"JumpOver",11);var Pj;W.End=Pj=t.l(W,"End",17);var Qj;W.Scale=Qj=t.l(W,"Scale",18);var Rj;W.Stretch=Rj=t.l(W,"Stretch",19);var Nk;W.OrientAlong=Nk=t.l(W,"OrientAlong",21);var Gl;W.OrientPlus90=Gl=t.l(W,"OrientPlus90",22);var Hl;W.OrientMinus90=Hl=t.l(W,"OrientMinus90",23);var Il;
W.OrientOpposite=Il=t.l(W,"OrientOpposite",24);var Jl;W.OrientUpright=Jl=t.l(W,"OrientUpright",25);var Kl;W.OrientPlus90Upright=Kl=t.l(W,"OrientPlus90Upright",26);var Ll;W.OrientMinus90Upright=Ll=t.l(W,"OrientMinus90Upright",27);var Ml;W.OrientUpright45=Ml=t.l(W,"OrientUpright45",28);W.prototype.pk=function(){var a=this.ia;if(a!==m&&(a.Lc||a.Ij))return o;a=this.ma;return a!==m&&(a.Lc||a.Ij)?o:h};
function Bk(a,b){var c;switch(a){default:case Ui:c=0;break;case Nk:c=b;break;case Gl:c=b+90;break;case Hl:c=b-90;break;case Il:c=b+180;break;case Jl:c=wd(b);c>90&&c<270&&(c=c-180);break;case Kl:c=wd(b+90);c>90&&c<270&&(c=c-180);break;case Ll:c=wd(b-90);c>90&&c<270&&(c=c-180);break;case Ml:c=wd(b);if(c>45&&c<135||c>225&&c<315)return 0;c>90&&c<270&&(c=c-180)}return wd(c)}t.a(W,"fromNode",W.prototype.ia);
t.defineProperty(W,{ia:"fromNode"},r("Dg"),function(a){var b=this.Dg;if(b!==a){s&&a!==m&&t.c(a,U,W,"fromNode");var c=this.Fc;if(b!==m){this.Ug!==b&&Cl(b,this,c);if(c!==m)c.md=m;Nl(this);b.v(vi)}this.Dg=a;this.Ah=m;Sf(this);var d=this.b;if(d!==m){var e=this.data,g=d.L;e!==m&&g instanceof P&&g.dv(e,g.$b(a!==m?a.data:m))}e=this.Fc;g=this.dy;if(g!==m){var i=h;if(d!==m){i=d.Aa;d.Aa=h}g(this,c,e);if(d!==m)d.Aa=i}if(a!==m){this.Ug!==a&&Bl(a,this,e);if(e!==m)e.md=m;Ol(this);a.v(qi)}this.d("fromNode",b,a);
xi(this)}});t.a(W,"fromPortId",W.prototype.hh);t.defineProperty(W,{hh:"fromPortId"},r("si"),function(a){var b=this.si;if(b!==a){s&&t.e(a,"string",W,"fromPortId");var c=this.Fc;if(c!==m)c.md=m;Nl(this);this.si=a;var d=this.Fc;if(d!==m)d.md=m;var e=this.b;if(e!==m){var g=this.data,i=e.L;g!==m&&i instanceof P&&i.$r(g,a)}if(c!==d){this.Ah=m;Sf(this);g=this.dy;if(g!==m){i=h;if(e!==m){i=e.Aa;e.Aa=h}g(this,c,d);if(e!==m)e.Aa=i}}Ol(this);this.d("fromPortId",b,a)}});
t.m(W,{Fc:"fromPort"},function(){var a=this.Dg;return a===m?m:a.ur(this.si)});t.a(W,"fromPortChanged",W.prototype.dy);t.defineProperty(W,{dy:"fromPortChanged"},r("dp"),function(a){var b=this.dp;if(b!==a){a!==m&&t.e(a,"function",W,"fromPortChanged");this.dp=a;this.d("fromPortChanged",b,a)}});t.a(W,"toNode",W.prototype.ma);
t.defineProperty(W,{ma:"toNode"},r("Ug"),function(a){var b=this.Ug;if(b!==a){s&&a!==m&&t.c(a,U,W,"toNode");var c=this.rd;if(b!==m){this.Dg!==b&&Cl(b,this,c);if(c!==m)c.md=m;Nl(this);b.v(vi)}this.Ug=a;this.Ah=m;Sf(this);var d=this.b;if(d!==m){var e=this.data,g=d.L;e!==m&&g instanceof P&&g.ev(e,g.$b(a!==m?a.data:m))}e=this.rd;g=this.cz;if(g!==m){var i=h;if(d!==m){i=d.Aa;d.Aa=h}g(this,c,e);if(d!==m)d.Aa=i}if(a!==m){this.Dg!==a&&Bl(a,this,e);if(e!==m)e.md=m;Ol(this);a.v(qi)}this.d("toNode",b,a);xi(this)}});
t.a(W,"toPortId",W.prototype.ji);t.defineProperty(W,{ji:"toPortId"},r("Ii"),function(a){var b=this.Ii;if(b!==a){s&&t.e(a,"string",W,"toPortId");var c=this.rd;if(c!==m)c.md=m;Nl(this);this.Ii=a;var d=this.rd;if(d!==m)d.md=m;var e=this.b;if(e!==m){var g=this.data,i=e.L;g!==m&&i instanceof P&&i.bs(g,a)}if(c!==d){this.Ah=m;Sf(this);g=this.cz;if(g!==m){i=h;if(e!==m){i=e.Aa;e.Aa=h}g(this,c,d);if(e!==m)e.Aa=i}}Ol(this);this.d("toPortId",b,a)}});
t.m(W,{rd:"toPort"},function(){var a=this.Ug;return a===m?m:a.ur(this.Ii)});t.a(W,"toPortChanged",W.prototype.cz);t.defineProperty(W,{cz:"toPortChanged"},r("Uq"),function(a){var b=this.Uq;if(b!==a){a!==m&&t.e(a,"function",W,"toPortChanged");this.Uq=a;this.d("toPortChanged",b,a)}});t.a(W,"fromSpot",W.prototype.Ya);t.defineProperty(W,{Ya:"fromSpot"},r("Fg"),function(a){var b=this.Fg;if(!b.z(a)){s&&t.c(a,J,W,"fromSpot");this.Fg=a=a.D();this.d("fromSpot",b,a);Sf(this)}});
t.a(W,"fromEndSegmentLength",W.prototype.nk);t.defineProperty(W,{nk:"fromEndSegmentLength"},r("Cg"),function(a){var b=this.Cg;if(b!==a){s&&t.e(a,"number",W,"fromEndSegmentLength");a<0&&t.ga(a,">= 0",W,"fromEndSegmentLength");this.Cg=a;this.d("fromEndSegmentLength",b,a);Sf(this)}});t.a(W,"fromEndSegmentDirection",W.prototype.wr);
t.defineProperty(W,{wr:"fromEndSegmentDirection"},r("Bg"),function(a){var b=this.Bg;if(b!==a){s&&t.Va(a,U,W,"fromEndSegmentDirection");this.Bg=a;this.d("fromEndSegmentDirection",b,a);Sf(this)}});t.a(W,"fromShortLength",W.prototype.xr);t.defineProperty(W,{xr:"fromShortLength"},r("Eg"),function(a){var b=this.Eg;if(b!==a){s&&t.e(a,"number",W,"fromShortLength");this.Eg=a;this.d("fromShortLength",b,a);Sf(this)}});t.a(W,"toSpot",W.prototype.$a);
t.defineProperty(W,{$a:"toSpot"},r("Wg"),function(a){var b=this.Wg;if(!b.z(a)){s&&t.c(a,J,W,"toSpot");this.Wg=a=a.D();this.d("toSpot",b,a);Sf(this)}});t.a(W,"toEndSegmentLength",W.prototype.wk);t.defineProperty(W,{wk:"toEndSegmentLength"},r("Tg"),function(a){var b=this.Tg;if(b!==a){s&&t.e(a,"number",W,"toEndSegmentLength");a<0&&t.ga(a,">= 0",W,"toEndSegmentLength");this.Tg=a;this.d("toEndSegmentLength",b,a);Sf(this)}});t.a(W,"toEndSegmentDirection",W.prototype.gs);
t.defineProperty(W,{gs:"toEndSegmentDirection"},r("Sg"),function(a){var b=this.Sg;if(b!==a){s&&t.Va(a,U,W,"toEndSegmentDirection");this.Sg=a;this.d("toEndSegmentDirection",b,a);Sf(this)}});t.a(W,"toShortLength",W.prototype.hs);t.defineProperty(W,{hs:"toShortLength"},r("Vg"),function(a){var b=this.Vg;if(b!==a){s&&t.e(a,"number",W,"toShortLength");this.Vg=a;this.d("toShortLength",b,a);Sf(this)}});function xi(a){var b=a.ia,c=a.ma;b!==m&&c!==m?tl(a,b.CF(c)):tl(a,m)}
W.prototype.getOtherNode=W.prototype.ZB=function(a){s&&t.c(a,U,W,"getOtherNode:node");var b=this.ia;return a===b?this.ma:b};W.prototype.getOtherPort=W.prototype.VI=function(a){s&&t.c(a,Q,W,"getOtherPort:port");var b=this.Fc;return a===b?this.rd:b};t.m(W,{hi:"labelNodes"},function(){return this.ff===m?t.Kf:this.ff.f});function Dl(a,b){if(a.ff===m)a.ff=new ta(U);a.ff.add(b);a.N()}
W.prototype.Cr=function(){T.prototype.Cr.call(this);var a=this.Dg,b=this.Ug;if(a!==m){var c=this.Fc;if(c!==m)c.md=m;Bl(a,this,c);Ol(this)}if(b!==m){c=this.rd;if(c!==m)c.md=m;Bl(b,this,c);Ol(this)}};W.prototype.Dr=function(){T.prototype.Dr.call(this);var a=this.Dg,b=this.Ug;if(a!==m){var c=this.Fc;if(c!==m)c.md=m;Cl(a,this,c);Nl(this)}if(b!==m){c=this.rd;if(c!==m)c.md=m;Cl(b,this,c);Nl(this)}};
W.prototype.vl=function(){if(this.ff!==m){var a=this.b;if(a===m)return;for(var b=this.ff.copy().f;b.next();)a.remove(b.value)}b=this.data;if(b!==m){a=this.b;if(a!==m){a=a.L;a instanceof P&&a.EG(b)}}};W.prototype.move=W.prototype.move=function(a){var b=this.position,c=a.x-b.x,b=a.y-b.y;T.prototype.move.call(this,a);this.rk(c,b);for(a=this.hi;a.next();){var d=a.value,e=d.position;d.move(new D(e.x+c,e.y+b))}};t.a(W,"relinkableFrom",W.prototype.WC);
t.defineProperty(W,{WC:"relinkableFrom"},r("jq"),function(a){var b=this.jq;if(b!==a){s&&t.e(a,"boolean",W,"relinkableFrom");this.jq=a;this.d("relinkableFrom",b,a)}});t.a(W,"relinkableTo",W.prototype.XC);t.defineProperty(W,{XC:"relinkableTo"},r("kq"),function(a){var b=this.kq;if(b!==a){s&&t.e(a,"boolean",W,"relinkableTo");this.kq=a;this.d("relinkableTo",b,a)}});
W.prototype.canRelinkFrom=W.prototype.NH=function(){if(!this.WC)return o;var a=this.xa;if(a!==m&&!a.Ki)return o;a=a.b;return a!==m&&!a.Ki?o:h};W.prototype.canRelinkTo=W.prototype.OH=function(){if(!this.XC)return o;var a=this.xa;if(a!==m&&!a.Ki)return o;a=a.b;return a!==m&&!a.Ki?o:h};t.m(W,{path:"path"},function(){var a=this.ec;if(a!==m)return a;a=this.sa;a=uk(this,a,a.length);if(a instanceof X)return this.ec=a;return m});W.prototype.fp=r("path");W.prototype.nw=r("Ec");
W.prototype.Bj=function(){Pl(this);var a=this.de();return this.Tw=a};
W.prototype.de=function(){var a=Infinity,b=Infinity,c=this.ca,d;if(c===0)return new E(NaN,NaN,0,0);if(c===1){c=this.i(0);a=Math.min(c.x,a);b=Math.min(c.y,b);d=new E(c.x,c.y,0,0)}else if(c===2){d=this.i(0);var e=this.i(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new E(d,e)}else if(Ql(this)===Mj&&c>=4&&!Jg(this)){d=this.i(0);var a=Math.min(d.x,a),b=Math.min(d.y,b),e=d.x,g=d.y,i=d.x,j=d.y,k,l,n,q;d=new E(e,g,0,0);for(var p=3;p<c;p=p+3){k=this.i(p-3);l=this.i(p-2);p+3>=c&&(p=c-1);n=this.i(p-1);q=this.i(p);
Yc(k.x,k.y,l.x,l.y,n.x,n.y,q.x,q.y,0.5,d);e=Math.min(e,d.x);g=Math.min(g,d.y);i=Math.max(i,d.x+d.width);j=Math.max(j,d.y+d.height);a=Math.min(q.x,a);b=Math.min(q.y,b)}}else{d=this.i(0);e=this.i(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new E(d,e);for(p=2;p<c;p++){e=this.i(p);a=Math.min(e.x,a);b=Math.min(e.y,b);d.jv(e)}}this.Zt.$d(a-d.x,b-d.y);return d};t.m(W,{HC:"midPoint"},function(){Pl(this);return Rl(this)});
function Rl(a){var b=a.ca;if(b===0)return Tc;if(b===1)return a.i(0);if(b===2){var c=a.i(0),d=a.i(1);return new D((c.x+d.x)/2,(c.y+d.y)/2)}if(Ql(a)===Mj&&b>=3&&!Jg(a)){if(b===3)return a.i(1);var c=(b-1)/3|0,e=(c/2|0)*3;if(c%2===1){var c=a.i(e),d=a.i(e+1),g=a.i(e+2),a=a.i(e+3),e=new D,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.i(e)}e=0;g=[];for(i=0;i<b-1;i++){c=a.i(i);d=a.i(i+1);if(fb(c.x,d.x)){c=
d.y-c.y;c<0&&(c=-c)}else if(fb(c.y,d.y)){c=d.x-c.x;c<0&&(c=-c)}else c=Math.sqrt(c.$h(d));g.push(c);e=e+c}for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c=c+d;i++}b=a.i(i);a=a.i(i+1);if(b.x===a.x)return b.y>a.y?new D(b.x,b.y-(e/2-c)):new D(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new D(b.x-(e/2-c),b.y):new D(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new D(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}t.m(W,{GC:"midAngle"},function(){Pl(this);return Sl(this)});
function Sl(a){var b=a.ca;if(b<2)return NaN;if(Ql(a)===Mj&&b>=4&&!Jg(a)){var c=(b-1)/3|0,d=(c/2|0)*3;if(c%2===1){var d=Math.floor(d),b=a.i(d),e=a.i(d+1),c=a.i(d+2),a=a.i(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return ob(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(d>0&&d+1<b){b=a.i(d-1);e=a.i(d+1);return b.Zh(e)}}c=b/2|0;if(b%2===0){b=a.i(c-1);e=a.i(c);return b.Zh(e)}b=a.i(c-1);e=a.i(c);c=a.i(c+1);a=b.$h(e);d=e.$h(c);return a>d?b.Zh(e):e.Zh(c)}t.a(W,"points",W.prototype.nb);
t.defineProperty(W,{nb:"points"},r("Ec"),function(a){s&&t.c(a,z,W,"points");var b=this.Ec;if(b!==a&&a!==m){for(var c=a.f;c.next();){var d=c.value;d.freeze()}a.freeze();this.Ec=a.copy();this.cf();Tl(this);for(var c=a.count,e=new z,g=0;g<c;g++){d=a.j[g];e.add(d.copy())}this.d("points",b,e)}});t.m(W,{ca:"pointsCount"},function(){return this.Ec.count});W.prototype.getPoint=W.prototype.i=function(a){return this.Ec.j[a]};
W.prototype.setPoint=W.prototype.A=function(a,b){if(s){t.c(b,D,W,"setPoint");b.aa()||t.g("Link.setPoint called with a Point that does not have real numbers: "+b.toString())}this.gg===m&&t.g("Call Link.startRoute before modifying the points of the route.");this.Ec.cv(a,b)};
W.prototype.insertPoint=W.prototype.q=function(a,b){if(s){t.c(b,D,W,"insertPoint");b.aa()||t.g("Link.insertPoint called with a Point that does not have real numbers: "+b.toString())}this.gg===m&&t.g("Call Link.startRoute before modifying the points of the route.");this.Ec.kc(a,b)};
W.prototype.addPoint=W.prototype.cd=function(a){if(s){t.c(a,D,W,"addPoint");a.aa()||t.g("Link.addPoint called with a Point that does not have real numbers: "+a.toString())}this.gg===m&&t.g("Call Link.startRoute before modifying the points of the route.");this.Ec.add(a)};W.prototype.removePoint=W.prototype.aD=function(a){this.gg===m&&t.g("Call Link.startRoute before modifying the points of the route.");this.Ec.We(a)};
W.prototype.clearPoints=W.prototype.mn=function(){this.gg===m&&t.g("Call Link.startRoute before modifying the points of the route.");this.Ec.clear()};W.prototype.movePoints=W.prototype.rk=function(a,b){for(var c=new z(D),d=this.Ec.f;d.next();){var e=d.value;c.add(new D(e.x+a,e.y+b))}this.nb=c};W.prototype.startRoute=W.prototype.vk=function(){if(this.gg===m){for(var a=new z(D),b=this.Ec.f;b.next();)a.add(b.value.D());this.gg=a;this.Ec.Ba()}};
W.prototype.commitRoute=W.prototype.Xh=function(){if(this.gg!==m){for(var a=this.gg,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.j[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.Ec,l=k.count,e=0;e<l;e++){g=k.j[e];i=Math.min(g.x,i);j=Math.min(g.y,j)}if(l===d)for(e=0;e<l;e++){g=a.j[e];d=k.j[e];if(g.x-b!==d.x-i||g.y-c!==d.y-j){this.cf();break}}this.gg=m;this.Ec.freeze();Tl(this);b=new z(D);for(e=0;e<l;e++){g=k.j[e];b.add(g.copy())}this.d("points",a,b)}};
W.prototype.rollbackRoute=W.prototype.IG=function(){this.gg=m};function Tl(a){if(a.Ec.count===0)a.jl=o;else{a.jl=h;Ul(a,o)}}function Sf(a){if(!a.Rm&&(!a.b||!a.b.ha.eb)&&a.kb()){a.jl=o;a.cf();a=a.fp();a!==m&&a.N()}}
function Pl(a){if(!a.jl&&!a.Yv){var b=h;try{a.Yv=h;a.vk();var c=a.ia,d=m,d=c===m?m:a.Fc;if(d!==m){var e=Fj(d);if(e===c||!c.kb()){var g=ol(c);if(g!==m&&g!==c){c=g;d=g.ur("")}else c=g}else d=e}if(c===m||d===m||!c.location.aa())b=o;else{var i=a.ma,e=m,e=i===m?m:a.rd;if(e!==m){var j=Fj(e);if(j===i||!i.kb()){var k=ol(i);if(k!==m&&k!==i){i=k;e=k.ur("")}else i=k}else e=j}if(i===m||e===m||!i.location.aa())b=o;else{var l=a.ca,n=Vl(a,d),q=Wl(a,e),j=d===e,p=Jg(a),u=a.Me===Mj;if(j&&!p){u=h;a.Ah=h}else a.Ah=o;
var w=a.hu===Ui||j;if(!p&&n===Yb&&q===Yb&&!j){q=o;if(!w&&l>=3)var B=a.Qd(c,d,Yb,h,o,i,e),F=a.Qd(i,e,Yb,o,o,c,d),q=Xl(a,0,B,l-1,F);if(!q){a.mn();if(u){var q=c,p=d,H=e,x=a.Qd(q,p,Yb,h,o,i,H),I=a.Qd(i,H,Yb,o,o,q,p),y=I.x-x.x,G=I.y-x.y,fa=Yl(a),R=0,S=0,da=x.x+y/3,ma=x.y+G/3,Ha=da,sa=ma;if(gb(G,0))sa=y>0?sa-fa:sa+fa;else{R=-y/G;S=Math.sqrt(fa*fa/(R*R+1));fa<0&&(S=-S);Ha=(G<0?-1:1)*S+da;sa=R*(Ha-da)+ma}var da=x.x+2*y/3,ma=x.y+2*G/3,db=da,Ya=ma;if(gb(G,0))Ya=y>0?Ya-fa:Ya+fa;else{db=(G<0?-1:1)*S+da;Ya=R*
(db-da)+ma}a.mn();a.cd(x);a.cd(new D(Ha,sa));a.cd(new D(db,Ya));a.cd(I);a.A(0,a.Qd(q,p,Yb,h,o,i,H));a.A(3,a.Qd(i,H,Yb,o,o,q,p))}else{var q=c,p=d,H=e,bb=a.Qd(q,p,Yb,h,o,i,H),Oa=a.Qd(i,H,Yb,o,o,q,p);if(!isNaN(a.tu)||a.Hd!==0&&!Jg(a)){var hb=Oa.x-bb.x,Va=Oa.y-bb.y,uc=Yl(a),zd=bb.x+hb/2,Wa=bb.y+Va/2,i=zd,q=Wa;if(gb(Va,0))q=hb>0?q-uc:q+uc;else{var p=-hb/Va,Cc=Math.sqrt(uc*uc/(p*p+1));uc<0&&(Cc=-Cc);i=(Va<0?-1:1)*Cc+zd;q=p*(i-zd)+Wa}a.cd(bb);a.cd(new D(i,q))}else a.cd(bb);a.cd(Oa)}}}else{var Ad=a.Xe===
Rf;w&&(p&&Ad||j)&&a.mn();var pc=Yl(a),Ub=a.Qd(c,d,n,h,p,i,e),I=G=y=0;if(p||n!==Yb||j){var gc=Zl(a,d,n,h),I=$l(a,c,d,Ub,n,h,p,e);if(j){I=I-(p?90:30);pc<0&&(I=I-180)}I<0?I=I+360:I>=360&&(I=I-360);j&&(gc=gc+Math.abs(pc));if(I===0)y=gc;else if(I===90)G=gc;else if(I===180)y=-gc;else if(I===270)G=-gc;else{y=gc*Math.cos(I*Math.PI/180);G=gc*Math.sin(I*Math.PI/180)}if(Wb(n)&&j)var Dc=d.zb(mc),Ub=a.ey(c,d,Dc,new D(Dc.x+y*1E3,Dc.y+G*1E3),h)}H=a.Qd(i,e,q,o,p,c,d);x=da=fa=0;if(p||q!==Yb||j){var Gb=Zl(a,e,q,o),
x=$l(a,i,e,H,q,o,p,d);if(j){x=x+(p?0:30);pc<0&&(x=x+180)}x<0?x=x+360:x>=360&&(x=x-360);j&&(Gb=Gb+Math.abs(pc));if(x===0)fa=Gb;else if(x===90)da=Gb;else if(x===180)fa=-Gb;else if(x===270)da=-Gb;else{fa=Gb*Math.cos(x*Math.PI/180);da=Gb*Math.sin(x*Math.PI/180)}if(Wb(q)&&j){Dc=e.zb(mc);H=a.ey(i,e,Dc,new D(Dc.x+fa*1E3,Dc.y+da*1E3),o)}}ma=Ub;if(p||n!==Yb||j)ma=new D(Ub.x+y,Ub.y+G);e=H;if(p||q!==Yb||j)e=new D(H.x+fa,H.y+da);if(w||p||!Wb(n)||!(l>3&&Xl(a,0,Ub,l-2,e)))if(!w&&!p&&Wb(q)&&l>3&&Xl(a,1,ma,l-1,H))a.A(0,
Ub);else if(!w&&!p&&l>4&&Xl(a,1,ma,l-2,e)){a.A(0,Ub);a.A(l-1,H)}else if(!w&&p&&l>=6&&!Ad&&Xl(a,1,ma,l-2,e)){a.A(0,Ub);a.A(l-1,H)}else{a.mn();a.cd(Ub);(p||n!==Yb||j)&&a.cd(ma);if(p)b:{y=ma;G=e;I=-45<=I&&I<45?0:45<=I&&I<135?90:135<=I&&I<225?180:270;x=-45<=x&&x<45?0:45<=x&&x<135?90:135<=x&&x<225?180:270;R=c.ta.copy();S=i.ta.copy();if(R.aa()&&S.aa()){R.uf(8,8);S.uf(8,8);R.jv(y);S.jv(G);Ha=a.b;if(a.Xe===Rf&&Ha!==m&&!R.ka(G)&&!S.ka(y)&&c!==i&&!a.xa.ed){sa=la(Ha,h,a);db=R.copy().zk(S);db.uf(sa.pl*2,sa.ol*
2);am(sa,y,I,G,x,db);Ya=bm(sa,G.x,G.y);if(!sa.abort&&Ya===pa){Gi(sa);var Bb=sa.uD;db.uf(sa.pl*Bb,sa.ol*Bb);am(sa,y,I,G,x,db);Ya=bm(sa,G.x,G.y)}if(!sa.abort&&Ya===pa){Gi(sa);Bb=sa.tC;db.uf(sa.pl*Bb,sa.ol*Bb);am(sa,y,I,G,x,db);Ya=bm(sa,G.x,G.y)}if(!sa.abort&&Ya===pa&&sa.SD){Gi(sa);am(sa,y,I,G,x,sa.mb);Ya=bm(sa,G.x,G.y)}if(!sa.abort&&Ya<pa&&bm(sa,G.x,G.y)!==na){cm(a,sa,G.x,G.y,x,h);var Za=a.i(2);if(a.ca<4){if(I===0||I===180){Za.x=y.x;Za.y=G.y}else{Za.x=G.x;Za.y=y.y}a.A(2,Za);a.q(3,Za)}else{var Wc=a.i(3);
if(I===0||I===180)if(gb(Za.x,Wc.x)){var Lc=I===0?Math.max(Za.x,y.x):Math.min(Za.x,y.x);a.A(2,new D(Lc,y.y));a.A(3,new D(Lc,Wc.y))}else if(gb(Za.y,Wc.y)){if(Math.abs(y.y-Za.y)<=sa.ol/2){a.A(2,new D(Za.x,y.y));a.A(3,new D(Wc.x,y.y))}a.q(2,new D(Za.x,y.y))}else a.A(2,new D(y.x,Za.y));else if(I===90||I===270)if(gb(Za.y,Wc.y)){var kd=I===90?Math.max(Za.y,y.y):Math.min(Za.y,y.y);a.A(2,new D(y.x,kd));a.A(3,new D(Wc.x,kd))}else if(gb(Za.x,Wc.x)){if(Math.abs(y.x-Za.x)<=sa.pl/2){a.A(2,new D(y.x,Za.y));a.A(3,
new D(y.x,Wc.y))}a.q(2,new D(y.x,Za.y))}else a.A(2,new D(Za.x,y.y))}break b}}var oa,Ia;if(I===0)if(G.x>y.x||x===270&&G.y<y.y&&S.right>y.x||x===90&&G.y>y.y&&S.right>y.x){oa=new D(G.x,y.y);Ia=new D(G.x,(y.y+G.y)/2);if(x===180){oa.x=dm(a,y.x,G.x);Ia.x=oa.x;Ia.y=G.y}else if(x===270&&G.y<y.y||x===90&&G.y>y.y){oa.x=y.x<S.left?dm(a,y.x,S.left):y.x<S.right&&(x===270&&y.y<S.top||x===90&&y.y>S.bottom)?dm(a,y.x,G.x):S.right;Ia.x=oa.x;Ia.y=G.y}else if(x===0&&y.x<S.left&&y.y>S.top&&y.y<S.bottom){oa.x=y.x;oa.y=
y.y<G.y?Math.min(G.y,S.top):Math.max(G.y,S.bottom);Ia.y=oa.y}}else{oa=new D(y.x,G.y);Ia=new D((y.x+G.x)/2,G.y);if(x===180||x===90&&G.y<R.top||x===270&&G.y>R.bottom){if(x===180&&(S.ka(y)||R.ka(G)))oa.y=dm(a,y.y,G.y);else if(G.y<y.y&&(x===180||x===90))oa.y=dm(a,R.top,Math.max(G.y,S.bottom));else if(G.y>y.y&&(x===180||x===270))oa.y=dm(a,R.bottom,Math.min(G.y,S.top));Ia.x=G.x;Ia.y=oa.y}if(oa.y>R.top&&oa.y<R.bottom)if(G.x>=R.left&&G.x<=y.x||y.x<=S.right&&y.x>=G.x){if(x===90||x===270){oa=new D(Math.max((y.x+
G.x)/2,y.x),y.y);Ia=new D(oa.x,G.y)}}else{oa.y=x===270||(x===0||x===180)&&G.y<y.y?Math.min(G.y,x===0?R.top:Math.min(R.top,S.top)):Math.max(G.y,x===0?R.bottom:Math.max(R.bottom,S.bottom));Ia.x=G.x;Ia.y=oa.y}}else if(I===180)if(G.x<y.x||x===270&&G.y<y.y&&S.left<y.x||x===90&&G.y>y.y&&S.left<y.x){oa=new D(G.x,y.y);Ia=new D(G.x,(y.y+G.y)/2);if(x===0){oa.x=dm(a,y.x,G.x);Ia.x=oa.x;Ia.y=G.y}else if(x===270&&G.y<y.y||x===90&&G.y>y.y){oa.x=y.x>S.right?dm(a,y.x,S.right):y.x>S.left&&(x===270&&y.y<S.top||x===
90&&y.y>S.bottom)?dm(a,y.x,G.x):S.left;Ia.x=oa.x;Ia.y=G.y}else if(x===180&&y.x>S.right&&y.y>S.top&&y.y<S.bottom){oa.x=y.x;oa.y=y.y<G.y?Math.min(G.y,S.top):Math.max(G.y,S.bottom);Ia.y=oa.y}}else{oa=new D(y.x,G.y);Ia=new D((y.x+G.x)/2,G.y);if(x===0||x===90&&G.y<R.top||x===270&&G.y>R.bottom){if(x===0&&(S.ka(y)||R.ka(G)))oa.y=dm(a,y.y,G.y);else if(G.y<y.y&&(x===0||x===90))oa.y=dm(a,R.top,Math.max(G.y,S.bottom));else if(G.y>y.y&&(x===0||x===270))oa.y=dm(a,R.bottom,Math.min(G.y,S.top));Ia.x=G.x;Ia.y=oa.y}if(oa.y>
R.top&&oa.y<R.bottom)if(G.x<=R.right&&G.x>=y.x||y.x>=S.left&&y.x<=G.x){if(x===90||x===270){oa=new D(Math.min((y.x+G.x)/2,y.x),y.y);Ia=new D(oa.x,G.y)}}else{oa.y=x===270||(x===0||x===180)&&G.y<y.y?Math.min(G.y,x===180?R.top:Math.min(R.top,S.top)):Math.max(G.y,x===180?R.bottom:Math.max(R.bottom,S.bottom));Ia.x=G.x;Ia.y=oa.y}}else if(I===90)if(G.y>y.y||x===180&&G.x<y.x&&S.bottom>y.y||x===0&&G.x>y.x&&S.bottom>y.y){oa=new D(y.x,G.y);Ia=new D((y.x+G.x)/2,G.y);if(x===270){oa.y=dm(a,y.y,G.y);Ia.x=G.x;Ia.y=
oa.y}else if(x===180&&G.x<y.x||x===0&&G.x>y.x){oa.y=y.y<S.top?dm(a,y.y,S.top):y.y<S.bottom&&(x===180&&y.x<S.left||x===0&&y.x>S.right)?dm(a,y.y,G.y):S.bottom;Ia.x=G.x;Ia.y=oa.y}else if(x===90&&y.y<S.top&&y.x>S.left&&y.x<S.right){oa.x=y.x<G.x?Math.min(G.x,S.left):Math.max(G.x,S.right);oa.y=y.y;Ia.x=oa.x}}else{oa=new D(G.x,y.y);Ia=new D(G.x,(y.y+G.y)/2);if(x===270||x===0&&G.x<R.left||x===180&&G.x>R.right){if(x===270&&(S.ka(y)||R.ka(G)))oa.x=dm(a,y.x,G.x);else if(G.x<y.x&&(x===270||x===0))oa.x=dm(a,R.left,
Math.max(G.x,S.right));else if(G.x>y.x&&(x===270||x===180))oa.x=dm(a,R.right,Math.min(G.x,S.left));Ia.x=oa.x;Ia.y=G.y}if(oa.x>R.left&&oa.x<R.right)if(G.y>=R.top&&G.y<=y.y||y.y<=S.bottom&&y.y>=G.y){if(x===0||x===180){oa=new D(y.x,Math.max((y.y+G.y)/2,y.y));Ia=new D(G.x,oa.y)}}else{oa.x=x===180||(x===90||x===270)&&G.x<y.x?Math.min(G.x,x===90?R.left:Math.min(R.left,S.left)):Math.max(G.x,x===90?R.right:Math.max(R.right,S.right));Ia.x=oa.x;Ia.y=G.y}}else if(G.y<y.y||x===180&&G.x<y.x&&S.top<y.y||x===0&&
G.x>y.x&&S.top<y.y){oa=new D(y.x,G.y);Ia=new D((y.x+G.x)/2,G.y);if(x===90){oa.y=dm(a,y.y,G.y);Ia.x=G.x;Ia.y=oa.y}else if(x===180&&G.x<y.x||x===0&&G.x>=y.x){oa.y=y.y>S.bottom?dm(a,y.y,S.bottom):y.y>S.top&&(x===180&&y.x<S.left||x===0&&y.x>S.right)?dm(a,y.y,G.y):S.top;Ia.x=G.x;Ia.y=oa.y}else if(x===270&&y.y>S.bottom&&y.x>S.left&&y.x<S.right){oa.x=y.x<G.x?Math.min(G.x,S.left):Math.max(G.x,S.right);oa.y=y.y;Ia.x=oa.x}}else{oa=new D(G.x,y.y);Ia=new D(G.x,(y.y+G.y)/2);if(x===90||x===0&&G.x<R.left||x===180&&
G.x>R.right){if(x===90&&(S.ka(y)||R.ka(G)))oa.x=dm(a,y.x,G.x);else if(G.x<y.x&&(x===90||x===0))oa.x=dm(a,R.left,Math.max(G.x,S.right));else if(G.x>y.x&&(x===90||x===180))oa.x=dm(a,R.right,Math.min(G.x,S.left));Ia.x=oa.x;Ia.y=G.y}if(oa.x>R.left&&oa.x<R.right)if(G.y<=R.bottom&&G.y>=y.y||y.y>=S.top&&y.y<=G.y){if(x===0||x===180){oa=new D(y.x,Math.min((y.y+G.y)/2,y.y));Ia=new D(G.x,oa.y)}}else{oa.x=x===180||(x===90||x===270)&&G.x<y.x?Math.min(G.x,x===270?R.left:Math.min(R.left,S.left)):Math.max(G.x,x===
270?R.right:Math.max(R.right,S.right));Ia.x=oa.x;Ia.y=G.y}}a.cd(oa);a.cd(Ia)}}(p||q!==Yb||j)&&a.cd(e);a.cd(H)}}b=h}}}finally{a.Yv=o;b?a.Xh():a.IG()}}}function em(a,b){if(Math.abs(b.x-a.x)>Math.abs(b.y-a.y)){b.x=b.x>=a.x?a.x+9E9:a.x-9E9;b.y=a.y}else{b.y=b.y>=a.y?a.y+9E9:a.y-9E9;b.x=a.x}return b}
W.prototype.getLinkPointFromPoint=W.prototype.ey=function(a,b,c,d){if(a===m||b===m)return c;if(!a.kb()){var e=ol(a);if(e!==m&&e!==a)b=e.port}a=b.Y===m?new kb:b.Y.ce.copy();e=a.copy();e.Lu();d=Lb(e,d);e=Lb(e,c);c=e.copy();b.Ju(d,e,c);b=Lb(a,c);c.x=b.x;c.y=b.y;return c};function fm(a,b){var c=a.md;if(c===m){c=new gm;c.port=a;c.kh=a.ba;a.md=c}return hm(c,b)}
W.prototype.getLinkPoint=W.prototype.Qd=function(a,b,c,d,e,g,i){if(Tb(c))return c=b.zb(c);if(Vb(c)){c=fm(b,this);if(c!==m)return c=c.Kn}c=b.zb(mc);if(this.ca>(e?6:2)){i=d?this.i(1):this.i(this.ca-2);e&&(i=em(c,i.copy()))}else{i=i.zb(mc);e&&(i=em(c,i))}return this.ey(a,b,c,i,d)};
function $l(a,b,c,d,e,g,i,j){a:if(Tb(e))d=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:e.x<0.5?225:e.x>0.5?45:0;else{if(Vb(e)){e=fm(c,a);if(e!==m)switch(e.Gd){case t.Tc:d=270;break a;case t.yc:d=180;break a;default:case t.Jc:d=0;break a;case t.Ic:d=90;break a}}e=c.zb(mc);if(a.ca>(i?6:2)){j=g?a.i(1):a.i(a.ca-2);j=i?em(e,j.copy()):d}else j=j.zb(mc);d=Math.abs(j.x-e.x)>Math.abs(j.y-e.y)?j.x>=e.x?0:180:j.y>=e.y?90:270}i=xl;i=g?a.wr:a.gs;i===xl&&(i=g?c.wr:c.gs);switch(i){case yl:a=
b.Qa;d=d+a;d>=360&&(d=d-360);break;case xl:case Ti:a=b.Qa;if(a===0)break;45<=a&&a<135?d=d+90:135<=a&&a<225?d=d+180:225<=a&&a<315&&(d=d+270);d>=360&&(d=d-360)}return d}function Zl(a,b,c,d){if(Vb(c)){c=fm(b,a);if(c!==m)return c.zu}c=NaN;c=d?a.nk:a.wk;isNaN(c)&&(c=d?b.nk:b.wk);isNaN(c)&&(c=10);return c}function Vl(a,b){var c=a.Ya;if(Xb(c)){if(b===f)b=a.Fc;if(b!==m)c=b.Ya}return c===cc?Yb:c}function Wl(a,b){var c=a.$a;if(Xb(c)){if(b===f)b=a.rd;if(b!==m)c=b.$a}return c===cc?Yb:c}
function im(a){var b=a.xr;if(isNaN(b)){a=a.Fc;if(a!==m)b=a.xr}return isNaN(b)?0:b}function jm(a){var b=a.hs;if(isNaN(b)){a=a.rd;if(a!==m)b=a.hs}return isNaN(b)?0:b}function Jg(a){a=a.Xe;return a===th||a===Rf}function Ql(a){if(a.Ah===m){var b=Jg(a);a.Ah=a.Fc===a.rd&&!b}return a.Ah?Mj:a.Me}function km(a){if(a.Me===Mj)return 0;a=a.rB;if(isNaN(a)||a<0)a=10;return a}
function Yl(a){var b=a.tu;if(isNaN(b)){var c=a.Hd;if(c!==0){b=a.Ik;b=b!==m?b.fj:10;a=Math.abs(c);b=b/2+((a-1)/2|0)*b;a%2===0&&(b=-b);c<0&&(b=-b)}else b=10}return b}
function Xl(a,b,c,d,e){var g=a.hu;if(Jg(a)){if(g===Qj)return o;g===Rj&&(g=Pj)}switch(g){case Qj:var i=a.i(b),j=a.i(d);if(!i.z(c)||!j.z(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,n=Math.sqrt(k*k+l*l);if(!gb(n,0)){var q;if(gb(k,0))q=l<0?-Math.PI/2:Math.PI/2;else{q=Math.atan(l/Math.abs(k));k<0&&(q=Math.PI-q)}var j=c.x,p=c.y,k=e.x-j,u=e.y-p,l=Math.sqrt(k*k+u*u);if(gb(k,0))u=u<0?-Math.PI/2:Math.PI/2;else{u=Math.atan(u/Math.abs(k));k<0&&(u=Math.PI-u)}n=l/n;q=u-q;a.A(b,c);for(b=b+1;b<d;b++){c=a.i(b);k=c.x-g;l=
c.y-i;c=Math.sqrt(k*k+l*l);if(!gb(c,0)){if(gb(k,0))l=l<0?-Math.PI/2:Math.PI/2;else{l=Math.atan(l/Math.abs(k));k<0&&(l=Math.PI-l)}k=l+q;c=c*n;a.A(b,new D(j+c*Math.cos(k),p+c*Math.sin(k)))}}a.A(d,e)}}return h;case Rj:i=a.i(b);p=a.i(d);if(!i.z(c)||!p.z(e)){g=i.x;i=i.y;j=p.x;p=p.y;n=(j-g)*(j-g)+(p-i)*(p-i);k=c.x;q=c.y;var l=e.x,u=e.y,w=0,B=1,w=l-k!==0?(u-q)/(l-k):9E9;w!==0&&(B=Math.sqrt(1+1/(w*w)));a.A(b,c);for(b=b+1;b<d;b++){var c=a.i(b),F=c.x,H=c.y,x=0.5;n!==0&&(x=((g-F)*(g-j)+(i-H)*(i-p))/n);var I=
g+x*(j-g),y=i+x*(p-i),c=Math.sqrt((F-I)*(F-I)+(H-y)*(H-y));H<w*(F-I)+y&&(c=-c);w>0&&(c=-c);F=k+x*(l-k);x=q+x*(u-q);if(w!==0){c=F+c/B;a.A(b,new D(c,x-(c-F)/w))}else a.A(b,new D(F,x+c))}a.A(d,e)}return h;case Pj:if(Jg(a)){g=a.i(b+1);i=a.i(b+2);gb(g.x,i.x)&&!gb(g.y,i.y)?a.A(b+1,new D(g.x,c.y)):gb(g.y,i.y)&&a.A(b+1,new D(c.x,g.y));g=a.i(d-1);i=a.i(d-2);gb(g.x,i.x)&&!gb(g.y,i.y)?a.A(d-1,new D(g.x,e.y)):gb(g.y,i.y)&&a.A(d-1,new D(e.x,g.y))}a.A(b,c);a.A(d,e);return h;default:return o}}
function dm(a,b,c){return!isNaN(a.tu)||a.Hd!==0&&!Jg(a)?(b+c)/2+Yl(a):(b+c)/2}
function cm(a,b,c,d,e,g){var i=b.pl,j=b.ol,k=bm(b,c,d),l=c,n=d;for(e===0?l=l+i:e===90?n=n+j:e===180?l=l-i:n=n-j;k>lm&&bm(b,l,n)===k-mm;){c=l;d=n;e===0?l=l+i:e===90?n=n+j:e===180?l=l-i:n=n-j;k=k-mm}if(g){if(k>lm)if(e===180||e===0)c=Math.floor(c/i)*i+i/2;else if(e===90||e===270)d=Math.floor(d/j)*j+j/2}else{c=Math.floor(c/i)*i+i/2;d=Math.floor(d/j)*j+j/2}if(k>lm){g=e;l=c;n=d;if(e===0){g=90;n=n+j}else if(e===90){g=180;l=l-i}else if(e===180){g=270;n=n-j}else if(e===270){g=0;l=l+i}if(bm(b,l,n)===k-mm)cm(a,
b,l,n,g,o);else{l=c;n=d;if(e===0){g=270;n=n-j}else if(e===90){g=0;l=l+i}else if(e===180){g=90;n=n+j}else if(e===270){g=180;l=l-i}bm(b,l,n)===k-mm&&cm(a,b,l,n,g,o)}}a.cd(new D(c,d))}W.prototype.findClosestSegment=W.prototype.HI=function(a){s&&t.c(a,D,W,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.i(0),d=this.i(1),e=nb(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.ca-1;i++){var c=this.i(i+1),j=nb(b,a,d.x,d.y,c.x,c.y),d=c;if(j<e){g=i;e=j}}return g};W.prototype.cf=function(){this.ec=this.za=m;this.N()};
t.m(W,{yr:"geometry"},function(){if(this.za===m){Pl(this);this.za=nm(this)}return this.za});function oi(a){if(a.za===m&&a.jl!==o){a.za=nm(a);var b=a.fp();if(b!==m){b.za=a.za;for(var c=a.sa,d=c.length,e=0;e<d;e++){var g=c.j[e];if(g!==b&&g.Zi&&g instanceof X)g.za=a.za}}}}
function nm(a){var b=a.ca;if(b<2){var a=new Fd(Id),c=new Jd(0,0);a.vc.add(c);return a}var d,e=a.i(0).copy(),g=new D(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=Ql(a);if(i===Mj&&b>=3&&!fb(a.ds,0))if(b===3){var j=a.i(2).copy(),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y)}else{if(Jg(a))for(j=0;j<b;j++){c=a.Ec.j[j];g.x=Math.min(c.x,g.x);g.y=Math.min(c.y,g.y)}else for(var k,j=3;j<b;j=j+3){j+3>=b&&(j=b-1);k=a.i(j);g.x=Math.min(k.x,g.x);g.y=Math.min(k.y,g.y)}c=g.x;d=g.y}else{for(j=0;j<
b;j++){c=a.Ec.j[j];g.x=Math.min(c.x,g.x);g.y=Math.min(c.y,g.y)}c=g.x;d=g.y}c=c-a.Zt.x;d=d-a.Zt.y;e.x=e.x-c;e.y=e.y-d;if(b===2){var l=a.i(1).copy();l.x=l.x-c;l.y=l.y-d;im(a)!==0&&om(a,e,h,g);jm(a)!==0&&om(a,l,o,g);a=new Fd(Ld);a.Ra=e.x;a.Sa=e.y;a.ea=l.x;a.fa=l.y;return a}l=new L;im(a)!==0&&om(a,e,h,g);M(l,e.x,e.y,o,o);if(i===Mj&&b>=3&&!fb(a.ds,0))if(b===3){j=a.i(1);b=j.x-c;e=j.y-d;j=a.i(2).copy();j.x=j.x-c;j.y=j.y-d;jm(a)!==0&&om(a,j,o,g);N(l,b,e,b,e,j.x,j.y)}else if(Jg(a)){e=new D(c,d);i=a.i(1).copy();
k=new D(c,d);for(var b=new D(c,d),g=a.i(0),n=m,q=a.ds/3,j=1;j<a.ca-1;j++){var n=a.i(j),p=g,u=n,w=a.i(pm(a,n,j,o));if(!fb(p.x,u.x)||!fb(u.x,w.x))if(!fb(p.y,u.y)||!fb(u.y,w.y)){var B=q,F=k,H=b;isNaN(B)&&(B=a.ds/3);var x=p.x,p=p.y,I=u.x,u=u.y,y=w.x,w=w.y,G=B*qm(x,p,I,u),B=B*qm(I,u,y,w);if(fb(p,u)&&fb(I,y))if(I>x)if(w>u){F.x=I-G;F.y=u-G;H.x=I+B;H.y=u+B}else{F.x=I-G;F.y=u+G;H.x=I+B;H.y=u-B}else if(w>u){F.x=I+G;F.y=u-G;H.x=I-B;H.y=u+B}else{F.x=I+G;F.y=u+G;H.x=I-B;H.y=u-B}if(fb(x,I)&&fb(u,w))if(u>p){if(y>
I){F.x=I-G;F.y=u-G;H.x=I+B}else{F.x=I+G;F.y=u-G;H.x=I-B}H.y=u+B}else{if(y>I){F.x=I-G;F.y=u+G;H.x=I+B}else{F.x=I+G;F.y=u+G;H.x=I-B}H.y=u-B}if(fb(x,I)&&fb(I,y)||fb(p,u)&&fb(u,w)){x=0.5*(x+y);p=0.5*(p+w);F.x=x;F.y=p;H.x=x;H.y=p}if(j===1){i.x=(g.x+n.x)*0.5;i.y=(g.y+n.y)*0.5}else if(j===2&&fb(g.x,a.i(0).x)&&fb(g.y,a.i(0).y)){i.x=(g.x+n.x)*0.5;i.y=(g.y+n.y)*0.5}N(l,i.x-c,i.y-d,k.x-c,k.y-d,n.x-c,n.y-d);e.set(k);i.set(b);g=n}}j=g.x;g=g.y;a=a.i(a.ca-1);j=0.5*(j+a.x);g=0.5*(g+a.y);N(l,b.x-c,b.y-d,j-c,g-d,a.x-
c,a.y-d)}else for(j=3;j<b;j=j+3){g=a.i(j-2);j+3>=b&&(j=b-1);e=a.i(j-1);k=a.i(j);if(j===b-1&&jm(a)!==0){k=k.copy();om(a,k,o,Jc)}N(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d)}else{n=a.i(0);for(j=1;j<b;){j=pm(a,n,j,j>1);q=a.i(j);if(j>=b-1){if(n!==q){if(jm(a)!==0){q=q.copy();om(a,q,o,Jc)}rm(a,l,-c,-d,n,q)}break}j=pm(a,q,j+1,j<b-3);g=a;e=l;i=-c;k=-d;F=a.i(j);if(gb(n.y,q.y)&&gb(q.x,F.x)){H=km(g);H=Math.min(H,Math.abs(q.x-n.x)/2);H=x=Math.min(H,Math.abs(F.y-q.y)/2);if(gb(H,0)){rm(g,e,i,k,n,q);n=q}else{p=q.x;
B=q.y;I=p;u=B;p=q.x>n.x?q.x-H:q.x+H;u=F.y>q.y?q.y+x:q.y-x;rm(g,e,i,k,n,new D(p,B));Zd(e,q.x+i,q.y+k,I+i,u+k);n=new D(I,u)}}else if(gb(n.x,q.x)&&gb(q.y,F.y)){H=km(g);x=Math.min(H,Math.abs(q.y-n.y)/2);x=H=Math.min(x,Math.abs(F.x-q.x)/2);if(gb(H,0)){rm(g,e,i,k,n,q);n=q}else{p=q.x;u=B=q.y;B=q.y>n.y?q.y-x:q.y+x;I=F.x>q.x?q.x+H:q.x-H;rm(g,e,i,k,n,new D(p,B));Zd(e,q.x+i,q.y+k,I+i,u+k);n=new D(I,u)}}else{rm(g,e,i,k,n,q);n=q}}}return l.k}
function qm(a,b,c,d){a=c-a;if(isNaN(a)||a===Infinity||a===-Infinity)return NaN;a<0&&(a=-a);b=d-b;if(isNaN(b)||b===Infinity||b===-Infinity)return NaN;b<0&&(b=-b);return fb(a,0)?b:fb(b,0)?a:Math.sqrt(a*a+b*b)}
function om(a,b,c,d){var e=a.ca;if(!(e<2))if(c){var g=a.i(1),c=g.x-d.x,d=g.y-d.y,g=qm(b.x,b.y,c,d);if(g!==0){e=e===2?g*0.5:g;a=im(a);a>e&&(a=e);c=a*(c-b.x)/g;a=a*(d-b.y)/g;b.x=b.x+c;b.y=b.y+a}}else{g=a.i(e-2);c=g.x-d.x;d=g.y-d.y;g=qm(b.x,b.y,c,d);if(g!==0){e=e===2?g*0.5:g;a=jm(a);a>e&&(a=e);c=a*(b.x-c)/g;a=a*(b.y-d)/g;b.x=b.x-c;b.y=b.y-a}}}
function pm(a,b,c,d){for(var e=a.ca,g=b;fb(b.x,g.x)&&fb(b.y,g.y);){if(c>=e)return e-1;g=a.i(c++)}if(!fb(b.x,g.x)&&!fb(b.y,g.y))return c-1;for(var i=g;fb(b.x,g.x)&&fb(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||fb(b.y,g.y)&&fb(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.i(c++)}return c-2}
function rm(a,b,c,d,e,g){if(sm(a)){var i=new z("number"),j;a:{j=a.b;if(j===m)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.Fn;j.next();){var k=j.value;if(k!==m&&k.visible)for(k=k.cj;k.next();){var l=k.value;if(l===a){i.length>0&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof W&&a.kb()&&l.kb()&&sm(l)&&a.Bj().ie(l.Bj())&&!(a.ia===l.ia||a.ma===l.ma)){var n=l.path;if(n!==m&&n.qk())for(var n=e,q=g,p=i,u=l.ca,w=1;w<u;w++){var B=l.i(w-1),F=
l.i(w),H=new D,x;b:{x=n;var I=q,y=H;if(gb(x.x,I.x)){if(gb(B.y,F.y)&&Math.min(x.y,I.y)<B.y&&Math.max(x.y,I.y)>B.y&&Math.min(B.x,F.x)<x.x&&Math.max(B.x,F.x)>x.x){y.x=x.x;y.y=B.y;x=h;break b}}else if(gb(B.x,F.x)&&Math.min(x.x,I.x)<B.x&&Math.max(x.x,I.x)>B.x&&Math.min(B.y,F.y)<x.y&&Math.max(B.y,F.y)>x.y){y.x=B.x;y.y=x.y;x=h;break b}y.x=0;y.y=0;x=o}x&&(gb(n.y,q.y)?p.add(H.x):p.add(H.y))}}}}i.length>0&&i.sort(function(a,b){return a-b});j=i.length}}n=e.x;n=e.y;if(j>0)if(gb(e.y,g.y))if(e.x<g.x)for(k=0;k<
j;){p=Math.max(e.x,Math.min(i.j[k++]-5,g.x-10));b.lineTo(p+c,g.y+d);n=p+c;for(q=Math.min(p+10,g.x);k<j;){l=i.j[k];if(l<q+10){k++;q=Math.min(l+5,g.x)}else break}l=(p+q)/2+c;l=g.y-10+d;p=q+c;q=g.y+d;a.Me===Nj?M(b,p,q,o,o):N(b,n,l,p,l,p,q)}else for(k=j-1;k>=0;){p=Math.min(e.x,Math.max(i.j[k--]+5,g.x+10));b.lineTo(p+c,g.y+d);n=p+c;for(q=Math.max(p-10,g.x);k>=0;){l=i.j[k];if(l>q-10){k--;q=Math.max(l-5,g.x)}else break}l=g.y-10+d;p=q+c;q=g.y+d;a.Me===Nj?M(b,p,q,o,o):N(b,n,l,p,l,p,q)}else if(gb(e.x,g.x))if(e.y<
g.y)for(k=0;k<j;){p=Math.max(e.y,Math.min(i.j[k++]-5,g.y-10));b.lineTo(g.x+c,p+d);n=p+d;for(q=Math.min(p+10,g.y);k<j;){l=i.j[k];if(l<q+10){k++;q=Math.min(l+5,g.y)}else break}l=g.x-10+c;p=g.x+c;q=q+d;a.Me===Nj?M(b,p,q,o,o):N(b,l,n,l,q,p,q)}else for(k=j-1;k>=0;){p=Math.min(e.y,Math.max(i.j[k--]+5,g.y+10));b.lineTo(g.x+c,p+d);n=p+d;for(q=Math.max(p-10,g.y);k>=0;){l=i.j[k];if(l>q-10){k--;q=Math.max(l-5,g.y)}else break}l=g.x-10+c;p=g.x+c;q=q+d;a.Me===Nj?M(b,p,q,o,o):N(b,l,n,l,q,p,q)}}b.lineTo(g.x+c,g.y+
d)}t.m(W,{Fu:"firstPickIndex"},function(){return this.ca<=2?0:Jg(this)||Vl(this)!==Yb?1:0});t.m(W,{ty:"lastPickIndex"},function(){var a=this.ca;return a===0?0:a<=2?a-1:Jg(this)||Wl(this)!==Yb?a-2:a-1});function sm(a){a=a.Me;return a===Oj||a===Nj}function Ul(a,b){if(b||sm(a)){var c=a.b;c!==m&&(!c.jm.contains(a)&&a.Tw!==m)&&c.jm.add(a,a.Tw)}}
function tg(a,b){var c=a.xa;if(!(c===m||!c.visible||c.ed)){var d=c.b;if(d!==m)for(var e=o,d=d.Fn;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=o,g=g.cj;g.next();){var j=g.value;j instanceof W&&(j===a?i=h:i&&tm(a,j,b))}else if(e)for(g=g.cj;g.next();){j=g.value;j instanceof W&&tm(a,j,b)}}}}function tm(a,b,c){if(b!==m&&sm(b)&&b.za!==m&&(a.Bj().ie(b.Bj())||c.ie(b.Bj())))a.ia===b.ia||a.ma===b.ma||b.cf()}t.a(W,"adjusting",W.prototype.hu);
t.defineProperty(W,{hu:"adjusting"},r("qo"),function(a){var b=this.qo;if(b!==a){s&&t.Va(a,W,W,"adjusting");this.qo=a;this.d("adjusting",b,a)}});t.a(W,"corner",W.prototype.rB);t.defineProperty(W,{rB:"corner"},r("Do"),function(a){var b=this.Do;if(b!==a){s&&t.e(a,"number",W,"corner");this.Do=a;this.cf();this.d("corner",b,a)}});t.a(W,"curve",W.prototype.Me);
t.defineProperty(W,{Me:"curve"},r("Fo"),function(a){var b=this.Fo;if(b!==a){s&&t.Va(a,W,W,"curve");this.Fo=a;Sf(this);Ul(this,b===Nj||b===Oj||a===Nj||a===Oj);this.d("curve",b,a)}});t.a(W,"curviness",W.prototype.tu);t.defineProperty(W,{tu:"curviness"},r("Go"),function(a){var b=this.Go;if(b!==a){s&&t.e(a,"number",W,"curviness");this.Go=a;Sf(this);this.d("curviness",b,a)}});t.a(W,"routing",W.prototype.Xe);
t.defineProperty(W,{Xe:"routing"},r("Ei"),function(a){var b=this.Ei;if(b!==a){s&&t.Va(a,W,W,"routing");this.Ei=a;this.Ah=m;Sf(this);Ul(this,b===th||b===Rf||a===th||a===Rf);this.d("routing",b,a)}});t.a(W,"smoothness",W.prototype.ds);t.defineProperty(W,{ds:"smoothness"},r("Hq"),function(a){var b=this.Hq;if(b!==a){s&&t.e(a,"number",W,"smoothness");this.Hq=a;this.cf();this.d("smoothness",b,a)}});
function Ol(a){var b=a.Dg;if(b!==m){var c=a.Ug;if(c!==m){var d=a.si,a=a.Ii,e;a:{if(!(c===m||b.xg===m))for(e=b.xg.f;e.next();){var g=e.value;if(g.Rn===b&&g.Sr===c&&g.Tu===d&&g.Uu===a||g.Rn===c&&g.Sr===b&&g.Tu===a&&g.Uu===d){e=g;break a}}e=m}for(var i=g=m,j=b.ud.j,k=j.length,l=0;l<k;l++){var n=j[l];if(n.Dg===b&&n.si===d&&n.Ug===c&&n.Ii===a||n.Dg===c&&n.si===a&&n.Ug===b&&n.Ii===d)if(i===m)i=n;else{if(g===m){g=new z(W);g.add(i)}g.add(n)}}if(g!==m){if(e===m){e=new Al;e.Rn=b;e.Tu=d;e.Sr=c;e.Uu=a;zl(b,e);
zl(c,e)}e.links=g;for(l=0;l<g.count;l++){n=g.j[l];if(n.Hd===0){b=1;for(c=0;c<g.count;c++)if(Math.abs(g.j[c].Hd)===b){b++;c=-1}n.Ik=e;n.Hd=n.ia===e.Rn?b:-b;Sf(n)}}}}}}
function Nl(a){var b=a.Ik;if(b!==m){var c=a.Hd;a.Ik=m;a.Hd=0;Sf(a);b.links.remove(a);if(b.links.count<2){if(b.links.count===1){c=b.links.j[0];c.Ik=m;c.Hd=0;Sf(c)}c=b.Rn;b!==m&&c.xg!==m&&c.xg.remove(b);c=b.Sr;b!==m&&c.xg!==m&&c.xg.remove(b)}else{c=Math.abs(c);a=c%2===0;for(b=b.links.f;b.next();){var d=b.value,e=Math.abs(d.Hd),g=e%2===0;if(e>c&&a===g){d.Hd=d.Hd>0?d.Hd-2:d.Hd+2;Sf(d)}}}}}function Al(){t.Lb(this);this.links=this.Uu=this.Sr=this.Tu=this.Rn=m;this.fj=10}
t.sf(Al,{Rn:h,Tu:h,Sr:h,Uu:h,links:h,fj:h});function Di(){t.Lb(this);this.group=m;this.Dl=h;this.abort=o;this.ag=this.$f=1;this.kt=this.jt=-1;this.Uc=this.hd=8;this.Db=m;this.SD=o;this.uD=22;this.tC=111}t.sf(Di,{group:h,Dl:h,abort:h,SD:h,uD:h,tC:h});var na=0,lm=1,mm=1,pa=999999999,um=pa;
function Ei(a,b){if(!(b.width<=0||b.height<=0)){var c=b.y,d=b.x+b.width,e=b.y+b.height;a.$f=Math.floor((b.x-a.hd)/a.hd)*a.hd;a.ag=Math.floor((c-a.Uc)/a.Uc)*a.Uc;a.jt=Math.ceil((d+2*a.hd)/a.hd)*a.hd;a.kt=Math.ceil((e+2*a.Uc)/a.Uc)*a.Uc;c=1+(Math.ceil((a.jt-a.$f)/a.hd)|0);d=1+(Math.ceil((a.kt-a.ag)/a.Uc)|0);if(a.Db===m||a.Vm<c-1||a.Wm<d-1){for(var e=[],g=0;g<=c;g++){for(var i=[],j=0;j<=d;j++)i[j]=0;e[g]=i}a.Db=e;a.Vm=c-1;a.Wm=d-1}if(a.Db!==m)for(c=0;c<=a.Vm;c++)for(d=0;d<=a.Wm;d++)a.Db[c][d]=um}}
t.m(Di,{mb:m},function(){return new E(this.$f,this.ag,this.jt-this.$f,this.kt-this.ag)});t.a(Di,"cellWidth",Di.prototype.pl);t.defineProperty(Di,{pl:m},r("hd"),function(a){if(a>0&&a!==this.hd){this.hd=a;Ei(this,this.mb)}});t.a(Di,"cellHeight",Di.prototype.ol);t.defineProperty(Di,{ol:m},r("Uc"),function(a){if(a>0&&a!==this.Uc){this.Uc=a;Ei(this,this.mb)}});function vm(a,b,c){return a.$f<=b&&b<=a.jt&&a.ag<=c&&c<=a.kt}
function bm(a,b,c){if(!vm(a,b,c))return 0;b=b-a.$f;b=b/a.hd;c=c-a.ag;c=c/a.Uc;return a.Db[b|0][c|0]}function Hi(a,b,c){if(vm(a,b,c)){b=b-a.$f;b=b/a.hd;c=c-a.ag;c=c/a.Uc;a.Db[b|0][c|0]=na}}function Gi(a){if(a.Db!==m)for(var b=0;b<=a.Vm;b++)for(var c=0;c<=a.Wm;c++)a.Db[b][c]>=lm&&(a.Db[b][c]=a.Db[b][c]|pa)}
function wm(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,n;l=b|0;n=c|0;var q=a.Db[l][n];if(q>=lm&&q<pa){e?n=n+d:l=l+d;for(q=q+mm;g<=l&&l<=i&&j<=n&&n<=k;){if(q>=a.Db[l][n])break;a.Db[l][n]=q;q=q+mm;e?n=n+d:l=l+d}}l=e?n:l;if(e)if(d>0)for(c=c+d;c<l;c=c+d){wm(a,b,c,1,!e,g,i,j,k);wm(a,b,c,-1,!e,g,i,j,k)}else for(c=c+d;c>l;c=c+d){wm(a,b,c,1,!e,g,i,j,k);wm(a,b,c,-1,!e,g,i,j,k)}else if(d>0)for(b=b+d;b<l;b=b+d){wm(a,b,c,1,!e,g,i,j,k);wm(a,b,c,-1,!e,g,i,j,k)}else for(b=b+d;b>l;b=b+d){wm(a,b,c,1,!e,g,
i,j,k);wm(a,b,c,-1,!e,g,i,j,k)}}}function xm(a,b,c,d,e,g,i,j,k,l,n){for(var q=b|0,p=c|0,u=a.Db[q][p];u===0&&q>j&&q<k&&p>l&&p<n;){i?p=p+g:q=q+g;u=a.Db[q][p];if(Math.abs(q-d)<=1&&Math.abs(p-e)<=1){a.abort=h;return 0}}q=b|0;p=c|0;u=a.Db[q][p];b=lm;for(a.Db[q][p]=b;u===0&&q>j&&q<k&&p>l&&p<n;){i?p=p+g:q=q+g;u=a.Db[q][p];a.Db[q][p]=b;b=b+mm}return i?p:q}
function am(a,b,c,d,e,g){if(a.Db!==m){a.abort=o;var i=b.x,j=b.y;if(vm(a,i,j)){var i=i-a.$f,i=i/a.hd,j=j-a.ag,j=j/a.Uc,k=d.x,l=d.y;if(vm(a,k,l)){k=k-a.$f;k=k/a.hd;l=l-a.ag;l=l/a.Uc;if(Math.abs(i-k)<=1&&Math.abs(j-l)<=1)a.abort=h;else{var n=g.x,b=g.y,d=g.x+g.width,q=g.y+g.height,n=n-a.$f,n=n/a.hd,b=b-a.ag,b=b/a.Uc,d=d-a.$f,d=d/a.hd,q=q-a.ag,q=q/a.Uc,g=Math.max(0,Math.min(a.Vm,n|0)),d=Math.min(a.Vm,Math.max(0,d|0)),b=Math.max(0,Math.min(a.Wm,b|0)),q=Math.min(a.Wm,Math.max(0,q|0)),i=i|0,j=j|0,k=k|0,l=
l|0,n=i,p=j,u=c===0||c===90?1:-1;(c=c===90||c===270)?p=xm(a,i,j,k,l,u,c,g,d,b,q):n=xm(a,i,j,k,l,u,c,g,d,b,q);if(!a.abort){a:{for(var c=e===0||e===90?1:-1,e=e===90||e===270,u=k|0,w=l|0,B=a.Db[u][w];B===0&&u>g&&u<d&&w>b&&w<q;){e?w=w+c:u=u+c;B=a.Db[u][w];if(Math.abs(u-i)<=1&&Math.abs(w-j)<=1){a.abort=h;break a}}u=k|0;w=l|0;B=a.Db[u][w];for(a.Db[u][w]=um;B===0&&u>g&&u<d&&w>b&&w<q;){e?w=w+c:u=u+c;B=a.Db[u][w];a.Db[u][w]=um}}if(!a.abort){wm(a,n,p,1,o,g,d,b,q);wm(a,n,p,-1,o,g,d,b,q);wm(a,n,p,1,h,g,d,b,q);
wm(a,n,p,-1,h,g,d,b,q)}}}}}}}function gm(){t.Lb(this);this.Af=this.port=this.kh=m;this.Rr=o}t.sf(gm,{kh:h,port:h,Af:h,Rr:h});gm.prototype.toString=function(){for(var a=this.Af,b=this.kh.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==m&&(b=b+("\n  "+d.toString()))}return b};
function ym(a,b,c,d){b=b.offsetY;switch(b){case t.Ic:return 90;case t.yc:return 180;case t.Tc:return 270;case t.Jc:return 0}switch(b){case t.Ic|t.Tc:return c>180?270:90;case t.yc|t.Jc:return c>90&&c<=270?180:0}a=Math.atan2(a.height,a.width)*180/Math.PI;switch(b){case t.yc|t.Tc:return c>a&&c<=180+a?180:270;case t.Tc|t.Jc:return c>180-a&&c<=360-a?270:0;case t.Jc|t.Ic:return c>a&&c<=180+a?90:0;case t.Ic|t.yc:return c>180-a&&c<=360-a?180:90;case t.yc|t.Tc|t.Jc:return c>90&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case t.Tc|t.Jc|t.Ic:return c>180&&c<=360-a?270:c>a&&c<=180?90:0;case t.Jc|t.Ic|t.yc:return c>a&&c<=180-a?90:c>180-a&&c<=270?180:0;case t.Ic|t.yc|t.Tc:return c>180-a&&c<=180+a?180:c>180+a?270:90}if(d&&b!==(t.yc|t.Tc|t.Jc|t.Ic)){c=c-15;c<0&&(c=c+360)}return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function hm(a,b){var c=a.Af;if(c===m){if(!a.Rr){c=a.Rr;a.Rr=h;var d=a.kh.le;a.Af=[];for(var e=0,g=new E(a.port.zb(dc),a.port.zb(qc)),d=d.f;d.next();){var i=d.value;if(i.kb()){var j=Yb,j=i.Fc===a.port?Vl(i,a.port):Wl(i,a.port);if(Vb(j)){var k;k=i.Fc===a.port?i.rd:i.Fc;if(k!==m&&k.ba!==m){var l=k.zb(mc);k=k.md;k=k!==m?hm(k,i):m;if(k!==m)l=k.Kn;k=g.mu.Zh(l);var j=ym(g,j,k,Jg(i)),n;if(j===0){n=t.Jc;k>180&&(k=k-360)}else n=j===90?t.Ic:j===180?t.yc:t.Tc;if(j=a.Af[e]){j.link=i;j.Qa=k;j.Gd=n}else{j=new zm(i,
k,n);a.Af[e]=j}j.Su.set(l);e++}}}}a.Af.sort(gm.prototype.qG);g=a.Af.length;d=-1;for(e=i=0;e<g;e++){j=a.Af[e];if(j!==m){if(j.Gd!==d){d=j.Gd;i=0}j.Bl=i;i++}}d=-1;i=0;for(e=g-1;e>=0;e--){j=a.Af[e];if(j!==m){if(j.Gd!==d){d=j.Gd;i=j.Bl+1}j.mr=i}}e=a.Af;for(g=0;g<e.length;g++){d=e[g];if(d!==m){l=d;j=a.port;i=d=f;switch(l.Gd){case t.Ic:d=j.zb(qc);i=j.zb(nc);break;case t.yc:d=j.zb(nc);i=j.zb(dc);break;case t.Tc:d=j.zb(dc);i=j.zb(fc);break;default:case t.Jc:d=j.zb(fc);i=j.zb(qc)}j=i.y-d.y;k=(l.Bl+1)/(l.mr+
1);l=l.Kn;l.x=d.x+(i.x-d.x)*k;l.y=d.y+j*k}}e=a.Af;for(g=0;g<e.length;g++){i=e[g];if(i!==m){d=i;k=i;n=k.link;i=Zl(n,a.port,Yb,n.Fc===a.port);l=k.Bl;if(!(l<0)){j=k.mr;if(!(j<=1)&&Jg(n)){n=k.Su;var q=k.Kn;if(k.Gd===t.yc||k.Gd===t.Ic)l=j-1-l;i=((k=k.Gd===t.yc||k.Gd===t.Jc)?n.y<q.y:n.x<q.x)?i+l*8:(k?n.y===q.y:n.x===q.x)?i:i+(j-1-l)*8}}d.zu=i}}a.Rr=c}c=a.Af}for(e=0;e<c.length;e++){g=c[e];if(g!==m&&g.link===b)return g}return m}
gm.prototype.qG=function(a,b){return a===b?0:a===m?-1:b===m?1:a.Gd<b.Gd?-1:a.Gd>b.Gd?1:a.Qa<b.Qa?-1:a.Qa>b.Qa?1:0};function zm(a,b,c){this.link=a;this.Qa=b;this.Gd=c;this.Su=new D;this.Bl=this.mr=this.Bl=0;this.Kn=new D;this.zu=0}t.sf(zm,{link:h,Qa:h,Gd:h,Su:h,Bl:h,mr:h,Kn:h,zu:h});zm.prototype.toString=function(){return this.link.toString()+" "+this.Qa.toString()+" "+this.Gd.toString()+":"+this.Bl.toString()+"/"+this.mr.toString()+" "+this.Kn.toString()+" "+this.zu.toString()+" "+this.Su.toString()};
function V(a){arguments.length===0?U.call(this,Tg):U.call(this,a);this.Pp=new ta(T);this.bl=new ta(V);this.Rj=this.Qp=this.Op=m;this.Wq=o;this.vp=h;this.Zq=o;this.bb=this.Mq=m;this.Ao=o;this.Zc=new Ih;this.Zc.group=this}t.J("Group",V);t.ua(V,U);ea=V.prototype;
ea.jb=function(a){U.prototype.jb.call(this,a);a.Op=this.Op;a.Qp=this.Qp;a.Rj=this.Rj;a.Wq=this.Wq;a.vp=this.vp;a.Zq=this.Zq;a.Mq=this.Mq;var b=Dk(a,a,function(a){return a instanceof Ng});a.bb=b instanceof Ng?b:m;a.Ao=this.Ao;if(this.Zc!==m){a.Zc=this.Zc.copy();if(a instanceof V)a.Zc.group=a}else{if(a.Zc!==m)a.Zc.group=m;a.Zc=m}};
ea.dh=function(a){U.prototype.dh.call(this,a);for(var b=a.Eu(),a=a.lc;a.next();){var c=a.value;c.N();c.v(oj);c.ah();if(c instanceof V){c.lv=c.je;Am(c,b)}if(c instanceof U)c.vf(b);else if(c instanceof W)for(c=c.hi;c.next();)c.value.vf(b)}};
ea.Jl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")if(e instanceof Ng)this.bb===m?this.bb=e:this.bb!==e&&t.g("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof v){var j=Dk(e,e,function(a){return a instanceof Ng});if(j instanceof Ng)this.bb===m?this.bb=j:this.bb!==j&&t.g("Cannot insert a second Placeholder into the visual tree of a Group.")}}else if(a===we&&b==="elements")if(d===this.bb)this.bb=m;else if(d instanceof v&&this.bb.gi(d))this.bb=m;U.prototype.Jl.call(this,
a,b,c,d,e,g,i)};ea.Li=function(a,b,c,d){this.xi=this.bb;v.prototype.Li.call(this,a,b,c,d);if(this.bb!==m){a=this.bb.Hm;this.location=new D(a.x,a.y)}};ea.pk=function(){if(!U.prototype.pk.call(this))return o;for(var a=this.lc;a.next();){var b=a.value;if(b instanceof U){if(b.kb()&&b.Lc)return o}else if(b instanceof W&&b.kb()&&b.Lc&&b.ia!==this&&b.ma!==this)return o}return h};t.m(V,{placeholder:"placeholder"},r("bb"));t.a(V,"computesBoundsAfterDrag",V.prototype.Ox);
t.defineProperty(V,{Ox:"computesBoundsAfterDrag"},r("Ao"),function(a){var b=this.Ao;if(b!==a){t.e(a,"boolean",V,"computesBoundsAfterDrag");this.Ao=a;this.d("computesBoundsAfterDrag",b,a)}});t.m(V,{lc:"memberParts"},function(){return this.Pp.f});function sl(a,b){if(a.Pp.add(b)){b instanceof V&&a.bl.add(b);var c=a.EC;if(c!==m){var d=h,e=a.b;if(e!==m){d=e.Aa;e.Aa=h}c(a,b);if(e!==m)e.Aa=d}}c=a.bb;c===m&&(c=a);c.N()}
function rl(a,b){if(a.Pp.remove(b)){b instanceof V&&a.bl.remove(b);var c=a.FC;if(c!==m){var d=h,e=a.b;if(e!==m){d=e.Aa;e.Aa=h}c(a,b);if(e!==m)e.Aa=d}}c=a.bb;c===m&&(c=a);c.N()}V.prototype.vl=function(){if(this.Pp.count>0){var a=this.b;if(a===m)return;for(var b=this.Pp.copy().f;b.next();)a.remove(b.value)}U.prototype.vl.call(this)};V.prototype.fv=function(){var a=this.xa;a!==m&&a.fv(this)};t.a(V,"layout",V.prototype.wb);
t.defineProperty(V,{wb:"layout"},r("Zc"),function(a){var b=this.Zc;if(b!==a){a!==m&&t.c(a,Ih,V,"layout");if(b!==m){b.b=m;b.group=m}this.Zc=a;if(a!==m){a.b=this.b;a.group=this}this.d("layout",b,a)}});t.a(V,"memberAdded",V.prototype.EC);t.defineProperty(V,{EC:"memberAdded"},r("Op"),function(a){var b=this.Op;if(b!==a){a!==m&&t.e(a,"function",V,"memberAdded");this.Op=a;this.d("memberAdded",b,a)}});t.a(V,"memberRemoved",V.prototype.FC);
t.defineProperty(V,{FC:"memberRemoved"},r("Qp"),function(a){var b=this.Qp;if(b!==a){a!==m&&t.e(a,"function",V,"memberRemoved");this.Qp=a;this.d("memberRemoved",b,a)}});t.a(V,"memberValidation",V.prototype.Lr);t.defineProperty(V,{Lr:"memberValidation"},r("Rj"),function(a){var b=this.Rj;if(b!==a){a!==m&&t.e(a,"function",V,"memberValidation");this.Rj=a;this.d("memberValidation",b,a)}});
V.prototype.canAddMembers=V.prototype.uH=function(a){var b=this.b;if(b===m)return o;b=b.Od;for(a=b.ay(a).f;a.next();)if(!b.ry(this,a.value))return o;return h};V.prototype.addMembers=V.prototype.rH=function(a,b){var c=this.b;if(c===m)return o;for(var c=c.Od,d=h,e=c.ay(a).f;e.next();){var g=e.value;!b||c.ry(this,g)?g.Wa=this:d=o}return d};t.a(V,"ungroupable",V.prototype.OD);
t.defineProperty(V,{OD:"ungroupable"},r("Wq"),function(a){var b=this.Wq;if(b!==a){t.e(a,"boolean",V,"ungroupable");this.Wq=a;this.d("ungroupable",b,a)}});V.prototype.canUngroup=V.prototype.VH=function(){if(!this.OD)return o;var a=this.xa;if(a!==m&&!a.ln)return o;a=a.b;return a!==m&&!a.ln?o:h};V.prototype.findSubGraphParts=V.prototype.Eu=function(){var a=new ta(T);nf(a,this,h,o);a.remove(this);return a};
V.prototype.collapseSubGraph=V.prototype.jr=function(){var a=this.b;if(a!==m&&!a.wf){a.wf=h;var b=this.Eu();Am(this,b);a.wf=o}};function Am(a,b){a.je=o;for(var c=a.lc;c.next();){var d=c.value;d.N();d.v(oj);d.ah();if(d instanceof V){d.lv=d.je;Am(d,b)}if(d instanceof U)d.vf(b);else if(d instanceof W)for(d=d.hi;d.next();)d.value.vf(b)}}V.prototype.expandSubGraph=V.prototype.rr=function(){var a=this.b;if(a!==m&&!a.wf){a.wf=h;var b=this.Eu();Bm(this,b);a.wf=o}};
function Bm(a,b){a.je=h;for(var c=a.lc;c.next();){var d=c.value;d.N();d.v(nj);d.ki();d instanceof V&&d.lv&&Bm(d,b);if(d instanceof U)d.vf(b);else if(d instanceof W)for(d=d.hi;d.next();)d.value.vf(b)}}t.a(V,"isSubGraphExpanded",V.prototype.je);
t.defineProperty(V,{je:"isSubGraphExpanded"},r("vp"),function(a){var b=this.vp;if(b!==a){t.e(a,"boolean",V,"isSubGraphExpanded");this.vp=a;var c=this.b;c!==m&&uh(c);this.d("isSubGraphExpanded",b,a);b=this.zD;if(b!==m){var d=h;if(c!==m){d=c.Aa;c.Aa=h}b(this);if(c!==m)c.Aa=d}c!==m&&c.ha.eb||(a?this.rr():this.jr())}});t.a(V,"wasSubGraphExpanded",V.prototype.lv);
t.defineProperty(V,{lv:"wasSubGraphExpanded"},r("Zq"),function(a){var b=this.Zq;if(b!==a){t.e(a,"boolean",V,"wasSubGraphExpanded");this.Zq=a;this.d("wasSubGraphExpanded",b,a)}});t.a(V,"subGraphExpandedChanged",V.prototype.zD);t.defineProperty(V,{zD:"subGraphExpandedChanged"},r("Mq"),function(a){var b=this.Mq;if(b!==a){a!==m&&t.e(a,"function",V,"subGraphExpandedChanged");this.Mq=a;this.d("subGraphExpandedChanged",b,a)}});
V.prototype.move=V.prototype.move=function(a){var b=this.position,c=a.x-b.x,b=a.y-b.y;U.prototype.move.call(this,a);for(a=this.Eu().f;a.next();){var d=a.value,e=d.position;U.prototype.move.call(d,new D(e.x+c,e.y+b))}};function Ng(){Q.call(this);this.Id=(new Eb(0)).freeze();this.Hm=new E(NaN,NaN,NaN,NaN)}t.J("Placeholder",Ng);t.ua(Ng,Q);Ng.prototype.jb=function(a){Q.prototype.jb.call(this,a);a.Id=this.Id.D();a.Hm=this.Hm.copy()};
Ng.prototype.Ni=function(a){if(this.background===m&&this.Zg===m)return o;var b=this.ja;return Jb(0,0,b.width,b.height,a.x,a.y)};
Ng.prototype.Kr=function(){var a=this.ba;(a===m||!(a instanceof V)&&!(a instanceof of))&&t.g("Placeholder is not inside a Group or Adornment.");if(a instanceof V){var b;a:{b=this.ba;if(b instanceof V&&b.Ox&&this.Hm.aa()){var c=b.b;if(c!==m){c=c.va;if(c instanceof yf&&!c.So&&c.Pb!==m&&!c.Pb.contains(b)){b=this.Hm;break a}}}b=this.ba;if(b instanceof V){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.lc;i.next();){var j=i.value;if(j.kb()){if(j instanceof W){if(j.cc)continue;if(j.ia===b||j.ma===b)continue}j=
j.ta;if(j.left<c)c=j.left;if(j.top<d)d=j.top;if(j.right>e)e=j.right;if(j.bottom>g)g=j.bottom}}if(!isFinite(c)||!isFinite(d)){b=b.location;c=this.padding;b=new E(b.x+c.left,b.y+c.top,0,0)}else b=new E(c,d,e-c,g-d)}else b=new E;c=this.padding;b=new E(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.Hm=b;c=this.Nc;rb(c,b.width||0,b.height||0);Yi(this,0,0,c.width,c.height);c=a.lc;for(d=o;c.next();)if(c.value.kb()){d=h;break}if(d&&!isNaN(b.x)&&!isNaN(b.y))a.location=new D(b.x,
b.y)}else{b=this.pa;c=this.Nc;rb(c,b.width||0,b.height||0);Yi(this,0,0,c.width,c.height)}};Ng.prototype.Li=function(a,b,c,d){var e=this.ta;e.x=a;e.y=b;e.width=c;e.height=d};t.a(Ng,"padding",Ng.prototype.padding);t.defineProperty(Ng,{padding:"padding"},r("Id"),function(a){typeof a==="number"?a=new Eb(a):t.c(a,Eb,v,"padding");var b=this.Id;if(!b.z(a)){this.Id=a=a.D();this.d("padding",b,a)}});
function Ih(){t.Lb(this);this.rw=this.O=m;this.Xs=this.sp=h;this.zp=this.yp=o;this.so=(new D(0,0)).freeze();this.p=m}t.J("Layout",Ih);Ih.prototype.cloneProtected=Ih.prototype.jb=function(a){a.sp=this.sp;a.Xs=this.Xs;a.zp=this.zp;a.so=this.so.D()};Ih.prototype.copy=Ih.prototype.copy=function(){var a=new this.constructor;this.jb(a);return a};
Ih.prototype.toString=function(){var a=t.Vi(Object.getPrototypeOf(this)),a=a+"(";this.group!==m&&(a=a+(" in "+this.group));this.b!==m&&(a=a+(" for "+this.b));return a+")"};t.a(Ih,"diagram",Ih.prototype.b);t.defineProperty(Ih,{b:"diagram"},r("O"),function(a){if(this.O!==a){a!==m&&t.c(a,A,Ih,"diagram");this.O=a}});t.a(Ih,"group",Ih.prototype.group);t.defineProperty(Ih,{group:"group"},r("rw"),function(a){if(this.rw!==a){a!==m&&t.c(a,V,Ih,"group");this.rw=a}});t.a(Ih,"isOngoing",Ih.prototype.qC);
t.defineProperty(Ih,{qC:"isOngoing"},r("sp"),function(a){if(this.sp!==a){t.e(a,"boolean",Ih,"isOngoing");this.sp=a}});t.a(Ih,"isInitial",Ih.prototype.pC);t.defineProperty(Ih,{pC:"isInitial"},r("Xs"),function(a){t.e(a,"boolean",Ih,"isInitial");this.Xs=a;if(!a)this.yp=h});t.a(Ih,"isValidLayout",Ih.prototype.Re);t.defineProperty(Ih,{Re:"isValidLayout"},r("yp"),function(a){if(this.yp!==a){this.yp=a;if(!a){a=this.b;if(a!==m)a.rs=h}}});
Ih.prototype.invalidateLayout=Ih.prototype.v=function(){if(this.yp){var a=this.b;if(a!==m&&!a.ha.eb&&(this.qC&&a.Hg||this.pC&&!a.Hg)){this.Re=o;a.Xq=h;sf(a)}}};t.a(Ih,"isViewportSized",Ih.prototype.Pu);t.defineProperty(Ih,{Pu:"isViewportSized"},r("zp"),function(a){if(this.zp!==a)(this.zp=a)&&this.v()});t.a(Ih,"network",Ih.prototype.Hc);t.defineProperty(Ih,{Hc:"network"},r("p"),function(a){var b=this.p;if(b!==a){a!==m&&t.c(a,Cm,Ih,"network");b!==m&&Dm(b,m);this.p=a;a!==m&&Dm(a,this)}});
Ih.prototype.createNetwork=Ih.prototype.su=function(){var a=new Cm;Dm(a,this);return a};Ih.prototype.makeNetwork=Ih.prototype.jG=function(a){var b=this.createNetwork();if(a instanceof A){b.dr(a.sk,h);b.dr(a.links,h)}else a instanceof V?b.dr(a.lc):a.f&&b.dr(a.f);return b};Ih.prototype.updateParts=Ih.prototype.DK=function(){var a=this.b;if(a===m&&this.p!==m)for(var b=this.p.R.f;b.next();){var c=b.value.Ca;if(c!==m){a=c.b;if(a!==m)break}}a!==m&&a.Kb("Layout");this.commitLayout();a!==m&&a.Pd("Layout")};
Ih.prototype.commitLayout=Ih.prototype.ou=aa();
Ih.prototype.doLayout=Ih.prototype.or=function(a){a===m&&t.g("Layout.doLayout(collection) argument must not be null");var b=new ta(T);if(a===this.b){Em(this,b,a.sk,h,this.Dy,h,o,h);Em(this,b,a.cj,h,this.Dy,h,o,h)}else a===this.group&&Em(this,b,a.lc,o,this.Dy,h,o,h);var c=b.count;if(c>0){a=this.b;a!==m&&a.Kb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Qc.x,e=d,g=this.Qc.y,i=0,j=0,b=b.f;b.next();){var k=b.value;k.ci();var l=k.ta.width,n=k.ta.height;k.move(new D(e,g));delete k.hA;e=e+(Math.max(l,
50)+20);j=Math.max(j,Math.max(n,50));if(i>=c-1){i=0;e=d;g=g+(j+20);j=0}else i++}a!==m&&a.Pd("Layout")}this.Re=h};Ih.prototype.Dy=function(a){return!a.location.aa()||a instanceof V&&a.hA?h:o};function Em(a,b,c,d,e,g,i,j){for(c=c.f;c.next();){var k=c.value;if(!d||k.Gr)if(!e||e(k))k.hr()&&(g&&k instanceof U?k.Yi||(k instanceof V&&k.wb===m?Em(a,b,k.lc,o,e,g,i,j):b.add(k)):i&&k instanceof W?b.add(k):j&&k.constructor===T&&b.add(k))}}t.a(Ih,"arrangementOrigin",Ih.prototype.Qc);
t.defineProperty(Ih,{Qc:"arrangementOrigin"},r("so"),function(a){if(!this.so.z(a)){s&&t.c(a,D,Ih,"arrangementOrigin");this.so.Ua(a);this.v()}});function Fm(a,b){var c=a.group;if(c!==m){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;if(e!==m){d=e.zb(dc);d.x=d.x+e.padding.left;d.y=d.y+e.padding.top}else d=c.position.copy();return d}return b}function Cm(){t.Lb(this);this.Zc=m;this.clear()}t.J("LayoutNetwork",Cm);
Cm.prototype.clear=function(){if(this.Yq)for(var a=this.Yq.f;a.next();){var b=a.value;b.clear();b.p=m}if(this.Uo)for(a=this.Uo.f;a.next();){b=a.value;b.clear();b.p=m}this.Yq=new ta(Gm);this.Uo=new ta(Hm);this.Jw=new ra(U,Gm);this.Bw=new ra(W,Hm)};Cm.prototype.toString=function(){return"LayoutNetwork"+(this.wb!==m?"("+this.wb.toString()+")":"")};t.m(Cm,{wb:"layout"},r("Zc"));function Dm(a,b){s&&b!==m&&t.c(b,Ih,Cm,"setLayout");a.Zc=b}t.m(Cm,{R:"vertexes"},r("Yq"));t.m(Cm,{Qb:"edges"},r("Uo"));
Cm.prototype.createVertex=Cm.prototype.Oi=function(){return new Gm};Cm.prototype.createEdge=Cm.prototype.pn=function(){return new Hm};
Cm.prototype.addParts=Cm.prototype.dr=function(a,b){if(a!==m){b===f&&(b=o);t.e(b,"boolean",Cm,"addParts:toplevelonly");for(var c=a.f;c.next();){var d=c.value;if(d instanceof U&&(!b||d.Gr)&&d.hr()&&!d.Yi)if(d instanceof V&&d.wb===m)this.dr(d.lc,o);else if(this.ge(d)===m){var e=this.Oi();e.kh=d;this.dk(e)}}for(c.reset();c.next();){d=c.value;if(d instanceof W&&(!b||d.Gr)&&d.hr()&&this.Bu(d)===m){var g=d.ia,e=d.ma;if(g!==e){g=this.Cu(g);e=this.Cu(e);g!==m&&e!==m&&this.Fl(g,e,d)}}}}};
Cm.prototype.findGroupVertex=Cm.prototype.Cu=function(a){if(a===m)return m;a=ol(a);if(a===m)return m;var b=this.ge(a);if(b!==m)return b;a=a.Wa;if(a!==m){b=this.ge(a);if(b!==m)return b}return m};Cm.prototype.addVertex=Cm.prototype.dk=function(a){if(a!==m){s&&t.c(a,Gm,Cm,"addVertex:vertex");this.Yq.add(a);var b=a.Ca;b!==m&&this.Jw.add(b,a);a.p=this}};Cm.prototype.addNode=Cm.prototype.an=function(a){if(a===m)return m;s&&t.c(a,U,Cm,"addNode:node");var b=this.ge(a);if(b===m){b=this.Oi();b.kh=a;this.dk(b)}return b};
Cm.prototype.deleteVertex=Cm.prototype.DB=function(a){if(a!==m){s&&t.c(a,Gm,Cm,"deleteVertex:vertex");if(Im(this,a)){for(var b=a.mf,c=b.count-1;c>=0;c--){var d=b.V(c);this.qn(d)}b=a.we;for(c=b.count-1;c>=0;c--){d=b.V(c);this.qn(d)}}}};function Im(a,b){if(b===m)return o;var c=a.Yq.remove(b);if(c){a.Jw.remove(b.Ca);b.p=m}return c}Cm.prototype.deleteNode=Cm.prototype.rI=function(a){if(a!==m){s&&t.c(a,U,Cm,"deleteNode:node");a=this.ge(a);a!==m&&this.DB(a)}};
Cm.prototype.findVertex=Cm.prototype.ge=function(a){if(a===m)return m;s&&t.c(a,U,Cm,"findVertex:node");return this.Jw.da(a)};Cm.prototype.addEdge=Cm.prototype.$m=function(a){if(a!==m){s&&t.c(a,Hm,Cm,"addEdge:edge");this.Uo.add(a);var b=a.Fa;b!==m&&this.Bu(b)===m&&this.Bw.add(b,a);b=a.G;b!==m&&b.UA(a);b=a.I;b!==m&&b.QA(a);a.p=this}};
Cm.prototype.addLink=Cm.prototype.qH=function(a){if(a===m)return m;s&&t.c(a,W,Cm,"addLink:link");var b=a.ia,c=a.ma,d=this.Bu(a);if(d===m){d=this.pn();d.Fa=a;if(b!==m)d.I=this.an(b);if(c!==m)d.G=this.an(c);this.$m(d)}else{d.I=b!==m?this.an(b):m;d.G=c!==m?this.an(c):m}return d};Cm.prototype.deleteEdge=Cm.prototype.qn=function(a){if(a!==m){s&&t.c(a,Hm,Cm,"deleteEdge:edge");var b=a.G;b!==m&&b.CB(a);b=a.I;b!==m&&b.BB(a);Jm(this,a)}};function Jm(a,b){if(b!==m&&a.Uo.remove(b)){a.Bw.remove(b.Fa);b.p=m}}
Cm.prototype.deleteLink=Cm.prototype.qI=function(a){if(a!==m){s&&t.c(a,W,Cm,"deleteLink:link");a=this.Bu(a);a!==m&&this.qn(a)}};Cm.prototype.findEdge=Cm.prototype.Bu=function(a){if(a===m)return m;s&&t.c(a,W,Cm,"findEdge:link");return this.Bw.da(a)};
Cm.prototype.linkVertexes=Cm.prototype.Fl=function(a,b,c){if(a===m||b===m)return m;if(s){t.c(a,Gm,Cm,"linkVertexes:fromVertex");t.c(b,Gm,Cm,"linkVertexes:toVertex");t.c(c,W,Cm,"linkVertexes:link")}if(a.p===this&&b.p===this){var d=this.pn();d.Fa=c;d.I=a;d.G=b;this.$m(d);return d}return m};Cm.prototype.reverseEdge=Cm.prototype.Zu=function(a){if(a!==m){s&&t.c(a,Hm,Cm,"reverseEdge:edge");var b=a.I,c=a.G;if(!(b===m||c===m)){b.BB(a);c.CB(a);a.Zu();b.UA(a);c.QA(a)}}};
Cm.prototype.deleteSelfEdges=Cm.prototype.wu=function(){for(var a=[],b=this.Qb.f;b.next();){var c=b.value;c.I===c.G&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.qn(a[c])};Cm.prototype.deleteArtificialVertexes=Cm.prototype.oF=function(){for(var a=[],b=this.R.f;b.next();){var c=b.value;c.Ca===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.DB(a[b]);a=[];for(b=this.Qb.f;b.next();){c=b.value;c.Fa===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.qn(a[b])};
Cm.prototype.splitIntoSubNetworks=Cm.prototype.TG=function(){this.oF();for(var a=[],b=this.Qb.f;b.next();){var c=b.value;(c.I===m||c.G===m)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.qn(a[c]);this.wu();a=new z(Cm);for(c=h;c;)for(var c=o,d=this.R.f;d.next();){b=d.value;if(b.mf.count>0||b.we.count>0){c=this.wb.createNetwork();a.add(c);Km(this,c,b);c=h;break}}a.sort(function(a,b){return a===m||b===m||a===b?0:b.R.count-a.R.count});return a};
function Km(a,b,c){if(c!==m&&c.p!==b){Im(a,c);b.dk(c);for(var d=c.tb;d.next();){var e=d.value;if(e.p!==b){Jm(a,e);b.$m(e);Km(a,b,e.I)}}for(d=c.sb;d.next();){e=d.value;if(e.p!==b){Jm(a,e);b.$m(e);Km(a,b,e.G)}}}}Cm.prototype.getParts=Cm.prototype.XI=function(){for(var a=new ta(T),b=this.R.f;b.next();)a.add(b.value.Ca);for(b=this.Qb.f;b.next();)a.add(b.value.Fa);return a};function Gm(){t.Lb(this);this.p=m;this.C=(new E(0,0,10,10)).freeze();this.B=(new D(5,5)).freeze();this.clear()}
t.J("LayoutVertex",Gm);Gm.prototype.clear=function(){this.Ca=m;this.mf=new z(Hm);this.we=new z(Hm)};Gm.prototype.toString=function(){return"LayoutVertex#"+t.jc(this)+(this.Ca!==m?"("+this.Ca.toString()+")":"")};t.a(Gm,"network",Gm.prototype.Hc);t.defineProperty(Gm,{Hc:"network"},r("p"),function(a){if(this.p!==a){a!==m&&t.c(a,Cm,Gm,"network");this.p=a}});t.a(Gm,"node",Gm.prototype.kh);
t.defineProperty(Gm,{kh:"node"},r("Ca"),function(a){if(this.Ca!==a){s&&a!==m&&t.c(a,U,Gm,"node");this.Ca=a;a.ci();var b=a.ta;if(b.aa()){this.C.Ua(b);a=a.location;if(a.aa()){var c=this.B;c.Ba();c.x=a.x-b.x;c.y=a.y-b.y;c.freeze()}}}});t.a(Gm,"bounds",Gm.prototype.mb);t.defineProperty(Gm,{mb:"bounds"},r("C"),function(a){if(!this.C.z(a)){s&&t.c(a,E,Gm,"bounds");this.C.Ua(a)}});t.a(Gm,"focus",Gm.prototype.focus);
t.defineProperty(Gm,{focus:"focus"},r("B"),function(a){if(!this.B.z(a)){s&&t.c(a,D,Gm,"focus");this.B.Ua(a)}});t.a(Gm,"centerX",Gm.prototype.Da);t.defineProperty(Gm,{Da:"centerX"},function(){return this.C.x+this.B.x},function(a){var b=this.C;if(b.x+this.B.x!==a){s&&t.h(a,Gm,"centerX");b.Ba();b.x=a-this.B.x;b.freeze()}});t.a(Gm,"centerY",Gm.prototype.Ea);
t.defineProperty(Gm,{Ea:"centerY"},function(){return this.C.y+this.B.y},function(a){var b=this.C;if(b.y+this.B.y!==a){s&&t.h(a,Gm,"centerY");b.Ba();b.y=a-this.B.y;b.freeze()}});t.a(Gm,"focusX",Gm.prototype.Gu);t.defineProperty(Gm,{Gu:"focusX"},function(){return this.B.x},function(a){var b=this.B;if(b.x!==a){b.Ba();b.x=a;b.freeze()}});t.a(Gm,"focusY",Gm.prototype.Hu);t.defineProperty(Gm,{Hu:"focusY"},function(){return this.B.y},function(a){var b=this.B;if(b.y!==a){b.Ba();b.y=a;b.freeze()}});
t.a(Gm,"x",Gm.prototype.x);t.defineProperty(Gm,{x:"x"},function(){return this.C.x},function(a){var b=this.C;if(b.x!==a){b.Ba();b.x=a;b.freeze()}});t.a(Gm,"y",Gm.prototype.y);t.defineProperty(Gm,{y:"y"},function(){return this.C.y},function(a){var b=this.C;if(b.y!==a){b.Ba();b.y=a;b.freeze()}});t.a(Gm,"width",Gm.prototype.width);t.defineProperty(Gm,{width:"width"},function(){return this.C.width},function(a){var b=this.C;if(b.width!==a){b.Ba();b.width=a;b.freeze()}});t.a(Gm,"height",Gm.prototype.height);
t.defineProperty(Gm,{height:"height"},function(){return this.C.height},function(a){var b=this.C;if(b.height!==a){b.Ba();b.height=a;b.freeze()}});Gm.prototype.commit=Gm.prototype.Wh=function(){var a=this.Ca;a!==m&&a.move(this.mb.position)};Gm.prototype.addSourceEdge=Gm.prototype.UA=function(a){if(a!==m){s&&t.c(a,Hm,Gm,"addSourceEdge:edge");this.mf.contains(a)||this.mf.add(a)}};Gm.prototype.deleteSourceEdge=Gm.prototype.CB=function(a){if(a!==m){s&&t.c(a,Hm,Gm,"deleteSourceEdge:edge");this.mf.remove(a)}};
Gm.prototype.addDestinationEdge=Gm.prototype.QA=function(a){if(a!==m){s&&t.c(a,Hm,Gm,"addDestinationEdge:edge");this.we.contains(a)||this.we.add(a)}};Gm.prototype.deleteDestinationEdge=Gm.prototype.BB=function(a){if(a!==m){s&&t.c(a,Hm,Gm,"deleteDestinationEdge:edge");this.we.remove(a)}};t.m(Gm,{SG:"sourceVertexes"},function(){for(var a=new ta(Gm),b=this.tb;b.next();){var c=b.value.I;c!==m&&!a.contains(c)&&a.add(c)}return a.f});
t.m(Gm,{qF:"destinationVertexes"},function(){for(var a=new ta(Gm),b=this.sb;b.next();){var c=b.value.G;c!==m&&!a.contains(c)&&a.add(c)}return a.f});t.m(Gm,{R:"vertexes"},function(){for(var a=new ta(Gm),b=this.tb;b.next();){var c=b.value,c=c.I;c!==m&&!a.contains(c)&&a.add(c)}for(b=this.sb;b.next();){c=b.value;c=c.G;c!==m&&!a.contains(c)&&a.add(c)}return a.f});t.m(Gm,{tb:"sourceEdges"},function(){return this.mf.f});t.m(Gm,{sb:"destinationEdges"},function(){return this.we.f});
t.m(Gm,{Qb:"edges"},function(){for(var a=new z(Hm),b=this.tb;b.next();){var c=b.value;a.add(c)}for(b=this.sb;b.next();){c=b.value;a.add(c)}return a.f});t.m(Gm,{BF:"edgesCount"},function(){return this.mf.count+this.we.count});var Lm;Gm.standardComparer=Lm=function(a,b){s&&t.c(a,Gm,Gm,"standardComparer:m");s&&t.c(b,Gm,Gm,"standardComparer:n");var c=a.Ca,d=b.Ca;if(c){if(d){c=c.text;d=d.text;return c<d?-1:c>d?1:0}return 1}return d!==m?-1:0};
Gm.smartComparer=function(a,b){s&&t.c(a,Gm,Gm,"smartComparer:m");s&&t.c(b,Gm,Gm,"smartComparer:n");if(a!==m){if(b!==m){var c=a.Ca,d=b.Ca;if(c!==m){if(d!==m){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(d[e]!==""&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(c[e].localeCompare(d[e])!==0)return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(g-i!==0)return g-i}}else if(c[e]!=="")return 1;return d[e]!==""&&d[e]!==f?-1:0}return 1}return d!==m?-1:0}return 1}return b!==m?-1:0};function Hm(){t.Lb(this);this.p=m;this.clear()}t.J("LayoutEdge",Hm);Hm.prototype.clear=function(){this.G=this.I=this.Fa=m};Hm.prototype.toString=function(){return"LayoutEdge#"+t.jc(this)+(this.Fa!==m?"("+this.Fa.toString()+")":"")};t.a(Hm,"network",Hm.prototype.Hc);
t.defineProperty(Hm,{Hc:"network"},r("p"),function(a){if(this.p!==a){s&&a!==m&&t.c(a,Cm,Hm,"network");this.p=a}});t.a(Hm,"link",Hm.prototype.link);t.defineProperty(Hm,{link:"link"},r("Fa"),function(a){if(this.Fa!==a){s&&a!==m&&t.c(a,W,Hm,"link");this.Fa=a}});t.a(Hm,"fromVertex",Hm.prototype.IF);t.defineProperty(Hm,{IF:"fromVertex"},r("I"),function(a){if(this.I!==a){s&&a!==m&&t.c(a,Gm,Hm,"fromVertex");this.I=a}});t.a(Hm,"toVertex",Hm.prototype.cH);
t.defineProperty(Hm,{cH:"toVertex"},r("G"),function(a){if(this.G!==a){s&&a!==m&&t.c(a,Gm,Hm,"toVertex");this.G=a}});Hm.prototype.Zu=function(){var a=this.I;this.I=this.G;this.G=a};Hm.prototype.commit=Hm.prototype.Wh=aa();Hm.prototype.getOtherVertex=Hm.prototype.KF=function(a){s&&t.c(a,Gm,Hm,"getOtherVertex:v");return this.G===a?this.I:this.I===a?this.G:m};
function Oi(){Ih.call(this);this.Pu=h;this.ar=this.br=NaN;this.ni=(new K(NaN,NaN)).freeze();this.Og=(new K(10,10)).freeze();this.qa=Zj;this.zc=Xj;this.Yb=Tj;this.Wb=Mm}t.J("GridLayout",Oi);t.ua(Oi,Ih);Oi.prototype.cloneProtected=Oi.prototype.jb=function(a){Ih.prototype.jb.call(this,a);a.br=this.br;a.ar=this.ar;a.ni=this.ni.D();a.Og=this.Og.D();a.qa=this.qa;a.zc=this.zc;a.Yb=this.Yb;a.Wb=this.Wb};
Oi.prototype.doLayout=Oi.prototype.or=function(a){var b=this.b;b===m&&t.g("The diagram for this layout is not set.");this.Qc=Fm(this,this.Qc);var c=new ta(T);if(a===this.b){Em(this,c,a.sk,h,m,h,o,h);Em(this,c,a.links,h,m,h,o,h);Em(this,c,a.cj,h,m,h,o,h)}else a===this.group&&Em(this,c,a.lc,o,m,h,o,h);for(a=c.copy().f;a.next();){var d=a.value;if(d instanceof W&&(d.ia!==m||d.ma!==m))c.remove(d);else{d.ci();if(d instanceof V)for(d=d.lc;d.next();)c.remove(d.value)}}c=c.Jf();if(c.length!==0){switch(this.Ff){case Wj:c.reverse();
break;case Tj:c.sort(this.bh);break;case Uj:c.sort(this.bh);c.reverse()}d=this.TD;isNaN(d)&&(d=0);a=this.iz;a=isNaN(a)?Math.max(this.b.ob.width-b.padding.left-b.padding.right,0):Math.max(this.iz,0);d<=0&&a<=0&&(d=1);var e=this.fj.width;isFinite(e)||(e=0);var g=this.fj.height;isFinite(g)||(g=0);b.Kb("Layout");switch(this.qb){case $j:var i=Math.max(this.ik.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.ja,i=Math.max(i,l.width);var i=Math.max(i+e,1),n=Math.max(this.ik.height,1);
if(!isFinite(n))for(j=n=0;j<c.length;j++){k=c[j];l=k.ja;n=Math.max(n,l.height)}for(var n=Math.max(n+g,1),q=this.Md,p=this.Qc.x,u=p,w=this.Qc.y,B=0,F=0,j=0;j<c.length;j++){var k=c[j],l=k.ja,H=Math.ceil((l.width+e)/i)*i,x=Math.ceil((l.height+g)/n)*n,I;switch(q){case Yj:I=Math.abs(u-l.width)+p;break;default:I=u+l.width-p}if(d>0&&B>d-1||a>0&&B>0&&I>a){B=0;u=p;w=w+F;F=0}F=Math.max(F,x);switch(q){case Yj:l=-l.width;break;default:l=0}k.move(new D(u+l,w));switch(q){case Yj:u=u-H;break;default:u=u+H}B++}break;
case Zj:i=Math.max(this.ik.width,1);for(k=j=B=w=0;k<c.length;k++){n=c[k];q=n.ja;p=pl(n,n.Ab,n.yf);w=Math.max(w,p.x);B=Math.max(B,q.width-p.x);j=Math.max(j,p.y)}u=this.Md;switch(u){case Yj:w=w+e;break;default:B=B+e}var i=isFinite(i)?Math.max(i+e,1):Math.max(w+B,1),y=w=this.Qc.x,B=this.Qc.y,H=F=0,l=Math.max(this.ik.height,1),x=j=0;I=h;for(k=0;k<c.length;k++){n=c[k];q=n.ja;p=pl(n,n.Ab,n.yf);if(F>0)switch(u){case Yj:y=Math.floor((y-w-(q.width-p.x))/i)*i+w;break;default:y=Math.ceil((y-w+p.x)/i)*i+w}else switch(u){case Yj:H=
y+p.x+q.width;break;default:H=y-p.x}var G;switch(u){case Yj:G=-(y+p.x)+w+H;break;default:G=y+q.width-p.x-w-H}if(d>0&&F>d-1||a>0&&F>0&&G>a){for(y=0;y<F;y++){if(k===F)break;G=c[k-F+y];var fa=pl(G,G.Ab,G.yf);G.move(new D(G.position.x,G.position.y+j-fa.y))}x=x+g;B=I?B+x:B+(x+j);F=x=j=0;y=w;I=o}j=Math.max(j,p.y);x=Math.max(x,q.height-p.y);isFinite(l)&&(x=Math.max(x,Math.max(q.height,l)-p.y));I?n.move(new D(y-p.x,B-p.y)):n.move(new D(y-p.x,B));switch(u){case Yj:y=y-(p.x+e);break;default:y=y+(q.width-p.x+
e)}F++}for(y=0;y<F;y++){if(k===F)break;G=c[k-F+y];fa=pl(G,G.Ab,G.yf);G.move(new D(G.position.x,G.position.y+j-fa.y))}}b.Pd("Layout");this.Re=h}};t.a(Oi,"wrappingWidth",Oi.prototype.iz);t.defineProperty(Oi,{iz:"wrappingWidth"},r("br"),function(a){if(this.br!==a&&(a>0||isNaN(a))){this.br=a;this.Pu=isNaN(a);this.v()}});t.a(Oi,"wrappingColumn",Oi.prototype.TD);t.defineProperty(Oi,{TD:"wrappingColumn"},r("ar"),function(a){if(this.ar!==a&&(a>0||isNaN(a))){this.ar=a;this.v()}});t.a(Oi,"cellSize",Oi.prototype.ik);
t.defineProperty(Oi,{ik:"cellSize"},r("ni"),function(a){if(!this.ni.z(a)){this.ni.Ua(a);this.v()}});t.a(Oi,"spacing",Oi.prototype.fj);t.defineProperty(Oi,{fj:"spacing"},r("Og"),function(a){if(!this.Og.z(a)){this.Og.Ua(a);this.v()}});t.a(Oi,"alignment",Oi.prototype.qb);t.defineProperty(Oi,{qb:"alignment"},r("qa"),function(a){if(this.qa!==a){s&&t.c(a,qa,Oi,"alignment");if(a===Zj||a===$j){this.qa=a;this.v()}}});t.a(Oi,"arrangement",Oi.prototype.Md);
t.defineProperty(Oi,{Md:"arrangement"},r("zc"),function(a){if(this.zc!==a){s&&t.c(a,qa,Oi,"arrangement");if(a===Xj||a===Yj){this.zc=a;this.v()}}});t.a(Oi,"sorting",Oi.prototype.Ff);t.defineProperty(Oi,{Ff:"sorting"},r("Yb"),function(a){if(this.Yb!==a){s&&t.c(a,qa,Oi,"sorting");if(a===Vj||a===Wj||a===Tj||Uj){this.Yb=a;this.v()}}});t.a(Oi,"comparer",Oi.prototype.bh);t.defineProperty(Oi,{bh:"comparer"},r("Wb"),function(a){if(this.Wb!==a){s&&t.e(a,"function",Oi,"comparer");this.Wb=a;this.v()}});var Mm;
Oi.standardComparer=Mm=function(a,b){s&&t.c(a,T,Oi,"standardComparer:a");s&&t.c(b,T,Oi,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
Oi.smartComparer=function(a,b){s&&t.c(a,T,Oi,"standardComparer:a");s&&t.c(b,T,Oi,"standardComparer:b");if(a!==m){if(b!==m){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(d[e]!==""&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(c[e].localeCompare(d[e])!==0)return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(g-i!==0)return g-i}}else if(c[e]!=="")return 1;return d[e]!==""&&d[e]!==f?-1:0}return 1}return b!==m?-1:0};var $j;Oi.Position=$j=t.l(Oi,"Position",0);var Zj;Oi.Location=Zj=t.l(Oi,"Location",1);var Xj;Oi.LeftToRight=Xj=t.l(Oi,"LeftToRight",2);var Yj;Oi.RightToLeft=Yj=t.l(Oi,"RightToLeft",3);var Vj;Oi.Forward=Vj=t.l(Oi,"Forward",4);var Wj;Oi.Reverse=Wj=t.l(Oi,"Reverse",5);var Tj;Oi.Ascending=Tj=t.l(Oi,"Ascending",6);var Uj;Oi.Descending=Uj=t.l(Oi,"Descending",7);
function ak(){Ih.call(this);this.jw=this.lm=this.ac=0;this.To=360;this.iw=mk;this.Bs=this.be=this.LA=this.zj=0;this.cu=new Nm;this.Es=this.Fm=0;this.qA=function(a){a||(a=(new Date).getTime());return(a*9301+49297)%233280/233280};this.pE=600;this.hq=NaN;this.uo=1;this.Pg=0;this.Rg=360;this.zc=mk;this.Q=ik;this.Yb=fk;this.Wb=Lm;this.Og=6;this.aq=pk}t.J("CircularLayout",ak);t.ua(ak,Ih);
ak.prototype.cloneProtected=ak.prototype.jb=function(a){Ih.prototype.jb.call(this,a);a.hq=this.hq;a.uo=this.uo;a.Pg=this.Pg;a.Rg=this.Rg;a.zc=this.zc;a.Q=this.Q;a.Yb=this.Yb;a.Wb=this.Wb;a.Og=this.Og;a.aq=this.aq};ak.prototype.createNetwork=ak.prototype.su=function(){var a=new Om;Dm(a,this);return a};
ak.prototype.doLayout=ak.prototype.or=function(a){if(this.Hc===m)this.Hc=this.makeNetwork(a);if(this.p.R.count===1){a=this.p.R.V(0);a.Da=0;a.Ea=0}else{for(var a=this.p.R.f,b=new z(Pm);a.next();){var c=a.value,d=c.Ca;if(d!==m){c.width=d.la.width;c.height=d.la.height}b.add(c)}var a=new z(Pm),c=new z(Pm),b=this.sort(b),a=new z(Pm),c=new z(Pm),d=this.iw,e=this.hE,g=this.ac,i=this.lm,j=this.jw,k=this.To,l=this.zj,n=this.LA,q=this.be,p=this.Bs,d=this.Md,e=this.Tr,g=this.UC;if(!isFinite(g)||g<=0)g=NaN;i=
this.$A;if(!isFinite(i)||i<=0)i=1;j=this.uk;isFinite(j)||(j=0);k=this.Pl;if(!isFinite(k)||k>360||k<1)k=360;l=this.fj;isFinite(l)||(l=NaN);if(d===nk&&e===ok)d=mk;else if(d===nk&&e!==ok){e=ok;d=this.Md}if((this.direction===gk||this.direction===hk)&&this.Ff!==fk){for(var u=0;;u=u+2){if(u>=b.length)break;a.add(b.V(u));if(u+1>=b.length)break;c.add(b.V(u+1))}if(this.direction===gk){this.Md===nk&&a.reverse();b=new z(Pm);b.kg(a);b.kg(c)}else{this.Md===nk&&c.reverse();b=new z(Pm);b.kg(c);b.kg(a)}}for(var w=
b.length,B=n=0,u=0;u<b.length;u++){var q=j+k*B*(this.direction===ik?1:-1)/w,F=b.V(u).Ne;isNaN(F)&&(F=Qm(b.V(u),q));if(k<360&&(u===0||u===b.length-1))F=F/2;n=n+F;B++}if(isNaN(g)||d===nk){isNaN(l)&&(l=6);if(d!==mk&&d!==nk){F=-Infinity;for(u=0;u<w;u++){var p=b.V(u),H=b.V(u===w-1?0:u+1);isNaN(p.Ne)&&Qm(p,0);isNaN(H.Ne)&&Qm(H,0);F=Math.max(F,(p.Ne+H.Ne)/2)}p=F+l;if(d===kk){q=2*Math.PI/w;g=(F+l)/q}else g=Rm(this,p*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180)}else g=Rm(this,n+(k>=360?w:w-1)*(d!==nk?l:l*
1.6),i,j*Math.PI/180,k*Math.PI/180);q=g*i}else{q=g*i;B=Sm(this,g,q,j*Math.PI/180,k*Math.PI/180);if(isNaN(l)){if(d===mk||d===nk)l=(B-n)/(k>=360?w:w-1)}else if(d===mk||d===nk){u=(B-n)/(k>=360?w:w-1);if(u<l){g=Rm(this,n+l*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180);q=g*i}else l=u}else{F=-Infinity;for(u=0;u<w;u++){p=b.V(u);H=b.V(u===w-1?0:u+1);isNaN(p.Ne)&&Qm(p,0);isNaN(H.Ne)&&Qm(H,0);F=Math.max(F,(p.Ne+H.Ne)/2)}p=F+l;u=Rm(this,p*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180);if(u>g){g=u;q=g*i}else p=
B/(k>=360?w:w-1)}}this.iw=d;this.hE=e;this.ac=g;this.lm=i;this.jw=j;this.To=k;this.zj=l;this.LA=n;this.be=q;this.Bs=p;c=[b,a,c];b=c[0];a=c[1];c=c[2];d=this.iw;e=this.ac;i=this.jw;j=this.To;k=this.zj;l=this.be;n=this.Bs;if((this.direction===gk||this.direction===hk)&&d===nk)Tm(this,b,j,i-j/2,ik);else if(this.direction===gk||this.direction===hk){g=0;switch(d){case lk:g=Um(this,e,l,i,n)*180/Math.PI;break;case mk:n=b=0;g=a.hc();g!==m&&(b=Qm(g,Math.PI/2));g=c.hc();g!==m&&(n=Qm(g,Math.PI/2));g=Um(this,e,
l,i,k+(b+n)/2)*180/Math.PI;break;case kk:g=j/b.length}if(this.direction===gk){switch(d){case lk:Vm(this,a,i,jk);break;case mk:Wm(this,a,i,jk);break;case kk:Xm(this,a,j/2,i,jk)}switch(d){case lk:Vm(this,c,i+g,ik);break;case mk:Wm(this,c,i+g,ik);break;case kk:Xm(this,c,j/2,i+g,ik)}}else{switch(d){case lk:Vm(this,c,i,jk);break;case mk:Wm(this,c,i,jk);break;case kk:Xm(this,c,j/2,i,jk)}switch(d){case lk:Vm(this,a,i+g,ik);break;case mk:Wm(this,a,i+g,ik);break;case kk:Xm(this,a,j/2,i+g,ik)}}}else switch(d){case lk:Vm(this,
b,i,this.direction);break;case mk:Wm(this,b,i,this.direction);break;case kk:Xm(this,b,j,i,this.direction);break;case nk:Tm(this,b,j,i,this.direction)}this.updateParts();this.Hc=m;this.Re=h}};function Xm(a,b,c,d,e){for(var g=a.To,i=a.ac,a=a.be,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===ik?k*c/(g>=360?j:j-1):-(k*c)/j),n=b.V(k),q=i*Math.tan(l)/a,q=Math.sqrt((i*i+a*a*q*q)/(1+q*q));n.Da=q*Math.cos(l);n.Ea=q*Math.sin(l);n.fu=l*180/Math.PI}}
function Wm(a,b,c,d){for(var e=a.ac,g=a.be,i=a.zj,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.V(k),n=b.V(k===j-1?0:k+1),q=g*Math.sin(c);l.Da=e*Math.cos(c);l.Ea=q;l.fu=c*180/Math.PI;isNaN(l.Ne)&&Qm(l,0);isNaN(n.Ne)&&Qm(n,0);l=Um(a,e,g,d===ik?c:-c,(l.Ne+n.Ne)/2+i);c=c+(d===ik?l:-l)}}function Vm(a,b,c,d){for(var e=a.ac,g=a.be,i=a.Bs,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.V(k);l.Da=e*Math.cos(c);l.Ea=g*Math.sin(c);l.fu=c*180/Math.PI;l=Um(a,e,g,d===ik?c:-c,i);c=c+(d===ik?l:-l)}}
function Tm(a,b,c,d,e){var g=a.Es,g=a.To;a.pA=0;a.cu=new Nm;if(c<360){for(g=d+(e===ik?g:-g);g<0;)g=g+360;g=g%360;g>180&&(g=g-360);g=g*(Math.PI/180);a.Es=g;Ym(a,b,c,d,e)}else Zm(a,b,c,d,e);a.cu.Wh(b)}
function Zm(a,b,c,d,e){for(var g=a.zj,i=a.lm,j=a.ac*Math.cos(d*Math.PI/180),k=a.be*Math.sin(d*Math.PI/180),l=b.Jf(),n=0;n<l.length;n++){l[n].Da=j;l[n].Ea=k;if(n===l.length-1)break;var q=[],q=$m(a,j,k,l,n,e);q[0]||(q=an(a,j,k,l,n,e));j=q[1];k=q[2]}a.Fm++;if(!(a.Fm>128)){var j=l[0].Da,k=l[0].Ea,n=l[l.length-1].Da,q=l[l.length-1].Ea,p=Math.abs(j-n)-((l[0].width+l[l.length-1].width)/2+g),u=Math.abs(k-q)-((l[0].height+l[l.length-1].height)/2+g),g=0;Math.abs(u)<2.5?Math.abs(j-n)<(l[0].width+l[l.length-
1].width)/2&&(g=0):g=u>0?u:Math.abs(p)<2.5?0:p;p=o;p=Math.abs(n)>Math.abs(q)?n>0^k>q:q>0^j<n;if(p=e===ik?p:!p){g=-Math.abs(g);g=Math.min(g,-l[l.length-1].width);g=Math.min(g,-l[l.length-1].height)}j=a.cu;if(g>0&&j.pm<0||Math.abs(g)<Math.abs(j.pm)&&!(g<0&&j.pm>0)){j.pm=g;j.ll=[];j.Ym=[];for(k=0;k<l.length;k++){j.ll[k]=l[k].mb.x;j.Ym[k]=l[k].mb.y}}l=a.Fm;if(l>36&&l%13===0){a.ac=a.ac*((l%2===0?0.75:1.1)+a.qA(a.Fm)*0.15);a.be=a.ac*i}if(Math.abs(g)>2.5){a.ac=a.ac-g/(2*Math.PI);a.be=a.ac*i;Zm(a,b,c,d,e)}}}
function Ym(a,b,c,d,e){for(var g=a.ac,i=a.be,j=a.lm,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),n=b.Jf(),q=0;q<n.length;q++){n[q].Da=k;n[q].Ea=l;if(q===n.length-1)break;var p=[],p=$m(a,k,l,n,q,e);p[0]||(p=an(a,k,l,n,q,e));k=p[1];l=p[2]}a.pA++;if(!(a.pA>128)){b.V(b.length-1);k=Math.atan2(l,k);k=e===ik?a.Es-k:k-a.Es;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.cu;if(Math.abs(g)<Math.abs(i.pm)){i.pm=g;i.ll=[];i.Ym=[];for(k=0;k<n.length;k++){i.ll[k]=n[k].mb.x;i.Ym[k]=
n[k].mb.y}}n=a.Fm;if(n>36&&n%13===0){a.ac=a.ac*((n%2==0?0.75:1.1)+a.qA(a.Fm)*0.15);a.be=a.ac*j}if(Math.abs(g)>2.5){a.ac=a.ac-g/(2*Math.PI);a.be=a.ac*j;Ym(a,b,c,d,e)}}}
function $m(a,b,c,d,e,g){var i=a.zj,j=a.ac,a=a.be,k=0,l=0,n=o;if(c>=0^g===ik){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j){k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j)return[o,k,l];n=h}}else{k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j)return[o,k,l];n=h}}l=Math.sqrt(1-k*k/(j*j))*a;c<0^n&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[o,k,l]:[h,k,l]}
function an(a,b,c,d,e,g){var i=a.zj,j=a.ac,a=a.be,k=0,l=0,n=o;if(b>=0^g===ik){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a){l=c+((d[e].height+d[e+1].height)/2+i);if(l>a)return[o,k,l];n=h}}else{l=c+((d[e].height+d[e+1].height)/2+i);if(l>a){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a)return[o,k,l];n=h}}k=Math.sqrt(1-l*l/(a*a))*j;b<0^n&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[o,k,l]:[h,k,l]}function Nm(){this.pm=-Infinity;this.Ym=this.ll=m}
Nm.prototype.Wh=function(a){if(!(this.ll===m||this.Ym===m))for(var b=0;b<this.ll.length;b++){var c=a.V(b);c.x=this.ll[b];c.y=this.Ym[b]}};ak.prototype.commitLayout=ak.prototype.ou=function(){this.commitNodes();this.commitLinks()};ak.prototype.commitNodes=ak.prototype.Nx=function(){for(var a=this.AE,b=this.p.R.f,c;b.next();){c=b.value;c.x=c.x+a.x;c.y=c.y+a.y;c.Wh()}};ak.prototype.commitLinks=ak.prototype.Mx=function(){for(var a=this.p.Qb.f;a.next();)a.value.Wh()};
function Sm(a,b,c,d,e){var g=a.pE;if(Math.abs(a.lm-1)<0.0010)return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function Rm(a,b,c,d,e){return b/(d!==f&&e!==f?Sm(a,1,c,d,e):Sm(a,1,c))}
function Um(a,b,c,d,e){if(Math.abs(a.lm-1)<0.0010)return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(a.p.R.count*700);b>c&&(d=d+Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
ak.prototype.sort=function(a){switch(this.Ff){case dk:break;case ek:a.reverse();break;case bk:a.sort(this.bh);break;case ck:a.sort(this.bh);a.reverse();break;case fk:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new z(Pm),c=0;c<a.length;c++){var e=-1,g=-1;if(c===0)for(var i=0;i<a.length;i++){var j=a.V(i).BF;if(j>e){e=j;g=i}}else for(i=0;i<a.length;i++){j=b[i];if(j>e){e=j;g=i}}d.add(a.V(g));b[g]=-1;g=a.V(g);e=g.tb;for(g=g.sb;e.next();){i=e.value;i=i.I;i=a.indexOf(i);i<0||b[i]>=0&&b[i]++}for(;g.next();){i=
g.value;i=i.G;i=a.indexOf(i);i<0||b[i]>=0&&b[i]++}}a=[];for(b=0;b<d.length;b++){j=d.V(b);a[b]=[];for(var c=j.sb,e=j.tb,k,l;c.next();){k=c.value;l=d.indexOf(k.G);l!==b&&a[b].indexOf(l)<0&&a[b].push(l)}for(;e.next();){k=e.value;l=d.indexOf(k.I);l!==b&&a[b].indexOf(l)<0&&a[b].push(l)}}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],n=[],q=[],e=[],g=new z(Pm),i=b=0;b<a.length;b++){var p=a[b].length;if(p===1)e.push(b);else if(p===0)g.add(d.V(b));else{if(i===0)c.push(b);else{for(var u=Infinity,w=Infinity,
B=-1,F=[],p=0;p<c.length;p++)if(a[c[p]].indexOf(c[p===c.length-1?0:p+1])<0)F.push(p===c.length-1?0:p+1);if(F.length===0)for(p=0;p<c.length;p++)F.push(p);for(p=0;p<F.length;p++){var H=F[p],x;l=a[b];k=n;x=q;for(var I=j,y=H,G=c,fa=0,R=0;R<k.length;R++){var S=I[k[R]],da=I[x[R]],ma=0,Ha=0;if(S<da){ma=S;Ha=da}else{ma=da;Ha=S}if(ma<y&&y<=Ha)for(S=0;S<l.length;S++){da=l[S];G.indexOf(da)<0||ma<I[da]&&I[da]<Ha||(ma===I[da]||Ha===I[da])||fa++}else for(S=0;S<l.length;S++){da=l[S];G.indexOf(da)<0||ma<I[da]&&I[da]<
Ha&&!(ma===I[da]||Ha===I[da])&&fa++}}x=fa;for(k=I=0;k<a[b].length;k++){l=c.indexOf(a[b][k]);if(l>=0){l=Math.abs(H-(l>=H?l+1:l));I=I+(l<c.length+1-l?l:c.length+1-l)}}for(k=0;k<n.length;k++){l=j[n[k]];y=j[q[k]];l>=H&&l++;y>=H&&y++;if(l>y){G=y;y=l;l=G}y-l<(c.length+2)/2^(l<H&&H<=y)||I++}if(x<u||x===u&&I<w){u=x;w=I;B=H}}c.splice(B,0,b);for(p=0;p<c.length;p++)j[c[p]]=p;for(p=0;p<a[b].length;p++){u=a[b][p];if(c.indexOf(u)>=0){n.push(b);q.push(u)}}}i++}}n=o;for(q=c.length;;){n=h;for(j=0;j<e.length;j++){b=
e[j];p=a[b][0];l=c.indexOf(p);if(l>=0){for(i=w=0;i<a[p].length;i++){u=a[p][i];u=c.indexOf(u);if(!(u<0||u===l)){B=u>l?u-l:l-u;w=w+(u<l^B>q-B?1:-1)}}c.splice(w<0?l:l+1,0,b);e.splice(j,1);j--}else n=o}if(n)break;else{c.push(e[0]);e.splice(0,1)}}for(b=0;b<c.length;b++){l=c[b];g.add(d.V(l))}return g;default:t.g("Invalid sorting type.")}return a};t.a(ak,"radius",ak.prototype.UC);t.defineProperty(ak,{UC:"radius"},r("hq"),function(a){if(this.hq!==a&&(a>0||isNaN(a))){this.hq=a;this.v()}});
t.a(ak,"aspectRatio",ak.prototype.$A);t.defineProperty(ak,{$A:"aspectRatio"},r("uo"),function(a){if(this.uo!==a&&a>0){this.uo=a;this.v()}});t.a(ak,"startAngle",ak.prototype.uk);t.defineProperty(ak,{uk:"startAngle"},r("Pg"),function(a){if(this.Pg!==a){this.Pg=a;this.v()}});t.a(ak,"sweepAngle",ak.prototype.Pl);t.defineProperty(ak,{Pl:"sweepAngle"},r("Rg"),function(a){if(this.Rg!==a){this.Rg=a>0&&a<=360?a:360;this.v()}});t.a(ak,"arrangement",ak.prototype.Md);
t.defineProperty(ak,{Md:"arrangement"},r("zc"),function(a){if(this.zc!==a){s&&t.c(a,qa,ak,"arrangement");if(a===nk||a===mk||a===lk||a===kk){this.zc=a;this.v()}}});t.a(ak,"direction",ak.prototype.direction);t.defineProperty(ak,{direction:"direction"},r("Q"),function(a){if(this.Q!==a){s&&t.c(a,qa,ak,"direction");if(a===ik||a===jk||a===gk||a===hk){this.Q=a;this.v()}}});t.a(ak,"sorting",ak.prototype.Ff);
t.defineProperty(ak,{Ff:"sorting"},r("Yb"),function(a){if(this.Yb!==a){s&&t.c(a,qa,ak,"sorting");if(a===dk||a===ek||a===bk||ck||a===fk){this.Yb=a;this.v()}}});t.a(ak,"comparer",ak.prototype.bh);t.defineProperty(ak,{bh:"comparer"},r("Wb"),function(a){if(this.Wb!==a){s&&t.e(a,"function",ak,"comparer");this.Wb=a;this.v()}});t.a(ak,"spacing",ak.prototype.fj);t.defineProperty(ak,{fj:"spacing"},r("Og"),function(a){if(this.Og!==a){this.Og=a;this.v()}});t.a(ak,"nodeDiameterFormula",ak.prototype.Tr);
t.defineProperty(ak,{Tr:"nodeDiameterFormula"},r("aq"),function(a){if(this.aq!==a){s&&t.c(a,qa,ak,"nodeDiameterFormula");if(a===pk||a===ok){this.aq=a;this.v()}}});t.m(ak,{BE:"actualXRadius"},r("ac"));t.m(ak,{CE:"actualYRadius"},r("be"));t.m(ak,{oH:"actualSpacing"},r("zj"));t.m(ak,{AE:"actualCenter"},function(){return isNaN(this.Qc.x)||isNaN(this.Qc.y)?new D(0,0):new D(this.Qc.x+this.BE,this.Qc.y+this.CE)});var mk;ak.ConstantSpacing=mk=t.l(ak,"ConstantSpacing",0);var lk;
ak.ConstantDistance=lk=t.l(ak,"ConstantDistance",1);var kk;ak.ConstantAngle=kk=t.l(ak,"ConstantAngle",2);var nk;ak.Packed=nk=t.l(ak,"Packed",3);var ik;ak.Clockwise=ik=t.l(ak,"Clockwise",4);var jk;ak.Counterclockwise=jk=t.l(ak,"Counterclockwise",5);var gk;ak.BidirectionalLeft=gk=t.l(ak,"BidirectionalLeft",6);var hk;ak.BidirectionalRight=hk=t.l(ak,"BidirectionalRight",7);var dk;ak.Forwards=dk=t.l(ak,"Forwards",8);var ek;ak.Reverse=ek=t.l(ak,"Reverse",9);var bk;ak.Ascending=bk=t.l(ak,"Ascending",10);
var ck;ak.Descending=ck=t.l(ak,"Descending",11);var fk;ak.Optimized=fk=t.l(ak,"Optimized",12);var pk;ak.Pythagorean=pk=t.l(ak,"Pythagorean",13);var ok;ak.Circular=ok=t.l(ak,"Circular",14);function Om(){Cm.call(this)}t.J("CircularNetwork",Om);t.ua(Om,Cm);Om.prototype.createVertex=Om.prototype.Oi=function(){return new Pm};Om.prototype.createEdge=Om.prototype.pn=function(){return new bn};function Pm(){Gm.call(this);this.qz=this.km=NaN}t.J("CircularVertex",Pm);t.ua(Pm,Gm);
function Qm(a,b){var c=a.p;if(c===m)return NaN;c=c.wb;if(c===m)return NaN;if(c.Md===nk)if(c.Tr===ok)a.km=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(c===0)return a.width;if(d===0)return a.height;a.km=Math.min(a.height/c,a.width/d)}else a.km=c.Tr===ok?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.km}t.a(Pm,"diameter",Pm.prototype.Ne);t.defineProperty(Pm,{Ne:"diameter"},r("km"),ba("km"));t.a(Pm,"actualAngle",Pm.prototype.fu);
t.defineProperty(Pm,{fu:"actualAngle"},r("qz"),ba("qz"));function bn(){Hm.call(this)}t.J("CircularEdge",bn);t.ua(bn,Hm);function cn(){Ih.call(this);this.pf=m;this.Ap=0;this.Ye=(new K(100,100)).freeze();this.to=o;this.kd=this.Ng=h;this.Dm=100;this.Wo=1;this.lp=1E3;this.Oo=0.05;this.No=50;this.Lo=150;this.Mo=0;this.Jo=20;this.Io=25}t.J("ForceDirectedLayout",cn);t.ua(cn,Ih);
cn.prototype.cloneProtected=cn.prototype.jb=function(a){Ih.prototype.jb.call(this,a);a.Ye=this.Ye.D();a.to=this.to;a.Ng=this.Ng;a.kd=this.kd;a.Dm=this.Dm;a.Wo=this.Wo;a.lp=this.lp;a.Oo=this.Oo;a.No=this.No;a.Lo=this.Lo;a.Mo=this.Mo;a.Jo=this.Jo;a.Io=this.Io};cn.prototype.createNetwork=cn.prototype.su=function(){var a=new dn;Dm(a,this);return a};
cn.prototype.doLayout=cn.prototype.or=function(a){if(this.Hc===m)this.Hc=this.makeNetwork(a);a=this.Qu;if(this.p.R.count>0){this.p.wu();for(var b=this.p.R.f;b.next();){var c=b.value;c.pi=this.electricalCharge(c);c.Cm=this.gravitationalMass(c);var d=c.Ca;if(d!==m){var e=d.ta.width,d=d.ta.height;c.width=e;c.height=d;c.Gu=e*0.5;c.Hu=d*0.5}}for(b=this.p.Qb.f;b.next();){c=b.value;c.Kq=this.springStiffness(c);c.Eh=this.springLength(c)}this.Ap=0;a:{if(!(this.p.R.count<3)){e=b=0;c=this.p.R.f;c.next();for(d=
c.value.C;c.next();){if(c.value.C.ie(d)){b++;if(b>1){b=h;break a}}if(e>10)break;e++}}b=o}if(b){b=this.p;for(e=b.TG().f;e.next();){this.Hc=d=e.value;for(c=this.p.R.f;c.next();){for(var d=c.value,g=0,i=d.R;i.next();)g++;d.ze=g;d.Bi=1;d.Jk=m;d.hg=m}en(this,0,a)}this.Hc=b;e.reset();s&&t.c(b,dn,cn,"arrangeConnectedGraphs:singletons");for(var c=this.ku,j=e.count,d=h,i=g=0,k=[],l=0;l<j+b.R.count+2;l++)k[l]=m;j=0;for(e.reset();e.next();){var n=e.value,l=this.de(n);if(d){d=o;g=l.x+l.width/2;i=l.y+l.height/
2;k[0]=new D(l.right+c.width,l.top);k[1]=new D(l.left,l.bottom+c.height);j=2}else{var q=fn(k,j,new D(g,i),new K(l.width,l.height),c),p=k[q],u=new D(p.x+l.width+c.width,p.y),w=new D(p.x,p.y+l.height+c.height);q+1<j&&k.splice(q+1,0,m);k[q]=u;k[q+1]=w;j++;q=p.x-l.x;l=p.y-l.y;for(n=n.R.f;n.next();){var B=n.value;B.Da=B.Da+q;B.Ea=B.Ea+l}}}for(n=b.R.f;n.next();){B=n.value;l=B.C;if(j<2){g=l.x+l.width/2;i=l.y+l.height/2;k[0]=new D(l.right+c.width,l.top);k[1]=new D(l.left,l.bottom+c.height);j=2}else{q=fn(k,
j,new D(g,i),new K(l.width,l.height),c);p=k[q];u=new D(p.x+l.width+c.width,p.y);w=new D(p.x,p.y+l.height+c.height);q+1<j&&k.splice(q+1,0,m);k[q]=u;k[q+1]=w;j++;B.Da=p.x+B.width/2;B.Ea=p.y+B.height/2}}for(e.reset();e.next();){d=e.value;for(g=d.R.f;g.next();){c=g.value;b.dk(c)}for(d=d.Qb.f;d.next();){c=d.value;b.$m(c)}}}gn(this,a);this.updateParts()}this.Dm=a;this.Hc=m;this.Re=h};
cn.prototype.de=function(a){s&&t.c(a,dn,cn,"computeBounds:net");for(var b=new E,c=h,a=a.R.f;a.next();){var d=a.value;if(c){c=o;b.set(d.C)}else b.zk(d.C)}return b};function hn(a,b,c){if(s){t.h(b,cn,"computeClusterLayoutIterations:level");t.h(c,cn,"computeClusterLayoutIterations:maxiter")}return Math.max(Math.min(a.p.R.count,c*(b+1)/11),10)}
function en(a,b,c){if(s){t.h(b,cn,"layoutClusters:level");t.h(c,cn,"layoutClusters:maxiter")}var d;s&&t.h(b,cn,"hasClusters:level");if(b>10||a.p.R.count<3)d=o;else{a.pf===m?a.pf=new z(jn):a.pf.clear();a.pf.kg(a.p.R);d=a.pf;d.sort(function(a,b){return a===m||b===m||a===b?0:b.ze-a.ze});for(var e=d.count-1;e>=0&&d.j[e].ze<=1;)e--;d=d.count-e>1}if(d){d=a.Cl;a.Cl=a.Cl*(1+1/(b+1));s&&t.h(b,cn,"pushSubNetwork:level");for(var e=a.p,g=new dn,i=a.pf.f;i.next();){var j=i.value;if(j.ze>1){g.dk(j);var k={lz:j.ze,
mz:j.width,kz:j.height,WD:j.B.x,XD:j.B.y};if(j.hg===m)j.hg=new z;j.hg.add(k);j.Ww=j.hg.count-1}else break}for(var l=e.Qb.f;l.next();){var n=l.value;if(n.I.p===g&&n.G.p===g)g.$m(n);else if(n.I.p===g){var q=n.I.Jk;if(q===m){q=new z(jn);n.I.Jk=q}q.add(n.G);n.I.ze--;n.I.Bi=n.I.Bi+n.G.Bi}else if(n.G.p===g){q=n.G.Jk;if(q===m){q=new z(jn);n.G.Jk=q}q.add(n.I);n.G.ze--;n.G.Bi=n.G.Bi+n.I.Bi}}for(l=g.Qb.f;l.next();){n=l.value;n.Eh=n.Eh*Math.max(1,Math.sqrt((n.I.Bi+n.G.Bi)/(4*b+1)))}for(i=g.R.f;i.next();){j=
i.value;q=j.Jk;if(q!==m&&q.count>0){k=j.hg.j[j.hg.count-1];k=k.lz-j.ze;if(!(k<=0)){for(var p=0,u=0,w=q.count-k;w<q.count;w++){for(var B=q.j[w],n=m,l=B.Qb.f;l.next();){var F=l.value;if(F.KF(B)===j){n=F;break}}if(n!==m){u=u+n.Eh;p=p+B.width*B.height}}q=j.Da;l=j.Ea;n=j.width;w=j.height;B=j.B;F=n*w;F<1&&(F=1);p=Math.sqrt((p+F+u*u*4/(k*k))/F);k=(p-1)*n/2;p=(p-1)*w/2;j.mb=new E(q-B.x-k,l-B.y-p,n+k*2,w+p*2);j.focus=new D(B.x+k,B.y+p)}}}a.Hc=g;g=Math.max(0,hn(a,b,c));a.Qu=a.Qu+g;en(a,b+1,c);gn(a,g);if(s){t.c(e,
dn,cn,"popNetwork:oldnet");t.h(b,cn,"popNetwork:level")}for(c=a.p.R.f;c.next();){g=c.value;g.p=e;if(g.hg!==m){i=g.hg.j[g.Ww];g.ze=i.lz;j=i.WD;k=i.XD;g.mb=new E(g.Da-j,g.Ea-k,i.mz,i.kz);g.focus=new D(j,k);g.Ww--}}for(c=a.p.Qb.f;c.next();)c.value.p=e;a.Hc=e;c=a.pf;c===m?c=new z(jn):c.clear();c.kg(e.R);c.sort(function(a,b){return a===m||b===m||a===b?0:b.ze-a.ze});for(e=c.f;e.next();)kn(a,e.value,b);a.Cl=d}}
function kn(a,b,c){if(s){t.c(b,jn,cn,"surroundNode:oldnet");t.h(c,cn,"surroundNode:level")}var d=b.Jk;if(!(d===m||d.count===0)){var c=b.Da,e=b.Ea,g=b.width,i=b.height;if(b.hg!==m&&b.hg.count>0){i=b.hg.j[0];g=i.mz;i=i.kz}for(var g=Math.sqrt(g*g+i*i)/2,j=o,k=i=0,l=0,n=b.R.f;n.next();){var q=n.value;if(q.ze<=1)k++;else{j=h;l++;i=i+Math.atan2(b.Ea-q.Ea,b.Da-q.Da)}}if(k!==0){l>0&&(i=i/l);l=b=0;b=j?Math.PI*2/(k+1):Math.PI*2/k;k%2===0&&(l=b/2);d.count>1&&d.sort(function(a,b){return a===m||b===m||a===b?0:
b.width*b.height-a.width*a.height});j=k%2===0?0:1;for(n=d.f;n.next();){q=n.value;if(!(q.ze>1)&&!a.isFixed(q)){d=m;for(k=q.Qb.f;k.next();){d=k.value;break}var k=q.width,p=q.height,d=g+d.Eh+Math.sqrt(k*k+p*p)/2,k=i+(b*(j/2>>1)+l)*(j%2==0?1:-1);q.Da=c+d*Math.cos(k);q.Ea=e+d*Math.sin(k);j++}}}}}
function fn(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,n=k.y-c.y,l=l*l+n*n;if(l<g){for(n=j-1;n>=0;n--)if(a[n].y>k.y&&a[n].x-k.x<d.width+e.width)continue a;for(n=j+1;n<b;n++)if(a[n].x>k.x&&a[n].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}cn.prototype.PA=function(a){var b=a.Ca;if(b!==m)for(b=b.QB();b.next();){var c=b.value;if(c.od==="Comment"){var d=this.p.ge(c);if(d===m){d=this.p.an(c);d.pi=this.tB;c=this.p.Fl(a,d,m);if(c!==m)c.Eh=this.uB}}}};
function ln(a,b){if(s){t.c(a,jn,cn,"getNodeDistance:vertexA");t.c(b,jn,cn,"getNodeDistance:vertexB")}var c=a.mb,d=c.x,e=c.y,g=c.width,c=c.height,i=b.mb,j=i.x,k=i.y,l=i.width,i=i.height;if(d+g<j){if(e>k+i){d=d+g-j;e=e-k-i;return Math.sqrt(d*d+e*e)}if(e+c<k){d=d+g-j;e=e+c-k;return Math.sqrt(d*d+e*e)}return j-(d+g)}if(d>j+l){if(e>k+i){d=d-j-l;e=e-k-i;return Math.sqrt(d*d+e*e)}if(e+c<k){d=d-j-l;e=e+c-k;return Math.sqrt(d*d+e*e)}return d-(j+l)}return e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function gn(a,b){s&&t.h(b,cn,"performIterations:num");a.pf=m;for(var c=a.Ap+b;a.Ap<c;){a.Ap++;if(!mn(a))break}a.pf=m}
function mn(a){if(a.pf===m){a.pf=new z(jn);a.pf.kg(a.p.R)}var b=a.pf;if(b.count<=0)return o;var c=b.j[0];c.sd=0;c.td=0;for(var d=c.Da,e=d,g=c.Ea,i=g,c=1;c<b.count;c++){var j=b.j[c];j.sd=0;j.td=0;var k=j.Da,j=j.Ea,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===m||b===m||a===b?0:a.Da-b.Da}):b.sort(function(a,b){return a===m||b===m||a===b?0:a.Ea-b.Ea});for(var l=0,n=k=0,c=0;c<b.count;c++){j=b.j[c];d=j.Da;e=j.Ea;k=j.pi*a.electricalFieldX(d,
e);n=j.pi*a.electricalFieldY(d,e);j.sd=j.sd+k;j.td=j.td+n;k=j.Cm*a.gravitationalFieldX(d,e);n=j.Cm*a.gravitationalFieldY(d,e);j.sd=j.sd+k;j.td=j.td+n;for(var q=a.Cl,p=c+1;p<b.count;p++){g=b.j[p];if(g!==j){var n=g.Da,u=g.Ea;if(Math.abs(d-n)>q){if(i)break}else if(Math.abs(e-u)>q){if(!i)break}else{var w=ln(j,g);if(w<1){if(d>n){k=Math.abs(g.C.right-j.C.left);k=nn(1+k)}else if(d<n){k=Math.abs(g.C.left-j.C.right);k=-nn(1+k)}else{k=Math.max(g.width,j.width);k=nn(1+k)-k/2}if(e>u){n=Math.abs(g.C.bottom-j.C.top);
n=nn(1+n)}else if(d<n){n=Math.abs(g.C.top-j.C.bottom);n=-nn(1+n)}else{n=Math.max(g.height,j.height);n=nn(1+n)-n/2}}else{l=-(j.pi*g.pi)/(w*w);k=l*((n-d)/w);n=l*((u-e)/w)}j.sd=j.sd+k;j.td=j.td+n;g.sd=g.sd-k;g.td=g.td-n}}}}for(c=a.p.Qb.f;c.next();){i=c.value;j=i.I;g=i.G;d=j.Da;e=j.Ea;n=g.Da;u=g.Ea;w=ln(j,g);if(w<1){k=(d>n?1:-1)*nn(1+Math.max(g.width,j.width));n=(e>u?1:-1)*nn(1+Math.max(g.height,j.height))}else{l=i.Kq*(w-i.Eh);k=l*((n-d)/w);n=l*((u-e)/w)}j.sd=j.sd+k;j.td=j.td+n;g.sd=g.sd-k;g.td=g.td-
n}c=0;d=Math.max(a.Cl/20,50);for(e=0;e<b.count;e++){j=b.j[e];if(!a.isFixed(j)){g=j.sd;i=j.td;g<-d?g=-d:g>d&&(g=d);i<-d?i=-d:i>d&&(i=d);j.Da=j.Da+g;j.Ea=j.Ea+i;c=Math.max(c,g*g+i*i)}}return c>a.Xx*a.Xx}function nn(a){s&&t.h(a,cn,"randNext:max");return Math.floor(a*Math.random())}cn.prototype.commitLayout=cn.prototype.ou=function(){this.Uy();this.commitNodes();this.commitLinks()};cn.prototype.Uy=function(){if(this.Ol)for(var a=this.p.Qb.f;a.next();){var b=a.value.Fa;if(b!==m){b.Ya=cc;b.$a=cc}}};
cn.prototype.commitNodes=cn.prototype.Nx=function(){var a=0,b=0;if(this.ZA)var b=this.de(this.p),c=this.Qc,a=c.x-b.x,b=c.y-b.y;for(var c=new E,d=this.p.R.f;d.next();){var e=d.value;if(a!==0||b!==0){c.set(e.C);c.x=c.x+a;c.y=c.y+b;e.mb=c}e.Wh()}};cn.prototype.commitLinks=cn.prototype.Mx=function(){for(var a=this.p.Qb.f;a.next();)a.value.Wh()};cn.prototype.springStiffness=cn.prototype.qK=function(a){a=a.Kq;return!isNaN(a)?a:this.yB};
cn.prototype.springLength=cn.prototype.pK=function(a){a=a.Eh;return!isNaN(a)?a:this.xB};cn.prototype.electricalCharge=cn.prototype.EI=function(a){a=a.pi;return!isNaN(a)?a:this.vB};cn.prototype.electricalFieldX=cn.prototype.FI=ca(0);cn.prototype.electricalFieldY=cn.prototype.GI=ca(0);cn.prototype.gravitationalMass=cn.prototype.$I=function(a){a=a.Cm;return!isNaN(a)?a:this.wB};cn.prototype.gravitationalFieldX=cn.prototype.YI=ca(0);cn.prototype.gravitationalFieldY=cn.prototype.ZI=ca(0);
cn.prototype.isFixed=cn.prototype.oC=function(a){return a.ww};t.m(cn,{oI:"currentIteration"},r("Ap"));t.a(cn,"arrangementSpacing",cn.prototype.ku);t.defineProperty(cn,{ku:"arrangementSpacing"},r("Ye"),function(a){if(!this.Ye.z(a)){this.Ye.Ua(a);this.v()}});t.a(cn,"arrangesToOrigin",cn.prototype.ZA);t.defineProperty(cn,{ZA:"arrangesToOrigin"},r("to"),function(a){if(this.to!==a){this.to=a;this.v()}});t.a(cn,"setsPortSpots",cn.prototype.Ol);
t.defineProperty(cn,{Ol:"setsPortSpots"},r("Ng"),function(a){if(this.Ng!==a){this.Ng=a;this.v()}});t.a(cn,"comments",cn.prototype.Lx);t.defineProperty(cn,{Lx:"comments"},r("kd"),function(a){if(this.kd!==a){this.kd=a;this.v()}});t.a(cn,"maxIterations",cn.prototype.Qu);t.defineProperty(cn,{Qu:"maxIterations"},r("Dm"),function(a){if(this.Dm!==a&&a>=0){this.Dm=a;this.v()}});t.a(cn,"epsilonDistance",cn.prototype.Xx);
t.defineProperty(cn,{Xx:"epsilonDistance"},r("Wo"),function(a){if(this.Wo!==a&&a>0){this.Wo=a;this.v()}});t.a(cn,"infinityDistance",cn.prototype.Cl);t.defineProperty(cn,{Cl:"infinityDistance"},r("lp"),function(a){if(this.lp!==a&&a>1){this.lp=a;this.v()}});t.a(cn,"defaultSpringStiffness",cn.prototype.yB);t.defineProperty(cn,{yB:"defaultSpringStiffness"},r("Oo"),function(a){if(this.Oo!==a){this.Oo=a;this.v()}});t.a(cn,"defaultSpringLength",cn.prototype.xB);
t.defineProperty(cn,{xB:"defaultSpringLength"},r("No"),function(a){if(this.No!==a){this.No=a;this.v()}});t.a(cn,"defaultElectricalCharge",cn.prototype.vB);t.defineProperty(cn,{vB:"defaultElectricalCharge"},r("Lo"),function(a){if(this.Lo!==a){this.Lo=a;this.v()}});t.a(cn,"defaultGravitationalMass",cn.prototype.wB);t.defineProperty(cn,{wB:"defaultGravitationalMass"},r("Mo"),function(a){if(this.Mo!==a){this.Mo=a;this.v()}});t.a(cn,"defaultCommentSpringLength",cn.prototype.uB);
t.defineProperty(cn,{uB:"defaultCommentSpringLength"},r("Jo"),function(a){if(this.Jo!==a){this.Jo=a;this.v()}});t.a(cn,"defaultCommentElectricalCharge",cn.prototype.tB);t.defineProperty(cn,{tB:"defaultCommentElectricalCharge"},r("Io"),function(a){if(this.Io!==a){this.Io=a;this.v()}});function dn(){Cm.call(this)}t.J("ForceDirectedNetwork",dn);t.ua(dn,Cm);dn.prototype.createVertex=dn.prototype.Oi=function(){return new jn};dn.prototype.createEdge=dn.prototype.pn=function(){return new on};
function jn(){Gm.call(this);this.ww=o;this.Cm=this.pi=NaN;this.Bi=this.ze=this.td=this.sd=0;this.hg=this.Jk=m;this.Ww=0}t.J("ForceDirectedVertex",jn);t.ua(jn,Gm);t.a(jn,"isFixed",jn.prototype.oC);t.defineProperty(jn,{oC:"isFixed"},r("ww"),ba("ww"));t.a(jn,"charge",jn.prototype.cF);t.defineProperty(jn,{cF:"charge"},r("pi"),ba("pi"));t.a(jn,"mass",jn.prototype.lG);t.defineProperty(jn,{lG:"mass"},r("Cm"),ba("Cm"));t.a(jn,"forceX",jn.prototype.EF);t.defineProperty(jn,{EF:"forceX"},r("sd"),ba("sd"));
t.a(jn,"forceY",jn.prototype.FF);t.defineProperty(jn,{FF:"forceY"},r("td"),ba("td"));function on(){Hm.call(this);this.Eh=this.Kq=NaN}t.J("ForceDirectedEdge",on);t.ua(on,Hm);t.a(on,"stiffness",on.prototype.VG);t.defineProperty(on,{VG:"stiffness"},r("Kq"),ba("Kq"));t.a(on,"length",on.prototype.length);t.defineProperty(on,{length:"length"},r("Eh"),ba("Eh"));
function Z(){Ih.call(this);this.Vc=this.ld=25;this.Q=0;this.fm=pn;this.ym=qn;this.sm=rn;this.Wk=4;this.Yl=sn;this.Lh=tn;this.Ng=h;this.ab=this.ft=this.Oa=-1;this.ye=this.Rp=0;this.Yc=this.xe=this.Wf=this.Lg=this.Xc=m;this.Yp=0;this.qt=this.al=m;this.hf=0;this.Zp=m;this.cg=[];this.cg.length=100}t.J("LayeredDigraphLayout",Z);t.ua(Z,Ih);
Z.prototype.cloneProtected=Z.prototype.jb=function(a){Ih.prototype.jb.call(this,a);a.ld=this.ld;a.Vc=this.Vc;a.Q=this.Q;a.fm=this.fm;a.ym=this.ym;a.sm=this.sm;a.Wk=this.Wk;a.Yl=this.Yl;a.Lh=this.Lh;a.Ng=this.Ng};Z.prototype.createNetwork=Z.prototype.su=function(){var a=new un;Dm(a,this);return a};
Z.prototype.doLayout=Z.prototype.or=function(a){if(this.Hc===m)this.Hc=this.makeNetwork(a);this.Qc=Fm(this,this.Qc);this.ft=-1;this.ye=this.Rp=0;this.Zp=this.qt=this.al=m;var b;for(b=0;b<this.cg.length;b++)this.cg[b]=m;if(this.p.R.count>0){this.p.wu();for(var c=this.p.Qb.f;c.next();)c.value.ib=o;switch(this.fm){default:case vn:var d=0,e=this.p.R.count-1,g=[];g.length=e+1;for(var i=this.p.R.f;i.next();)i.value.ra=h;for(;wn(this.p)!==m;){var j;for(j=xn(this.p);j!==m;){g[e]=j;e--;j.ra=o;j=xn(this.p)}for(j=
yn(this.p);j!==m;){g[d]=j;d++;j.ra=o;j=yn(this.p)}s&&t.c(this.p,Cm,Z,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var k=m,l=0,n=this.p.R.f;n.next();){var q=n.value;if(q.ra){for(var p=0,u=q.sb;u.next();)u.value.G.ra&&p++;for(var w=0,B=q.tb;B.next();)B.value.I.ra&&w++;if(k===m||l<p-w){k=q;l=p-w}}}j=k;if(j!==m){g[d]=j;d++;j.ra=o}}var F;for(F=0;F<this.p.R.count;F++)g[F].W=F;for(var H=this.p.Qb.f;H.next();){var x=H.value;if(x.I.W>x.G.W){this.p.Zu(x);x.ib=h}}break;case pn:for(var I=this.p.R.f;I.next();){I.value.yj=
-1;I.value.nm=-1}for(var y=this.p.Qb.f;y.next();)y.value.Zo=o;this.Yp=0;for(I.reset();I.next();)I.value.tb.count===0&&zn(this,I.value);for(I.reset();I.next();)I.value.yj===-1&&zn(this,I.value);for(y.reset();y.next();){var G=y.value;if(!G.Zo){var fa=G.I,R=fa.nm,S=G.G,da=S.nm;if(S.yj<fa.yj&&R<da){this.p.Zu(G);G.ib=h}}}}for(var ma=this.p.R.f,Ha;ma.next();){Ha=ma.value;Ha.w=-1;var sa=Ha.Ca;if(typeof sa!=="undefined"&&sa!==m){var db=sa.ta.width,Ya=sa.ta.height;Ha.width=db;Ha.height=Ya;Ha.Gu=db*0.5;Ha.Hu=
Ya*0.5}}this.Oa=-1;switch(this.ym){case An:Bn(this);break;case Cn:for(var bb,Oa=this.p.R.f;Oa.next();){bb=Dn(this,Oa.value);this.Oa=Math.max(bb,this.Oa)}Oa.reset();for(var hb;Oa.next();){hb=Oa.value;hb.w=this.Oa-hb.w}break;default:case qn:Bn(this);for(var Va=this.p.R.f;Va.next();)Va.value.ra=o;for(Va.reset();Va.next();)Va.value.tb.count===0&&En(this,Va.value);var uc=Infinity;for(Va.reset();Va.next();)uc=Math.min(uc,Va.value.w);this.Oa=-1;for(Va.reset();Va.next();){Va.value.w=Va.value.w-uc;this.Oa=
Math.max(this.Oa,Va.value.w)}}for(ma.reset();ma.next();)this.Oa=Math.max(this.Oa,ma.value.w);for(var zd=this.p.Qb.f,Wa,Cc=[];zd.next();){Wa=zd.value;Wa.ra=o;Cc.push(Wa)}for(var Ad=0;Ad<Cc.length;Ad++){Wa=Cc[Ad];if(!Wa.ra&&!((Wa.I.Ca===m||Wa.G.Ca===m)&&Wa.I.w===Wa.G.w)){var pc,Ub,gc,Dc;pc=Ub=gc=Dc=0;var Gb=Wa.I,Bb=Wa.G;if(Wa.Fa!==m){var Za=Wa.Fa;if(Za===m)continue;var Wc=Gb.Ca,Lc=Bb.Ca;if(Wc===m||Lc===m)continue;var kd=Za.ia,oa=Za.ma,Ia=Za.Fc,af=Za.rd;if(Wa.ib)var Jf=kd,xe=Ia,kd=oa,Ia=af,oa=Jf,af=
xe;var ye=Gb.B.copy(),ze=Wa.G.B.copy(),Kf=Wa.ib?Bb.C.copy():Gb.C.copy(),Ec=isNaN(Kf.x)?ye.copy():pl(kd,Ia,mc);if(Wc!==kd&&!isNaN(Kf.x)&&kd.kb()){var wc=Gb.C.copy();if(!isNaN(wc.x)){Ec.x=Ec.x+(Kf.x-wc.x);Ec.y=Ec.y+(Kf.y-wc.y)}}var mb=Wa.ib?Gb.C.copy():Bb.C.copy(),Mc=isNaN(mb.x)?ze.copy():pl(oa,af,mc);if(Lc!==oa&&!isNaN(mb.x)&&oa.kb()){var Bd=Bb.C;if(!isNaN(Bd.x)){Mc.x=Mc.x+(mb.x-Bd.x);Mc.y=Mc.y+(mb.y-Bd.y)}}if(this.Q===90||this.Q===270){pc=Math.round((Ec.x-ye.x)/this.Vc);gc=Ec.x;Ub=Math.round((Mc.x-
ze.x)/this.Vc);Dc=Mc.x}else{pc=Math.round((Ec.y-ye.y)/this.Vc);gc=Ec.y;Ub=Math.round((Mc.y-ze.y)/this.Vc);Dc=Mc.y}Wa.Ae=pc;Wa.Be=gc;Wa.Yd=Ub;Wa.De=Dc}else{Wa.Ae=0;Wa.Be=0;Wa.Yd=0;Wa.De=0}var ld=Gb.w,Hb=Bb.w,ub,md=Wa;s&&t.c(md,Fn,Z,"_goesAround:edge");var Nc=0,Oc=md.Fa;if(Oc!==m){if(Oc.Fc!==m){var Pd=Oc.ia;Vl(Oc)===Gn(this,md,h)?Nc=Nc+1:this.Ol&&Pd!==m&&Pd.ports.count===1&&md.ib&&(Nc=Nc+1)}if(Oc.rd!==m){var Qd=Oc.ma;Wl(Oc)===Gn(this,md,o)?Nc=Nc+2:this.Ol&&Qd!==m&&Qd.ports.count===1&&md.ib&&(Nc=Nc+
2)}}ub=Nc;var hc=ub===1||ub===3?h:o,Zb=ub===2||ub===3?h:o,ab,Cb;if(Zb){Cb=this.p.Oi();Cb.Ca=m;Cb.Fk=1;Cb.w=ld;Cb.yi=Gb;this.p.dk(Cb);ab=this.p.Fl(Gb,Cb,Wa.Fa);ab.ra=o;ab.ib=Wa.ib;ab.Ae=pc;ab.Yd=0;ab.Be=gc;ab.De=0;Gb=Cb}var nd=1;hc&&nd--;if(ld-Hb>nd&&ld>0){Wa.ra=o;Cb=this.p.Oi();Cb.Ca=m;Cb.Fk=2;Cb.w=ld-1;this.p.dk(Cb);ab=this.p.Fl(Gb,Cb,Wa.Fa);ab.ra=h;ab.ib=Wa.ib;ab.Ae=Zb?0:pc;ab.Yd=0;ab.Be=Zb?0:gc;ab.De=0;Gb=Cb;for(ld--;ld-Hb>nd&&ld>0;){Cb=this.p.Oi();Cb.Ca=m;Cb.Fk=3;Cb.w=ld-1;this.p.dk(Cb);ab=this.p.Fl(Gb,
Cb,Wa.Fa);ab.ra=h;ab.ib=Wa.ib;ab.Ae=0;ab.Yd=0;ab.Be=0;ab.De=0;Gb=Cb;ld--}ab=this.p.Fl(Cb,Bb,Wa.Fa);ab.ra=!hc;if(hc)Cb.yi=Bb;ab.ib=Wa.ib;ab.Ae=0;ab.Yd=Ub;ab.Be=0;ab.De=Dc}else Wa.ra=h}}var $b=this.Xc=[],vb;for(vb=0;vb<=this.Oa;vb++)$b[vb]=0;for(var Rd=this.p.R.f;Rd.next();)Rd.value.W=-1;switch(this.sm){default:case Hn:for(var Pb,ac=this.p.R.f;ac.next();){var Sd=ac.value;Pb=Sd.w;Sd.W=this.Xc[Pb];this.Xc[Pb]++}break;case rn:var Ae,od=this.p.R.f;for(Ae=this.Oa;Ae>=0;Ae--){for(;od.next();)od.value.w===
Ae&&od.value.W===-1&&In(this,od.value);od.reset()}break;case Jn:var cd,Fc=this.p.R.f;for(cd=0;cd<=this.Oa;cd++){for(;Fc.next();)Fc.value.w===cd&&Fc.value.W===-1&&Kn(this,Fc.value);Fc.reset()}}this.ft=-1;for(vb=this.ye=this.Rp=0;vb<=this.Oa;vb++){if($b[vb]>$b[this.ye]){this.ft=$b[vb]-1;this.ye=vb}if($b[vb]<$b[this.Rp])this.Rp=vb}this.Zp=[];for(vb=0;vb<$b.length;vb++)this.Zp[vb]=[];Rd.reset();for(var bc,Cd;Rd.next();){Cd=Rd.value;bc=Cd.w;this.Zp[bc][Cd.W]=Cd}this.ab=-1;for(var bf=0;bf<=this.Oa;bf++){for(var Td=
Ln(this,bf),Ud=0,ce=this.Xc[bf],pd=0;pd<ce;pd++){var qd=Td[pd],Ud=Ud+Wn(this,qd,h);qd.M=Ud;Ud=Ud+1;Ud=Ud+Wn(this,qd,o)}this.ab=Math.max(this.ab,Ud-1);co(this,bf,Td)}var ib=eo(this),pb=fo(this),Xc,ha,Ta;for(Xc=0;Xc<this.Wk;Xc++){for(ha=0;ha<=this.Oa;ha++){ho(this,ha,1);io(this,ha,1,1)}Ta=eo(this);if(Ta<ib){ib=Ta;pb=fo(this)}for(ha=this.Oa;ha>=0;ha--){ho(this,ha,-1);io(this,ha,-1,-1)}Ta=eo(this);if(Ta<ib){ib=Ta;pb=fo(this)}}jo(this,pb);for(Xc=0;Xc<this.Wk;Xc++){for(ha=0;ha<=this.Oa;ha++){ho(this,ha,
0);io(this,ha,0,0)}Ta=eo(this);if(Ta<ib){ib=Ta;pb=fo(this)}for(ha=this.Oa;ha>=0;ha--){ho(this,ha,0);io(this,ha,0,0)}Ta=eo(this);if(Ta<ib){ib=Ta;pb=fo(this)}}jo(this,pb);var Ba,wb,ic,rd,sd;switch(this.Yl){case ko:break;case lo:for(rd=ib+1;(sd=eo(this))<rd;){rd=sd;for(wb=this.Oa;wb>=0;wb--)for(ic=0;ic<=wb;ic++){for(Ba=h;Ba;){Ba=o;for(ha=wb;ha>=ic;ha--)Ba=io(this,ha,-1,-1)||Ba}Ta=eo(this);if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=wb;ha>=ic;ha--)Ba=io(this,ha,1,1)||Ba}Ta=
eo(this);if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=wb;ha++)Ba=io(this,ha,1,1)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=wb;ha++)Ba=io(this,ha,-1,-1)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=wb;ha>=ic;ha--)Ba=io(this,ha,0,0)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=wb;ha++)Ba=io(this,ha,0,0)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}}}break;default:case sn:wb=
this.Oa;ic=0;for(rd=ib+1;(sd=eo(this))<rd;){rd=sd;for(Ba=h;Ba;){Ba=o;for(ha=wb;ha>=ic;ha--)Ba=io(this,ha,-1,-1)||Ba}Ta=eo(this);if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=wb;ha>=ic;ha--)Ba=io(this,ha,1,1)||Ba}Ta=eo(this);if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=wb;ha++)Ba=io(this,ha,1,1)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=wb;ha++)Ba=io(this,ha,-1,-1)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;
pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=wb;ha>=ic;ha--)Ba=io(this,ha,0,0)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}for(Ba=h;Ba;){Ba=o;for(ha=ic;ha<=wb;ha++)Ba=io(this,ha,0,0)||Ba}if(Ta>=ib)jo(this,pb);else{ib=Ta;pb=fo(this)}}}jo(this,pb);var Qa,Qb,cf=(this.Lh&mo)!==0,Lf=this.Lh===tn;this.p.Qb.count>1E3&&!Lf&&(cf=o);if(cf){var Ca=[],ia;for(ia=0;ia<=this.Oa;ia++)Ca[ia]=0;for(var de=this.p.R.f,Dd,Db;de.next();){Dd=de.value;Qa=Dd.w;Db=Dd.M;var td=Wn(this,Dd,o);Ca[Qa]=Math.max(Ca[Qa],Db+td)}for(de.reset();de.next();){Dd=
de.value;Qa=Dd.w;Db=Dd.M;Dd.M=((this.ab-Ca[Qa])*8>>1)+Db*8}this.ab=this.ab*8}if((this.Lh&no)!==0)for(Qb=h;Qb;){Qb=o;for(Qa=this.ye+1;Qa<=this.Oa;Qa++)Qb=oo(this,Qa,1)||Qb;for(Qa=this.ye-1;Qa>=0;Qa--)Qb=oo(this,Qa,-1)||Qb;Qb=oo(this,this.ye,0)||Qb}if((this.Lh&po)!==0){for(Qa=this.ye+1;Qa<=this.Oa;Qa++)qo(this,Qa,1);for(Qa=this.ye-1;Qa>=0;Qa--)qo(this,Qa,-1);qo(this,this.ye,0)}if(cf){ro(this,-1);ro(this,1)}if((this.Lh&no)!==0)for(Qb=h;Qb;){Qb=o;Qb=oo(this,this.ye,0)||Qb;for(Qa=this.ye+1;Qa<=this.Oa;Qa++)Qb=
oo(this,Qa,0)||Qb;for(Qa=this.ye-1;Qa>=0;Qa--)Qb=oo(this,Qa,0)||Qb}this.updateParts()}this.Hc=m;this.Re=h};function so(a){s&&t.c(a,Hm,Z,"linkMinLength:edge");for(var b=a.G,c=0,a=a.I.sb;a.next();)a.value.G===b&&c++;return c>1?2:1}function to(a){s&&t.c(a,Hm,Z,"linkLengthWeight:edge");return 1}function uo(a){s&&t.c(a,Hm,Z,"linkStraightenWeight:edge");var b=a.I.Ca,a=a.G.Ca;return b===m&&a===m?8:b===m||a===m?4:1}
function vo(a,b,c){if(s){t.c(b,wo,Z,"nodeMinLayerSpace:v");t.e(c,"boolean",Z,"nodeMinLayerSpace:topleft")}return b.Ca===m?0:a.Q===90||a.Q===270?c?b.B.y+10:b.C.height-b.B.y+10:c?b.B.x+10:b.C.width-b.B.x+10}
function Wn(a,b,c){if(s){t.c(b,wo,Z,"nodeMinColumnSpace:v");t.e(c,"boolean",Z,"nodeMinColumnSpace:topleft")}if(b.Ca===m)return 0;var d=c?b.Hw:b.Gw;if(d!==f)return d;d=a.Q;return d===90||d===270?c?b.Hw=b.B.x/a.Vc+1|0:b.Gw=(b.C.width-b.B.x)/a.Vc+1|0:c?b.Hw=b.B.y/a.Vc+1|0:b.Gw=(b.C.height-b.B.y)/a.Vc+1|0}function fo(a){if(a.al===m)a.al=[];for(var b=0,c=a.p.R.f,d;c.next();){d=c.value;a.al[b]=d.w;b++;a.al[b]=d.M;b++;a.al[b]=d.W;b++}return a.al}
function jo(a,b){s&&t.c(b,Array,Z,"restoreLayout:layout");for(var c=0,d=a.p.R.f,e;d.next();){e=d.value;e.w=b[c];c++;e.M=b[c];c++;e.W=b[c];c++}}
function xo(a,b,c){if(s){t.h(b,Z,"crossingMatrix:unfixedLayer");t.h(c,Z,"crossingMatrix:direction")}var d=Ln(a,b),e=a.Xc[b];if(!a.qt)a.qt=[];for(var g=a.qt,i,j=0;j<e;j++){i=0;var k=d[j],l=k.yi,n,q;if(l!==m&&l.w===k.w){k=l.W;if(k>j)for(q=j+1;q<k;q++){n=d[q];(n.yi!==l||n.Fk!==l.Fk)&&i++}else for(q=j-1;q>k;q--){n=d[q];(n.yi!==l||n.Fk!==l.Fk)&&i++}}var p,u,w,B,F,H;if(c>=0){k=d[j].mf;for(l=0;l<k.count;l++){p=k.j[l];if(p.ra&&p.I.w!==b){n=p.I.W;q=p.De;p=p.Be;for(u=l+1;u<k.count;u++){w=k.j[u];if(w.ra&&w.I.w!==
b){B=w.I.W;F=w.De;w=w.Be;q<F&&(n>B||n===B&&p>w)&&i++;F<q&&(B>n||B===n&&w>p)&&i++}}}}}if(c<=0){k=d[j].we;for(l=0;l<k.count;l++){p=k.j[l];if(p.ra&&p.G.w!==b){n=p.G.W;q=p.De;p=p.Be;for(u=l+1;u<k.count;u++){w=k.j[u];if(w.ra&&w.G.w!==b){B=w.G.W;F=w.De;w=w.Be;p<w&&(n>B||n===B&&q>F)&&i++;w<p&&(B>n||B===n&&F>q)&&i++}}}}}g[j*e+j]=i;for(k=j+1;k<e;k++){var x=0,I=0;if(c>=0){i=d[j].mf;H=d[k].mf;for(l=0;l<i.count;l++){p=i.j[l];if(p.ra&&p.I.w!==b){n=p.I.W;p=p.Be;for(u=0;u<H.count;u++){w=H.j[u];if(w.ra&&w.I.w!==
b){B=w.I.W;w=w.Be;(n<B||n===B&&p<w)&&I++;(B<n||B===n&&w<p)&&x++}}}}}if(c<=0){i=d[j].we;H=d[k].we;for(l=0;l<i.count;l++){p=i.j[l];if(p.ra&&p.G.w!==b){n=p.G.W;q=p.De;for(u=0;u<H.count;u++){w=H.j[u];if(w.ra&&w.G.w!==b){B=w.G.W;F=w.De;(n<B||n===B&&q<F)&&I++;(B<n||B===n&&F<q)&&x++}}}}}g[j*e+k]=x;g[k*e+j]=I}}co(a,b,d);return g}function eo(a){var b,c=0,d,e;for(b=0;b<=a.Oa;b++){d=xo(a,b,1);e=a.Xc[b];for(var g=0;g<e;g++)for(var i=g;i<e;i++)c=c+d[g*e+i]}return c}
function yo(a){s&&t.e(h,"boolean",Z,"countBends:weighted");for(var b=0,c=0;c<=a.Oa;c++){var d=a,e=c;if(s){t.h(e,Z,"bends:unfixedLayer");t.h(1,Z,"bends:direction");t.e(h,"boolean",Z,"bends:weighted")}for(var g=Ln(d,e),i=d.Xc[e],j=0,k=f,k=0;k<i;k++){var l=g[k].we,n,q,p;if(typeof l!=="undefined")for(var u=0;u<l.count;u++){n=l.j[u];if(n.ra&&n.G.w!==e){q=n.I.M+n.Ae;p=n.G.M+n.Yd;j=j+(Math.abs(q-p)+1)*uo(n)}}}co(d,e,g);b=b+j}return b}
Z.prototype.normalize=function(){var a=Infinity;this.ab=-1;for(var b=this.p.R.f,c;b.next();){c=b.value;a=Math.min(a,c.M-Wn(this,c,h));this.ab=Math.max(this.ab,c.M+Wn(this,c,o))}for(b.reset();b.next();)b.value.M=b.value.M-a;this.ab=this.ab-a};
function zo(a,b,c){if(s){t.h(b,Z,"barycenters:unfixedLayer");t.h(c,Z,"barycenters:direction")}var d=Ln(a,b),e=a.Xc[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=m;if(c<=0)k=j.mf;var l=m;if(c>=0)l=j.we;var n=0,q=0,p=j.yi;if(p!==m&&p.w===j.w){n=n+(p.M-1);q++}if(k!==m)for(p=0;p<k.count;p++){var j=k.j[p],u=j.I;if(j.ra&&!j.ib&&u.w!==b){n=n+(u.M+j.Ae);q++}}if(l!==m)for(k=0;k<l.count;k++){j=l.j[k];p=j.G;if(j.ra&&!j.ib&&p.w!==b){n=n+(p.M+j.Yd);q++}}g[i]=q===0?-1:n/q}co(a,b,d);return g}
function Ao(a,b,c){if(s){t.h(b,Z,"medians:unfixedLayer");t.h(c,Z,"medians:direction")}for(var d=Ln(a,b),e=a.Xc[b],g=[],i=0;i<e;i++){var j=d[i],k=m;if(c<=0)k=j.mf;var l=m;if(c>=0)l=j.we;var n=0,q=[],p=j.yi;if(p!==m&&p.w===j.w){q[n]=p.M-1;n++}if(k!==m)for(p=0;p<k.count;p++){var j=k.j[p],u=j.I;if(j.ra&&!j.ib&&u.w!==b){q[n]=u.M+j.Ae;n++}}if(l!==m)for(k=0;k<l.count;k++){j=l.j[k];p=j.G;if(j.ra&&!j.ib&&p.w!==b){q[n]=p.M+j.Yd;n++}}if(n===0)g[i]=-1;else{q.sort(function(a,b){return a-b});l=n>>1;g[i]=n&1?q[l]:
q[l-1]+q[l]>>1}}co(a,b,d);return g}function Bo(a,b,c,d,e,g){if(s){t.c(b,wo,Z,"tightComponentUnset:v");t.h(c,Z,"tightComponentUnset:component");t.h(d,Z,"tightComponentUnset:unset");t.e(e,"boolean",Z,"tightComponentUnset:forward");t.e(g,"boolean",Z,"tightComponentUnset:backward")}if(b.ub===d){b.ub=c;var i,j;if(e)for(var k=b.sb;k.next();){var l=k.value.G;i=b.w-l.w;j=so(k.value);i===j&&Bo(a,l,c,d,e,g)}if(g)for(k=b.tb;k.next();){l=k.value.I;i=l.w-b.w;j=so(k.value);i===j&&Bo(a,l,c,d,e,g)}}}
function Co(a,b,c,d,e,g){if(s){t.c(b,wo,Z,"componentUnset:v");t.h(c,Z,"componentUnset:component");t.h(d,Z,"componentUnset:unset");t.e(e,"boolean",Z,"componentUnset:forward");t.e(g,"boolean",Z,"componentUnset:backward")}if(b.ub===d){b.ub=c;if(e)for(var i=b.sb,j;i.next();){j=i.value.G;Co(a,j,c,d,e,g)}if(g)for(b=b.tb;b.next();){i=b.value.I;Co(a,i,c,d,e,g)}}}function wn(a){s&&t.c(a,Cm,Z,"greedyCycleRemovalFindNode:network");for(a=a.R.f;a.next();){var b=a.value;if(b.ra)return b}return m}
function xn(a){s&&t.c(a,Cm,Z,"greedyCycleRemovalFindSink:network");for(a=a.R.f;a.next();){var b=a.value;if(b.ra){for(var c=h,d=b.sb;d.next();)if(d.value.G.ra){c=o;break}if(c)return b}}return m}function yn(a){s&&t.c(a,Cm,Z,"greedyCycleRemovalFindSource:network");for(a=a.R.f;a.next();){var b=a.value;if(b.ra){for(var c=h,d=b.tb;d.next();)if(d.value.I.ra){c=o;break}if(c)return b}}return m}
function zn(a,b){s&&t.c(b,wo,Z,"depthFirstSearchCycleRemovalVisit:v");b.yj=a.Yp;a.Yp++;for(var c=b.sb;c.next();){var d=c.value,e=d.G;if(e.yj===-1){d.Zo=h;zn(a,e)}}b.nm=a.Yp;a.Yp++}function Bn(a){for(var b=a.p.R.f;b.next();){var c=Do(a,b.value);a.Oa=Math.max(c,a.Oa)}}function Do(a,b){s&&t.c(b,wo,Z,"longestPathSinkLayeringLength:v");var c=0;if(b.w===-1){for(var d=b.sb;d.next();)var e=d.value,g=so(e),c=Math.max(c,Do(a,e.G)+g);b.w=c}else c=b.w;return c}
function Dn(a,b){s&&t.c(b,wo,Z,"longestPathSourceLayeringLength:v");var c=0;if(b.w===-1){for(var d,e,g=b.tb;g.next();){e=g.value;d=so(e);c=Math.max(c,Dn(a,e.I)+d)}b.w=c}else c=b.w;return c}
function En(a,b){s&&t.c(b,wo,Z,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.ra){b.ra=h;for(var c=b.sb;c.next();)En(a,c.value.G);s&&t.c(b,wo,Z,"optimalLinkLengthLayeringPull:v");for(c=a.p.R.f;c.next();)c.value.ub=-1;for(var d=b.tb;d.next();){var e=d.value,g=so(e);e.I.w-e.G.w>g&&Bo(a,e.I,0,-1,h,o)}for(Bo(a,b,1,-1,h,h);b.ub!==0;){for(var g=0,d=Infinity,i=0,j=m,k=a.p.R.f;k.next();){var l=k.value;if(l.ub===1){for(var n=0,q=o,p=l.tb;p.next();){var e=p.value,u=e.I,n=n+to(e);if(u.ub!==1){g=g+to(e);
u=u.w-l.w;e=so(e);d=Math.min(d,u-e)}}for(e=l.sb;e.next();){p=e.value;u=p.G;n=n-to(p);u.ub!==1?g=g-to(p):q=h}if((j===m||n<i)&&!q){j=l;i=n}}}if(g>0){for(c.reset();c.next();){g=c.value;if(g.ub===1)g.w=g.w+d}b.ub=0}else j.ub=0}s&&t.c(b,wo,Z,"optimalLinkLengthLayeringPush:v");for(c=a.p.R.f;c.next();)c.value.ub=-1;for(Bo(a,b,1,-1,h,o);b.ub!==0;){g=0;d=Infinity;i=0;j=m;for(k=a.p.R.f;k.next();){l=k.value;if(l.ub===1){n=0;q=o;for(e=l.tb;e.next();){p=e.value.I;n=n+to(e.value);p.ub!==1?g=g+to(e.value):q=h}for(e=
k.value.sb;e.next();){p=e.value;u=p.G;n=n-to(p);if(u.ub!==1){g=g-to(p);u=l.w-u.w;p=so(p);d=Math.min(d,u-p)}}if((j===m||n>i)&&!q){j=l;i=n}}}if(g<0){for(c.reset();c.next();){g=c.value;if(g.ub===1)g.w=g.w-d}b.ub=0}else j.ub=0}}}function Gn(a,b,c){if(s){t.c(b,Fn,Z,"_oppositeSpotDir:edge");t.e(c,"boolean",Z,"_oppositeSpotDir:from")}return a.Q===90?c&&!b.ib||!c&&b.ib?ec:oc:a.Q===180?c&&!b.ib||!c&&b.ib?tc:sc:a.Q===270?c&&!b.ib||!c&&b.ib?oc:ec:c&&!b.ib||!c&&b.ib?sc:tc}
function In(a,b){s&&t.c(b,wo,Z,"depthFirstOutInitializeIndicesVisit:v");var c=b.w;b.W=a.Xc[c];a.Xc[c]++;for(var c=b.we.Jf(),d=h,e;d;){d=o;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];if(g.Ae>i.Ae){d=h;c[e]=i;c[e+1]=g}}}for(e=0;e<c.length;e++){d=c[e];if(d.ra){d=d.G;d.W===-1&&In(a,d)}}}
function Kn(a,b){s&&t.c(b,wo,Z,"depthFirstInInitializeIndicesVisit:v");var c=b.w;b.W=a.Xc[c];a.Xc[c]++;for(var c=b.mf.Jf(),d=h,e;d;){d=o;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];if(g.Yd>i.Yd){d=h;c[e]=i;c[e+1]=g}}}for(e=0;e<c.length;e++){d=c[e];if(d.ra){d=d.I;d.W===-1&&Kn(a,d)}}}
function ho(a,b,c){if(s){t.h(b,Z,"medianBarycenterCrossingReduction:unfixedLayer");t.h(c,Z,"medianBarycenterCrossingReduction:direction")}for(var d=Ln(a,b),e=a.Xc[b],g=Ao(a,b,c),i=zo(a,b,c),c=0;c<e;c++){if(i[c]===-1)i[c]=d[c].M;if(g[c]===-1)g[c]=d[c].M}for(var j=h,k;j;){j=o;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c]){j=h;k=g[c];g[c]=g[c+1];g[c+1]=k;k=i[c];i[c]=i[c+1];i[c+1]=k;k=d[c];d[c]=d[c+1];d[c+1]=k}}for(c=g=0;c<e;c++){k=d[c];k.W=c;g=g+Wn(a,k,h);k.M=g;g=g+1;g=g+Wn(a,k,o)}co(a,
b,d)}
function io(a,b,c,d){if(s){t.h(b,Z,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer");t.h(c,Z,"adjacentExchangeCrossingReductionBendStraighten:directionCR");t.e(o,"boolean",Z,"adjacentExchangeCrossingReductionBendStraighten:straighten");t.h(d,Z,"adjacentExchangeCrossingReductionBendStraighten:directionBS")}var d=Ln(a,b),e=a.Xc[b],c=xo(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=o,l=h;l;){l=o;for(g=0;g<e-1;g++){var n=c[d[g].W*e+d[g+1].W],q=c[d[g+
1].W*e+d[g].W],p=0,u=0,w=d[g].M,B=d[g+1].M,F=Wn(a,d[g],h),H=Wn(a,d[g],o),x=Wn(a,d[g+1],h),I=Wn(a,d[g+1],o),F=w-F+x,H=B-H+I,y=d[g].tb.f;for(y.reset();y.next();){I=y.value;if(I.ra&&I.I.w===b){I=I.I;for(x=0;d[x]!==I;)x++;if(x<g){p=p+2*(g-x);u=u+2*(g+1-x)}x===g+1&&(p=p+1);if(x>g+1){p=p+4*(x-g);u=u+4*(x-(g+1))}}}y=d[g].sb.f;for(y.reset();y.next();){I=y.value;if(I.ra&&I.G.w===b){I=I.G;for(x=0;d[x]!==I;)x++;x===g+1&&(u=u+1)}}y=d[g+1].tb.f;for(y.reset();y.next();){I=y.value;if(I.ra&&I.I.w===b){I=I.I;for(x=
0;d[x]!==I;)x++;if(x<g){p=p+2*(g+1-x);u=u+2*(g-x)}x===g&&(u=u+1);if(x>g+1){p=p+4*(x-(g+1));u=u+4*(x-g)}}}y=d[g+1].sb.f;for(y.reset();y.next();){I=y.value;if(I.ra&&I.G.w===b){I=I.G;for(x=0;d[x]!==I;)x++;x===g&&(p=p+1)}}var x=I=0,y=i[d[g].W],G=j[d[g].W],fa=i[d[g+1].W],R=j[d[g+1].W];if(y!==-1){I=I+Math.abs(y-w);x=x+Math.abs(y-H)}if(G!==-1){I=I+Math.abs(G-w);x=x+Math.abs(G-H)}if(fa!==-1){I=I+Math.abs(fa-B);x=x+Math.abs(fa-F)}if(R!==-1){I=I+Math.abs(R-B);x=x+Math.abs(R-F)}if(u<p-0.5||u===p&&q<n-0.5||u===
p&&q===n&&x<I-0.5){l=k=h;d[g].M=H;d[g+1].M=F;n=d[g];d[g]=d[g+1];d[g+1]=n}}}for(g=0;g<e;g++)d[g].W=g;co(a,b,d);return k}function oo(a,b,c){if(s){t.h(b,Z,"bendStraighten:unfixedLayer");t.h(c,Z,"bendStraighten:direction")}for(var d=o;Eo(a,b,c);)d=h;return d}
function Eo(a,b,c){if(s){t.h(b,Z,"shiftbendStraighten:unfixedLayer");t.h(c,Z,"shiftbendStraighten:direction")}var d,e=Ln(a,b),g=a.Xc[b],i=zo(a,b,-1);if(c>0)for(d=0;d<g;d++)i[d]=-1;var j=zo(a,b,1);if(c<0)for(d=0;d<g;d++)j[d]=-1;for(var k=o,l=h;l;){l=o;for(d=0;d<g;d++){var n=e[d].M,q=Wn(a,e[d],h),p=Wn(a,e[d],o),q=d-1<0||n-e[d-1].M-1>q+Wn(a,e[d-1],o)?n-1:n,p=d+1>=g||e[d+1].M-n-1>p+Wn(a,e[d+1],h)?n+1:n,u=0,w=0,B=0,F,H,x,I;if(c<=0)for(var y=e[d].tb.f;y.next();){F=y.value;if(F.ra&&F.I.w!==b){H=uo(F);x=
F.Ae;I=F.Yd;F=F.I.M;u=u+(Math.abs(n+I-(F+x))+1)*H;w=w+(Math.abs(q+I-(F+x))+1)*H;B=B+(Math.abs(p+I-(F+x))+1)*H}}if(c>=0)for(y=e[d].sb.f;y.next();){F=y.value;if(F.ra&&F.G.w!==b){H=uo(F);x=F.Ae;I=F.Yd;F=F.G.M;u=u+(Math.abs(n+x-(F+I))+1)*H;w=w+(Math.abs(q+x-(F+I))+1)*H;B=B+(Math.abs(p+x-(F+I))+1)*H}}I=x=H=0;F=i[e[d].W];y=j[e[d].W];if(F!==-1){H=H+Math.abs(F-n);x=x+Math.abs(F-q);I=I+Math.abs(F-p)}if(y!==-1){H=H+Math.abs(y-n);x=x+Math.abs(y-q);I=I+Math.abs(y-p)}if(w<u||w===u&&x<H){l=k=h;e[d].M=q}if(B<u||
B===u&&I<H){l=k=h;e[d].M=p}}}co(a,b,e);a.normalize();return k}
function qo(a,b,c){if(s){t.h(b,Z,"medianStraighten:unfixedLayer");t.h(c,Z,"medianStraighten:direction")}for(var d=Ln(a,b),e=a.Xc[b],g=Ao(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=o;for(c=0;c<e;c++){var j=d[c].M,k=Wn(a,d[c],h),l=Wn(a,d[c],o),n=0,q;if(i[c]===-1)if(c===0&&c===e-1)n=j;else if(c===0){q=d[c+1].M;n=q-j===l+Wn(a,d[c+1],h)?j-1:j}else if(c===e-1){q=d[c-1].M;n=j-q===k+Wn(a,d[c-1],o)?j+1:j}else{q=d[c-1].M;k=q+Wn(a,d[c-1],o)+k+1;q=d[c+1].M;l=q-Wn(a,d[c+1],h)-l-1;n=(k+l)/2|0}else if(c===
0&&c===e-1)n=i[c];else if(c===0){q=d[c+1].M;l=q-Wn(a,d[c+1],h)-l-1;n=Math.min(i[c],l)}else if(c===e-1){q=d[c-1].M;k=q+Wn(a,d[c-1],o)+k+1;n=Math.max(i[c],k)}else{q=d[c-1].M;k=q+Wn(a,d[c-1],o)+k+1;q=d[c+1].M;l=q-Wn(a,d[c+1],h)-l-1;k<i[c]&&i[c]<l?n=i[c]:k>=i[c]?n=k:l<=i[c]&&(n=l)}if(n!==j){g=h;d[c].M=n}}}co(a,b,d);a.normalize()}
function Fo(a,b){if(s){t.h(b,Z,"packAux:column");t.h(1,Z,"packAux:direction")}for(var c=h,d=a.p.R.f,e;d.next();){e=d.value;var g=Wn(a,e,h),i=Wn(a,e,o);if(e.M-g<=b&&e.M+i>=b){c=o;break}}g=o;if(c)for(d.reset();d.next();){e=d.value;if(e.M>b){e.M=e.M-1;g=h}}return g}
function Go(a,b){if(s){t.h(b,Z,"tightPackAux:column");t.h(1,Z,"tightPackAux:direction")}var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.Oa;d++){e[d]=o;g[d]=o}for(var i=a.p.R.f;i.next();){d=i.value;var j=d.M-Wn(a,d,h),k=d.M+Wn(a,d,o);j<=b&&k>=b&&(e[d.w]=h);j<=c&&k>=c&&(g[d.w]=h)}j=h;c=o;for(d=0;d<=a.Oa;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();){d=i.value;if(d.M>b){d.M=d.M-1;c=h}}return c}
function ro(a,b){s&&t.h(b,Z,"componentPack:direction");for(var c=0;c<=a.ab;c++)for(;Fo(a,c););a.normalize();for(c=0;c<a.ab;c++)for(;Go(a,c););a.normalize();var d,e,g,i;if(b>0)for(c=0;c<=a.ab;c++){d=fo(a);e=yo(a);for(g=e+1;e<g;){g=e;Ho(a,c,1);i=yo(a);if(i>e)jo(a,d);else if(i<e){e=i;d=fo(a)}}}if(b<0)for(c=a.ab;c>=0;c--){d=fo(a);e=yo(a);for(g=e+1;e<g;){g=e;Ho(a,c,-1);i=yo(a);if(i>e)jo(a,d);else if(i<e){e=i;d=fo(a)}}}a.normalize()}
function Ho(a,b,c){if(s){t.h(b,Z,"componentPackAux:column");t.h(c,Z,"componentPackAux:direction")}a.hf=0;for(var d=a.p.R.f,e;d.next();)d.value.ub=-1;if(c>0)for(d.reset();d.next();){e=d.value;if(e.M-Wn(a,e,h)<=b)e.ub=a.hf}if(c<0)for(d.reset();d.next();){e=d.value;if(e.M+Wn(a,e,o)>=b)e.ub=a.hf}a.hf++;for(d.reset();d.next();){e=d.value;if(e.ub===-1){Co(a,e,a.hf,-1,h,h);a.hf++}}b=[];for(e=0;e<a.hf*a.hf;e++)b[e]=o;var g=[];for(e=0;e<(a.Oa+1)*(a.ab+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.w,j=Math.max(0,e.M-Wn(a,e,h)),k=Math.min(a.ab,e.M+Wn(a,e,o));j<=k;j++)g[i*(a.ab+1)+j]=e.ub}for(e=0;e<=a.Oa;e++){if(c>0)for(j=0;j<a.ab;j++)g[e*(a.ab+1)+j]!==-1&&(g[e*(a.ab+1)+j+1]!==-1&&g[e*(a.ab+1)+j]!==g[e*(a.ab+1)+j+1])&&(b[g[e*(a.ab+1)+j]*a.hf+g[e*(a.ab+1)+j+1]]=h);if(c<0)for(j=a.ab;j>0;j--)g[e*(a.ab+1)+j]!==-1&&(g[e*(a.ab+1)+j-1]!==-1&&g[e*(a.ab+1)+j]!==g[e*(a.ab+1)+j-1])&&(b[g[e*(a.ab+1)+j]*a.hf+g[e*(a.ab+1)+j-1]]=h)}g=[];for(e=0;e<a.hf;e++)g[e]=h;i=new z("number");for(i.add(0);i.count!==0;){k=
i.j[i.count-1];i.We(i.count-1);if(g[k]){g[k]=o;for(e=0;e<a.hf;e++)b[k*a.hf+e]&&i.kc(0,e)}}if(c>0)for(d.reset();d.next();){e=d.value;if(g[e.ub])e.M=e.M-1}if(c<0)for(d.reset();d.next();){e=d.value;if(g[e.ub])e.M=e.M+1}}Z.prototype.commitLayout=Z.prototype.ou=function(){if(this.Ol){var a,b;if(this.Q===270){a=rc;b=vc}else if(this.Q===90){a=vc;b=rc}else if(this.Q===180){a=sc;b=tc}else{a=tc;b=sc}for(var c=this.p.Qb.f,d;c.next();){d=c.value.Fa;if(d!==m){d.Ya=a;d.$a=b}}}this.commitNodes();this.commitLinks()};
Z.prototype.commitNodes=Z.prototype.Nx=function(){this.Lg=[];this.Wf=[];this.xe=[];this.Yc=[];for(var a=0;a<=this.Oa;a++){this.Lg[a]=0;this.Wf[a]=0;this.xe[a]=0;this.Yc[a]=0}for(var a=this.p.R.f,b,c;a.next();){b=a.value;c=b.w;this.Lg[c]=Math.max(this.Lg[c],vo(this,b,h));this.Wf[c]=Math.max(this.Wf[c],vo(this,b,o))}b=0;for(var d=this.ld,e=0;e<=this.Oa;e++){c=d;this.Lg[e]+this.Wf[e]<=0&&(c=0);e>0&&(b=b+c/2);if(this.Q===90||this.Q===0){b=b+this.Wf[e];this.xe[e]=b;b=b+this.Lg[e]}else{b=b+this.Lg[e];this.xe[e]=
b;b=b+this.Wf[e]}e<this.Oa&&(b=b+c/2);this.Yc[e]=b}d=this.Qc.copy();for(e=0;e<=this.Oa;e++)if(this.Q===270){this.xe[e]=d.y+this.xe[e];this.Yc[e]=d.y+this.Yc[e]}else if(this.Q===90){this.xe[e]=d.y+b-this.xe[e];this.Yc[e]=d.y+b-this.Yc[e]}else if(this.Q===180){this.xe[e]=d.x+this.xe[e];this.Yc[e]=d.x+this.Yc[e]}else{this.xe[e]=d.x+b-this.xe[e];this.Yc[e]=d.x+b-this.Yc[e]}for(a.reset();a.next();){b=a.value;c=b.w;var g=b.M|0;if(this.Q===270||this.Q===90){e=d.x+this.Vc*g;c=this.xe[c]}else{e=this.xe[c];
c=d.y+this.Vc*g}b.Da=e;b.Ea=c;b.Wh()}};
Z.prototype.commitLinks=Z.prototype.Mx=function(){for(var a=this.p.Qb.f,b,c;a.next();){c=a.value.Fa;if(typeof c!=="undefined"&&c!==m){c.vk();c.mn();c.Xh()}}for(a.reset();a.next();){c=a.value.Fa;typeof c!=="undefined"&&c!==m&&Pl(c)}for(a.reset();a.next();){b=a.value;c=b.Fa;if(!(typeof c==="undefined"&&c===m)){c.vk();var d=b.I.Ca,e=b.G.Ca,g=c,i=g.Fc;if(typeof d==="Group"&&d!==g.ia)i=d.port;var j=g.rd;if(typeof e==="Group"&&e!==g.ma)j=e.port;if(b.ra){if(c.Me===Mj&&c.ca===4){if(b.ib){g=d;d=e;e=g;g=i;
i=j;j=g}var k,l,n,q;if(b.I.M===b.G.M){k=c.Qd(d,i,Vl(c),h,o,e,j).copy();l=c.Qd(e,j,Wl(c),o,o,d,i).copy();n=new D((2*k.x+l.x)/3,(2*k.y+l.y)/3);q=new D((k.x+2*l.x)/3,(k.y+2*l.y)/3);c.mn();c.cd(k);c.cd(n);c.cd(q);c.cd(l)}else{g=b=o;i!==m&&Vl(c)===Yb&&(b=h);j!==m&&Wl(c)===Yb&&(g=h);if(b||g){k=c.i(0).copy();n=c.i(1).copy();q=c.i(2).copy();l=c.i(3).copy()}if(b){if(this.Q===90||this.Q===270){n.x=k.x;n.y=(k.y+l.y)/2}else{n.x=(k.x+l.x)/2;n.y=k.y}c.A(1,n);c.A(0,c.Qd(d,i,Vl(c),h,o,e,j).copy())}if(g){if(this.Q===
90||this.Q===270){q.x=l.x;q.y=(k.y+l.y)/2}else{q.x=(k.x+l.x)/2;q.y=l.y}c.A(2,q);c.A(3,c.Qd(e,j,Wl(c),o,o,d,i).copy())}}}c.Xh()}else if(b.I.w===b.G.w)c.Xh();else{var p=o,u=o,w,B=c.Fu+1;if(Jg(c)){u=h;w=c.ca;w>4&&c.nb.removeRange(2,w-3)}else if(c.Me===Mj){p=h;w=c.ca;w>4&&c.nb.removeRange(2,w-3);B=2}else{w=c.ca;var F=Vl(c)===Yb,H=Wl(c)===Yb;w>2&&F&&H?c.nb.removeRange(1,w-2):w>3&&F&&!H?c.nb.removeRange(1,w-3):w>3&&!F&&H?c.nb.removeRange(2,w-2):w>4&&(!F&&!H)&&c.nb.removeRange(2,w-3)}w=b.I;var H=b.G,x;if(b.ib){for(;H!==
m&&w!==H;){x=F=m;for(var I=H.tb.f;I.next();){y=I.value;if(y.Fa===b.Fa){F=y.I;x=y.G;if(F.Ca===m)break}}if(F!==w){y=c.i(B-1).copy();I=new D(F.Da,F.Ea);if(u)if(this.Q===180||this.Q===0)if(B===2){c.q(B++,new D(y.x,y.y));c.q(B++,new D(y.x,I.y))}else{x=x!==m?new D(x.Da,x.Ea):y.copy();if(x.y!==I.y){x=this.Yc[F.w-1];c.q(B++,new D(x,y.y));c.q(B++,new D(x,I.y))}}else if(B===2){c.q(B++,new D(y.x,y.y));c.q(B++,new D(I.x,y.y))}else{x=x!==m?new D(x.Da,x.Ea):y.copy();if(x.x!==I.x){x=this.Yc[F.w-1];c.q(B++,new D(y.x,
x));c.q(B++,new D(I.x,x))}}else if(B===2)if(p){x=Math.max(10,this.Lg[H.w]);G=Math.max(10,this.Wf[H.w]);if(this.Q===180){H=H.C.x;c.q(B++,new D(H-x,I.y));c.q(B++,new D(H,I.y));c.q(B++,new D(H+G,I.y))}else if(this.Q===90){H=H.C.y+H.C.height;c.q(B++,new D(I.x,H+G));c.q(B++,new D(I.x,H));c.q(B++,new D(I.x,H-x))}else if(this.Q===270){H=H.C.y;c.q(B++,new D(I.x,H-x));c.q(B++,new D(I.x,H));c.q(B++,new D(I.x,H+G))}else{H=H.C.x+H.C.width;c.q(B++,new D(H+G,I.y));c.q(B++,new D(H,I.y));c.q(B++,new D(H-x,I.y))}}else{c.q(B++,
y);this.Q===180||this.Q===0?c.q(B++,new D(y.x,I.y)):c.q(B++,new D(I.x,y.y));c.q(B++,new D(I.x,I.y))}else{x=Math.max(10,this.Lg[F.w]);G=Math.max(10,this.Wf[F.w]);if(this.Q===180){p&&c.q(B++,new D(I.x-x,I.y));c.q(B++,I);p&&c.q(B++,new D(I.x+G,I.y))}else if(this.Q===90){p&&c.q(B++,new D(I.x,I.y+G));c.q(B++,I);p&&c.q(B++,new D(I.x,I.y-x))}else if(this.Q===270){p&&c.q(B++,new D(I.x,I.y-x));c.q(B++,I);p&&c.q(B++,new D(I.x,I.y+G))}else{p&&c.q(B++,new D(I.x+G,I.y));c.q(B++,I);p&&c.q(B++,new D(I.x-x,I.y))}}}H=
F}if(j===m||!Wl(c).z(Yb)){y=c.i(B-1).copy();I=c.i(B).copy();if(u){F=this.Wf[w.w];if(this.Q===180||this.Q===0){u=y.y;if(u>=w.C.y&&u<=w.C.bottom){H=w.Da+F;u=u<w.C.y+w.C.height/2?w.C.y-this.Vc/2:w.C.bottom+this.Vc/2;c.q(B++,new D(H,y.y));c.q(B++,new D(H,u))}c.q(B++,new D(I.x,u))}else{u=y.x;if(u>=w.C.x&&u<=w.C.right){H=w.Ea+F;u=u<w.C.x+w.C.width/2?w.C.x-this.Vc/2:w.C.right+this.Vc/2;c.q(B++,new D(y.x,H));c.q(B++,new D(u,H))}c.q(B++,new D(u,I.y))}c.q(B++,I)}else if(p){x=Math.max(10,this.Lg[w.w]);G=Math.max(10,
this.Wf[w.w]);if(this.Q===180){H=w.C.x+w.C.width;c.A(B-2,new D(H,y.y));c.A(B-1,new D(H+G,y.y))}else if(this.Q===90){H=w.C.y;c.A(B-2,new D(y.x,H));c.A(B-1,new D(y.x,H-x))}else if(this.Q===270){H=w.C.y+w.C.height;c.A(B-2,new D(y.x,H));c.A(B-1,new D(y.x,H+G))}else{H=w.C.x;c.A(B-2,new D(H,y.y));c.A(B-1,new D(H-x,y.y))}}else{this.Q===180||this.Q===0?c.q(B++,new D(I.x,y.y)):c.q(B++,new D(y.x,I.y));c.q(B++,I)}}}else{for(;w!==m&&w!==H;){x=F=m;w=w.sb.f;for(var y;w.next();){y=w.value;if(y.Fa===b.Fa){F=y.G;
x=y.I;x.Ca!==m&&(x=m);if(F.Ca===m)break}}var G;if(F!==H){y=c.i(B-1).copy();I=new D(F.Da,F.Ea);if(u)if(this.Q===180||this.Q===0){x=x!==m?new D(x.Da,x.Ea):y.copy();if(x.y!==I.y){x=this.Yc[F.w];B===2&&(x=this.Q===0?Math.max(x,y.x):Math.min(x,y.x));c.q(B++,new D(x,y.y));c.q(B++,new D(x,I.y))}}else{x=x!==m?new D(x.Da,x.Ea):y.copy();if(x.x!==I.x){x=this.Yc[F.w];B===2&&(x=this.Q===90?Math.max(x,y.y):Math.min(x,y.y));c.q(B++,new D(y.x,x));c.q(B++,new D(I.x,x))}}else{x=Math.max(10,this.Lg[F.w]);G=Math.max(10,
this.Wf[F.w]);if(this.Q===180){c.q(B++,new D(I.x+G,I.y));p&&c.q(B++,I);c.q(B++,new D(I.x-x,I.y))}else if(this.Q===90){c.q(B++,new D(I.x,I.y-x));p&&c.q(B++,I);c.q(B++,new D(I.x,I.y+G))}else if(this.Q===270){c.q(B++,new D(I.x,I.y+G));p&&c.q(B++,I);c.q(B++,new D(I.x,I.y-x))}else{c.q(B++,new D(I.x-x,I.y));p&&c.q(B++,I);c.q(B++,new D(I.x+G,I.y))}}}w=F}if(u){y=c.i(B-1).copy();I=c.i(B).copy();if(this.Q===180||this.Q===0){if(y.y!==I.y){x=this.Q===0?Math.min(Math.max((I.x+y.x)/2,this.Yc[H.w]),I.x):Math.max(Math.min((I.x+
y.x)/2,this.Yc[H.w]),I.x);c.q(B++,new D(x,y.y));c.q(B++,new D(x,I.y))}}else if(y.x!==I.x){x=this.Q===90?Math.min(Math.max((I.y+y.y)/2,this.Yc[H.w]),I.y):Math.max(Math.min((I.y+y.y)/2,this.Yc[H.w]),I.y);c.q(B++,new D(y.x,x));c.q(B++,new D(I.x,x))}}}if(g!==m&&p){if(i!==m){if(Wb(Vl(c))){g=c.i(0).copy();p=c.i(2).copy();g.z(p)||c.A(1,new D((g.x+p.x)/2,(g.y+p.y)/2))}c.A(0,c.Qd(d,i,Yb,h,o,e,j))}if(j!==m){if(Wb(Wl(c))){g=c.i(c.ca-1);p=c.i(c.ca-3);g.z(p)||c.A(c.ca-2,new D((g.x+p.x)/2,(g.y+p.y)/2))}c.A(c.ca-
1,c.Qd(e,j,Yb,o,o,d,i))}}c.Xh();b.Wh()}}}d=new z(W);for(a=this.p.Qb.f;a.next();){c=a.value.Fa;c!==m&&(Jg(c)&&!d.contains(c))&&d.add(c)}if(d.count>0)if(this.Q===90||this.Q===270){s&&t.c(d,z,Z,"adjustOverlapsH:routables");a=0;c=new z(Io);for(k=d.f;k.next();){e=k.value;if(e!==m&&Jg(e))for(d=2;d<e.ca-3;d++){i=e.i(d).copy();j=e.i(d+1).copy();if(Jo(i.y,j.y)&&!Jo(i.x,j.x)){l=new Io;l.w=Math.floor(i.y/2);n=e.i(0).copy();q=e.i(e.ca-1).copy();l.hc=n.x*n.x+n.y;l.fd=q.x*q.x+q.y;l.xd=Math.min(i.x,j.x);l.dd=Math.max(i.x,
j.x);l.W=d;l.Fa=e;if(d+2<e.ca){n=e.i(d-1).copy();q=e.i(d+2).copy();b=0;n.y<i.y?b=q.y<i.y?3:i.x<j.x?2:1:n.y>i.y&&(b=q.y>i.y?0:j.x<i.x?2:1);l.qh=b}c.add(l)}}}if(c.count>1){c.sort(this.nD);for(k=0;k<c.count;){d=c.j[k].w;for(l=k+1;l<c.count&&c.j[l].w===d;)l++;if(l-k>1)for(e=k;e<l;){d=c.j[e].dd;for(n=k+1;n<l&&c.j[n].xd<d;){d=Math.max(d,c.j[n].dd);n++}i=n-e;if(i>1){c.bo(this.bv,e,e+i);j=1;q=c.j[e].fd;for(d=e;d<n;d++){b=c.j[d];if(b.fd!==q){j++;q=b.fd}}c.bo(this.mD,e,e+i);p=1;q=c.j[e].hc;for(d=e;d<n;d++){b=
c.j[d];if(b.hc!==q){p++;q=b.hc}}if(j<p){g=o;p=j;q=c.j[e].fd;c.bo(this.bv,e,e+i)}else{g=h;q=c.j[e].hc}B=0;for(d=e;d<n;d++){b=c.j[d];if((g?b.hc:b.fd)!==q){B++;q=g?b.hc:b.fd}e=b.Fa;i=e.i(b.W).copy();j=e.i(b.W+1).copy();u=4*(B-(p-1)/2);if(e.Xe!==Rf||Ko(i.x,i.y+u,j.x,j.y+u)){a++;e.vk();e.A(b.W,new D(i.x,i.y+u));e.A(b.W+1,new D(j.x,j.y+u));e.Xh()}}}e=n}k=l}}}else{s&&t.c(d,z,Z,"adjustOverlapsV:routables");a=0;c=new z(Io);for(k=d.f;k.next();){e=k.value;if(e!==m&&Jg(e))for(d=2;d<e.ca-3;d++){i=e.i(d).copy();
j=e.i(d+1).copy();if(Jo(i.x,j.x)&&!Jo(i.y,j.y)){l=new Io;l.w=Math.floor(i.x/2);n=e.i(0).copy();q=e.i(e.ca-1).copy();l.hc=n.x+n.y*n.y;l.fd=q.x+q.y*q.y;l.xd=Math.min(i.y,j.y);l.dd=Math.max(i.y,j.y);l.W=d;l.Fa=e;if(d+2<e.ca){n=e.i(d-1).copy();q=e.i(d+2).copy();b=0;n.x<i.x?b=q.x<i.x?3:i.y<j.y?2:1:n.x>i.x&&(b=q.x>i.x?0:j.y<i.y?2:1);l.qh=b}c.add(l)}}}if(c.count>1){c.sort(this.nD);for(k=0;k<c.count;){d=c.j[k].w;for(l=k+1;l<c.count&&c.j[l].w===d;)l++;if(l-k>1)for(e=k;e<l;){d=c.j[e].dd;for(n=k+1;n<l&&c.j[n].xd<
d;){d=Math.max(d,c.j[n].dd);n++}i=n-e;if(i>1){c.bo(this.bv,e,e+i);j=1;q=c.j[e].fd;for(d=e;d<n;d++){b=c.j[d];if(b.fd!==q){j++;q=b.fd}}c.bo(this.mD,e,e+i);p=1;q=c.j[e].hc;for(d=e;d<n;d++){b=c.j[d];if(b.hc!==q){p++;q=b.hc}}if(j<p){g=o;p=j;q=c.j[e].fd;c.bo(this.bv,e,e+i)}else{g=h;q=c.j[e].hc}B=0;for(d=e;d<n;d++){b=c.j[d];if((g?b.hc:b.fd)!==q){B++;q=g?b.hc:b.fd}e=b.Fa;i=e.i(b.W).copy();j=e.i(b.W+1).copy();u=4*(B-(p-1)/2);if(e.Xe!==Rf||Ko(i.x+u,i.y,j.x+u,j.y)){a++;e.vk();e.A(b.W,new D(i.x+u,i.y));e.A(b.W+
1,new D(j.x+u,j.y));e.Xh()}}}e=n}k=l}}}};function Io(){this.W=this.dd=this.xd=this.fd=this.hc=this.w=0;this.Fa=m;this.qh=0}t.sf(Io,{xa:h,hc:h,fd:h,xd:h,dd:h,index:h,link:h,qh:h});Z.prototype.nD=function(a,b){return!(a instanceof Io)||!(b instanceof Io)||a===b?0:a.w<b.w?-1:a.w>b.w?1:a.xd<b.xd?-1:a.xd>b.xd?1:a.dd<b.dd?-1:a.dd>b.dd?1:0};
Z.prototype.mD=function(a,b){return!(a instanceof Io)||!(b instanceof Io)||a===b?0:a.hc<b.hc?-1:a.hc>b.hc||a.qh<b.qh?1:a.qh>b.qh||a.xd<b.xd?-1:a.xd>b.xd?1:a.dd<b.dd?-1:a.dd>b.dd?1:0};Z.prototype.bv=function(a,b){return!(a instanceof Io)||!(b instanceof Io)||a===b?0:a.fd<b.fd?-1:a.fd>b.fd||a.qh<b.qh?1:a.qh>b.qh||a.xd<b.xd?-1:a.xd>b.xd?1:a.dd<b.dd?-1:a.dd>b.dd?1:0};function Jo(a,b){if(s){t.h(a,Z,"isApprox:a");t.h(b,Z,"isApprox:b")}var c=a-b;return c>-1&&c<1}
function Ko(a,b,c,d){if(s){t.h(a,Z,"isUnoccupied2:px");t.h(b,Z,"isUnoccupied2:py");t.h(c,Z,"isUnoccupied2:qx");t.h(d,Z,"isUnoccupied2:qy")}return h}function Ln(a,b){var c,d=a.Xc[b];if(d>=a.cg.length){c=[];var e;for(e=0;e<a.cg.length;e++)c[e]=a.cg[e];a.cg=c}if(typeof a.cg[d]==="undefined"||a.cg[d]===m)c=[];else{c=a.cg[d];a.cg[d]=m}var d=a.Zp[b],g;for(e=0;e<d.length;e++){g=d[e];g instanceof wo&&(c[g.W]=g)}return c}function co(a,b,c){a.cg[a.Xc[b]]=c}t.a(Z,"layerSpacing",Z.prototype.Ir);
t.defineProperty(Z,{Ir:"layerSpacing"},r("ld"),function(a){if(this.ld!==a&&typeof a==="number"&&a>=0){this.ld=a;this.v()}});t.a(Z,"columnSpacing",Z.prototype.gF);t.defineProperty(Z,{gF:"columnSpacing"},r("Vc"),function(a){if(this.Vc!==a&&typeof a==="number"&&a>=0){this.Vc=a;this.v()}});t.a(Z,"direction",Z.prototype.direction);t.defineProperty(Z,{direction:"direction"},r("Q"),function(a){if(this.Q!==a&&typeof a==="number"){this.Q=a;this.v()}});t.a(Z,"cycleRemoveOption",Z.prototype.sB);
t.defineProperty(Z,{sB:"cycleRemoveOption"},r("fm"),function(a){if(this.fm!==a){s&&t.c(a,qa,un,"cycleRemoveOption");if(a===vn||a===pn){this.fm=a;this.v()}}});t.a(Z,"layeringOption",Z.prototype.uC);t.defineProperty(Z,{uC:"layeringOption"},r("ym"),function(a){if(this.ym!==a){s&&t.c(a,qa,un,"layeringOption");if(a===qn||a===An||a===Cn){this.ym=a;this.v()}}});t.a(Z,"initializeOption",Z.prototype.lC);
t.defineProperty(Z,{lC:"initializeOption"},r("sm"),function(a){if(this.sm!==a){s&&t.c(a,qa,un,"initializeOption");if(a===rn||a===Jn||a===Hn){this.sm=a;this.v()}}});t.a(Z,"iterations",Z.prototype.cG);t.defineProperty(Z,{cG:"iterations"},r("Wk"),function(a){s&&t.h(a,un,"iterations");if(this.Wk!==a&&typeof a==="number"&&a>=0){this.Wk=a;this.v()}});t.a(Z,"aggressiveOption",Z.prototype.VA);
t.defineProperty(Z,{VA:"aggressiveOption"},r("Yl"),function(a){if(this.Yl!==a){s&&t.c(a,qa,un,"cycleRemoveOption");if(a===ko||a===sn||a===lo){this.Yl=a;this.v()}}});t.a(Z,"packOption",Z.prototype.uG);t.defineProperty(Z,{uG:"packOption"},r("Lh"),function(a){if(this.Lh!==a&&typeof a==="number"&&a>=0&&a<8){this.Lh=a;this.v()}});t.a(Z,"setsPortSpots",Z.prototype.Ol);t.defineProperty(Z,{Ol:"setsPortSpots"},r("Ng"),function(a){if(this.Ng!==a&&typeof a==="boolean"){this.Ng=a;this.v()}});
t.m(Z,{EJ:"maxLayer"},r("Oa"));t.m(Z,{CJ:"maxIndex"},r("ft"));t.m(Z,{BJ:"maxColumn"},r("ab"));t.m(Z,{KJ:"minIndexLayer"},r("Rp"));t.m(Z,{DJ:"maxIndexLayer"},r("ye"));var pn;Z.CycleDepthFirst=pn=t.l(Z,"CycleDepthFirst",0);var vn;Z.CycleGreedy=vn=t.l(Z,"CycleGreedy",1);var qn;Z.LayerOptimalLinkLength=qn=t.l(Z,"LayerOptimalLinkLength",0);var An;Z.LayerLongestPathSink=An=t.l(Z,"LayerLongestPathSink",1);var Cn;Z.LayerLongestPathSource=Cn=t.l(Z,"LayerLongestPathSource",2);var rn;
Z.InitDepthFirstOut=rn=t.l(Z,"InitDepthFirstOut",0);var Jn;Z.InitDepthFirstIn=Jn=t.l(Z,"InitDepthFirstIn",1);var Hn;Z.InitNaive=Hn=t.l(Z,"InitNaive",2);var ko;Z.AggressiveNone=ko=t.l(Z,"AggressiveNone",0);var sn;Z.AggressiveLess=sn=t.l(Z,"AggressiveLess",1);var lo;Z.AggressiveMore=lo=t.l(Z,"AggressiveMore",2);Z.PackNone=0;var mo;Z.PackExpand=mo=1;var no;Z.PackStraighten=no=2;var po;Z.PackMedian=po=4;var tn;Z.PackAll=tn=7;function un(){Cm.call(this)}t.J("LayeredDigraphNetwork",un);t.ua(un,Cm);
un.prototype.createVertex=un.prototype.Oi=function(){return new wo};un.prototype.createEdge=un.prototype.pn=function(){return new Fn};function wo(){Gm.call(this);this.W=this.M=this.w=-1;this.ra=o;this.ub=this.nm=this.yj=NaN;this.yi=m;this.Fk=0;this.Gw=this.Hw=f}t.J("LayeredDigraphVertex",wo);t.ua(wo,Gm);t.a(wo,"layer",wo.prototype.xa);t.defineProperty(wo,{xa:"layer"},r("w"),ba("w"));t.a(wo,"column",wo.prototype.pd);t.defineProperty(wo,{pd:"column"},r("M"),ba("M"));t.a(wo,"index",wo.prototype.index);
t.defineProperty(wo,{index:"index"},r("W"),ba("W"));t.a(wo,"valid",wo.prototype.valid);t.defineProperty(wo,{valid:"valid"},r("ra"),ba("ra"));t.a(wo,"discover",wo.prototype.rF);t.defineProperty(wo,{rF:"discover"},r("yj"),ba("yj"));t.a(wo,"finish",wo.prototype.finish);t.defineProperty(wo,{finish:"finish"},r("nm"),ba("nm"));t.a(wo,"component",wo.prototype.hF);t.defineProperty(wo,{hF:"component"},r("ub"),ba("ub"));t.a(wo,"near",wo.prototype.rG);
t.defineProperty(wo,{rG:"near"},r("yi"),function(a){a!==m&&t.c(a,wo,wo,"layeredDigraphVertex");this.yi=a});function Fn(){Hm.call(this);this.Zo=this.ib=this.ra=o;this.De=this.Be=NaN;this.Yd=this.jH=0}t.J("LayeredDigraphEdge",Fn);t.ua(Fn,Hm);t.a(Fn,"valid",Fn.prototype.valid);t.defineProperty(Fn,{valid:"valid"},r("ra"),ba("ra"));t.a(Fn,"rev",Fn.prototype.rev);t.defineProperty(Fn,{rev:"rev"},r("ib"),ba("ib"));t.a(Fn,"forest",Fn.prototype.GF);t.defineProperty(Fn,{GF:"forest"},r("Zo"),ba("Zo"));
t.a(Fn,"portFromPos",Fn.prototype.wG);t.defineProperty(Fn,{wG:"portFromPos"},r("Be"),ba("Be"));t.a(Fn,"portToPos",Fn.prototype.yG);t.defineProperty(Fn,{yG:"portToPos"},r("De"),ba("De"));t.a(Fn,"portFromColOffset",Fn.prototype.vG);t.defineProperty(Fn,{vG:"portFromColOffset"},r("Ae"),ba("Ae"));t.a(Fn,"portToColOffset",Fn.prototype.xG);t.defineProperty(Fn,{xG:"portToColOffset"},r("Yd"),ba("Yd"));
function Y(){Ih.call(this);this.qc=new z(U);this.ec=Lo;this.Lq=Mo;this.zc=No;this.Ye=(new K(10,10)).freeze();this.U=new $;this.T=new $}t.J("TreeLayout",Y);t.ua(Y,Ih);Y.prototype.cloneProtected=Y.prototype.jb=function(a){Ih.prototype.jb.call(this,a);a.ec=this.ec;a.Lq=this.Lq;a.zc=this.zc;a.Ye=this.Ye.D();Oo(a.U,this.U);Oo(a.T,this.T)};Y.prototype.createNetwork=Y.prototype.su=function(){var a=new Po;Dm(a,this);return a};
Y.prototype.makeNetwork=Y.prototype.jG=function(a){var b=this.createNetwork();if(a instanceof A){Qo(this,b,a.sk,h);Qo(this,b,a.links,h)}else a instanceof V?Qo(this,b,a.lc,o):a.f&&Qo(this,b,a.f,o);return b};
function Qo(a,b,c,d){for(c=c.f;c.next();){var e=c.value;if(e instanceof U&&e.hr()&&e.od!=="Comment"&&(!d||e.Gr))e.Yi||(e instanceof V&&e.wb===m?Qo(a,b,e.lc,o):b.an(e))}for(c.reset();c.next();){e=c.value;if(e instanceof W&&e.hr()&&e.od!=="Comment"&&(!d||e.Gr)){var g=e.ia,a=e.ma;if(!(g===m||a===m||g===a)&&g.od!=="Comment"&&a.od!=="Comment"){g=b.Cu(g);a=b.Cu(a);g!==m&&a!==m&&b.Fl(g,a,e)}}}}
Y.prototype.doLayout=Y.prototype.or=function(a){if(this.Hc===m)this.Hc=this.makeNetwork(a);if(this.qc===m)this.qc=new z(U);if(this.Md!==Ro)this.Qc=Fm(this,this.Qc);if(this.p.R.count>0){this.p.wu();for(var b=this.p.R.f;b.next();){a=b.value;a.Gj=o;a.Xk=0;a.hb=m;a.Fb=[]}for(var c=this.qc.f;c.next();){b=c.value;a=this.p.ge(b);a===m&&this.qc.remove(b)}if(this.qc.length===0){for(a=this.p.R.f;a.next();){b=a.value;switch(this.ec){case Lo:b.tb.count===0&&this.qc.add(b.Ca);break;case So:b.sb.count===0&&this.qc.add(b.Ca);
break;default:t.g("Unhandled path value "+this.ec.toString())}}if(this.qc.count===0){a=999999;b=m;for(c=this.p.R.f;c.next();){var d=c.value;switch(this.ec){case Lo:if(d.tb.count<a){a=d.tb.count;b=d}break;case So:if(d.sb.count<a){a=d.sb.count;b=d}break;default:t.g("Unhandled path value "+this.ec.toString())}}b!==m&&this.qc.add(b.Ca)}}for(c=this.qc.f;c.next();){b=c.value;a=this.p.ge(b);if(a!==m&&!a.Gj){a.Gj=h;To(this,a)}}for(a=this.qc.f;a.next();){b=this.p.ge(a.value);Uo(this,b)}for(a=this.qc.f;a.next();){b=
this.p.ge(a.value);Vo(this,b)}for(a=this.qc.f;a.next();)Wo(this,this.p.ge(a.value));for(a=this.p.R.f;a.next();)this.PA(a.value);for(a=this.qc.f;a.next();)Xo(this,this.p.ge(a.value));if(this.zc===Ro)for(a=this.qc.f;a.next();){c=a.value;b=this.p.ge(c);d=c.position;c=d.x;d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);Yo(this,b,c,d)}else{d=this.Qc.copy();for(a=this.qc.f;a.next();){c=a.value;b=this.p.ge(c);if(b!==m){Yo(this,b,d.x+b.wa.x,d.y+b.wa.y);switch(this.zc){case No:d.y=d.y+(b.Ga.height+this.Ye.height);
break;case Zo:d.x=d.x+(b.Ga.width+this.Ye.width);break;default:t.g("Unhandled arrangement value "+this.zc.toString())}}}d.freeze()}this.updateParts()}this.qc=this.Hc=m;this.Re=h};
function To(a,b){s&&t.c(b,$,Y,"walkTree:v");if(b!==m){var c,d,e;switch(a.ec){case Lo:if(b.sb.count>0){c=new z($);for(d=b.qF;d.next();){e=d.value;$o(a,b,e)&&c.add(e)}if(c.count>0)b.Fb=c.Jf()}break;case So:if(b.tb.count>0){c=new z($);for(d=b.SG;d.next();){e=d.value;$o(a,b,e)&&c.add(e)}if(c.count>0)b.Fb=c.Jf()}break;default:t.g("Unhandled path value"+a.ec.toString())}d=b.Fb;var g=d.length;for(c=0;c<g;c++){e=d[c];e.Gj=h;e.Xk=b.Xk+1;e.hb=b;a.qc.remove(e.Ca)}for(c=0;c<g;c++){e=d[c];To(a,e)}}}
function $o(a,b,c){s&&t.c(b,$,Y,"walkOK:v");s&&t.c(c,$,Y,"walkOK:c");if(c.Gj){var d;s&&t.c(c,$,Y,"isAncestor:a");s&&t.c(b,$,Y,"isAncestor:b");if(b===m)d=o;else{for(d=b.hb;d!==m&&d!==c;)d=d.hb;d=d===c}if(d||c.Xk>b.Xk)return o;a.removeChild(c.hb,c)}return h}
Y.prototype.removeChild=function(a,b){s&&t.c(a,$,Y,"removeChild:p");s&&t.c(b,$,Y,"removeChild:c");if(a!==m&&b!==m){var c=a.Fb,d=0,e;for(e=0;e<c.length;e++)c[e]===b&&d++;if(d>0){var d=Array(c.length-d),g=0;for(e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.Fb=d}}};
function Uo(a,b){s&&t.c(b,$,Y,"initializeTree:v");if(b!==m){s&&t.c(b,$,Y,"initializeTreeVertexValues:v");var c=ap(a,b);Oo(b,c);if(b.hb!==m&&b.hb.qa===bp){for(var c=b.Qa,d=b.hb.Fb,e=0;e<d.length;){if(b===d[e])break;e++}e%2===0?e!==d.length-1&&(c=c===90?180:c===180?270:c===270?180:270):c=c===90?0:c===180?90:c===270?0:90;b.Qa=c}d=b.Ca;if(d!==m){c=d.la.width;d=d.la.height;b.width=c;b.height=d;b.Gu=c/2;b.Hu=d/2}b.Gj=h;b.qa===bp&&cp(b);for(var c=0,d=b.ql,e=0,g=b.Fb,i=g.length,j=0;j<i;j++){var k=g[j];Uo(a,
k);c=c+(k.Js+1);d=Math.max(d,k.et);e=Math.max(e,k.Gh)}b.Js=c;b.et=d;b.Gh=d>0?e+1:0}}function ap(a,b){s&&t.c(b,$,Y,"mom:v");switch(a.Lq){default:case Mo:return b.hb!==m?b.hb:a.U;case dp:return b.hb===m?a.U:b.hb.hb===m?a.T:b.hb;case ep:if(b.hb!==m)return b.hb.hb!==m?b.hb.hb:a.T;case fp:var c=h;if(b.ql===0)c=o;else for(var d=b.Fb,e=d.length,g=0;g<e;g++)if(d[g].ql>0){c=o;break}return c&&b.hb!==m?a.T:b.hb!==m?b.hb:a.U}}
function Vo(a,b){s&&t.c(b,$,Y,"assignTree:v");if(b!==m){s&&t.c(b,$,Y,"assignTreeVertexValues:v");for(var c=b.Fb,d=c.length,e=0;e<d;e++)Vo(a,c[e])}}function Wo(a,b){s&&t.c(b,$,Y,"sortTree:v");if(b!==m){b.qa!==bp&&cp(b);for(var c=b.Fb,d=c.length,e=0;e<d;e++)Wo(a,c[e])}}
function cp(a){s&&t.c(a,$,Y,"sortTreeVertexChildren:v");switch(a.Yb){case gp:break;case hp:a.Fb.reverse();break;case ip:a.Fb.sort(a.Wb);break;case jp:a.Fb.sort(a.Wb);a.Fb.reverse();break;default:t.g("Unhandled sorting value "+a.Yb.toString())}}
Y.prototype.PA=function(a){s&&t.c(a,$,Y,"addComments:v");var b=a.Sb,c=a.hb,d=0,e=kp,e=o;if(c!==m){d=c.Sb;e=c.qa;e=lp(e)}var b=b===90||b===270,d=d===90||d===270,c=a.ql===0,g=new E,i=g.width,g=g.height,j=0,k=a.jd;if(a.Ca!==m)for(var l=a.Ca.QB();l.next();){var n=l.value;if(n.od==="Comment"&&n.kb()){if(a.kd===m)a.kd=[];a.kd.push(n);n.ci();n=n.la;if(b&&!c||!e&&!d&&c||e&&d&&c){i=Math.max(i,n.width);g=g+(n.height+Math.abs(j))}else{i=i+(n.width+Math.abs(j));g=Math.max(g,n.height)}j=k}}if(a.kd!==m){if(b&&
!c||!e&&!d&&c||e&&d&&c){i=i+Math.abs(a.Vb);g=Math.max(0,g-a.height)}else{g=g+Math.abs(a.Vb);i=Math.max(0,i-a.width)}a.mb=new E(0,0,a.C.width+i,a.C.height+g)}};function lp(a){return a===mp||a===bp||a===np||a===op}function pp(a){return a===mp||a===bp}function qp(a){s&&t.c(a,$,Y,"isLeftSideBus:v");var b=a.hb;if(b!==m){var c=b.qb;if(lp(c)){if(pp(c)){b=b.children;for(c=0;c<b.length;){if(a===b[c])break;c++}return c%2===0}if(c===np)return h}}return o}
function Xo(a,b){s&&t.c(b,$,Y,"layoutTree:v");if(b!==m){var c=b.Fb,d=c.length,e,g;for(g=0;g<d;g++){e=c[g];Xo(a,e)}switch(b.Of){case rp:sp(a,b);break;case tp:if(b.qa===bp)sp(a,b);else{s&&t.c(b,$,Y,"layoutTreeBlock:v");if(b.ql===0){e=b.hb;c=o;d=0;g=kp;if(e!==m){d=e.Sb;g=e.qa;c=lp(g)}e=qp(b);b.P=new D(0,0);b.Ga=new K(b.width,b.height);b.wa=b.hb!==m&&b.kd!==m&&((d===180||d===270)&&!c||e)?d===180&&!c||(d===90||d===270)&&e?new D(b.width-b.B.x*2,0):new D(0,b.height-b.B.y*2):new D(0,0);b.Dp=m;b.qq=m}else{var i=
up(b),c=i===90||i===270,j=0,k,l,n=b.Fb,q=n.length;for(k=0;k<q;k++){l=n[k];j=Math.max(j,c?l.Ga.width:l.Ga.height)}var p=b.qa;e=p===vp;var u=p===wp,w=lp(p),B=Math.max(0,b.Lf),d=xp(b),F=b.bd,H=yp(b),x=b.Zd,I=0;if(e||u||b.Xj||b.Yj&&b.Gh===1)I=Math.max(0,b.Pc);e=b.width;g=b.height;var y=0,G=0,fa=0,R=m,S=m,da=new K(0,0),ma=0,Ha=0,sa=0,db=0,Ya=0,bb=0;l=0;w&&!pp(p)&&i>135&&n.reverse();if(pp(p))if(q>1)for(k=0;k<q;k++)k%2===0&&k!==q-1?bb=Math.max(bb,c?n[k].Ga.width:n[k].Ga.height):k%2!==0&&(l=Math.max(l,c?
n[k].Ga.width:n[k].Ga.height));else q===1&&(bb=c?n[0].Ga.width:n[0].Ga.height);var Oa;if(w){switch(p){case mp:k=i<135?zp(b,n,bb,y,G):Ap(b,n,bb,y,G);bb=k[0];y=k[1];G=k[2];break;case np:for(k=0;k<q;k++){l=n[k];Oa=l.Ga;R=db===0?0:x;if(c){l.P=new D(j-Oa.width,Ha+R);y=Math.max(y,Oa.width);G=Math.max(G,Ha+R+Oa.height);Ha=Ha+(R+Oa.height)}else{l.P=new D(ma+R,j-Oa.height);y=Math.max(y,ma+R+Oa.width);G=Math.max(G,Oa.height);ma=ma+(R+Oa.width)}db++}break;case op:for(k=0;k<q;k++){l=n[k];Oa=l.Ga;R=db===0?0:x;
if(c){l.P=new D(F/2+b.B.x,Ha+R);y=Math.max(y,Oa.width);G=Math.max(G,Ha+R+Oa.height);Ha=Ha+(R+Oa.height)}else{l.P=new D(ma+R,F/2+b.B.y);y=Math.max(y,ma+R+Oa.width);G=Math.max(G,Oa.height);ma=ma+(R+Oa.width)}db++}}R=[];S=[];if(c){R[0]=new D(0,0);R[1]=new D(0,G);S[0]=new D(y,0)}else{R[0]=new D(0,0);R[1]=new D(y,0);S[0]=new D(0,G)}S[1]=new D(y,G)}else for(var hb,Va=0;Va<q;Va++){l=n[Va];Oa=l.Ga;if(c){if(B>0&&db>0&&ma+F+Oa.width>B){ma<j&&Bp(b,p,j-ma,0,Ya,Va-1);sa++;db=0;Ya=Va;fa=G;ma=0;Ha=i>135?-G-x:G+
x}Cp(a,l,new D(0,Ha));hb=0;if(db===0){R=l.Dp;S=l.qq;da=Oa.copy();if(R===m||S===m||i!==up(l)){R=[];S=[];R[0]=new D(0,0);R[1]=new D(0,da.height);S[0]=new D(da.width,0);S[1]=new D(da.width,da.height)}}else{k=Ip(b,l,R,S,da.width,da.height);hb=k[0];R=k[1];S=k[2];da.width=k[3];da.height=k[4];if(ma<Oa.width&&hb<0){Jp(b,-hb,0,Ya,Va-1);Kp(R,-hb,0);Kp(S,-hb,0);hb=0}}l.P=new D(hb,Ha);y=Math.max(y,da.width);G=Math.max(G,fa+(sa===0?0:x)+Oa.height);ma=da.width}else{if(B>0&&db>0&&Ha+F+Oa.height>B){Ha<j&&Bp(b,p,
0,j-Ha,Ya,Va-1);sa++;db=0;Ya=Va;fa=y;Ha=0;ma=i>135?-y-x:y+x}Cp(a,l,new D(ma,0));hb=0;if(db===0){R=l.Dp;S=l.qq;da=Oa.copy();if(R===m||S===m||i!==up(l)){R=[];S=[];R[0]=new D(0,0);R[1]=new D(da.width,0);S[0]=new D(0,da.height);S[1]=new D(da.width,da.height)}}else{k=Ip(b,l,R,S,da.width,da.height);hb=k[0];R=k[1];S=k[2];da.width=k[3];da.height=k[4];if(Ha<Oa.height&&hb<0){Jp(b,0,-hb,Ya,Va-1);Kp(R,0,-hb);Kp(S,0,-hb);hb=0}}l.P=new D(ma,hb);G=Math.max(G,da.height);y=Math.max(y,fa+(sa===0?0:x)+Oa.width);Ha=
da.height}db++}if(sa>0)if(c){G=G+Math.max(0,d);ma<y&&Bp(b,p,y-ma,0,Ya,q-1);if(I>0){u||Jp(b,I,0,0,q-1);y=y+I}}else{y=y+Math.max(0,d);Ha<G&&Bp(b,p,0,G-Ha,Ya,q-1);if(I>0){u||Jp(b,0,I,0,q-1);G=G+I}}j=new D(0,0);switch(p){case Lp:c?j.x=j.x+(y/2-b.B.x-H/2):j.y=j.y+(G/2-b.B.y-H/2);break;case kp:if(sa>0)c?j.x=j.x+(y/2-b.B.x-H/2):j.y=j.y+(G/2-b.B.y-H/2);else if(c){k=n[0].P.x+n[0].wa.x;u=n[q-1].P.x+n[q-1].wa.x+n[q-1].B.x*2;j.x=j.x+((u+k)/2-b.B.x-H/2)}else{k=n[0].P.y+n[0].wa.y;u=n[q-1].P.y+n[q-1].wa.y+n[q-1].B.y*
2;j.y=j.y+((u+k)/2-b.B.y-H/2)}break;case vp:if(c){j.x=j.x-H;y=y+H}else{j.y=j.y-H;G=G+H}break;case wp:if(c){j.x=j.x+(y-b.width+H);y=y+H}else{j.y=j.y+(G-b.height+H);G=G+H}break;case mp:c?j.x=q>1?j.x+(bb+F/2-b.B.x):j.x+(n[0].B.x-b.B.x+n[0].wa.x):j.y=q>1?j.y+(bb+F/2-b.B.y):j.y+(n[0].B.y-b.B.y+n[0].wa.y);break;case np:c?j.x=j.x+(y+F/2-b.B.x):j.y=j.y+(G+F/2-b.B.y);break;case op:break;default:t.g("Unhandled alignment value "+p.toString())}for(k=0;k<q;k++){l=n[k];l.P=c?new D(l.P.x+l.wa.x-j.x,l.P.y+(i>135?
(w?-G:-l.Ga.height)+l.wa.y-d:g+d+l.wa.y)):new D(l.P.x+(i>135?(w?-y:-l.Ga.width)+l.wa.x-d:e+d+l.wa.x),l.P.y+l.wa.y-j.y)}n=new K(0,0);if(w)if(c){y=Mp(b,y,j.x);if(j.x<0)j.x=0;if(i>135)j.y=j.y+(G+d);G=G+(g+d);if(p===op)n.width=n.width+(F/2+b.B.x);n.height=n.height+(g+d)}else{if(i>135)j.x=j.x+(y+d);y=y+(e+d);G=Np(b,G,j.y);if(j.y<0)j.y=0;if(p===op)n.height=n.height+(F/2+b.B.y);n.width=n.width+(e+d)}else if(c){if(b.kd===m){if(e>y){p=Op(p,e-y,0);n.width=p[0];n.height=p[1];y=e;j.x=0}}else y=Mp(b,y,j.x);if(j.x<
0){n.width=n.width-j.x;j.x=0}if(i>135)j.y=j.y+(G+d);G=Math.max(Math.max(G,g),G+g+d);n.height=n.height+(g+d)}else{if(i>135)j.x=j.x+(y+d);y=Math.max(Math.max(y,e),y+e+d);if(b.kd===m){if(g>G){p=Op(p,0,g-G);n.width=p[0];n.height=p[1];G=g;j.y=0}}else G=Np(b,G,j.y);if(j.y<0){n.height=n.height-j.y;j.y=0}n.width=n.width+(e+d)}if(sa>0){i=[];p=[];if(c){i[2]=new D(0,g+d);i[3]=new D(i[2].x,G);p[2]=new D(y,i[2].y);p[3]=new D(p[2].x,i[3].y)}else{i[2]=new D(e+d,0);i[3]=new D(y,i[2].y);p[2]=new D(i[2].x,G);p[3]=
new D(i[3].x,p[2].y)}}else{i=[];p=[];for(k=0;k<R.length;k++){w=R[k];i[k+2]=new D(w.x+n.width,w.y+n.height)}for(k=0;k<S.length;k++){w=S[k];p[k+2]=new D(w.x+n.width,w.y+n.height)}}if(c){i[0]=new D(j.x,0);i[1]=new D(i[0].x,g);i[2].y<i[1].y&&(i[2].x>i[0].x?i[2]=i[1].copy():i[1]=i[2].copy());i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy());p[0]=new D(j.x+e,0);p[1]=new D(p[0].x,g);p[2].y<p[1].y&&(p[2].x<p[0].x?p[2]=p[1].copy():p[1]=p[2].copy());p[3].y<p[2].y&&(p[3].x<p[0].x?p[3]=p[2].copy():
p[2]=p[3].copy());i[2].y=i[2].y-d/2;p[2].y=p[2].y-d/2}else{i[0]=new D(0,j.y);i[1]=new D(e,i[0].y);i[2].x<i[1].x&&(i[2].y>i[0].y?i[2]=i[1].copy():i[1]=i[2].copy());i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy());p[0]=new D(0,j.y+g);p[1]=new D(e,p[0].y);p[2].x<p[1].x&&(p[2].y<p[0].y?p[2]=p[1].copy():p[1]=p[2].copy());p[3].x<p[2].x&&(p[3].y<p[0].y?p[3]=p[2].copy():p[2]=p[3].copy());i[2].x=i[2].x-d/2;p[2].x=p[2].x-d/2}b.Dp=i;b.qq=p;b.wa=j;b.Ga=new K(y,G)}}break;default:t.g("Unhandled compaction value "+
b.Of.toString())}}}
function sp(a,b){s&&t.c(b,$,Y,"layoutTreeNone:v");if(b.ql===0){var c=b.hb,d=o,e=0,g=kp;if(c!==m){e=c.Sb;g=c.qa;d=lp(g)}c=qp(b);b.P=new D(0,0);b.Ga=new K(b.width,b.height);b.wa=b.hb!==m&&b.kd!==m&&((e===180||e===270)&&!d||c)?e===180&&!d||(e===90||e===270)&&c?new D(b.width-b.B.x*2,0):new D(0,b.height-b.B.y*2):new D(0,0)}else{var d=up(b),e=d===90||d===270,i=0,j,k,c=b.Fb,g=c.length,l;for(j=0;j<g;j++){k=c[j];i=Math.max(i,e?k.Ga.width:k.Ga.height)}var n=b.qa,q=n===vp,p=n===wp,u=lp(n),w=Math.max(0,b.Lf),
B=xp(b),F=b.bd,H=yp(b),x=q||p?0:H/2,I=b.Zd,y=0;if(q||p||b.Xj||b.Yj&&b.Gh===1)y=Math.max(0,b.Pc);var q=b.width,G=b.height,fa=0,R=0,S=0,da=0,ma=0,Ha=0,sa=0,db=0,Ya=0,bb=0;u&&!pp(n)&&d>135&&c.reverse();if(pp(n))if(g>1)for(j=0;j<g;j++){k=c[j];l=k.Ga;j%2===0&&j!==g-1?Ya=Math.max(Ya,(e?l.width:l.height)+Pp(k)-F):j%2!==0&&(bb=Math.max(bb,(e?l.width:l.height)+Pp(k)-F))}else g===1&&(Ya=e?c[0].Ga.width:c[0].Ga.height);if(u)switch(n){case mp:case bp:k=[];k=d<135?zp(b,c,Ya,fa,R):Ap(b,c,Ya,fa,R);Ya=k[0];fa=k[1];
R=k[2];break;case np:for(j=0;j<g;j++){k=c[j];l=k.Ga;w=sa===0?0:I;if(e){k.P=new D(i-l.width,ma+w);fa=Math.max(fa,l.width);R=Math.max(R,ma+w+l.height);ma=ma+(w+l.height)}else{k.P=new D(da+w,i-l.height);fa=Math.max(fa,da+w+l.width);R=Math.max(R,l.height);da=da+(w+l.width)}sa++}break;case op:for(i=0;i<g;i++){k=c[i];l=k.Ga;w=sa===0?0:I;if(e){k.P=new D(F/2+b.B.x,ma+w);fa=Math.max(fa,l.width);R=Math.max(R,ma+w+l.height);ma=ma+(w+l.height)}else{k.P=new D(da+w,F/2+b.B.y);fa=Math.max(fa,da+w+l.width);R=Math.max(R,
l.height);da=da+(w+l.width)}sa++}}else for(bb=0;bb<g;bb++){k=c[bb];l=k.Ga;if(e){if(w>0&&sa>0&&da+F+l.width>w){da<i&&Bp(b,n,i-da,0,db,bb-1);Ha++;sa=0;db=bb;S=R;da=0;ma=d>135?-R-I:R+I}j=sa===0?x:F;Cp(a,k,new D(0,ma));k.P=new D(da+j,ma);fa=Math.max(fa,da+j+l.width);R=Math.max(R,S+(Ha===0?0:I)+l.height);da=da+(j+l.width)}else{if(w>0&&sa>0&&ma+F+l.height>w){ma<i&&Bp(b,n,0,i-ma,db,bb-1);Ha++;sa=0;db=bb;S=fa;ma=0;da=d>135?-fa-I:fa+I}j=sa===0?x:F;Cp(a,k,new D(da,0));k.P=new D(da,ma+j);R=Math.max(R,ma+j+l.height);
fa=Math.max(fa,S+(Ha===0?0:I)+l.width);ma=ma+(j+l.height)}sa++}if(Ha>0)if(e){R=R+Math.max(0,B);da<fa&&Bp(b,n,fa-da,0,db,g-1);if(y>0){p||Jp(b,y,0,0,g-1);fa=fa+y}}else{fa=fa+Math.max(0,B);ma<R&&Bp(b,n,0,R-ma,db,g-1);if(y>0){p||Jp(b,0,y,0,g-1);R=R+y}}p=new D(0,0);switch(n){case Lp:e?p.x=p.x+(fa/2-b.B.x-H/2):p.y=p.y+(R/2-b.B.y-H/2);break;case kp:if(Ha>0)e?p.x=p.x+(fa/2-b.B.x-H/2):p.y=p.y+(R/2-b.B.y-H/2);else if(e){n=c[0].P.x+c[0].wa.x;F=c[g-1].P.x+c[g-1].wa.x+c[g-1].B.x*2;p.x=p.x+(n+(F-n)/2-b.B.x-H/2)}else{n=
c[0].P.y+c[0].wa.y;F=c[g-1].P.y+c[g-1].wa.y+c[g-1].B.y*2;p.y=p.y+(n+(F-n)/2-b.B.y-H/2)}break;case vp:if(e){p.x=p.x-H;fa=fa+H}else{p.y=p.y-H;R=R+H}break;case wp:if(e){p.x=p.x+(fa-b.width+H);fa=fa+H}else{p.y=p.y+(R-b.height+H);R=R+H}break;case mp:case bp:e?p.x=g>1?p.x+(Ya+F/2-b.B.x):p.x+(c[0].B.x-b.B.x+c[0].wa.x):p.y=g>1?p.y+(Ya+F/2-b.B.y):p.y+(c[0].B.y-b.B.y+c[0].wa.y);break;case np:e?p.x=p.x+(fa+F/2-b.B.x):p.y=p.y+(R+F/2-b.B.y);break;case op:break;default:t.g("Unhandled alignment value "+n.toString())}for(j=
0;j<g;j++){k=c[j];k.P=e?new D(k.P.x+k.wa.x-p.x,k.P.y+(d>135?(u?-R:-k.Ga.height)+k.wa.y-B:G+B+k.wa.y)):new D(k.P.x+(d>135?(u?-fa:-k.Ga.width)+k.wa.x-B:q+B+k.wa.x),k.P.y+k.wa.y-p.y)}if(e){fa=Mp(b,fa,p.x);if(p.x<0)p.x=0;if(d>135)p.y=p.y+(R+B);R=R+(G+B)}else{if(d>135)p.x=p.x+(fa+B);fa=fa+(q+B);R=Np(b,R,p.y);if(p.y<0)p.y=0}b.wa=p;b.Ga=new K(fa,R)}}
function zp(a,b,c,d,e){s&&t.c(a,$,Y,"layoutBusChildrenPosDir:v");var g=b.length,i,j;if(g===0)return a=[c,d,e];if(g===1){i=b[0];j=i.Ga;d=j.width;e=j.height;return a=[c,d,e]}var k=a.bd,l=a.Zd,n=up(a)===90,q=0,p=0,u=0,w=0,B=0,F=0,w=F=0,H,x;for(H=0;H<g;H++)if(!(H%2!==0||g>1&&H===g-1)){i=b[H];j=i.Ga;x=q===0?0:l;if(n){F=Pp(i)-k;i.P=new D(c-(j.width+F),u+x);d=Math.max(d,j.width+F);e=Math.max(e,u+x+j.height);u=u+(x+j.height)}else{F=Pp(i)-k;i.P=new D(p+x,c-(j.height+F));e=Math.max(e,j.height+F);d=Math.max(d,
p+x+j.width);p=p+(x+j.width)}q++}q=0;w=p;B=u;if(n){p=c+k;u=0}else{p=0;u=c+k}for(H=0;H<g;H++)if(H%2!==0){i=b[H];j=i.Ga;x=q===0?0:l;if(n){F=Pp(i)-k;i.P=new D(p+F,u+x);d=Math.max(d,p+j.width+F);e=Math.max(e,u+x+j.height);u=u+(x+j.height)}else{F=Pp(i)-k;i.P=new D(p+x,u+F);d=Math.max(d,p+x+j.width);e=Math.max(e,u+j.height+F);p=p+(x+j.width)}q++}if(g>1&&g%2===1){i=b[g-1];j=i.Ga;if(n){b=Qp(i,Math.max(Math.abs(B),Math.abs(u)));i.P=new D(c+k/2-i.B.x-i.wa.x,e+b);w=c+k/2-i.B.x-i.wa.x;d=Math.max(d,w+j.width);
w<0&&(d=d-w);e=Math.max(e,Math.max(B,u)+b+j.height);i.P.x<0&&(c=Rp(a,i.P.x,o,c,k))}else{b=Qp(i,Math.max(Math.abs(w),Math.abs(p)));i.P=new D(d+b,c+k/2-i.B.y-i.wa.y);d=Math.max(d,Math.max(w,p)+b+j.width);w=c+k/2-i.B.y-i.wa.y;e=Math.max(e,w+j.height);w<0&&(e=e-w);i.P.y<0&&(c=Rp(a,i.P.y,h,c,k))}}return a=[c,d,e]}
function Ap(a,b,c,d,e){s&&t.c(a,$,Y,"layoutBusChildrenNegDir:v");var g=b.length,i,j;if(g===0)return a=[c,d,e];if(g===1){i=b[0];j=i.Ga;d=j.width;e=j.height;return a=[c,d,e]}var k=a.bd,l=a.Zd,n=up(a)===270,q=0,p=0,u=0,w=0,B=0,F=0,w=F=0,H,x;for(H=0;H<g;H++)if(!(H%2!==0||g>1&&H===g-1)){i=b[H];j=i.Ga;x=q===0?0:l;if(n){F=Pp(i)-k;u=u-(x+j.height);i.P=new D(c-(j.width+F),u);d=Math.max(d,j.width+F);e=Math.max(e,Math.abs(u))}else{F=Pp(i)-k;p=p-(x+j.width);i.P=new D(p,c-(j.height+F));e=Math.max(e,j.height+F);
d=Math.max(d,Math.abs(p))}q++}q=0;w=p;B=u;if(n){p=c+k;u=0}else{p=0;u=c+k}for(H=0;H<g;H++)if(H%2!==0){i=b[H];j=i.Ga;x=q===0?0:l;if(n){F=Pp(i)-k;u=u-(x+j.height);i.P=new D(p+F,u);d=Math.max(d,p+j.width+F);e=Math.max(e,Math.abs(u))}else{F=Pp(i)-k;p=p-(x+j.width);i.P=new D(p,u+F);e=Math.max(e,u+j.height+F);d=Math.max(d,Math.abs(p))}q++}if(g>1&&g%2===1){i=b[g-1];j=i.Ga;if(n){l=Qp(i,Math.max(Math.abs(B),Math.abs(u)));i.P=new D(c+k/2-i.B.x-i.wa.x,-e-j.height-l);w=c+k/2-i.B.x-i.wa.x;d=Math.max(d,w+j.width);
w<0&&(d=d-w);e=Math.max(e,Math.abs(Math.min(B,u))+l+j.height);i.P.x<0&&(c=Rp(a,i.P.x,o,c,k))}else{l=Qp(i,Math.max(Math.abs(p),Math.abs(p)));i.P=new D(-d-j.width-l,c+k/2-i.B.y-i.wa.y);d=Math.max(d,Math.abs(Math.min(w,p))+l+j.width);w=c+k/2-i.B.y-i.wa.y;e=Math.max(e,w+j.height);w<0&&(e=e-w);i.P.y<0&&(c=Rp(a,i.P.y,h,c,k))}}for(H=0;H<g;H++){i=b[H];i.P=n?new D(i.P.x,i.P.y+e):new D(i.P.x+d,i.P.y)}return a=[c,d,e]}
function Pp(a){s&&t.c(a,$,Y,"fixRelativePostions:child");return a.parent===m?0:a.parent.Ru}function Qp(a){s&&t.c(a,$,Y,"fixRelativePostions:lastchild");return a.parent===m?0:a.parent.av}function Rp(a,b,c,d,e){s&&t.c(a,$,Y,"fixRelativePostions:v");for(var a=a.Fb,g=a.length,i=0;i<g;i++)a[i].P=c?new D(a[i].P.x,a[i].P.y-b):new D(a[i].P.x-b,a[i].P.y);b=a[g-1];return Math.max(d,c?b.wa.y-b.B.y-e/2:b.wa.x-b.B.x-e/2)}
function Mp(a,b,c){s&&t.c(a,$,Y,"calculateSubwidth:v");switch(a.qa){case kp:case Lp:var d=b;c+a.width>d&&(d=c+a.width);c<0&&(d=d-c);return d;case vp:return a.width>b?a.width:b;case wp:return a.B.x*2>b?a.width:b+a.width-a.B.x*2;case mp:case bp:d=Math.min(0,c);c=Math.max(b,c+a.width);return Math.max(a.width,c-d);case np:return a.width-a.B.x+a.bd/2+b;case op:return Math.max(a.width,a.B.x+a.bd/2+b);default:return b}}
function Np(a,b,c){s&&t.c(a,$,Y,"calculateSubheight:v");switch(a.qa){case kp:case Lp:var d=b;c+a.height>d&&(d=c+a.height);c<0&&(d=d-c);return d;case vp:return a.height>b?a.height:b;case wp:return a.B.y*2>b?a.height:b+a.height-a.B.y*2;case mp:case bp:d=Math.min(0,c);c=Math.max(b,c+a.height);return Math.max(a.height,c-d);case np:return a.height-a.B.y+a.bd/2+b;case op:return Math.max(a.height,a.B.y+a.bd/2+b);default:return b}}
function Op(a,b,c){s&&t.c(a,qa,Y,"alignOffset:align");switch(a){case Lp:b=b/2;c=c/2;break;case kp:b=b/2;c=c/2;break;case vp:c=b=0;break;case wp:break;default:t.g("Unhandled alignment value "+a.toString())}return[b,c]}function Bp(a,b,c,d,e,g){s&&t.c(a,$,Y,"shiftRelPosAlign:v");s&&t.c(b,qa,Y,"shiftRelPosAlign:align");b=Op(b,c,d);Jp(a,b[0],b[1],e,g)}function Jp(a,b,c,d,e){s&&t.c(a,$,Y,"shiftRelPos:v");if(!(b===0&&c===0))for(a=a.Fb;d<=e;d++){var g=a[d];g.P.x=g.P.x+b;g.P.y=g.P.y+c}}
function Cp(a,b,c){s&&t.c(b,$,Y,"recordMidPoints:v");s&&t.c(c,D,Y,"recordMidPoints:p");var d=b.hb;switch(a.ec){case Lo:for(a=b.tb;a.next();){b=a.value;if(b.I===d)b.iq=c}break;case So:for(a=b.sb;a.next();){b=a.value;if(b.G===d)b.iq=c}break;default:t.g("Unhandled path value "+a.ec.toString())}}function Kp(a,b,c){for(var d=0;d<a.length;d++){a[d].x=a[d].x+b;a[d].y=a[d].y+c}}
function Ip(a,b,c,d,e,g){s&&t.c(a,$,Y,"mergeFringes:parent");s&&t.c(b,$,Y,"mergeFringes:child");var i=up(a),j=i===90||i===270,k=a.bd,l=e,n=g,q=b.Dp,e=b.qq,g=b.Ga,a=j?Math.max(n,g.height):Math.max(l,g.width);if(q===m||i!==up(b)){q=[];e=[];if(j){q[0]=new D(0,0);q[1]=new D(0,g.height);e[0]=new D(g.width,0);e[1]=new D(e[0].x,q[1].y)}else{q[0]=new D(0,0);q[1]=new D(g.width,0);e[0]=new D(0,g.height);e[1]=new D(q[1].x,e[0].y)}}if(j){b=j=l;i=q;l=9999999;if(!(d===m||d.length<2||i===m||i.length<2))for(var p=
n=0;n<d.length&&p<i.length;){var u=d[n],w=i[p].copy();w.x=w.x+j;var B=u;n+1<d.length&&(B=d[n+1]);var F=w;if(p+1<i.length){F=i[p+1].copy();F.x=F.x+j}var H=l;u.y===w.y?H=w.x-u.x:u.y>w.y&&u.y<F.y?H=w.x+(u.y-w.y)/(F.y-w.y)*(F.x-w.x)-u.x:w.y>u.y&&w.y<B.y&&(H=w.x-(u.x+(w.y-u.y)/(B.y-u.y)*(B.x-u.x)));H<l&&(l=H);if(B.y<=u.y)n++;else if(F.y<=w.y)p++;else{B.y<=F.y&&n++;F.y<=B.y&&p++}}k=b-l+k;b=k;if(c===m||c.length<2||q===m||q.length<2)c=m;else{i=[];for(l=j=p=0;j<q.length&&q[j].y<c[0].y;){n=q[j++].copy();n.x=
n.x+b;i[l++]=n}for(;p<c.length;){n=c[p++];i[l++]=n}for(c=c[c.length-1].y;j<q.length&&q[j].y<=c;)j++;for(;j<q.length&&q[j].y>c;){n=q[j++].copy();n.x=n.x+b;i[l++]=n}c=i}j=e;l=k;if(d===m||d.length<2||j===m||j.length<2)d=m;else{e=[];for(b=n=q=0;q<d.length&&d[q].y<j[0].y;){i=d[q++];e[b++]=i}for(;n<j.length;){i=j[n++].copy();i.x=i.x+l;e[b++]=i}for(j=j[j.length-1].y;q<d.length&&d[q].y<=j;)q++;for(;q<d.length&&d[q].y>j;){i=d[q++];e[b++]=i}d=e}e=Math.max(0,k)+g.width;return[k,c,d,e,a]}b=j=n;i=q;l=9999999;
if(!(d===m||d.length<2||i===m||i.length<2))for(p=n=0;n<d.length&&p<i.length;){u=d[n];w=i[p].copy();w.y=w.y+j;B=u;n+1<d.length&&(B=d[n+1]);F=w;if(p+1<i.length){F=i[p+1].copy();F.y=F.y+j}H=l;u.x===w.x?H=w.y-u.y:u.x>w.x&&u.x<F.x?H=w.y+(u.x-w.x)/(F.x-w.x)*(F.y-w.y)-u.y:w.x>u.x&&w.x<B.x&&(H=w.y-(u.y+(w.x-u.x)/(B.x-u.x)*(B.y-u.y)));H<l&&(l=H);if(B.x<=u.x)n++;else if(F.x<=w.x)p++;else{B.x<=F.x&&n++;F.x<=B.x&&p++}}k=b-l+k;b=k;if(c===m||c.length<2||q===m||q.length<2)c=m;else{i=[];for(l=j=p=0;j<q.length&&q[j].x<
c[0].x;){n=q[j++].copy();n.y=n.y+b;i[l++]=n}for(;p<c.length;){n=c[p++];i[l++]=n}for(c=c[c.length-1].x;j<q.length&&q[j].x<=c;)j++;for(;j<q.length&&q[j].x>c;){n=q[j++].copy();n.y=n.y+b;i[l++]=n}c=i}j=e;l=k;if(d===m||d.length<2||j===m||j.length<2)d=m;else{e=[];for(b=n=q=0;q<d.length&&d[q].x<j[0].x;){i=d[q++];e[b++]=i}for(;n<j.length;){i=j[n++].copy();i.y=i.y+l;e[b++]=i}for(j=j[j.length-1].x;q<d.length&&d[q].x<=j;)q++;for(;q<d.length&&d[q].x>j;){i=d[q++];e[b++]=i}d=e}e=a;g=Math.max(0,k)+g.height;return[k,
c,d,e,g]}function Yo(a,b,c,d){s&&t.c(b,$,Y,"assignAbsolutePositions:v");if(b!==m){b.x=c;b.y=d;for(var b=b.Fb,e=b.length,g=0;g<e;g++){var i=b[g];Yo(a,i,c+i.P.x,d+i.P.y)}}}Y.prototype.commitLayout=Y.prototype.ou=function(){this.Uy();this.commitNodes();this.commitLinks()};
Y.prototype.commitNodes=Y.prototype.Nx=function(){for(var a=this.p.R.f,b;a.next();){b=a.value;b.commit()}for(a.reset();a.next();){b=a.value;s&&t.c(b,$,Y,"layoutComments:v");if(b.kd!==m){var c=b.kh.ta,d=b.hb,e=f,e=f,e=b.Sb,g=0,i=kp,i=o;if(d!==m){g=d.Sb;i=d.qa;i=lp(i)}for(var d=e===90||e===270,j=g===90||g===270,k=b.ql===0,l=qp(b),n=0,q=b.kd,p=q.length,u=0;u<p;u++){var e=q[u],w=e.la,B;if(d&&!k||!i&&!j&&k||i&&j&&k){if(g>135&&!i||j&&l)if(b.Vb>=0){e.location=new D(b.C.x-b.Vb-w.width,b.C.y+n);for(B=e.tf();B.next();){e=
B.value;e.Ya=sc;e.$a=tc}}else{e.location=new D(b.C.x+b.B.x*2-b.Vb,b.C.y+n);for(B=e.tf();B.next();){e=B.value;e.Ya=tc;e.$a=sc}}else if(b.Vb>=0){e.location=new D(b.C.x+b.B.x*2+b.Vb,b.C.y+n);for(B=e.tf();B.next();){e=B.value;e.Ya=tc;e.$a=sc}}else{e.location=new D(b.C.x+b.Vb-w.width,b.C.y+n);for(B=e.tf();B.next();){e=B.value;e.Ya=sc;e.$a=tc}}n=b.jd>=0?n+(w.height+b.jd):n+(b.jd-w.height)}else{if(g>135&&!i||!j&&l)if(b.Vb>=0){e.location=new D(b.C.x+n,b.C.y-b.Vb-w.height);for(B=e.tf();B.next();){e=B.value;
e.Ya=ec;e.$a=oc}}else{e.location=new D(b.C.x+n,b.C.y+b.B.y*2-b.Vb);for(B=e.tf();B.next();){e=B.value;e.Ya=oc;e.$a=ec}}else if(b.Vb>=0){e.location=new D(b.C.x+n,b.C.y+b.B.y*2+b.Vb);for(B=e.tf();B.next();){e=B.value;e.Ya=oc;e.$a=ec}}else{e.location=new D(b.C.x+n,b.C.y+b.Vb-w.height);for(B=e.tf();B.next();){e=B.value;e.Ya=ec;e.$a=oc}}n=b.jd>=0?n+(w.width+b.jd):n+(b.jd-w.width)}}c=n-b.jd-(d?c.height:c.width);if(this.path===Lo)for(b=b.sb;b.next();){e=b.value;if((e=e.link)&&e.Xe!==Rf)e.nk=c>0?c:NaN}else for(b=
b.tb;b.next();){e=b.value;if((e=e.link)&&e.Xe!==Rf)e.wk=c>0?c:NaN}}}};Y.prototype.commitLinks=Y.prototype.Mx=function(){for(var a=this.p.Qb.f;a.next();)a.value.commit()};Y.prototype.Uy=function(){for(var a=this.qc.f;a.next();){var b=this.p.ge(a.value);Sp(this,b)}};
function Sp(a,b){s&&t.c(b,$,Y,"setPortSpotsTree:v");if(b!==m){s&&t.c(b,$,Y,"setPortSpots:v");var c=b.qa;if(lp(c)){s&&t.c(b,$,Y,"setPortSpotsBus:v");s&&t.c(c,qa,Y,"setPortSpots:align");var d=a.ec===Lo,e=up(b),g;switch(e){case 0:g=tc;break;case 90:g=oc;break;case 180:g=sc;break;default:g=ec}var i,j,k,l=b.Fb,n=l.length;switch(c){case mp:case bp:for(c=0;c<n;c++){i=l[c];j=d?i.tb:i.sb;j.next();k=j.value;if(k!==m){k=k.Fa;if(k!==m){i=e===90||e===270?sc:ec;if(n===1||c===n-1&&n%2===1)switch(e){case 0:i=sc;
break;case 90:i=ec;break;case 180:i=tc;break;default:i=oc}else c%2===0&&(i=e===90||e===270?tc:oc);if(d){if(b.ej)k.Ya=g;if(b.dj)k.$a=i}else{if(b.ej)k.Ya=i;if(b.dj)k.$a=g}}}}break;case np:i=e===90||e===270?tc:oc;for(j=d?b.sb:b.tb;j.next();){k=j.value;k=k.Fa;if(k!==m)if(d){if(b.ej)k.Ya=g;if(b.dj)k.$a=i}else{if(b.ej)k.Ya=i;if(b.dj)k.$a=g}}break;case op:i=e===90||e===270?sc:ec;for(j=d?b.sb:b.tb;j.next();){k=j.value;k=k.Fa;if(k!==m)if(d){if(b.ej)k.Ya=g;if(b.dj)k.$a=i}else{if(b.ej)k.Ya=i;if(b.dj)k.$a=g}}}}else{d=
up(b);if(a.ec===Lo)for(e=b.sb;e.next();){g=e.value;g=g.Fa;if(g!==m){if(b.jg)if(Xb(b.Ce))switch(d){case 0:g.Ya=tc;break;case 90:g.Ya=oc;break;case 180:g.Ya=sc;break;default:g.Ya=ec}else g.Ya=b.Ce;if(b.ig)if(Xb(b.ue))switch(d){case 0:g.$a=sc;break;case 90:g.$a=ec;break;case 180:g.$a=tc;break;default:g.$a=oc}else g.$a=b.ue}}else for(e=b.tb;e.next();){g=e.value;g=g.Fa;if(g!==m){if(b.jg)if(Xb(b.Ce))switch(d){case 0:g.$a=tc;break;case 90:g.$a=oc;break;case 180:g.$a=sc;break;default:g.$a=ec}else g.$a=b.Ce;
if(b.ig)if(Xb(b.ue))switch(d){case 0:g.Ya=sc;break;case 90:g.Ya=ec;break;case 180:g.Ya=tc;break;default:g.Ya=oc}else g.Ya=b.ue}}}d=b.Fb;e=d.length;for(g=0;g<e;g++)Sp(a,d[g])}}function up(a){s&&t.c(a,$,Y,"orthoAngle:v");a=a.Sb;return a<=45?0:a<=135?90:a<=225?180:a<=315?270:0}function xp(a){s&&t.c(a,$,Y,"computeLayerSpacing:v");var b=up(a),b=b===90||b===270,c=a.ld;if(a.Xf>0)var d=Math.min(1,a.Xf),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function yp(a){s&&t.c(a,$,Y,"computeNodeIndent:v");var b=up(a),b=b===90||b===270,c=a.Mg;if(a.fg>0)var d=Math.min(1,a.fg),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}t.a(Y,"roots",Y.prototype.KG);t.defineProperty(Y,{KG:"roots"},r("qc"),function(a){if(this.qc!==a){this.qc=a;this.v()}});t.a(Y,"path",Y.prototype.path);t.defineProperty(Y,{path:"path"},r("ec"),function(a){if(this.ec!==a){s&&t.c(a,qa,Y,"path");if(a===Lo||a===So){this.ec=a;this.v()}}});t.a(Y,"treeStyle",Y.prototype.ND);
t.defineProperty(Y,{ND:"treeStyle"},r("Lq"),function(a){if(this.zc!==a){s&&t.c(a,qa,Y,"treeStyle");if(a===Mo||a===ep||a===fp||a===dp){this.Lq=a;this.v()}}});t.a(Y,"arrangement",Y.prototype.Md);t.defineProperty(Y,{Md:"arrangement"},r("zc"),function(a){if(this.zc!==a){s&&t.c(a,qa,Y,"arrangement");if(a===No||a===Zo||a===Ro){this.zc=a;this.v()}}});t.a(Y,"arrangementSpacing",Y.prototype.ku);t.defineProperty(Y,{ku:"arrangementSpacing"},r("Ye"),function(a){if(!this.Ye.z(a)){this.Ye.Ua(a);this.v()}});
t.a(Y,"rootDefaults",Y.prototype.JG);t.defineProperty(Y,{JG:"rootDefaults"},r("U"),function(a){if(this.U!==a){s&&t.c(a,$,Y,"rootDefaults");this.U=a;this.v()}});t.a(Y,"alternateDefaults",Y.prototype.PE);t.defineProperty(Y,{PE:"alternateDefaults"},r("T"),function(a){if(this.T!==a){s&&t.c(a,$,Y,"alternateDefaults");this.T=a;this.v()}});t.a(Y,"sorting",Y.prototype.Ff);
t.defineProperty(Y,{Ff:"sorting"},function(){return this.U.Yb},function(a){if(this.U.Yb!==a){s&&t.c(a,qa,Y,"sorting");if(a===gp||a===hp||a===ip||jp){this.U.Yb=a;this.v()}}});t.a(Y,"comparer",Y.prototype.bh);t.defineProperty(Y,{bh:"comparer"},function(){return this.U.Wb},function(a){if(this.U.Wb!==a){s&&t.e(a,"function",Y,"comparer");this.U.Wb=a;this.v()}});t.a(Y,"angle",Y.prototype.Qa);
t.defineProperty(Y,{Qa:"angle"},function(){return this.U.Sb},function(a){if(this.U.Sb!==a&&(a===0||a===90||a===180||a===270)){this.U.Sb=a;this.v()}});t.a(Y,"alignment",Y.prototype.qb);t.defineProperty(Y,{qb:"alignment"},function(){return this.U.qa},function(a){if(this.U.qa!==a){s&&t.Va(a,Y,Y,"alignment");this.U.qa=a;this.v()}});t.a(Y,"nodeIndent",Y.prototype.Ey);t.defineProperty(Y,{Ey:"nodeIndent"},function(){return this.U.Mg},function(a){if(this.U.Mg!==a&&a>=0){this.U.Mg=a;this.v()}});
t.a(Y,"nodeIndentPastParent",Y.prototype.Fy);t.defineProperty(Y,{Fy:"nodeIndentPastParent"},function(){return this.U.fg},function(a){if(this.U.fg!==a&&a>=0&&a<=1){this.U.fg=a;this.v()}});t.a(Y,"nodeSpacing",Y.prototype.Ru);t.defineProperty(Y,{Ru:"nodeSpacing"},function(){return this.U.bd},function(a){if(this.U.bd!==a){this.U.bd=a;this.v()}});t.a(Y,"layerSpacing",Y.prototype.Ir);t.defineProperty(Y,{Ir:"layerSpacing"},function(){return this.U.ld},function(a){if(this.U.ld!==a){this.U.ld=a;this.v()}});
t.a(Y,"layerSpacingParentOverlap",Y.prototype.uy);t.defineProperty(Y,{uy:"layerSpacingParentOverlap"},function(){return this.U.Xf},function(a){if(this.U.Xf!==a&&a>=0&&a<=1){this.U.Xf=a;this.v()}});t.a(Y,"compaction",Y.prototype.pu);t.defineProperty(Y,{pu:"compaction"},function(){return this.U.Of},function(a){if(this.U.Of!==a){s&&t.c(a,qa,Y,"compaction");if(a===rp||a===tp){this.U.Of=a;this.v()}}});t.a(Y,"breadthLimit",Y.prototype.Dx);
t.defineProperty(Y,{Dx:"breadthLimit"},function(){return this.U.Lf},function(a){if(this.U.Lf!==a&&a>=0){this.U.Lf=a;this.v()}});t.a(Y,"rowSpacing",Y.prototype.av);t.defineProperty(Y,{av:"rowSpacing"},function(){return this.U.Zd},function(a){if(this.U.Zd!==a){this.U.Zd=a;this.v()}});t.a(Y,"rowIndent",Y.prototype.Oy);t.defineProperty(Y,{Oy:"rowIndent"},function(){return this.U.Pc},function(a){if(this.U.Pc!==a&&a>=0){this.U.Pc=a;this.v()}});t.a(Y,"commentSpacing",Y.prototype.Kx);
t.defineProperty(Y,{Kx:"commentSpacing"},function(){return this.U.jd},function(a){if(this.U.jd!==a){this.U.jd=a;this.v()}});t.a(Y,"commentMargin",Y.prototype.Jx);t.defineProperty(Y,{Jx:"commentMargin"},function(){return this.U.Vb},function(a){if(this.U.Vb!==a){this.U.Vb=a;this.v()}});t.a(Y,"setsPortSpot",Y.prototype.ej);t.defineProperty(Y,{ej:"setsPortSpot"},function(){return this.U.jg},function(a){if(this.U.jg!==a){this.U.jg=a;this.v()}});t.a(Y,"portSpot",Y.prototype.Jy);
t.defineProperty(Y,{Jy:"portSpot"},function(){return this.U.Ce},function(a){if(!this.U.Ce.z(a)){this.U.Ce=a;this.v()}});t.a(Y,"setsChildPortSpot",Y.prototype.dj);t.defineProperty(Y,{dj:"setsChildPortSpot"},function(){return this.U.ig},function(a){if(this.U.ig!==a){this.U.ig=a;this.v()}});t.a(Y,"childPortSpot",Y.prototype.Hx);t.defineProperty(Y,{Hx:"childPortSpot"},function(){return this.U.ue},function(a){if(!this.U.ue.z(a)){this.U.ue=a;this.v()}});t.a(Y,"alternateSorting",Y.prototype.$E);
t.defineProperty(Y,{$E:"alternateSorting"},function(){return this.T.Yb},function(a){if(this.T.Yb!==a){s&&t.c(a,qa,Y,"alternateSorting");if(a===gp||a===hp||a===ip||jp){this.T.Yb=a;this.v()}}});t.a(Y,"alternateComparer",Y.prototype.OE);t.defineProperty(Y,{OE:"alternateComparer"},function(){return this.T.Wb},function(a){if(this.T.Wb!==a){s&&t.e(a,"function",Y,"alternateComparer");this.T.Wb=a;this.v()}});t.a(Y,"alternateAngle",Y.prototype.IE);
t.defineProperty(Y,{IE:"alternateAngle"},function(){return this.T.Sb},function(a){if(this.T.Sb!==a&&(a===0||a===90||a===180||a===270)){this.T.Sb=a;this.v()}});t.a(Y,"alternateAlignment",Y.prototype.HE);t.defineProperty(Y,{HE:"alternateAlignment"},function(){return this.T.qa},function(a){if(this.T.qa!==a){s&&t.Va(a,Y,Y,"alternateAlignment");this.T.qa=a;this.v()}});t.a(Y,"alternateNodeIndent",Y.prototype.SE);
t.defineProperty(Y,{SE:"alternateNodeIndent"},function(){return this.T.Mg},function(a){if(this.T.Mg!==a&&a>=0){this.T.Mg=a;this.v()}});t.a(Y,"alternateNodeIndentPastParent",Y.prototype.TE);t.defineProperty(Y,{TE:"alternateNodeIndentPastParent"},function(){return this.T.fg},function(a){if(this.T.fg!==a&&a>=0&&a<=1){this.T.fg=a;this.v()}});t.a(Y,"alternateNodeSpacing",Y.prototype.UE);
t.defineProperty(Y,{UE:"alternateNodeSpacing"},function(){return this.T.bd},function(a){if(this.T.bd!==a){this.T.bd=a;this.v()}});t.a(Y,"alternateLayerSpacing",Y.prototype.QE);t.defineProperty(Y,{QE:"alternateLayerSpacing"},function(){return this.T.ld},function(a){if(this.T.ld!==a){this.T.ld=a;this.v()}});t.a(Y,"alternateLayerSpacingParentOverlap",Y.prototype.RE);
t.defineProperty(Y,{RE:"alternateLayerSpacingParentOverlap"},function(){return this.T.Xf},function(a){if(this.T.Xf!==a&&a>=0&&a<=1){this.T.Xf=a;this.v()}});t.a(Y,"alternateCompaction",Y.prototype.NE);t.defineProperty(Y,{NE:"alternateCompaction"},function(){return this.T.Of},function(a){if(this.T.Of!==a){s&&t.c(a,qa,Y,"alternateCompaction");if(a===rp||a===tp){this.T.Of=a;this.v()}}});t.a(Y,"alternateBreadthLimit",Y.prototype.JE);
t.defineProperty(Y,{JE:"alternateBreadthLimit"},function(){return this.T.Lf},function(a){if(this.T.Lf!==a&&a>=0){this.T.Lf=a;this.v()}});t.a(Y,"alternateRowSpacing",Y.prototype.XE);t.defineProperty(Y,{XE:"alternateRowSpacing"},function(){return this.T.Zd},function(a){if(this.T.Zd!==a){this.T.Zd=a;this.v()}});t.a(Y,"alternateRowIndent",Y.prototype.WE);t.defineProperty(Y,{WE:"alternateRowIndent"},function(){return this.T.Pc},function(a){if(this.T.Pc!==a&&a>=0){this.T.Pc=a;this.v()}});
t.a(Y,"alternateCommentSpacing",Y.prototype.ME);t.defineProperty(Y,{ME:"alternateCommentSpacing"},function(){return this.T.jd},function(a){if(this.T.jd!==a){this.T.jd=a;this.v()}});t.a(Y,"alternateCommentMargin",Y.prototype.LE);t.defineProperty(Y,{LE:"alternateCommentMargin"},function(){return this.T.Vb},function(a){if(this.T.Vb!==a){this.T.Vb=a;this.v()}});t.a(Y,"alternateSetsPortSpot",Y.prototype.ZE);
t.defineProperty(Y,{ZE:"alternateSetsPortSpot"},function(){return this.T.jg},function(a){if(this.T.jg!==a){this.T.jg=a;this.v()}});t.a(Y,"alternatePortSpot",Y.prototype.VE);t.defineProperty(Y,{VE:"alternatePortSpot"},function(){return this.T.Ce},function(a){if(!this.T.Ce.z(a)){this.T.Ce=a;this.v()}});t.a(Y,"alternateSetsChildPortSpot",Y.prototype.YE);t.defineProperty(Y,{YE:"alternateSetsChildPortSpot"},function(){return this.T.ig},function(a){if(this.T.ig!==a){this.T.ig=a;this.v()}});
t.a(Y,"alternateChildPortSpot",Y.prototype.KE);t.defineProperty(Y,{KE:"alternateChildPortSpot"},function(){return this.T.ue},function(a){if(!this.T.ue.z(a)){this.T.ue=a;this.v()}});var Lo;Y.PathDestination=Lo=t.l(Y,"PathDestination",0);var So;Y.PathSource=So=t.l(Y,"PathSource",1);var gp;Y.SortingForwards=gp=t.l(Y,"SortingForwards",10);var hp;Y.SortingReverse=hp=t.l(Y,"SortingReverse",11);var ip;Y.SortingAscending=ip=t.l(Y,"SortingAscending",12);var jp;
Y.SortingDescending=jp=t.l(Y,"SortingDescending",13);var Lp;Y.AlignmentCenterSubtrees=Lp=t.l(Y,"AlignmentCenterSubtrees",20);var kp;Y.AlignmentCenterChildren=kp=t.l(Y,"AlignmentCenterChildren",21);var vp;Y.AlignmentStart=vp=t.l(Y,"AlignmentStart",22);var wp;Y.AlignmentEnd=wp=t.l(Y,"AlignmentEnd",23);var mp;Y.AlignmentBus=mp=t.l(Y,"AlignmentBus",24);var bp;Y.AlignmentBusBranching=bp=t.l(Y,"AlignmentBusBranching",25);var np;Y.AlignmentTopLeftBus=np=t.l(Y,"AlignmentTopLeftBus",26);var op;
Y.AlignmentBottomRightBus=op=t.l(Y,"AlignmentBottomRightBus",27);var rp;Y.CompactionNone=rp=t.l(Y,"CompactionNone",30);var tp;Y.CompactionBlock=tp=t.l(Y,"CompactionBlock",31);var Mo;Y.StyleLayered=Mo=t.l(Y,"StyleLayered",40);var fp;Y.StyleLastParents=fp=t.l(Y,"StyleLastParents",41);var ep;Y.StyleAlternating=ep=t.l(Y,"StyleAlternating",42);var dp;Y.StyleRootOnly=dp=t.l(Y,"StyleRootOnly",43);var No;Y.ArrangementVertical=No=t.l(Y,"ArrangementVertical",50);var Zo;
Y.ArrangementHorizontal=Zo=t.l(Y,"ArrangementHorizontal",51);var Ro;Y.ArrangementFixedRoots=Ro=t.l(Y,"ArrangementFixedRoots",52);function Po(){Cm.call(this)}t.J("TreeNetwork",Po);t.ua(Po,Cm);Po.prototype.createVertex=Po.prototype.Oi=function(){return new $};Po.prototype.createEdge=Po.prototype.pn=function(){return new Tp};
function $(){Gm.call(this);this.Gj=o;this.hb=m;this.Fb=[];this.Gh=this.et=this.Js=this.Xk=this.eH=0;this.qq=this.Dp=this.kd=this.wa=this.Ga=this.P=m;this.Yj=this.Xj=this.Vw=o;this.Yb=gp;this.Wb=Lm;this.Sb=0;this.qa=kp;this.fg=this.Mg=0;this.bd=20;this.ld=50;this.Xf=0;this.Of=tp;this.Lf=0;this.Zd=25;this.jd=this.Pc=10;this.Vb=20;this.jg=h;this.Ce=cc;this.ig=h;this.ue=cc}t.J("TreeVertex",$);t.ua($,Gm);
function Oo(a,b){if(b!==m){a.Yb=b.Yb;a.Wb=b.Wb;a.Sb=b.Sb;a.qa=b.qa;a.Mg=b.Mg;a.fg=b.fg;a.bd=b.bd;a.ld=b.ld;a.Xf=b.Xf;a.Of=b.Of;a.Lf=b.Lf;a.Zd=b.Zd;a.Pc=b.Pc;a.jd=b.jd;a.Vb=b.Vb;a.jg=b.jg;a.Ce=b.Ce;a.ig=b.ig;a.ue=b.ue}}t.a($,"initialized",$.prototype.UF);t.defineProperty($,{UF:"initialized"},r("Gj"),ba("Gj"));t.a($,"parent",$.prototype.parent);t.defineProperty($,{parent:"parent"},r("hb"),ba("hb"));t.a($,"children",$.prototype.children);t.defineProperty($,{children:"children"},r("Fb"),ba("Fb"));
t.m($,{ql:"childrenCount"},function(){return this.Fb.length});t.a($,"level",$.prototype.gG);t.defineProperty($,{gG:"level"},r("Xk"),ba("Xk"));t.a($,"descendantCount",$.prototype.pF);t.defineProperty($,{pF:"descendantCount"},r("Js"),ba("Js"));t.a($,"maxChildrenCount",$.prototype.mG);t.defineProperty($,{mG:"maxChildrenCount"},r("et"),ba("et"));t.a($,"maxGenerationCount",$.prototype.nG);t.defineProperty($,{nG:"maxGenerationCount"},r("Gh"),ba("Gh"));t.a($,"relativePosition",$.prototype.CG);
t.defineProperty($,{CG:"relativePosition"},r("P"),function(a){t.c(a,D,$,"relativePosition");this.P=a});t.a($,"subtreeSize",$.prototype.YG);t.defineProperty($,{YG:"subtreeSize"},r("Ga"),function(a){t.c(a,K,$,"subtreeSize");this.Ga=a});t.a($,"subtreeOffset",$.prototype.XG);t.defineProperty($,{XG:"subtreeOffset"},r("wa"),function(a){t.c(a,D,$,"subtreeOffset");this.wa=a});t.a($,"comments",$.prototype.Lx);t.defineProperty($,{Lx:"comments"},r("kd"),ba("kd"));t.a($,"sorting",$.prototype.Ff);
t.defineProperty($,{Ff:"sorting"},r("Yb"),ba("Yb"));t.a($,"comparer",$.prototype.bh);t.defineProperty($,{bh:"comparer"},r("Wb"),ba("Wb"));t.a($,"angle",$.prototype.Qa);t.defineProperty($,{Qa:"angle"},r("Sb"),ba("Sb"));t.a($,"alignment",$.prototype.qb);t.defineProperty($,{qb:"alignment"},r("qa"),ba("qa"));t.a($,"nodeIndent",$.prototype.Ey);t.defineProperty($,{Ey:"nodeIndent"},r("Mg"),ba("Mg"));t.a($,"nodeIndentPastParent",$.prototype.Fy);t.defineProperty($,{Fy:"nodeIndentPastParent"},r("fg"),ba("fg"));
t.a($,"nodeSpacing",$.prototype.Ru);t.defineProperty($,{Ru:"nodeSpacing"},r("bd"),ba("bd"));t.a($,"layerSpacing",$.prototype.Ir);t.defineProperty($,{Ir:"layerSpacing"},r("ld"),ba("ld"));t.a($,"layerSpacingParentOverlap",$.prototype.uy);t.defineProperty($,{uy:"layerSpacingParentOverlap"},r("Xf"),ba("Xf"));t.a($,"compaction",$.prototype.pu);t.defineProperty($,{pu:"compaction"},r("Of"),ba("Of"));t.a($,"breadthLimit",$.prototype.Dx);t.defineProperty($,{Dx:"breadthLimit"},r("Lf"),ba("Lf"));
t.a($,"rowSpacing",$.prototype.av);t.defineProperty($,{av:"rowSpacing"},r("Zd"),ba("Zd"));t.a($,"rowIndent",$.prototype.Oy);t.defineProperty($,{Oy:"rowIndent"},r("Pc"),ba("Pc"));t.a($,"commentSpacing",$.prototype.Kx);t.defineProperty($,{Kx:"commentSpacing"},r("jd"),ba("jd"));t.a($,"commentMargin",$.prototype.Jx);t.defineProperty($,{Jx:"commentMargin"},r("Vb"),ba("Vb"));t.a($,"setsPortSpot",$.prototype.ej);t.defineProperty($,{ej:"setsPortSpot"},r("jg"),ba("jg"));t.a($,"portSpot",$.prototype.Jy);
t.defineProperty($,{Jy:"portSpot"},r("Ce"),ba("Ce"));t.a($,"setsChildPortSpot",$.prototype.dj);t.defineProperty($,{dj:"setsChildPortSpot"},r("ig"),ba("ig"));t.a($,"childPortSpot",$.prototype.Hx);t.defineProperty($,{Hx:"childPortSpot"},r("ue"),ba("ue"));t.a($,"routeFirstRow",$.prototype.OG);t.defineProperty($,{OG:"routeFirstRow"},r("Vw"),ba("Vw"));t.a($,"routeAroundCentered",$.prototype.MG);t.defineProperty($,{MG:"routeAroundCentered"},r("Xj"),ba("Xj"));t.a($,"routeAroundLastParent",$.prototype.NG);
t.defineProperty($,{NG:"routeAroundLastParent"},r("Yj"),ba("Yj"));function Tp(){Hm.call(this);this.iq=new D(0,0)}t.J("TreeEdge",Tp);t.ua(Tp,Hm);
Tp.prototype.commit=Tp.prototype.Wh=function(){var a=this.Fa;if(a!==m&&a.Xe!==Rf){var b=this.p.wb,c=m,d=m;switch(b.ec){case Lo:c=this.I;d=this.G;break;case So:c=this.G;d=this.I;break;default:t.g("Unhandled path value "+b.ec.toString())}if(!(c===m||d===m)){b=this.iq;if(b.x===0&&b.y===0&&!c.Vw){var e=c;s&&t.c(e,$,Tp,"adjustRouteForAngleChange:parent");s&&t.c(d,$,Tp,"adjustRouteForAngleChange:child");a=this.Fa;c=up(e);b=up(d);if(c!==b){b=xp(e);e=e.mb;d=d.mb;if(!(c===0&&d.left-e.right<b+1||c===90&&d.top-
e.bottom<b+1||c===180&&e.left-d.right<b+1||c===270&&e.top-d.bottom<b+1)){Pl(a);var d=a.Me===Mj,g=a.Xe===th,i=lp(this.I.qa);a.vk();if(c===0){c=e.right+b/2;if(d){if(a.ca===4){b=a.i(3).y;a.A(1,new D(c-20,a.i(1).y));a.q(2,new D(c-20,b));a.q(3,new D(c,b));a.q(4,new D(c+20,b));a.A(5,new D(a.i(5).x,b))}}else if(g)if(i)a.A(3,new D(a.i(2).x,a.i(4).y));else{if(a.ca===6){a.A(2,new D(c,a.i(2).y));a.A(3,new D(c,a.i(3).y))}}else a.ca===4?a.q(2,new D(c,a.i(2).y)):a.ca===3?a.A(1,new D(c,a.i(2).y)):a.ca===2&&a.q(1,
new D(c,a.i(1).y))}else if(c===90){b=e.bottom+b/2;if(d){if(a.ca===4){c=a.i(3).x;a.A(1,new D(a.i(1).x,b-20));a.q(2,new D(c,b-20));a.q(3,new D(c,b));a.q(4,new D(c,b+20));a.A(5,new D(c,a.i(5).y))}}else if(g)if(i)a.A(3,new D(a.i(2).x,a.i(4).y));else{if(a.ca===6){a.A(2,new D(a.i(2).x,b));a.A(3,new D(a.i(3).x,b))}}else a.ca===4?a.q(2,new D(a.i(2).x,b)):a.ca===3?a.A(1,new D(a.i(2).x,b)):a.ca===2&&a.q(1,new D(a.i(1).x,b))}else if(c===180){c=e.left-b/2;if(d){if(a.ca===4){b=a.i(3).y;a.A(1,new D(c+20,a.i(1).y));
a.q(2,new D(c+20,b));a.q(3,new D(c,b));a.q(4,new D(c-20,b));a.A(5,new D(a.i(5).x,b))}}else if(g)if(i)a.A(3,new D(a.i(2).x,a.i(4).y));else{if(a.ca===6){a.A(2,new D(c,a.i(2).y));a.A(3,new D(c,a.i(3).y))}}else a.ca===4?a.q(2,new D(c,a.i(2).y)):a.ca===3?a.A(1,new D(c,a.i(2).y)):a.ca===2&&a.q(1,new D(c,a.i(1).y))}else if(c===270){b=e.top-b/2;if(d){if(a.ca===4){c=a.i(3).x;a.A(1,new D(a.i(1).x,b+20));a.q(2,new D(c,b+20));a.q(3,new D(c,b));a.q(4,new D(c,b-20));a.A(5,new D(c,a.i(5).y))}}else if(g)if(i)a.A(3,
new D(a.i(2).x,a.i(4).y));else{if(a.ca===6){a.A(2,new D(a.i(2).x,b));a.A(3,new D(a.i(3).x,b))}}else a.ca===4?a.q(2,new D(a.i(2).x,b)):a.ca===3?a.A(1,new D(a.i(2).x,b)):a.ca===2&&a.q(1,new D(a.i(1).x,b))}a.Xh()}}}else{var e=c.mb,j=up(c),d=xp(c),g=c.Zd;Pl(a);var i=a.Me===Mj,k=a.Xe===th,l,n,q,p;a.vk();if(k||i){for(l=2;a.ca>4;)a.aD(2);n=a.i(1);q=a.i(2)}else{for(l=1;a.ca>3;)a.aD(1);n=a.i(0);q=a.i(a.ca-1)}p=a.i(a.ca-1);if(j===0){if(c.qa===wp){j=e.bottom+b.y;b.y===0&&n.y>p.y+c.Pc&&(j=Math.min(j,Math.max(n.y,
j-yp(c))))}else if(c.qa===vp){j=e.top+b.y;b.y===0&&n.y<p.y-c.Pc&&(j=Math.max(j,Math.min(n.y,j+yp(c))))}else j=c.Xj||c.Yj&&c.Gh===1?e.top-c.wa.y+b.y:e.y+e.height/2+b.y;if(i){a.q(l,new D(n.x,j));l++;a.q(l,new D(e.right+d,j));l++;a.q(l,new D(e.right+d+(b.x-g)/3,j));l++;a.q(l,new D(e.right+d+(b.x-g)*2/3,j));l++;a.q(l,new D(e.right+d+(b.x-g),j));l++;a.q(l,new D(q.x,j))}else{if(k){a.q(l,new D(e.right+d/2,n.y));l++}a.q(l,new D(e.right+d/2,j));l++;a.q(l,new D(e.right+d+b.x-(k?g/2:g),j));l++;k&&a.q(l,new D(a.i(l-
1).x,q.y))}}else if(j===90){if(c.qa===wp){j=e.right+b.x;b.x===0&&n.x>p.x+c.Pc&&(j=Math.min(j,Math.max(n.x,j-yp(c))))}else if(c.qa===vp){j=e.left+b.x;b.x===0&&n.x<p.x-c.Pc&&(j=Math.max(j,Math.min(n.x,j+yp(c))))}else j=c.Xj||c.Yj&&c.Gh===1?e.left-c.wa.x+b.x:e.x+e.width/2+b.x;if(i){a.q(l,new D(j,n.y));l++;a.q(l,new D(j,e.bottom+d));l++;a.q(l,new D(j,e.bottom+d+(b.y-g)/3));l++;a.q(l,new D(j,e.bottom+d+(b.y-g)*2/3));l++;a.q(l,new D(j,e.bottom+d+(b.y-g)));l++;a.q(l,new D(j,q.y))}else{if(k){a.q(l,new D(n.x,
e.bottom+d/2));l++}a.q(l,new D(j,e.bottom+d/2));l++;a.q(l,new D(j,e.bottom+d+b.y-(k?g/2:g)));l++;k&&a.q(l,new D(q.x,a.i(l-1).y))}}else if(j===180){if(c.qa===wp){j=e.bottom+b.y;b.y===0&&n.y>p.y+c.Pc&&(j=Math.min(j,Math.max(n.y,j-yp(c))))}else if(c.qa===vp){j=e.top+b.y;b.y===0&&n.y<p.y-c.Pc&&(j=Math.max(j,Math.min(n.y,j+yp(c))))}else j=c.Xj||c.Yj&&c.Gh===1?e.top-c.wa.y+b.y:e.y+e.height/2+b.y;if(i){a.q(l,new D(n.x,j));l++;a.q(l,new D(e.left-d,j));l++;a.q(l,new D(e.left-d+(b.x+g)/3,j));l++;a.q(l,new D(e.left-
d+(b.x+g)*2/3,j));l++;a.q(l,new D(e.left-d+(b.x+g),j));l++;a.q(l,new D(q.x,j))}else{if(k){a.q(l,new D(e.left-d/2,n.y));l++}a.q(l,new D(e.left-d/2,j));l++;a.q(l,new D(e.left-d+b.x+(k?g/2:g),j));l++;k&&a.q(l,new D(a.i(l-1).x,q.y))}}else if(j===270){if(c.qa===wp){j=e.right+b.x;b.x===0&&n.x>p.x+c.Pc&&(j=Math.min(j,Math.max(n.x,j-yp(c))))}else if(c.qa===vp){j=e.left+b.x;b.x===0&&n.x<p.x-c.Pc&&(j=Math.max(j,Math.min(n.x,j+yp(c))))}else j=c.Xj||c.Yj&&c.Gh===1?e.left-c.wa.x+b.x:e.x+e.width/2+b.x;if(i){a.q(l,
new D(j,n.y));l++;a.q(l,new D(j,e.top-d));l++;a.q(l,new D(j,e.top-d+(b.y+g)/3));l++;a.q(l,new D(j,e.top-d+(b.y+g)*2/3));l++;a.q(l,new D(j,e.top-d+(b.y+g)));l++;a.q(l,new D(j,q.y))}else{if(k){a.q(l,new D(n.x,e.top-d/2));l++}a.q(l,new D(j,e.top-d/2));l++;a.q(l,new D(j,e.top-d+b.y+(k?g/2:g)));l++;k&&a.q(l,new D(q.x,a.i(l-1).y))}}else t.g("Invalid angle "+j);a.Xh()}}}};t.a(Tp,"relativePoint",Tp.prototype.BG);t.defineProperty(Tp,{BG:"relativePoint"},r("iq"),ba("iq"));window.go=ga;ga.version="1.0.0"; })(window);
