/*
 * GoJS™ v1.0.0 JavaScript Library for HTML Canvas Diagrams
 * Northwoods Software®, http://www.nwoods.com/
 *
 * Copyright © 1998-2012 by Northwoods Software Corporation.  All Rights Reserved.
 * THIS SOFTWARE IS LICENSED.  THE LICENSE AGREEMENT IS AT: http://www.gojs.net/1.0.0/license.html.
 */
(function(window) { var f=void 0,h=!0,m=null,o=!1;function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function r(a){return function(){return this[a]}}function ca(a){return function(){return a}}var ea,ga={};if(!Object.prototype.__defineGetter__&&!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Object.prototype.__defineGetter__&&!Object.defineProperty&&(Object.defineProperty=function(a,b,c){c.get&&a.__defineGetter__(b,c.get);c.set&&a.__defineSetter__(b,c.set)});
Object.prototype.__lookupGetter__&&!Object.getOwnPropertyDescriptor&&(Object.getOwnPropertyDescriptor=function(a,b){return{get:a.__lookupGetter__(b),set:a.__lookupSetter__(b)}});Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__});Object.isFrozen||(Object.isFrozen=function(a){return a.TD===h});Object.freeze||(Object.freeze=function(a){a.TD=h});
Function.prototype.bind||(Function.prototype.bind=function(a){function b(){return g.apply(a,e.concat(d.call(arguments)))}function c(){}var d=Array.prototype.slice,e=d.call(arguments,1),g=this;c.prototype=this.prototype;b.prototype=new c;return b});var s={LE:o,pI:o,uy:o,NB:o,trace:aa(),KE:o,assert:o,XH:m,hI:aa(),jI:aa(),iI:aa(),gI:aa(),oI:aa(),kI:aa(),mI:aa(),lI:aa(),bI:o,JJ:o,EJ:o,FJ:o,hF:o,nI:aa()},s=m;ga.Debug=m;
var u={aw:{},Az:0,SD:{},Ct:document.createElement("canvas").getContext("2d"),Dt:"",ax:[],rt:m,tz:[],Qw:"ontouchstart"in window,sA:"ongesturestart"in window,rz:o,g:function(a){s&&s.KE&&alert(a);throw Error(a);},v:function(a,b){if(a.Ha){var c="The object is frozen, so its properties cannot be set: "+a.toString();b!==f&&(c=c+("  to value: "+b));u.g(c)}},c:function(a,b,c,d){if(!(a instanceof b)){c=u.Vg(c);d!==f&&(c=c+("."+d));u.sc(a,b,c)}},e:function(a,b,c,d){if(typeof a!==b){c=u.Vg(c);d!==f&&(c=c+("."+
d));u.sc(a,b,c)}},i:function(a,b,c){if(!isFinite(a)){b=u.Vg(b);c!==f&&(b=b+("."+c));u.g(b+" must be a real number and not NaN or Infinity: "+a)}},Ra:function(a,b,c,d){if(!(a instanceof ja)||a.Jd!==b){c=u.Vg(c);d!==f&&(c=c+("."+d));u.sc(a,"a constant of class "+u.Ii(b),c)}},sc:function(a,b,c,d){b=u.Vg(b);c=u.Vg(c);d!==f&&(c=c+("."+d));u.g(c+" value is not an instance of "+b+": "+a)},ia:function(a,b,c,d){c=u.Vg(c);d!==f&&(c=c+("."+d));u.g(c+" is not in the range "+b+": "+a)},trace:function(a){window&&
window.console&&window.console.log(a)},isArray:function(a){return a instanceof Array||a instanceof NodeList||a instanceof HTMLCollection},SA:function(a,b,c){u.isArray(a)||u.sc(a,"Array or NodeList or HTMLCollection",b,c)},wb:function(a){return a.length},mb:function(a,b){return a[b]},JE:function(a,b,c){a instanceof Array?a[b]=c:u.g("Cannot replace an object in an HTMLCollection or NodeList at "+b)},ox:function(a,b){if(a instanceof Array)return a.indexOf(b);for(var c=a.length,d=0;d<c;d++)if(a[d]===
b)return d;return-1},Jh:function(a,b,c){a instanceof Array?b>=a.length?a.push(c):a.splice(b,0,c):u.g("Cannot insert an object into an HTMLCollection or NodeList: "+c+" at "+b)},Kh:function(a,b){a instanceof Array?b>=a.length?a.pop():a.splice(b,1):u.g("Cannot remove an object from an HTMLCollection or NodeList at "+b)},cz:1,Gb:function(a){a.__gohashid=u.cz++},on:function(a){var b=a.__gohashid;if(b===f){b=u.cz++;a.__gohashid=b}return b},dc:function(a){return a.__gohashid},a:function(a,b,c){a[b]=c},
H:function(a,b){b.iz=a;ga[a]=b},na:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a},defineProperty:function(a,b,c,d,e){u.e(a,"function","Util.defineProperty:classfunc");u.e(b,"object","Util.defineProperty:propname");u.e(c,"function","Util.defineProperty:getter");u.e(d,"function","Util.defineProperty:setter");c={get:c,set:d};if(e!==f)for(var g in e)c[g]=e[g];for(var i in b){Object.defineProperty(a.prototype,i,c);e=Object.getOwnPropertyDescriptor(a.prototype,
i);b[i]&&e&&Object.defineProperty(a.prototype,b[i],e)}},m:function(a,b,c,d){u.e(a,"function","Util.defineReadOnlyProperty:classfunc");u.e(b,"object","Util.defineReadOnlyProperty:propname");u.e(c,"function","Util.defineReadOnlyProperty:getter");c={get:c,set:function(a){u.g("The property "+b+" is read-only and cannot be set to "+a)}};if(d!==f)for(var e in d)c[e]=d[e];for(var g in b){Object.defineProperty(a.prototype,g,c);d=Object.getOwnPropertyDescriptor(a.prototype,g);b[g]&&d&&Object.defineProperty(a.prototype,
b[g],d)}},kd:function(a,b){for(var c in b)b[c]=h;a.prototype.XD=b},Vg:function(a){return a===f?"":typeof a==="string"?a:typeof a==="function"?u.Ii(a):a===m?"*":""},Ii:function(a){return typeof a==="function"?a.iz:typeof a==="object"&&a.constructor?a.constructor.iz:typeof a},l:function(a,b,c){u.e(a,"function","Util.defineEnumValue:classfunc");u.e(b,"string","Util.defineEnumValue:name");u.e(c,"number","Util.defineEnumValue:num");c=new ja(a,b,c);Object.freeze(c);a[b]=c;var d=a.bz;if(!d){d=new ka("string",
ja);a.bz=d}d.add(b,c);return c},Nx:function(a,b){if(!b)return m;u.e(a,"function","Util.findEnumValueForName:classfunc");u.e(b,"string","Util.findEnumValueForName:name");var c=a.bz;return!c?m:c.$(b)},TE:function(a,b,c,d){var e={},g;for(g in a){for(var i=o,j=1;j<arguments.length;j++)if(arguments[j]===g){i=h;break}i||(e[g]=a[g])}return e},Va:function(a,b){if(!a||!b)return m;var c=f;try{if(b instanceof Function)c=b(a);else if(typeof a.getAttribute==="function"){c=a.getAttribute(b);c===m&&(c=f)}else c=
a[b]}catch(d){s&&u.trace("property get error: "+d.toString())}return c},ab:function(a,b,c){if(a&&b)try{b instanceof Function?b(a,c):typeof a.setAttribute==="function"?a.setAttribute(b,c):a[b]=c}catch(d){s&&u.trace("property set error: "+d.toString())}},Gy:function(a,b){u.e(a,"object","Setting properties requires Objects as arguments");u.e(b,"object","Setting properties requires Objects as arguments");b.constructor!==Object&&u.g("Properties must be on a plain Object, not: "+b.toString());var c=s;c||
(s=u);var d=a instanceof v,e;for(e in b){var g=a,i=e;if(d){var j=e.indexOf(".");if(j>0){var k=e.substring(0,j),g=a.Le(k);g!==m?i=e.substr(j+1):u.g("Unable to find object named: "+k+" in panel "+a.toString()+" when trying to set property: "+e)}}i[0]!=="_"&&!u.Xx(g,i)&&u.g('Trying to set undefined property "'+i+'" on object: '+g.toString());g[i]=b[e];if(i[0]==="_"){j=g.yk;if(!j){j=[];g.yk=j}j.push(i)}}s=c;return a},Xx:function(a,b){for(var c=Object.getPrototypeOf(a);c&&c!==Function;){if(c.hasOwnProperty(b))return h;
var d=c.XD;if(d&&d[b])return h;c=Object.getPrototypeOf(c)}return o},TA:function(a,b){if(!(b instanceof Object)||b instanceof Element||b instanceof CanvasRenderingContext2D)return"";var c="",d;for(d in b)if(typeof d!=="string"){c===""&&(c=b+"\n");c=c+("  "+d+" is not a string property\n")}else if(d.charAt(0)!=="_"&&!(d.length<=2)){var e=u.Va(b,d);if(e!==m&&typeof e!=="function"&&!u.Xx(b,d)){c===""&&(c=b+"\n");c=c+('  unknown property "'+d+'" has value: '+e+" at "+a+"\n")}}return c},ks:function(a,b){if(b&&
!(typeof b==="number"||typeof b==="string"||typeof b==="boolean"||typeof b==="function"))if(u.dc(b)!==f){if(!u.At.contains(b)){u.At.add(b);u.$s.add(u.TA(a,b));if(b instanceof z||b instanceof la||b instanceof ka)for(var c=b.f;c.next();)u.ks(a+"["+c.key+"]",c.value);else for(c in b){var d=u.Va(b,c);if(!(d===f||d===m||!(d instanceof Object))&&c!=="_ownProperties"){if(b instanceof na){if(c==="_lines")continue}else if(b instanceof v){if(c==="data"||c==="_data")continue;if(c==="itemArray"||c==="_itemArray")continue}else if(!(b instanceof
B))if(b instanceof C){if(c==="archetypeGroupData"||c==="_archetypeGroupData")continue}else if(b instanceof oa){if(c==="archetypeLinkData"||c==="_archetypeLinkData")continue;if(c==="archetypeLabelNodeData"||c==="_archetypeLabelNodeData")continue}else if(b instanceof pa){if(c==="archetypeNodeData"||c==="_archetypeNodeData")continue}else if(b instanceof D){if(c==="nodeDataArray"||c==="_nodeDataArray")continue;if(c==="linkDataArray"||c==="_linkDataArray"||c==="_linkDataSet")continue;if(c==="_mapKeyNodeData"||
c==="_delayedNodeReferences")continue}u.ks(a+"."+c,d)}}}}else if(b instanceof Array)for(c=0;c<b.length;c++)u.ks(a+"["+c+"]",b[c]);else u.$s.add(u.TA(a,b))},OE:function(a){u.At===f?u.At=new la:u.At.clear();u.$s=new ra;u.ks("",a);a=u.$s.toString();u.$s=m;return a},gG:function(a){for(var b=[],c=0;c<256;c++)b[c]=c;for(var d=0,e,c=0;c<256;c++){d=(d+b[c]+119)%256;e=b[c];b[c]=b[d];b[d]=e}for(var d=c=0,g="",i=0;i<a.length;i++){c=(c+1)%256;d=(d+b[c])%256;e=b[c];b[c]=b[d];b[d]=e;g=g+String.fromCharCode(a.charCodeAt(i)^
b[(b[c]+b[d])%256])}return g},wF:function(a){for(var b=[],c=0;c<256;c++)b["0123456789abcdef".charAt(c>>4)+"0123456789abcdef".charAt(c&15)]=String.fromCharCode(c);a.length%2&&(a="0"+a);for(var d=[],e=0,c=0;c<a.length;c=c+2)d[e++]=b[a.substr(c,2)];a=d.join("");return a===""?"0":a},ac:function(a){return u.gG(u.wF(a))},bv:m,oE:"7da71ca0ad381e90",PE:"@COLOR1",QE:"@COLOR2"},ta=u,va=document.createElement("canvas"),wa=va.getContext("2d");wa[u.ac("7ca11abfd022028846")]=u.ac("398c3597c01238");
for(var xa=["5da73c80a3330d854f9e5e671d6633","32ab5ff3b26f42dc0ed90f22462913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],ya=1;5>ya;ya++)wa[u.ac("7ca11abfd7330390")](u.ac(xa[ya-1]),10,15*ya+0);wa[u.ac("7ca11abfd022028846")]=u.ac("39f046ebb36e4b");for(ya=1;5>ya;ya++)wa[u.ac("7ca11abfd7330390")](u.ac(xa[ya-1]),10,15*ya+0);ta.bv=va;function ja(a,b,c){u.Gb(this);this.hz=a;this.qb=b;this.dE=c}
ja.prototype.toString=function(){return u.Ii(this.hz)+"."+this.qb};u.m(ja,{Jd:"classType"},r("hz"));u.m(ja,{name:"name"},r("qb"));u.m(ja,{value:"value"},r("dE"));function ra(){this.Jv=[];this.rj=0;this.uA="  "}ra.prototype.toString=function(){return this.Jv.join("")};ra.prototype.add=function(a){a&&this.Jv.push(a)};function Aa(a){a.rj--;if(a.rj<0)a.rj=0}function Da(a){for(var b="\n",c=a.rj;c>0;c--)b=b+a.uA;a.Jv.push(b)}function Fa(){}u.m(Fa,{f:"iterator"},function(){return this});
Fa.prototype.reset=Fa.prototype.reset=aa();Fa.prototype.next=Fa.prototype.next=ca(o);u.m(Fa,{count:"count"},ca(0));Fa.prototype.Gf=aa();Fa.prototype.toString=ca("EmptyIterator");u.zf=new Fa;function Ga(a){this.key=-1;this.value=a}u.kd(Ga,{key:h,value:h});u.m(Ga,{f:"iterator"},function(){return this});Ga.prototype.reset=Ga.prototype.reset=function(){this.key=-1};Ga.prototype.next=Ga.prototype.next=function(){if(this.key===-1){this.key=0;return h}return o};u.m(Ga,{count:"count"},ca(1));
Ga.prototype.Gf=function(){this.value=m};Ga.prototype.toString=function(){return"SingletonIterator("+this.value+")"};function Ha(a){this.Nf=a;this.st=m;this.reset()}u.kd(Ha,{key:h,value:h});u.m(Ha,{f:"iterator"},function(){return this});u.a(Ha,"predicate",Ha.prototype.Ku);u.defineProperty(Ha,{Ku:"predicate"},r("st"),ba("st"));Ha.prototype.reset=Ha.prototype.reset=function(){var a=this.Nf;a.ug=m;this.Za=a.Pb;this.T=-1};
Ha.prototype.next=Ha.prototype.next=function(){var a=this.Nf;a.Pb!==this.Za&&u.g("the List has been modified during iteration");var a=a.j,b=a.length,c=++this.T,d=this.st;if(d!==m)for(;c<b;){var e=a[c];if(d(e)){this.key=this.T=c;this.value=e;return h}c++}else{if(c<b){this.key=c;this.value=a[c];return h}this.Gf()}return o};u.m(Ha,{count:"count"},function(){var a=this.st;if(a!==m){for(var b=0,c=this.Nf.j,d=c.length,e=0;e<d;e++)a(c[e])&&b++;return b}return this.Nf.j.length});
Ha.prototype.Gf=function(){this.key=-1;this.value=m;this.Za=-1;this.Nf.ug=this};Ha.prototype.toString=function(){return"ListIterator@"+this.T+"/"+this.Nf.count};function Ia(a){this.Nf=a;this.reset()}u.kd(Ia,{key:h,value:h});u.m(Ia,{f:"iterator"},function(){return this});Ia.prototype.reset=Ia.prototype.reset=function(){var a=this.Nf;a.nw=m;this.Za=a.Pb;this.T=a.j.length};
Ia.prototype.next=Ia.prototype.next=function(){var a=this.Nf;a.Pb!==this.Za&&u.g("the List has been modified during iteration");var b=--this.T;if(b>=0){this.key=b;this.value=a.j[b];return h}this.Gf();return o};u.m(Ia,{count:"count"},function(){return this.Nf.j.length});Ia.prototype.Gf=function(){this.key=-1;this.value=m;this.Za=-1;this.Nf.nw=this};Ia.prototype.toString=function(){return"ListIteratorBackwards("+this.T+"/"+this.Nf.count+")"};
function z(a){u.Gb(this);this.Ha=o;this.j=[];this.Pb=0;this.nw=this.ug=m;a===f||a===m?this.I=m:typeof a==="string"?a==="string"||a==="number"||a==="boolean"||a==="function"?this.I=a:u.ia(a,"the string 'number', 'string', 'boolean', or 'function'","List constructor: type"):typeof a==="function"?this.I=a:u.ia(a,"null, a primitive type name, or a class type","List constructor: type")}u.H("List",z);
z.prototype.Bf=function(a){this.I!==m&&(typeof this.I==="string"?typeof a!==this.I&&u.sc(a,this.I):a instanceof this.I||u.sc(a,this.I))};z.prototype.Uc=function(){var a=this.Pb;a++;a>999999999&&(a=0);this.Pb=a};z.prototype.freeze=z.prototype.freeze=function(){this.Ha=h;return this};z.prototype.thaw=z.prototype.xa=function(){this.Ha=o;return this};z.prototype.toString=function(){return"List("+u.Vg(this.I)+")#"+u.dc(this)};
z.prototype.add=z.prototype.add=function(a){if(a!==m){s&&this.Bf(a);u.v(this,a);this.j.push(a);this.Uc()}};z.prototype.addAll=z.prototype.Yf=function(a){if(a===m)return this;u.v(this);var b=this.j;if(u.isArray(a))for(var c=u.wb(a),d=0;d<c;d++){var e=u.mb(a,d);s&&this.Bf(e);b.push(e)}else for(a=a.f;a.next();){e=a.value;s&&this.Bf(e);b.push(e)}this.Uc();return this};z.prototype.clear=z.prototype.clear=function(){u.v(this);this.j=[];this.Uc()};
z.prototype.contains=z.prototype.contains=function(a){if(a===m)return o;s&&this.Bf(a);return this.j.indexOf(a)!==-1};z.prototype.indexOf=z.prototype.indexOf=function(a){if(a===m)return-1;s&&this.Bf(a);return this.j.indexOf(a)};z.prototype.elt=z.prototype.Z=function(a){s&&u.i(a,z,"elt:i");var b=this.j;(a<0||a>=b.length)&&u.ia(a,"0 <= i < length",z,"elt:i");return b[a]};
z.prototype.setElt=z.prototype.Ru=function(a,b){if(s){this.Bf(b);u.i(a,z,"setElt:i")}var c=this.j;(a<0||a>=c.length)&&u.ia(a,"0 <= i < length",z,"setElt:i");u.v(this,a);c[a]=b};z.prototype.first=z.prototype.bc=function(){var a=this.j;return a.length===0?m:a[0]};z.prototype.insertAt=z.prototype.ec=function(a,b){if(s){this.Bf(b);u.i(a,z,"insertAt:i")}a<0&&u.ia(a,">= 0",z,"insertAt:i");u.v(this,a);var c=this.j;a>=c.length?c.push(b):c.splice(a,0,b);this.Uc();return h};
z.prototype.remove=z.prototype.remove=function(a){if(a===m)return o;s&&this.Bf(a);u.v(this,a);var b=this.j,a=b.indexOf(a);if(a===-1)return o;a===b.length-1?b.pop():b.splice(a,1);this.Uc();return h};z.prototype.removeAt=z.prototype.Se=function(a){s&&u.i(a,z,"removeAt:i");var b=this.j;(a<0||a>=b.length)&&u.ia(a,"0 <= i < length",z,"removeAt:i");u.v(this,a);a===b.length-1?b.pop():b.splice(a,1);this.Uc()};
z.prototype.removeRange=z.prototype.removeRange=function(a,b){if(s){u.i(a,z,"removeRange:from");u.i(b,z,"removeRange:to")}var c=this.j;(a<0||a>=c.length)&&u.ia(a,"0 <= from < length",z,"elt:from");(b<0||b>=c.length)&&u.ia(b,"0 <= to < length",z,"elt:to");u.v(this,a);var d=c.slice((b||a)+1||c.length);c.length=a<0?c.length+a:a;c.push.apply(c,d);this.Uc()};z.prototype.copy=z.prototype.copy=function(){for(var a=new z(this.I),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};
z.prototype.toArray=z.prototype.yf=function(){for(var a=[],b=this.j,c=this.count,d=0;d<c;d++)a.push(b[d]);return a};z.prototype.toSet=z.prototype.IG=function(){for(var a=new la(this.I),b=this.j,c=this.count,d=0;d<c;d++)a.add(b[d]);return a};z.prototype.sort=z.prototype.sort=function(a){s&&u.e(a,"function",z,"sort:sortfunc");u.v(this);this.j.sort(a);this.Uc();return this};
z.prototype.sortRange=z.prototype.Pn=function(a,b,c){var d=this.j,e=d.length;b===f&&(b=0);c===f&&(c=e);if(s){u.e(a,"function",z,"sortRange:sortfunc");u.i(b,z,"sortRange:from");u.i(c,z,"sortRange:to")}u.v(this);var g=c-b;if(g<=1)return this;(b<0||b>=e-1)&&u.ia(b,"0 <= from < length",z,"sortRange:from");if(g===2){c=d[b];e=d[b+1];if(a(c,e)>0){d[b]=e;d[b+1]=c;this.Uc()}return this}if(b===0)if(c>=e)d.sort(a);else{g=d.slice(0,c);g.sort(a);for(a=0;a<c;a++)d[a]=g[a]}else if(c>=e){g=d.slice(b);g.sort(a);for(a=
b;a<e;a++)d[a]=g[a-b]}else{g=d.slice(b,c);g.sort(a);for(a=b;a<c;a++)d[a]=g[a-b]}this.Uc();return this};z.prototype.reverse=z.prototype.reverse=function(){u.v(this);this.j.reverse();this.Uc();return this};u.m(z,{count:"count"},function(){return this.j.length});u.m(z,{length:"length"},function(){return this.j.length});u.m(z,{f:"iterator"},function(){if(this.j.length<=0)return u.zf;var a=this.ug;if(a!==m){a.reset();return a}return new Ha(this)});
u.m(z,{sn:"iteratorBackwards"},function(){if(this.j.length<=0)return u.zf;var a=this.nw;if(a!==m){a.reset();return a}return new Ia(this)});function Ja(a){this.Wd=a;this.reset()}u.kd(Ja,{key:h,value:h});u.m(Ja,{f:"iterator"},function(){return this});Ja.prototype.reset=Ja.prototype.reset=function(){var a=this.Wd;a.ug=m;this.Za=a.Pb;this.Td=m};
Ja.prototype.next=Ja.prototype.next=function(){var a=this.Wd;a.Pb!==this.Za&&u.g("the Set has been modified during iteration");var b=this.Td,b=b===m?a.We:b.ni;if(b!==m){this.Td=b;this.value=b.value;this.key=b.key;return h}this.Gf();return o};u.m(Ja,{count:"count"},function(){return this.Wd.Qd});Ja.prototype.Gf=function(){this.value=m;this.Za=-1;this.Wd.ug=this};Ja.prototype.toString=function(){return this.Td!==m?"SetIterator@"+this.Td.value:"SetIterator"};
function la(a){u.Gb(this);this.Ha=o;a===f||a===m?this.I=m:typeof a==="string"?a==="string"||a==="number"?this.I=a:u.ia(a,"the string 'number' or 'string'","Set constructor: type"):typeof a==="function"?this.I=a:u.ia(a,"null, a primitive type name, or a class type","Set constructor: type");this.hc={};this.Qd=0;this.ug=m;this.Pb=0;this.vg=this.We=m}u.H("Set",la);la.prototype.Bf=function(a){this.I!==m&&(typeof this.I==="string"?typeof a!==this.I&&u.sc(a,this.I):a instanceof this.I||u.sc(a,this.I))};
la.prototype.Uc=function(){var a=this.Pb;a++;a>999999999&&(a=0);this.Pb=a};la.prototype.freeze=la.prototype.freeze=function(){this.Ha=h;return this};la.prototype.thaw=la.prototype.xa=function(){this.Ha=o;return this};la.prototype.toString=function(){return"Set("+u.Vg(this.I)+")#"+u.dc(this)};
la.prototype.add=la.prototype.add=function(a){if(a===m)return o;s&&this.Bf(a);u.v(this,a);var b=a;a instanceof Object&&(b=u.on(a));if(this.hc[b]===f){this.Qd++;a=new Ka(a,a);this.hc[b]=a;b=this.vg;if(b===m)this.We=a;else{a.um=b;b.ni=a}this.vg=a;this.Uc();return h}return o};la.prototype.addAll=la.prototype.Yf=function(a){if(a===m)return this;u.v(this);if(u.isArray(a))for(var b=u.wb(a),c=0;c<b;c++)this.add(u.mb(a,c));else for(a=a.f;a.next();)this.add(a.value);return this};
la.prototype.contains=la.prototype.contains=function(a){if(a===m)return o;s&&this.Bf(a);var b=a;if(a instanceof Object){b=u.dc(a);if(b===f)return o}return this.hc[b]!==f};la.prototype.containsAll=la.prototype.PH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(!this.contains(a.value))return o;return h};la.prototype.containsAny=la.prototype.QH=function(a){if(a===m)return h;for(a=a.f;a.next();)if(this.contains(a.value))return h;return o};
la.prototype.first=la.prototype.bc=function(){var a=this.We;return a===m?m:a.value};la.prototype.remove=la.prototype.remove=function(a){if(a===m)return o;s&&this.Bf(a);u.v(this,a);var b=a;if(a instanceof Object){b=u.dc(a);if(b===f)return o}a=this.hc[b];if(a===f)return o;var c=a.ni,d=a.um;if(c!==m)c.um=d;if(d!==m)d.ni=c;if(this.We===a)this.We=c;if(this.vg===a)this.vg=d;delete this.hc[b];this.Qd--;this.Uc();return h};
la.prototype.removeAll=la.prototype.PJ=function(a){if(a===m)return this;u.v(this);for(a=a.f;a.next();)this.remove(a.value);return this};la.prototype.retainAll=la.prototype.XJ=function(a){if(a===m||this.count===0)return this;u.v(this);var b=new la(this.I);b.Yf(a);for(var a=new z(this.I),c=this.f;c.next();)b.contains(c.value)||a.add(c.value);for(b=a.f;b.next();)this.remove(b.value);return this};la.prototype.clear=la.prototype.clear=function(){u.v(this);this.hc={};this.Qd=0;this.vg=this.We=m;this.Uc()};
la.prototype.copy=la.prototype.copy=function(){var a=new la(this.I),b=this.hc,c;for(c in b)a.add(b[c].value);return a};la.prototype.toArray=la.prototype.yf=function(){var a=[],b=this.hc,c;for(c in b)a.push(b[c].value);return a};la.prototype.toList=la.prototype.HG=function(){var a=new z(this.I),b=this.hc,c;for(c in b)a.add(b[c]);return a};u.m(la,{count:"count"},r("Qd"));u.m(la,{f:"iterator"},function(){if(this.Qd<=0)return u.zf;var a=this.ug;if(a!==m){a.reset();return a}return new Ja(this)});
function La(a){this.Tc=a;this.reset()}u.kd(La,{key:h,value:h});u.m(La,{f:"iterator"},function(){return this});La.prototype.reset=La.prototype.reset=function(){this.Za=this.Tc.Pb;this.Td=m};La.prototype.next=La.prototype.next=function(){var a=this.Tc;a.Pb!==this.Za&&u.g("the Map has been modified during iteration");var b=this.Td,b=b===m?a.We:b.ni;if(b!==m){this.Td=b;this.value=b.key;return h}this.Gf();return o};u.m(La,{count:"count"},function(){return this.Tc.Qd});
La.prototype.Gf=function(){this.value=m;this.Za=-1};La.prototype.toString=function(){return this.Td!==m?"MapKeySetIterator@"+this.Td.value:"MapKeySetIterator"};function Ma(a){u.Gb(this);this.Tc=a}u.na(Ma,la);Ma.prototype.freeze=function(){return this};Ma.prototype.xa=function(){return this};Ma.prototype.toString=function(){return"MapKeySet("+this.Tc.toString()+")"};Ma.prototype.add=Ma.prototype.add=function(){u.g("This Set is read-only: "+this.toString());return o};
Ma.prototype.contains=Ma.prototype.contains=function(a){return this.Tc.contains(a)};Ma.prototype.remove=Ma.prototype.remove=function(){u.g("This Set is read-only: "+this.toString());return o};Ma.prototype.clear=Ma.prototype.clear=function(){u.g("This Set is read-only: "+this.toString())};Ma.prototype.copy=Ma.prototype.copy=function(){return new Ma(this.Tc)};Ma.prototype.toSet=Ma.prototype.IG=function(){var a=new la(this.Tc.I),b=this.Tc.hc,c;for(c in b)a.add(b[c].key);return a};
Ma.prototype.toArray=Ma.prototype.yf=function(){var a=[],b=this.Tc.hc,c;for(c in b)a.push(b[c].key);return a};Ma.prototype.toList=Ma.prototype.HG=function(){var a=new z(this.I),b=this.Tc.hc,c;for(c in b)a.add(b[c].key);return a};u.m(Ma,{count:"count"},function(){return this.Tc.Qd});u.m(Ma,{f:"iterator"},function(){return this.Tc.Qd<=0?u.zf:new La(this.Tc)});function Ka(a,b){this.key=a;this.value=b;this.um=this.ni=m}u.kd(Ka,{key:h,value:h});
Ka.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};function Na(a){this.Tc=a;this.reset()}u.kd(Na,{key:h,value:h});u.m(Na,{f:"iterator"},function(){return this});Na.prototype.reset=Na.prototype.reset=function(){var a=this.Tc;a.ug=m;this.Za=a.Pb;this.Td=m};
Na.prototype.next=Na.prototype.next=function(){var a=this.Tc;a.Pb!==this.Za&&u.g("the Map has been modified during iteration");var b=this.Td,b=b===m?a.We:b.ni;if(b!==m){this.Td=b;this.key=b.key;this.value=b.value;return h}this.Gf();return o};u.m(Na,{count:"count"},function(){return this.Tc.Qd});Na.prototype.Gf=function(){this.value=this.key=m;this.Za=-1;this.Tc.ug=this};Na.prototype.toString=function(){return this.Td!==m?"MapIterator@"+this.Td:"MapIterator"};
function ka(a,b){u.Gb(this);this.Ha=o;a===f||a===m?this.rh=m:typeof a==="string"?a==="string"||a==="number"?this.rh=a:u.ia(a,"the string 'number' or 'string'","Map constructor: keytype"):typeof a==="function"?this.rh=a:u.ia(a,"null, a primitive type name, or a class type","Map constructor: keytype");b===f||b===m?this.Gh=m:typeof b==="string"?b==="string"||b==="boolean"||b==="number"||b==="function"?this.Gh=b:u.ia(b,"the string 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):
typeof b==="function"?this.Gh=b:u.ia(b,"null, a primitive type name, or a class type","Map constructor: valtype");this.hc={};this.Qd=0;this.ug=m;this.Pb=0;this.vg=this.We=m}u.H("Map",ka);function Pa(a,b){a.rh!==m&&(typeof a.rh==="string"?typeof b!==a.rh&&u.sc(b,a.rh):b instanceof a.rh||u.sc(b,a.rh))}ka.prototype.Uc=function(){var a=this.Pb;a++;a>999999999&&(a=0);this.Pb=a};ka.prototype.freeze=ka.prototype.freeze=function(){this.Ha=h;return this};
ka.prototype.thaw=ka.prototype.xa=function(){this.Ha=o;return this};ka.prototype.toString=function(){return"Map("+u.Vg(this.rh)+","+u.Vg(this.Gh)+")#"+u.dc(this)};
ka.prototype.add=ka.prototype.add=function(a,b){if(s){Pa(this,a);this.Gh!==m&&(typeof this.Gh==="string"?typeof b!==this.Gh&&u.sc(b,this.Gh):b instanceof this.Gh||u.sc(b,this.Gh))}u.v(this,a);var c=a;a instanceof Object&&(c=u.on(a));var d=this.hc[c];if(d===f){this.Qd++;d=new Ka(a,b);this.hc[c]=d;c=this.vg;if(c===m)this.We=d;else{d.um=c;c.ni=d}this.vg=d;this.Uc();return h}d.value=b;return o};
ka.prototype.addAll=ka.prototype.Yf=function(a){if(a===m)return this;s&&u.c(a,ka,ka,"addAll:map");for(a=a.f;a.next();)this.add(a.key,a.value);return this};ka.prototype.contains=ka.prototype.contains=function(a){s&&Pa(this,a);var b=a;if(a instanceof Object){b=u.dc(a);if(b===f)return o}return this.hc[b]!==f};ka.prototype.getValue=ka.prototype.$=function(a){s&&Pa(this,a);var b=a;if(a instanceof Object){b=u.dc(a);if(b===f)return m}a=this.hc[b];return a===f?m:a.value};
ka.prototype.remove=ka.prototype.remove=function(a){if(a===m)return o;s&&Pa(this,a);u.v(this,a);var b=a;if(a instanceof Object){b=u.dc(a);if(b===f)return o}a=this.hc[b];if(a===f)return o;var c=a.ni,d=a.um;if(c!==m)c.um=d;if(d!==m)d.ni=c;if(this.We===a)this.We=c;if(this.vg===a)this.vg=d;delete this.hc[b];this.Qd--;this.Uc();return h};ka.prototype.clear=ka.prototype.clear=function(){u.v(this);this.hc={};this.Qd=0;this.vg=this.We=m;this.Uc()};
ka.prototype.copy=ka.prototype.copy=function(){var a=new ka(this.rh,this.Gh),b=this.hc,c;for(c in b){var d=b[c];a.add(d.key,d.value)}return a};ka.prototype.toArray=ka.prototype.yf=function(){var a=[],b=this.hc,c;for(c in b){var d=b[c];a.push(new Ka(d.key,d.value))}return a};ka.prototype.toKeySet=ka.prototype.Vi=function(){return new Ma(this)};u.m(ka,{count:"count"},r("Qd"));u.m(ka,{f:"iterator"},function(){if(this.count<=0)return u.zf;var a=this.ug;if(a!==m){a.reset();return a}return new Na(this)});
function E(a,b){if(a===f)this.y=this.x=0;else if(typeof a==="number"&&typeof b==="number"){this.x=a;this.y=b}else u.g("Invalid arguments to Point constructor")}u.H("Point",E);u.kd(E,{x:h,y:h});E.prototype.Oa=function(a){s&&u.c(a,E,E,"assign:p");this.x=a.x;this.y=a.y};E.prototype.Wd=function(a,b){this.x=a;this.y=b};E.prototype.setTo=E.prototype.Nr=function(a,b){if(s){u.e(a,"number",E,"setTo:x");u.e(b,"number",E,"setTo:y")}u.v(this);this.x=a;this.y=b;return this};
E.prototype.set=E.prototype.set=function(a){s&&u.c(a,E,E,"set:p");u.v(this);this.x=a.x;this.y=a.y;return this};E.prototype.copy=E.prototype.copy=function(){var a=new E;a.x=this.x;a.y=this.y;return a};E.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};E.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};E.prototype.freeze=function(){this.Ha=h;return this};E.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};
E.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));return new E(c,e)}return new E};var Ra;E.stringify=Ra=function(a){return a instanceof E?a.x.toString()+" "+a.y.toString():a.toString()};E.prototype.toString=function(){return"Point("+this.x+","+this.y+")"};E.prototype.equals=E.prototype.u=function(a){return!(a instanceof E)?o:this.x===a.x&&this.y===a.y};
E.prototype.equalTo=E.prototype.Mx=function(a,b){return this.x===a&&this.y===b};E.prototype.ou=function(a){return Sa(this.x,a.x)&&Sa(this.y,a.y)};E.prototype.$j=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)};E.prototype.add=E.prototype.add=function(a){s&&u.c(a,E,E,"add:p");u.v(this);this.x=this.x+a.x;this.y=this.y+a.y;return this};E.prototype.subtract=E.prototype.Sr=function(a){s&&u.c(a,E,E,"subtract:p");u.v(this);this.x=this.x-a.x;this.y=this.y-a.y;return this};
E.prototype.offset=E.prototype.offset=function(a,b){if(s){u.i(a,E,"offset:dx");u.i(b,E,"offset:dy")}u.v(this);this.x=this.x+a;this.y=this.y+b;return this};E.prototype.rotate=E.prototype.rotate=function(a){s&&u.i(a,E,"rotate:angle");u.v(this);if(a===0)return this;var b=this.x,c=this.y;if(b===0&&c===0)return this;var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d);this.x=a*b-d*c;this.y=d*b+a*c;return this};
E.prototype.scale=E.prototype.scale=function(a,b){if(s){u.i(a,E,"scale:sx");u.i(b,E,"scale:sy")}this.x=this.x*a;this.y=this.y*b;return this};E.prototype.distanceSquaredPoint=E.prototype.Ph=function(a){s&&u.c(a,E,E,"distanceSquaredPoint:p");var b=a.x-this.x,a=a.y-this.y;return b*b+a*a};E.prototype.distanceSquared=E.prototype.cI=function(a,b){if(s){u.i(a,E,"distanceSquared:px");u.i(b,E,"distanceSquared:py")}var c=a-this.x,d=b-this.y;return c*c+d*d};
E.prototype.normalize=E.prototype.normalize=function(){u.v(this);var a=this.x,b=this.y,c=Math.sqrt(a*a+b*b);if(c>0){this.x=a/c;this.y=b/c}return this};E.prototype.directionPoint=E.prototype.Oh=function(a){s&&u.c(a,E,E,"directionPoint:p");return Xa(a.x-this.x,a.y-this.y)};E.prototype.direction=E.prototype.direction=function(a,b){if(s){u.i(a,E,"direction:px");u.i(b,E,"direction:py")}return Xa(a-this.x,b-this.y)};
function Xa(a,b){if(a===0)return b>0?90:b<0?270:0;if(b===0)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;var c=Math.atan(Math.abs(b/a))*180/Math.PI;a<0?c=b<0?c+180:180-c:b<0&&(c=360-c);return c}E.prototype.setRectSpot=E.prototype.On=function(a,b){if(s){u.c(a,J,E,"setRectSpot:r");u.c(b,K,E,"setRectSpot:spot")}u.v(this);this.x=a.x+b.x*a.width+b.offsetX;this.y=a.y+b.y*a.height+b.offsetY;return this};
E.prototype.setSpot=E.prototype.zl=function(a,b,c,d,e){if(s){u.i(a,E,"setSpot:x");u.i(b,E,"setSpot:y");u.i(c,E,"setSpot:w");u.i(d,E,"setSpot:h");(c<0||d<0)&&u.g("Point.setSpot:Width and height cannot be negative");u.c(e,K,E,"setSpot:spot")}u.v(this);this.x=a+e.x*c+e.offsetX;this.y=b+e.y*d+e.offsetY;return this};E.prototype.transform=function(a){s&&u.c(a,Ya,E,"transform:t");a.vb(this);return this};function ab(a,b){s&&u.c(b,Ya,E,"transformInverted:t");b.Vh(a);return a}var bb;
E.distanceLineSegmentSquared=bb=function(a,b,c,d,e,g){if(s){u.i(a,E,"distanceLineSegmentSquared:px");u.i(b,E,"distanceLineSegmentSquared:py");u.i(c,E,"distanceLineSegmentSquared:ax");u.i(d,E,"distanceLineSegmentSquared:ay");u.i(e,E,"distanceLineSegmentSquared:bx");u.i(g,E,"distanceLineSegmentSquared:by")}var i=e-c,j=g-d,k=i*i+j*j,c=c-a,d=d-b,l=-c*i-d*j;if(l<=0||l>=k){i=e-a;j=g-b;return Math.min(c*c+d*d,i*i+j*j)}a=i*d-j*c;return a*a/k};
E.distanceSquared=function(a,b,c,d){if(s){u.i(a,E,"distanceSquared:px");u.i(b,E,"distanceSquared:py");u.i(c,E,"distanceSquared:qx");u.i(d,E,"distanceSquared:qy")}a=c-a;b=d-b;return a*a+b*b};var cb;
E.direction=cb=function(a,b,c,d){if(s){u.i(a,E,"direction:px");u.i(b,E,"direction:py");u.i(c,E,"direction:qx");u.i(d,E,"direction:qy")}a=c-a;b=d-b;if(a===0)return b>0?90:b<0?270:0;if(b===0)return a>0?0:180;if(isNaN(a)||isNaN(b))return 0;d=Math.atan(Math.abs(b/a))*180/Math.PI;a<0?d=b<0?d+180:180-d:b<0&&(d=360-d);return d};E.prototype.isReal=E.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)};
function eb(a,b){if(a===f)this.height=this.width=0;else if(typeof a==="number"&&(a>=0||isNaN(a))&&typeof b==="number"&&(b>=0||isNaN(b))){this.width=a;this.height=b}else u.g("Invalid arguments to Size constructor")}u.H("Size",eb);u.kd(eb,{width:h,height:h});eb.prototype.Oa=function(a){s&&u.c(a,eb,eb,"assign:s");this.width=a.width;this.height=a.height};eb.prototype.Wd=function(a,b){this.width=a;this.height=b};
eb.prototype.setTo=eb.prototype.Nr=function(a,b){if(s){u.e(a,"number",eb,"setTo:w");u.e(b,"number",eb,"setTo:h")}a<0&&u.ia(a,">= 0",eb,"setTo:w");b<0&&u.ia(b,">= 0",eb,"setTo:h");u.v(this);this.width=a;this.height=b;return this};eb.prototype.set=eb.prototype.set=function(a){s&&u.c(a,eb,eb,"set:s");u.v(this);this.width=a.width;this.height=a.height;return this};eb.prototype.copy=eb.prototype.copy=function(){var a=new eb;a.width=this.width;a.height=this.height;return a};
eb.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};eb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};eb.prototype.freeze=function(){this.Ha=h;return this};eb.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};
eb.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));return new eb(c,e)}return new eb};var hb;eb.stringify=hb=function(a){return a instanceof eb?a.width.toString()+" "+a.height.toString():a.toString()};eb.prototype.toString=function(){return"Size("+this.width+","+this.height+")"};
eb.prototype.equals=eb.prototype.u=function(a){return!(a instanceof eb)?o:this.width===a.width&&this.height===a.height};eb.prototype.equalTo=eb.prototype.Mx=function(a,b){return this.width===a&&this.height===b};eb.prototype.ou=function(a){return Sa(this.width,a.width)&&Sa(this.height,a.height)};eb.prototype.$j=function(a){return Ua(this.width,a.width)&&Ua(this.height,a.height)};eb.prototype.isReal=eb.prototype.V=function(){return isFinite(this.width)&&isFinite(this.height)};
function J(a,b,c,d){if(a===f)this.height=this.width=this.y=this.x=0;else if(a instanceof E)if(b instanceof E){this.x=Math.min(a.x,b.x);this.y=Math.min(a.y,b.y);this.width=Math.abs(a.x-b.x);this.height=Math.abs(a.y-b.y)}else if(b instanceof eb){this.x=a.x;this.y=a.y;this.width=b.width;this.height=b.height}else u.g("Incorrect arguments supplied");else if(!s||typeof a==="number"&&typeof b==="number"&&typeof c==="number"&&(c>=0||isNaN(c))&&typeof d==="number"&&(d>=0||isNaN(d))){this.x=a;this.y=b;this.width=
c;this.height=d}else u.g("Invalid arguments to Rect constructor")}u.H("Rect",J);u.kd(J,{x:h,y:h,width:h,height:h});J.prototype.Oa=function(a){s&&u.c(a,J,J,"assign:r");this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height};J.prototype.Wd=function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d};function jb(a,b,c){a.width=b;a.height=c}
J.prototype.setTo=J.prototype.Nr=function(a,b,c,d){if(s){u.e(a,"number",J,"setTo:x");u.e(b,"number",J,"setTo:y");u.e(c,"number",J,"setTo:w");u.e(d,"number",J,"setTo:h")}c<0&&u.ia(c,">= 0",J,"setTo:w");d<0&&u.ia(d,">= 0",J,"setTo:h");u.v(this);this.x=a;this.y=b;this.width=c;this.height=d;return this};J.prototype.set=J.prototype.set=function(a){s&&u.c(a,J,J,"set:r");u.v(this);this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height;return this};
J.prototype.setPoint=J.prototype.w=function(a){s&&u.c(a,E,J,"setPoint:p");u.v(this);this.x=a.x;this.y=a.y;return this};J.prototype.setSize=J.prototype.xG=function(a){s&&u.c(a,eb,J,"setSize:s");u.v(this);this.width=a.width;this.height=a.height;return this};J.prototype.copy=J.prototype.copy=function(){var a=new J;a.x=this.x;a.y=this.y;a.width=this.width;a.height=this.height;return a};J.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};
J.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};J.prototype.freeze=function(){this.Ha=h;return this};J.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};function kb(a){var b=a.count,c=h,d=m;if(b===0)return new J;for(var e=0;e<b;e++){var g=a.j[e];if(c){d=new J(g.x,g.y,0,0);c=o}else mb(d,g.x,g.y,0,0)}return d}
J.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new J(c,e,g,i)}return new J};var nb;J.stringify=nb=function(a){return a instanceof J?a.x.toString()+" "+a.y.toString()+" "+a.width.toString()+" "+a.height.toString():a.toString()};
J.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"};J.prototype.equals=J.prototype.u=function(a){return!(a instanceof J)?o:this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height};J.prototype.equalTo=J.prototype.Mx=function(a,b,c,d){return this.x===a&&this.y===b&&this.width===c&&this.height===d};J.prototype.ou=function(a){return Sa(this.x,a.x)&&Sa(this.y,a.y)&&Sa(this.width,a.width)&&Sa(this.height,a.height)};
J.prototype.$j=function(a){return Ua(this.x,a.x)&&Ua(this.y,a.y)&&Ua(this.width,a.width)&&Ua(this.height,a.height)};J.prototype.containsPoint=J.prototype.ea=function(a){s&&u.c(a,E,J,"containsPoint:p");return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y};J.prototype.containsRect=J.prototype.el=function(a){s&&u.c(a,J,J,"containsRect:r");return this.x<=a.x&&a.x+a.width<=this.x+this.width&&this.y<=a.y&&a.y+a.height<=this.y+this.height};
J.prototype.contains=J.prototype.contains=function(a,b,c,d){if(s){u.i(a,J,"contains:x");u.i(b,J,"contains:y");c===f?c=0:u.i(c,J,"contains:w");d===f?d=0:u.i(d,J,"contains:h");(c<0||d<0)&&u.g("Rect.contains:Width and height cannot be negative")}else{c===f&&(c=0);d===f&&(d=0)}return this.x<=a&&a+c<=this.x+this.width&&this.y<=b&&b+d<=this.y+this.height};J.prototype.reset=function(){u.v(this);this.height=this.width=this.y=this.x=0};
J.prototype.offset=J.prototype.offset=function(a,b){if(s){u.i(a,J,"offset:dx");u.i(b,J,"offset:dy")}u.v(this);this.x=this.x+a;this.y=this.y+b;return this};J.prototype.inflate=J.prototype.jf=function(a,b){if(s){u.i(a,J,"inflate:w");u.i(b,J,"inflate:h")}return pb(this,b,a,b,a)};J.prototype.addMargin=J.prototype.kx=function(a){s&&u.c(a,qb,J,"addMargin:m");return pb(this,a.top,a.right,a.bottom,a.left)};
J.prototype.subtractMargin=J.prototype.nK=function(a){s&&u.c(a,qb,J,"subtractMargin:m");return pb(this,-a.top,-a.right,-a.bottom,-a.left)};J.prototype.grow=J.prototype.RI=function(a,b,c,d){if(s){u.i(a,J,"grow:t");u.i(b,J,"grow:r");u.i(c,J,"grow:b");u.i(d,J,"grow:l")}return pb(this,a,b,c,d)};
function pb(a,b,c,d,e){u.v(a);var g=a.width;if(c+e<=-g){a.x=a.x+g/2;a.width=0}else{a.x=a.x-e;a.width=a.width+(c+e)}c=a.height;if(b+d<=-c){a.y=a.y+c/2;a.height=0}else{a.y=a.y-b;a.height=a.height+(b+d)}return a}J.prototype.intersectRect=J.prototype.aJ=function(a){s&&u.c(a,J,J,"intersectRect:r");return sb(this,a.x,a.y,a.width,a.height)};
J.prototype.intersect=J.prototype.$I=function(a,b,c,d){if(s){u.i(a,J,"intersect:x");u.i(b,J,"intersect:y");u.i(c,J,"intersect:w");u.i(d,J,"intersect:h");(c<0||d<0)&&u.g("Rect.intersect:Width and height cannot be negative")}return sb(this,a,b,c,d)};function sb(a,b,c,d,e){u.v(a);var g=Math.max(a.x,b),i=Math.max(a.y,c),b=Math.min(a.x+a.width,b+d),c=Math.min(a.y+a.height,c+e);a.x=g;a.y=i;a.width=Math.max(0,b-g);a.height=Math.max(0,c-i);return a}
J.prototype.intersectsRect=J.prototype.de=function(a){s&&u.c(a,J,J,"intersectsRect:r");return this.CF(a.x,a.y,a.width,a.height)};
J.prototype.intersects=J.prototype.CF=function(a,b,c,d){if(s){u.i(a,J,"intersects:x");u.i(b,J,"intersects:y");u.i(a,J,"intersects:w");u.i(b,J,"intersects:h");(c<0||d<0)&&u.g("Rect.intersects:Width and height cannot be negative")}var e=this.width,g=this.x;if(e!==Infinity&&c!==Infinity){e=e+g;c=c+a;if(isNaN(c)||isNaN(e)||g>c||a>e)return o}a=this.height;e=this.y;if(a!==Infinity&&d!==Infinity){a=a+e;d=d+b;if(isNaN(d)||isNaN(a)||e>d||b>a)return o}return h};
J.prototype.unionPoint=J.prototype.Yu=function(a){s&&u.c(a,E,J,"unionPoint:p");return mb(this,a.x,a.y,0,0)};J.prototype.unionRect=J.prototype.mk=function(a){s&&u.c(a,J,J,"unionRect:r");return mb(this,a.x,a.y,a.width,a.height)};
J.prototype.union=J.prototype.rK=function(a,b,c,d){u.v(this);if(s){u.i(a,J,"union:x");u.i(b,J,"union:y");c===f?c=0:u.i(c,J,"union:w");d===f?d=0:u.i(d,J,"union:h");(c<0||d<0)&&u.g("Rect.union:Width and height cannot be negative")}else{c===f&&(c=0);d===f&&(d=0)}return mb(this,a,b,c,d)};function mb(a,b,c,d,e){var g=Math.min(a.x,b),i=Math.min(a.y,c),b=Math.max(a.x+a.width,b+d),c=Math.max(a.y+a.height,c+e);a.x=g;a.y=i;a.width=b-g;a.height=c-i;return a}
J.prototype.setSpot=J.prototype.zl=function(a,b,c){if(s){u.i(a,J,"setSpot:x");u.i(b,J,"setSpot:y");u.c(c,K,J,"setSpot:spot")}u.v(this);this.x=a-c.offsetX-c.x*this.width;this.y=b-c.offsetY-c.y*this.height;return this};var tb;
J.contains=tb=function(a,b,c,d,e,g,i,j){if(s){u.i(a,J,"contains:rx");u.i(b,J,"contains:ry");u.i(c,J,"contains:rw");u.i(d,J,"contains:rh");u.i(e,J,"contains:x");u.i(g,J,"contains:y");i===f?i=0:u.i(i,J,"contains:w");j===f?j=0:u.i(j,J,"contains:h");(c<0||d<0||i<0||j<0)&&u.g("Rect.contains:Width and height cannot be negative")}else{i===f&&(i=0);j===f&&(j=0)}return a<=e&&e+i<=a+c&&b<=g&&g+j<=b+d};
J.intersects=function(a,b,c,d,e,g,i,j){if(s){u.i(a,J,"intersects:rx");u.i(b,J,"intersects:ry");u.i(c,J,"intersects:rw");u.i(d,J,"intersects:rh");u.i(e,J,"intersects:x");u.i(g,J,"intersects:y");u.i(i,J,"intersects:w");u.i(j,J,"intersects:h");(c<0||d<0||i<0||j<0)&&u.g("Rect.intersects:Width and height cannot be negative")}return a>i+e||e>c+a?o:b>j+g||g>d+b?o:h};u.a(J,"left",J.prototype.left);u.defineProperty(J,{left:"left"},r("x"),function(a){u.v(this,a);s&&u.e(a,"number",J,"left");this.x=a});
u.a(J,"top",J.prototype.top);u.defineProperty(J,{top:"top"},r("y"),function(a){u.v(this,a);s&&u.e(a,"number",J,"top");this.y=a});u.a(J,"right",J.prototype.right);u.defineProperty(J,{right:"right"},function(){return this.x+this.width},function(a){u.v(this,a);s&&u.i(a,J,"right");this.x=this.x+(a-(this.x+this.width))});u.a(J,"bottom",J.prototype.bottom);u.defineProperty(J,{bottom:"bottom"},function(){return this.y+this.height},function(a){u.v(this,a);s&&u.i(a,J,"top");this.y=this.y+(a-(this.y+this.height))});
u.a(J,"position",J.prototype.position);u.defineProperty(J,{position:"position"},function(){return new E(this.x,this.y)},function(a){u.v(this,a);s&&u.c(a,E,J,"position");this.x=a.x;this.y=a.y});u.a(J,"size",J.prototype.size);u.defineProperty(J,{size:"size"},function(){return new eb(this.width,this.height)},function(a){u.v(this,a);s&&u.c(a,eb,J,"size");this.width=a.width;this.height=a.height});u.a(J,"center",J.prototype.au);
u.defineProperty(J,{au:"center"},function(){return new E(this.x+this.width/2,this.y+this.height/2)},function(a){u.v(this,a);s&&u.c(a,E,J,"center");this.x=a.x-this.width/2;this.y=a.y-this.height/2});u.a(J,"centerX",J.prototype.za);u.defineProperty(J,{za:"centerX"},function(){return this.x+this.width/2},function(a){u.v(this,a);s&&u.i(a,J,"centerX");this.x=a-this.width/2});u.a(J,"centerY",J.prototype.Aa);
u.defineProperty(J,{Aa:"centerY"},function(){return this.y+this.height/2},function(a){u.v(this,a);s&&u.i(a,J,"centerY");this.y=a-this.height/2});J.prototype.isReal=J.prototype.V=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)};J.prototype.isEmpty=J.prototype.cJ=function(){return this.width===0&&this.height===0};
function qb(a,b,c,d){if(a===f)this.left=this.bottom=this.right=this.top=0;else if(b===f)this.left=this.bottom=this.right=this.top=a;else if(c===f){this.top=a;this.right=b;this.bottom=a;this.left=b}else if(d!==f){this.top=a;this.right=b;this.bottom=c;this.left=d}else u.g("Invalid arguments to Margin constructor")}u.H("Margin",qb);u.kd(qb,{top:h,right:h,bottom:h,left:h});qb.prototype.Oa=function(a){s&&u.c(a,qb,qb,"assign:m");this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left};
qb.prototype.setTo=qb.prototype.Nr=function(a,b,c,d){if(s){u.e(a,"number",qb,"setTo:t");u.e(b,"number",qb,"setTo:r");u.e(c,"number",qb,"setTo:b");u.e(d,"number",qb,"setTo:l")}u.v(this);this.top=a;this.right=b;this.bottom=c;this.left=d;return this};qb.prototype.set=qb.prototype.set=function(a){s&&u.c(a,qb,qb,"assign:m");u.v(this);this.top=a.top;this.right=a.right;this.bottom=a.bottom;this.left=a.left;return this};
qb.prototype.copy=qb.prototype.copy=function(){var a=new qb;a.top=this.top;a.right=this.right;a.bottom=this.bottom;a.left=this.left;return a};qb.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};qb.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};qb.prototype.freeze=function(){this.Ha=h;return this};qb.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};
qb.parse=function(a){if(typeof a==="string"){for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new qb(c,e,g,i)}return new qb};var ub;qb.stringify=ub=function(a){return a instanceof qb?a.top.toString()+" "+a.right.toString()+" "+a.bottom.toString()+" "+a.left.toString():a.toString()};
qb.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"};qb.prototype.equals=qb.prototype.u=function(a){return!(a instanceof qb)?o:this.top===a.top&&this.right===a.right&&this.bottom===a.bottom&&this.left===a.left};qb.prototype.equalTo=qb.prototype.Mx=function(a,b,c,d){return this.top===a&&this.right===b&&this.bottom===c&&this.left===d};
qb.prototype.ou=function(a){return Sa(this.top,a.top)&&Sa(this.right,a.right)&&Sa(this.bottom,a.bottom)&&Sa(this.left,a.left)};qb.prototype.$j=function(a){return Ua(this.top,a.top)&&Ua(this.right,a.right)&&Ua(this.bottom,a.bottom)&&Ua(this.left,a.left)};qb.prototype.isReal=qb.prototype.V=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)};function Ya(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Qa=this.Pa=0}
u.kd(Ya,{m11:h,m12:h,m21:h,m22:h,Pa:h,Qa:h});Ya.prototype.set=Ya.prototype.set=function(a){s&&u.c(a,Ya,Ya,"set:t");this.m11=a.m11;this.m12=a.m12;this.m21=a.m21;this.m22=a.m22;this.Pa=a.Pa;this.Qa=a.Qa;return this};Ya.prototype.copy=Ya.prototype.copy=function(){var a=new Ya;a.m11=this.m11;a.m12=this.m12;a.m21=this.m21;a.m22=this.m22;a.Pa=this.Pa;a.Qa=this.Qa;return a};Ya.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.Pa+","+this.Qa+")"};
Ya.prototype.equals=Ya.prototype.u=function(a){return!(a instanceof Ya)?o:this.m11===a.m11&&this.m12===a.m12&&this.m21===a.m21&&this.m22===a.m22&&this.Pa===a.Pa&&this.Qa===a.Qa};Ya.prototype.reset=Ya.prototype.reset=function(){this.m11=1;this.m21=this.m12=0;this.m22=1;this.Qa=this.Pa=0};
Ya.prototype.multiply=Ya.prototype.multiply=function(a){s&&u.c(a,Ya,Ya,"multiply:matrix");var b=this.m12*a.m11+this.m22*a.m12,c=this.m11*a.m21+this.m21*a.m22,d=this.m12*a.m21+this.m22*a.m22,e=this.m11*a.Pa+this.m21*a.Qa+this.Pa,g=this.m12*a.Pa+this.m22*a.Qa+this.Qa;this.m11=this.m11*a.m11+this.m21*a.m12;this.m12=b;this.m21=c;this.m22=d;this.Pa=e;this.Qa=g;return this};
Ya.prototype.multiplyInverted=Ya.prototype.CJ=function(a){s&&u.c(a,Ya,Ya,"multiplyInverted:matrix");var b=1/(a.m11*a.m22-a.m12*a.m21),c=a.m22*b,d=-a.m12*b,e=-a.m21*b,g=a.m11*b,i=b*(a.m21*a.Qa-a.m22*a.Pa),j=b*(a.m12*a.Pa-a.m11*a.Qa),a=this.m12*c+this.m22*d,b=this.m11*e+this.m21*g,e=this.m12*e+this.m22*g,g=this.m11*i+this.m21*j+this.Pa,i=this.m12*i+this.m22*j+this.Qa;this.m11=this.m11*c+this.m21*d;this.m12=a;this.m21=b;this.m22=e;this.Pa=g;this.Qa=i;return this};
Ya.prototype.invert=Ya.prototype.zu=function(){var a=1/(this.m11*this.m22-this.m12*this.m21),b=-this.m12*a,c=-this.m21*a,d=this.m11*a,e=a*(this.m21*this.Qa-this.m22*this.Pa),g=a*(this.m12*this.Pa-this.m11*this.Qa);this.m11=this.m22*a;this.m12=b;this.m21=c;this.m22=d;this.Pa=e;this.Qa=g};
Ya.prototype.rotate=Ya.prototype.rotate=function(a,b,c){if(s){u.i(a,Ya,"rotate:angle");u.i(b,Ya,"rotate:rx");u.i(c,Ya,"rotate:ry")}this.translate(b,c);var d=a*Math.PI/180,a=Math.cos(d),d=Math.sin(d),e=this.m12*a+this.m22*d,g=this.m11*-d+this.m21*a,i=this.m12*-d+this.m22*a;this.m11=this.m11*a+this.m21*d;this.m12=e;this.m21=g;this.m22=i;this.translate(-b,-c)};
Ya.prototype.translate=Ya.prototype.translate=function(a,b){if(s){u.i(a,Ya,"translate:x");u.i(b,Ya,"translate:y")}this.Pa=this.Pa+(this.m11*a+this.m21*b);this.Qa=this.Qa+(this.m12*a+this.m22*b)};Ya.prototype.scale=Ya.prototype.scale=function(a,b){b===f&&(b=a);if(s){u.i(a,Ya,"translate:sx");u.i(b,Ya,"translate:sy")}this.m11=this.m11*a;this.m12=this.m12*a;this.m21=this.m21*b;this.m22=this.m22*b};
Ya.prototype.transformPoint=Ya.prototype.vb=function(a){s&&u.c(a,E,Ya,"transformPoint:p");var b=a.x,c=a.y;a.x=b*this.m11+c*this.m21+this.Pa;a.y=b*this.m12+c*this.m22+this.Qa;return a};Ya.prototype.invertedTransformPoint=Ya.prototype.Vh=function(a){s&&u.c(a,E,Ya,"invertedTransformPoint:p");var b=1/(this.m11*this.m22-this.m12*this.m21),c=-this.m12*b,d=this.m11*b,e=b*(this.m12*this.Pa-this.m11*this.Qa),g=a.x,i=a.y;a.x=g*this.m22*b+i*-this.m21*b+b*(this.m21*this.Qa-this.m22*this.Pa);a.y=g*c+i*d+e;return a};
Ya.prototype.transformRect=Ya.prototype.sD=function(a){s&&u.c(a,J,Ya,"transformRect:rect");var b=a.x,c=a.y,d=b+a.width,e=c+a.height,g=this.m11,i=this.m12,j=this.m21,k=this.m22,l=this.Pa,n=this.Qa,q=b*g+c*j+l,p=b*i+c*k+n,t=d*g+c*j+l,c=d*i+c*k+n,w=b*g+e*j+l,b=b*i+e*k+n,g=d*g+e*j+l,d=d*i+e*k+n,e=q,i=p,q=Math.min(q,t),e=Math.max(e,t),i=Math.min(i,c),p=Math.max(p,c),q=Math.min(q,w),e=Math.max(e,w),i=Math.min(i,b),p=Math.max(p,b),q=Math.min(q,g),e=Math.max(e,g),i=Math.min(i,d),p=Math.max(p,d);a.x=q;a.y=
i;a.width=e-q;a.height=p-i};function Ab(a,b){return new E(b.x*a.m11+b.y*a.m21+a.Pa,b.x*a.m12+b.y*a.m22+a.Qa)}Ya.prototype.isIdentity=Ya.prototype.ay=function(){return this.m11===1&&this.m12===0&&this.m21===0&&this.m22===1&&this.Pa===0&&this.Qa===0};function K(a,b,c,d){if(a===f)this.offsetY=this.offsetX=this.y=this.x=0;else{b===f&&(b=0);c===f&&(c=0);d===f&&(d=0);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d}}u.H("Spot",K);u.kd(K,{x:h,y:h,offsetX:h,offsetY:h});
K.prototype.Oa=function(a){s&&u.c(a,K,K,"assign:s");this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY};K.prototype.setTo=K.prototype.Nr=function(a,b,c,d){if(s){Bb(a,"setTo:x");Bb(b,"setTo:y");Eb(c,"setTo:offx");Eb(d,"setTo:offy")}u.v(this);this.x=a;this.y=b;this.offsetX=c;this.offsetY=d;return this};K.prototype.set=K.prototype.set=function(a){s&&u.c(a,K,K,"set:s");u.v(this);this.x=a.x;this.y=a.y;this.offsetX=a.offsetX;this.offsetY=a.offsetY;return this};
K.prototype.copy=K.prototype.copy=function(){var a=new K;a.x=this.x;a.y=this.y;a.offsetX=this.offsetX;a.offsetY=this.offsetY;return a};K.prototype.Ga=function(){this.Ha=h;Object.freeze(this);return this};K.prototype.B=function(){return Object.isFrozen(this)?this:this.copy().freeze()};K.prototype.freeze=function(){this.Ha=h;return this};K.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;return this};function Fb(a,b){a.x=NaN;a.y=NaN;a.offsetX=b;return a}
function Bb(a,b){(isNaN(a)||a>1||a<0)&&u.ia(a,"0 <= "+b+" <= 1",K,b)}function Eb(a,b){(isNaN(a)||a===Infinity||a===-Infinity)&&u.ia(a,"real number, not NaN or Infinity",K,b)}var Lb;
K.parse=Lb=function(a){if(typeof a==="string"){a=a.trim();if(a==="None")return u.NONE;if(a==="TopLeft")return u.wv;if(a==="Top"||a==="TopCenter"||a==="MiddleTop")return u.Wn;if(a==="TopRight")return u.yv;if(a==="Left"||a==="LeftCenter"||a==="MiddleLeft")return u.Un;if(a==="Center")return u.mv;if(a==="Right"||a==="RightCenter"||a==="MiddleRight")return u.Vn;if(a==="BottomLeft")return u.hv;if(a==="Bottom"||a==="BottomCenter"||a==="MiddleBottom")return u.Tn;if(a==="BottomRight")return u.jv;if(a==="TopSide")return u.Av;
if(a==="LeftSide")return u.pv;if(a==="RightSide")return u.uv;if(a==="BottomSide")return u.lv;if(a==="TopBottomSides")return u.vv;if(a==="LeftRightSides")return u.ov;if(a==="TopLeftSides")return u.xv;if(a==="TopRightSides")return u.zv;if(a==="BottomLeftSides")return u.iv;if(a==="BottomRightSides")return u.kv;if(a==="NotTopSide")return u.tv;if(a==="NotLeftSide")return u.rv;if(a==="NotRightSide")return u.sv;if(a==="NotBottomSide")return u.qv;if(a==="AllSides")return u.gv;if(a==="Default")return u.nv;
for(var a=a.split(" "),b=0,c=0;a[b]==="";)b++;var d=a[b++];d&&(c=parseFloat(d));for(var e=0;a[b]==="";)b++;(d=a[b++])&&(e=parseFloat(d));for(var g=0;a[b]==="";)b++;(d=a[b++])&&(g=parseFloat(d));for(var i=0;a[b]==="";)b++;(d=a[b++])&&(i=parseFloat(d));return new K(c,e,g,i)}return new K};var Mb;K.stringify=Mb=function(a){return a instanceof K?Nb(a)?a.x.toString()+" "+a.y.toString()+" "+a.offsetX.toString()+" "+a.offsetY.toString():a.toString():a.toString()};
K.prototype.toString=function(){return Nb(this)?this.offsetX===0&&this.offsetY===0?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.u(u.NONE)?"None":this.u(u.wv)?"TopLeft":this.u(u.Wn)?"Top":this.u(u.yv)?"TopRight":this.u(u.Un)?"Left":this.u(u.mv)?"Center":this.u(u.Vn)?"Right":this.u(u.hv)?"BottomLeft":this.u(u.Tn)?"Bottom":this.u(u.jv)?"BottomRight":this.u(u.Av)?"TopSide":this.u(u.pv)?"LeftSide":this.u(u.uv)?"RightSide":this.u(u.lv)?"BottomSide":
this.u(u.vv)?"TopBottomSides":this.u(u.ov)?"LeftRightSides":this.u(u.xv)?"TopLeftSides":this.u(u.zv)?"TopRightSides":this.u(u.iv)?"BottomLeftSides":this.u(u.kv)?"BottomRightSides":this.u(u.tv)?"NotTopSide":this.u(u.rv)?"NotLeftSide":this.u(u.sv)?"NotRightSide":this.u(u.qv)?"NotBottomSide":this.u(u.gv)?"AllSides":this.u(u.nv)?"Default":"None"};
K.prototype.equals=K.prototype.u=function(a){return!(a instanceof K)?o:(this.x===a.x||isNaN(this.x)&&isNaN(a.x))&&(this.y===a.y||isNaN(this.y)&&isNaN(a.y))&&this.offsetX===a.offsetX&&this.offsetY===a.offsetY};K.prototype.opposite=K.prototype.DJ=function(){return new K(0.5-(this.x-0.5),0.5-(this.y-0.5),-this.offsetX,-this.offsetY)};K.prototype.includesSide=K.prototype.UI=function(a){if(!Ob(this)||!Ob(a))return o;a=a.offsetY;return(this.offsetY&a)===a};
function Nb(a){return!isNaN(a.x)&&!isNaN(a.y)}function Pb(a){return isNaN(a.x)||isNaN(a.y)}function Ob(a){return Pb(a)&&a.offsetX===1&&a.offsetY!==0}function Qb(a){return isNaN(a.x)&&isNaN(a.y)&&a.offsetX===-1&&a.offsetY===0}u.Nc=1;u.tc=2;u.Ec=4;u.Dc=8;u.NONE=Fb(new K(0,0,0,0),0).Ga();u.nv=Fb(new K(0,0,-1,0),-1).Ga();u.wv=(new K(0,0,0,0)).Ga();u.Wn=(new K(0.5,0,0,0)).Ga();u.yv=(new K(1,0,0,0)).Ga();u.Un=(new K(0,0.5,0,0)).Ga();u.mv=(new K(0.5,0.5,0,0)).Ga();u.Vn=(new K(1,0.5,0,0)).Ga();
u.hv=(new K(0,1,0,0)).Ga();u.Tn=(new K(0.5,1,0,0)).Ga();u.jv=(new K(1,1,0,0)).Ga();u.Av=Fb(new K(0,0,1,u.Nc),1).Ga();u.pv=Fb(new K(0,0,1,u.tc),1).Ga();u.uv=Fb(new K(0,0,1,u.Ec),1).Ga();u.lv=Fb(new K(0,0,1,u.Dc),1).Ga();u.vv=Fb(new K(0,0,1,u.Nc|u.Dc),1).Ga();u.ov=Fb(new K(0,0,1,u.tc|u.Ec),1).Ga();u.xv=Fb(new K(0,0,1,u.Nc|u.tc),1).Ga();u.zv=Fb(new K(0,0,1,u.Nc|u.Ec),1).Ga();u.iv=Fb(new K(0,0,1,u.Dc|u.tc),1).Ga();u.kv=Fb(new K(0,0,1,u.Dc|u.Ec),1).Ga();u.tv=Fb(new K(0,0,1,u.tc|u.Ec|u.Dc),1).Ga();
u.rv=Fb(new K(0,0,1,u.Nc|u.Ec|u.Dc),1).Ga();u.sv=Fb(new K(0,0,1,u.Nc|u.tc|u.Dc),1).Ga();u.qv=Fb(new K(0,0,1,u.Nc|u.tc|u.Ec),1).Ga();u.gv=Fb(new K(0,0,1,u.Nc|u.tc|u.Ec|u.Dc),1).Ga();var Tb;K.None=Tb=u.NONE;var Ub;K.Default=Ub=u.nv;var Vb;K.TopLeft=Vb=u.wv;var Xb;K.TopCenter=Xb=u.Wn;var Yb;K.TopRight=Yb=u.yv;K.LeftCenter=u.Un;var Zb;K.Center=Zb=u.mv;K.RightCenter=u.Vn;var dc;K.BottomLeft=dc=u.hv;var ec;K.BottomCenter=ec=u.Tn;var fc;K.BottomRight=fc=u.jv;var gc;K.MiddleTop=gc=u.Wn;var nc;
K.MiddleLeft=nc=u.Un;var oc;K.MiddleRight=oc=u.Vn;var pc;K.MiddleBottom=pc=u.Tn;K.Top=u.Wn;K.Left=u.Un;K.Right=u.Vn;K.Bottom=u.Tn;var rc;K.TopSide=rc=u.Av;var sc;K.LeftSide=sc=u.pv;var tc;K.RightSide=tc=u.uv;var uc;K.BottomSide=uc=u.lv;K.TopBottomSides=u.vv;K.LeftRightSides=u.ov;K.TopLeftSides=u.xv;K.TopRightSides=u.zv;K.BottomLeftSides=u.iv;K.BottomRightSides=u.kv;K.NotTopSide=u.tv;K.NotLeftSide=u.rv;K.NotRightSide=u.sv;K.NotBottomSide=u.qv;var wc;K.AllSides=wc=u.gv;
var Cc=4*((Math.sqrt(2)-1)/3),Dc=(new E(0,0)).Ga(),Ec=(new eb(Infinity,Infinity)).Ga(),Jc=(new E(-Infinity,-Infinity)).Ga(),Kc=(new E(Infinity,Infinity)).Ga(),Lc=(new eb(0,0)).Ga(),Mc=(new E(NaN,NaN)).Ga();function Ua(a,b){var c=a-b;return c<0.5&&c>-0.5}function Sa(a,b){var c=a-b;return c<5E-8&&c>-5E-8}
function Nc(a,b,c,d,e,g,i){e<=0&&(e=1E-6);var j,k,l,n;if(a<c){k=a;j=c}else{k=c;j=a}if(b<d){n=b;l=d}else{n=d;l=b}if(a===c)return n<=i&&i<=l&&a-e<=g&&g<=a+e;if(b===d)return k<=g&&g<=j&&b-e<=i&&i<=b+e;j=j+e;k=k-e;if(k<=g&&g<=j){l=l+e;n=n-e;if(n<=i&&i<=l)if(j-k>l-n)if(a-c>e||c-a>e){g=(d-b)/(c-a)*(g-a)+b;if(g-e<=i&&i<=g+e)return h}else return h;else if(b-d>e||d-b>e){i=(c-a)/(d-b)*(i-b)+a;if(i-e<=g&&g<=i+e)return h}else return h}return o}
function Tc(a,b,c,d,e,g,i,j,k,l,n){if(!Nc(a,b,i,j,k,c,d)||!Nc(a,b,i,j,k,e,g)){var q=(a+c)/2,p=(b+d)/2,t=(c+e)/2,w=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(q+t)/2,c=(p+w)/2,t=(t+e)/2,w=(w+g)/2,A=(d+t)/2,F=(c+w)/2;return Tc(a,b,q,p,d,c,A,F,k,l,n)||Tc(A,F,t,w,e,g,i,j,k,l,n)}return Nc(a,b,i,j,k,l,n)}
function Uc(a,b,c,d,e,g,i,j,k,l){if(!Nc(a,b,i,j,k,c,d)||!Nc(a,b,i,j,k,e,g)){var n=(a+c)/2,q=(b+d)/2,p=(c+e)/2,t=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(n+p)/2,c=(q+t)/2,p=(p+e)/2,t=(t+g)/2,w=(d+p)/2,A=(c+t)/2;Uc(a,b,n,q,d,c,w,A,k,l);Uc(w,A,p,t,e,g,i,j,k,l)}else{mb(l,a,b,0,0);mb(l,i,j,0,0)}}function Vc(a,b,c,d,e,g,i,j,k){if(Nc(a,b,e,g,i,c,d))return Nc(a,b,e,g,i,j,k);var l=(a+c)/2,n=(b+d)/2,c=(c+e)/2,d=(d+g)/2,q=(l+c)/2,p=(n+d)/2;return Vc(a,b,l,n,q,p,i,j,k)||Vc(q,p,c,d,e,g,i,j,k)}
function Wc(a,b,c,d,e,g,i,j){if(Nc(a,b,e,g,i,c,d)){mb(j,a,b,0,0);mb(j,e,g,0,0)}else{var k=(a+c)/2,l=(b+d)/2,c=(c+e)/2,d=(d+g)/2,n=(k+c)/2,q=(l+d)/2;Wc(a,b,k,l,n,q,i,j);Wc(n,q,c,d,e,g,i,j)}}
function Xc(a,b,c,d,e,g,i,j,k,l,n,q,p,t){p<=0&&(p=1E-6);if(!Nc(a,b,i,j,p,c,d)||!Nc(a,b,i,j,p,e,g)){var w=(a+c)/2,A=(b+d)/2,c=(c+e)/2,d=(d+g)/2,e=(e+i)/2,g=(g+j)/2,F=(w+c)/2,H=(A+d)/2,c=(c+e)/2,d=(d+g)/2,x=(F+c)/2,I=(H+d)/2,y=(n-k)*(n-k)+(q-l)*(q-l),G=o;if(Xc(a,b,w,A,F,H,x,I,k,l,n,q,p,t)){a=(t.x-k)*(t.x-k)+(t.y-l)*(t.y-l);if(a<y){y=a;G=h}}b=t.x;w=t.y;if(Xc(x,I,c,d,e,g,i,j,k,l,n,q,p,t)){a=(t.x-k)*(t.x-k)+(t.y-l)*(t.y-l);if(a<y)G=h;else{t.x=b;t.y=w}}return G}w=(a-i)*(l-q)-(b-j)*(k-n);if(!w)return o;
p=((a*j-b*i)*(k-n)-(a-i)*(k*q-l*n))/w;w=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*n))/w;if((k>n?k-n:n-k)<(l>q?l-q:q-l)){if(b<j){k=b;i=j}else{k=j;i=b}if(w<k||w>i)return o}else{if(a<i)k=a;else{k=i;i=a}if(p<k||p>i)return o}t.x=p;t.y=w;return h}
function Yc(a,b,c,d,e,g,i,j,k,l,n,q,p){var t=0;p<=0&&(p=1E-6);if(!Nc(a,b,i,j,p,c,d)||!Nc(a,b,i,j,p,e,g))var w=(a+c)/2,A=(b+d)/2,F=(c+e)/2,H=(d+g)/2,e=(e+i)/2,g=(g+j)/2,d=(w+F)/2,c=(A+H)/2,F=(F+e)/2,H=(H+g)/2,x=(d+F)/2,I=(c+H)/2,t=t+Yc(a,b,w,A,d,c,x,I,k,l,n,q,p),t=t+Yc(x,I,F,H,e,g,i,j,k,l,n,q,p);else{p=(a-i)*(l-q)-(b-j)*(k-n);if(!p)return t;w=((a*j-b*i)*(k-n)-(a-i)*(k*q-l*n))/p;A=((a*j-b*i)*(l-q)-(b-j)*(k*q-l*n))/p;if(w>=n)return t;if((k>n?k-n:n-k)<(l>q?l-q:q-l)){if(b<j){k=b;a=j}else{k=j;a=b}if(A<
k||A>a)return t}else{if(a<i){k=a;a=i}else k=i;if(w<k||w>a)return t}p>0?t++:p<0&&t--}return t}
function $c(a,b,c,d,e,g,i){if(Sa(a,c)){var j;if(b<d){j=b;c=d}else{j=d;c=b}d=g;if(d<j){i.x=a;i.y=j;return o}if(d>c){i.x=a;i.y=c;return o}i.x=a;i.y=d;return h}if(Sa(b,d)){if(a<c)j=a;else{j=c;c=a}d=e;if(d<j){i.x=j;i.y=b;return o}if(d>c){i.x=c;i.y=b;return o}i.x=d;i.y=b;return h}j=((a-e)*(a-c)+(b-g)*(b-d))/((c-a)*(c-a)+(d-b)*(d-b));if(j<-5E-6){i.x=a;i.y=b;return o}if(j>1.000005){i.x=c;i.y=d;return o}i.x=a+j*(c-a);i.y=b+j*(d-b);return h}
function ad(a,b,c,d,e,g,i,j,k){if(Ua(a,c)&&Ua(b,d)){k.x=a;k.y=b;return o}if(Sa(e,i)){if(Sa(a,c)){$c(a,b,c,d,e,g,k);return o}return $c(a,b,c,d,e,(d-b)/(c-a)*(e-a)+b,k)}j=(j-g)/(i-e);if(Sa(a,c)){c=j*(a-e)+g;if(b<d)e=b;else{e=d;d=b}if(c<e){k.x=a;k.y=e;return o}if(c>d){k.x=a;k.y=d;return o}k.x=a;k.y=c;return h}i=(d-b)/(c-a);if(Sa(j,i)){$c(a,b,c,d,e,g,k);return o}g=(i*a-j*e+g-b)/(i-j);if(Sa(i,0)){if(a<c){e=a;d=c}else{e=c;d=a}if(g<e){k.x=e;k.y=b;return o}if(g>d){k.x=d;k.y=b;return o}k.x=g;k.y=b;return h}return $c(a,
b,c,d,g,i*(g-a)+b,k)}
function bd(a,b,c,d,e,g,i,j,k){function l(c,d){var e=(c-a)*(c-a)+(d-b)*(d-b);if(e<n){n=e;k.x=c;k.y=d}}var n=Infinity;l(k.x,k.y);var q,p,t,w;if(e<i){q=e;p=i}else{q=i;p=e}if(g<j){t=e;w=i}else{t=i;w=e}q=(p-q)/2+0;t=(w-t)/2+0;e=(e+i)/2;g=(g+j)/2;if(!(q===0||t===0))if((c>a?c-a:a-c)<0.5){q=1-(c-e)*(c-e)/(q*q);if(!(q<0)){q=Math.sqrt(q);d=-t*q+g;l(c,t*q+g);l(c,d)}}else{c=(d-b)/(c-a);d=1/(q*q)+c*c/(t*t);j=2*c*(b-c*a)/(t*t)-2*c*g/(t*t)-2*e/(q*q);t=j*j-4*d*(2*c*a*g/(t*t)-2*b*g/(t*t)+g*g/(t*t)+e*e/(q*q)-1+(b-
c*a)*(b-c*a)/(t*t));if(!(t<0)){q=Math.sqrt(t);t=(-j+q)/(2*d);l(t,c*t-c*a+b);t=(-j-q)/(2*d);l(t,c*t-c*a+b)}}}
function cd(a,b,c,d){var e=a.left,g=a.right,i=a.top,a=a.bottom,j=b.x,b=b.y,k=c.x,c=c.y,l=1E21,n=e,q=i;if(ad(e,i,e,a,j,b,k,c,d)){var p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(ad(g,i,g,a,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(ad(e,i,g,i,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}if(ad(e,a,g,a,j,b,k,c,d)){p=(d.x-j)*(d.x-j)+(d.y-b)*(d.y-b);if(p<l){l=p;n=d.x;q=d.y}}d.x=n;d.y=q;return l<1E21}
function dd(a,b,c){var d=b.x,e=b.y,g=c.x,i=c.y,j=a.left,k=a.right,l=a.top,n=a.bottom;if(d===g){if(e<i){a=e;g=i}else{a=i;g=e}return j<=d&&d<=k&&a<=n&&g>=l}if(e===i){if(d<g)a=d;else{a=g;g=d}return l<=e&&e<=n&&a<=k&&g>=j}return a.ea(b)||a.ea(c)||hd(j,l,k,l,d,e,g,i)||hd(k,l,k,n,d,e,g,i)||hd(k,n,j,n,d,e,g,i)||hd(j,n,j,l,d,e,g,i)?h:o}function hd(a,b,c,d,e,g,i,j){return id(a,b,c,d,e,g)*id(a,b,c,d,i,j)<=0&&id(e,g,i,j,a,b)*id(e,g,i,j,c,d)<=0}
function id(a,b,c,d,e,g){c=c-a;d=d-b;a=e-a;b=g-b;g=a*d-b*c;if(g===0){g=a*c+b*d;if(g>0){g=(a-c)*c+(b-d)*d;g<0&&(g=0)}}return g<0?-1:g>0?1:0}function jd(a){a<0&&(a=a+360);a>=360&&(a=a-360);return a}function kd(a,b,c,d,e,g){var c=Math.floor((a-c)/e)*e+c,d=Math.floor((b-d)/g)*g+d,i=c;c+e-a<e/2&&(i=c+e);a=d;d+g-b<g/2&&(a=d+g);return new E(i,a)}function ld(a,b){var c=Math.max(a,b),d=Math.min(a,b),e=1,g=1;do{e=c%d;c=g=d;d=e}while(e>0);return g}
function md(a){u.Gb(this);a===f?a=yd:s&&u.Ra(a,md,md,"constructor:type");this.I=a;this.Fc=this.vc=this.Ub=this.Jb=0;this.Bk=new z(zd);this.Bs=this.Bk.Pb;this.os=(new J).freeze();this.Ea=h;this.TG=new E;this.Bh=Vb;this.Ch=fc;this.Is=this.Js=NaN;this.Hc=Lc;this.Hb=Ad}u.H("Geometry",md);
md.prototype.copy=md.prototype.copy=function(){var a=new md;a.I=this.I;a.Jb=this.Jb;a.Ub=this.Ub;a.vc=this.vc;a.Fc=this.Fc;for(var b=this.Bk,c=b.length,d=a.Bk,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.Bs=this.Bs;a.os.Oa(this.os);a.Ea=this.Ea;a.Bh=this.Bh.B();a.Ch=this.Ch.B();a.Js=this.Js;a.Is=this.Is;a.Hc=this.Hc.B();a.Hb=this.Hb;return a};var Bd;md.Line=Bd=u.l(md,"Line",0);var Kd;md.Rectangle=Kd=u.l(md,"Rectangle",1);var Nd;md.Ellipse=Nd=u.l(md,"Ellipse",2);var yd;md.Path=yd=u.l(md,"Path",3);
md.prototype.Ga=function(){this.freeze();Object.freeze(this);return this};md.prototype.freeze=function(){this.Ha=h;var a=this.rc;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};md.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;var a=this.rc;a.xa();for(var b=a.length,c=0;c<b;c++)a.j[c].xa();return this};
md.prototype.toString=function(a){switch(this.type){case Bd:return"M"+this.La.toFixed(a)+" "+this.Ma.toFixed(a)+"L"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);case Kd:var b=new J(this.La,this.Ma,0,0);mb(b,this.aa,this.ba,0,0);return"M"+b.x.toFixed(a)+" "+b.y.toFixed(a)+"H"+b.right.toFixed(a)+"V"+b.bottom.toFixed(a)+"H"+b.left.toFixed(a)+"z";case Nd:b=new J(this.La,this.Ma,0,0);mb(b,this.aa,this.ba,0,0);var c=b.left.toFixed(a)+" "+(b.y+b.height/2).toFixed(a);return"M"+c+"A"+(b.width/2).toFixed(a)+" "+
(b.height/2).toFixed(a)+" 0 0 1 "+(b.right.toFixed(a)+" "+(b.y+b.height/2).toFixed(a))+"A"+(b.width/2).toFixed(a)+" "+(b.height/2).toFixed(a)+" 0 0 1 "+c;case yd:for(var b="",c=this.rc,d=c.length,e=0;e<d;e++){var g=c.j[e];e>0&&(b=b+" ");b=b+g.toString(a)}return b;default:return this.type.toString()}};var Od;
md.parse=Od=function(a,b){function c(){return l>=w-1?h:k[l+1].match(/[A-Za-z]/)!==m}function d(){l++;return k[l]}function e(){var a=new E(parseFloat(d()),parseFloat(d()));if(n===n.toLowerCase()){a.x=t.x+a.x;a.y=t.y+a.y}return a}function g(){return t=e()}function i(){return p=e()}function j(){return q.toLowerCase()!=="c"&&q.toLowerCase()!=="s"?t:new E(2*t.x-p.x,2*t.y-p.y)}b===f&&(b=h);var a=a.replace(/,/gm," "),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([MmZzLlHhVvCcSsQqTtAaFf])/gm,
"$1 $2"),a=a.replace(/([MmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2"),a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=a.replace(/[\s\r\t\n]+/gm," "),a=a.replace(/^\s+|\s+$/g,""),k=a.split(" "),l=-1,n="",q="";new E(0,0);for(var p=new E(0,0),t=new E(0,0),w=k.length,A=new L,F;!(l>=w-1);){q=n;n=d();if(n!=="")switch(n.toUpperCase()){case "M":F=g();
for(A.Yb===m?M(A,F.x,F.y,o,o):A.moveTo(F.x,F.y);!c();){F=g();A.lineTo(F.x,F.y)}break;case "L":for(;!c();){F=g();A.lineTo(F.x,F.y)}break;case "H":for(;!c();){t=F=new E((n===n.toLowerCase()?t.x:0)+parseFloat(d()),t.y);A.lineTo(t.x,t.y)}break;case "V":for(;!c();){t=F=new E(t.x,(n===n.toLowerCase()?t.y:0)+parseFloat(d()));A.lineTo(t.x,t.y)}break;case "C":for(;!c();){F=e();var H=i(),x=g();N(A,F.x,F.y,H.x,H.y,x.x,x.y)}break;case "S":for(;!c();){F=j();H=i();x=g();N(A,F.x,F.y,H.x,H.y,x.x,x.y)}break;case "Q":for(;!c();){H=
i();x=g();Pd(A,H.x,H.y,x.x,x.y)}break;case "T":for(;!c();){p=H=j();x=g();Pd(A,H.x,H.y,x.x,x.y)}break;case "B":for(;!c();){F=[parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d()),parseFloat(d())];if(!c()){F.push(parseFloat(d()));c()||F.push(parseFloat(d()))}if(n===n.toLowerCase()){F[2]=F[2]+t.x;F[3]=F[3]+t.y}A.arcTo(F[0],F[1],F[2],F[3],F[4],F[5],F[6])}break;case "Z":O(A);break;case "F":b=h}}A=A.k;if(b)for(F=A.rc.f;F.next();)F.value.qr=h;return A};
md.prototype.cy=function(){if(this.Ea)return h;var a=this.rc;if(this.Bs!==a.Pb)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].cy())return h;return o};md.prototype.Uy=function(){this.Ea=o;var a=this.rc;this.Bs=a.Pb;for(var b=a.length,c=0;c<b;c++)a.j[c].Uy()};
md.prototype.Zd=function(){var a=this.os;a.xa();a.reset();a.xG(this.Hc);switch(this.type){case Bd:case Kd:case Nd:mb(a,this.Jb,this.Ub,0,0);mb(a,this.vc,this.Fc,0,0);break;case yd:for(var b=this.rc,c=b.length,d=0;d<c;d++){var e=b.j[d];mb(a,e.La,e.Ma,0,0);for(var g=e.sb,i=g.length,j=e.La,e=e.Ma,k=0;k<i;k++){var l=g.j[k];switch(l.type){case Qd:case Rd:j=l.aa;e=l.ba;mb(a,j,e,0,0);break;case Sd:Uc(j,e,l.Ad,l.sf,l.In,l.Jn,l.aa,l.ba,0.5,a);j=l.aa;e=l.ba;break;case Td:Wc(j,e,l.Ad,l.sf,l.aa,l.ba,0.5,a);j=
l.aa;e=l.ba;break;case de:for(var l=ee(l),n=l.length,q=m,d=0;d<n;d++){q=l[d];Uc(q.Gl,q.Hl,q.cv,q.ev,q.dv,q.fv,q.nk,q.ok,0.5,a)}if(q!==m){j=q.nk;e=q.ok}break;default:u.g("Unknown Segment type: "+l.type)}}}break;default:u.g("Unknown Geometry type: "+this.type)}mb(a,0,0,0,0);a.freeze()};
md.prototype.ea=function(a,b,c,d){for(var e=a.x,g=a.y,i=this.hb.x-20,a=a.y,j=0,k,l,n,q,p,t,w,A=this.rc.j,F=A.length,H=0;H<F;H++){var x=A[H];if(x.qr){if(c&&x.ea(e,g,b))return h;var I=x.sb;k=x.La;l=x.Ma;for(var y=k,G=l,fa=0;fa<=I.length;fa++){if(fa!==I.length){n=I.j[fa];q=n.type;t=n.aa;w=n.ba}else{q=Qd;t=x.La;w=x.Ma}switch(q){case Rd:p=fe(e,g,i,a,k,l,y,G);if(p===h)return h;j=j+p;y=t;G=w;break;case Qd:p=fe(e,g,i,a,k,l,t,w);if(p===h)return h;j=j+p;break;case Sd:p=Yc(k,l,n.Ad,n.sf,n.In,n.Jn,t,w,i,a,e,
g,0.5);j=j+p;break;case Td:p=Yc(k,l,(k+2*n.Ad)/3,(l+2*n.sf)/3,(n.Ad+2*t)/3,(n.Ad+2*t)/3,t,w,i,a,e,g,0.5);j=j+p;break;case de:q=ee(n);for(var R=q.length,S=m,da=0;da<R;da++){S=q[da];if(da===0){p=fe(e,g,i,a,k,l,S.Gl,S.Hl);if(p===h)return h;j=j+p}p=Yc(S.Gl,S.Hl,S.cv,S.ev,S.dv,S.fv,S.nk,S.ok,i,a,e,g,0.5);j=j+p}if(S!==m){t=S.nk;w=S.ok}break;default:u.g("Unknown Segment type: "+n.type)}k=t;l=w}if(j!==0)return h;j=0}else if(x.ea(e,g,d?b:b+2))return h}return j!==0};
function fe(a,b,c,d,e,g,i,j){if(Nc(e,g,i,j,0.05,a,b))return h;var k=(a-c)*(g-j);if(k===0)return 0;var l=((a*d-b*c)*(e-i)-(a-c)*(e*j-g*i))/k,b=(a*d-b*c)*(g-j)/k;if(l>=a)return 0;if((e>i?e-i:i-e)<(g>j?g-j:j-g)){if(g<j){a=g;e=j}else{a=j;e=g}if(b<a||b>e)return 0}else{if(e<i){a=e;e=i}else a=i;if(l<a||l>e)return 0}return k>0?1:-1}function ge(a,b,c,d){for(var e=a.rc.length,g=0;g<e;g++)if(a.rc.j[g].ea(b,c,d))return h;return o}u.a(md,"type",md.prototype.type);
u.defineProperty(md,{type:"type"},r("I"),function(a){if(this.I!==a){s&&u.Ra(a,md,md,"type");u.v(this,a);this.I=a;this.Ea=h}});u.a(md,"startX",md.prototype.La);u.defineProperty(md,{La:"startX"},r("Jb"),function(a){if(this.Jb!==a){s&&u.i(a,md,"startX");u.v(this,a);this.Jb=a;this.Ea=h}});u.a(md,"startY",md.prototype.Ma);u.defineProperty(md,{Ma:"startY"},r("Ub"),function(a){if(this.Ub!==a){s&&u.i(a,md,"startY");u.v(this,a);this.Ub=a;this.Ea=h}});u.a(md,"endX",md.prototype.aa);
u.defineProperty(md,{aa:"endX"},r("vc"),function(a){if(this.vc!==a){s&&u.i(a,md,"endX");u.v(this,a);this.vc=a;this.Ea=h}});u.a(md,"endY",md.prototype.ba);u.defineProperty(md,{ba:"endY"},r("Fc"),function(a){if(this.Fc!==a){s&&u.i(a,md,"endY");u.v(this,a);this.Fc=a;this.Ea=h}});u.a(md,"figures",md.prototype.rc);u.defineProperty(md,{rc:"figures"},r("Bk"),function(a){if(this.Bk!==a){s&&u.c(a,z,md,"figures");u.v(this,a);this.Bk=a;this.Ea=h}});
u.defineProperty(md,{n:"spot1"},r("Bh"),function(a){s&&u.c(a,K,md,"spot1");u.v(this,a);this.Bh=a.B()});u.defineProperty(md,{o:"spot2"},r("Ch"),function(a){s&&u.c(a,K,md,"spot2");u.v(this,a);this.Ch=a.B()});u.m(md,{hb:"bounds"},function(){if(this.cy()){this.Uy();this.Zd()}return this.os});u.a(md,"minSize",md.prototype.Pd);
u.defineProperty(md,{Pd:"minSize"},r("Hc"),function(a){if(!this.Hc.u(a)){s&&u.c(a,eb,md,"minSize");a=a.B();if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;a.freeze();this.Hc=a}});function zd(a,b,c,d){u.Gb(this);d===f&&(d=h);this.ap=d;this.Ze=h;if(a!==f){s&&u.i(a,zd,"sx");this.Jb=a}else this.Jb=0;if(b!==f){s&&u.i(b,zd,"sy");this.Ub=b}else this.Ub=0;this.mq=new z(pe);this.Bt=this.mq.Pb;this.Ea=h}u.H("PathFigure",zd);
zd.prototype.copy=zd.prototype.copy=function(){var a=new zd;a.ap=this.ap;a.Ze=this.Ze;a.Jb=this.Jb;a.Ub=this.Ub;for(var b=this.mq,c=b.length,d=a.mq,e=0;e<c;e++){var g=b.j[e].copy();d.add(g)}a.Bt=this.Bt;a.Ea=this.Ea;return a};ea=zd.prototype;ea.toString=function(a){for(var b="M"+this.La.toFixed(a)+" "+this.Ma.toFixed(a),c=this.sb,d=c.length,e=0;e<d;e++)b=b+(" "+c.j[e].toString(a));this.qr&&(b=b+"\t");return b};
ea.freeze=function(){this.Ha=h;var a=this.sb;a.freeze();for(var b=a.length,c=0;c<b;c++)a.j[c].freeze();return this};ea.xa=function(){this.Ha=o;var a=this.sb;a.xa();for(var b=a.length,c=0;c<b;c++)a.j[c].xa();return this};ea.cy=function(){if(this.Ea)return h;var a=this.sb;if(this.Bt!==a.Pb)return h;for(var b=a.length,c=0;c<b;c++)if(a.j[c].Ea)return h;return o};ea.Uy=function(){this.Ea=o;var a=this.sb;this.Bt=a.Pb;for(var b=a.length,c=0;c<b;c++)a.j[c].Ea=o};u.a(zd,"isFilled",zd.prototype.qr);
u.defineProperty(zd,{qr:"isFilled"},r("ap"),function(a){s&&u.e(a,"boolean",zd,"isFilled");u.v(this,a);this.ap=a});u.a(zd,"isShadowed",zd.prototype.rr);u.defineProperty(zd,{rr:"isShadowed"},r("Ze"),function(a){s&&u.e(a,"boolean",zd,"isShadowed");u.v(this,a);this.Ze=a});u.a(zd,"subPath",zd.prototype.CG);u.defineProperty(zd,{CG:"subPath"},r("$D"),function(a){s&&u.e(a,"boolean",zd,"subPath");u.v(this,a);this.$D=a});u.a(zd,"startX",zd.prototype.La);
u.defineProperty(zd,{La:"startX"},r("Jb"),function(a){s&&u.i(a,zd,"startX");u.v(this,a);this.Jb=a;this.Ea=h});u.a(zd,"startY",zd.prototype.Ma);u.defineProperty(zd,{Ma:"startY"},r("Ub"),function(a){s&&u.i(a,zd,"startY");u.v(this,a);this.Ub=a;this.Ea=h});u.a(zd,"segments",zd.prototype.sb);u.defineProperty(zd,{sb:"segments"},r("mq"),function(a){s&&u.c(a,z,zd,"segments");u.v(this,a);this.mq=a;this.Ea=h});
zd.prototype.ea=function(a,b,c){for(var d=this.La,e=this.Ma,g=d,i=e,j=this.sb.j,k=j.length,l=0;l<k;l++){var n=j[l];switch(n.type){case Rd:g=n.aa;i=n.ba;break;case Qd:if(Nc(d,e,n.aa,n.ba,c,a,b))return h;break;case Sd:if(Tc(d,e,n.Ad,n.sf,n.In,n.Jn,n.aa,n.ba,c,a,b))return h;break;case Td:if(Vc(d,e,n.Ad,n.sf,n.aa,n.ba,c,a,b))return h;break;case de:for(var q=ee(n),p=q.length,t=m,w=0;w<p;w++){t=q[w];if(w===0&&Nc(d,e,t.Gl,t.Hl,c,a,b)||Tc(t.Gl,t.Hl,t.cv,t.ev,t.dv,t.fv,t.nk,t.ok,c,a,b))return h}if(t!==m){n.aa=
t.nk;n.ba=t.ok}break;default:u.g("Unknown Segment type: "+n.type)}d=n.aa;e=n.ba;if(n.ii&&(d!==g||e!==i)&&Nc(d,e,g,i,c,a,b))return h}return o};
function pe(a,b,c,d,e,g,i){u.Gb(this);a===f?a=Qd:s&&u.Ra(a,pe,pe,"constructor:type");this.I=a;if(a===de){if(b!==f){s&&u.i(b,pe,"ex");this.Cg=b}else this.Cg=0;if(c!==f){s&&u.i(c,pe,"ey");this.Eg=c}else this.Eg=0;if(d!==f){s&&u.i(d,pe,"x1");this.Ql=d}if(e!==f){s&&u.i(e,pe,"y1");this.Rl=e}if(g!==f){s&&u.i(g,pe,"x2");this.vt=g}if(i!==f){s&&u.i(i,pe,"y2");this.wt=i}}else{if(b!==f){s&&u.i(b,pe,"ex");this.Sk=b}else this.Sk=0;if(c!==f){s&&u.i(c,pe,"ey");this.Tk=c}else this.Tk=0;if(d!==f){s&&u.i(d,pe,"x1");
this.Ij=d}if(e!==f){s&&u.i(e,pe,"y1");this.Jj=e}if(g!==f){s&&u.i(g,pe,"x2");this.Qk=g}if(i!==f){s&&u.i(i,pe,"y2");this.Rk=i}}this.Ea=h;this.ii=o}u.H("PathSegment",pe);pe.prototype.copy=pe.prototype.copy=function(){var a=new pe;a.I=this.I;if(this.I===de){a.Cg=this.Cg;a.Eg=this.Eg;a.Ql=this.Ql;a.Rl=this.Rl;a.vt=this.vt;a.wt=this.wt}else{a.Sk=this.Sk;a.Tk=this.Tk;a.Ij=this.Ij;a.Jj=this.Jj;a.Qk=this.Qk;a.Rk=this.Rk}a.Ea=this.Ea;a.ii=this.ii;return a};
pe.prototype.toString=function(a){switch(this.type){case Rd:a="M"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case Qd:a="L"+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case Sd:a="C"+this.Ad.toFixed(a)+" "+this.sf.toFixed(a)+" "+this.In.toFixed(a)+" "+this.Jn.toFixed(a)+" "+this.aa.toFixed(a)+" "+this.ba.toFixed(a);break;case Td:case de:a="A";break;default:a=this.type.toString()}return a+(this.ii?"z":"")};var Rd;pe.Move=Rd=u.l(pe,"Move",0);var Qd;pe.Line=Qd=u.l(pe,"Line",1);var Sd;
pe.Bezier=Sd=u.l(pe,"Bezier",2);var Td;pe.QuadraticBezier=Td=u.l(pe,"QuadraticBezier",3);var de;pe.Arc=de=u.l(pe,"Arc",4);pe.prototype.freeze=function(){this.Ha=h;return this};pe.prototype.xa=function(){this.Ha=o;return this};pe.prototype.close=pe.prototype.close=function(){this.ii=h;return this};
function ee(a){if(a.Iv&&a.Ea===o)return a.Iv;for(var b=a.Ql,c=a.Rl,d=a.yy,e=a.hk,g=a.hk+a.Bl,i=Math.PI,e=e*(i/180),g=g*(i/180),j=e<g?1:-1,k=[],l=i/2,n=e,e=Math.min(i*2+1E-5,Math.abs(g-e));e>1E-5;){var g=n+j*Math.min(e,l),q=(g-n)/2,p=d*Math.cos(q),t=d*Math.sin(q),w=0.5522847498*Math.tan(q),i=p+w*t,p=-t+w*p,t=-p,w=q+n,q=Math.cos(w),w=Math.sin(w);k.push({Gl:b+d*Math.cos(n),Hl:c+d*Math.sin(n),cv:b+i*q-p*w,ev:c+i*w+p*q,dv:b+i*q-t*w,fv:c+i*w+t*q,nk:b+d*Math.cos(g),ok:c+d*Math.sin(g)});e=e-Math.abs(g-n);
n=g}a.Iv=k;return a.Iv}u.a(pe,"isClosed",pe.prototype.VB);u.defineProperty(pe,{VB:"isClosed"},r("ii"),function(a){if(this.ii!==a){this.ii=a;this.Ea=h}});u.a(pe,"type",pe.prototype.type);u.defineProperty(pe,{type:"type"},r("I"),function(a){s&&u.Ra(a,pe,pe,"type");u.v(this,a);this.I=a;this.Ea=h});u.a(pe,"endX",pe.prototype.aa);u.defineProperty(pe,{aa:"endX"},r("Sk"),function(a){s&&u.i(a,pe,"endX");u.v(this,a);this.Sk=a;this.Ea=h});u.a(pe,"endY",pe.prototype.ba);
u.defineProperty(pe,{ba:"endY"},r("Tk"),function(a){s&&u.i(a,pe,"endY");u.v(this,a);this.Tk=a;this.Ea=h});u.defineProperty(pe,{Ad:"point1X"},r("Ij"),function(a){s&&u.i(a,pe,"point1X");u.v(this,a);this.Ij=a;this.Ea=h});u.defineProperty(pe,{sf:"point1Y"},r("Jj"),function(a){s&&u.i(a,pe,"point1Y");u.v(this,a);this.Jj=a;this.Ea=h});u.defineProperty(pe,{In:"point2X"},r("Qk"),function(a){s&&u.i(a,pe,"point2X");u.v(this,a);this.Qk=a;this.Ea=h});
u.defineProperty(pe,{Jn:"point2Y"},r("Rk"),function(a){s&&u.i(a,pe,"point2Y");u.v(this,a);this.Rk=a;this.Ea=h});u.defineProperty(pe,{za:"centerX"},r("Ql"),function(a){s&&u.i(a,pe,"centerX");u.v(this,a);this.Ql=a;this.Ea=h});u.defineProperty(pe,{Aa:"centerY"},r("Rl"),function(a){s&&u.i(a,pe,"centerY");u.v(this,a);this.Rl=a;this.Ea=h});u.defineProperty(pe,{yy:"radiusX"},r("vt"),function(a){s&&u.i(a,pe,"radiusX");u.v(this,a);this.vt=a;this.Ea=h});
u.defineProperty(pe,{fG:"radiusY"},r("wt"),function(a){s&&u.i(a,pe,"radiusY");u.v(this,a);this.wt=a;this.Ea=h});u.defineProperty(pe,{hk:"startAngle"},r("Cg"),function(a){s&&u.i(a,pe,"startAngle");u.v(this,a);this.Cg=a;this.Ea=h});u.defineProperty(pe,{Bl:"sweepAngle"},r("Eg"),function(a){s&&u.i(a,pe,"sweepAngle");u.v(this,a);this.Eg=a;this.Ea=h});
function qe(){this.M=m;this.dx=(new E(0,0)).freeze();this.Wv=(new E(0,0)).freeze();this.hs=this.ct=0;this.Ps="";this.ws=this.ls=0;this.ai=this.Ds=o;this.ei=m;this.Ot=0;this.df=this.Lt=m}u.H("InputEvent",qe);qe.prototype.copy=qe.prototype.copy=function(){var a=new qe;a.M=this.M;a.dx=this.bd.copy().freeze();a.Wv=this.C.copy().freeze();a.ct=this.ct;a.hs=this.hs;a.Ps=this.Ps;a.ls=this.ls;a.ws=this.ws;a.Ds=this.Ds;a.ai=this.ai;a.ei=this.ei;a.Ot=this.Ot;a.Lt=this.Lt;a.df=this.df;return a};
qe.prototype.toString=function(){var a="^";this.Wg&&(a=a+("M:"+this.Wg));this.button&&(a=a+("B:"+this.button));this.key&&(a=a+("K:"+this.key));this.He&&(a=a+("C:"+this.He));this.Ei&&(a=a+("D:"+this.Ei));this.ud&&(a=a+"h");this.bubbles&&(a=a+"b");this.C!==m&&(a=a+("@"+this.C.toString()));return a};u.a(qe,"diagram",qe.prototype.b);u.defineProperty(qe,{b:"diagram"},r("M"),ba("M"));u.a(qe,"viewPoint",qe.prototype.bd);u.defineProperty(qe,{bd:"viewPoint"},r("dx"),function(a){u.c(a,E,qe,"viewPoint");this.dx.Oa(a)});
u.a(qe,"documentPoint",qe.prototype.C);u.defineProperty(qe,{C:"documentPoint"},r("Wv"),function(a){u.c(a,E,qe,"documentPoint");this.Wv.Oa(a)});u.a(qe,"modifiers",qe.prototype.Wg);u.defineProperty(qe,{Wg:"modifiers"},r("ct"),ba("ct"));u.a(qe,"button",qe.prototype.button);u.defineProperty(qe,{button:"button"},r("hs"),ba("hs"));u.a(qe,"key",qe.prototype.key);u.defineProperty(qe,{key:"key"},r("Ps"),ba("Ps"));u.a(qe,"clickCount",qe.prototype.He);u.defineProperty(qe,{He:"clickCount"},r("ls"),ba("ls"));
u.a(qe,"delta",qe.prototype.Ei);u.defineProperty(qe,{Ei:"delta"},r("ws"),ba("ws"));u.a(qe,"handled",qe.prototype.ud);u.defineProperty(qe,{ud:"handled"},r("Ds"),ba("Ds"));u.a(qe,"bubbles",qe.prototype.bubbles);u.defineProperty(qe,{bubbles:"bubbles"},r("ai"),ba("ai"));u.a(qe,"event",qe.prototype.event);u.defineProperty(qe,{event:"event"},r("ei"),ba("ei"));u.a(qe,"timestamp",qe.prototype.timestamp);u.defineProperty(qe,{timestamp:"timestamp"},r("Ot"),ba("Ot"));u.a(qe,"targetDiagram",qe.prototype.wf);
u.defineProperty(qe,{wf:"targetDiagram"},r("Lt"),ba("Lt"));u.a(qe,"targetObject",qe.prototype.ad);u.defineProperty(qe,{ad:"targetObject"},r("df"),ba("df"));u.m(qe,{Xj:"control"},function(){return(this.Wg&1)!==0});u.m(qe,{shift:"shift"},function(){return(this.Wg&4)!==0});u.m(qe,{alt:"alt"},function(){return(this.Wg&2)!==0});u.m(qe,{xJ:"meta"},function(){return(this.Wg&8)!==0});u.m(qe,{left:"left"},function(){return this.button===0});u.m(qe,{yJ:"middle"},function(){return this.button===1});
u.m(qe,{right:"right"},function(){return this.button===2});function re(){this.M=m;this.qb="";this.pt=this.Ht=m;this.is=o}u.H("DiagramEvent",re);re.prototype.copy=re.prototype.copy=function(){var a=new re;a.M=this.M;a.qb=this.qb;a.Ht=this.Ht;a.pt=this.pt;a.is=this.is;return a};re.prototype.toString=function(){var a="*"+this.name;this.cancel&&(a=a+"x");this.Wu!==m&&(a=a+(":"+this.Wu.toString()));this.Ju!==m&&(a=a+("("+this.Ju.toString()+")"));return a};u.a(re,"diagram",re.prototype.b);
u.defineProperty(re,{b:"diagram"},r("M"),ba("M"));u.a(re,"name",re.prototype.name);u.defineProperty(re,{name:"name"},r("qb"),ba("qb"));u.a(re,"subject",re.prototype.Wu);u.defineProperty(re,{Wu:"subject"},r("Ht"),ba("Ht"));u.a(re,"parameter",re.prototype.Ju);u.defineProperty(re,{Ju:"parameter"},r("pt"),ba("pt"));u.a(re,"cancel",re.prototype.cancel);u.defineProperty(re,{cancel:"cancel"},r("is"),ba("is"));function se(){this.clear()}u.H("ChangedEvent",se);var te;
se.Transaction=te=u.l(se,"Transaction",-1);var ue;se.Property=ue=u.l(se,"Property",0);var ve;se.Insert=ve=u.l(se,"Insert",1);var we;se.Remove=we=u.l(se,"Remove",2);se.prototype.clear=se.prototype.clear=function(){this.js=ue;this.ut=this.bt="";this.ft=this.gt=this.mt=this.nt=this.lt=this.M=this.Pf=m};
se.prototype.copy=se.prototype.copy=function(){var a=new se;a.Pf=this.Pf;a.M=this.M;a.js=this.js;a.bt=this.bt;a.ut=this.ut;a.lt=this.lt;var b=this.nt;a.nt=b instanceof Object&&b.B!==f?b.B():b;b=this.mt;a.mt=b instanceof Object&&b.B!==f?b.B():b;b=this.gt;a.gt=b instanceof Object&&b.B!==f?b.B():b;b=this.ft;a.ft=b instanceof Object&&b.B!==f?b.B():b;return a};
se.prototype.toString=function(){var a="",a=this.Mc===te?a+"* ":this.Mc===ue?a+(this.J!==m?"!m":"!d"):a+((this.J!==m?"!m":"!d")+this.Mc);this.propertyName&&typeof this.propertyName==="string"&&(a=a+(" "+this.propertyName));this.he&&this.he!==this.propertyName&&(a=a+(" "+this.he));a=a+": ";if(this.Mc===te)this.oldValue!==m&&(a=a+(" "+this.oldValue));else{this.object!==m&&(a=a+xe(this.object));this.oldValue!==m&&(a=a+("  old: "+xe(this.oldValue)));this.Pe!==m&&(a=a+(" "+this.Pe));this.newValue!==m&&
(a=a+("  new: "+xe(this.newValue)));this.Oe!==m&&(a=a+(" "+this.Oe))}return a};se.prototype.getValue=se.prototype.$=function(a){return a?this.oldValue:this.newValue};se.prototype.getParam=se.prototype.KI=function(a){return a?this.Pe:this.Oe};se.prototype.canUndo=se.prototype.Vj=function(){return this.J!==m||this.b!==m?h:o};se.prototype.undo=se.prototype.lk=function(){this.Vj()&&(this.J!==m?this.J.Wq(this,h):this.b!==m&&this.b.Wq(this,h))};
se.prototype.canRedo=se.prototype.Uj=function(){return this.J!==m||this.b!==m?h:o};se.prototype.redo=se.prototype.Kn=function(){this.Uj()&&(this.J!==m?this.J.Wq(this,o):this.b!==m&&this.b.Wq(this,o))};u.a(se,"model",se.prototype.J);u.defineProperty(se,{J:"model"},r("Pf"),ba("Pf"));u.a(se,"diagram",se.prototype.b);u.defineProperty(se,{b:"diagram"},r("M"),ba("M"));u.a(se,"change",se.prototype.Mc);u.defineProperty(se,{Mc:"change"},r("js"),function(a){s&&u.Ra(a,se,se,"change");this.js=a});
u.a(se,"modelChange",se.prototype.he);u.defineProperty(se,{he:"modelChange"},r("bt"),function(a){s&&u.e(a,"string",se,"modelChange");this.bt=a});u.a(se,"propertyName",se.prototype.propertyName);u.defineProperty(se,{propertyName:"propertyName"},r("ut"),function(a){s&&typeof a!=="string"&&u.c(a,Function,se,"propertyName");this.ut=a});u.a(se,"object",se.prototype.object);u.defineProperty(se,{object:"object"},r("lt"),ba("lt"));u.a(se,"oldValue",se.prototype.oldValue);
u.defineProperty(se,{oldValue:"oldValue"},r("nt"),ba("nt"));u.a(se,"oldParam",se.prototype.Pe);u.defineProperty(se,{Pe:"oldParam"},r("mt"),ba("mt"));u.a(se,"newValue",se.prototype.newValue);u.defineProperty(se,{newValue:"newValue"},r("gt"),ba("gt"));u.a(se,"newParam",se.prototype.Oe);u.defineProperty(se,{Oe:"newParam"},r("ft"),ba("ft"));
function D(a){u.Gb(this);this.Qv=this.qb="";this.xj=o;this.Sf=[];this.xc=new ka(m,Object);this.Op="key";this.rs=this.Ss=m;this.Mp="category";this.lg=new ka(m,la);this.ji=m;this.Fk=this.ti=o;this.$w=m;this.ca=new ye;if(a!==f)this.Yg=a}u.H("Model",D);D.prototype.clear=D.prototype.clear=function(){this.Sf=[];this.xc.clear();this.lg.clear();this.ca.clear()};
D.prototype.writeJsonProtected=D.prototype.CD=function(){var a="";this.name!==""&&(a=a+(',\n  "name": '+this.quote(this.name)));this.hl!==""&&(a=a+(',\n  "dataFormat": '+this.quote(this.hl)));this.Ja&&(a=a+(',\n  "isReadOnly": '+this.Ja));this.ul!=="key"&&typeof this.ul==="string"&&(a=a+(',\n  "nodeKeyProperty": '+this.quote(this.ul)));this.tl!=="category"&&typeof this.tl==="string"&&(a=a+(',\n  "nodeCategoryProperty": '+this.quote(this.tl)));return a};
D.prototype.Yy=function(){return',\n  "nodeDataArray": '+ze(this,this.Yg,h)};D.prototype.readJsonProtected=D.prototype.DC=function(a){if(a.name)this.name=a.name;if(a.dataFormat)this.hl=a.dataFormat;if(a.isReadOnly)this.Ja=a.isReadOnly;if(a.nodeKeyProperty)this.ul=a.nodeKeyProperty;if(a.nodeCategoryProperty)this.tl=a.nodeCategoryProperty};D.prototype.zy=function(a){if(a.nodeDataArray){a=a.nodeDataArray;Ae(this,a);this.Yg=a}};
D.prototype.toString=function(a){a===f&&(a=0);if(a>=2)return this.jD();var b=(this.name!==""?this.name:"")+" Model";if(a>0){var b=b+"\n node data:",a=this.Yg,c=u.wb(a),d;for(d=0;d<c;d++)var e=u.mb(a,d),b=b+(" "+this.Vb(e)+":"+xe(e))}return b};D.prototype.toJson=D.prototype.jD=function(a){a===f&&(a=this.constructor===D?"go.Model":this.constructor===P?"go.GraphLinksModel":u.Ii(this));return'{ "class": '+this.quote(a)+this.writeJsonProtected()+this.Yy()+"}"};
D.fromJson=function(a,b){b===f&&(b=m);u.e(a,"string",D,"fromJson:s");b&&u.c(b,D,D,"fromJson:model");var c=m;if(window&&window.JSON&&window.JSON.parse)try{c=window.JSON.parse(a)}catch(d){s&&u.trace("JSON.parse error: "+d.toString())}else u.trace("WARNING: no JSON.parse available");if(c===m)return m;if(b===m){var e;e=m;var g=c["class"];if(typeof g==="string")try{var i=m;if(g.indexOf("go.")===0){g=g.substr(3);i=ga[g]}else(i=ga[g])||(i=window[g]);typeof i==="function"&&(e=new i)}catch(j){}e===m||e instanceof
D?b=e:u.g("Unable to construct a Model of declared class: "+c["class"])}b===m&&(b=new P);b.readJsonProtected(c);b.zy(c);return b};
function Ae(a,b){if(u.isArray(b))for(var c=u.wb(b),d=0;d<c;d++){var e=u.mb(b,d);e instanceof Object&&u.JE(b,d,Ae(a,e))}else if(b instanceof Object){for(d in b){e=b[d];e instanceof Object&&(b[d]=Ae(a,e))}if(typeof b!=="object")c=b;else{e=b;d=b["class"];if(d==="NaN")e=NaN;else if(d==="go.Point")e=new E(b.x,b.y);else if(d==="go.Size")e=new eb(b.width,b.height);else if(d==="go.Rect")e=new J(b.x,b.y,b.width,b.height);else if(d==="go.Margin")e=new qb(b.top,b.right,b.bottom,b.left);else if(d==="go.Spot")e=
typeof b["enum"]==="string"?Lb(b["enum"]):new K(b.x,b.y,b.offsetX,b.offsetY);else if(d==="go.Brush"){e=new Be;e.type=u.Nx(Be,b.type);if(b.start instanceof K)e.start=b.start;if(b.end instanceof K)e.end=b.end;if(typeof b.startRadius==="number")e.Rn=b.startRadius;if(typeof b.endRadius==="number")e.cn=b.endRadius;if(d=b.colorStops)for(c in d)e.addColorStop(parseFloat(c),d[c])}else if(d==="go.Geometry"){e=typeof b.path==="string"?Od(b.path):new md;e.type=u.Nx(md,b.type);if(typeof b.startX==="number")e.La=
b.startX;if(typeof b.startY==="number")e.Ma=b.startY;if(typeof b.endX==="number")e.aa=b.endX;if(typeof b.endY==="number")e.ba=b.endY;if(b.spot1 instanceof K)e.n=b.spot1;if(b.spot2 instanceof K)e.o=b.spot2}c=e}return c}return b}D.prototype.quote=function(a){for(var b="",c=a.length,d=0;d<c;d++)var e=a[d],b=e==='"'||e==="\\"?b+("\\"+e):e==="\b"?b+"\\b":e==="\f"?b+"\\f":e==="\n"?b+"\\n":e==="\r"?b+"\\r":e==="\t"?b+"\\t":b+e;return'"'+b+'"'};
D.prototype.writeJsonValue=D.prototype.DD=function(a){var b;if(a===f)b="undefined";else if(a===m)b="null";else if(a===h)b="true";else if(a===o)b="false";else if(typeof a==="string")b=this.quote(a);else if(typeof a==="number")b=a===Infinity?"9e9999":a===-Infinity?"-9e9999":isNaN(a)?'{"class":"NaN"}':a.toString();else if(u.isArray(a))b=ze(this,a);else if(a instanceof Object){var c=a;if(c instanceof E)a={"class":"go.Point",x:c.x,y:c.y};else if(c instanceof eb)a={"class":"go.Size",width:c.width,height:c.height};
else if(c instanceof J)a={"class":"go.Rect",x:c.x,y:c.y,width:c.width,height:c.height};else if(c instanceof qb)a={"class":"go.Margin",top:c.top,right:c.right,bottom:c.bottom,left:c.left};else if(c instanceof K)a=Nb(c)?{"class":"go.Spot",x:c.x,y:c.y,offsetX:c.offsetX,offsetY:c.offsetY}:{"class":"go.Spot","enum":c.toString()};else if(c instanceof Be){a={"class":"go.Brush",type:c.type.name};if(c.type===Le)a.color=c.color;else if(c.type===Me||c.type===Ne){a.start=c.start;a.end=c.end;if(c.type===Ne){if(c.Rn!==
0)a.startRadius=c.Rn;if(!isNaN(c.cn))a.endRadius=c.cn}}if(c.Zm!==m){for(var d={},c=c.Zm.f;c.next();)d[c.key.toString()]=c.value;a.colorStops=d}}else if(c instanceof md){a={"class":"go.Geometry",type:c.type.name};if(c.La!==0)a.startX=c.La;if(c.Ma!==0)a.startY=c.Ma;if(c.aa!==0)a.endX=c.aa;if(c.ba!==0)a.endY=c.ba;if(!c.n.u(Vb))a.spot1=c.n;if(!c.o.u(fc))a.spot2=c.o;c.rc.count>0&&(a.path=a.toString())}d="{";c=h;for(b in a){var e=u.Va(a,b);if(!(e===f||b==="__gohashid"||b[0]==="_"||typeof e==="function")){c?
c=o:d=d+", ";d=d+('"'+b+'":'+this.DD(e))}}b=d+"}"}else b=typeof a==="function"?"null":a.toString();return b};function ze(a,b,c){var d=u.wb(b),e="[ ";c&&d>1&&(e=e+"\n");for(var g=0;g<d;g++){var i=u.mb(b,g);if(i!==f){if(g>0){e=e+",";c&&(e=e+"\n")}e=e+a.DD(i)}}c&&d>1&&(e=e+"\n");return e+" ]"}u.a(D,"name",D.prototype.name);u.defineProperty(D,{name:"name"},r("qb"),function(a){var b=this.qb;if(b!==a){u.e(a,"string",D,"name");this.qb=a;this.d("name",b,a)}});u.a(D,"dataFormat",D.prototype.hl);
u.defineProperty(D,{hl:"dataFormat"},r("Qv"),function(a){var b=this.Qv;if(b!==a){u.e(a,"string",D,"dataFormat");this.Qv=a;this.d("dataFormat",b,a)}});u.a(D,"isReadOnly",D.prototype.Ja);u.defineProperty(D,{Ja:"isReadOnly"},r("xj"),function(a){var b=this.xj;if(b!==a){u.e(a,"boolean",D,"isReadOnly");this.xj=a;this.d("isReadOnly",b,a)}});D.prototype.addChangedListener=D.prototype.jx=function(a){u.e(a,"function",D,"addChangedListener:listener");if(this.ji===m)this.ji=new z("function");this.ji.add(a)};
D.prototype.removeChangedListener=D.prototype.By=function(a){u.e(a,"function",D,"removeChangedListener:listener");if(this.ji!==m){this.ji.remove(a);if(this.ji.count===0)this.ji=m}};D.prototype.$t=function(a){this.bb||this.ca.MB(a);if(this.ji!==m)for(var b=this.ji.f;b.next();){var c=b.value;c(a)}};D.prototype.raiseChangedEvent=D.prototype.ke=function(a,b,c,d,e,g,i){Oe(this,"",a,b,c,d,e,g,i)};D.prototype.raiseChanged=D.prototype.d=function(a,b,c,d,e){Oe(this,"",ue,a,this,b,c,d,e)};
D.prototype.raiseDataChanged=D.prototype.MJ=function(a,b,c,d,e,g){Oe(this,"",ue,b,a,c,d,e,g)};function Oe(a,b,c,d,e,g,i,j,k){j===f&&(j=m);k===f&&(k=m);var l=new se;l.J=a;l.Mc=c;l.he=b;l.propertyName=d;l.object=e;l.oldValue=g;l.Pe=j;l.newValue=i;l.Oe=k;a.$t(l)}u.a(D,"undoManager",D.prototype.ca);u.defineProperty(D,{ca:"undoManager"},r("$w"),function(a){var b=this.$w;if(b!==a){u.c(a,ye,D,"undoManager");b!==m&&b.lG(this);this.$w=a;a!==m&&a.mE(this)}});u.a(D,"skipsUndoManager",D.prototype.bb);
u.defineProperty(D,{bb:"skipsUndoManager"},r("ti"),function(a){u.e(a,"boolean",D,"skipsUndoManager");this.ti=a});D.prototype.Wq=function(a,b){if(a!==m&&a.J===this){var c=this.Fk;try{this.Fk=h;this.tx(a,b)}finally{this.Fk=c}}};
D.prototype.tx=function(a,b){if(a.Mc===ue){var c=a.object,d=a.propertyName,e=a.$(b);u.ab(c,d,e)}else if(a.Mc===ve)if(a.he==="nodeDataArray"){c=a.newValue;if(c instanceof Object){d=this.Vb(c);if(b){u.Kh(this.Sf,a.Oe);this.xc.remove(d)}else{u.Jh(this.Sf,a.Oe,c);this.xc.add(d,c)}}}else if(a.he===""){c=a.object;!u.isArray(c)&&a.propertyName&&(c=u.Va(a.object,a.propertyName));if(u.isArray(c)){d=a.newValue;e=a.Oe;b?u.Kh(c,e):u.Jh(c,e,d)}}else u.g("unknown ChangedEvent.Insert object: "+a.toString());else if(a.Mc===
we)if(a.he==="nodeDataArray"){c=a.oldValue;if(c instanceof Object){d=this.Vb(c);if(b){u.Jh(this.Sf,a.Pe,c);this.xc.add(d,c)}else{u.Kh(this.Sf,a.Pe);this.xc.remove(d)}}}else if(a.he===""){c=a.object;!u.isArray(c)&&a.propertyName&&(c=u.Va(a.object,a.propertyName));if(u.isArray(c)){d=a.oldValue;e=a.Pe;b?u.Jh(c,e,d):u.Kh(c,e)}}else u.g("unknown ChangedEvent.Remove object: "+a.toString());else a.Mc!==te&&u.g("unknown ChangedEvent: "+a.toString())};D.prototype.startTransaction=D.prototype.Fb=function(a){return this.ca.Fb(a)};
D.prototype.commitTransaction=D.prototype.Ld=function(a){return this.ca.Ld(a)};D.prototype.rollbackTransaction=D.prototype.Ir=function(){return this.ca.Ir()};D.prototype.updateTargetBindings=D.prototype.gc=function(a,b){b===f&&(b="");Oe(this,"SourceChanged",te,b,a,m,m)};u.a(D,"nodeKeyProperty",D.prototype.ul);
u.defineProperty(D,{ul:"nodeKeyProperty"},r("Op"),function(a){var b=this.Op;if(b!==a){Pe(a,D,"nodeKeyProperty");this.xc.count>0&&u.g("Cannot set Model.nodeKeyProperty when there is existing node data");this.Op=a;this.d("nodeKeyProperty",b,a)}});function Pe(a,b,c){typeof a!=="string"&&typeof a!=="function"&&u.sc(a,"string or function",b,c)}
D.prototype.getKeyForNodeData=D.prototype.Vb=function(a){if(a!==m){var b=this.Op;if(b!==""){b=u.Va(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("Key value for node data "+a+" is not a number or a string: "+b)}}}};u.a(D,"makeUniqueKeyFunction",D.prototype.SF);u.defineProperty(D,{SF:"makeUniqueKeyFunction"},r("Ss"),function(a){var b=this.Ss;if(b!==a){a!==m&&u.e(a,"function",D,"makeUniqueKeyFunction");this.Ss=a;this.d("makeUniqueKeyFunction",b,a)}});
function Qe(a){return typeof a==="number"||typeof a==="string"}D.prototype.containsNodeData=D.prototype.Ai=function(a){a=this.Vb(a);return a===f?o:this.xc.contains(a)};D.prototype.findNodeDataForKey=D.prototype.Sg=function(a){a===m&&u.g("Model.findNodeDataForKey:key must not be null");return a===f||!Qe(a)?m:this.xc.$(a)};u.a(D,"nodeDataArray",D.prototype.Yg);
u.defineProperty(D,{Yg:"nodeDataArray"},r("Sf"),function(a){var b=this.Sf;if(b!==a){u.SA(a,D,"nodeDataArray");this.xc.clear();this.Sy();for(var c=u.wb(a),d=0;d<c;d++){var e=u.mb(a,d);if(!(e instanceof Object)){u.g("Model.nodeDataArray must only contain Objects, not: "+e);return}u.on(e)}this.Sf=a;for(var g=new z(Object),d=0;d<c;d++){var e=u.mb(a,d),i=this.Vb(e);i===f?g.add(e):this.xc.$(i)!==m?g.add(e):this.xc.add(i,e)}for(d=g.f;d.next();){e=d.value;this.jC(e);g=this.Vb(e);this.xc.add(g,e)}Oe(this,
"nodeDataArray",ue,"nodeDataArray",this,b,a);for(d=0;d<c;d++){e=u.mb(a,d);this.Mu(e);this.Lu(e)}this.UA();if(!(a instanceof Array))this.Ja=h}});
D.prototype.makeNodeDataKeyUnique=D.prototype.jC=function(a){if(a!==m){var b=this.Op;if(b!==""){var c=this.Vb(a);if(c===f||this.xc.contains(c)){var d=this.Ss;if(d!==m){c=d(this,a);if(c!==f&&c!==m&&!this.xc.contains(c)){u.ab(a,b,c);return}}if(typeof c==="string"){for(d=2;this.xc.contains(c+d);)d++;u.ab(a,b,c+d)}else if(c===f||typeof c==="number"){for(d=-this.xc.count-1;this.xc.contains(d);)d--;u.ab(a,b,d)}else u.g("Model.getKeyForNodeData returned something other than a string or a number: "+c)}}}};
D.prototype.addNodeData=D.prototype.Vt=function(a){if(a!==m){u.on(a);var b=this.Vb(a);if(!(b!==f&&this.xc.$(b)===a)){this.jC(a);b=this.Vb(a);this.xc.add(b,a);b=u.wb(this.Sf);u.Jh(this.Sf,b,a);Oe(this,"nodeDataArray",ve,"nodeDataArray",this,m,a,m,b);this.Mu(a);this.Lu(a)}}};
D.prototype.removeNodeData=D.prototype.IC=function(a){if(a!==m){var b=this.Vb(a);if(b!==f&&this.xc.contains(b)){this.xc.remove(b);b=u.ox(this.Sf,a);if(!(b<0)){u.Kh(this.Sf,b);Oe(this,"nodeDataArray",we,"nodeDataArray",this,a,m,b,m);this.Ty(a)}}}};D.prototype.Sy=aa();D.prototype.Mu=aa();D.prototype.Lu=aa();D.prototype.Ty=aa();D.prototype.delayReference=D.prototype.ag=function(a,b){if(a!==f){var c=this.lg.$(a);if(c===m){c=new la;this.lg.add(a,c)}c.add(b)}};
D.prototype.forgetDelayedReference=D.prototype.Tg=function(a,b){if(a!==f){var c=this.lg.$(a);if(c instanceof la)if(b===f||b===m)this.lg.remove(a);else{c.remove(b);c.count===0&&this.lg.remove(a)}}};D.prototype.dumpDelayedReferences=D.prototype.rI=function(){u.trace("DelayedReferences ("+this.lg.count+")");for(var a=this.lg.f;a.next();){for(var b="",c=a.value.f;c.next();)b=b+(xe(c.value)+", ");u.trace("  "+a.key+": "+b)}};
D.prototype.findDelayedReferences=D.prototype.xB=function(a){if(a===f)return m;a=this.lg.$(a);return a instanceof la?a:m};D.prototype.clearUnresolvedReferences=D.prototype.UA=function(a){a===f?this.lg.clear():this.lg.remove(a)};u.a(D,"copyNodeDataFunction",D.prototype.VE);u.defineProperty(D,{VE:"copyNodeDataFunction"},r("rs"),function(a){var b=this.rs;if(b!==a){a!==m&&u.e(a,"function",D,"copyNodeDataFunction");this.rs=a;this.d("copyNodeDataFunction",b,a)}});
D.prototype.copyNodeData=D.prototype.$m=function(a){if(a===m)return m;var b=m,b=this.rs;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)u.ab(b,c,u.Va(a,c))}b&&u.Gb(b);return b};
D.prototype.setDataProperty=D.prototype.wG=function(a,b,c){if(s){u.e(a,"object",D,"setDataProperty:data");u.e(b,"string",D,"setDataProperty:propname");b===""&&u.g("Model.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)}if(this.Ai(a))if(b===this.ul)u.g("Model.setDataProperty: property name must not be the key for the node data: "+b);else if(b===this.tl&&typeof c==="string"){this.$C(a,c);return}var d=u.Va(a,b);if(d!==c){u.ab(a,b,c);Oe(this,"",ue,b,a,d,c)}};
D.prototype.insertArrayItem=D.prototype.XI=function(a,b,c){if(s){u.isArray(a)||u.g("Model.insertArrayItem:arr must be an Array-like object, not: "+a);u.i(b,D,"insertArrayItem:idx")}b<0&&(b=u.wb(a));u.Jh(a,b,c);Oe(this,"",ve,"",a,m,c,m,b)};
D.prototype.removeArrayItem=D.prototype.QJ=function(a,b){b===f&&(b=-1);if(s){u.isArray(a)||u.g("Model.removeArrayItem:arr must be an Array-like object, not: "+a);u.i(b,D,"removeArrayItem:idx")}b===-1&&(b=u.wb(a)-1);var c=u.mb(a,b);u.Kh(a,b);Oe(this,"",we,"",a,c,m,b,m)};u.a(D,"nodeCategoryProperty",D.prototype.tl);u.defineProperty(D,{tl:"nodeCategoryProperty"},r("Mp"),function(a){var b=this.Mp;if(b!==a){Pe(a,D,"nodeCategoryProperty");this.Mp=a;this.d("nodeCategoryProperty",b,a)}});
D.prototype.getCategoryForNodeData=D.prototype.FB=function(a){if(a===m)return"";var b=this.Mp;if(b==="")return"";b=u.Va(a,b);if(b===f)return"";if(typeof b==="string")return b;s&&u.trace("getCategoryForNodeData found a non-string category for "+a+": "+b);return""};
D.prototype.setCategoryForNodeData=D.prototype.$C=function(a,b){u.e(b,"string",D,"setCategoryForNodeData:val");if(a!==m){var c=this.Mp;if(c!=="")if(this.Ai(a)){var d=u.Va(a,c);if(d!==b){u.ab(a,c,b);Oe(this,"nodeCategory",ue,c,a,d,b)}}else u.ab(a,c,b)}};function P(a,b){D.call(this);this.zj=[];this.sp=new la(Object);this.qs=m;this.Aj="from";this.Cj="to";this.vp=this.up="";this.qp="category";this.th=this.it="";this.ht="isGroup";this.Fj="group";if(a!==f)this.Yg=a;if(b!==f)this.dg=b}
u.H("GraphLinksModel",P);u.na(P,D);P.prototype.clear=P.prototype.clear=function(){D.prototype.clear.call(this);this.zj=[];this.sp.clear()};P.prototype.toString=function(a){a===f&&(a=0);if(a>=2)return this.jD();var b=(this.name!==""?this.name:"")+" GraphLinksModel";if(a>0){var b=b+"\n node data:",a=this.Yg,c=u.wb(a),d;for(d=0;d<c;d++)var e=u.mb(a,d),b=b+(" "+this.Vb(e)+":"+xe(e));b=b+"\n link data:";a=this.dg;c=u.wb(a);for(d=0;d<c;d++){e=u.mb(a,d);b=b+(" "+this.mn(e)+"--\>"+this.nn(e))}}return b};
P.prototype.writeJsonProtected=P.prototype.CD=function(){var a=D.prototype.CD.call(this),b="";this.tn!=="category"&&typeof this.tn==="string"&&(b=b+(',\n  "linkCategoryProperty": '+this.quote(this.tn)));this.un!=="from"&&typeof this.un==="string"&&(b=b+(',\n "linkFromKeyProperty": '+this.quote(this.un)));this.yn!=="to"&&typeof this.yn==="string"&&(b=b+(',\n  "linkToKeyProperty": '+this.quote(this.yn)));this.vn!==""&&typeof this.vn==="string"&&(b=b+(',\n  "linkFromPortIdProperty": '+this.quote(this.vn)));
this.zn!==""&&typeof this.zn==="string"&&(b=b+(',\n  "linkToPortIdProperty": '+this.quote(this.zn)));this.Hn!==""&&typeof this.Hn==="string"&&(b=b+(',\n "nodeIsLinkLabelProperty": '+this.quote(this.Hn)));this.wn!==""&&typeof this.wn==="string"&&(b=b+(',\n  "linkLabelKeysProperty": '+this.quote(this.wn)));this.Gn!=="isGroup"&&typeof this.Gn==="string"&&(b=b+(',\n "nodeIsGroupProperty": '+this.quote(this.Gn)));this.Fn!=="group"&&typeof this.Fn==="string"&&(b=b+(',\n  "nodeGroupKeyProperty": '+this.quote(this.Fn)));
return a+b};P.prototype.Yy=function(){var a=D.prototype.Yy.call(this),b=',\n  "linkDataArray": '+ze(this,this.dg,h);return a+b};
P.prototype.readJsonProtected=P.prototype.DC=function(a){D.prototype.DC.call(this,a);if(a.linkFromKeyProperty)this.un=a.linkFromKeyProperty;if(a.linkToKeyProperty)this.yn=a.linkToKeyProperty;if(a.linkFromPortIdProperty)this.vn=a.linkFromPortIdProperty;if(a.linkToPortIdProperty)this.zn=a.linkToPortIdProperty;if(a.linkCategoryProperty)this.tn=a.linkCategoryProperty;if(a.nodeIsLinkLabelProperty)this.Hn=a.nodeIsLinkLabelProperty;if(a.linkLabelKeysProperty)this.wn=a.linkLabelKeysProperty;if(a.nodeIsGroupProperty)this.Gn=
a.nodeIsGroupProperty;if(a.nodeGroupKeyProperty)this.Fn=a.nodeGroupKeyProperty};P.prototype.zy=function(a){D.prototype.zy.call(this,a);if(a.linkDataArray){a=a.linkDataArray;Ae(this,a);this.dg=a}};
P.prototype.tx=function(a,b){if(a.Mc===ve){var c=m;a.he==="linkDataArray"?c=this.dg:a.he==="linkLabelKeys"&&(c=this.nl(a.object));if(u.isArray(c)){b?u.Kh(c,a.Oe):u.Jh(c,a.Oe,a.newValue);return}}else if(a.Mc===we){c=m;a.he==="linkDataArray"?c=this.dg:a.he==="linkLabelKeys"&&(c=this.nl(a.object));if(u.isArray(c)){b?u.Jh(c,a.Pe,a.oldValue):u.Kh(c,a.Pe);return}}D.prototype.tx.call(this,a,b)};u.a(P,"linkFromKeyProperty",P.prototype.un);
u.defineProperty(P,{un:"linkFromKeyProperty"},r("Aj"),function(a){var b=this.Aj;if(b!==a){Pe(a,P,"linkFromKeyProperty");this.Aj=a;this.d("linkFromKeyProperty",b,a)}});P.prototype.getFromKeyForLinkData=P.prototype.mn=function(a){if(a!==m){var b=this.Aj;if(b!==""){b=u.Va(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("FromKey value for link data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setFromKeyForLinkData=P.prototype.Su=function(a,b){s&&b!==f&&!Qe(b)&&u.sc(b,"number or string",P,"setFromKeyForLinkData:key");if(a!==m){var c=this.Aj;if(c!=="")if(this.Nh(a)){var d=u.Va(a,c);if(d!==b){this.Tg(d,a);u.ab(a,c,b);this.Sg(b)===m&&this.ag(b,a);Oe(this,"linkFromKey",ue,c,a,d,b);typeof c==="string"&&this.gc(a,c)}}else u.ab(a,c,b)}};u.a(P,"linkToKeyProperty",P.prototype.yn);
u.defineProperty(P,{yn:"linkToKeyProperty"},r("Cj"),function(a){var b=this.Cj;if(b!==a){Pe(a,P,"linkToKeyProperty");this.Cj=a;this.d("linkToKeyProperty",b,a)}});P.prototype.getToKeyForLinkData=P.prototype.nn=function(a){if(a!==m){var b=this.Cj;if(b!==""){b=u.Va(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("ToKey value for link data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setToKeyForLinkData=P.prototype.Tu=function(a,b){s&&b!==f&&!Qe(b)&&u.sc(b,"number or string",P,"setToKeyForLinkData:key");if(a!==m){var c=this.Cj;if(c!=="")if(this.Nh(a)){var d=u.Va(a,c);if(d!==b){this.Tg(d,a);u.ab(a,c,b);this.Sg(b)===m&&this.ag(b,a);Oe(this,"linkToKey",ue,c,a,d,b);typeof c==="string"&&this.gc(a,c)}}else u.ab(a,c,b)}};u.a(P,"linkFromPortIdProperty",P.prototype.vn);
u.defineProperty(P,{vn:"linkFromPortIdProperty"},r("up"),function(a){var b=this.up;if(b!==a){Pe(a,P,"linkFromPortIdProperty");this.up=a;this.d("linkFromPortIdProperty",b,a)}});P.prototype.getFromPortIdForLinkData=P.prototype.qF=function(a){if(a===m)return"";var b=this.up;if(b==="")return"";a=u.Va(a,b);return a===f?"":a};
P.prototype.setFromPortIdForLinkData=P.prototype.Mr=function(a,b){u.e(b,"string",P,"setFromPortIdForLinkData:portname");if(a!==m){var c=this.up;if(c!=="")if(this.Nh(a)){var d=u.Va(a,c);if(d!==b){u.ab(a,c,b);Oe(this,"linkFromPortId",ue,c,a,d,b);typeof c==="string"&&this.gc(a,c)}}else u.ab(a,c,b)}};u.a(P,"linkToPortIdProperty",P.prototype.zn);
u.defineProperty(P,{zn:"linkToPortIdProperty"},r("vp"),function(a){var b=this.vp;if(b!==a){Pe(a,P,"linkToPortIdProperty");this.vp=a;this.d("linkToPortIdProperty",b,a)}});P.prototype.getToPortIdForLinkData=P.prototype.sF=function(a){if(a===m)return"";var b=this.vp;if(b==="")return"";a=u.Va(a,b);return a===f?"":a};
P.prototype.setToPortIdForLinkData=P.prototype.Pr=function(a,b){u.e(b,"string",P,"setToPortIdForLinkData:portname");if(a!==m){var c=this.vp;if(c!=="")if(this.Nh(a)){var d=u.Va(a,c);if(d!==b){u.ab(a,c,b);Oe(this,"linkToPortId",ue,c,a,d,b);typeof c==="string"&&this.gc(a,c)}}else u.ab(a,c,b)}};u.a(P,"nodeIsLinkLabelProperty",P.prototype.Hn);
u.defineProperty(P,{Hn:"nodeIsLinkLabelProperty"},r("it"),function(a){var b=this.it;if(b!==a){Pe(a,P,"nodeIsLinkLabelProperty");this.it=a;this.d("nodeIsLinkLabelProperty",b,a)}});P.prototype.isLinkLabelForNodeData=P.prototype.ey=function(a){if(a===m)return o;var b=this.it;return b===""?o:u.Va(a,b)?h:o};u.a(P,"linkLabelKeysProperty",P.prototype.wn);
u.defineProperty(P,{wn:"linkLabelKeysProperty"},r("th"),function(a){var b=this.th;if(b!==a){Pe(a,P,"linkLabelKeysProperty");this.th=a;this.d("linkLabelKeysProperty",b,a)}});P.prototype.getLabelKeysForLinkData=P.prototype.nl=function(a){if(a===m)return[];var b=this.th;if(b==="")return[];a=u.Va(a,b);return a===f?[]:a};
P.prototype.setLabelKeysForLinkData=P.prototype.aD=function(a,b){u.c(b,Array,P,"setLabelKeysForLinkData:arr");if(a!==m){var c=this.th;if(c!=="")if(this.Nh(a)){var d=u.Va(a,c);if(d!==b){for(var e=u.wb(d),g=0;g<e;g++){var i=u.mb(d,g);this.Tg(i,a)}u.ab(a,c,b);e=u.wb(b);for(g=0;g<e;g++){i=u.mb(b,g);this.Sg(i)===m&&this.ag(i,a)}Oe(this,"linkLabelKeys",ue,c,a,d,b);typeof c==="string"&&this.gc(a,c)}}else u.ab(a,c,b)}};
P.prototype.addLabelKeyForLinkData=P.prototype.GA=function(a,b){s&&(Qe(b)||u.sc(b,"number or string",P,"addLabelKeyForLinkData:key"));if(a!==m){var c=this.th;if(c!==""){var d=u.Va(a,c);if(d===f)this.aD(a,[b]);else if(u.isArray(d)){if(!(u.ox(d,b)>=0)){u.Jh(d,Infinity,b);if(this.Nh(a)){this.Sg(b)===m&&this.ag(b,a);Oe(this,"linkLabelKeys",ve,c,a,m,b)}}}else u.g(c+" property is not an Array; cannot addLabelKeyForLinkData: "+a)}}};
P.prototype.removeLabelKeyForLinkData=P.prototype.jG=function(a,b){s&&(Qe(b)||u.sc(b,"number or string",P,"removeLabelKeyForLinkData:key"));if(a!==m){var c=this.th;if(c!==""){var d=u.Va(a,c);if(u.isArray(d)){var e=u.ox(d,b);if(!(e<0)){u.Kh(d,e);if(this.Nh(a)){this.Tg(b,a);Oe(this,"linkLabelKeys",we,c,a,b,m)}}}else d!==f&&u.g(c+" property is not an Array; cannot removeLabelKeyforLinkData: "+a)}}};u.a(P,"linkDataArray",P.prototype.dg);
u.defineProperty(P,{dg:"linkDataArray"},r("zj"),function(a){var b=this.zj;if(b!==a){u.SA(a,P,"linkDataArray");for(var c=u.wb(a),d=0;d<c;d++){var e=u.mb(a,d);if(!(e instanceof Object)){u.g("GraphLinksModel.linkDataArray must only contain Objects, not: "+e);return}u.on(e)}this.zj=a;for(var g=new la(Object),d=0;d<c;d++){e=u.mb(a,d);g.add(e)}this.sp=g;Oe(this,"linkDataArray",ue,"linkDataArray",this,b,a);for(d=0;d<c;d++){e=u.mb(a,d);Re(this,e)}}});
P.prototype.containsLinkData=P.prototype.Nh=function(a){return a===m?o:this.sp.contains(a)};P.prototype.addLinkData=P.prototype.HA=function(a){if(a!==m){if(u.dc(a)===f)u.Gb(a);else if(this.Nh(a))return;this.sp.add(a);var b=u.wb(this.zj);u.Jh(this.zj,b,a);Oe(this,"linkDataArray",ve,"linkDataArray",this,m,a,m,b);Re(this,a)}};
P.prototype.removeLinkData=P.prototype.kG=function(a){if(a!==m){this.sp.remove(a);var b=this.zj.indexOf(a);if(!(b<0)){u.Kh(this.zj,b);Oe(this,"linkDataArray",we,"linkDataArray",this,a,m,b,m);b=this.mn(a);this.Tg(b,a);b=this.nn(a);this.Tg(b,a);for(var c=this.nl(a),d=u.wb(c),e=0;e<d;e++){b=u.mb(c,e);this.Tg(b,a)}}}};function Re(a,b){var c=a.mn(b);a.Sg(c)===m&&a.ag(c,b);c=a.nn(b);a.Sg(c)===m&&a.ag(c,b);for(var d=a.nl(b),e=u.wb(d),g=0;g<e;g++){c=u.mb(d,g);a.Sg(c)===m&&a.ag(c,b)}}
u.a(P,"copyLinkDataFunction",P.prototype.UE);u.defineProperty(P,{UE:"copyLinkDataFunction"},r("qs"),function(a){var b=this.qs;if(b!==a){a!==m&&u.e(a,"function",P,"copyLinkDataFunction");this.qs=a;this.d("copyLinkDataFunction",b,a)}});
P.prototype.copyLinkData=P.prototype.cB=function(a){if(a===m)return m;var b=m,b=this.qs;if(b!==m)b=b(a);else{var b=new a.constructor,c;for(c in a)u.ab(b,c,u.Va(a,c))}if(b){u.Gb(b);this.Aj!==""&&u.ab(b,this.Aj,f);this.Cj!==""&&u.ab(b,this.Cj,f);this.th!==""&&u.ab(b,this.th,[])}return b};u.a(P,"nodeIsGroupProperty",P.prototype.Gn);u.defineProperty(P,{Gn:"nodeIsGroupProperty"},r("ht"),function(a){var b=this.ht;if(b!==a){Pe(a,P,"nodeIsGroupProperty");this.ht=a;this.d("nodeIsGroupProperty",b,a)}});
P.prototype.isGroupForNodeData=P.prototype.$x=function(a){if(a===m)return o;var b=this.ht;return b===""?o:u.Va(a,b)?h:o};u.a(P,"nodeGroupKeyProperty",P.prototype.Fn);u.defineProperty(P,{Fn:"nodeGroupKeyProperty"},r("Fj"),function(a){var b=this.Fj;if(b!==a){Pe(a,P,"nodeGroupKeyProperty");this.Fj=a;this.d("nodeGroupKeyProperty",b,a)}});
P.prototype.getGroupKeyForNodeData=P.prototype.lr=function(a){if(a!==m){var b=this.Fj;if(b!==""){b=u.Va(a,b);if(b!==f){if(Qe(b))return b;s&&u.trace("GroupKey value for node data "+a+" is not a number or a string: "+b)}}}};
P.prototype.setGroupKeyForNodeData=P.prototype.Hy=function(a,b){s&&b!==f&&!Qe(b)&&u.sc(b,"number or string",P,"setGroupKeyForNodeData:key");if(a!==m){var c=this.Fj;if(c!=="")if(this.Ai(a)){var d=u.Va(a,c);if(d!==b){this.Tg(d,a);u.ab(a,c,b);this.Sg(b)===m&&this.ag(b,a);Oe(this,"nodeGroupKey",ue,c,a,d,b);typeof c==="string"&&this.gc(a,c)}}else u.ab(a,c,b)}};P.prototype.copyNodeData=P.prototype.$m=function(a){if(a===m)return m;a=D.prototype.$m.call(this,a);this.Fj!==""&&u.ab(a,this.Fj,f);return a};
P.prototype.setDataProperty=P.prototype.wG=function(a,b,c){if(s){u.e(a,"object",P,"setDataProperty:data");u.e(b,"string",P,"setDataProperty:propname");b===""&&u.g("GraphLinksModel.setDataProperty: property name must not be an empty string when setting "+a+" to "+c)}if(this.Ai(a))if(b===this.ul)u.g("GraphLinksModel.setDataProperty: property name must not be the key for the node data: "+b);else{if(b===this.tl&&typeof c==="string"){this.$C(a,c);return}if(b===this.Fn&&(typeof c==="string"||typeof c===
"number")){this.Hy(a,c);return}b===this.Gn?u.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+b):b===this.Hn&&u.g("GraphLinksModel.setDataProperty: property name must not be the nodeIsLinkLabelProperty: "+b)}else if(this.Nh(a)){if(b===this.un&&(typeof c==="string"||typeof c==="number")){this.Su(a,c);return}if(b===this.yn&&(typeof c==="string"||typeof c==="number")){this.Tu(a,c);return}if(b===this.vn&&typeof c==="string"){this.Mr(a,c);return}if(b===this.zn&&
typeof c==="string"){this.Pr(a,c);return}if(b===this.tn&&typeof c==="string"){this.vG(a,c);return}if(b===this.wn&&c instanceof Array){this.aD(a,c);return}}var d=u.Va(a,b);if(d!==c){u.ab(a,b,c);Oe(this,"",ue,b,a,d,c)}};P.prototype.Sy=function(){D.prototype.Sy.call(this);for(var a=this.dg,b=u.wb(a),c=0;c<b;c++)Re(this,u.mb(a,c))};
P.prototype.Mu=function(a){D.prototype.Mu.call(this,a);var a=this.Vb(a),b=this.xB(a);if(b!==m){for(var c=new z(Object),b=b.f;b.next();){var d=b.value;if(this.Ai(d)){if(this.lr(d)===a){var e=this.Fj;Oe(this,"nodeGroupKey",ue,e,d,a,a);typeof e==="string"&&this.gc(d,e);c.add(d)}}else{if(this.mn(d)===a){e=this.Aj;Oe(this,"linkFromKey",ue,e,d,a,a);typeof e==="string"&&this.gc(d,e);c.add(d)}if(this.nn(d)===a){e=this.Cj;Oe(this,"linkToKey",ue,e,d,a,a);typeof e==="string"&&this.gc(d,e);c.add(d)}for(var g=
this.nl(d),i=u.wb(g),e=this.th,j=0;j<i;j++)if(u.mb(g,j)===a){Oe(this,"linkLabelKeys",ve,e,d,a,a);c.add(d)}}}for(c=c.f;c.next();)this.Tg(a,c.value)}};P.prototype.Lu=function(a){D.prototype.Lu.call(this,a);var b=this.lr(a);this.Sg(b)===m&&this.ag(b,a)};P.prototype.Ty=function(a){D.prototype.Ty.call(this,a);var b=this.lr(a);this.Tg(b,a)};u.a(P,"linkCategoryProperty",P.prototype.tn);
u.defineProperty(P,{tn:"linkCategoryProperty"},r("qp"),function(a){var b=this.qp;if(b!==a){Pe(a,P,"linkCategoryProperty");this.qp=a;this.d("linkCategoryProperty",b,a)}});P.prototype.getCategoryForLinkData=P.prototype.EB=function(a){if(a===m)return"";var b=this.qp;if(b==="")return"";b=u.Va(a,b);if(b===f)return"";if(typeof b==="string")return b;s&&u.trace("getCategoryForLinkData found a non-string category for "+a+": "+b);return b};
P.prototype.setCategoryForLinkData=P.prototype.vG=function(a,b){u.e(b,"string",P,"setCategoryForLinkData:val");if(a!==m){var c=this.qp;if(c==="")return"";if(this.Nh(a)){var d=u.Va(a,c);if(d!==b){u.ab(a,c,b);Oe(this,"linkCategory",ue,c,a,d,b);typeof c==="string"&&this.gc(a,c)}}else u.ab(a,c,b)}};
function Se(a,b,c){u.Gb(this);a===f?a="":u.e(a,"string",Se,"constructor:targetprop");b===f?b=a:u.e(b,"string",Se,"constructor:sourceprop");c===f?c=m:c!==m&&u.e(c,"function",Se,"constructor:conv");this.vA="";this.df=m;this.Mt=a;this.Kt=this.Sw=0;this.nA=m;this.Ft=b;this.Nv=c;this.sw=Te;this.Hv=m}u.H("Binding",Se);var Te;Se.OneWay=Te=u.l(Se,"OneWay",1);var Ue;Se.TwoWay=Ue=u.l(Se,"TwoWay",2);
Se.parseEnum=function(a,b){u.e(a,"function",Se,"parseEnum:ctor");u.Ra(b,a,Se,"parseEnum:defval");return function(c){return u.Nx(a,c)||b}};var xe;Se.toString=xe=function(a){var b=a;a instanceof Object&&(a.text?b=a.text:a.name?b=a.name:a.key!==f?b=a.key:a.id!==f&&(b=a.id));return b===f?"undefined":b===m?"null":b.toString()};Se.prototype.toString=function(){return"Binding("+this.Cl+" "+this.Oy+":"+this.Jy+")"};Se.prototype.freeze=function(){this.Ha=h;return this};
Se.prototype.xa=function(){this.Ha=o;return this};u.a(Se,"targetId",Se.prototype.Cl);u.defineProperty(Se,{Cl:"targetId"},r("vA"),function(a){u.v(this);u.e(a,"string",Se,"targetId");this.vA=a});u.a(Se,"targetProperty",Se.prototype.Oy);u.defineProperty(Se,{Oy:"targetProperty"},r("Mt"),function(a){u.v(this);u.e(a,"string",Se,"targetProperty");this.Mt=a});u.a(Se,"sourceName",Se.prototype.Qn);u.defineProperty(Se,{Qn:"sourceName"},r("nA"),function(a){u.v(this);u.e(a,"string",Se,"sourceName");this.nA=a});
u.a(Se,"sourceProperty",Se.prototype.Jy);u.defineProperty(Se,{Jy:"sourceProperty"},r("Ft"),function(a){u.v(this);u.e(a,"string",Se,"sourceProperty");this.Ft=a});u.a(Se,"converter",Se.prototype.$A);u.defineProperty(Se,{$A:"converter"},r("Nv"),function(a){u.v(this);a!==m&&u.e(a,"function",Se,"converter");this.Nv=a});u.a(Se,"backConverter",Se.prototype.RA);u.defineProperty(Se,{RA:"backConverter"},r("Hv"),function(a){u.v(this);a!==m&&u.e(a,"function",Se,"backConverter");this.Hv=a});u.a(Se,"mode",Se.prototype.mode);
u.defineProperty(Se,{mode:"mode"},r("sw"),function(a){u.v(this);u.Ra(a,Se,Se,"mode");this.sw=a});Se.prototype.makeTwoWay=Se.prototype.pJ=function(a){a===f&&(a=m);this.mode=Ue;this.RA=a;return this};Se.prototype.ofObject=Se.prototype.wy=function(a){a===f&&(a="");s&&u.e(a,"string",Se,"ofObject:srcname");this.Qn=a;return this};
Se.prototype.updateTarget=Se.prototype.yD=function(a,b,c){var d=this.Ft;if(!(c&&d!==c)){var c=this.Mt,e=this.Nv;if(!(e===m&&c==="")){s&&(typeof c==="string"&&typeof a.setAttribute!=="function"&&!u.Xx(a,c))&&u.trace("Binding error: undefined target property: "+c+" on "+a.toString());var g=b;d!==""&&(g=u.Va(b,d));if(g!==f)if(e===m)c!==""&&u.ab(a,c,g);else try{if(c!==""){var i=e(g,a);u.ab(a,c,i)}else e(g,a)}catch(j){s&&u.trace("Binding error: "+j.toString())}}}};
Se.prototype.updateSource=Se.prototype.xD=function(a,b,c){if(this.sw===Ue){var d=this.Mt;if(!(c&&d!==c)){var c=this.Ft,e=this.Hv;if(!(e===m&&c==="")){var g=a;d!==""&&(g=u.Va(a,d));if(g!==f)if(e===m)u.ab(b,c,g);else try{if(c!==""){var i=e(g,b);u.ab(b,c,i)}else e(g,b)}catch(j){s&&u.trace("Binding error: "+j.toString())}}}}};function Ve(){this.KD=(new z(se)).freeze();this.qb="";this.Iz=o}u.H("Transaction",Ve);
Ve.prototype.toString=function(a){var b="Transaction: "+this.name+" "+this.Ng.count.toString()+(this.qn?"":", incomplete");if(a!==f&&a>0)for(var c=this.Ng.count,d=0;d<c;d++){var e=this.Ng.Z(d);e!==m&&(b=b+("\n  "+e.toString(a-1)))}return b};Ve.prototype.clear=Ve.prototype.clear=function(){var a=this.Ng;a.xa();for(var b=a.count-1;b>=0;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();a.freeze()};Ve.prototype.canUndo=Ve.prototype.Vj=r("qn");
Ve.prototype.undo=Ve.prototype.lk=function(){if(this.Vj())for(var a=this.Ng.count-1;a>=0;a--){var b=this.Ng.Z(a);b!==m&&b.lk()}};Ve.prototype.canRedo=Ve.prototype.Uj=r("qn");Ve.prototype.redo=Ve.prototype.Kn=function(){if(this.Uj())for(var a=this.Ng.count,b=0;b<a;b++){var c=this.Ng.Z(b);c!==m&&c.Kn()}};u.m(Ve,{Ng:"changes"},r("KD"));u.a(Ve,"name",Ve.prototype.name);u.defineProperty(Ve,{name:"name"},r("qb"),ba("qb"));u.a(Ve,"isComplete",Ve.prototype.qn);
u.defineProperty(Ve,{qn:"isComplete"},r("Iz"),ba("Iz"));function ye(){this.tw=new la(D);this.ph=o;this.RD=(new z(Ve)).freeze();this.qj=-1;this.Oz=999;this.qh=o;this.vs=m;this.Qj=0;this.Kv=o;if(s)this.Kv=h;this.Rf=(new z("string")).freeze();this.sm=new z("number");this.$v=h}u.H("UndoManager",ye);
ye.prototype.toString=function(a){for(var b="UndoManager "+this.Ji+"<"+this.history.count+"<="+this.my,b=b+"[",c=this.uC.count,d=0;d<c;d++){d>0&&(b=b+" ");b=b+this.uC.Z(d)}b=b+"]";if(a!==f&&a>0){c=this.history.count;for(d=0;d<c;d++)b=b+("\n "+this.history.Z(d).toString(a-1))}return b};
ye.prototype.clear=ye.prototype.clear=function(){var a=this.history;a.xa();for(var b=a.count-1;b>=0;b--){var c=a.Z(b);c!==m&&c.clear()}a.clear();this.qj=-1;a.freeze();this.qh=o;this.vs=m;this.Qj=0;this.Rf.xa();this.Rf.clear();this.Rf.freeze();this.sm.clear()};ye.prototype.addModel=ye.prototype.mE=function(a){this.tw.add(a)};ye.prototype.removeModel=ye.prototype.lG=function(a){this.tw.remove(a)};
ye.prototype.startTransaction=ye.prototype.Fb=function(a){a===m&&(a="");if(this.$a)return o;if(this.$v===h){this.$v=o;this.Qj++;this.rd("StartingFirstTransaction",a,this.gl);this.Qj>0&&this.Qj--}if(this.isEnabled){this.Rf.xa();this.Rf.add(a);this.Rf.freeze();this.gl===m?this.sm.add(0):this.sm.add(this.gl.Ng.count)}this.Qj++;var b=this.kk===1;b&&this.rd("StartedTransaction",a);return b};ye.prototype.commitTransaction=ye.prototype.Ld=function(a){return We(this,h,a)};
ye.prototype.rollbackTransaction=ye.prototype.Ir=function(){return We(this,o,"")};
function We(a,b,c){if(a.$a)return o;a.ux&&a.kk<1&&u.trace("Ending transaction without having started a transaction: "+c);var d=a.kk===1;d&&(b&&a.isEnabled)&&a.rd("CommittingTransaction",c,a.gl);var e=0;if(a.kk>0){a.Qj--;if(a.isEnabled){var g=a.Rf.count;if(g>0){c===""&&(c=a.Rf.Z(0));a.Rf.xa();a.Rf.Se(g-1);a.Rf.freeze()}g=a.sm.count;if(g>0){e=a.sm.Z(g-1);a.sm.Se(g-1)}}}g=a.gl;if(d){if(b){if(a.isEnabled&&g!==m){b=g;b.qn=h;b.name=c;d=a.history;d.xa();for(e=d.count-1;e>a.Ji;e--){g=d.Z(e);g!==m&&g.clear();
d.Se(e)}e=a.my;e===0&&(e=1);if(e>0&&d.count>=e){g=d.Z(0);g!==m&&g.clear();d.Se(0);a.qj--}d.add(b);a.qj++;d.freeze();g=b}a.rd("CommittedTransaction",c,g)}else{a.qh=h;try{if(a.isEnabled&&g!==m){g.qn=h;g.lk()}}finally{a.rd("RolledBackTransaction",c,g);a.qh=o}g!==m&&g.clear()}a.vs=m;return h}if(a.isEnabled&&!b&&g!==m){a=e;c=g.Ng;c.xa();for(b=c.count-1;b>=a;b--){d=c.Z(b);d!==m&&d.lk();c.Se(b)}c.freeze()}return o}
ye.prototype.canUndo=ye.prototype.Vj=function(){if(!this.isEnabled||this.kk>0||this.$a)return o;var a=this.rD;return a!==m&&a.Vj()?h:o};ye.prototype.undo=ye.prototype.lk=function(){if(this.Vj()){var a=this.rD;try{this.rd("StartingUndo","Undo",a);this.qh=h;this.qj--;a.lk()}catch(b){u.trace("undo error: "+b.toString())}finally{this.qh=o;this.rd("FinishedUndo","Undo",a)}}};
ye.prototype.canRedo=ye.prototype.Uj=function(){if(!this.isEnabled||this.kk>0||this.$a)return o;var a=this.qD;return a!==m&&a.Uj()?h:o};ye.prototype.redo=ye.prototype.Kn=function(){if(this.Uj()){var a=this.qD;try{this.rd("StartingRedo","Redo",a);this.qh=h;this.qj++;a.Kn()}catch(b){u.trace("redo error: "+b.toString())}finally{this.qh=o;this.rd("FinishedRedo","Redo",a)}}};
ye.prototype.rd=function(a,b,c){c===f&&(c=m);var d=new se;d.Mc=te;d.propertyName=a;d.object=c;d.oldValue=b;for(a=this.WF;a.next();){b=a.value;d.J=b;b.$t(d)}};ye.prototype.handleChanged=ye.prototype.MB=function(a){if(this.isEnabled&&!this.$a&&!this.skipsEvent(a)){var b=this.gl;if(b===m)this.vs=b=new Ve;var c=a.copy(),b=b.Ng;b.xa();b.add(c);b.freeze();if(this.ux&&this.kk<=0&&!this.$v){a=a.b;a!==m&&a.sg===o||u.trace("Change not within a transaction: "+c.toString())}}};
ye.prototype.skipsEvent=ye.prototype.eK=function(a){if(a===m||a.Mc.value<0)return h;a=a.object;if(a instanceof Q){a=a.sa;if(a!==m&&a.Zc)return h}else if(a instanceof Xe&&a.Zc)return h;return o};u.m(ye,{WF:"models"},function(){return this.tw.f});u.a(ye,"isEnabled",ye.prototype.isEnabled);u.defineProperty(ye,{isEnabled:"isEnabled"},r("ph"),ba("ph"));u.m(ye,{rD:"transactionToUndo"},function(){return this.Ji>=0&&this.Ji<=this.history.count-1?this.history.Z(this.Ji):m});
u.m(ye,{qD:"transactionToRedo"},function(){return this.Ji<this.history.count-1?this.history.Z(this.Ji+1):m});u.m(ye,{$a:"isUndoingRedoing"},r("qh"));u.m(ye,{history:"history"},r("RD"));u.a(ye,"maxHistoryLength",ye.prototype.my);u.defineProperty(ye,{my:"maxHistoryLength"},r("Oz"),ba("Oz"));u.m(ye,{Ji:"historyIndex"},r("qj"));u.m(ye,{gl:"currentTransaction"},r("vs"));u.m(ye,{kk:"transactionLevel"},r("Qj"));u.m(ye,{EF:"isInTransaction"},function(){return this.Qj>0});
u.defineProperty(ye,{ux:"checksTransactionLevel"},r("Kv"),ba("Kv"));u.m(ye,{uC:"nestedTransactionNames"},r("Rf"));function C(){this.M=m;this.sz=this.nz=o;this.Ej=this.gz=m}u.H("CommandHandler",C);var Ye=m,Ze="";C.prototype.toString=ca("CommandHandler");u.m(C,{b:"diagram"},r("M"));C.prototype.tf=function(a){s&&a!==m&&u.c(a,B,C,"setDiagram");this.M=a};
C.prototype.doKeyDown=C.prototype.Gx=function(){var a=this.b;if(a!==m){var b=a.F,c=b.Xj,d=b.shift,e=b.alt,g=b.key;if(c&&(g==="C"||g==="Insert"))this.canCopySelection()&&this.copySelection();else if(c&&g==="X"||d&&g==="Del")this.canCutSelection()&&this.cutSelection();else if(g==="Del")this.canDeleteSelection()&&this.deleteSelection();else if(c&&g==="V"||d&&g==="Insert")this.canPasteSelection()&&this.pasteSelection();else if(c&&g==="Y"||e&&d&&g==="Backspace")this.canRedo()&&this.redo();else if(c&&g===
"Z"||e&&g==="Backspace")this.canUndo()&&this.undo();else if(c&&g==="A")this.canSelectAll()&&this.selectAll();else if(c&&g==="P")this.canPrint()&&this.print();else if(g==="Esc")this.canStopCommand()&&this.stopCommand();else if(g==="Up")a.Ge&&(c?a.scroll("pixel","up"):a.scroll("line","up"));else if(g==="Down")a.Ge&&(c?a.scroll("pixel","down"):a.scroll("line","down"));else if(g==="Left")a.Fe&&(c?a.scroll("pixel","left"):a.scroll("line","left"));else if(g==="Right")a.Fe&&(c?a.scroll("pixel","right"):
a.scroll("line","right"));else if(g==="PageUp")a.Fe?a.scroll("page","left"):!c&&a.Ge&&a.scroll("page","up");else if(g==="PageDown")a.Fe?a.scroll("page","right"):!c&&a.Ge&&a.scroll("page","down");else if(g==="Home"){b=a.qc;if(c&&a.Ge)a.position=new E(a.position.x,b.y);else if(!c&&a.Fe)a.position=new E(b.x,a.position.y)}else if(g==="End"){b=a.qc;d=a.jb;if(c&&a.Ge)a.position=new E(d.x,b.bottom-d.height);else if(!c&&a.Fe)a.position=new E(b.right-d.width,d.y)}else g==="Subtract"?this.canDecreaseZoom()&&
this.decreaseZoom():g==="Add"?this.canIncreaseZoom()&&this.increaseZoom():c&&g==="0"?this.canResetZoom()&&this.resetZoom():c&&!d&&g==="G"?this.canGroupSelection()&&this.groupSelection():c&&d&&g==="G"?this.canUngroupSelection()&&this.ungroupSelection():b.event&&b.event.which===113?this.canEditTextBlock()&&this.editTextBlock():b.bubbles=h}};C.prototype.doKeyUp=C.prototype.Hx=function(){var a=this.b;if(a!==m)a.F.bubbles=h};
C.prototype.stopCommand=C.prototype.lK=function(){var a=this.b;if(a!==m){var b=a.qa;b instanceof $e&&a.Hd&&a.wx();b!==m&&b.doCancel()}};C.prototype.canStopCommand=C.prototype.AH=ca(h);C.prototype.selectAll=C.prototype.ZJ=function(){var a=this.b;if(a!==m)try{a.pc="wait";a.ha("ChangingSelection");for(var b=a.Qi;b.next();)b.value.Da=h;for(b=a.fk;b.next();)b.value.Da=h;for(b=a.links;b.next();)b.value.Da=h}finally{a.ha("ChangedSelection");a.pc=""}};
C.prototype.canSelectAll=C.prototype.zH=function(){var a=this.b;return a!==m&&a.Hd};C.prototype.deleteSelection=C.prototype.aI=function(){var a=this.b;if(a!==m&&!a.ha("SelectionDeleting",a.selection))try{a.pc="wait";a.Fb("Delete");a.ha("ChangingSelection");for(var b=new la(T),c=a.selection.f;c.next();)af(b,c.value,h,this.rB,function(a){return a.canDelete()});this.deleteParts(b,h);a.ha("SelectionDeleted",b)}finally{a.ha("ChangedSelection");a.Ld("Delete");a.pc=""}};
C.prototype.canDeleteSelection=C.prototype.jH=function(){var a=this.b;return a===m||(a.Ja||a.Nd)||!a.Sj||a.selection.count===0?o:h};C.prototype.deleteParts=C.prototype.$H=function(a,b){for(var c=a.f;c.next();){var d=c.value;if(!b||d.canDelete()){var e=d.b;e!==m&&e.remove(d)}}};
function af(a,b,c,d,e){if(!a.contains(b)){e===f&&(e=m);if((e===m||e(b))&&!(b instanceof bf)){a.add(b);if(b instanceof U){if(c&&b instanceof V)for(var g=b.fc;g.next();){var i=g.value;af(a,i,c,d,e)}for(i=b.ge;i.next();){g=i.value;if(!a.contains(g)){var j=g.da,k=g.fa;j!==m&&a.contains(j)&&k!==m&&a.contains(k)?af(a,g,c,d,e):(j===m||k===m)&&af(a,g,c,d,e)}}if(d){i=h;g=b.b;if(g!==m)i=g.mf;for(b=i?b.gn():b.fn();b.next();){i=b.value;af(a,i,c,d,e)}}}else if(b instanceof W)for(i=b.Xh;i.next();)af(a,i.value,
c,d,e)}}}C.prototype.copyParts=C.prototype.RH=function(a,b,c){for(var d=new ka(T,T),a=a.f;a.next();)cf(this,a.value,b,d,c);for(b=d.f;b.next();)b.value.gc();return d};
function cf(a,b,c,d,e){if(b===m||e&&!b.canCopy())return m;if(d.contains(b)){a=d.$(b);return a instanceof T?a:m}var g=m,i=b.data;if(i!==m&&c!==m){var j=c.J;if(b instanceof W){if(j instanceof P){i=j.cB(i);if(i instanceof Object){j.HA(i);g=c.cg(i)}}}else{i=j.$m(i);if(i instanceof Object){j.Vt(i);g=c.cg(i)}}}else{nf(b);g=b.copy();c!==m&&g instanceof T&&c.add(g)}if(!(g instanceof T))return m;g.Da=o;d.add(b,g);if(b instanceof U){for(j=b.ge;j.next();){i=j.value;if(i.da===b){var k=d.$(i);if(k!==m)k.da=g}if(i.fa===
b){k=d.$(i);if(k!==m)k.fa=g}}if(b instanceof V&&g instanceof V)for(b=b.fc;b.next();){j=cf(a,b.value,c,d,e);if(!(j instanceof W)&&j!==m)j.Sa=g}}else if(b instanceof W){j=b.da;if(j!==m){j=d.$(j);if(j!==m)g.da=j}j=b.fa;if(j!==m){j=d.$(j);if(j!==m)g.fa=j}for(b=b.Xh;b.next();){j=cf(a,b.value,c,d,e);if(j!==m)j.fe=g}}return g}C.prototype.copySelection=C.prototype.TH=function(){var a=this.b;if(a!==m){for(var b=new la(T),a=a.selection.f;a.next();)af(b,a.value,h,this.bB,function(a){return a.canCopy()});this.copyToClipboard(b)}};
C.prototype.canCopySelection=C.prototype.fH=function(){var a=this.b;return a===m||(!a.Hh||!a.Xt)||a.selection.count===0?o:h};C.prototype.cutSelection=C.prototype.WH=function(){this.copySelection();this.deleteSelection()};C.prototype.canCutSelection=C.prototype.gH=function(){var a=this.b;return a===m||(a.Ja||a.Nd)||(!a.Hh||!a.Sj||!a.Xt)||a.selection.count===0?o:h};
C.prototype.copyToClipboard=C.prototype.UH=function(a){var b=this.b;if(b!==m){var c=m;if(a===m){Ye=m;Ze=""}else{a=this.copyParts(a,m,h);c=new z(T);c.Yf(a);Ye=c;Ze=b.J.hl}b.ha("ClipboardChanged",c)}};
C.prototype.pasteFromClipboard=C.prototype.HJ=function(){var a=Ye;if(a===m)return u.zf;var b=this.b;if(b===m||Ze!==b.J.hl)return u.zf;b=this.copyParts(a,b,o);a=new la(T);for(b=b.f;b.next();){var c=b.value;if(!c.location.V())c.location=b.key.location.copy();if(!c.position.V())c.position=b.key.position.copy();a.add(c)}return a};
C.prototype.pasteSelection=C.prototype.IJ=function(a){var b=this.b;if(b!==m)try{b.pc="wait";b.Fb("Paste");b.ha("ChangingSelection");var c=this.pasteFromClipboard();c.count>0&&of(b);for(var d=c.f;d.next();)d.value.Da=h;b.ha("ChangedSelection");if(a instanceof E){var e=this.computeBounds(b.selection);if(e){var g=b.Mb.ae,i=g.computeEffectiveCollection(b.selection);g.moveParts(i,new E(a.x-e.za,a.y-e.Aa),o)}}b.ha("ClipboardPasted",c)}finally{b.Ld("Paste");b.pc=""}};
C.prototype.canPasteSelection=C.prototype.sH=function(){var a=this.b;return a===m||(a.Ja||a.Nd)||(!a.Rm||!a.Xt)||Ye===m||Ze!==a.J.hl?o:h};C.prototype.computeBounds=C.prototype.Zd=function(a){for(var b=m,a=a.f;a.next();){var c=a.value;if(!(c instanceof W)){c.Sh();b===m?b=c.pa:b.mk(c.pa)}}return b};C.prototype.undo=C.prototype.lk=function(){var a=this.b;a!==m&&a.ca.lk()};C.prototype.canUndo=C.prototype.Vj=function(){var a=this.b;return a===m||a.Ja||a.Nd?o:a.lx&&a.ca.Vj()};
C.prototype.redo=C.prototype.Kn=function(){var a=this.b;a!==m&&a.ca.Kn()};C.prototype.canRedo=C.prototype.Uj=function(){var a=this.b;return a===m||a.Ja||a.Nd?o:a.lx&&a.ca.Uj()};C.prototype.decreaseZoom=C.prototype.WE=function(a){a===f&&(a=1/1.05);var b=this.b;if(b!==m){a=b.scale*a;if(!(a<b.Pi||a>b.Oi)){b.scale=a;pf(b)}}};C.prototype.canDecreaseZoom=C.prototype.hH=function(a){a===f&&(a=1/1.05);var b=this.b;if(b===m)return o;a=b.scale*a;return a<b.Pi||a>b.Oi?o:b.Uq};
C.prototype.increaseZoom=C.prototype.yF=function(a){a===f&&(a=1.05);var b=this.b;if(b!==m){a=b.scale*a;if(!(a<b.Pi||a>b.Oi)){b.scale=a;pf(b)}}};C.prototype.canIncreaseZoom=C.prototype.qH=function(a){a===f&&(a=1.05);var b=this.b;if(b===m)return o;a=b.scale*a;return a<b.Pi||a>b.Oi?o:b.Uq};C.prototype.resetZoom=C.prototype.UJ=function(a){a===f&&(a=1);var b=this.b;if(b!==m&&!(a<b.Pi||a>b.Oi)){b.scale=a;pf(b)}};
C.prototype.canResetZoom=C.prototype.vH=function(a){a===f&&(a=1);var b=this.b;return b===m||a<b.Pi||a>b.Oi?o:b.Uq};C.prototype.collapseTree=C.prototype.Yq=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Fb("Collapse Tree");var c=new z(U);if(a instanceof U&&a.Od){a.Yq();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof U&&d.Od){d.Yq();c.add(d)}}b.ha("TreeCollapsed",c);b.Ld("Collapse Tree")};
C.prototype.canCollapseTree=C.prototype.dH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof U){if(!a.Od)return o;if(b.mf){if(a.gn().count>0)return h}else if(a.fn().count>0)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&c.Od)if(b.mf){if(c.gn().count>0)return h}else if(c.fn().count>0)return h}return o};
C.prototype.expandTree=C.prototype.er=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Fb("Expand Tree");var c=new z(U);if(a instanceof U&&!a.Od){a.er();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof U&&!d.Od){d.er();c.add(d)}}b.ha("TreeExpanded",c);b.Ld("Expand Tree")};
C.prototype.canExpandTree=C.prototype.nH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof U){if(a.Od)return o;if(b.mf){if(a.gn().count>0)return h}else if(a.fn().count>0)return h}else for(a=b.selection.f;a.next();){var c=a.value;if(c instanceof U&&!c.Od)if(b.mf){if(c.gn().count>0)return h}else if(c.fn().count>0)return h}return o};
C.prototype.groupSelection=C.prototype.QI=function(){var a=this.b;if(a!==m){var b=a.J;if(b!==m&&b instanceof P){var c=this.mx;if(c!==m)try{a.pc="wait";a.Fb("Group");a.ha("ChangingSelection");for(var d=new z(T),e=a.selection.f;e.next();){var g=e.value;(g instanceof U||g.constructor===T)&&g.canGroup()&&d.add(g)}for(var i=new z(T),j=d.f;j.next();){for(var k=j.value,g=o,e=d.f;e.next();)if(k.ql(e.value)){g=h;break}g||i.add(k)}if(i.count>0){e=i.f;e.next();var l=e.value.Sa;if(l!==m)for(;l!==m;){e=i.f;e.next();
for(d=o;e.next();){k=e.value;if(!k.ql(l)){d=h;break}}if(d)l=l.Sa;else break}var n=m;if(c instanceof V){nf(c);n=c.copy();n instanceof V&&a.add(n)}else if(b.$x(c)){var q=b.$m(c);if(q instanceof Object){b.Vt(q);n=a.cg(q)}}if(n instanceof V){if(l!==m&&this.isValidMember(l,n))n.Sa=l;for(e=i.f;e.next();){k=e.value;if(this.isValidMember(n,k))k.Sa=n}a.select(n)}}a.ha("ChangedSelection");a.ha("SelectionGrouped",n)}finally{a.Ld("Group");a.pc=""}}}};
C.prototype.canGroupSelection=C.prototype.pH=function(){var a=this.b;if(a===m||a.Ja||a.Nd||!a.Rm||!a.Qm)return o;var b=a.J;if(b===m||!(b instanceof P)||this.mx===m)return o;for(a=a.selection.f;a.next();){b=a.value;if((b instanceof U||b.constructor===T)&&b.canGroup())return h}return o};
C.prototype.findUnnestedNodes=C.prototype.Px=function(a){for(var b=[],a=a.f;a.next();){var c=a.value;c instanceof W||b.push(c)}for(var a=new la(T),c=b.length,d=0;d<c;d++){for(var e=b[d],g=h,i=0;i<c;i++)if(e.ql(b[i])){g=o;break}g&&a.add(e)}return a};C.prototype.isValidMember=C.prototype.fy=function(a,b){if(b===m||a===b||b instanceof W)return o;if(a!==m){if(a===b||a.ql(b))return o;var c=a.yr;if(c!==m&&!c(a,b)||a.data===m&&b.data!==m||a.data!==m&&b.data===m)return o}c=this.yr;return c!==m?c(a,b):h};
C.prototype.ungroupSelection=C.prototype.qK=function(a){a===f&&(a=m);var b=this.b;if(b!==m){var c=b.J;if(c!==m&&c instanceof P)try{b.pc="wait";b.Fb("Ungroup");b.ha("ChangingSelection");var d=new z(V);if(a instanceof V)d.add(a);else for(var e=b.selection.f;e.next();){var g=e.value;g instanceof V&&g.canUngroup()&&d.add(g)}if(d.count>0){b.wx();for(e=d.f;e.next();){var i=e.value,j=i.data,k=i.Sa,l=k!==m&&k.data!==m?c.Vb(k.data):f,n=new z(T);n.Yf(i.fc);for(var q=n.f;q.next();){var p=q.value;if(!(p instanceof
W)){var t=p.data;t!==m?c.Hy(t,l):p.Sa=k;p.Da=h}}j!==m?c.IC(j):b.remove(i)}}b.ha("ChangedSelection");b.ha("SelectionUngrouped",d)}finally{b.Ld("Ungroup");b.pc=""}}};C.prototype.canUngroupSelection=C.prototype.CH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja||b.Nd||!b.Sj||!b.Xm)return o;var c=b.J;if(c===m||!(c instanceof P))return o;if(a instanceof V){if(a.canUngroup())return h}else for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&b.canUngroup())return h}return o};
C.prototype.addTopLevelParts=C.prototype.ZG=function(a,b){for(var c=h,d=this.Px(a).f;d.next();){var e=d.value;if(e.Sa!==m)!b||this.fy(m,e)?e.Sa=m:c=o}return c};C.prototype.collapseSubGraph=C.prototype.Xq=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Fb("Collapse SubGraph");var c=new z(V);if(a instanceof V&&a.ee){a.Xq();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof V&&d.ee){d.Xq();c.add(d)}}b.ha("SubGraphCollapsed",c);b.Ld("Collapse SubGraph")};
C.prototype.canCollapseSubGraph=C.prototype.cH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof V)return!a.ee?o:h;for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&b.ee)return h}return o};
C.prototype.expandSubGraph=C.prototype.dr=function(a){a===f&&(a=m);var b=this.b;if(b===m)return o;b.Fb("Expand SubGraph");var c=new z(V);if(a instanceof V&&!a.ee){a.dr();c.add(a)}else for(a=b.selection.f;a.next();){var d=a.value;if(d instanceof V&&!d.ee){d.dr();c.add(d)}}b.ha("SubGraphExpanded",c);b.Ld("Expand SubGraph")};
C.prototype.canExpandSubGraph=C.prototype.mH=function(a){a===f&&(a=m);var b=this.b;if(b===m||b.Ja)return o;if(a instanceof V)return a.ee?o:h;for(a=b.selection.f;a.next();){b=a.value;if(b instanceof V&&!b.ee)return h}return o};
C.prototype.editTextBlock=C.prototype.sI=function(a){a===f&&(a=m);var b=this.b;if(b!==m&&b.Mb!==m){var c=b.Mb.Xu;if(c!==m){if(a===m){for(var a=b.selection.f,d=m;a.next();){var e=a.value;if(e.canEdit()){d=e;break}}if(d===m)return;a=d.zB(function(a){return a instanceof na&&a.mu})}if(a!==m&&a instanceof na){c.xf=a;b.qa=c}}}};
C.prototype.canEditTextBlock=C.prototype.lH=function(a){a===f&&(a=m);var b=this.b;if(b===m||(b.Ja||b.Nd)||!b.Wm||b.Mb===m||b.Mb.Xu===m)return o;if(a instanceof na){a=a.W;if(a!==m&&a.canEdit())return h}else for(b=b.selection.f;b.next();){a=b.value;if(a.canEdit()){a=a.zB(function(a){return a instanceof na&&a.mu});if(a!==m)return h}}return o};C.prototype.print=C.prototype.print=aa();C.prototype.canPrint=C.prototype.ME=function(){var a=this.b;return a!==m&&a.Sm};u.a(C,"copiesTree",C.prototype.bB);
u.defineProperty(C,{bB:"copiesTree"},r("nz"),ba("nz"));u.a(C,"deletesTree",C.prototype.rB);u.defineProperty(C,{rB:"deletesTree"},r("sz"),ba("sz"));u.a(C,"archetypeGroupData",C.prototype.mx);
u.defineProperty(C,{mx:"archetypeGroupData"},r("gz"),function(a){a!==m&&u.c(a,Object,C,"archetypeGroupData");var b=this.b;if(b!==m){b=b.J;b!==m&&!(a instanceof V)&&!b.$x(a)&&u.g("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+a)}this.gz=a});u.a(C,"memberValidation",C.prototype.yr);u.defineProperty(C,{yr:"memberValidation"},r("Ej"),function(a){a!==m&&u.e(a,"function",C,"memberValidation");this.Ej=a});
function qf(){u.Gb(this);this.M=m;this.qb="";this.ph=h;this.Gz=o;this.AA=m;this.St=-1}u.H("Tool",qf);qf.prototype.tf=function(a){s&&a!==m&&u.c(a,B,qf,"setDiagram");this.M=a};qf.prototype.toString=function(){return this.name!==""?this.name+" Tool":u.Ii(Object.getPrototypeOf(this))};qf.prototype.updateAdornments=qf.prototype.$h=aa();qf.prototype.canStart=qf.prototype.ff=r("isEnabled");qf.prototype.doStart=qf.prototype.Ix=aa();qf.prototype.doActivate=qf.prototype.Rh=function(){this.Q=h};
qf.prototype.doDeactivate=qf.prototype.Zj=function(){this.Q=o};qf.prototype.doStop=qf.prototype.Gi=aa();qf.prototype.doCancel=qf.prototype.Fi=function(){this.stopTool()};qf.prototype.stopTool=qf.prototype.mK=function(){var a=this.b;if(a!==m&&a.qa===this){a.qa=m;a.pc=""}};qf.prototype.doMouseDown=qf.prototype.lu=function(){!this.Q&&this.canStart()&&this.doActivate()};qf.prototype.doMouseMove=qf.prototype.Rg=aa();qf.prototype.doMouseUp=qf.prototype.Ke=function(){this.stopTool()};
qf.prototype.doMouseWheel=qf.prototype.dF=aa();qf.prototype.doKeyDown=qf.prototype.Gx=function(){var a=this.b;a!==m&&a.F.key==="Esc"&&this.doCancel()};qf.prototype.doKeyUp=qf.prototype.Hx=aa();qf.prototype.startTransaction=qf.prototype.Fb=function(a){this.oe=m;var b=this.b;return b===m?o:b.Fb(a)};qf.prototype.stopTransaction=qf.prototype.Ui=function(){var a=this.b;return a===m?o:this.oe===m?a.Ir():a.Ld(this.oe)};
qf.prototype.standardMouseSelect=qf.prototype.AG=function(){var a=this.b;if(a!==m&&a.Hd){var b=a.F,c=a.fr(b.C,h);if(c!==m)if(b.Xj){a.ha("ChangingSelection");c.Da=!c.Da;a.ha("ChangedSelection")}else if(b.shift){if(!c.Da){a.ha("ChangingSelection");c.Da=h;a.ha("ChangedSelection")}}else c.Da||a.select(c);else b.left&&(!b.Xj&&!b.shift)&&a.wx()}};
qf.prototype.standardMouseClick=qf.prototype.hK=function(a,b){a===f&&(a=m);b===f&&(b=function(a){return!a.sa.Zc});var c=this.b;if(c!==m){var d=c.F,e=c.Yc(d.C,a,b);d.ad=e;rf(e,d,c)}};
function rf(a,b,c){var d=0;b.left?d=b.He===1?1:b.He===2?2:1:b.right&&b.He===1&&(d=3);var e="";if(a!==m){switch(d){case 1:e="ObjectSingleClicked";break;case 2:e="ObjectDoubleClicked";break;case 3:e="ObjectContextClicked"}d!==0&&c.ha(e,a)}else{switch(d){case 1:e="BackgroundSingleClicked";break;case 2:e="BackgroundDoubleClicked";break;case 3:e="BackgroundContextClicked"}d!==0&&c.ha(e)}if(a!==m)for(;a!==m;){e=m;switch(d){case 1:e=a.click;break;case 2:e=a.jl?a.jl:a.click;break;case 3:e=a.Zq}if(e!==m){e(b,
a);if(b.ud)break}a=a.U}else{e=m;switch(d){case 1:e=c.click;break;case 2:e=c.jl?c.jl:c.click;break;case 3:e=c.Zq}e!==m&&e(b)}}
qf.prototype.standardMouseOver=qf.prototype.iK=function(){var a=this.b;if(a!==m){var b=a.F,c=a.Yc(b.C,m,m);b.ad=c;var d=a.bb;a.bb=h;var e=o;if(c!==a.Tl){var g=a.Tl;a.Iw=g;a.Tl=c;for(this.doCurrentObjectChanged(g,c);g!==m;){var i=g.qy;if(i!==m){if(c===g)break;if(c!==m&&c.Wh(g))break;i(b,g,c);e=h;if(b.ud)break}g=g.U}for(g=a.Iw;c!==m;){i=c.py;if(i!==m){if(g===c)break;if(g!==m&&g.Wh(c))break;i(b,c,g);e=h;if(b.ud)break}c=c.U}c=a.Tl}if(c!==m){g=c;for(i="";g!==m;){i=g.cursor;if(i!=="")break;g=g.U}a.pc=i;
for(g=c;g!==m;){i=g.Cr;if(i!==m){i(b,g);e=h;if(b.ud)break}g=g.U}}else{a.pc="";i=a.Cr;if(i!==m){i(b);e=h}}e&&a.update();a.bb=d}};qf.prototype.doCurrentObjectChanged=qf.prototype.cF=aa();
qf.prototype.standardMouseWheel=qf.prototype.jK=function(){var a=this.b;if(a!==m){var b=a.F,c=b.Ei;if(c!==0){var d=a.Mb.sl;if(a.Uq&&(d===sf&&!b.shift||d===tf&&b.Xj)){d=a.pk;a.pk=b.bd;var e=a.Kd;e!==m?c>0?e.yF():e.WE():a.scale=c>0?a.scale*1.05:a.scale/1.05;a.pk=d;b.bubbles=o}else if(d===sf&&b.shift||d===tf&&!b.Xj){d=a.position.copy();!b.shift&&a.Ge?c>0?a.scroll("line","up",3):a.scroll("line","down",3):b.shift&&a.Fe&&(c>0?a.scroll("line","left",3):a.scroll("line","right",3));if(!a.position.u(d))b.bubbles=
o}}}};qf.prototype.standardWaitAfter=qf.prototype.kK=function(a){u.e(a,"number",qf,"standardWaitAfter:delay");this.cancelWaitAfter();var b=this;this.St=window.setTimeout(function(){b.doWaitAfter()},a)};qf.prototype.cancelWaitAfter=qf.prototype.DH=function(){this.St!==-1&&window.clearTimeout(this.St);this.St=-1};qf.prototype.doWaitAfter=qf.prototype.gF=aa();
qf.prototype.findToolHandleAt=qf.prototype.EI=function(a,b){var c=this.b;if(c===m)return m;c=c.Yc(a,m,function(a){a=a.W;return a===m?o:a.Gd!==m});if(c===m)return m;var d=c.W;return d===m||d.hd!==b?m:c};qf.prototype.isBeyondDragSize=qf.prototype.bJ=function(){var a=this.b;if(a===m)return o;var b=a.cc.bd,a=a.F.bd,c=2;u.Qw&&(c=c+4);return Math.abs(a.x-b.x)>c||Math.abs(a.y-b.y)>c};u.m(qf,{b:"diagram"},r("M"));u.a(qf,"name",qf.prototype.name);u.defineProperty(qf,{name:"name"},r("qb"),ba("qb"));
u.a(qf,"isEnabled",qf.prototype.isEnabled);u.defineProperty(qf,{isEnabled:"isEnabled"},r("ph"),ba("ph"));u.a(qf,"isActive",qf.prototype.Q);u.defineProperty(qf,{Q:"isActive"},r("Gz"),ba("Gz"));u.a(qf,"transactionResult",qf.prototype.oe);u.defineProperty(qf,{oe:"transactionResult"},r("AA"),ba("AA"));function uf(a){this.Fw=a!==f?a.copy():new E;this.mA=m}uf.prototype.toString=function(){return this.Fw.toString()};u.a(uf,"point",uf.prototype.Zg);u.defineProperty(uf,{Zg:"point"},r("Fw"),ba("Fw"));
function vf(){qf.call(this);this.name="Dragging";this.mz=h;this.Gk=this.zz=o;this.cw=(new eb(NaN,NaN)).freeze();this.dw=Vb;this.ew=(new E(NaN,NaN)).freeze();this.wz=this.Jz=o;this.xz=this.lz=this.yz=this.pz=m;this.Eo=this.vz=o;this.Bm=new E(NaN,NaN);this.Dh=new E;this.It=o;this.Et=h;this.Xl=100;this.Ak=this.tt=m}u.H("DraggingTool",vf);u.na(vf,qf);u.a(vf,"copiesEffectiveCollection",vf.prototype.aB);u.defineProperty(vf,{aB:"copiesEffectiveCollection"},r("mz"),ba("mz"));u.a(vf,"dragsTree",vf.prototype.vB);
u.defineProperty(vf,{vB:"dragsTree"},r("zz"),ba("zz"));u.a(vf,"isGridSnapEnabled",vf.prototype.rn);u.defineProperty(vf,{rn:"isGridSnapEnabled"},r("Gk"),function(a){if(this.Gk!==a){u.e(a,"boolean",vf,"isGridSnapEnabled");this.Gk=a}});u.a(vf,"gridSnapCellSize",vf.prototype.Vx);u.defineProperty(vf,{Vx:"gridSnapCellSize"},r("cw"),function(a){if(!this.cw.u(a)){u.c(a,eb,vf,"gridSnapCellSize");this.cw=a=a.B()}});u.a(vf,"gridSnapCellSpot",vf.prototype.IB);
u.defineProperty(vf,{IB:"gridSnapCellSpot"},r("dw"),function(a){if(!this.dw.u(a)){u.c(a,K,vf,"gridSnapCellSpot");this.dw=a=a.B()}});u.a(vf,"gridSnapOrigin",vf.prototype.JB);u.defineProperty(vf,{JB:"gridSnapOrigin"},r("ew"),function(a){if(!this.ew.u(a)){u.c(a,E,vf,"gridSnapOrigin");this.ew=a=a.B()}});u.a(vf,"isDragSnapEnabled",vf.prototype.DF);u.defineProperty(vf,{DF:"isDragSnapEnabled"},r("Jz"),ba("Jz"));u.a(vf,"draggableLinks",vf.prototype.kl);u.defineProperty(vf,{kl:"draggableLinks"},r("wz"),ba("wz"));
u.a(vf,"currentPart",vf.prototype.fl);u.defineProperty(vf,{fl:"currentPart"},r("pz"),ba("pz"));u.a(vf,"copiedParts",vf.prototype.oc);u.defineProperty(vf,{oc:"copiedParts"},r("lz"),ba("lz"));u.a(vf,"draggedParts",vf.prototype.Kb);u.defineProperty(vf,{Kb:"draggedParts"},r("yz"),ba("yz"));u.a(vf,"draggedLink",vf.prototype.Cb);u.defineProperty(vf,{Cb:"draggedLink"},r("xz"),ba("xz"));u.a(vf,"dragOutStarted",vf.prototype.Kx);u.defineProperty(vf,{Kx:"dragOutStarted"},r("vz"),ba("vz"));u.a(vf,"delay",vf.prototype.ju);
u.defineProperty(vf,{ju:"delay"},r("Xl"),ba("Xl"));vf.prototype.canStart=vf.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||!a.Tj&&!a.Hh&&!a.Yt||!a.Hd)return o;var b=a.F;return!b.left||a.qa!==this&&(!this.isBeyondDragSize()||window.TouchEvent&&(b.ei!==m&&b.ei instanceof window.TouchEvent)&&b.timestamp-a.cc.timestamp<this.Xl)?o:this.findDraggablePart()!==m};
vf.prototype.findDraggablePart=vf.prototype.xI=function(){var a=this.b;if(a===m)return m;a=a.fr(a.cc.C,h);return a!==m&&(a.canMove()||a.canCopy())?a:m};vf.prototype.standardMouseSelect=vf.prototype.AG=function(){var a=this.b;if(a!==m&&a.Hd){this.fl=a.fr(a.cc.C,h);if(this.fl!==m&&!this.fl.Da){a.ha("ChangingSelection");var b=a.F;!b.Xj&&!b.shift&&of(a);this.fl.Da=h;a.ha("ChangedSelection")}}};
vf.prototype.doActivate=vf.prototype.Rh=function(){var a=this.b;if(a!==m){this.standardMouseSelect();var b=this.fl;if(!(b===m||!b.canMove()&&!b.canCopy())){this.Q=h;this.Bm.set(a.position);wf(this,a.selection);this.Ak=this.tt=m;this.Kb=this.computeEffectiveCollection(a.selection);xf(this,this.Kb);this.Fb("Drag");this.Dh.set(a.cc.C);if(a.Yt){this.Kx=h;this.Eo=o;yf=this;this.b.Bc=h}else a.Bc=h}}};
function wf(a,b){if(a.kl){var c=a.b;if(c!==m&&c.yi)if(b.count===1){c=b.f;c.next();a.Cb=c.value;a.Cb!==m&&(a.Cb.canRelinkFrom()&&a.Cb.canRelinkTo())&&a.Cb.Og()}else a.Cb=m}}
vf.prototype.computeEffectiveCollection=vf.prototype.IH=function(a){var b=this.b!==m&&this.b.qa===this,c=new ka(T,uf);if(a===m)return c;for(var d=a.f;d.next();){var e=d.value;zf(this,c,e,b)}if(this.Cb!==m&&this.kl)return c;for(d=a.f;d.next();){e=d.value;if(e instanceof W){a=e;b=a.da;if(b!==m&&!c.contains(b))c.remove(a);else{b=a.fa;b!==m&&!c.contains(b)&&c.remove(a)}}}return c};
function zf(a,b,c,d){if(!b.contains(c)&&(!d||c.canMove()||c.canCopy()))if(c instanceof U){b.add(c,new uf(c.location));if(c instanceof V)for(var e=c.fc;e.next();){var g=e.value;zf(a,b,g,d)}for(g=c.ge;g.next();){e=g.value;if(!b.contains(e)){var i=e.da,j=e.fa;i!==m&&(b.contains(i)&&j!==m&&b.contains(j))&&zf(a,b,e,d)}}if(a.vB){g=h;e=c.b;if(e!==m)g=e.mf;for(c=g?c.gn():c.fn();c.next();){g=c.value;zf(a,b,g,d)}}}else if(c instanceof W){e=c;b.add(e,new uf);for(g=e.Xh;g.next();)zf(a,b,g.value,d)}else c.constructor===
T&&b.add(c,new uf(c.location))}vf.prototype.doStop=vf.prototype.Gi=function(){var a=this.b;a!==m&&Af(a);Bf(this);Cf(this,this.Kb);this.Kb=m;this.Eo=this.Kx=o;if(Df.count>0){for(var b=Df.length,c=0;c<b;c++){var d=Df.j[c];if(d.Cb!==m)d.Cb=m;Ef(d);Bf(d);d.b!==m&&Af(d.b)}Df.clear()}if(this.Cb!==m)this.Cb=m;this.Bm.Nr(NaN,NaN);yf=Ff=m;Ef(this);a.Bc=o;this.Ui()};
function Bf(a){var b=a.b;if(b!==m){var c=b.bb;b.bb=h;for(var d=b.F,e=a.Ak;e!==m;){var g=e.oy;if(g!==m){g(d,e,m);if(d.ud)break}e=e.U}b.bb=c}a.tt=m;a.Ak=m}vf.prototype.doCancel=vf.prototype.Fi=function(){Ef(this);Gf(this);var a=this.b;if(a!==m&&this.Bm.V())a.position=this.Bm;this.stopTool()};function xf(a,b){if(b!==m){a.It=h;for(var c=b.f;c.next();){var d=c.key;if(d instanceof W)d.Fm=h}}}
function Cf(a,b){if(b!==m&&a.It){for(var c=b.f;c.next();){var d=c.key;if(d instanceof W){d.Fm=o;d.Te===Hf?If(d):d.L()}}a.It=o}}vf.prototype.doKeyDown=vf.prototype.Gx=function(){var a=this.b;if(a!==m){a=a.F;a!==m&&this.Q&&(a.key==="Esc"?this.doCancel():this.doMouseMove())}};vf.prototype.doKeyUp=vf.prototype.Hx=function(){var a=this.b;a!==m&&a.F!==m&&this.Q&&this.doMouseMove()};
function Jf(a){for(var b=Infinity,c=Infinity,d=-Infinity,e=-Infinity,a=a.f;a.next();){var g=a.value;if(g instanceof U||g.constructor===T){var i=g.location,g=i.x,i=i.y;if(!isNaN(g)&&!isNaN(i)){g<b&&(b=g);i<c&&(c=i);g>d&&(d=g);i>e&&(e=i)}}}return b===Infinity?new J(0,0,0,0):new J(b,c,d-b,e-c)}
function Pf(a,b){if(a.oc===m){var c=a.b;if(!(c===m||c.Ja||c.Nd)&&a.Kb!==m){c.bb=!b;c.J.bb=!b;c.Tq=!b;Gf(a);a.Dh.set(c.cc.C);for(var c=a.aB?c.Kd.copyParts(a.Kb.Vi(),c,h):c.Kd.copyParts(c.selection,c,h),d=c.f;d.next();)d.value.location=d.key.location.copy();d=Jf(c);new E(d.x+d.width/2,d.y+d.height/2);for(var d=new ka(T,uf),e=a.Kb.f;e.next();){var g=e.key;if((g instanceof U||g.constructor===T)&&g.canCopy()){g=c.$(g);if(g!==m){g.Sh();d.add(g,new uf(g.location))}}}for(c=c.f;c.next();){e=c.value;e instanceof
W&&e.canCopy()&&d.add(e,new uf)}a.oc=d;wf(a,d.Vi());if(a.Cb!==m){c=a.Cb;d=kb(c.ib);c.ek(a.Dh.x-(d.x+d.width/2),a.Dh.y-(d.y+d.height/2))}}}}function Ef(a){var b=a.b;if(b!==m){if(a.oc!==m){b.Kd.deleteParts(a.oc.Vi(),o);a.oc=m}b.bb=o;b.J.bb=o;b.Tq=o;a.Dh.set(b.cc.C)}}function Qf(a,b){var c=a.b;if(c!==m){var d=a.Dh;a.moveParts(b,c.F.C.copy().Sr(d),h)}}
vf.prototype.moveParts=vf.prototype.BJ=function(a,b,c){if(!(a===m||a.count===0)){var d=b.copy();if(isNaN(d.x))d.x=0;if(isNaN(d.y))d.y=0;var e=this.It;e||xf(this,a);for(var g=new z,i=new z(Ka),j=a.f;j.next();){var k=j.key;if(k instanceof U||k.constructor===T){var l=Rf(this,k,a);if(l!==m)g.add({Xg:k,info:j.value,tF:l});else if(!c||k.canMove()){var l=j.value.Zg,n=this.computeMove(k,l.copy().add(d),a);k.location=n;j.value.mA=n.copy().Sr(l)}}else j.key instanceof W&&i.add(j.Td)}for(c=g.f;c.next();){g=
c.value;l=g.info.Zg;n=l.copy().add(g.tF.mA);g.Xg.location=n}for(i=i.f;i.next();){j=i.value;l=j.key;if(l instanceof W)if(l.Fm){c=l.da;g=l.fa;if(this.Cb!==m&&this.kl){j=j.value.Zg;a.add(l,new uf(d));n=b.x-j.x;c=b.y-j.y;l.ek(n,c)}else{n=new E(0,0);if(c!==m){n.set(c.location);var q=a.$(c);q!==m&&n.Sr(q.Zg)}k=new E(0,0);if(g!==m){k.set(g.location);q=a.$(g);q!==m&&k.Sr(q.Zg)}if(c!==m&&g!==m)if(n.$j(k)){j=j.value.Zg;c=n.copy();c.Sr(j);a.add(l,new uf(n));l.ek(c.x,c.y)}else{l.Fm=o;If(l)}else{j=j.value.Zg;
a.add(l,new uf(c!==m?n:g!==m?k:b));n=d.x-j.x;c=d.y-j.y;l.ek(n,c)}}}else if(l.da===m||l.fa===m){j=j.value.Zg;a.add(l,new uf(b));n=d.x-j.x;c=d.y-j.y;l.ek(n,c)}}e||Cf(this,a)}};function Rf(a,b,c){b=b.Sa;if(b!==m){a=Rf(a,b,c);if(a!==m)return a;a=c.$(b);if(a!==m&&a instanceof uf)return a}return m}
function Gf(a){if(a.Kb!==m){var b=a.b,c=o,d=o;if(b!==m){c=b.bb;d=b.J.bb;b.bb=h;b.J.bb=h}for(var e=a.Kb.f;e.next();){var g=e.key;if(g instanceof U||g.constructor===T)g.location=e.value.Zg}for(e=a.Kb.f;e.next();){g=e.key;if(g instanceof W&&g.Fm){var i=e.value.Zg;a.Kb.add(g,new uf);g.ek(-i.x,-i.y)}}if(b!==m){b.bb=c;b.J.bb=d;b.Ki()}}}
vf.prototype.computeMove=vf.prototype.LH=function(a,b){if(a===m)return b;var c=b,c=b;if(this.rn){c=b.copy();if(a!==m){var d=this.b;if(d!==m){var e=d.yu,g=this.Vx,d=g.width,g=g.height,i=this.JB,j=i.x,i=i.y,k=this.IB;if(e!==m){var l=e.mr;if(isNaN(d))d=l.width;if(isNaN(g))g=l.height;e=e.Ux;if(isNaN(j))j=e.x;if(isNaN(i))i=e.y}e=(new E).zl(0,0,d,g,k);c=kd(c.x,c.y,j+e.x,i+e.y,d,g)}}}c=a.Jx!==m?a.Jx(a,b,c):c;g=a.qC;d=g.x;if(isNaN(d))d=a.location.x;g=g.y;if(isNaN(g))g=a.location.y;e=a.kC;j=e.x;if(isNaN(j))j=
a.location.x;e=e.y;if(isNaN(e))e=a.location.y;return new E(Math.max(d,Math.min(c.x,j)),Math.max(g,Math.min(c.y,e)))};function Sf(a,b){if(b===m)return h;var c=b.W;return c===m||c.Da||c instanceof bf||c.sa.Zc||a.Kb&&a.Kb.contains(c)||a.oc&&a.oc.contains(c)?h:o}
vf.prototype.dragOver=vf.prototype.fI=function(a,b,c){var d=this.b;if(d!==m){if(this.kl&&this.Cb!==m){var e=this.b.J;if(e instanceof P){this.Cb.da!==m&&e.Mr(this.Cb.data,"");this.Cb.fa!==m&&e.Pr(this.Cb.data,"")}}e=o;if(this.Et===o){e=d.bb;d.bb=h}var g=o,i=this,j=Tf(d,a,m,function(a){return!Sf(i,a)}),k=d.F;k.ad=j;var l=d.bb;d.bb=h;if(j!==this.Ak){var n=this.Ak;this.tt=n;for(this.Ak=j;n!==m;){var q=n.oy;if(q!==m){if(j===n)break;if(j!==m&&j.Wh(n))break;q(k,n,j);g=h;if(k.ud)break}n=n.U}for(n=this.tt;j!==
m;){q=j.rC;if(q!==m){if(n===j)break;if(n!==m&&n.Wh(j))break;q(k,j,n);g=h;if(k.ud)break}j=j.U}j=this.Ak}if(j===m){q=d.sC;if(q!==m){q(k);g=h}}d.bb=l;g&&d.update();if(this.Et===o)d.bb=e;if((d.Fe||d.Ge)&&(b||c)){d.Gv=d.Xr(a);Uf(d,d.Gv).$j(d.position)?Af(d):Vf(d)}}};
vf.prototype.dropOnto=vf.prototype.qI=function(a){var b=this.b;if(b!==m&&b.J!==m){var c=this;Bf(this);var d=Tf(b,a,m,function(a){return!Sf(c,a)}),a=b.F;a.ad=d;if(d!==m)for(;d!==m;){var e=d.zr;if(e!==m){e(a,d);if(a.ud)break}d=d.U}else{e=b.zr;e!==m&&e(a)}for(a=b.selection.f;a.next();){d=a.value;d instanceof U&&Wf(b,d.pa)}}};
vf.prototype.doMouseMove=vf.prototype.Rg=function(){if(this.Q){var a=this.b;if(a!==m&&this.fl!==m&&this.Kb!==m){var b=o,c=o;if(this.mayCopy()){b=h;Pf(this,o);Qf(this,this.oc)}else if(this.mayMove()){c=h;Ef(this);Qf(this,this.Kb)}else Ef(this);this.dragOver(a.F.C,c,b);pf(a)}}};
vf.prototype.doMouseUp=vf.prototype.Ke=function(){if(this.Q){this.Eo=h;var a=this.b;if(a!==m){var b=o,c=this.mayCopy();if(c&&this.oc!==m){Gf(this);Ef(this);Pf(this,h);Qf(this,this.oc);this.oc!==m&&a.Fy(this.oc.Vi())}else{b=h;if(this.mayMove()){this.Et=o;this.dragOver(a.F.C,h,o);this.Et=h}}this.dropOnto(a.F.C);if(this.Q){this.oc=m;if(b&&this.Kb!==m)for(b=this.Kb.f;b.next();){var d=b.key;if(d instanceof U){d=d.Sa;d!==m&&d.placeholder!==m&&!this.Kb.contains(d)&&d.placeholder.Cx&&d.L()}}a.Ki();Cf(this,
this.Kb);this.oe=c?"Copy":"Move";a.ha(c?"SelectionCopied":"SelectionMoved",a.selection)}this.stopTool()}}};vf.prototype.mayCopy=vf.prototype.uJ=function(){var a=this.b;if(a===m||(a.Ja||a.Nd||!a.Rm||!a.Hh)||!a.F.Xj)return o;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===T)&&b.canCopy())return h}return this.Cb!==m&&this.kl&&this.Cb.canCopy()?h:o};
vf.prototype.mayMove=vf.prototype.wJ=function(){var a=this.b;if(a===m||a.Ja||!a.Tj)return o;for(a=a.selection.f;a.next();){var b=a.value;if((b instanceof U||b.constructor===T)&&b.canMove())return h}return this.Cb!==m&&this.kl&&this.Cb.canMove()?h:o};var Df=new z(vf),yf=m,Ff=m;vf.prototype.mayCopyExternal=vf.prototype.vJ=function(){var a=this.b;return a===m||(!a.KA||a.Ja||a.Nd||!a.Rm)||a.J===m?o:h};
vf.prototype.doSimulatedDragEnter=vf.prototype.sB=function(){this.mayCopyExternal()&&(Df.contains(this)||Df.add(this))};vf.prototype.doSimulatedDragLeave=vf.prototype.tB=function(){Ef(this);var a=this.b;if(a!==m&&a.qa!==this&&this.Bm.V())a.position=this.Bm};vf.prototype.doSimulatedDragOver=vf.prototype.eF=function(){if(this.mayCopyExternal()){var a=this.b;if(a!==m){var b=yf;if(b!==m&&b.Kb!==m){Xf(this,b.Kb.Vi(),o);Qf(this,this.oc);a.Fy(this.oc.Vi());this.dragOver(a.F.C,o,h);pf(a)}}}};
vf.prototype.doSimulatedDrop=vf.prototype.fF=function(){var a=yf;if(a!==m){a.Eo=h;Ef(this);if(this.mayCopyExternal()){var b=this.b;if(b!==m){this.Fb("Drop");Xf(this,a.Kb.Vi(),h);Qf(this,this.oc);this.oc!==m&&b.Fy(this.oc.Vi());this.oe="ExternalCopy";this.dropOnto(b.F.C);this.oc=m;b.ha("ExternalObjectsDropped",b.selection);this.Ui();b.Ki()}}}};
function Xf(a,b,c){if(a.oc===m){var d=a.b;if(!(d===m||d.Ja||d.Nd)){var e=d.J;if(e!==m){e.bb=!c;d.Tq=!c;a.Dh.set(d.F.C);for(var d=d.Kd.copyParts(b,d,h),c=Jf(b),e=new E(c.x+c.width/2,c.y+c.height/2),g=a.Dh,c=new ka(T,uf),b=b.f;b.next();){var i=b.value;if((i instanceof U||i.constructor===T)&&i.canCopy()){var j=i.location,i=d.$(i);i.location=new E(g.x-(e.x-j.x),g.y-(e.y-j.y));i.Sh();c.add(i,new uf(i.location))}}for(d=d.f;d.next();){b=d.value;b instanceof W&&b.canCopy()&&c.add(b,new uf)}a.oc=c;wf(a,c.Vi());
if(a.Cb!==m){c=a.Cb;d=kb(c.ib);c.ek(a.Dh.x-(d.x+d.width/2),a.Dh.y-(d.y+d.height/2))}}}}}
function Yf(){qf.call(this);this.Gw=100;this.cx=o;var a=new W;a.Nn="PATH";var b=new X;b.Mi=h;b.name="PATH";b.stroke="blue";a.add(b);b=new X;b.Fl="Standard";b.fill="blue";a.add(b);a.xd="Tool";this.Ww=a;a=new U;b=new X;b.je="";b.Ta="Rectangle";b.fill=m;b.stroke="magenta";b.Na=2;b.ja=new eb(1,1);a.add(b);a.gk=o;a.xd="Tool";this.Uw=a;this.Vw=b;a=new U;b=new X;b.je="";b.Ta="Rectangle";b.fill=m;b.stroke="magenta";b.Na=2;b.ja=new eb(1,1);a.add(b);a.gk=o;a.xd="Tool";this.Xw=a;this.Yw=b;this.Ew=this.Dw=this.Aw=
this.zw=this.Bw=m;this.Ks=h;this.cE=new ka(Q,"boolean");this.Nz=this.Tw=m}u.H("LinkingBaseTool",Yf);u.na(Yf,qf);Yf.prototype.doStop=Yf.prototype.Gi=function(){this.rf=this.Re=this.qf=this.Qe=this.Db=m;this.Zu.clear();this.le=m};u.a(Yf,"portGravity",Yf.prototype.AC);u.defineProperty(Yf,{AC:"portGravity"},r("Gw"),function(a){if(this.Gw!==a){s&&u.e(a,"number",Yf,"portGravity");this.Gw=a}});u.a(Yf,"validUnconnectedLinks",Yf.prototype.Sn);
u.defineProperty(Yf,{Sn:"validUnconnectedLinks"},r("cx"),function(a){if(this.cx!==a){s&&u.e(a,"boolean",Yf,"validUnconnectedLinks");this.cx=a}});u.a(Yf,"temporaryLink",Yf.prototype.bh);u.defineProperty(Yf,{bh:"temporaryLink"},r("Ww"),function(a){if(this.Ww!==a){s&&u.c(a,W,Yf,"temporaryLink");this.Ww=a}});u.a(Yf,"temporaryFromNode",Yf.prototype.me);u.defineProperty(Yf,{me:"temporaryFromNode"},r("Uw"),function(a){if(this.Uw!==a){s&&u.c(a,U,Yf,"temporaryFromNode");this.Uw=a}});
u.a(Yf,"temporaryFromPort",Yf.prototype.Dl);u.defineProperty(Yf,{Dl:"temporaryFromPort"},r("Vw"),function(a){if(this.Vw!==a){s&&u.c(a,Q,Yf,"temporaryFromPort");this.Vw=a}});u.a(Yf,"temporaryToNode",Yf.prototype.ne);u.defineProperty(Yf,{ne:"temporaryToNode"},r("Xw"),function(a){if(this.Xw!==a){s&&u.c(a,U,Yf,"temporaryToNode");this.Xw=a}});u.a(Yf,"temporaryToPort",Yf.prototype.El);
u.defineProperty(Yf,{El:"temporaryToPort"},r("Yw"),function(a){if(this.Yw!==a){s&&u.c(a,Q,Yf,"temporaryToPort");this.Yw=a}});u.a(Yf,"originalLink",Yf.prototype.Db);u.defineProperty(Yf,{Db:"originalLink"},r("Bw"),function(a){if(this.Bw!==a){s&&a!==m&&u.c(a,W,Yf,"originalLink");this.Bw=a}});u.a(Yf,"originalFromNode",Yf.prototype.Qe);u.defineProperty(Yf,{Qe:"originalFromNode"},r("zw"),function(a){if(this.zw!==a){s&&a!==m&&u.c(a,U,Yf,"originalFromNode");this.zw=a}});u.a(Yf,"originalFromPort",Yf.prototype.qf);
u.defineProperty(Yf,{qf:"originalFromPort"},r("Aw"),function(a){if(this.Aw!==a){s&&a!==m&&u.c(a,Q,Yf,"originalFromPort");this.Aw=a}});u.a(Yf,"originalToNode",Yf.prototype.Re);u.defineProperty(Yf,{Re:"originalToNode"},r("Dw"),function(a){if(this.Dw!==a){s&&a!==m&&u.c(a,U,Yf,"originalToNode");this.Dw=a}});u.a(Yf,"originalToPort",Yf.prototype.rf);u.defineProperty(Yf,{rf:"originalToPort"},r("Ew"),function(a){if(this.Ew!==a){s&&a!==m&&u.c(a,Q,Yf,"originalToPort");this.Ew=a}});
u.m(Yf,{wd:"isForwards"},r("Ks"));u.m(Yf,{Zu:"validPortsCache"},r("cE"));u.a(Yf,"targetPort",Yf.prototype.le);u.defineProperty(Yf,{le:"targetPort"},r("Tw"),function(a){if(this.Tw!==a){s&&a!==m&&u.c(a,Q,Yf,"targetPort");this.Tw=a}});Yf.prototype.copyPortProperties=Yf.prototype.SH=function(a,b,c,d,e){if(!(a===m||b===m||c===m||d===m)){d.ja=b.pa.size;if(e){d.Wa=b.Wa;d.jk=b.jk}else{d.Ua=b.Ua;d.ak=b.ak}c.nf=Zb;c.location=b.tb(Zb);d.Ka=b.ln();c.kf()}};
Yf.prototype.setNoTargetPortProperties=Yf.prototype.aK=function(a,b){if(b!==m){b.ja=new eb(1,1);b.Ua=Tb;b.Wa=Tb}if(a!==m)a.location=this.b.F.C};
Yf.prototype.doMouseMove=Yf.prototype.Rg=function(){if(this.Q){var a=this.b;if(a!==m){this.le=this.findTargetPort(this.wd);if(this.le!==m){var b=this.le.W;if(b instanceof U){this.wd?this.copyPortProperties(b,this.le,this.ne,this.El,h):this.copyPortProperties(b,this.le,this.me,this.Dl,o);pf(a);return}}this.wd?this.setNoTargetPortProperties(this.ne,this.El):this.setNoTargetPortProperties(this.me,this.Dl);pf(a)}}};
Yf.prototype.findValidLinkablePort=Yf.prototype.GI=function(a,b){if(a===m)return m;var c=a.W;if(!(c instanceof U))return m;for(;a!==m;){var d=b?a.Qy:a.Rx;if(d===h&&(a.je!==m||a instanceof U)&&(b?this.isValidTo(c,a):this.isValidFrom(c,a)))return a;if(d===o)break;a=a.U}return m};
Yf.prototype.findTargetPort=Yf.prototype.BI=function(a){for(var b=this.b,c=b.F.C,d=this.AC,e=this,g=b.jn(c,d,function(b){return e.findValidLinkablePort(b,a)},m),b=d*d,d=m,g=g.f;g.next();){var i=g.value,j=i.W;if(j instanceof U){var k=i.tb(Zb),l=c.x-k.x,k=c.y-k.y,l=l*l+k*k;if(l<b){k=this.Zu.$(i);if(k!==m){if(k){d=i;b=l}}else if(a&&this.isValidLink(this.Qe,this.qf,j,i)||!a&&this.isValidLink(j,i,this.Re,this.rf)){this.Zu.add(i,h);d=i;b=l}else this.Zu.add(i,o)}}}if(d!==m){c=d.W;if(c instanceof U&&(c.sa===
m||c.sa.$k))return d}return m};Yf.prototype.isValidFrom=Yf.prototype.hJ=function(a,b){if(a===m||b===m)return this.Sn;if(this.b.qa===this&&(a.sa!==m&&!a.sa.$k||b.Rx!==h))return o;var c=b.DB;if(c<Infinity){if(this.Db!==m&&a===this.Qe&&b===this.qf)return h;var d=b.je;d===m&&(d="");if(a.Ox(d).count>=c)return o}return h};
Yf.prototype.isValidTo=Yf.prototype.kJ=function(a,b){if(a===m||b===m)return this.Sn;if(this.b.qa===this&&(a.sa!==m&&!a.sa.$k||b.Qy!==h))return o;var c=b.mD;if(c<Infinity){if(this.Db!==m&&a===this.Re&&b===this.rf)return h;var d=b.je;d===m&&(d="");if(a.Ox(d).count>=c)return o}return h};Yf.prototype.isInSameNode=Yf.prototype.dJ=function(a,b){if(a===m||b===m)return o;if(a===b)return h;var c=a.W,d=b.W;return c!==m&&c===d};
Yf.prototype.isLinked=Yf.prototype.fJ=function(a,b){if(a===m||b===m)return o;var c=a.W;if(!(c instanceof U))return o;var d=a.je;d===m&&(d="");var e=b.W;if(!(e instanceof U))return o;var g=b.je;g===m&&(g="");for(e=e.hf(g);e.next();){g=e.value;if(g.da===c&&g.Ug===d)return h}return o};
Yf.prototype.isValidLink=Yf.prototype.iJ=function(a,b,c,d){return!this.isValidFrom(a,b)||!this.isValidTo(c,d)||b!==m&&d!==m&&((!b.CB||!d.lD)&&this.isInSameNode(b,d)||(!b.BB||!d.kD)&&this.isLinked(b,d))||this.Db!==m&&(a!==m&&a.ql(this.Db)||c!==m&&c.ql(this.Db))||a!==m&&c!==m&&(a.data===m&&c.data!==m||a.data!==m&&c.data===m)||!Zf(this,a,c,this.Db)?o:this.ky!==m?this.ky(a,b,c,d,this.Db):h};
function Zf(a,b,c,d){if(b===m||c===m)return o;var e=a.b.zD;if(e!==$f){if(e===ag){for(e=c.ge;e.next();){var g=e.value;if(g!==d&&g.fa===c)return o}return!bg(a,b,c,d)}if(e===cg){for(e=b.ge;e.next();){g=e.value;if(g!==d&&g.da===b)return o}return!bg(a,b,c,d)}if(e===dg){if(b===c)a=h;else{e=new la(U);e.add(c);a=eg(a,e,b,c,d)}return!a}if(e===fg)return!bg(a,b,c,d);if(e===gg){if(b===c)a=h;else{e=new la(U);e.add(c);a=ig(a,e,b,c,d)}return!a}}return h}
function bg(a,b,c,d){if(b===c)return h;if(b===m||c===m)return o;for(var e=b.ge;e.next();){var g=e.value;if(g!==d&&g.fa===b){g=g.da;if(g!==b&&bg(a,g,c,d))return h}}return o}function eg(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return o;b.add(c);for(var g=c.ge;g.next();){var i=g.value;if(i!==e&&i.fa===c){i=i.da;if(i!==c&&eg(a,b,i,d,e))return h}}return o}
function ig(a,b,c,d,e){if(c===d)return h;if(c===m||d===m||b.contains(c))return o;b.add(c);for(var g=c.ge;g.next();){var i=g.value;if(i!==e){var j=i.da,i=i.fa,j=j===c?i:j;if(j!==c&&ig(a,b,j,d,e))return h}}return o}u.a(Yf,"linkValidation",Yf.prototype.ky);u.defineProperty(Yf,{ky:"linkValidation"},r("Nz"),function(a){a!==m&&u.e(a,"function",Yf,"linkValidation");this.Nz=a});function oa(){Yf.call(this);this.name="Linking";this.Ev={};this.Dv=m;this.O=jg;this.Ow=this.Nw=m}u.H("LinkingTool",oa);u.na(oa,Yf);
var jg;oa.Either=jg=u.l(oa,"Either",0);var kg;oa.ForwardsOnly=kg=u.l(oa,"ForwardsOnly",0);var lg;oa.BackwardsOnly=lg=u.l(oa,"BackwardsOnly",0);u.a(oa,"archetypeLinkData",oa.prototype.MA);u.defineProperty(oa,{MA:"archetypeLinkData"},r("Ev"),function(a){if(this.Ev!==a){a!==m&&u.c(a,Object,oa,"archetypeLinkData");this.Ev=a}});u.a(oa,"archetypeLabelNodeData",oa.prototype.LA);
u.defineProperty(oa,{LA:"archetypeLabelNodeData"},r("Dv"),function(a){if(this.Dv!==a){a!==m&&u.c(a,Object,oa,"archetypeLabelNodeData");var b=this.b;if(b!==m){b=b.J;b!==m&&!(a instanceof U)&&!b.ey(a)&&u.g("CommandHandler.archetypeLabelNodeData must be either a Node or a data object for which GraphLinksModel.isLinkLabelForNodeData is true: "+a)}this.Dv=a}});u.a(oa,"direction",oa.prototype.direction);
u.defineProperty(oa,{direction:"direction"},r("O"),function(a){if(this.O!==a){s&&u.Ra(a,oa,oa,"direction");this.O=a}});u.a(oa,"startObject",oa.prototype.Ky);u.defineProperty(oa,{Ky:"startObject"},r("Nw"),function(a){if(this.Nw!==a){s&&a!==m&&u.c(a,Q,oa,"startObject");this.Nw=a}});u.m(oa,{Vu:"startPort"},r("Ow"));
oa.prototype.canStart=oa.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||(a.Ja||a.Nd)||!a.$k)return o;var b=a.J;return b===m||!(b instanceof P)||!a.F.left||a.qa!==this&&!this.isBeyondDragSize()?o:this.findLinkablePort()!==m};
oa.prototype.findLinkablePort=oa.prototype.yI=function(){var a=this.b;if(a===m)return m;var b=this.Ky;b===m&&(b=a.Yc(a.cc.C,m,m));if(b===m||!(b.W instanceof U))return m;var c=this.direction;if(c===jg||c===kg){a=this.findValidLinkablePort(b,o);if(a!==m){this.Ks=h;return a}}if(c===jg||c===lg){a=this.findValidLinkablePort(b,h);if(a!==m){this.Ks=o;return a}}return m};
oa.prototype.doActivate=oa.prototype.Rh=function(){var a=this.b;if(a!==m){if(this.Vu===m)this.Ow=this.findLinkablePort();if(this.Vu!==m){this.Fb(this.name);a.Bc=h;a.pc="hand";a.add(this.me);a.add(this.ne);if(this.wd){this.qf=this.Vu;var b=this.qf.W;if(b instanceof U)this.Qe=b;this.copyPortProperties(this.Qe,this.qf,this.me,this.Dl,o)}else{this.rf=this.Vu;b=this.rf.W;if(b instanceof U)this.Re=b;this.copyPortProperties(this.Re,this.rf,this.ne,this.El,h)}if(this.bh){if(this.me!==m)this.bh.da=this.me;
if(this.ne!==m)this.bh.fa=this.ne;a.add(this.bh)}this.Q=h}}};oa.prototype.doDeactivate=oa.prototype.Zj=function(){this.Q=o;var a=this.b;if(a!==m){a.remove(this.bh);a.remove(this.me);a.remove(this.ne);a.Bc=o;a.pc="";this.Ui()}};oa.prototype.doStop=oa.prototype.Gi=function(){Yf.prototype.Gi.call(this);this.Ky=this.Ow=m};
oa.prototype.doMouseUp=oa.prototype.Ke=function(){if(this.Q){var a=this.b;if(a===m)return;var b=this.oe=m,c=m,d=m,e=m,g=this.le=this.findTargetPort(this.wd),i=m;if(g!==m){i=g.W;if(i instanceof U)if(this.wd){if(this.Qe!==m){b=this.Qe;c=this.qf}d=i;e=g}else{b=i;c=g;if(this.Re!==m){d=this.Re;e=this.rf}}}else if(this.wd){if(this.Qe!==m&&this.Sn){b=this.Qe;c=this.qf}}else if(this.Re!==m&&this.Sn){d=this.Re;e=this.rf}if(b!==m||d!==m){b=this.insertLink(b,c,d,e);if(b!==m){if(g===m)this.wd?b.YE=a.F.C:b.XE=
a.F.C;a.Hd&&a.select(b);this.oe=this.name;a.ha("LinkDrawn",b)}else a.J.UA()}}this.stopTool()};
oa.prototype.insertLink=oa.prototype.YI=function(a,b,c,d){var e=this.b;if(e===m)return m;var g=e.J;if(g===m||!(g instanceof P))return m;b===m&&(b=a);b=b.je;b===m&&(b="");d===m&&(d=c);var i=d.je;i===m&&(i="");d=this.MA;if(d instanceof W){nf(d);g=d.copy();if(g instanceof W){g.da=a;g.Ug=b;g.fa=c;g.Zh=i;e.add(g);return g}}else if(d!==m){d=g.cB(d);if(d instanceof Object){g.Su(d,g.Vb(a.data));g.Mr(d,b);g.Tu(d,g.Vb(c.data));g.Pr(d,i);g.HA(d);a=this.LA;if(a!==m&&g.ey(a)){a=g.$m(a);if(a instanceof Object){g.Vt(a);
a=g.Vb(a);a!==f&&g.GA(d,a)}}return g=e.Hi(d)}}return m};function mg(){Yf.call(this);this.name="Relinking";var a=new X;a.Ta="Diamond";a.ja=new eb(8,8);a.fill="cyan";a.cursor="pointer";a.$g=0;this.Cz=a;a=new X;a.Ta="Diamond";a.ja=new eb(8,8);a.fill="cyan";a.cursor="pointer";a.$g=-1;this.xA=a;this.Sb=m;this.$z=new J}u.H("RelinkingTool",mg);u.na(mg,Yf);
mg.prototype.updateAdornments=mg.prototype.$h=function(a){if(a instanceof W){var b=m,c="RelinkFrom";if(a.Da){var d=a.Mn;if(d!==m&&a.gb()&&a.canRelinkFrom()&&d.dk()&&d.pa.V()){b=a.dn(c);if(b===m){b=this.makeAdornment(d,o);b.hd=c}b!==m&&b.L()}a.Lm(c,b)}else a.xl(c);b=m;c="RelinkTo";if(a.Da){d=a.Mn;if(d!==m&&a.gb()&&a.canRelinkTo()&&d.dk()&&d.pa.V()){b=a.dn(c);if(b===m){b=this.makeAdornment(d,h);b.hd=c}b!==m&&b.L()}a.Lm(c,b)}else a.xl(c)}};
mg.prototype.makeAdornment=mg.prototype.ly=function(a,b){var c=new bf;c.type=ng;var d=b?this.GG:this.oF;d!==m&&c.add(d.copy());c.Gd=a;return c};u.defineProperty(mg,{oF:"fromHandleArchetype"},r("Cz"),function(a){a&&u.c(a,Q,mg,"fromHandleArchetype");this.Cz=a});u.defineProperty(mg,{GG:"toHandleArchetype"},r("xA"),function(a){a&&u.c(a,Q,mg,"toHandleArchetype");this.xA=a});u.m(mg,{handle:"handle"},r("Sb"));
mg.prototype.canStart=mg.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||(a.Ja||a.Nd)||!a.yi)return o;var b=a.J;if(b===m||!(b instanceof P)||!a.F.left)return o;b=this.findToolHandleAt(a.cc.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.cc.C,"RelinkTo"));return b!==m};
mg.prototype.doActivate=mg.prototype.Rh=function(){var a=this.b;if(a!==m){var b=this.findToolHandleAt(a.cc.C,"RelinkFrom");b===m&&(b=this.findToolHandleAt(a.cc.C,"RelinkTo"));if(b!==m){var c=b.W;if(c instanceof bf&&c.Pm instanceof W){this.Sb=b;this.Fb(this.name);a.Bc=h;a.pc="hand";this.Ks=c===m||c.hd==="RelinkTo";this.Db=c.Pm;this.qf=this.Db.Ac;this.Qe=this.Db.da;this.rf=this.Db.md;this.Re=this.Db.fa;this.$z=this.Db.pa;a.add(this.me);a.add(this.ne);this.wd?this.copyPortProperties(this.Qe,this.qf,
this.me,this.Dl,h):this.copyPortProperties(this.Re,this.rf,this.ne,this.El,o);if(this.Db!==m&&this.Db.Y>0){if(this.Qe===m){if(this.Dl!==m)this.Dl.ja=new eb(0,0);if(this.me!==m)this.me.location=this.Db.h(0)}if(this.Re===m){if(this.El!==m)this.El.ja=new eb(0,0);if(this.ne!==m)this.ne.location=this.Db.h(this.Db.Y-1)}}if(this.bh!==m){if(this.me!==m)this.bh.da=this.me;if(this.ne!==m)this.bh.fa=this.ne;a.add(this.bh)}this.Q=h}}}};
mg.prototype.doDeactivate=mg.prototype.Zj=function(){this.Q=o;var a=this.b;if(a!==m){a.remove(this.bh);a.remove(this.me);a.remove(this.ne);a.Bc=o;a.pc="";this.Ui()}};mg.prototype.doStop=mg.prototype.Gi=function(){Yf.prototype.Gi.call(this);this.Sb=m};
mg.prototype.doMouseUp=mg.prototype.Ke=function(){if(this.Q){var a=this.b;if(a===m)return;this.oe=m;var b=this.Qe,c=this.qf,d=this.Re,e=this.rf,g=this.Db;this.le=this.findTargetPort(this.wd);if(this.le!==m){var i=this.le.W;if(i instanceof U)if(this.wd){d=i;e=this.le}else{b=i;c=this.le}}else if(this.Sn)if(this.wd)e=d=m;else c=b=m;else g=m;if(g!==m){this.reconnectLink(g,this.wd?d:b,this.wd?e:c,this.wd);if(this.le===m){this.wd?g.YE=a.F.C:g.XE=a.F.C;If(g)}if(a.Hd)g.Da=h;this.oe=this.name;a.ha("LinkRelinked",
g,this.wd?this.rf:this.qf)}og(this.Db,this.$z)}this.stopTool()};mg.prototype.reconnectLink=mg.prototype.NJ=function(a,b,c,d){var e=this.b;if(e===m)return o;var g=b!==m?b.data:m,g=g!==m?e.J.Vb(g):f,c=c.je!==m?c.je:"",a=a.data;if(a!==m&&g!==f){b=e.J;if(b===m||!(b instanceof P))return o;if(d){b.Tu(a,g);b.Pr(a,c)}else{b.Su(a,g);b.Mr(a,c)}}else if(d){this.Db.fa=b;this.Db.Zh=c}else{this.Db.da=b;this.Db.Ug=c}return h};
function pg(){qf.call(this);this.name="LinkReshaping";var a=new X;a.Ta="Rectangle";a.ja=new eb(6,6);a.fill="cyan";this.pj=a;this.Cw=this.bA=this.Cv=this.Sb=m}u.H("LinkReshapingTool",pg);u.na(pg,qf);var qg;pg.None=qg=u.l(pg,"None",0);var rg;pg.Horizontal=rg=u.l(pg,"Horizontal",1);var sg;pg.Vertical=sg=u.l(pg,"Vertical",2);var tg;pg.All=tg=u.l(pg,"All",3);
pg.prototype.updateAdornments=pg.prototype.$h=function(a){if(a instanceof W){var b=m;if(a.Da){var c=a.path;if(c!==m&&a.gb()&&a.canReshape()&&c.dk()&&c.pa.V()){b=a.dn(this.name);if(b===m){b=this.makeAdornment(c);b.hd=this.name}if(b!==m){b.location=a.position;b.L()}}a.Lm(this.name,b)}else a.xl(this.name)}};
pg.prototype.makeAdornment=pg.prototype.ly=function(a){var b=new bf;b.type=ng;var c=a.W,d=c.Y,e=ug(c);if(c.ib!==m&&d>2){for(var d=c.tu,g=c.hy,i=d+1;i<=g-1;i++){var j=this.makeHandle(a,i);if(j!==m){j.$g=i;if(i!==d)if(i===d+1&&e){var k=c.h(d),l=c.h(d+1);Ua(k.x,l.x)&&Ua(k.y,l.y)&&(l=c.h(d-1));if(Ua(k.x,l.x)){j.Ln=sg;j.cursor="n-resize"}else if(Ua(k.y,l.y)){j.Ln=rg;j.cursor="w-resize"}}else if(i===g-1&&e){k=c.h(g-1);l=c.h(g);Ua(k.x,l.x)&&Ua(k.y,l.y)&&(k=c.h(g+1));if(Ua(k.x,l.x)){j.Ln=sg;j.cursor="n-resize"}else if(Ua(k.y,
l.y)){j.Ln=rg;j.cursor="w-resize"}}else if(i!==g){j.Ln=tg;j.cursor="move"}b.add(j)}}b.Gd=a}return b};pg.prototype.makeHandle=pg.prototype.QF=function(){var a=this.nr;return a===m?m:a.copy()};u.defineProperty(pg,{nr:"handleArchetype"},r("pj"),function(a){a&&u.c(a,Q,pg,"handleArchetype");this.pj=a});u.m(pg,{handle:"handle"},r("Sb"));u.m(pg,{Om:"adornedLink"},r("Cv"));
pg.prototype.canStart=pg.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Ja||!a.Tm?o:this.findToolHandleAt(a.cc.C,this.name)!==m};pg.prototype.doActivate=pg.prototype.Rh=function(){var a=this.b;if(a!==m){this.Sb=this.findToolHandleAt(a.cc.C,this.name);if(this.Sb!==m){var b=this.Sb.W.Pm;if(b instanceof W){this.Cv=b;a.Bc=h;this.bA=b.h(this.Sb.$g);this.Cw=b.ib.copy();this.Fb(this.name);this.Q=h}}}};
pg.prototype.doDeactivate=pg.prototype.Zj=function(){this.Ui();this.Cw=this.bA=this.Cv=this.Sb=m;var a=this.b;if(a!==m)a.Bc=o;this.Q=o};pg.prototype.doCancel=pg.prototype.Fi=function(){var a=this.Om;if(a!==m)a.ib=this.Cw;this.stopTool()};pg.prototype.doMouseMove=pg.prototype.Rg=function(){var a=this.b;if(this.Q&&a!==m){a=this.computeReshape(a.F.C);this.reshape(a)}};
pg.prototype.doMouseUp=pg.prototype.Ke=function(){var a=this.b;if(this.Q&&a!==m){var b=this.computeReshape(a.F.C);this.reshape(b);b=this.Om;if(b!==m)b.ib=this.Om.ib;a.Ki();this.oe=this.name;a.ha("LinkReshaped",this.Om)}this.stopTool()};
pg.prototype.reshape=pg.prototype.VJ=function(a){var b=this.Om;b.ik();var c=this.handle.$g,d=this.handle.Ln;if(ug(b))if(c===b.tu+1){c=b.tu+1;if(d==sg){b.w(c,new E(b.h(c-1).x,a.y));b.w(c+1,new E(b.h(c+2).x,a.y))}else if(d==rg){b.w(c,new E(a.x,b.h(c-1).y));b.w(c+1,new E(a.x,b.h(c+2).y))}}else if(c===b.hy-1){c=b.hy-1;if(d===sg){b.w(c-1,new E(b.h(c-2).x,a.y));b.w(c,new E(b.h(c+1).x,a.y))}else if(d===rg){b.w(c-1,new E(a.x,b.h(c-2).y));b.w(c,new E(a.x,b.h(c+1).y))}}else{var d=c,e=b.h(d),g=b.h(d-1),i=b.h(d+
1);if(Ua(g.x,e.x)&&Ua(e.y,i.y)){if(Ua(g.x,b.h(d-2).x)&&!Ua(g.y,b.h(d-2).y)){e=b.ib;e.ec(d,new E(a.x,g.y));b.ib=e;c++;d++}else b.w(d-1,new E(a.x,g.y));if(Ua(i.y,b.h(d+2).y)&&!Ua(i.x,b.h(d+2).x)){e=b.ib;e.ec(d+1,new E(i.x,a.y));b.ib=e}else b.w(d+1,new E(i.x,a.y))}else if(Ua(g.y,e.y)&&Ua(e.x,i.x)){if(Ua(g.y,b.h(d-2).y)&&!Ua(g.x,b.h(d-2).x)){e=b.ib;e.ec(d,new E(g.x,a.y));b.ib=e;c++;d++}else b.w(d-1,new E(g.x,a.y));if(Ua(i.x,b.h(d+2).x)&&!Ua(i.y,b.h(d+2).y)){e=b.ib;e.ec(d+1,new E(a.x,i.y));b.ib=e}else b.w(d+
1,new E(a.x,i.y))}else if(Ua(g.x,e.x)&&Ua(e.x,i.x)){if(Ua(g.x,b.h(d-2).x)&&!Ua(g.y,b.h(d-2).y)){e=b.ib;e.ec(d,new E(a.x,g.y));b.ib=e;c++;d++}else b.w(d-1,new E(a.x,g.y));if(Ua(i.x,b.h(d+2).x)&&!Ua(i.y,b.h(d+2).y)){e=b.ib;e.ec(d+1,new E(a.x,i.y));b.ib=e}else b.w(d+1,new E(a.x,i.y))}else if(Ua(g.y,e.y)&&Ua(e.y,i.y)){if(Ua(g.y,b.h(d-2).y)&&!Ua(g.x,b.h(d-2).x)){e=b.ib;e.ec(d,new E(g.x,a.y));b.ib=e;c++;d++}else b.w(d-1,new E(g.x,a.y));if(Ua(i.y,b.h(d+2).y)&&!Ua(i.x,b.h(d+2).x)){e=b.ib;e.ec(d+1,new E(i.x,
a.y));b.ib=e}else b.w(d+1,new E(i.x,a.y))}b.w(c,a.copy())}else b.w(c,a.copy());b.Mh()};pg.prototype.computeReshape=pg.prototype.MH=function(a){var b=this.Om,c=this.handle.$g;switch(this.handle.Ln){case tg:return a;case sg:b=b.h(c);return new E(b.x,a.y);case rg:b=b.h(c);return new E(a.x,b.y);default:case qg:return b.h(c)}};
function Bg(){qf.call(this);this.name="Resizing";this.Hc=(new eb(1,1)).freeze();this.Of=(new eb(9999,9999)).freeze();this.bi=(new eb(NaN,NaN)).freeze();this.Gk=o;this.ta=m;var a=new X;a.xi=Zb;a.Ta="Rectangle";a.ja=new eb(6,6);a.fill="cyan";a.stroke="black";a.Na=1;a.cursor="pointer";this.pj=a;this.Sb=m;this.Pp=0;this.VD=new J;this.yw=new eb;this.aA=new E;this.Zv=new eb(1,1)}u.H("ResizingTool",Bg);u.na(Bg,qf);
Bg.prototype.updateAdornments=Bg.prototype.$h=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Da){var c=a.nG;if(c!==m&&a.gb()&&a.canResize()&&c.dk()&&c.pa.V()){b=a.dn(this.name);if(b===m){b=this.makeAdornment(c);b.hd=this.name}if(b!==m){var d=c.ln();b.Ka=d;b.location=c.tb(Vb);var e=b.placeholder;if(e!==m){var g=c.ml(),c=c.ma;e.ja=new eb(c.width*g,c.height*g)}Gg(this,b,d)}}a.Lm(this.name,b)}else a.xl(this.name)}};
Bg.prototype.makeAdornment=Bg.prototype.ly=function(a){var b=m,b=a.W.MC;if(b===m){b=new bf;b.type=Hg;var c=new Ig;c.Mi=h;b.add(c);b.add(this.makeHandle(a,Vb));b.add(this.makeHandle(a,Yb));b.add(this.makeHandle(a,fc));b.add(this.makeHandle(a,dc));b.add(this.makeHandle(a,gc));b.add(this.makeHandle(a,oc));b.add(this.makeHandle(a,pc));b.add(this.makeHandle(a,nc))}else{nf(b);b=b.copy();if(!(b instanceof bf))return m}b.Gd=a;return b};
Bg.prototype.makeHandle=Bg.prototype.QF=function(a,b){var c=this.nr;if(c===m)return m;c=c.copy();c.lb=b;return c};
function Gg(a,b,c){if(b!==m)if(!Qb(b.lb)&&b.cursor!=="")a:{a=b.lb;Pb(a)&&(a=Zb);if(a.x<=0)c=a.y<=0?c+225:a.y>=1?c+135:c+180;else if(a.x>=1)a.y<=0?c=c+315:a.y>=1&&(c=c+45);else if(a.y<=0)c=c+270;else if(a.y>=1)c=c+90;else break a;c<0?c=c+360:c>=360&&(c=c-360);b.cursor=c<22.5?"e-resize":c<67.5?"se-resize":c<112.5?"s-resize":c<157.5?"sw-resize":c<202.5?"w-resize":c<247.5?"nw-resize":c<292.5?"n-resize":c<337.5?"ne-resize":"e-resize"}else if(b instanceof v)for(b=b.elements;b.next();)Gg(a,b.value,c)}
u.defineProperty(Bg,{nr:"handleArchetype"},r("pj"),function(a){a&&u.c(a,Q,Bg,"handleArchetype");this.pj=a});u.m(Bg,{handle:"handle"},r("Sb"));u.m(Bg,{Gd:"adornedObject"},r("ta"));Bg.prototype.canStart=Bg.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Ja||!a.Um||!a.F.left?o:this.findToolHandleAt(a.cc.C,this.name)!==m?h:o};
Bg.prototype.doActivate=Bg.prototype.Rh=function(){var a=this.b;if(a!==m){this.Sb=this.findToolHandleAt(a.cc.C,this.name);if(this.Sb!==m){this.ta=this.Sb.W.Gd;this.Pp=this.ta.Ka;this.VD.set(this.ta.ma);this.aA.set(this.ta.W.location);this.yw.set(this.ta.ja);this.Zv=this.computeCellSize();this.Hc=this.computeMinSize();this.Of=this.computeMaxSize();a.Bc=h;this.Fb(this.name);this.Q=h}}};
Bg.prototype.doDeactivate=Bg.prototype.Zj=function(){var a=this.b;if(a!==m){this.Ui();this.ta=this.Sb=m;this.Q=a.Bc=o}};Bg.prototype.doCancel=Bg.prototype.Fi=function(){this.ta.ja=this.yw;this.ta.W.location=this.aA;this.stopTool()};Bg.prototype.doMouseMove=Bg.prototype.Rg=function(){var a=this.b;if(this.Q&&a!==m){var b=this.Hc,c=this.Of,d=this.Zv,e=this.ta.GB(a.F.C),g=this.ta.kn;if(g===Jg)g=this.ta.ua.Hb;b=this.computeResize(e,this.Sb.lb,b,c,d,!(g===Kg||g===Lg||a.F.shift));this.resize(b);Mg(a)}};
Bg.prototype.doMouseUp=Bg.prototype.Ke=function(){var a=this.b;if(this.Q&&a!==m){var b=this.Hc,c=this.Of,d=this.Zv,e=this.ta.GB(a.F.C),g=this.ta.kn;if(g===Jg)g=this.ta.ua.Hb;b=this.computeResize(e,this.Sb.lb,b,c,d,!(g===Kg||g===Lg||a.F.shift));this.resize(b);a.Ki();this.oe=this.name;a.ha("PartResized",this.ta,this.yw)}this.stopTool()};
Bg.prototype.resize=Bg.prototype.WJ=function(a){var b=this.b;if(b!==m){var c=this.ta.W,d=c.position.copy(),e=this.ta.ma.copy(),g=this.ta.ln();g>=360?g=g-360:g<0&&(g=g+360);var i=Math.PI*g/180,j=Math.cos(i),i=Math.sin(i),k=a.width-e.width,e=a.height-e.height,l=g>90&&g<270?1:0;d.x=d.x+((a.x+k*l)*j-(a.y+e*(g>0&&g<180?1:0))*i);d.y=d.y+((a.x+k*(g>180&&g<360?1:0))*i+(a.y+e*l)*j);this.ta.ja=a.size;c.Sh();c.position=d;pf(b)}};
Bg.prototype.computeResize=Bg.prototype.NH=function(a,b,c,d,e,g){Pb(b)&&(b=Zb);var i=this.ta.ma,j=i.x,k=i.y,l=i.x+i.width,n=i.y+i.height,q=1;if(!g){var q=i.width,p=i.height;q<=0&&(q=1);p<=0&&(p=1);q=p/q}a=kd(a.x,a.y,j,k,e.width,e.height);e=i.copy();if(b.x<=0)if(b.y<=0){e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=Math.max(l-e.x,c.width);e.y=Math.max(a.y,n-d.height);e.y=Math.min(e.y,n-c.height);e.height=Math.max(n-e.y,c.height);if(!g){a=e.height/e.width;if(q<a){e.height=q*e.width;
e.y=n-e.height}else{e.width=e.height/q;e.x=l-e.width}}}else if(b.y>=1){e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=Math.max(l-e.x,c.width);e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){a=e.height/e.width;if(q<a)e.height=q*e.width;else{e.width=e.height/q;e.x=l-e.width}}}else{e.x=Math.max(a.x,l-d.width);e.x=Math.min(e.x,l-c.width);e.width=l-e.x;if(!g){e.height=q*e.width;e.y=k+0.5*(n-k-e.height)}}else if(b.x>=1)if(b.y<=0){e.width=Math.max(Math.min(a.x-j,d.width),c.width);
e.y=Math.max(a.y,n-d.height);e.y=Math.min(e.y,n-c.height);e.height=Math.max(n-e.y,c.height);if(!g){a=e.height/e.width;if(q<a){e.height=q*e.width;e.y=n-e.height}else e.width=e.height/q}}else if(b.y>=1){e.width=Math.max(Math.min(a.x-j,d.width),c.width);e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){a=e.height/e.width;q<a?e.height=q*e.width:e.width=e.height/q}}else{e.width=Math.max(Math.min(a.x-j,d.width),c.width);if(!g){e.height=q*e.width;e.y=k+0.5*(n-k-e.height)}}else if(b.y<=0){e.y=Math.max(a.y,
n-d.height);e.y=Math.min(e.y,n-c.height);e.height=n-e.y;if(!g){e.width=e.height/q;e.x=j+0.5*(l-j-e.width)}}else if(b.y>=1){e.height=Math.max(Math.min(a.y-k,d.height),c.height);if(!g){e.width=e.height/q;e.x=j+0.5*(l-j-e.width)}}return e};Bg.prototype.computeMinSize=Bg.prototype.KH=function(){var a=this.ta.Pd.copy(),b=this.Pd;if(!isNaN(b.width)&&b.width>a.width)a.width=b.width;if(!isNaN(b.height)&&b.height>a.height)a.height=b.height;return a};
Bg.prototype.computeMaxSize=Bg.prototype.JH=function(){var a=this.ta.yd.copy(),b=this.yd;if(!isNaN(b.width)&&b.width<a.width)a.width=b.width;if(!isNaN(b.height)&&b.height<a.height)a.height=b.height;return a};
Bg.prototype.computeCellSize=Bg.prototype.HH=function(){var a=new eb(NaN,NaN),b=this.ta.W;if(b){var c=b.NC;if(!isNaN(c.width)&&c.width>0)a.width=c.width;if(!isNaN(c.height)&&c.height>0)a.height=c.height}c=this.Wj;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&!isNaN(c.height)&&c.height>0)a.height=c.height;b=this.b;if((isNaN(a.width)||isNaN(a.height))&&b){c=b.Mb.ae;if(c!==m&&c.rn){c=c.Vx;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&
!isNaN(c.height)&&c.height>0)a.height=c.height}b=b.yu;if(b!==m&&b.visible&&this.rn){c=b.mr;if(isNaN(a.width)&&!isNaN(c.width)&&c.width>0)a.width=c.width;if(isNaN(a.height)&&!isNaN(c.height)&&c.height>0)a.height=c.height}}if(isNaN(a.width)||a.width===0||a.width===Infinity)a.width=1;if(isNaN(a.height)||a.height===0||a.height===Infinity)a.height=1;return a};u.a(Bg,"minSize",Bg.prototype.Pd);
u.defineProperty(Bg,{Pd:"minSize"},r("Hc"),function(a){if(!this.Hc.u(a)){s&&u.c(a,eb,Bg,"minSize");if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;this.Hc.Oa(a)}});u.a(Bg,"maxSize",Bg.prototype.yd);u.defineProperty(Bg,{yd:"maxSize"},r("Of"),function(a){if(!this.Of.u(a)){s&&u.c(a,eb,Bg,"maxSize");if(isNaN(a.width))a.width=Infinity;if(isNaN(a.height))a.height=Infinity;this.Of.Oa(a)}});u.a(Bg,"cellSize",Bg.prototype.Wj);
u.defineProperty(Bg,{Wj:"cellSize"},r("bi"),function(a){if(!this.bi.u(a)){s&&u.c(a,eb,Bg,"cellSize");this.bi.Oa(a)}});u.a(Bg,"isGridSnapEnabled",Bg.prototype.rn);u.defineProperty(Bg,{rn:"isGridSnapEnabled"},r("Gk"),function(a){if(this.Gk!==a){u.e(a,"boolean",Bg,"isGridSnapEnabled");this.Gk=a}});
function Ng(){qf.call(this);this.name="Rotating";this.Mw=45;this.Lw=2;this.ta=m;var a=new X;a.Ta="Ellipse";a.ja=new eb(6,6);a.fill="yellow";a.stroke="black";a.Na=1;a.cursor="pointer";this.pj=a;this.Sb=m;this.Pp=0;this.fA=new E}u.H("RotatingTool",Ng);u.na(Ng,qf);
Ng.prototype.updateAdornments=Ng.prototype.$h=function(a){if(!(a===m||a instanceof W)){var b=m;if(a.Da){var c=a.rG;if(c!==m&&a.gb()&&a.canRotate()&&c.dk()&&c.pa.V()){b=a.dn(this.name);if(b===m){b=this.makeAdornment(c);b.hd=this.name}if(b!==m){b.Ka=c.ln();var d=m,e=m;if(c===a||c===a.ub){d=a.ub;e=a.nf}else{d=c;e=Zb}for(var g=d.ma,e=new E(g.width*e.x+e.offsetX,g.height*e.y+e.offsetY);d!==m&&d!==c;){d.transform.vb(e);d=d.U}d=e.y;e=Math.max(e.x-c.ma.width,0);b.nf=Zb;b.location=c.tb(new K(1,0,50+e,d))}}a.Lm(this.name,
b)}else a.xl(this.name)}};Ng.prototype.makeAdornment=Ng.prototype.ly=function(a){var b=m,b=a.W.RC;if(b===m){b=new bf;b.type=Og;var c=this.nr;c!==m&&b.add(c.copy())}else{nf(b);b=b.copy();if(!(b instanceof bf))return m}b.Gd=a;return b};u.defineProperty(Ng,{nr:"handleArchetype"},r("pj"),function(a){a&&u.c(a,Q,Ng,"handleArchetype");this.pj=a});u.m(Ng,{handle:"handle"},r("Sb"));u.m(Ng,{Gd:"adornedObject"},r("ta"));
Ng.prototype.canStart=Ng.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||a.Ja||!a.Vm||!a.F.left?o:this.findToolHandleAt(a.cc.C,this.name)!==m?h:o};Ng.prototype.doActivate=Ng.prototype.Rh=function(){var a=this.b;if(a!==m){this.Sb=this.findToolHandleAt(a.cc.C,this.name);if(this.Sb!==m){this.ta=this.Sb.W.Gd;var b=this.ta.W,c=b.ub;this.fA=this.ta===b||this.ta===c?c.tb(b.nf):this.ta.tb(Zb);this.Pp=this.ta.Ka;a.Bc=h;this.Fb(this.name);this.Q=h}}};
Ng.prototype.doDeactivate=Ng.prototype.Zj=function(){var a=this.b;if(a!==m){this.Ui();this.ta=this.Sb=m;this.Q=a.Bc=o}};Ng.prototype.doCancel=Ng.prototype.Fi=function(){this.rotate(this.Pp);this.stopTool()};Ng.prototype.doMouseMove=Ng.prototype.Rg=function(){var a=this.b;if(this.Q&&a!==m){a=this.computeRotate(a.F.C);this.rotate(a)}};
Ng.prototype.doMouseUp=Ng.prototype.Ke=function(){var a=this.b;if(this.Q&&a!==m){var b=this.computeRotate(a.F.C);this.rotate(b);a.Ki();this.oe=this.name;a.ha("PartRotated",this.ta,this.Pp)}this.stopTool()};Ng.prototype.rotate=Ng.prototype.rotate=function(a){if(this.ta!==m){this.ta.Ka=a;pf(this.b)}};
Ng.prototype.computeRotate=Ng.prototype.OH=function(a){var a=this.fA.Oh(a),b=this.ta.U;if(b){a=a-b.ln();a>=360?a=a-360:a<0&&(a=a+360)}var b=Math.min(Math.abs(this.eD),180),c=Math.min(Math.abs(this.dD),b/2);!this.b.F.shift&&(b>0&&c>0)&&(a%b<c?a=Math.floor(a/b)*b:a%b>b-c&&(a=(Math.floor(a/b)+1)*b));a>=360?a=a-360:a<0&&(a=a+360);return a};u.a(Ng,"snapAngleMultiple",Ng.prototype.eD);
u.defineProperty(Ng,{eD:"snapAngleMultiple"},r("Mw"),function(a){if(this.Mw!==a){s&&u.e(a,"number",Ng,"snapAngleMultiple");this.Mw=a}});u.a(Ng,"snapAngleEpsilon",Ng.prototype.dD);u.defineProperty(Ng,{dD:"snapAngleEpsilon"},r("Lw"),function(a){if(this.Lw!==a){s&&u.e(a,"number",Ng,"snapAngleEpsilon");this.Lw=a}});function Pg(){qf.call(this);this.name="ClickSelecting"}u.H("ClickSelectingTool",Pg);u.na(Pg,qf);
Pg.prototype.canStart=Pg.prototype.ff=function(){return!this.isEnabled||this.b===m||this.isBeyondDragSize()?o:h};Pg.prototype.doMouseUp=Pg.prototype.Ke=function(){if(this.Q){this.standardMouseSelect();this.standardMouseClick()}this.stopTool()};function Qg(){qf.call(this);this.name="Action";this.Kl=m}u.H("ActionTool",Qg);u.na(Qg,qf);
Qg.prototype.canStart=Qg.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m)return o;var b=a.F,c=a.Yc(b.C,function(a){for(;a.U!==m;){if(a.Au)return a;a=a.U}return m},function(a){return a.Au});if(c!==m){this.Kl=c;a.Tl=a.Yc(b.C,m,m);return h}return o};Qg.prototype.doMouseDown=Qg.prototype.lu=function(){if(this.Q){var a=this.b.F,b=this.Kl;if(b!==m){a.ad=b;b.gx!==m&&b.gx(a,b)}}else this.canStart()&&this.doActivate()};
Qg.prototype.doMouseMove=Qg.prototype.Rg=function(){if(this.Q){var a=this.b.F,b=this.Kl;if(b!==m){a.ad=b;b.hx!==m&&b.hx(a,b)}}};Qg.prototype.doMouseUp=Qg.prototype.Ke=function(){if(this.Q){var a=this.b,b=a.F,c=this.Kl;if(c===m)return;b.ad=c;c.ix!==m&&c.ix(b,c);this.isBeyondDragSize()||rf(c,b,a)}this.stopTool()};Qg.prototype.doCancel=Qg.prototype.Fi=function(){var a=this.b;if(a!==m){var a=a.F,b=this.Kl;if(b===m)return;a.ad=b;b.fx!==m&&b.fx(a,b)}this.stopTool()};
Qg.prototype.doStop=Qg.prototype.Gi=function(){this.Kl=m};function pa(){qf.call(this);this.name="ClickCreating";this.Fv=m;this.jw=h}u.H("ClickCreatingTool",pa);u.na(pa,qf);pa.prototype.canStart=pa.prototype.ff=function(){if(!this.isEnabled||this.nx===m)return o;var a=this.b;if(a===m||(a.Ja||a.Nd)||!a.Rm||!a.F.left||this.isBeyondDragSize())return o;if(this.WB){if(a.F.He!==2)return o}else if(a.F.He!==1)return o;return a.qa!==this&&a.fr(a.F.C,h)!==m?o:h};
pa.prototype.doMouseUp=pa.prototype.Ke=function(){var a=this.b;this.Q&&a!==m&&this.insertPart(a.F.C);this.stopTool()};pa.prototype.insertPart=pa.prototype.ZI=function(a){var b=this.b;if(b!==m){var c=this.nx;if(c!==m){this.Fb(this.name);var d=m;if(c instanceof U||c.constructor===T){nf(c);d=c.copy();d instanceof T&&b.add(d)}else if(c!==m){c=b.J.$m(c);if(c instanceof Object){b.J.Vt(c);d=b.cg(c)}}if(d instanceof T){d.location=a;b.Hd&&b.select(d)}b.Ki();this.oe=this.name;b.ha("PartCreated",d);this.Ui()}}};
u.a(pa,"archetypeNodeData",pa.prototype.nx);u.defineProperty(pa,{nx:"archetypeNodeData"},r("Fv"),function(a){if(this.Fv!==a){a!==m&&u.c(a,Object,pa,"archetypeNodeData");this.Fv=a}});u.a(pa,"isDoubleClick",pa.prototype.WB);u.defineProperty(pa,{WB:"isDoubleClick"},r("jw"),function(a){if(this.jw!==a){u.e(a,"boolean",pa,"isDoubleClick");this.jw=a}});
function Rg(){qf.call(this);this.name="ContextMenu";this.oz=m;this.Rz=new E;this.Wl=m;if(u.Qw===h){this.Wl=new bf;this.Rv=m;var a=this;this.yA=function(){a.stopTool()};if(u.rz===o){var b=document.createElement("div"),c=document.createElement("div");b.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px";c.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;-moz-opacity: 0.8;opacity:.80;filter: alpha(opacity=80);";
var d=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(d);d.sheet.insertRule(".defaultCXul { list-style: none; }",0);d.sheet.insertRule(".defaultCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0);d.sheet.insertRule(".defaultCXa {color: #444;display: inline-block;padding: 6px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0);b.addEventListener("contextmenu",function(a){a.preventDefault();
return o},o);b.addEventListener("selectstart",function(a){a.preventDefault();return o},o);c.addEventListener("contextmenu",function(a){a.preventDefault();return o},o);if(document.body){document.body.appendChild(b);document.body.appendChild(c)}u.ns=b;u.ms=c;u.rz=h}}}u.H("ContextMenuTool",Rg);u.na(Rg,qf);Rg.prototype.canStart=Rg.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||this.isBeyondDragSize()||!a.F.right?o:this.Wl!==m||this.findObjectWithContextMenu()!==m?h:o};
Rg.prototype.doStart=Rg.prototype.Ix=function(){var a=this.b;a!==m&&this.Rz.set(a.cc.C)};Rg.prototype.doStop=Rg.prototype.Gi=function(){this.hideDefaultContextMenu();this.hideContextMenu()};Rg.prototype.findObjectWithContextMenu=Rg.prototype.zI=function(){var a=this.b;if(a===m)return m;var b=a.Yc(a.F.C,m,function(a){return!a.sa.Zc});if(b!==m){for(a=b;a!==m;){var c=a.contextMenu;if(c!==m)return a;a=a.U}if(this.Wl!==m)return b.W}else{c=a.contextMenu;if(c!==m)return a}return m};
Rg.prototype.doActivate=Rg.prototype.Rh=aa();Rg.prototype.doMouseDown=Rg.prototype.lu=function(){this.Q&&Sg(this,o)};Rg.prototype.doMouseUp=Rg.prototype.Ke=function(){if(!this.Q&&this.canStart())this.Q=h;Sg(this,h)};
function Sg(a,b){if(a.$d===m){a.standardMouseSelect();var c=a.findObjectWithContextMenu();if(c!==m){var d=c.contextMenu;d!==m?a.showContextMenu(d,c instanceof Q?c:m):a.showDefaultContextMenu()}else a.showDefaultContextMenu()}else{c=a.b;d=c.Yc(c.F.C,m,m);if(d!==m&&d.Wh(a.$d)){a.standardMouseClick(m,m);a.stopTool()}else{a.stopTool();b?c.qa.doMouseUp():c.qa.doMouseDown()}}}Rg.prototype.doMouseMove=Rg.prototype.Rg=function(){this.Q&&this.standardMouseOver()};
Rg.prototype.showContextMenu=Rg.prototype.bK=function(a,b){u.c(a,bf,Rg,"showContextMenu:contextmenu");b!==m&&u.c(b,Q,Rg,"showContextMenu:obj");var c=this.b;if(c!==m){a!==this.$d&&this.hideContextMenu();a.xd="Tool";a.gk=o;c.add(a);if(b!==m){var d=m,e=b.hr();if(e!==m)d=e.data;a.Gd=b;a.data=d}else a.data=c.J;a.Sh();this.positionContextMenu(a,b);this.$d=a;pf(c)}};
Rg.prototype.positionContextMenu=Rg.prototype.KJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.ga,b=b.jb;if(c.x+d.width>b.right)c.x=c.x-(d.width+5);if(c.y+d.height>b.bottom)c.y=c.y-(d.height+5);a.position=c}};Rg.prototype.hideContextMenu=Rg.prototype.SI=function(){var a=this.b;if(a!==m&&this.$d!==m){this.$d.data=m;this.$d.Gd=m;a.remove(this.$d);this.$d=m;this.standardMouseOver();pf(a)}};
Rg.prototype.initializeDefaultButtons=Rg.prototype.VI=function(){if(this.b===m)return m;var a=new z,b=this.b.Kd;a.add({text:"Copy",gf:function(){b.copySelection()},visible:function(){return b.canCopySelection()}});a.add({text:"Cut",gf:function(){b.cutSelection()},visible:function(){return b.canCutSelection()}});a.add({text:"Delete",gf:function(){b.deleteSelection()},visible:function(){return b.canDeleteSelection()}});a.add({text:"Paste",gf:function(a){b.pasteSelection(a.F.C)},visible:function(){return b.canPasteSelection()}});
a.add({text:"Select All",gf:function(){b.selectAll()},visible:function(){return b.canSelectAll()}});a.add({text:"Undo",gf:function(){b.undo()},visible:function(){return b.canUndo()}});a.add({text:"Redo",gf:function(){b.redo()},visible:function(){return b.canRedo()}});a.add({text:"Zoom Out",gf:function(){b.decreaseZoom()},visible:function(){return b.canDecreaseZoom()}});a.add({text:"Zoom In",gf:function(){b.increaseZoom()},visible:function(){return b.canIncreaseZoom()}});a.add({text:"Reset Zoom",gf:function(){b.resetZoom()},
visible:function(){return b.canResetZoom()}});a.add({text:"Group Selection",gf:function(){b.groupSelection()},visible:function(){return b.canGroupSelection()}});a.add({text:"Ungroup Selection",gf:function(){b.ungroupSelection()},visible:function(){return b.canUngroupSelection()}});a.add({text:"Edit Text",gf:function(){b.editTextBlock()},visible:function(){return b.canEditTextBlock()}});return a};
Rg.prototype.showDefaultContextMenu=Rg.prototype.cK=function(){var a=this.b;if(a!==m){if(this.Rv===m)this.Rv=this.initializeDefaultButtons();this.Wl!==this.$d&&this.hideContextMenu();u.ns.innerHTML="";u.ms.addEventListener("click",this.yA,o);var b=this,c=document.createElement("ul");c.className="defaultCXul";u.ns.appendChild(c);c.innerHTML="";for(var d=this.Rv.f;d.next();){var e=d.value,g=e.text,i=e.visible;if(typeof i!=="function"||i()){i=document.createElement("li");i.className="defaultCXli";var j=
document.createElement("a");j.className="defaultCXa";j.href="#";j.LD=e.gf;j.addEventListener("click",function(){this.LD(a);b.stopTool()},o);j.textContent=g;i.appendChild(j);c.appendChild(i)}}u.ns.style.display="block";u.ms.style.display="block";this.$d=this.Wl}};Rg.prototype.hideDefaultContextMenu=Rg.prototype.TI=function(){if(this.$d!==m&&this.$d===this.Wl){u.ns.style.display="none";u.ms.style.display="none";u.ms.removeEventListener("click",this.yA,o);this.$d=m}};u.a(Rg,"currentContextMenu",Rg.prototype.$d);
u.defineProperty(Rg,{$d:"currentContextMenu"},r("oz"),ba("oz"));u.m(Rg,{AJ:"mouseDownPoint"},r("Rz"));function Tg(){qf.call(this);this.name="DragSelecting";this.Xl=175;this.Mz=o;var a=new T;a.xd="Tool";a.gk=o;var b=new X;b.name="Shape";b.Ta="Rectangle";b.fill=m;b.stroke="magenta";b.position=new E(0,0);a.add(b);this.Pl=a}u.H("DragSelectingTool",Tg);u.na(Tg,qf);
Tg.prototype.canStart=Tg.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||!a.Hd)return o;var b=a.F;return!b.left||a.qa!==this&&(!this.isBeyondDragSize()||b.timestamp-a.cc.timestamp<this.ju||a.fr(b.C,h)!==m)?o:h};Tg.prototype.doActivate=Tg.prototype.Rh=function(){var a=this.b;if(a!==m){this.Q=h;a.Bc=h;a.bb=h;a.add(this.Zf)}};Tg.prototype.doDeactivate=Tg.prototype.Zj=function(){var a=this.b;if(a!==m){a.remove(this.Zf);a.bb=o;this.Q=a.Bc=o;pf(a)}};
Tg.prototype.doMouseMove=Tg.prototype.Rg=function(){var a=this.b;if(a!==m&&this.Q&&this.Zf!==m){var b=this.computeBoxBounds();this.Zf.Le("Shape").ja=b.size;this.Zf.position=b.position;pf(a)}};Tg.prototype.doMouseUp=Tg.prototype.Ke=function(){if(this.Q){var a=this.b;a.remove(this.Zf);try{a.pc="wait";this.selectInRect(this.computeBoxBounds())}finally{a.pc=""}}this.stopTool()};Tg.prototype.computeBoxBounds=Tg.prototype.GH=function(){var a=this.b;return a===m?new J(0,0,0,0):new J(a.cc.C,a.F.C)};
Tg.prototype.selectInRect=Tg.prototype.$J=function(a){var b=this.b;if(b!==m){var c=b.F;b.ha("ChangingSelection");a=b.ll(a,m,function(a){return a instanceof T&&a.sx()},this.$B);if(c.Xj)if(c.shift)for(a=a.f;a.next();){c=a.value;if(c.Da)c.Da=o}else for(a=a.f;a.next();){c=a.value;c.Da=!c.Da}else{if(!c.shift){for(var d=new z(T),e=b.selection.f;e.next();){c=e.value;a.contains(c)||d.add(c)}for(d=d.f;d.next();){c=d.value;c.Da=o}}for(a=a.f;a.next();){c=a.value;if(!c.Da)c.Da=h}}b.ha("ChangedSelection")}};
u.a(Tg,"delay",Tg.prototype.ju);u.defineProperty(Tg,{ju:"delay"},r("Xl"),ba("Xl"));u.a(Tg,"isPartialInclusion",Tg.prototype.$B);u.defineProperty(Tg,{$B:"isPartialInclusion"},r("Mz"),ba("Mz"));u.a(Tg,"box",Tg.prototype.Zf);u.defineProperty(Tg,{Zf:"box"},r("Pl"),ba("Pl"));function Ug(){qf.call(this);this.name="Panning";this.cA=new E;this.ai=o;var a=this;this.gD=function(){document.removeEventListener("scroll",a.gD,o);a.stopTool()}}u.H("PanningTool",Ug);u.na(Ug,qf);
Ug.prototype.canStart=Ug.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;return a===m||!a.Fe&&!a.Ge||!a.F.left||a.qa!==this&&!this.isBeyondDragSize()?o:h};Ug.prototype.doActivate=Ug.prototype.Rh=function(){var a=this.b;if(a!==m){if(this.ai){a.F.bubbles=h;document.addEventListener("scroll",this.gD,o)}else{a.pc="move";a.Bc=h;this.cA=a.position}this.Q=h}};Ug.prototype.doDeactivate=Ug.prototype.Zj=function(){var a=this.b;if(a!==m){a.pc="";this.Q=a.Bc=o}};
Ug.prototype.doCancel=Ug.prototype.Fi=function(){var a=this.b;if(a!==m){a.position=this.cA;a.Bc=o}this.stopTool()};Ug.prototype.doMouseMove=Ug.prototype.Rg=function(){var a=this.b;if(this.Q&&a)if(this.ai)a.F.bubbles=h;else{var b=a.position,c=a.cc.C,d=a.F.C,e=b.x+c.x-d.x,c=b.y+c.y-d.y;if(!a.Fe)e=b.x;if(!a.Ge)c=b.y;a.position=new E(e,c);a.update()}};u.a(Ug,"bubbles",Ug.prototype.bubbles);u.defineProperty(Ug,{bubbles:"bubbles"},r("ai"),ba("ai"));
function Vg(){qf.call(this);this.name="TextEditing";this.Sv=this.qz=this.Zw=m;this.Pw=Wg;this.vi=m;this.Za=Xg;this.Gj=m}u.H("TextEditingTool",Vg);u.na(Vg,qf);var Yg;Vg.LostFocus=Yg=u.l(Vg,"LostFocus",0);var Zg;Vg.MouseDown=Zg=u.l(Vg,"MouseDown",1);var $g;Vg.Tab=$g=u.l(Vg,"Tab",2);var ah;Vg.Enter=ah=u.l(Vg,"Enter",3);Vg.SingleClick=u.l(Vg,"SingleClick",0);var Wg;Vg.SingleClickSelected=Wg=u.l(Vg,"SingleClickSelected",1);
var Xg=u.l(Vg,"StateNone",0),bh=u.l(Vg,"StateActive",1),ch=u.l(Vg,"StateEditing",2),dh=u.l(Vg,"StateEditing2",3),eh=u.l(Vg,"StateValidating",4),fh=u.l(Vg,"StateValidated",5);u.a(Vg,"textBlock",Vg.prototype.xf);u.defineProperty(Vg,{xf:"textBlock"},r("Zw"),ba("Zw"));u.a(Vg,"currentTextEditor",Vg.prototype.$f);u.defineProperty(Vg,{$f:"currentTextEditor"},r("qz"),ba("qz"));u.a(Vg,"defaultTextEditor",Vg.prototype.mB);u.defineProperty(Vg,{mB:"defaultTextEditor"},r("Sv"),ba("Sv"));u.a(Vg,"starting",Vg.prototype.fD);
u.defineProperty(Vg,{fD:"starting"},r("Pw"),function(a){if(this.Pw!==a){s&&u.Ra(a,Vg,Vg,"starting");this.Pw=a}});Vg.prototype.canStart=Vg.prototype.ff=function(){if(!this.isEnabled)return o;var a=this.b;if(a===m||a.Ja||!a.F.left||this.isBeyondDragSize())return o;a=a.Yc(a.F.C,m,function(a){return a instanceof na});if(!(a instanceof na)||!a.mu)return o;a=a.W;return a===m||this.fD===Wg&&!a.Da?o:h};Vg.prototype.doStart=Vg.prototype.Ix=function(){!this.Q&&this.xf!==m&&this.doActivate()};
Vg.prototype.doActivate=Vg.prototype.Rh=function(){if(!this.Q){var a=this.b;if(a!==m){var b=this.xf;if(b===m){b=a.Yc(a.F.C,function(a){return a instanceof na?a:m});b=b instanceof na?b:m}if(b!==m){this.xf=b;if(b.W!==m){this.Q=h;this.Za=bh;this.Fb(this.name);var c=this.mB,d=o;if(b.Py!==m)c=b.Py;c!==m&&!c.dz&&(d=h);if(c===m){c=document.createElement("textarea");c.dz=h;this.Sv=c;var e=this.xf.copy();c.addEventListener("input",function(){e.text=this.value;gh(e,Infinity,Infinity);this.style.width=20+e.ga.width*
this.FG+"px";this.rows=e.Lk},o);c.addEventListener("keydown",function(a){var b=a.which,c=this.textEditingTool;if(c!==m)if(b==13)c.ex(ah);else{if(b==9){c.ex($g);a.preventDefault();return o}if(b==27){c.doCancel();c.b&&c.b.focus()}}},o);c.addEventListener("focus",function(){var a=this.textEditingTool;if(a.Za===bh)a.Za=ch;else if(a.Za===fh)a.Za=dh;else if(a.Za===dh)a.Za=ch},o)}if(c.dz){var g=b.tb(Zb),i=a.position,j=a.scale,k=b.ml()*j,l=b.ma.width*k;hh(b,b.font);g=new E((g.x-i.x)*j,(g.y-i.y)*j);c.value=
b.text;a.Qh.style.font=b.font;c.style.font="inherit";c.style.fontSize=k*100+"%";c.style.lineHeight="normal";l=20+l;c.style.width=l+"px";c.style.height="";c.rows=b.Lk;a.Qh.appendChild(c);c.style.left=(g.x-l/2|0)+"px";c.style.top=(g.y-c.clientHeight/2|0)+"px";c.style.textAlign=b.textAlign}else a.Qh.appendChild(c);c.style.position="absolute";c.style.zIndex=100;c.className="start";c.textEditingTool=this;c.FG=k;if(d&&c.onActivate!==f)c.onActivate();this.$f=c;c.focus()}}}}};
Vg.prototype.doCancel=Vg.prototype.Fi=function(){if(this.Gj!==m){this.$f.style.border=this.Gj;this.Gj=m}this.stopTool()};Vg.prototype.doMouseUp=Vg.prototype.Ke=function(){!this.Q&&this.canStart()&&this.doActivate()};Vg.prototype.doMouseDown=Vg.prototype.lu=function(){this.Q&&this.ex(Zg)};
Vg.prototype.acceptText=Vg.prototype.ex=function(a){switch(a){case Zg:if(this.Za===fh||this.Za===dh)this.$f.focus();else if(this.Za===bh||this.Za===ch){this.Za=eh;mh(this)}break;case Yg:case ah:case $g:if(ah===a&&this.Zw.Bu===h)break;if(this.Za===bh||this.Za===ch){this.Za=eh;mh(this)}}};
function mh(a){if(a.xf!==m&&a.$f!==m){var b=a.xf,c=a.xf.text,d=a.$f.value,e="",e=typeof d==="function"?d():d;if(!a.isValidText(a.xf,c,e)){a.Za=ch;b.cr!==m&&b.cr(a,c,e);if(a.Gj===m){a.Gj=a.$f.style.border;a.$f.style.border="3px solid red"}a.$f.focus();return}a.Za=fh;if(c!==e)a.xf.text=e;a.oe=a.name;b=a.b;b!==m&&b.ha("TextEdited",a.xf,c);a.stopTool();b!==m&&b.focus()}if(a.Gj!==m){a.$f.style.border=a.Gj;a.Gj=m}}
Vg.prototype.doDeactivate=Vg.prototype.Zj=function(){var a=this.b;if(a!==m){this.Q&&this.Ui();this.Za=Xg;this.xf=m;if(this.$f!==m){var b=this.$f;if(b.onDeactivate!==f)b.onDeactivate();b!==m&&a.Qh.removeChild(b)}this.Q=o}};Vg.prototype.isValidText=Vg.prototype.jJ=function(a,b,c){u.c(a,na,Vg,"isValidText:textblock");var d=this.Tr;if(d!==m&&!d(a,b,c))return o;d=a.Tr;return d!==m&&!d(a,b,c)?o:h};u.a(Vg,"textValidation",Vg.prototype.Tr);
u.defineProperty(Vg,{Tr:"textValidation"},r("vi"),function(a){if(this.vi!==a)this.vi=a});function $e(){qf.call(this);this.name="ToolManager";this.Sz=new z(qf);this.Tz=new z(qf);this.Uz=new z(qf);this.Ez=this.Fz=1E3;this.us=this.Pv=m;this.Vz=tf}u.H("ToolManager",$e);u.na($e,qf);var tf;$e.WheelScroll=tf=u.l($e,"WheelScroll",0);var sf;$e.WheelZoom=sf=u.l($e,"WheelZoom",1);u.a($e,"mouseWheelBehavior",$e.prototype.sl);u.defineProperty($e,{sl:"mouseWheelBehavior"},r("Vz"),ba("Vz"));
$e.prototype.initializeStandardTools=$e.prototype.WI=function(){this.CA=new Qg;this.GC=new mg;this.gC=new pg;this.PC=new Bg;this.TC=new Ng;this.iC=new oa;this.ae=new vf;this.uB=new Tg;this.yC=new Ug;this.ZA=new Rg;this.Xu=new Vg;this.VA=new pa;this.WA=new Pg};
$e.prototype.doMouseDown=$e.prototype.lu=function(){var a=this.b;if(a!==m){var b=a.ca;b.ux&&b.kk!==0&&u.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var b=this.ie.length,c=0;c<b;c++){var d=this.ie.Z(c);if(d.canStart()){a.qa=d;if(a.qa===d){d.Q||d.doActivate();d.doMouseDown()}return}}if(a.F.button===1)if(this.sl===tf)this.sl=sf;else if(this.sl===sf)this.sl=tf;this.doActivate();this.standardWaitAfter(this.Yx)}};
$e.prototype.doMouseMove=$e.prototype.Rg=function(){var a=this.b;if(a!==m){if(this.Q)for(var b=this.eg.length,c=0;c<b;c++){var d=this.eg.Z(c);if(d.canStart()){a.qa=d;if(a.qa===d){d.Q||d.doActivate();d.doMouseMove()}return}}this.standardMouseOver();this.isBeyondDragSize()&&this.standardWaitAfter(this.Q?this.Yx:this.QB)}};$e.prototype.doCurrentObjectChanged=$e.prototype.cF=function(a,b){var c=this.Yj;c!==m&&!(b!==m&&(b===c||b.Wh(c)))&&this.hideToolTip()};
$e.prototype.doWaitAfter=$e.prototype.gF=function(){if(this.b&&this.b.oa){this.doMouseHover();this.Q||this.doToolTip()}};$e.prototype.doMouseHover=$e.prototype.dI=function(){var a=this.b;if(a!==m){var b=a.F;if(b.ad===m)b.ad=a.Yc(b.C,m,m);var c=b.ad;if(c!==m)for(;c!==m;){a=this.Q?c.Ar:c.Br;if(a!==m){a(b,c);if(b.ud)break}c=c.U}else{a=this.Q?a.Ar:a.Br;a!==m&&a(b)}}};
$e.prototype.doToolTip=$e.prototype.eI=function(){var a=this.b;if(a!==m){var b=a.F;if(b.ad===m)b.ad=a.Yc(b.C,m,m);b=b.ad;if(b!==m){if(!(b===this.Yj||b.Wh(this.Yj))){for(;b!==m;){a=b.Wr;if(a!==m){this.showToolTip(a,b);return}b=b.U}this.hideToolTip()}}else{a=a.Wr;a!==m?this.showToolTip(a,m):this.hideToolTip()}}};
$e.prototype.showToolTip=$e.prototype.dK=function(a,b){u.c(a,bf,$e,"showToolTip:tooltip");b!==m&&u.c(b,Q,$e,"showToolTip:obj");var c=this.b;if(c!==m){a!==this.Yj&&this.hideToolTip();a.xd="Tool";a.gk=o;c.add(a);if(b!==m&&b!==this.us){var d=m,e=b.W;if(e!==m)d=e.data;a.Gd=b;a.data=d}else if(b===m)a.data=c.J;if(b===m||b!==this.us){a.Sh();this.positionToolTip(a,b)}this.Pv=a;this.us=b;pf(c)}};
$e.prototype.positionToolTip=$e.prototype.LJ=function(a){var b=this.b;if(b!==m){var c=b.F.C.copy(),d=a.ga,b=b.jb;if(c.x+d.width>b.right)c.x=c.x-(d.width+5);c.y=c.y+20+d.height>b.bottom?c.y-(d.height+5):c.y+20;a.position=c}};$e.prototype.hideToolTip=$e.prototype.xF=function(){if(this.Yj!==m){var a=this.b;if(a!==m){this.Yj.data=m;this.Yj.Gd=m;a.remove(this.Yj);this.us=this.Pv=m;pf(a)}}};u.m($e,{Yj:"currentToolTip"},r("Pv"));
$e.prototype.doMouseUp=$e.prototype.Ke=function(){this.cancelWaitAfter();if(this.Q){var a=this.b;if(a===m)return;for(var b=this.fg.length,c=0;c<b;c++){var d=this.fg.Z(c);if(d.canStart()){a.qa=d;if(a.qa===d){d.Q||d.doActivate();d.doMouseUp()}return}}}this.doDeactivate()};$e.prototype.doMouseWheel=$e.prototype.dF=function(){this.standardMouseWheel()};$e.prototype.doKeyDown=$e.prototype.Gx=function(){var a=this.b;a!==m&&a.Kd.doKeyDown()};
$e.prototype.doKeyUp=$e.prototype.Hx=function(){var a=this.b;a!==m&&a.Kd.doKeyUp()};$e.prototype.doCancel=$e.prototype.Fi=function(){yf!==m&&yf.doCancel();qf.prototype.Fi.call(this)};$e.prototype.findTool=$e.prototype.Me=function(a){u.e(a,"string",$e,"findTool:name");for(var b=this.ie.length,c=0;c<b;c++){var d=this.ie.Z(c);if(d.name===a)return d}b=this.eg.length;for(c=0;c<b;c++){d=this.eg.Z(c);if(d.name===a)return d}b=this.fg.length;for(c=0;c<b;c++){d=this.fg.Z(c);if(d.name===a)return d}return m};
$e.prototype.replaceTool=$e.prototype.mG=function(a,b){u.e(a,"string",$e,"replaceTool:name");if(b!==m){u.c(b,qf,$e,"replaceTool:newtool");b.b&&b.b!==this.b&&u.g("Cannot share tools between Diagrams: "+b.toString());b.tf(this.b)}for(var c=this.ie.length,d=0;d<c;d++){var e=this.ie.Z(d);if(e.name===a){b!==m?this.ie.Ru(d,b):this.ie.Se(d);return e}}c=this.eg.length;for(d=0;d<c;d++){e=this.eg.Z(d);if(e.name===a){b!==m?this.eg.Ru(d,b):this.eg.Se(d);return e}}c=this.fg.length;for(d=0;d<c;d++){e=this.fg.Z(d);
if(e.name===a){b!==m?this.fg.Ru(d,b):this.fg.Se(d);return e}}return m};function nh(a,b,c,d){u.e(b,"string",$e,"replaceStandardTool:name");u.c(d,z,$e,"replaceStandardTool:list");if(c!==m){u.c(c,qf,$e,"replaceStandardTool:newtool");c.b&&c.b!==a.b&&u.g("Cannot share tools between Diagrams: "+c.toString());c.name=b;c.tf(a.b)}a.Me(b)?a.mG(b,c):c!==m&&d.add(c)}u.m($e,{ie:"mouseDownTools"},r("Sz"));u.m($e,{eg:"mouseMoveTools"},r("Tz"));u.m($e,{fg:"mouseUpTools"},r("Uz"));u.a($e,"hoverDelay",$e.prototype.QB);
u.defineProperty($e,{QB:"hoverDelay"},r("Fz"),ba("Fz"));u.a($e,"holdDelay",$e.prototype.Yx);u.defineProperty($e,{Yx:"holdDelay"},r("Ez"),ba("Ez"));u.a($e,"actionTool",$e.prototype.CA);u.defineProperty($e,{CA:"actionTool"},function(){return this.Me("Action")},function(a){nh(this,"Action",a,this.ie)});u.a($e,"relinkingTool",$e.prototype.GC);u.defineProperty($e,{GC:"relinkingTool"},function(){return this.Me("Relinking")},function(a){nh(this,"Relinking",a,this.ie)});u.a($e,"linkReshapingTool",$e.prototype.gC);
u.defineProperty($e,{gC:"linkReshapingTool"},function(){return this.Me("LinkReshaping")},function(a){nh(this,"LinkReshaping",a,this.ie)});u.a($e,"resizingTool",$e.prototype.PC);u.defineProperty($e,{PC:"resizingTool"},function(){return this.Me("Resizing")},function(a){nh(this,"Resizing",a,this.ie)});u.a($e,"rotatingTool",$e.prototype.TC);u.defineProperty($e,{TC:"rotatingTool"},function(){return this.Me("Rotating")},function(a){nh(this,"Rotating",a,this.ie)});u.a($e,"linkingTool",$e.prototype.iC);
u.defineProperty($e,{iC:"linkingTool"},function(){return this.Me("Linking")},function(a){nh(this,"Linking",a,this.eg)});u.a($e,"draggingTool",$e.prototype.ae);u.defineProperty($e,{ae:"draggingTool"},function(){return this.Me("Dragging")},function(a){nh(this,"Dragging",a,this.eg)});u.a($e,"dragSelectingTool",$e.prototype.uB);u.defineProperty($e,{uB:"dragSelectingTool"},function(){return this.Me("DragSelecting")},function(a){nh(this,"DragSelecting",a,this.eg)});u.a($e,"panningTool",$e.prototype.yC);
u.defineProperty($e,{yC:"panningTool"},function(){return this.Me("Panning")},function(a){nh(this,"Panning",a,this.eg)});u.a($e,"contextMenuTool",$e.prototype.ZA);u.defineProperty($e,{ZA:"contextMenuTool"},function(){return this.Me("ContextMenu")},function(a){nh(this,"ContextMenu",a,this.fg)});u.a($e,"textEditingTool",$e.prototype.Xu);u.defineProperty($e,{Xu:"textEditingTool"},function(){return this.Me("TextEditing")},function(a){nh(this,"TextEditing",a,this.fg)});u.a($e,"clickCreatingTool",$e.prototype.VA);
u.defineProperty($e,{VA:"clickCreatingTool"},function(){return this.Me("ClickCreating")},function(a){nh(this,"ClickCreating",a,this.fg)});u.a($e,"clickSelectingTool",$e.prototype.WA);u.defineProperty($e,{WA:"clickSelectingTool"},function(){return this.Me("ClickSelecting")},function(a){nh(this,"ClickSelecting",a,this.fg)});
function Xe(){u.Gb(this);this.M=m;this.Bb=new z(T);this.qb="";this.lw=o;this.Lg=this.fj=this.ej=this.dj=this.cj=this.aj=this.$i=this.bj=this.Zi=this.hj=this.Yi=this.gj=this.Xi=this.Wi=h;this.WD=[]}u.H("Layer",Xe);Xe.prototype.tf=ba("M");
Xe.prototype.toString=function(a){a===f&&(a=0);var b='Layer "'+this.name+'"';if(a<=0)return b;for(var c=0,d=0,e=0,g=0,i=0,j=this.Bb.f;j.next();){var k=j.value.constructor;k===T?c++:k===U?d++:k===V?e++:k===W?g++:k===bf&&i++}j="";c>0&&(j=j+(c+" Parts "));d>0&&(j=j+(d+" Nodes "));e>0&&(j=j+(e+" Groups "));g>0&&(j=j+(g+" Links "));i>0&&(j=j+(i+" Adornments "));if(a>1)for(c=this.Bb.f;c.next();){d=c.value;j=j+("\n    "+d.toString(a-1));(e=d.data)&&u.dc(e)&&(j=j+(" #"+u.dc(e)));d instanceof U?j=j+(" "+xe(e)):
d instanceof W&&(j=j+(" "+xe(d.da)+" "+xe(d.fa)))}return b+" "+this.Bb.count+": "+j};Xe.prototype.findObjectAt=Xe.prototype.Yc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.Bb,e=o;this.b.jb.ea(a)&&(e=h);for(var g=new E,i=d.length;i--;){var j=d.Z(i);if(!(e===h&&j.Xe===o)&&j.gb()){ab(g.set(a),j.Yd);j=j.Yc(g,b,c);if(j!==m){b!==m&&(j=b(j));if(j&&(c===m||c(j)))return j}}}return m};
Xe.prototype.findObjectsAt=Xe.prototype.hn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);!(d instanceof z)&&!(d instanceof la)&&(d=new z(Q));var e=this.Bb,g=o;this.b.jb.ea(a)&&(g=h);for(var i=new E,j=e.length;j--;){var k=e.Z(j);if(!(g===h&&k.Xe===o)&&k.gb()){ab(i.set(a),k.Yd);if(k.hn(i,b,c,d)){b!==m&&(k=b(k));k&&(c===m||c(k))&&d.add(k)}}}return d};
Xe.prototype.findObjectsIn=Xe.prototype.ll=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=o);!(e instanceof z)&&!(e instanceof la)&&(e=new z(Q));var g=this.Bb,i=o;this.b.jb.el(a)&&(i=h);for(var j=g.length;j--;){var k=g.Z(j);if(!(i===h&&k.Xe===o)&&k.gb()&&k.ll(a,b,c,d,e)){b!==m&&(k=b(k));k&&(c===m||c(k))&&e.add(k)}}return e};
Xe.prototype.findObjectsNear=Xe.prototype.jn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof z)&&!(e instanceof la)&&(e=new z(Q));var g=this.Bb,i=o;this.b.jb.ea(a)&&(i=h);for(var j=new E,k=g.length;k--;){var l=g.j[k];if(!(i===h&&l.Xe===o)&&l.gb()){ab(j.set(a),l.Yd);var n=new E(a.x+b,a.y);ab(n,l.Yd);if(l.jn(j,n,c,d,e)){c!==m&&(l=c(l));l&&(d===m||d(l))&&e.add(l)}}}return e};ea=Xe.prototype;
ea.bg=function(a,b){if(this.visible){var c=this.Bb,d=b.jb,e=[];if(b.im)for(var g=c.length,i=0;i<g;i++){var j=c.j[i];j.UD=i;if(j instanceof W){(j.si===Hf||j.si===oh)&&e.push(j);if(j.Xk===o)continue}if(j.pa.de(d)){j.bg(a,b);j.Xe=h}else j.Xe=o}else{g=c.length;for(i=0;i<g;i++){j=c.j[i];if(j.Xe){if(j instanceof W){(j.si===Hf||j.si===oh)&&e.push(j);if(j.Xk===o)continue}j.bg(a,b)}}}this.WD=e}};ea.d=function(a,b,c,d,e){var g=this.b;g!==m&&g.ke(ue,a,this,b,c,d,e)};
ea.bk=function(a,b,c){var d=this.Bb;b.s=this;if(a>=d.count)a=d.count;else if(d.Z(a)===b)return-1;d.ec(a,b);b.or();d=this.b;d!==m&&(c?ph(d):d.bk(b));b instanceof V&&this.Uu(b);return a};ea.vd=function(a,b,c){var d=this.Bb;if(a<0||a>=d.length){a=d.indexOf(b);if(a<0)return-1}else if(d.Z(a)!==b){a=d.indexOf(b);if(a<0)return-1}b.pr();d.Se(a);d=this.b;d!==m&&(c?ph(d):d.vd(b));b.s=m;return a};
ea.Uu=function(a){for(;a!==m;){if(a.sa===this){var b=a;if(b.fc.next()){for(var c=-1,d=-1,e=this.Bb.j,g=e.length,i=0;i<g;i++){var j=e[i];if(j===b){c=i;if(d>=0)break}if(d<0&&j.Sa===b){d=i;if(c>=0)break}}d<0&&(d=0);if(d<c){e=this.Bb;e.Se(c);e.ec(d,b)}}}a=a.Sa}};ea.clear=function(){for(var a=this.Bb.yf(),b=a.length,c=0;c<b;c++){a[c].Xe=o;this.vd(-1,a[c])}};u.m(Xe,{Qi:"parts"},function(){return this.Bb.f});u.m(Xe,{GJ:"partsBackwards"},function(){return this.Bb.sn});u.m(Xe,{b:"diagram"},r("M"));
u.a(Xe,"name",Xe.prototype.name);u.defineProperty(Xe,{name:"name"},r("qb"),function(a){u.e(a,"string",Xe,"name");var b=this.qb;if(b!==a){var c=this.b;if(c!==m){b===""&&u.g("Cannot rename default Layer to: "+a);for(c=c.vr;c.next();)c.value.name===a&&u.g("Layer.name is already present in this diagram: "+a)}this.qb=a;this.d("name",b,a)}});u.a(Xe,"isTemporary",Xe.prototype.Zc);
u.defineProperty(Xe,{Zc:"isTemporary"},r("lw"),function(a){var b=this.lw;if(b!==a){u.e(a,"boolean",Xe,"isTemporary");this.lw=a;this.d("isTemporary",b,a)}});u.a(Xe,"visible",Xe.prototype.visible);u.defineProperty(Xe,{visible:"visible"},r("Lg"),function(a){var b=this.Lg;if(b!==a){u.e(a,"boolean",Xe,"visible");this.Lg=a;this.d("visible",b,a);for(a=this.Bb.f;a.next();)a.value.updateAdornments();a=this.b;a!==m&&ph(a)}});u.a(Xe,"allowCopy",Xe.prototype.Hh);
u.defineProperty(Xe,{Hh:"allowCopy"},r("Wi"),function(a){var b=this.Wi;if(b!==a){u.e(a,"boolean",Xe,"allowCopy");this.Wi=a;this.d("allowCopy",b,a)}});u.a(Xe,"allowDelete",Xe.prototype.Sj);u.defineProperty(Xe,{Sj:"allowDelete"},r("Xi"),function(a){var b=this.Xi;if(b!==a){u.e(a,"boolean",Xe,"allowDelete");this.Xi=a;this.d("allowDelete",b,a)}});u.a(Xe,"allowTextEdit",Xe.prototype.Wm);
u.defineProperty(Xe,{Wm:"allowTextEdit"},r("gj"),function(a){var b=this.gj;if(b!==a){u.e(a,"boolean",Xe,"allowTextEdit");this.gj=a;this.d("allowTextEdit",b,a)}});u.a(Xe,"allowGroup",Xe.prototype.Qm);u.defineProperty(Xe,{Qm:"allowGroup"},r("Yi"),function(a){var b=this.Yi;if(b!==a){u.e(a,"boolean",Xe,"allowGroup");this.Yi=a;this.d("allowGroup",b,a)}});u.a(Xe,"allowUngroup",Xe.prototype.Xm);
u.defineProperty(Xe,{Xm:"allowUngroup"},r("hj"),function(a){var b=this.hj;if(b!==a){u.e(a,"boolean",Xe,"allowUngroup");this.hj=a;this.d("allowUngroup",b,a)}});u.a(Xe,"allowLink",Xe.prototype.$k);u.defineProperty(Xe,{$k:"allowLink"},r("Zi"),function(a){var b=this.Zi;if(b!==a){u.e(a,"boolean",Xe,"allowLink");this.Zi=a;this.d("allowLink",b,a)}});u.a(Xe,"allowRelink",Xe.prototype.yi);
u.defineProperty(Xe,{yi:"allowRelink"},r("bj"),function(a){var b=this.bj;if(b!==a){u.e(a,"boolean",Xe,"allowRelink");this.bj=a;this.d("allowRelink",b,a)}});u.a(Xe,"allowMove",Xe.prototype.Tj);u.defineProperty(Xe,{Tj:"allowMove"},r("$i"),function(a){var b=this.$i;if(b!==a){u.e(a,"boolean",Xe,"allowMove");this.$i=a;this.d("allowMove",b,a)}});u.a(Xe,"allowPrint",Xe.prototype.Sm);
u.defineProperty(Xe,{Sm:"allowPrint"},r("aj"),function(a){var b=this.aj;if(b!==a){u.e(a,"boolean",Xe,"allowPrint");this.aj=a;this.d("allowPrint",b,a)}});u.a(Xe,"allowReshape",Xe.prototype.Tm);u.defineProperty(Xe,{Tm:"allowReshape"},r("cj"),function(a){var b=this.cj;if(b!==a){u.e(a,"boolean",Xe,"allowReshape");this.cj=a;this.d("allowReshape",b,a)}});u.a(Xe,"allowResize",Xe.prototype.Um);
u.defineProperty(Xe,{Um:"allowResize"},r("dj"),function(a){var b=this.dj;if(b!==a){u.e(a,"boolean",Xe,"allowResize");this.dj=a;this.d("allowResize",b,a)}});u.a(Xe,"allowRotate",Xe.prototype.Vm);u.defineProperty(Xe,{Vm:"allowRotate"},r("ej"),function(a){var b=this.ej;if(b!==a){u.e(a,"boolean",Xe,"allowRotate");this.ej=a;this.d("allowRotate",b,a)}});u.a(Xe,"allowSelect",Xe.prototype.Hd);
u.defineProperty(Xe,{Hd:"allowSelect"},r("fj"),function(a){var b=this.fj;if(b!==a){u.e(a,"boolean",Xe,"allowSelect");this.fj=a;this.d("allowSelect",b,a)}});
function B(a){function b(a){var b=a.toLowerCase(),c=new z("function");d.add(a,c);d.add(b,c);e.add(a,a);e.add(b,a)}u.Gb(this);u.tz=[];this.wc=h;this.Ae=17;var c=this;document.body!==m?qh(this):document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,o);qh(c)},o);this.Ab=new z(Xe);this.pA=this.oA=this.rA=this.qA=this.zb=this.zk=this.oa=m;this.kb=(new E(NaN,NaN)).freeze();this.Ib=1;this.at=1E-4;this.Ws=100;this.De=new Ya;this.Tt=(new E(NaN,
NaN)).freeze();this.Cs=(new J(NaN,NaN,NaN,NaN)).freeze();this.sk=rh;this.xk=Ub;this.sj=rh;this.fm=Ub;this.Hs=this.Gs=Vb;this.tg=new la(Q);this.hi=h;this.Yl=new ka(W,J);this.Do=h;this.JD=250;this.ID=1E3;this.jg=m;this.gs=(new qb(16,16,16,16)).freeze();this.uz=h;this.Jq=this.Kg=o;this.Ko=h;this.bx=o;this.Bz=16;this.If=new qe;this.kc=new qe;this.ic=new qe;this.ci=m;this.Jt=-1;this.Rw=o;this.Vv=new ka("string",z);this.Uv=new ka("string","string");var d=new ka("string",z),e=new ka("string","string");b("BackgroundSingleClicked");
b("BackgroundDoubleClicked");b("BackgroundContextClicked");b("ClipboardChanged");b("ClipboardPasted");b("DocumentBoundsChanged");b("ExternalObjectsDropped");b("InitialLayoutCompleted");b("LayoutCompleted");b("LinkDrawn");b("LinkRelinked");b("LinkReshaped");b("ObjectSingleClicked");b("ObjectDoubleClicked");b("ObjectContextClicked");b("PartCreated");b("PartResized");b("PartRotated");b("SelectionMoved");b("SelectionCopied");b("SelectionDeleting");b("SelectionDeleted");b("SelectionGrouped");b("SelectionUngrouped");
b("ChangingSelection");b("ChangedSelection");b("SubGraphCollapsed");b("SubGraphExpanded");b("TextEdited");b("TreeCollapsed");b("TreeExpanded");b("ViewportBoundsChanged");this.Vv=d;this.Uv=e;this.jt=new la(U);this.Wk=new la(V);this.Qs=new la(W);this.Bb=new la(T);this.Ns=h;this.Hz=o;this.Qt=$f;this.Ov=this.Tv=this.Pt=m;this.ts="";this.wo="auto";this.kh=this.Fh=this.vh=this.dt=this.wh=this.xh=this.yh=this.jh=this.lh=this.ih=m;this.Dk=h;this.Lv=m;this.Fk=this.ti=this.fz=o;this.va=h;this.Pf=m;var g=this;
this.Pz=function(a){if(a.J===g.J&&g.va){g.va=o;try{var b=a.Mc;a.he===""&&b===ue&&sh(g,a.object,a.propertyName)}finally{g.va=h}}};this.Qz=function(a){if(a.J===g.J&&g.va){g.va=o;try{var b=a.Mc,c=a.he;if(c!=="")if(b===ue)if(c==="linkFromKey"){var d=a.object,e=g.Hi(d);if(e!==m){var q=a.newValue,p=g.Th(q);e.da=p}}else if(c==="linkToKey"){d=a.object;e=g.Hi(d);if(e!==m){q=a.newValue;p=g.Th(q);e.fa=p}}else if(c==="linkFromPortId"){d=a.object;e=g.Hi(d);if(e!==m){var t=a.newValue;if(typeof t==="string")e.Ug=
t}}else if(c==="linkToPortId"){d=a.object;e=g.Hi(d);if(e!==m){t=a.newValue;if(typeof t==="string")e.Zh=t}}else if(c==="nodeGroupKey"){var d=a.object,w=g.cg(d);if(w!==m){var A=a.newValue;if(A!==f){var F=g.Th(A);w.Sa=F instanceof V?F:m}else w.Sa=m}}else if(c==="linkLabelKeys"){d=a.object;e=g.Hi(d);if(e!==m){var H=a.oldValue,x=a.newValue;if(u.isArray(H))for(var I=u.wb(H),y=0;y<I;y++){var G=u.mb(H,y),p=g.Th(G);if(p!==m)p.fe=m}if(u.isArray(x)){I=u.wb(x);for(y=0;y<I;y++){G=u.mb(x,y);p=g.Th(G);if(p!==m)p.fe=
e}}}}else if(c==="nodeCategory"){var d=a.object,fa=g.cg(d),R=a.newValue;if(fa!==m&&typeof R==="string")fa.hd=R}else if(c==="linkCategory"){var d=a.object,S=g.Hi(d),R=a.newValue;if(S!==m&&typeof R==="string")S.hd=R}else if(c==="nodeDataArray"){var da=a.oldValue;th(g,da);var ma=a.newValue;uh(g,ma)}else{if(c==="linkDataArray"){da=a.oldValue;th(g,da);ma=a.newValue;vh(g,ma)}}else if(b===ve){ma=a.newValue;if(ma instanceof Object)if(c==="nodeDataArray")wh(g,ma);else if(c==="linkDataArray")xh(g,ma);else if(c===
"linkLabelKeys"){e=g.Hi(a.object);p=g.Th(ma);if(e!==m&&p!==m)p.fe=e}}else if(b===we){da=a.oldValue;if(da instanceof Object)if(c==="nodeDataArray")yh(g,da);else if(c==="linkDataArray")yh(g,da);else if(c==="linkLabelKeys"){p=g.kF(da);if(p!==m)p.fe=m}}else{if(b===te&&c==="SourceChanged"){var w=g.cg(a.object),ua=a.propertyName;w!==m&&typeof ua==="string"&&w.gc(ua)}}else if(b===ue){var sa=a.propertyName,d=a.object;if(d===g.J){if(sa==="nodeKeyProperty"||sa==="nodeCategoryProperty"||sa==="linkFromKeyProperty"||
sa==="linkToKeyProperty"||sa==="linkFromPortIdProperty"||sa==="linkToPortIdProperty"||sa==="nodeIsLinkLabelProperty"||sa==="linkLabelKeysProperty"||sa==="nodeIsGroupProperty"||sa==="nodeGroupKeyProperty"||sa==="linkCategoryProperty")g.ca.$a||g.wl()}else sh(g,d,sa)}else if(b===ve||b===we){var ib=a.Mc===ve,db=ib?a.Oe:a.Pe,$a=ib?a.newValue:a.oldValue,Oa=g.Ik.$(a.object);if(Oa instanceof Array)for(a=0;a<Oa.length;a++){var fb=Oa[a];typeof db==="number"&&(ib?$a instanceof Object&&zh(fb,$a,db):fb.vd(db))}}else if(b===
te){var Va=a.propertyName;if(Va[0]!=="S"){if(Va!=="CommittingTransaction"){if(Va==="FinishedUndo"||Va==="FinishedRedo"){g.ca.qh=h;Ah(g);g.ca.qh=o}g.sg&&g.qa.standardMouseOver();for(var vc=g.selection.f;vc.next();)vc.value.updateAdornments()}g.Jq=h;g.update();Mg(g)}else if(Va==="StartingFirstTransaction"&&!g.Jf&&!g.sg){g.Jq=h;if(g.Ko)g.Kg=h;g.update()}}}finally{g.va=h}}};this.Ff=new ka(Object,T);this.Ik=new ka(Object,Array);this.xj=o;this.Xi=this.Wi=this.Yr=this.ph=h;this.$r=this.Zr=o;this.es=this.cs=
this.fj=this.ej=this.dj=this.cj=this.aj=this.$i=this.bj=this.Zi=this.bs=this.hj=this.Yi=this.gj=h;this.Lz=o;this.ds=this.as=this.Fs=this.Es=h;this.zt=this.yt=16;this.xt=o;this.Fd=(new qb(5)).freeze();this.lA=new la(T);this.Xs=999999999;this.im=this.wj=this.uj=h;this.Xo=this.Wo=o;this.Sc=m;this.fs=h;this.sg=o;this.Jc=m;this.Zz=1;this.BA=(new J(NaN,NaN,NaN,NaN)).freeze();this.ys=(new J(NaN,NaN,NaN,NaN)).freeze();this.Jf=o;this.ot=new la;Bh(this);Ch(this);this.Tl=this.Iw=this.Pc=m;this.Mb=new $e;this.Mb.initializeStandardTools();
this.qa=this.iu=this.Mb;this.Kd=new C;this.J=new P;this.ti=h;this.rb=new Dh;this.ti=o;a===f&&(a=document.createElement("div"));this.Dz=new Eh;Fh(this,a);this.rq=this.MG=m;this.wc=o}u.H("Diagram",B);
function Ch(a){a.oi=new ka("string",T);var b=new U,c=new na;c.bind(new Se("text","",xe));b.add(c);a.PD=b;a.oi.add("",b);b=new U;c=new na;c.stroke="brown";c.bind(new Se("text","",xe));b.add(c);a.oi.add("Comment",b);b=new U;b.gk=o;b.qx=o;c=new X;c.Ta="Ellipse";c.fill="black";c.stroke=m;c.ja=new eb(3,3);b.add(c);a.oi.add("LinkLabel",b);a.Ck=new ka("string",V);b=new V;b.Nn="GROUPPANEL";b.type=Gh;c=new na;c.font="bold 12pt sans-serif";c.bind(new Se("text","",xe));b.add(c);c=new v(Hh);c.name="GROUPPANEL";
var d=new X;d.Ta="Rectangle";d.fill="rgba(128,128,128,0.2)";d.stroke="black";c.add(d);d=new Ig;d.padding=new qb(5,5,5,5);c.add(d);b.add(c);a.MD=b;a.Ck.add("",b);a.Bj=new ka("string",W);b=new W;c=new X;c.Mi=h;b.add(c);c=new X;c.Fl="Standard";c.fill="black";c.stroke=m;b.add(c);a.OD=b;a.Bj.add("",b);b=new W;c=new X;c.Mi=h;c.stroke="brown";b.add(c);a.Bj.add("Comment",b);b=new v;c=new na;c.bind(new Se("text","",xe));b.add(c);a.ND=b;b=new bf;b.type=Hh;c=new X;c.fill=m;c.stroke="magenta";c.Na=2;b.add(c);
c=new Ig;c.margin=new qb(1,1,1,1);b.add(c);a.ww=b;a.gw=b;b=new bf;b.type=ng;c=new X;c.Mi=h;c.fill=m;c.stroke="magenta";c.Na=0;b.add(c);a.ow=b}
function qh(a){var b=document.createElement("p");b.style.width="100%";b.style.height="200px";var c=document.createElement("div");c.style.position="absolute";c.style.visibility="hidden";c.style.width="200px";c.style.height="150px";c.style.overflow="hidden";c.appendChild(b);document.body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";b=b.offsetWidth;if(d===b)b=c.clientWidth;document.body.removeChild(c);a.Ae=d-b}
B.prototype.toString=function(a){a===f&&(a=0);var b="";if(this.id)b=this.id;if(this.Qh&&this.Qh.id)b=this.Qh.id;b='Diagram "'+b+'"';if(a<=0)return b;for(var c=this.Ab.f;c.next();)b=b+("\n  "+c.value.toString(a-1));return b};B.prototype.dumpReferences=B.prototype.wB=function(){for(var a=this.vr;a.next();){var b=a.value;u.trace(b.toString());for(b=b.Qi;b.next();)b.value.wB()}};B.prototype.checkProperties=B.prototype.FH=function(){return u.OE(this)};
B.fromDiv=function(a){var b=a;typeof a==="string"&&(b=document.getElementById(a));return b instanceof HTMLDivElement&&b.M instanceof B?b.M:m};u.a(B,"div",B.prototype.Qh);
u.defineProperty(B,{Qh:"div"},r("zb"),function(a){a!==m&&u.c(a,HTMLDivElement,B,"div");if(this.zb!==a){var b=this.zb;if(b!==m){delete b.M;b.innerHTML="";if(this.oa!==m){this.oa.M=m;this.oa.removeEventListener("touchstart",this.pD,o);this.oa.removeEventListener("touchmove",this.oD,o);this.oa.removeEventListener("touchend",this.nD,o)}b=this.Pt;if(b!==m){for(var c=b.Sz,d=c.length,e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.Tz;d=c.length;for(e=0;e<d;e++)c.j[e].cancelWaitAfter();c=b.Uz;d=c.length;for(e=0;e<
d;e++)c.j[e].cancelWaitAfter()}b.cancelWaitAfter();this.zk=this.oa=m;window.removeEventListener("resize",this.ny,o);window.removeEventListener("mousemove",this.Bn,h);window.removeEventListener("mousedown",this.An,h);window.removeEventListener("mouseup",this.Dn,h);window.removeEventListener("mousewheel",this.gg,h);window.removeEventListener("DOMMouseScroll",this.gg,h);window.removeEventListener("mouseout",this.Cn,h)}this.zb=m;if(a!==m){if(b=a.M)b.Qh=m;Fh(this,a)}}});
function Eh(){this.tA=h;this.NG=o;this.OG=212;this.UG="63ad05bbe23a1786468a4c741b6d2e";if(this.zs=0>window[u.ac("76a715b2f73f148a")][u.ac("72ba13b5")].indexOf(u.ac(u.oE)))for(var a=document[u.ac("69bc0fbfe6051381469f4c")],b=a.length,c=0;c<b;c++){var d=a[c][u.ac("79bb0581f63a1e97")];if(d!==m){for(var e=d.length,g=0;g<e;g++)if(d[g][u.ac("69ad1ab6e0221496778e4767")]==u.ac("02cncncn")){var i=d[g][u.ac("69bc0fbfe6")][u.ac("78a704b7e6242f8b53a8507f1b7b")];if(!i)return;if(i.indexOf(u.ac(u.PE))!==-1&&i.indexOf(u.ac(u.QE))!==
-1){this.zs=o;break}}if(this.zs===o)break}}this.PG=new E(NaN,NaN)}Eh.prototype.bv=function(a){a.HD();return 0<this.zs&&this!==this.tA?h:o};Eh.prototype.t=Eh.prototype.oK=function(){this.tA=m};
function Fh(a,b){(b===f||b===m)&&u.g("Diagram setup requires an argument DIV.");a.zb!==m&&u.g("Diagram has already completed setup.");typeof b==="string"?a.zb=document.getElementById(b):b instanceof HTMLDivElement?a.zb=b:u.g("No DIV or DIV id supplied: "+b);a.zb===m&&u.g("Invalid DIV id; could not get element with id: "+b);a.zb.M!==f&&u.g("Invalid div id; div already has a Diagram associated with it.");if(window.getComputedStyle(a.zb,m).position==="static")a.zb.style.position="relative";a.zb.style["-webkit-tap-highlight-color"]=
"rgba(255, 255, 255, 0)";a.zb.innerHTML="";a.zb.M=a;var c=document.createElement("canvas");if(!c.getContext||!c.getContext("2d"))a.zb.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";else{c.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.zIndex="2";c.width=a.zb.clientWidth||1;c.height=a.zb.clientHeight||1;if(document.defaultView&&document.defaultView.getComputedStyle){a.qA=
parseInt(document.defaultView.getComputedStyle(c,m).paddingLeft,10)||0;a.rA=parseInt(document.defaultView.getComputedStyle(c,m).paddingTop,10)||0;a.oA=parseInt(document.defaultView.getComputedStyle(c,m).borderLeftWidth,10)||0;a.pA=parseInt(document.defaultView.getComputedStyle(c,m).borderTopWidth,10)||0}a.iw=0;a.hw=0;if(document.body){var d=document.body.parentNode;a.iw=d.offsetTop||0;a.hw=d.offsetLeft||0}else document.addEventListener("load",function(){if(document.body){var b=document.body.parentNode;
a.iw=b.offsetTop||0;a.hw=b.offsetLeft||0}},o);c.M=a;a.oa=c;a.zk=c.getContext("2d");d=a.zk;a.HD=d[u.ac("69ad0287f137159745844d7e")][u.ac("78a118b7")](d,1,0,0,1,0,0);a.GD=d[u.ac("7eba17a4ca3b1a8346")][u.ac("78a118b7")](d,u.bv,4,4);a.zb.insertBefore(c,a.zb.firstChild);if(a.uz!==m){var d=document.createElement("div"),e=document.createElement("div"),g=document.createElement("div"),i=document.createElement("div");d.style.position="absolute";d.style.overflow="auto";d.style.width=a.oa.width+"px";d.style.height=
a.oa.height+"px";d.style.zIndex="1";e.style.position="absolute";e.style.overflow="auto";e.style.width=a.oa.width+"px";e.style.height=a.oa.height+"px";e.style.zIndex="1";g.style.position="absolute";g.style.width="1px";g.style.height="1px";i.style.position="absolute";i.style.width="1px";i.style.height="1px";a.zb.appendChild(d);a.zb.appendChild(e);d.appendChild(g);e.appendChild(i);d.onscroll=a.Xz;d.onmousedown=a.Yz;d.M=a;d.jA=h;e.onscroll=a.Xz;e.onmousedown=a.Yz;e.M=a;e.kA=h;a.Nj=d;a.Oj=e;a.hA=g;a.iA=
i}a.preventDefault=function(a){a.preventDefault();return o};a.Bn=function(b){if(a.isEnabled){var c=a.kc;if(window.TouchEvent&&c.ei!==m&&c.ei instanceof window.TouchEvent){b.preventDefault();b.simulated=h;a.rq=b}else{a.kc=a.ic;a.ic=c;Ih(a,b,c,h);if(!Jh(b,new E,b.target.M)){a.qa.doMouseMove();a.qa.isBeyondDragSize()&&Kh(a)}}}};a.An=function(b){if(a.isEnabled){var c=a.kc;if(a.rq!==m){a.rq=b;b.preventDefault()}else{a.kc=a.ic;a.ic=c;Ih(a,b,c,h);c.He=b.detail;a.If=c.copy();if(c.ei.simulated===h){b.preventDefault();
b.simulated=h}else{if(s&&s.uy){window.uy=a.hn(c.C).j;s.trace(window.uy)}yf=m;a.qa.doMouseDown();if(b.button===1){b.preventDefault();return o}}}}};a.Dn=function(b){if(a.isEnabled){var c=a.kc;if(a.rq!==m){a.rq=m;b.preventDefault()}else{a.kc=a.ic;a.ic=c;Ih(a,b,c,h);c.He=b.detail;if(b.target.M)c.wf=b.target.M;if(!Lh(a,b,new E,c.wf)){a.qa.doMouseUp();Af(a);Mh(a,c,b)}}}};a.gg=function(b){if(a.isEnabled){var c=a.kc;a.kc=a.ic;a.ic=c;Ih(a,b,c,h);c.bubbles=h;c.Ei=b.wheelDelta!==f?b.wheelDelta:-40*b.detail;
a.qa.doMouseWheel();Mh(a,c,b)}};a.Cn=function(){if(a.isEnabled){var b=a.qa;b.cancelWaitAfter();b instanceof $e&&b.xF()}};a.ny=function(){var b=a.oa,c=a.zb,d=0;if(a.Xo)d=a.Ae;var e=0;if(a.Wo)e=a.Ae;if(c.clientWidth!==b.width+d||c.clientHeight!==b.height+e){a.wj=h;a.hi=h}pf(a)};a.pD=function(b){if(a.isEnabled){a.Rw=o;if(b.touches.length>1){a.qa.doCancel();if(a.Dk&&u.sA){b.preventDefault();b.cancelBubble=h;return o}Kh(a);b.cancelBubble=o;return h}var c=a.kc;a.kc=a.ic;a.ic=c;c.b=a;var d=a.oh(b.targetTouches[0]);
c.bd=a.Xr(d);c.C=d;c.Wg=0;c.button=0;c.He=1;c.Ei=0;c.ud=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.wf=b.target.M?b.target.M:m;c.ad=m;a.If=c.copy();yf=m;a.qa.doMouseDown();var e=c.copy();a.Jt=setTimeout(function(){e.button=2;a.F=e;a.Rw=h;a.qa.doMouseUp()},850);Mh(a,c,b)}};a.oD=function(b){if(a.isEnabled){if(b.touches.length>1){a.qa.doCancel();Kh(a);if(a.Dk&&u.sA){b.preventDefault();b.cancelBubble=h;return o}b.cancelBubble=o;return h}var c=a.kc;a.kc=a.ic;a.ic=c;var d=m,e,g=m;b.changedTouches.length>
0?g=b.changedTouches[0]:b.targetTouches.length>0&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;if(d&&d.M){e=d.M.oh(g);i=d.M}else{e=a.oh(b.changedTouches[0]);i=a}c.C=e;c.bd=i.Xr(e)}else if(a.kc!==m){c.C=a.kc.C;c.bd=a.kc.bd;d=a.kc.wf}else if(a.If!==m){c.C=a.If.C;c.bd=a.If.bd;d=a.If.wf}c.Wg=0;c.button=0;c.He=1;c.Ei=0;c.ud=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.wf=d===m?b.target.M:d.M?d.M:m;c.ad=m;a.qa.isBeyondDragSize()&&Kh(a);if(!Jh(g?g:b,new E,
c.wf)){a.qa.doMouseMove();Mh(a,c,b)}}};a.nD=function(b){if(a.isEnabled){Kh(a);if(a.Rw){b.preventDefault();return o}var c=a.kc;a.kc=a.ic;a.ic=c;if(!(b.touches.length>1)){var d=m,e,g=m;b.changedTouches.length>0?g=b.changedTouches[0]:b.targetTouches.length>0&&(g=b.targetTouches[0]);c.b=a;if(g){var d=document.elementFromPoint(g.clientX,g.clientY),i;if(d&&d.M){e=d.M.oh(g);i=d.M}else{e=a.oh(b.changedTouches[0]);i=a}c.C=e;c.bd=i.Xr(e)}else if(a.kc!==m){c.C=a.kc.C;c.bd=a.kc.bd;d=a.kc.wf}else if(a.If!==m){c.C=
a.If.C;c.bd=a.If.bd;d=a.If.wf}c.Wg=0;c.button=0;c.He=1;c.Ei=0;c.ud=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.wf=d===m?b.target.M:d.M?d.M:m;c.ad=m;if(!Lh(a,g?g:b,new E,c.wf)){a.qa.doMouseUp();Mh(a,c,b)}}}};c.addEventListener("touchstart",a.pD,o);c.addEventListener("touchmove",a.oD,o);c.addEventListener("touchend",a.nD,o);c.addEventListener("gesturestart",function(){if(a.Dk!==o){a.Zz=a.scale;a.qa.doCancel()}},o);c.addEventListener("gesturechange",function(b){if(a.Dk!==o){var c=a.oh(b),d=a.pk;
a.pk=c;a.scale=a.Zz*b.scale;a.pk=d}},o);c.addEventListener("mousemove",a.Bn,o);c.addEventListener("mousedown",a.An,o);c.addEventListener("mouseup",a.Dn,o);c.addEventListener("mousewheel",a.gg,o);c.addEventListener("DOMMouseScroll",a.gg,o);c.addEventListener("mouseout",a.Cn,o);c.addEventListener("keydown",a.LF,o);c.addEventListener("keyup",a.MF,o);c.addEventListener("selectstart",function(a){a.preventDefault();return o},o);c.addEventListener("contextmenu",function(a){a.preventDefault();return o},o);
window.addEventListener("resize",a.ny,o);c.tabIndex=0;Nh(a)}}B.prototype.focus=function(){this.oa.focus()};function Nh(a,b){if(b===f)b=a.zk;b.Bv="";b.Jl="";b.Il=""}function Bh(a){var b=new Xe;b.name="Background";a.Rq(b);b=new Xe;b.name="";a.Rq(b);b=new Xe;b.name="Foreground";a.Rq(b);b=new Xe;b.name="Adornment";b.Zc=h;a.Rq(b);b=new Xe;b.name="Tool";b.Zc=h;a.Rq(b);b=new Xe;b.name="Grid";b.Hd=o;b.Zc=h;a.lE(b,a.en("Background"))}
function Oh(a){a.Pc=new v(Ph);a.Pc.name="GRID";var b=new X;b.Ta="LineH";b.stroke="lightgray";b.Na=0.5;b.Uh=1;a.Pc.add(b);b=new X;b.Ta="LineH";b.stroke="gray";b.Na=0.5;b.Uh=5;a.Pc.add(b);b=new X;b.Ta="LineH";b.stroke="gray";b.Na=1;b.Uh=10;a.Pc.add(b);b=new X;b.Ta="LineV";b.stroke="lightgray";b.Na=0.5;b.Uh=1;a.Pc.add(b);b=new X;b.Ta="LineV";b.stroke="gray";b.Na=0.5;b.Uh=5;a.Pc.add(b);b=new X;b.Ta="LineV";b.stroke="gray";b.Na=1;b.Uh=10;a.Pc.add(b);b=new T;b.add(a.Pc);b.xd="Grid";b.by=o;b.zC=o;b.wr="GRID";
a.add(b);a.Bb.remove(b);a.Pc.visible=o}
B.prototype.Xz=function(){var a=this.M;if(a.gA){a.xt=h;var b=a.qc,c=a.jb,d=b.width,e=c.width,g=b.height,i=c.height,j=b.right,k=c.right,l=b.bottom,n=c.bottom,q=b.x,p=c.x,b=b.y,c=c.y;if(e<d||i<g){if(this.jA&&a.Fe)a.position=new E(this.scrollLeft+q,a.position.y);else if(this.kA&&a.Ge)a.position=new E(a.position.x,this.scrollTop+b);Qh(a);ph(a);a.xt=o;a.wj=o}else{var t=a.scale;if(this.jA&&a.Fe){if(q<p)a.position=new E(this.scrollLeft+q,a.position.y);if(j>k)a.position=new E(-(a.Nj.Ae-a.oa.width)+this.scrollLeft-
a.oa.width/t+a.qc.right,a.position.y)}if(this.kA&&a.Ge){if(b<c)a.position=new E(a.position.x,this.scrollTop+b);if(l>n)a.position=new E(a.position.x,-(a.Oj.scrollHeight-a.oa.height)+this.scrollTop-a.oa.height/t+a.qc.bottom)}Qh(a);a.xt=o;a.wj=o;ph(a);b=a.qc;c=a.jb;j=b.right;k=c.right;l=b.bottom;n=c.bottom;q=b.x;p=c.x;b=b.y;c=c.y;if(e>=d&&q>=p&&j<=k)a.hA.style.width="1px";if(i>=g&&b>=c&&l<=n)a.iA.style.height="1px";Rh(a)}}};B.prototype.Yz=function(){this.M.gA=h};
B.prototype.computeBounds=B.prototype.Zd=function(){this.tg.count>0&&Ah(this);if(this.Qx.V()){var a=this.Qx.copy();a.kx(this.padding);return a}for(var b=h,c=this.Ab,d=c.length,e=0;e<d;e++){var g=c.j[e];if(g.visible&&!g.Zc)for(var g=g.Bb,i=g.length,j=0;j<i;j++){var k=g.j[j];if(k.by&&k.gb()){k=k.pa;if(k.V())if(b){b=o;a=k.copy()}else a.mk(k)}}}b&&(a=new J(0,0,0,0));a.kx(this.padding);return a};
function Sh(a,b){if((b||a.sg)&&!a.wc&&a.qc.V()){a.wc=h;var c=a.sk;if(b&&a.sj!==rh)c=a.sj;var d=c!==rh?ai(a,c):a.scale,c=a.jb.copy(),e=a.oa.width/d,g=a.oa.height/d;a.position.xa();var i=a.xk;if(b&&Nb(a.fm))i=a.fm;bi(a,a.kb,a.qc,e,g,i);a.position.freeze();a.scale=d;a.wc=o;d=a.jb;d.$j(c)||a.Gr(c,d)}}
function ai(a,b){var c=a.qc;if(!c.V())return 1;var d=c.width,c=c.height,e=a.oa.width,g=a.oa.height,i=e/d,j=g/c,k=1;if(b===ci){k=Math.min(j,i);k>1&&(k=1);return k}if(b===di){k=j>i?(g-a.Ae)/c:(e-a.Ae)/d;k>1&&(k=1);return k}return a.scale}B.prototype.zoomToFit=B.prototype.uK=function(){this.scale=ai(this,ci);pf(this)};
B.prototype.alignDocument=B.prototype.$G=function(a,b){this.uj&&ei(this,this.Zd());var c=this.qc,d=this.jb,e=this.wc;this.wc=h;this.position=new E(c.x+(a.x*c.width+a.offsetX)-(b.x*d.width-b.offsetX),c.y+(a.y*c.height+a.offsetY)-(b.y*d.height-b.offsetY));this.wc=e;this.Jf||pf(this)};
function bi(a,b,c,d,e,g){if(Nb(g)){if(d>c.width)b.x=c.x+(g.x*c.width+g.offsetX)-(g.x*d-g.offsetX);if(e>c.height)b.y=c.y+(g.y*c.height+g.offsetY)-(g.y*e-g.offsetY)}if(d<c.width){g=b.x+d/2;g=Math.min(g,c.right-d/2);g=Math.max(g,c.left+d/2);b.x=g-d/2}else if(b.x>c.left)b.x=c.left;else if(b.x<c.right-d)b.x=c.right-d;if(e<c.height){d=b.y+e/2;d=Math.min(d,c.bottom-e/2);d=Math.max(d,c.top+e/2);b.y=d-e/2}else if(b.y>c.top)b.y=c.top;else if(b.y<c.bottom-e)b.y=c.bottom-e;if(!isFinite(b.x))b.x=-a.padding.left;
if(!isFinite(b.y))b.y=-a.padding.top}B.prototype.findPartAt=B.prototype.fr=function(a,b){var c=b?Tf(this,a,function(a){return a.W},function(a){return a.sx()}):this.Yc(a,function(a){return a.W});return c instanceof T?c:m};B.prototype.findObjectAt=B.prototype.Yc=function(a,b,c){b===f&&(b=m);c===f&&(c=m);var d=this.Ab.sn;for(Ah(this);d.next();){var e=d.value;if(e.visible){e=e.Yc(a,b,c);if(e!==m)return e}}return m};
function Tf(a,b,c,d){c===f&&(c=m);d===f&&(d=m);var e=a.Ab.sn;for(Ah(a);e.next();){a=e.value;if(a.visible&&!a.Zc){a=a.Yc(b,c,d);if(a!==m)return a}}return m}B.prototype.findObjectsAt=B.prototype.hn=function(a,b,c,d){b===f&&(b=m);c===f&&(c=m);if(!(d instanceof z)||!(d instanceof la))d=new z(Q);Ah(this);for(var e=this.Ab.sn;e.next();){var g=e.value;g.visible&&g.hn(a,b,c,d)}return d};
B.prototype.findObjectsIn=B.prototype.ll=function(a,b,c,d,e){b===f&&(b=m);c===f&&(c=m);d===f&&(d=o);if(!(e instanceof z)||!(e instanceof la))e=new z(Q);Ah(this);for(var g=this.Ab.sn;g.next();){var i=g.value;i.visible&&i.ll(a,b,c,d,e)}return e};B.prototype.findObjectsNear=B.prototype.jn=function(a,b,c,d,e){c===f&&(c=m);d===f&&(d=m);!(e instanceof z)&&!(e instanceof la)&&(e=new z(Q));Ah(this);for(var g=this.Ab.sn;g.next();){var i=g.value;i.visible&&i.jn(a,b,c,d,e)}return e};
function Kh(a){if(a.Jt!==-1){clearTimeout(a.Jt);a.Jt=-1}}function Ih(a,b,c,d){c.b=a;if(d){d=a.oh(b);c.bd=a.Xr(d);c.C=d}else{c.bd=a.ic.bd;c.C=a.ic.C}a=0;b.ctrlKey&&(a=a+1);b.altKey&&(a=a+2);b.shiftKey&&(a=a+4);c.Wg=a;c.button=b.button;c.He=1;c.Ei=0;c.ud=o;c.bubbles=o;c.event=b;c.timestamp=Date.now();c.wf=b.target.M?b.target.M:m;c.ad=m}
function Mh(a,b,c){if(b.bubbles){s&&(s.trace&&s.NB)&&s.trace("NOT handled "+c.type+" "+b.toString());return h}s&&(s.trace&&s.NB)&&s.trace("handled "+c.type+" "+a.qa.name+" "+b.toString());c.stopPropagation!==f&&c.stopPropagation();c.preventDefault!==f&&c.type!=="touchstart"&&c.preventDefault();c.cancelBubble=h;return o}
B.prototype.LF=function(a){if(this.M.isEnabled){var b=this.M.ic;Ih(this.M,a,b,o);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del";break;case 48:b.key="0";break;case 187:b.key="Add";break;case 189:b.key="Subtract";break;case 107:b.key=
"Add";break;case 109:b.key="Subtract";break;case 27:b.key="Esc"}this.M.qa.doKeyDown();if((a.which===187||a.which===189||a.which===48||a.which===107||a.which===109)&&a.ctrlKey===h){a.cancelBubble=h;a.preventDefault!==f?a.preventDefault():a.returnValue=o;if(Event.stop){u.g("Event.stop can fire for this browser");Event.stop(a)}a.stopPropagation!==f&&a.stopPropagation();return o}return Mh(this.M,b,a)}};
B.prototype.MF=function(a){if(this.M.isEnabled){var b=this.M.ic;Ih(this.M,a,b,o);b.key=String.fromCharCode(a.which);switch(a.which){case 33:b.key="PageUp";break;case 34:b.key="PageDown";break;case 35:b.key="End";break;case 36:b.key="Home";break;case 37:b.key="Left";break;case 38:b.key="Up";break;case 39:b.key="Right";break;case 40:b.key="Down";break;case 45:b.key="Insert";break;case 46:b.key="Del"}this.M.qa.doKeyUp();return Mh(this.M,b,a)}};
B.prototype.oh=function(a){var b=this.oa,c=0,d=0;if(b.offsetParent!==f){do{c=c+b.offsetLeft;d=d+b.offsetTop}while(b=b.offsetParent)}c=c+(this.qA+this.oA+this.hw);d=d+(this.rA+this.pA+this.iw);b=a.pageX-c;a=a.pageY-d;if(this.De!==m){a=new E(b,a);ab(a,this.De);b=a.x;a=a.y}return new E(b,a)};B.prototype.invalidateDocumentBounds=B.prototype.Ki=function(){fi(this);if(this.bx===o){this.bx=h;var a=this;setTimeout(function(){if(!(a.oa===m||a.Kg===h)){Mg(a);a.bx=o}},a.Bz)}};
function Mg(a){a.Jf||Ah(a);a.uj&&ei(a,a.Zd());Sh(a);!a.wc&&a.wj&&gi(a);for(a=a.ot.f;a.next();)Mg(a.value)}B.prototype.redraw=B.prototype.OJ=function(){if(!this.wc&&!this.Jf){ph(this);Rh(this);Qh(this);fi(this);this.update()}};B.prototype.isUpdateRequested=B.prototype.gJ=r("Kg");function pf(a){if(!a.wc&&!a.Jf&&a.Kg===o){a.Kg=h;setTimeout(function(){if(a.Kg){a.update();a.Kg=o}},a.Bz)}}
B.prototype.update=B.prototype.update=function(){if(!(this.zb===m||this.Jf))if(!this.Ko||this.Kg){if(this.Ko)this.Ko=o;this.Jf=h;this.ny();this.Kg=o;Ah(this);var a=o;if(!this.sg||this.Jq&&this.fs){hi(this);this.Jq=o;a=h}Ah(this);this.qc.V()||ei(this,this.Zd());if(a){if(!this.sg){if(this.sj!==rh)this.scale=ai(this,this.sj);else if(this.sk!==rh)this.scale=ai(this,this.sk);var b=this.position;if(b.V())this.position=b;else{b=new E;b.On(this.qc,this.SB);var c=this.jb,c=new J(0,0,c.width,c.height),d=new E;
d.On(c,this.TB);c=this.tD(d);this.position=new E(b.x-c.x,b.y-c.y);Sh(this,h)}this.ha("InitialLayoutCompleted");b=this.ca;b!==m&&b.clear();ii(this)}this.ha("LayoutCompleted")}Ah(this);!this.wc&&this.wj&&(gi(this)||gi(this));if(a&&!this.sg)this.sg=h;this.bg();this.Jf=o}};
function Ah(a){for(var b=0;b<23;b++){var c=a.tg.f;if(c===m||a.tg.count===0)break;a.tg=new la(Q);for(var d=a,e=a.tg;c.next();){var g=c.value,i=g.constructor;i===V&&ji(d,g)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(!(i!==U&&i!==T))if(d.ck()){gh(d,Infinity,Infinity);d.nc()}else e.add(d)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(i===W)if(d.ck()){gh(d,Infinity,Infinity);d.nc();ki(d)}else e.add(d)}for(c.reset();c.next();){d=c.value;i=d.constructor;if(i===bf)if(d.ck()){gh(d,Infinity,
Infinity);d.nc()}else e.add(d)}}}function ji(a,b){for(var c=b.fc,d=[];c.next();){var e=c.value,g=e.constructor;if(g===V)ji(a,e);else if(g===W)d.push(e);else{gh(e,Infinity,Infinity);e.nc()}}c=d.length;for(e=0;e<c;e++){g=d[e];gh(g,Infinity,Infinity);g.nc()}gh(b,Infinity,Infinity);b.nc()}
B.prototype.bg=function(a){this.zb===m&&u.g("No div specified");this.oa===m&&u.g("No canvas specified");if(!a)a=this.zk;var b=a!==this.zk;if(b)Nh(this);else if(!this.hi)return;if(this.Yl.count>0){for(var c=this.Yl.f;c.next();)og(c.key,c.value);this.Yl.clear()}a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.oa.width,this.oa.height);c=this.De;c.reset();this.Ib!==1&&c.scale(this.Ib);var d=this.kb;(d.x!==0||d.y!==0)&&c.translate(-d.x,-d.y);a.setTransform(c.m11,c.m12,c.m21,c.m22,c.Pa,c.Qa);if(s&&s.LE){a.fillStyle=
"red";a.fillRect(0,0,8,8);a.lineWidth=8;a.strokeStyle="rgba(255,255,0,.6)";c=this.jb;a.strokeRect(c.x,c.y,c.width,c.height);a.fillStyle="rgba(0,255,0,.2)";a.fillRect(this.qc.x,this.qc.y,this.qc.width,this.qc.height)}c=this.Ab.length;for(d=0;d<c;d++)this.Ab.j[d].bg(a,this);this.Dz?this.Dz.bv(this)&&this.GD():this.oh=aa();if(b)Nh(this);else this.hi=this.im=o};function fi(a){if(a.uj===o||a.Kg===o){a.uj=h;pf(a)}}
function ph(a,b){if(a.hi===o&&(b===f||a.jb.de(b))){a.hi=h;pf(a)}for(var c=a.ot.f;c.next();)ph(c.value)}function Rh(a){if(a.wj===o)a.wj=h}function Qh(a){if(a.im===o)a.im=h}
function gi(a){var b=a.oa;if(b!==m){var c=a.zb,d=b.width,e=b.height,g=a.BA.copy(),i=o,j=0;if(a.Xo)j=a.Ae;var k=0;if(a.Wo)k=a.Ae;if(c.clientWidth!==b.width+j||c.clientHeight!==b.height+k){b.width=c.clientWidth-j;b.height=c.clientHeight-k;Nh(a)}a.wj=o;if(!a.uz||a.xt)(d!==b.width||e!==b.height)&&a.update();else{var l=a.jb,n=a.qc,q=n.width,c=n.height,p=l.width,j=l.height,t=n.x,w=l.x,A=n.right,F=l.right,k=n.y,H=l.y,n=n.bottom,l=l.bottom,x="1px";if(a.OB&&a.Fe)if(p+1<q){x=q-p+b.width+"px";a.Nj.scrollLeft=
a.position.x-t}else if(t+1<w){x=w-t+b.width+"px";a.Nj.scrollLeft=a.Nj.scrollWidth-a.Nj.clientWidth}else if(A>F+1){x=A-F+b.width+"px";a.Nj.scrollLeft=a.position.x}q=x!=="1px";if(q!==a.Wo){b.height=x==="1px"?b.height+a.Ae:b.height-a.Ae;Nh(a);i=h}a.Wo=q;a.hA.style.width=x;q="1px";if(a.PB&&a.Ge)if(j+1<c){q=c-j+b.height+"px";a.Oj.scrollTop=a.position.y-k}else if(k+1<H){q=H-k+b.height+"px";a.Oj.scrollTop=a.Oj.scrollHeight-a.Oj.clientHeight}else if(n>l+1){q=n-l+b.height+"px";a.Oj.scrollTop=a.position.y}c=
q!=="1px";if(c!==a.Xo){b.width=q==="1px"?b.width+a.Ae:b.width-a.Ae;Nh(a);i=h}a.Xo=c;a.iA.style.height=q;c=b.width;j=b.height;a.Oj.style.height=j+"px";a.Oj.style.width=a.Xo?c+a.Ae+"px":c+"px";a.Nj.style.width=c+"px";a.Nj.style.height=a.Wo?j+a.Ae+"px":j+"px";a.gA=o;if(d!==b.width||e!==b.height){l=a.jb;a.Gr(g,l,i?h:f);a.update();return o}return h}}}
function li(a,b){for(var c=a.Ab,d=c.count,e=0;e<d;e++)c.Z(e).name===b&&u.g("Cannot add layer with the name '"+b+"', a layer of the same name is already present in this diagram.")}u.a(B,"addsToTemporaryLayer",B.prototype.Tq);u.defineProperty(B,{Tq:m},r("fz"),function(a){u.e(a,"boolean",B,"addsToTemporaryLayer");this.fz=a});
B.prototype.add=B.prototype.add=function(a){u.c(a,T,B,"add:part");var b=this.Tq?"Tool":a.xd,c=this.en(b);c===m&&(c=this.en(""));c===m&&u.g('Cannot add a Part when unable find a Layer named "'+b+'" and there is no default Layer');if(a.sa!==c){b=a.b===this?c.bk(99999999,a,h):c.bk(99999999,a);b>=0&&this.ke(ve,"parts",c,m,a,m,b);this.Ki();a.r(mi);b=a.tr;b!==m&&b(a,m,c)}};
B.prototype.bk=function(a){if(a instanceof U){this.jt.add(a);if(a instanceof V){var b=a.Sa;b===m?this.Wk.add(a):b.Pk.add(a);b=a.rb;if(b!==m)b.b=this}}else a instanceof W?this.Qs.add(a):a.constructor===T&&this.Bb.add(a);if(b=a.data){a instanceof bf||this.Ff.add(b,a);var c=this;ni(a,a,function(a){oi(c,a)})}(a.Gc===h||a.vj===h)&&this.tg.add(a);pi(a,h);if(a.gb()){ph(this);fi(this)}};
B.prototype.vd=function(a){if(a instanceof U){this.jt.remove(a);if(a instanceof V){var b=a.Sa;b===m?this.Wk.remove(a):b.Pk.remove(a);b=a.rb;if(b!==m)b.b=m}}else a instanceof W?this.Qs.remove(a):a.constructor===T&&this.Bb.remove(a);if(b=a.data){a instanceof bf||this.Ff.remove(b);var c=this;ni(a,a,function(a){qi(c,a)})}this.tg.remove(a);if(a.gb()){ph(this);fi(this)}};
B.prototype.remove=B.prototype.remove=function(a){u.c(a,T,B,"remove:part");var b=a.sa;if(b!==m&&b.b===this){a.Da=o;a.r(ri);a.il();var c=b.vd(-1,a);c>=0&&this.ke(we,"parts",b,a,m,c,m);c=a.tr;c!==m&&c(a,b,m);this.Ki();this.qa.standardMouseOver()}};B.prototype.addLayer=B.prototype.Rq=function(a){u.c(a,Xe,B,"addLayer:layer");li(this,a.name);a.tf(this);var b=this.Ab,c=b.count-1;if(!a.Zc)for(;c>=0&&b.Z(c).Zc;)c--;b.ec(c+1,a);fi(this)};
B.prototype.addLayerBefore=B.prototype.lE=function(a,b){u.c(a,Xe,B,"addLayer:layer");li(this,a.name);a.tf(this);for(var c=this.Ab.count,d=0;d<c;d++)if(this.Ab.Z(d)===b){this.Ab.ec(d,a);break}fi(this)};B.prototype.addLayerAfter=B.prototype.WG=function(a,b){u.c(a,Xe,B,"addLayer:layer");li(this,a.name);a.tf(this);for(var c=this.Ab.count,d=0;d<c;d++)if(this.Ab.Z(d)===b){this.Ab.ec(d+1,a);break}fi(this)};
B.prototype.removeLayer=B.prototype.SJ=function(a){if(a.name!==""&&this.Ab.remove(a)){for(var b=a.Bb.copy().f;b.next();){var c=b.value,d=c.xd;c.xd="";if(d!==a.name)c.xd=d}fi(this)}};B.prototype.findLayer=B.prototype.en=function(a){for(var b=this.vr;b.next();){var c=b.value;if(c.name===a)return c}return m};B.prototype.addChangedListener=B.prototype.jx=function(a){u.e(a,"function",B,"addChangedListener:listener");if(this.ci===m)this.ci=new z("function");this.ci.add(a)};
B.prototype.removeChangedListener=B.prototype.By=function(a){u.e(a,"function",B,"removeChangedListener:listener");if(this.ci!==m){this.ci.remove(a);if(this.ci.count===0)this.ci=m}};B.prototype.$t=function(a){this.bb||this.ca.MB(a);if(this.ci!==m)for(var b=this.ci.f;b.next();){var c=b.value;c(a)}};B.prototype.raiseChangedEvent=B.prototype.ke=function(a,b,c,d,e,g,i){g===f&&(g=m);i===f&&(i=m);var j=new se;j.b=this;j.Mc=a;j.propertyName=b;j.object=c;j.oldValue=d;j.Pe=g;j.newValue=e;j.Oe=i;this.$t(j)};
B.prototype.raiseChanged=B.prototype.d=function(a,b,c,d,e){this.ke(ue,a,this,b,c,d,e)};u.m(B,{ca:"undoManager"},function(){return this.Pf.ca});u.a(B,"skipsUndoManager",B.prototype.bb);u.defineProperty(B,{bb:"skipsUndoManager"},r("ti"),function(a){u.e(a,"boolean",B,"skipsUndoManager");this.ti=a});
B.prototype.changeState=B.prototype.Wq=function(a,b){if(a!==m&&a.b===this){var c=this.Fk;try{this.Fk=h;var d=a.Mc;if(d===ue){var e=a.object,g=a.propertyName,i=a.$(b);u.ab(e,g,i);if(e instanceof Q){var j=e.W;j!==m&&j.Og()}}else if(d===ve){var k=a.object,l=a.Oe,e=a.newValue;if(k instanceof v){if(typeof l==="number"&&e instanceof Q){var n=k;b?n.vd(l):n.ec(l,e);j=k.W;j!==m&&j.Og()}}else if(k instanceof Xe){var q=a.Pe===h;if(typeof l==="number"&&e instanceof T){var p=k;if(b){e.Og();p.vd(l,e,q)}else p.bk(l,
e,q)}}else u.g("unknown ChangedEvent.Insert object: "+a.toString())}else if(d===we){k=a.object;l=a.Pe;e=a.oldValue;if(k instanceof v){if(typeof l==="number"&&e instanceof Q){n=k;b?n.ec(l,e):n.vd(l)}}else if(k instanceof Xe){q=a.Oe===h;if(typeof l==="number"&&e instanceof T){p=k;if(b)p.bk(l,e,q);else{e.Og();p.vd(l,e,q)}}}else u.g("unknown ChangedEvent.Remove object: "+a.toString())}else d!==te&&u.g("unknown ChangedEvent: "+a.toString())}finally{this.Fk=c}}};
B.prototype.startTransaction=B.prototype.Fb=function(a){return this.ca.Fb(a)};B.prototype.commitTransaction=B.prototype.Ld=function(a){return this.ca.Ld(a)};B.prototype.rollbackTransaction=B.prototype.Ir=function(){return this.ca.Ir()};B.prototype.updateAllTargetBindings=B.prototype.sK=function(){for(var a=this.Qi;a.next();)a.value.gc();for(a=this.fk;a.next();)a.value.gc();for(a=this.links;a.next();)a.value.gc()};
B.prototype.Gr=function(a,b,c){if(!this.wc){Qh(this);ph(this);Rh(this);fi(this);var d=this.rb;d!==m&&(d.Du&&!c&&(a.width!==b.width||a.height!==b.height))&&d.r();Sh(this);this.ha("ViewportBoundsChanged",c?{}:m,a);ii(this)}};
function ii(a){var b=a.Pc;if(b!==m&&b.visible){for(var c,d=c=1,e=b.wa.length,g=0;g<e;g++){var i=b.wa.j[g],j=i.Uh;j<2||(i.Ta==="LineV"?d=d*j/ld(d,j):c=c*j/ld(c,j))}e=b.mr;c=new eb(c*e.width,d*e.height);a=a.jb;if(a.V()){b.width=a.width+c.width*2;b.height=a.height+c.height*2;a=kd(a.x,a.y,0,0,c.width,c.height);b.W.location=new E(a.x-c.width,a.y-c.height)}}}B.prototype.clearSelection=B.prototype.wx=function(){this.ha("ChangingSelection");of(this);this.ha("ChangedSelection")};
function of(a){if(a.selection.count>0){for(var b=a.selection.yf(),c=b.length,d=0;d<c;d++)b[d].Da=o;a.selection.clear()}}B.prototype.select=B.prototype.select=function(a){if(a!==m&&a.sa.b===this&&(!a.Da||this.selection.count>1)){this.ha("ChangingSelection");of(this);a.Da=h;this.ha("ChangedSelection")}};B.prototype.selectCollection=B.prototype.Fy=function(a){this.ha("ChangingSelection");of(this);for(a=a.f;a.next();)a.value.Da=h;this.ha("ChangedSelection")};
B.prototype.scroll=function(a,b,c){c===f&&(c=1);var d=b==="up"||b==="down",e;if(a==="pixel")e=c;else if(a==="line")e=c*(d?this.Kr:this.Jr);else if(a==="page"){if(window.innerHeight!==0){e=Math.max(window.innerHeight-(d?this.Kr:this.Jr),0);e=c*e}}else u.g("scrolling unit must be 'pixel', 'line', or 'page', not: "+a);e=e/this.scale;c=this.position.copy();b==="up"?c.y=this.position.y-e:b==="down"?c.y=this.position.y+e:b==="left"?c.x=this.position.x-e:b==="right"?c.x=this.position.x+e:u.g("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+
b);this.position=c};B.prototype.scrollToRect=B.prototype.YJ=function(a){var b=this.jb;if(!b.el(a)){a=a.au;a.x=a.x-b.width/2;a.y=a.y-b.height/2;this.position=a}};B.prototype.centerRect=B.prototype.EH=function(a){var b=this.jb,a=a.au;a.x=a.x-b.width/2;a.y=a.y-b.height/2;this.position=a};B.prototype.transformDocToView=B.prototype.Xr=function(a){var b=this.De;b.reset();this.Ib!==1&&b.scale(this.Ib);var c=this.kb;(c.x!==0||c.y!==0)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return a.copy().transform(this.De)};
B.prototype.transformViewToDoc=B.prototype.tD=function(a){var b=this.De;b.reset();this.Ib!==1&&b.scale(this.Ib);var c=this.kb;(c.x!==0||c.y!==0)&&(isFinite(c.x)&&isFinite(c.y))&&b.translate(-c.x,-c.y);return ab(a.copy(),this.De)};var rh;B.None=rh=u.l(B,"None",0);var ci;B.Uniform=ci=u.l(B,"Uniform",1);var di;B.UniformToFill=di=u.l(B,"UniformToFill",2);var $f;B.CycleAll=$f=u.l(B,"CycleAll",10);var dg;B.CycleNotDirected=dg=u.l(B,"CycleNotDirected",11);var fg;
B.CycleNotDirectedFast=fg=u.l(B,"CycleNotDirectedFast",12);var gg;B.CycleNotUndirected=gg=u.l(B,"CycleNotUndirected",13);var ag;B.CycleDestinationTree=ag=u.l(B,"CycleDestinationTree",14);var cg;B.CycleSourceTree=cg=u.l(B,"CycleSourceTree",15);u.a(B,"validCycle",B.prototype.zD);u.defineProperty(B,{zD:"validCycle"},r("Qt"),function(a){var b=this.Qt;if(b!==a){u.Ra(a,B,B,"validCycle");this.Qt=a;this.d("validCycle",b,a)}});u.m(B,{vr:"layers"},function(){return this.Ab.f});u.a(B,"isModelReadOnly",B.prototype.Nd);
u.defineProperty(B,{Nd:"isModelReadOnly"},function(){var a=this.Pf;return a===m?o:a.Ja},function(a){var b=this.Pf;if(b!==m)b.Ja=a});u.a(B,"isReadOnly",B.prototype.Ja);u.defineProperty(B,{Ja:"isReadOnly"},r("xj"),function(a){var b=this.xj;if(b!==a){u.e(a,"boolean",B,"isReadOnly");this.xj=a;this.d("isReadOnly",b,a)}});u.a(B,"isEnabled",B.prototype.isEnabled);
u.defineProperty(B,{isEnabled:"isEnabled"},r("ph"),function(a){var b=this.ph;if(b!==a){u.e(a,"boolean",B,"isEnabled");this.ph=a;this.d("isEnabled",b,a)}});u.a(B,"allowClipboard",B.prototype.Xt);u.defineProperty(B,{Xt:"allowClipboard"},r("Yr"),function(a){var b=this.Yr;if(b!==a){u.e(a,"boolean",B,"allowClipboard");this.Yr=a;this.d("allowClipboard",b,a)}});u.a(B,"allowCopy",B.prototype.Hh);
u.defineProperty(B,{Hh:"allowCopy"},r("Wi"),function(a){var b=this.Wi;if(b!==a){u.e(a,"boolean",B,"allowCopy");this.Wi=a;this.d("allowCopy",b,a)}});u.a(B,"allowDelete",B.prototype.Sj);u.defineProperty(B,{Sj:"allowDelete"},r("Xi"),function(a){var b=this.Xi;if(b!==a){u.e(a,"boolean",B,"allowDelete");this.Xi=a;this.d("allowDelete",b,a)}});u.a(B,"allowDragOut",B.prototype.Yt);
u.defineProperty(B,{Yt:"allowDragOut"},r("Zr"),function(a){var b=this.Zr;if(b!==a){u.e(a,"boolean",B,"allowDragOut");this.Zr=a;this.d("allowDragOut",b,a)}});u.a(B,"allowDrop",B.prototype.KA);u.defineProperty(B,{KA:"allowDrop"},r("$r"),function(a){var b=this.$r;if(b!==a){u.e(a,"boolean",B,"allowDrop");this.$r=a;this.d("allowDrop",b,a)}});u.a(B,"allowTextEdit",B.prototype.Wm);
u.defineProperty(B,{Wm:"allowTextEdit"},r("gj"),function(a){var b=this.gj;if(b!==a){u.e(a,"boolean",B,"allowTextEdit");this.gj=a;this.d("allowTextEdit",b,a)}});u.a(B,"allowGroup",B.prototype.Qm);u.defineProperty(B,{Qm:"allowGroup"},r("Yi"),function(a){var b=this.Yi;if(b!==a){u.e(a,"boolean",B,"allowGroup");this.Yi=a;this.d("allowGroup",b,a)}});u.a(B,"allowUngroup",B.prototype.Xm);
u.defineProperty(B,{Xm:"allowUngroup"},r("hj"),function(a){var b=this.hj;if(b!==a){u.e(a,"boolean",B,"allowUngroup");this.hj=a;this.d("allowUngroup",b,a)}});u.a(B,"allowInsert",B.prototype.Rm);u.defineProperty(B,{Rm:"allowInsert"},r("bs"),function(a){var b=this.bs;if(b!==a){u.e(a,"boolean",B,"allowInsert");this.bs=a;this.d("allowInsert",b,a)}});u.a(B,"allowLink",B.prototype.$k);
u.defineProperty(B,{$k:"allowLink"},r("Zi"),function(a){var b=this.Zi;if(b!==a){u.e(a,"boolean",B,"allowLink");this.Zi=a;this.d("allowLink",b,a)}});u.a(B,"allowRelink",B.prototype.yi);u.defineProperty(B,{yi:"allowRelink"},r("bj"),function(a){var b=this.bj;if(b!==a){u.e(a,"boolean",B,"allowRelink");this.bj=a;this.d("allowRelink",b,a)}});u.a(B,"allowMove",B.prototype.Tj);
u.defineProperty(B,{Tj:"allowMove"},r("$i"),function(a){var b=this.$i;if(b!==a){u.e(a,"boolean",B,"allowMove");this.$i=a;this.d("allowMove",b,a)}});u.a(B,"allowPrint",B.prototype.Sm);u.defineProperty(B,{Sm:"allowPrint"},r("aj"),function(a){var b=this.aj;if(b!==a){u.e(a,"boolean",B,"allowPrint");this.aj=a;this.d("allowPrint",b,a)}});u.a(B,"allowReshape",B.prototype.Tm);
u.defineProperty(B,{Tm:"allowReshape"},r("cj"),function(a){var b=this.cj;if(b!==a){u.e(a,"boolean",B,"allowReshape");this.cj=a;this.d("allowReshape",b,a)}});u.a(B,"allowResize",B.prototype.Um);u.defineProperty(B,{Um:"allowResize"},r("dj"),function(a){var b=this.dj;if(b!==a){u.e(a,"boolean",B,"allowResize");this.dj=a;this.d("allowResize",b,a)}});u.a(B,"allowRotate",B.prototype.Vm);
u.defineProperty(B,{Vm:"allowRotate"},r("ej"),function(a){var b=this.ej;if(b!==a){u.e(a,"boolean",B,"allowRotate");this.ej=a;this.d("allowRotate",b,a)}});u.a(B,"allowSelect",B.prototype.Hd);u.defineProperty(B,{Hd:"allowSelect"},r("fj"),function(a){var b=this.fj;if(b!==a){u.e(a,"boolean",B,"allowSelect");this.fj=a;this.d("allowSelect",b,a)}});u.a(B,"allowUndo",B.prototype.lx);
u.defineProperty(B,{lx:"allowUndo"},r("cs"),function(a){var b=this.cs;if(b!==a){u.e(a,"boolean",B,"allowUndo");this.cs=a;this.d("allowUndo",b,a)}});u.a(B,"allowZoom",B.prototype.Uq);u.defineProperty(B,{Uq:"allowZoom"},r("es"),function(a){var b=this.es;if(b!==a){u.e(a,"boolean",B,"allowZoom");this.es=a;this.d("allowZoom",b,a)}});u.a(B,"hasVerticalScrollbar",B.prototype.PB);
u.defineProperty(B,{PB:"hasVerticalScrollbar"},r("Fs"),function(a){var b=this.Fs;if(b!==a){u.e(a,"boolean",B,"hasVerticalScrollbar");this.Fs=a;this.d("hasVerticalScrollbar",b,a);Sh(this)}});u.a(B,"hasHorizontalScrollbar",B.prototype.OB);u.defineProperty(B,{OB:"hasHorizontalScrollbar"},r("Es"),function(a){var b=this.Es;if(b!==a){u.e(a,"boolean",B,"hasHorizontalScrollbar");this.Es=a;this.d("hasHorizontalScrollbar",b,a);Sh(this)}});u.a(B,"allowHorizontalScroll",B.prototype.Fe);
u.defineProperty(B,{Fe:"allowHorizontalScroll"},r("as"),function(a){var b=this.as;if(b!==a){u.e(a,"boolean",B,"allowHorizontalScroll");this.as=a;this.d("allowHorizontalScroll",b,a);Sh(this)}});u.a(B,"allowVerticalScroll",B.prototype.Ge);u.defineProperty(B,{Ge:"allowVerticalScroll"},r("ds"),function(a){var b=this.ds;if(b!==a){u.e(a,"boolean",B,"allowVerticalScroll");this.ds=a;this.d("allowVerticalScroll",b,a);Sh(this)}});u.a(B,"scrollHorizontalLineChange",B.prototype.Jr);
u.defineProperty(B,{Jr:"scrollHorizontalLineChange"},r("yt"),function(a){var b=this.yt;if(b!==a){u.e(a,"number",B,"scrollHorizontalLineChange");a<0&&u.ia(a,">= 0",B,"scrollHorizontalLineChange");this.yt=a;this.d("scrollHorizontalLineChange",b,a)}});u.a(B,"scrollVerticalLineChange",B.prototype.Kr);
u.defineProperty(B,{Kr:"scrollVerticalLineChange"},r("zt"),function(a){var b=this.zt;if(b!==a){u.e(a,"number",B,"scrollVerticalLineChange");a<0&&u.ia(a,">= 0",B,"scrollVerticalLineChange");this.zt=a;this.d("scrollVerticalLineChange",b,a)}});u.a(B,"lastInput",B.prototype.F);u.defineProperty(B,{F:"lastInput"},r("ic"),function(a){s&&u.c(a,qe,B,"lastInput");this.ic=a});u.a(B,"firstInput",B.prototype.cc);u.defineProperty(B,{cc:"firstInput"},r("If"),function(a){s&&u.c(a,qe,B,"firstInput");this.If=a});
u.a(B,"currentCursor",B.prototype.pc);u.defineProperty(B,{pc:"currentCursor"},r("ts"),function(a){u.e(a,"string",B,"currentCursor");if(!(this.ts===a||a===""&&this.ts===this.wo)){this.ts=a;if(a!==""){this.oa.style.cursor=a;document.body.style.cursor=a}else{this.oa.style.cursor=this.Ex;document.body.style.cursor=this.Ex}}});u.a(B,"defaultCursor",B.prototype.Ex);
u.defineProperty(B,{Ex:"defaultCursor"},r("wo"),function(a){u.e(a,"string",B,"defaultCursor");var b=this.wo;if(b!==a){this.wo=a;this.d("defaultCursor",b,a)}});u.a(B,"hasGestureZoom",B.prototype.vF);u.defineProperty(B,{vF:"hasGestureZoom"},r("Dk"),function(a){var b=this.Dk;if(b!==a){u.e(a,"boolean",B,"hasGestureZoom");this.Dk=a;this.d("hasGestureZoom",b,a)}});u.a(B,"click",B.prototype.click);
u.defineProperty(B,{click:"click"},r("ih"),function(a){var b=this.ih;if(b!==a){a!==m&&u.e(a,"function",B,"click");this.ih=a;this.d("click",b,a)}});u.a(B,"doubleClick",B.prototype.jl);u.defineProperty(B,{jl:"doubleClick"},r("lh"),function(a){var b=this.lh;if(b!==a){a!==m&&u.e(a,"function",B,"doubleClick");this.lh=a;this.d("doubleClick",b,a)}});u.a(B,"contextClick",B.prototype.Zq);
u.defineProperty(B,{Zq:"contextClick"},r("jh"),function(a){var b=this.jh;if(b!==a){a!==m&&u.e(a,"function",B,"contextClick");this.jh=a;this.d("contextClick",b,a)}});u.a(B,"mouseOver",B.prototype.Cr);u.defineProperty(B,{Cr:"mouseOver"},r("yh"),function(a){var b=this.yh;if(b!==a){a!==m&&u.e(a,"function",B,"mouseOver");this.yh=a;this.d("mouseOver",b,a)}});u.a(B,"mouseHover",B.prototype.Br);
u.defineProperty(B,{Br:"mouseHover"},r("xh"),function(a){var b=this.xh;if(b!==a){a!==m&&u.e(a,"function",B,"mouseHover");this.xh=a;this.d("mouseHover",b,a)}});u.a(B,"mouseHold",B.prototype.Ar);u.defineProperty(B,{Ar:"mouseHold"},r("wh"),function(a){var b=this.wh;if(b!==a){a!==m&&u.e(a,"function",B,"mouseHold");this.wh=a;this.d("mouseHold",b,a)}});u.a(B,"mouseDragOver",B.prototype.sC);
u.defineProperty(B,{sC:"mouseDragOver"},r("dt"),function(a){var b=this.dt;if(b!==a){a!==m&&u.e(a,"function",B,"mouseDragOver");this.dt=a;this.d("mouseDragOver",b,a)}});u.a(B,"mouseDrop",B.prototype.zr);u.defineProperty(B,{zr:"mouseDrop"},r("vh"),function(a){var b=this.vh;if(b!==a){a!==m&&u.e(a,"function",B,"mouseDrop");this.vh=a;this.d("mouseDrop",b,a)}});u.a(B,"toolTip",B.prototype.Wr);
u.defineProperty(B,{Wr:"toolTip"},r("Fh"),function(a){var b=this.Fh;if(b!==a){a!==m&&u.c(a,bf,B,"toolTip");this.Fh=a;this.d("toolTip",b,a)}});u.a(B,"contextMenu",B.prototype.contextMenu);u.defineProperty(B,{contextMenu:"contextMenu"},r("kh"),function(a){var b=this.kh;if(b!==a){a!==m&&u.c(a,bf,B,"contextMenu");this.kh=a;this.d("contextMenu",b,a)}});u.a(B,"commandHandler",B.prototype.Kd);
u.defineProperty(B,{Kd:"commandHandler"},r("Lv"),function(a){var b=this.Lv;if(b!==a){u.c(a,C,B,"commandHandler");a.b!==m&&u.g("Cannot share CommandHandlers between Diagrams: "+a.toString());b!==m&&b.tf(m);this.Lv=a;a.tf(this)}});u.a(B,"toolManager",B.prototype.Mb);u.defineProperty(B,{Mb:"toolManager"},r("Pt"),function(a){var b=this.Pt;if(b!==a){u.c(a,$e,B,"toolManager");a.b!==m&&u.g("Cannot share ToolManagers between Diagrams: "+a.toString());b!==m&&b.tf(m);this.Pt=a;a.tf(this)}});
u.a(B,"defaultTool",B.prototype.iu);u.defineProperty(B,{iu:"defaultTool"},r("Tv"),function(a){var b=this.Tv;if(b!==a){u.c(a,qf,B,"defaultTool");this.Tv=a;if(this.qa===b)this.qa=a}});u.a(B,"currentTool",B.prototype.qa);u.defineProperty(B,{qa:"currentTool"},r("Ov"),function(a){var b=this.Ov;if(b!==m){b.Q&&b.doDeactivate();b.cancelWaitAfter();b.doStop()}if(a===m)a=this.iu;if(a!==m){u.c(a,qf,B,"currentTool");this.Ov=a;a.tf(this);a.doStart()}});u.m(B,{selection:"selection"},r("lA"));
u.a(B,"maxSelectionCount",B.prototype.lC);u.defineProperty(B,{lC:"maxSelectionCount"},r("Xs"),function(a){var b=this.Xs;if(b!==a){u.e(a,"number",B,"maxSelectionCount");if(a>=0&&!isNaN(a)){this.Xs=a;this.d("maxSelectionCount",b,a);if(!this.ca.$a){a=this.selection.count-a;if(a>0){this.ha("ChangingSelection");for(var b=this.selection.yf(),c=0;c<a;c++)b[c].Da=o;this.ha("ChangedSelection")}}}else u.ia(a,">= 0",B,"maxSelectionCount")}});u.a(B,"nodeSelectionAdornmentTemplate",B.prototype.vC);
u.defineProperty(B,{vC:"nodeSelectionAdornmentTemplate"},r("ww"),function(a){var b=this.ww;if(b!==a){u.c(a,bf,B,"nodeSelectionAdornmentTemplate");this.ww=a;this.d("nodeSelectionAdornmentTemplate",b,a)}});u.a(B,"groupSelectionAdornmentTemplate",B.prototype.KB);u.defineProperty(B,{KB:"groupSelectionAdornmentTemplate"},r("gw"),function(a){var b=this.gw;if(b!==a){u.c(a,bf,B,"groupSelectionAdornmentTemplate");this.gw=a;this.d("groupSelectionAdornmentTemplate",b,a)}});
u.a(B,"linkSelectionAdornmentTemplate",B.prototype.hC);u.defineProperty(B,{hC:"linkSelectionAdornmentTemplate"},r("ow"),function(a){var b=this.ow;if(b!==a){u.c(a,bf,B,"linkSelectionAdornmentTemplate");this.ow=a;this.d("linkSelectionAdornmentTemplate",b,a)}});u.a(B,"isModified",B.prototype.GF);u.defineProperty(B,{GF:"isModified"},function(){var a=this.ca;return a===m?this.Kz:a.gl!==m?h:this.Kz&&this.qj!==a.Ji},function(a){u.e(a,"boolean",B,"isModified");this.Kz=a;var b=this.ca;if(!a&&b)this.qj=b.Ji});
u.a(B,"model",B.prototype.J);u.defineProperty(B,{J:"model"},r("Pf"),function(a){var b=this.Pf;if(b!==a){u.c(a,D,B,"model");b!==m&&(b.ca!==a.ca&&b.ca.EF)&&u.g("Do not replace a Diagram.model while a transaction is in progress.");this.sg=o;this.Ko=h;this.Kg=o;var c=this.Jf;this.Jf=h;if(b!==m){b.By(this.Qz);b instanceof P&&th(this,b.dg);th(this,b.Yg)}this.Pf=a;a.jx(this.Pz);uh(this,a.Yg);a instanceof P&&vh(this,a.dg);a.By(this.Pz);a.jx(this.Qz);this.Jf=c;pf(this);if(b!==m)a.ca.isEnabled=b.ca.isEnabled}});
function sh(a,b,c){var d=a.cg(b);if(d!==m&&typeof c==="string")d.gc(c);else{d=m;for(a=a.Ik.f;a.next();){for(var e=a.value,g=0;g<e.length;g++){var i=e[g];if(i.$e!==m){i=i.$e.$(b);if(i!==m){d===m&&(d=[]);d.push(i)}}}if(d!==m)break}b=d;if(b!==m&&typeof c==="string")for(d=0;d<b.length;d++)b[d].gc(c)}}function oi(a,b){var c=b.yj;if(u.isArray(c)){var d=a.Ik.$(c);if(d===m)a.Ik.add(c,[b]);else{for(c=0;c<d.length;c++)if(d[c]===b)return;d.push(b)}}}
function qi(a,b){var c=b.yj;if(u.isArray(c)){var d=a.Ik.$(c);if(d!==m)for(var e=0;e<d.length;e++)if(d[e]===b){d.splice(e,1);d.length===0&&a.Ik.remove(c);break}}}
B.prototype.clear=B.prototype.clear=function(){var a=m;if(this.Pc!==m)a=this.Pc.W;this.J.clear();for(var b=this.Ab.length,c=0;c<b;c++)this.Ab.j[c].clear();this.tg.clear();this.Yl.clear();this.jt.clear();this.Wk.clear();this.Qs.clear();this.Bb.clear();this.Ff.clear();this.Ik.clear();this.lA.clear();this.Tl=this.Iw=m;this.ys=(new J(NaN,NaN,NaN,NaN)).freeze();if(a!==m){this.add(a);this.Bb.remove(a)}};
B.prototype.reset=B.prototype.reset=function(){this.clear();this.Ab=new z(Xe);this.kb=(new E(NaN,NaN)).freeze();this.Ib=1;this.at=1E-4;this.Ws=100;this.Tt=(new E(NaN,NaN)).freeze();this.Cs=(new J(NaN,NaN,NaN,NaN)).freeze();this.sk=rh;this.xk=Ub;this.sj=rh;this.fm=Ub;this.Hs=this.Gs=Vb;this.gs=(new qb(16,16,16,16)).freeze();this.Ns=h;this.Qt=$f;this.wo="auto";this.Pf=this.kh=this.Fh=this.vh=this.dt=this.wh=this.xh=this.yh=this.jh=this.lh=this.ih=m;this.xj=o;this.Xi=this.Wi=this.Yr=this.ph=h;this.$r=
this.Zr=o;this.ds=this.as=this.Fs=this.Es=this.es=this.cs=this.fj=this.ej=this.dj=this.cj=this.aj=this.$i=this.bj=this.Zi=this.bs=this.hj=this.Yi=this.gj=h;this.zt=this.yt=16;this.Fd=(new qb(5)).freeze();this.Xs=999999999;this.Sc=m;Bh(this);Ch(this);this.Pc=m;this.J=new P;this.ti=h;this.rb=new Dh;this.ti=o};
B.prototype.rebuildParts=B.prototype.wl=function(){for(var a=[],b=this.selection.f;b.next();){var c=b.value.data;c&&a.push(c)}b=this.J;b instanceof P&&th(this,b.dg);th(this,b.Yg);uh(this,b.Yg);b instanceof P&&vh(this,b.dg);for(b=0;b<a.length;b++)if(c=this.cg(a[b]))c.Da=h};function uh(a,b){if(b!==m){for(var c=a.J,d=u.wb(b),e=0;e<d;e++){var g=u.mb(b,e);c.Ai(g)?wh(a,g,o):xh(a,g)}if(c instanceof P){for(e=0;e<d;e++){g=u.mb(b,e);c.Ai(g)&&si(a,g)}for(c=a.links;c.next();)ti(c.value)}a.Zx(o)}}
function wh(a,b,c){if(!(b===f||b===m)&&!a.ca.$a&&!a.Ff.contains(b)){c===f&&(c=h);var d=a.getCategoryForNodeData(b),e=a.findTemplateForNodeData(b,d);if(e instanceof T){nf(e);e=e.copy();if(e instanceof T){e.ij=d;a.add(e);e.data=b;c&&si(a,b)}}}}B.prototype.getCategoryForNodeData=B.prototype.FB=function(a){var b=this.J,c=b.FB(a),d=o;b instanceof P&&(d=b.ey(a));d&&c===""&&(c="LinkLabel");return c};
B.prototype.findTemplateForNodeData=B.prototype.DI=function(a,b){var c=o,d=this.J;d instanceof P&&(c=d.$x(a));if(c){c=this.Wx.$(b);if(c===m){c=this.Wx.$("");if(c===m){if(u.eE===f){u.eE=h;u.trace('No Group template found for category "'+b+'"');u.trace("  Using default group template")}c=this.MD}}}else{c=this.vy.$(b);if(c===m){c=this.vy.$("");if(c===m){if(u.hE===f){u.hE=h;u.trace('No Node template found for category "'+b+'"');u.trace("  Using default node template")}c=this.PD}}}return c instanceof T?
c:m};function si(a,b){var c=a.J;if(c instanceof P){var d=c.Vb(b);if(d!==f){var e=c.xB(d),g=a.cg(b);if(e!==m&&g!==m&&g instanceof U){for(e=e.f;e.next();){var i=e.value;if(c.Ai(i)){if(g instanceof V&&c.lr(i)===d){var j=a.cg(i);if(j!==m)j.Sa=g}}else{j=a.Hi(i);if(j!==m){if(c.mn(i)===d)j.da=g;if(c.nn(i)===d)j.fa=g;for(var i=c.nl(i),k=0;k<i.length;k++)if(i[k]===d){g.fe=j;break}}}}c.Tg(d)}c=c.lr(b);if(c!==f){c=a.Th(c);if(c instanceof V)g.Sa=c}}}}
function vh(a,b){if(b!==m){for(var c=u.wb(b),d=0;d<c;d++)xh(a,u.mb(b,d));a.Zx(o)}}
function xh(a,b){if(!(b===f||b===m)&&!a.ca.$a&&!a.Ff.contains(b)){var c=a.getCategoryForLinkData(b),d=a.findTemplateForLinkData(b,c);if(d instanceof W){nf(d);d=d.copy();if(d instanceof W){d.ij=c;var c=a.J,e=c.mn(b);if(e!==f){e=a.Th(e);if(e instanceof U)d.da=e}e=c.qF(b);d.Ug=e;e=c.nn(b);if(e!==f){e=a.Th(e);if(e instanceof U)d.fa=e}e=c.sF(b);d.Zh=e;c=c.nl(b);if(u.isArray(c))for(var e=u.wb(c),g=0;g<e;g++){var i=a.Th(u.mb(c,g));if(i!==m)i.fe=d}a.add(d);d.data=b}}}}
B.prototype.getCategoryForLinkData=B.prototype.EB=function(a){return this.J.EB(a)};B.prototype.findTemplateForLinkData=B.prototype.CI=function(a,b){var c=this.jy.$(b);if(c===m){c=this.jy.$("");if(c===m){if(u.gE===f){u.gE=h;u.trace('No Link template found for category "'+b+'"');u.trace("  Using default link template")}c=this.OD}}return c instanceof W?c:m};function th(a,b){for(var c=u.wb(b),d=0;d<c;d++)yh(a,u.mb(b,d))}
function yh(a,b){if(!(b===f||b===m)){var c=a.cg(b);if(c instanceof T){var d=c.sa;if(!(d===m||d.b!==a)){var e=a.J;if(e instanceof P&&c instanceof U){var g=e.Vb(c.data);if(g!==f){for(var i=c.ge;i.next();){var j=i.value.data;e.ag(g,j)}if(c.Li){i=c.fe;if(i!==m){j=i.data;e.ag(g,j)}}if(c instanceof V)for(i=c.fc;i.next();){j=i.value.data;e.Ai(j)&&e.ag(g,j)}}}c.Da=o;e=d.vd(-1,c);e>=0&&a.ke(we,"parts",d,c,m,e,m);e=c.tr;e!==m&&e(c,d,m)}}}}
B.prototype.findPartForKey=B.prototype.AI=function(a){if(a===m||a===f)return m;a=this.J.Sg(a);if(a===m)return m;a=this.Ff.$(a);return a instanceof T?a:m};B.prototype.findNodeForKey=B.prototype.Th=function(a){if(a===m||a===f)return m;a=this.J.Sg(a);if(a===m)return m;a=this.Ff.$(a);return a instanceof U?a:m};B.prototype.findPartForData=B.prototype.cg=function(a){if(a===m)return m;a=this.Ff.$(a);return a instanceof T?a:m};
B.prototype.findNodeForData=B.prototype.kF=function(a){if(a===m)return m;a=this.Ff.$(a);return a instanceof U?a:m};B.prototype.findLinkForData=B.prototype.Hi=function(a){if(a===m)return m;a=this.Ff.$(a);return a instanceof W?a:m};u.a(B,"nodeTemplate",B.prototype.ZF);u.defineProperty(B,{ZF:"nodeTemplate"},function(){return this.oi.$("")},function(a){var b=this.oi.$("");if(b!==a){u.c(a,T,B,"nodeTemplate");this.oi.add("",a);this.d("nodeTemplate",b,a);this.ca.$a||this.wl()}});
u.a(B,"nodeTemplateMap",B.prototype.vy);u.defineProperty(B,{vy:"nodeTemplateMap"},r("oi"),function(a){var b=this.oi;if(b!==a){u.c(a,ka,B,"nodeTemplateMap");this.oi=a;this.d("nodeTemplateMap",b,a);this.ca.$a||this.wl()}});u.a(B,"groupTemplate",B.prototype.uF);u.defineProperty(B,{uF:"groupTemplate"},function(){return this.Ck.$("")},function(a){var b=this.Ck.$("");if(b!==a){u.c(a,V,B,"groupTemplate");this.Ck.add("",a);this.d("groupTemplate",b,a);this.ca.$a||this.wl()}});u.a(B,"groupTemplateMap",B.prototype.Wx);
u.defineProperty(B,{Wx:"groupTemplateMap"},r("Ck"),function(a){var b=this.Ck;if(b!==a){u.c(a,ka,B,"groupTemplateMap");this.Ck=a;this.d("groupTemplateMap",b,a);this.ca.$a||this.wl()}});u.a(B,"linkTemplate",B.prototype.PF);u.defineProperty(B,{PF:"linkTemplate"},function(){return this.Bj.$("")},function(a){var b=this.Bj.$("");if(b!==a){u.c(a,W,B,"linkTemplate");this.Bj.add("",a);this.d("linkTemplate",b,a);this.ca.$a||this.wl()}});u.a(B,"linkTemplateMap",B.prototype.jy);
u.defineProperty(B,{jy:"linkTemplateMap"},r("Bj"),function(a){var b=this.Bj;if(b!==a){u.c(a,ka,B,"linkTemplateMap");this.Bj=a;this.d("linkTemplateMap",b,a);this.ca.$a||this.wl()}});u.a(B,"isMouseCaptured",B.prototype.Bc);
u.defineProperty(B,{Bc:"isMouseCaptured"},r("Lz"),function(a){var b=this.oa;if(a){this.F.bubbles=o;b.removeEventListener("mousemove",this.Bn,o);b.removeEventListener("mousedown",this.An,o);b.removeEventListener("mouseup",this.Dn,o);b.removeEventListener("mousewheel",this.gg,o);b.removeEventListener("DOMMouseScroll",this.gg,o);b.removeEventListener("mouseout",this.Cn,o);window.addEventListener("mousemove",this.Bn,h);window.addEventListener("mousedown",this.An,h);window.addEventListener("mouseup",this.Dn,
h);window.addEventListener("mousewheel",this.gg,h);window.addEventListener("DOMMouseScroll",this.gg,h);window.addEventListener("mouseout",this.Cn,h);window.addEventListener("selectstart",this.preventDefault,o)}else{window.removeEventListener("mousemove",this.Bn,h);window.removeEventListener("mousedown",this.An,h);window.removeEventListener("mouseup",this.Dn,h);window.removeEventListener("mousewheel",this.gg,h);window.removeEventListener("DOMMouseScroll",this.gg,h);window.removeEventListener("mouseout",
this.Cn,h);window.removeEventListener("selectstart",this.preventDefault,o);b.addEventListener("mousemove",this.Bn,o);b.addEventListener("mousedown",this.An,o);b.addEventListener("mouseup",this.Dn,o);b.addEventListener("mousewheel",this.gg,o);b.addEventListener("DOMMouseScroll",this.gg,o);b.addEventListener("mouseout",this.Cn,o)}this.Lz=a});u.a(B,"position",B.prototype.position);
u.defineProperty(B,{position:"position"},r("kb"),function(a){var b=this.kb;if(!b.u(a)){u.c(a,E,B,"position");var c=this.jb.copy();c.x=b.x;c.y=b.y;if(b.ou(a))a=b;else if(!this.wc){this.wc=h;b=this.scale;bi(this,a,this.qc,this.oa.width/b,this.oa.height/b,this.xk);this.wc=o}this.kb=a.B();this.Gr(c,this.jb);pf(this)}});u.a(B,"grid",B.prototype.yu);
u.defineProperty(B,{yu:"grid"},function(){this.Pc===m&&Oh(this);return this.Pc},function(a){var b=this.Pc;if(b!==a){if(b===m){Oh(this);b=this.Pc}u.c(a,v,B,"grid");a.type!==Ph&&u.g("Diagram.grid must be a Panel of type Panel.Grid");b.U.remove(b);this.Pc=a;a.name="GRID";b.U.add(a);ph(this);this.d("grid",b,a)}});u.m(B,{jb:"viewportBounds"},function(){var a=this.kb,b=this.Ib,c=this.oa,d=this.BA;d.Wd(a.x,a.y,Math.max(c.width,0)/b,Math.max(c.height,0)/b);return d});u.a(B,"fixedBounds",B.prototype.Qx);
u.defineProperty(B,{Qx:"fixedBounds"},r("Cs"),function(a){var b=this.Cs;if(!b.u(a)){u.c(a,J,B,"fixedBounds");this.Cs=a=a.B();fi(this);this.d("fixedBounds",b,a)}});u.m(B,{qc:"documentBounds"},r("ys"));function ei(a,b){var c=a.ys;if(!c.u(b)){b=b.B();a.ys=b;a.uj=o;Sh(a);a.ha("DocumentBoundsChanged",m,c.copy());Rh(a)}}u.a(B,"scale",B.prototype.scale);
u.defineProperty(B,{scale:"scale"},r("Ib"),function(a){var b=this.Ib;if(b!==a){u.i(a,B,"scale");this.Ib=a;var c=a;if(a<this.Pi)c=this.Pi;if(a>this.Oi)c=this.Oi;if(!isNaN(a)&&!this.wc&&!this.Jf){this.wc=h;var d=this.jb.copy(),e=this.oa.width/c,g=this.oa.height/c;d.width=this.oa.width/b;d.height=this.oa.height/b;var i=this.pk.copy();if(isNaN(i.x))switch(this.fu){case sc:i.x=0;break;case tc:i.x=e-1;break;case Zb:i.x=e/2;break;case Ub:case wc:i.x=e/2}if(isNaN(i.y))switch(this.fu){case rc:i.y=0;break;
case uc:i.y=g-1;break;case Zb:i.y=g/2;break;case Ub:case wc:i.y=g/2}var j=this.position,a=new E(j.x+i.x/b-i.x/a,j.y+i.y/b-i.y/a);bi(this,a,this.qc,e,g,this.xk);this.position=a;this.wc=o;e=this.jb;this.Ib=c;this.Gr(d,e)}ph(this);Rh(this)}});u.a(B,"autoScale",B.prototype.px);u.defineProperty(B,{px:"autoScale"},r("sk"),function(a){var b=this.sk;if(b!==a){u.Ra(a,B,B,"autoScale");this.sk=a;this.d("autoScale",b,a);a!==rh&&Sh(this)}});u.a(B,"initialAutoScale",B.prototype.zF);
u.defineProperty(B,{zF:"initialAutoScale"},r("sj"),function(a){var b=this.sj;if(b!==a){u.Ra(a,B,B,"initialAutoScale");this.sj=a;this.d("initialAutoScale",b,a)}});u.a(B,"initialViewportSpot",B.prototype.TB);u.defineProperty(B,{TB:"initialViewportSpot"},r("Hs"),function(a){var b=this.Hs;if(b!==a){u.c(a,K,B,"initialViewportSpot");Nb(a)||u.g("initialViewportSpot must be a real Spot: "+a);this.Hs=a;this.d("initialViewportSpot",b,a)}});u.a(B,"initialDocumentSpot",B.prototype.SB);
u.defineProperty(B,{SB:"initialDocumentSpot"},r("Gs"),function(a){var b=this.Gs;if(b!==a){u.c(a,K,B,"initialDocumentSpot");Nb(a)||u.g("initialViewportSpot must be a real Spot: "+a);this.Gs=a;this.d("initialDocumentSpot",b,a)}});u.a(B,"minScale",B.prototype.Pi);u.defineProperty(B,{Pi:"minScale"},r("at"),function(a){u.i(a,B,"minScale");var b=this.at;if(b!==a&&a>0){this.at=a;this.d("minScale",b,a);if(a>this.scale)this.scale=a}else u.ia(a,"> 0",B,"minScale")});u.a(B,"maxScale",B.prototype.Oi);
u.defineProperty(B,{Oi:"maxScale"},r("Ws"),function(a){u.i(a,B,"maxScale");var b=this.Ws;if(b!==a&&a>0){this.Ws=a;this.d("maxScale",b,a);if(a<this.scale)this.scale=a}else u.ia(a,"> 0",B,"maxScale")});u.a(B,"zoomPoint",B.prototype.pk);u.defineProperty(B,{pk:"zoomPoint"},r("Tt"),function(a){if(!this.Tt.u(a)){u.c(a,E,B,"zoomPoint");this.Tt=a=a.B();fi(this)}});u.a(B,"contentAlignment",B.prototype.fu);
u.defineProperty(B,{fu:"contentAlignment"},r("xk"),function(a){var b=this.xk;if(!b.u(a)){u.c(a,K,B,"contentAlignment");this.xk=a=a.B();this.d("contentAlignment",b,a);Sh(this)}});u.a(B,"initialContentAlignment",B.prototype.AF);u.defineProperty(B,{AF:"initialContentAlignment"},r("fm"),function(a){var b=this.fm;if(!b.u(a)){u.c(a,K,B,"initialContentAlignment");this.fm=a=a.B();this.d("initialContentAlignment",b,a)}});u.a(B,"padding",B.prototype.padding);
u.defineProperty(B,{padding:"padding"},r("Fd"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,B,"padding");var b=this.Fd;if(!b.u(a)){this.Fd=a=a.B();fi(this);this.d("padding",b,a)}});u.m(B,{fk:"nodes"},function(){return this.jt.f});u.m(B,{links:"links"},function(){return this.Qs.f});u.m(B,{Qi:"parts"},function(){return this.Bb.f});u.a(B,"layout",B.prototype.rb);
u.defineProperty(B,{rb:"layout"},r("Sc"),function(a){var b=this.Sc;if(b!==a){u.c(a,Dh,B,"layout");if(b!==m){b.b=m;b.group=m}this.Sc=a;a.b=this;a.group=m;this.fs=h;this.d("layout",b,a)}});B.prototype.layoutDiagram=B.prototype.lJ=function(a){Ah(this);a&&this.Zx(h);hi(this)};B.prototype.invalidateAllLayouts=B.prototype.Zx=function(a){for(var b=this.Wk.f;b.next();)ui(this,b.value,a);if(this.rb!==m)a?this.rb.Ne=o:this.rb.r()};
function ui(a,b,c){if(b!==m){for(var d=b.Pk.f;d.next();)ui(a,d.value,c);if(b.rb!==m)c?b.rb.Ne=o:b.rb.r()}}function hi(a){for(var b=a.Wk.f;b.next();)vi(a,b.value);b=a.rb;if(b!==m&&!b.Ne){b.doLayout(a);b.Ne=h}a.fs=o}function vi(a,b){if(b!==m){for(var c=b.Pk.f;c.next();)vi(a,c.value);c=b.rb;if(c!==m&&!c.Ne){b.Wz=!b.location.V();c.doLayout(b);b.r(wi);c.Ne=h}}}u.a(B,"isTreePathToChildren",B.prototype.mf);
u.defineProperty(B,{mf:"isTreePathToChildren"},r("Ns"),function(a){var b=this.Ns;if(b!==a){u.e(a,"boolean",B,"isTreePathToChildren");this.Ns=a;this.d("isTreePathToChildren",b,a);if(!this.ca.$a)for(a=this.fk;a.next();)xi(a.value)}});u.a(B,"isCollapsingExpanding",B.prototype.lf);u.defineProperty(B,{lf:m},r("Hz"),ba("Hz"));function yi(a,b){var c=a.Vv.$(b);if(c!==m)return c;c=a.Vv.$(b.toLowerCase());if(c!==m)return c;u.g("Unknown DiagramEvent name: "+b);return m}
B.prototype.addDiagramListener=B.prototype.FA=function(a,b){u.e(a,"string",B,"addDiagramListener:name");u.e(b,"function",B,"addDiagramListener:listener");var c=yi(this,a);c!==m&&c.add(b)};B.prototype.removeDiagramListener=B.prototype.HC=function(a,b){u.e(a,"string",B,"removeDiagramListener:name");u.e(b,"function",B,"addDiagramListener:listener");var c=yi(this,a);c!==m&&c.remove(b)};
B.prototype.raiseDiagramEvent=B.prototype.ha=function(a,b,c){s&&u.e(a,"string",B,"raiseDiagramEvent:name");var d=yi(this,a),e=new re;e.b=this;var g=this.Uv.$(a),a=g!==m?g:this.Uv.$(a.toLowerCase());e.name=a;if(b!==f)e.Wu=b;if(c!==f)e.Ju=c;for(b=d.f;b.next();){c=b.value;c(e)}return e.cancel};function Wf(a,b){for(var c=a.ll(b,function(a){return a.W},function(a){return a instanceof W},h).f;c.next();){var d=c.value;d.Te===Hf&&If(d)}}
function zi(a,b){if(b!==m&&b.canAvoid()){for(var c=b.getAvoidableRectangle(),d=a.Jc.cl,e=a.Jc.bl,g=c.x+c.width,i=c.y+c.height,j=c.x;j<g;j=j+d){for(var k=c.y;k<i;k=k+e)Ai(a.Jc,j,k);Ai(a.Jc,j,i)}for(k=c.y;k<i;k=k+e)Ai(a.Jc,g,k);Ai(a.Jc,g,i)}}function Bi(a,b){if(a.Jc!==m&&!a.Jc.pn&&(b===m||b.canAvoid()))a.Jc.pn=h}
function Jh(a,b,c){if(yf!==m){c instanceof B||(c=m);var d=Ff;if(c!==d){d!==m&&d.Mb.ae!==m&&d.Mb.ae.tB();c!==m&&c.Mb.ae!==m&&c.Mb.ae.sB()}Ff=c;if(c===m)return h;d=c.Mb.ae;if(d!==m){a!==m&&(b=c.oh(a));c.ic.C=b;d.eF()}return h}return o}
function Lh(a,b,c,d){if(yf!==m){d===m&&(d=m);var e=Ff;if(d!==e){e!==m&&e.Mb.ae!==m&&e.Mb.ae.tB();d!==m&&d.Mb.ae!==m&&d.Mb.ae.sB()}Ff=d;if(d===m){yf.doCancel();return h}if(d!==a){a=c;b!==m&&(a=d.oh(b));d.ic.C=a;b=d.Mb.ae;b!==m&&b.fF();yf!==m&&yf.doCancel();return h}}return o}u.a(B,"autoScrollRegion",B.prototype.PA);
u.defineProperty(B,{PA:"autoScrollRegion"},r("gs"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,B,"autoScrollRegion");var b=this.gs;if(!b.u(a)){this.gs=a=a.B();fi(this);this.d("autoScrollRegion",b,a)}});
function Vf(a){if(a.jg===m){a.jg={};var b;b=a.qa!==a.Mb.ae?a.ID:a.JD;a.jg.isEnabled=h;var c=setInterval(function(){var b=c;if(a.jg!==m&&a.jg.isEnabled){a.jg=m;clearInterval(b);b=Uf(a,a.Gv);if(!b.$j(a.position)){a.position=b;a.F.C=a.tD(a.Gv);a.qa.doMouseMove();a.uj=h;ei(a,a.Zd());a.hi=h;a.update();Vf(a)}}},b);a.jg.id=c}}function Af(a){if(a.jg!==m){a.jg.isEnabled&&clearInterval(a.jg.id);a.jg=m}}
function Uf(a,b){var c=a.position,d=a.PA;if(d.top<=0&&d.left<=0&&d.right<=0&&d.bottom<=0)return c;var e=a.jb,g=new J(0,0,e.width,e.height),e=new E(0,0);if(b.x>=g.x&&b.x<g.x+d.left){var i=Math.max(a.Jr,1),i=i|0;e.x=e.x-i;if(b.x<g.x+d.left/2)e.x=e.x-i;if(b.x<g.x+d.left/4)e.x=e.x-4*i}else if(b.x<=g.x+g.width&&b.x>g.x+g.width-d.right){i=Math.max(a.Jr,1);i=i|0;e.x=e.x+i;if(b.x>g.x+g.width-d.right/2)e.x=e.x+i;if(b.x>g.x+g.width-d.right/4)e.x=e.x+4*i}if(b.y>=g.y&&b.y<g.y+d.top){i=Math.max(a.Kr,1);i=i|0;
e.y=e.y-i;if(b.y<g.y+d.top/2)e.y=e.y-i;if(b.y<g.y+d.top/4)e.y=e.y-4*i}else if(b.y<=g.y+g.height&&b.y>g.y+g.height-d.bottom){i=Math.max(a.Kr,1);i=i|0;e.y=e.y+i;if(b.y>g.y+g.height-d.bottom/2)e.y=e.y+i;if(b.y>g.y+g.height-d.bottom/4)e.y=e.y+4*i}if(!e.$j(new E(0,0))){d=a.scale;c=new E(c.x+e.x/d,c.y+e.y/d)}return c}
B.prototype.makeImage=B.prototype.nJ=function(a){if(this.oa===m)return m;typeof a!=="object"&&u.g("properties argument must be an Object.");this.Do=o;Nh(this);var b=document.createElement("canvas");b.width=this.oa.width;b.height=this.oa.height;var c=b.getContext("2d");ph(this);this.bg(c);Nh(this);this.Do=h;c=new Image;c.src=b.toDataURL(a.type,a.details);return c};
B.prototype.makeImageData=B.prototype.oJ=function(a){if(this.oa===m)return"";typeof a!=="object"&&u.g("properties argument must be an Object.");this.Do=o;Nh(this);var b=document.createElement("canvas");b.width=this.oa.width;b.height=this.oa.height;var c=b.getContext("2d");ph(this);this.bg(c);Nh(this);this.Do=h;return b.toDataURL(a.type,a.details)};
B.prototype.renderJson=B.prototype.hg=function(a){this.mh=new ka;this.mg=new ra;if(a instanceof Object&&a._tabString!==f)this.mg.uA=a._tabString;Ci(this,this);this.mh.clear();a=this.mg.toString();this.mg=m;return a};
function Ci(a,b){if(b instanceof Object&&(!(b instanceof T)||b.gb()))if(!(b instanceof Q)||b.visible)if(!(b instanceof Xe)||b.visible){var c=a.mg;if(b instanceof E)c.add('"'+Ra(b)+'"');else if(b instanceof eb)c.add('"'+hb(b)+'"');else if(b instanceof J)c.add('"'+nb(b)+'"');else if(b instanceof qb)c.add('"'+ub(b)+'"');else if(b instanceof K)c.add('"'+Mb(b)+'"');else{var d;b instanceof md?d=a.mh.$(b):b instanceof Be&&(d=a.mh.$(b));d=typeof d==="number"?d:-1;if(d>-1)c.add('{ "class":"ref", "id":'+d+
" }");else{c.rj++;c.add('{ "class": "'+u.Ii(b)+'"');d=-1;if(b instanceof md){d=a.mh.count;a.mh.add(b,d)}else if(b instanceof Be){d=a.mh.count;a.mh.add(b,d)}d>-1&&c.add(', "id":'+d);b instanceof Q?b.hg():Di(a,b,Object.getPrototypeOf(b));c.add(" }");Aa(c)}}}}function Di(a,b,c){if(c&&c.constructor!==Object){Di(a,b,Object.getPrototypeOf(c));if(c.constructor){c=c.constructor.RG;if(c instanceof Array)for(var d=0;d<c.length;d++){var e=c[d];if(typeof e==="string"){var g=u.Va(b,e);Ei(a,e,g)}}}}}
function Ei(a,b,c){if(c!==f){var d=a.mg;d.add(",");Da(d);d.add('"'+b+'": ');Fi(a,c)}}
function Fi(a,b){var c=a.mg;if(b===f)c.add("undefined");else if(b===m)c.add("null");else if(b===h)c.add("true");else if(b===o)c.add("false");else if(typeof b==="string")c.add(a.J.quote(b));else if(typeof b==="number"){b===Infinity&&c.add("9e9999");b===-Infinity&&c.add("-9e9999");isNaN(b)?c.add('{"class":"NaN"}'):c.add(b.toString())}else if(typeof b==="function")c.add("null");else if(u.isArray(b)){c=a.mg;c.rj++;for(var d=u.wb(b),e=o,g=0;g<d;g++){var i=u.mb(b,g);if(typeof i==="object"){e=h;break}}c.add("[");
e&&Da(c);for(g=0;g<d;g++){i=u.mb(b,g);if(i!==f){if(g>0){c.add(",");e&&Da(c)}Fi(a,i)}}e&&c.add(" ");c.add("]");Aa(c)}else if(b instanceof ja)c.add(a.J.quote(b.toString()));else if(b instanceof ka){c=a.mg;c.rj++;c.add("{");Da(c);d=b.f;for(e=h;d.next();){g=d.key;i=d.value;if(e)e=o;else{c.add(",");Da(c)}c.add('"'+g+'": ');Fi(a,i)}c.add(" }");Aa(c)}else if(b instanceof z||b instanceof la||b.f!==f){c=a.mg;c.rj++;c.add("[");Da(c);d=b.f;for(e=0;d.next();){g=d.value;if(g!==f){if(e>0){c.add(",");Da(c)}Fi(a,
g);e++}}c.add(" ]");Aa(c)}else b instanceof Object?Ci(a,b):c.add(b.toString())}B.inherit=function(a,b){u.na(a,b)};function Gi(a){B.call(this,a);this.Yt=h;this.Tj=o;this.Ja=h;this.fu=Xb;this.rb=new Hi}u.H("Palette",Gi);u.na(Gi,B);
function Ii(a){B.call(this,a);this.wc=h;this.qi=m;var a=new T,b=new X;b.stroke="magenta";b.Na=2;b.fill=m;b.name="BOXSHAPE";a.Nn="BOXSHAPE";a.wr="BOXSHAPE";a.add(b);this.Pl=a;a=new Ji;a.tf(this);this.Mb.ie.ec(0,a);var c=this;this.xC=function(){Ki(c)};this.wC=function(){if(c.qi!==m){fi(c);ph(c)}};this.Ja=h;this.Hh=this.Hd=o;this.px=ci;this.Mb.sl=sf;this.wc=o}u.H("Overview",Ii);u.na(Ii,B);
Ii.prototype.bg=function(){this.zb===m&&u.g("No div specified");this.oa===m&&u.g("No canvas specified");if(this.hi){var a=this.qi;if(a!==m){var b=this.zk;b.Bv="";b.setTransform(1,0,0,1,0,0);b.clearRect(0,0,this.oa.width,this.oa.height);var c=this.De;c.reset();this.Ib!==1&&c.scale(this.scale);(this.position.x!==0||this.position.y!==0)&&c.translate(-this.kb.x,-this.kb.y);b.setTransform(c.m11,c.m12,c.m21,c.m22,c.Pa,c.Qa);for(var d=this.jb,e=a.Ab.length,c=0;c<e;c++)for(var g=b,i=d,j=a.Ab.j[c].Bb,k=j.length,
l=0;l<k;l++){var n=j.j[l];n.pa.de(i)&&n.bg(g,this)}a=this.Ab.length;for(c=0;c<a;c++)this.Ab.j[c].bg(b,this);this.hi=this.im=o}}};u.a(Ii,"observed",Ii.prototype.$F);
u.defineProperty(Ii,{$F:"observed"},r("qi"),function(a){var b=this.qi;a!==m&&u.c(a,B,Ii,"observed");if(b!==a&&!(a instanceof Ii)){if(b!==m){this.remove(this.Zf);b.HC("ViewportBoundsChanged",this.xC);b.HC("DocumentBoundsChanged",this.wC);b.ot.remove(this)}this.qi=a;if(a!==m){a.FA("ViewportBoundsChanged",this.xC);a.FA("DocumentBoundsChanged",this.wC);a.ot.add(this);this.add(this.Zf);Ki(this)}fi(this);this.d("observed",b,a)}});u.a(Ii,"box",Ii.prototype.Zf);
u.defineProperty(Ii,{Zf:"box"},r("Pl"),function(a){var b=this.Pl;if(b!==a){this.Pl=a;this.d("box",b,a)}});function Ki(a){var b=a.Zf;if(b!==m){var c=a.qi;if(c!==m){a.hi=h;var c=c.jb,d=b.Mn;d.ja=new eb(c.width,c.height);a=2/a.scale;if(d instanceof X)d.Na=a;b.location=new E(c.x-a/2,c.y-a/2)}}}Ii.prototype.Zd=function(){var a=this.qi;return a===m?new J(0,0,0,0):a.qc};Ii.prototype.Gr=function(a){if(!this.wc){Qh(this);ph(this);Rh(this);fi(this);Ki(this);this.ha("ViewportBoundsChanged",a)}};
function Ji(){qf.call(this);this.name="MoveBox"}u.na(Ji,qf);Ji.prototype.doStart=Ji.prototype.Ix=function(){this.Q=this.b.Bc=h};Ji.prototype.doMouseMove=Ji.prototype.Rg=function(){if(this.Q){var a=this.b;if(!(a===m||a.qi===m)){var b=a.qi,c=b.jb,d=a.F.C;b.position=new E(d.x-c.width/2,d.y-c.height/2);pf(a)}}};Ji.prototype.doMouseUp=Ji.prototype.Ke=function(){this.Q&&this.doMouseMove();this.stopTool()};Ji.prototype.doStop=Ji.prototype.Gi=function(){this.Q=o;var a=this.b;a.Bc=o;Ki(a)};
function Be(a){u.Gb(this);this.Ha=o;if(a===f){this.I=Le;this.Sl="black"}else if(typeof a==="string"){this.I=Le;this.Sl=a}else{s&&u.Ra(a,Be,Be,"constructor:type");this.I=a;this.Sl="black"}a=this.I;if(a===Me){this.Am=Xb;this.am=ec}else if(a===Ne)this.am=this.Am=Zb;else this.am=this.Am=Tb;this.Gt=0;this.As=NaN;this.jz=this.kz=this.Ef=this.qt=this.Cf=m}u.H("Brush",Be);var Le;Be.Solid=Le=u.l(Be,"Solid",0);var Me;Be.Linear=Me=u.l(Be,"Linear",1);var Ne;Be.Radial=Ne=u.l(Be,"Radial",2);var Li;
Be.Pattern=Li=u.l(Be,"Pattern",2);Be.prototype.copy=Be.prototype.copy=function(){var a=new Be;a.I=this.I;a.Sl=this.Sl;a.Am=this.Am;a.am=this.am;a.Gt=this.Gt;a.As=this.As;if(this.Cf!==m)a.Cf=this.Cf.copy();a.qt=this.qt;return a};Be.prototype.Ga=function(){this.freeze();Object.freeze(this);return this};Be.prototype.freeze=function(){this.Ha=h;this.Cf!==m&&this.Cf.freeze();return this};
Be.prototype.xa=function(){Object.isFrozen(this)&&u.g("cannot thaw constant: "+this);this.Ha=o;this.Cf!==m&&this.Cf.xa();return this};Be.prototype.toString=function(){var a="Brush(";if(this.type===Le)a=a+this.color;else{a=this.type===Me?a+"Linear ":this.type===Ne?a+"Radial ":this.type===Li?a+"Pattern ":a+"(unknown) ";a=a+(this.start+" "+this.end);if(this.Zm!==m)for(var b=this.Zm.f;b.next();)a=a+(" "+b.key+":"+b.value)}return a+")"};
Be.prototype.addColorStop=Be.prototype.addColorStop=function(a,b){u.v(this);(a===m||a>1||a<0)&&u.ia(a,"0 <= loc <= 1",Be,"addColorStop:loc");u.e(b,"string",Be,"addColorStop:color");if(this.Cf===m)this.Cf=new ka("number","string");this.Cf.add(a,b);if(this.I===Le)this.type=Me;this.Ef=m};u.a(Be,"type",Be.prototype.type);
u.defineProperty(Be,{type:"type"},r("I"),function(a){u.v(this,a);u.Ra(a,Be,Be,"type");this.I=a;if(Pb(this.start))if(a===Me)this.start=Xb;else if(a===Ne)this.start=Zb;if(Pb(this.end))if(a===Me)this.end=ec;else if(a===Ne)this.end=Zb;this.Ef=m});u.a(Be,"color",Be.prototype.color);u.defineProperty(Be,{color:"color"},r("Sl"),function(a){u.v(this,a);u.e(a,"string",Be,"color");this.Sl=a;this.Ef=m});u.a(Be,"start",Be.prototype.start);
u.defineProperty(Be,{start:"start"},r("Am"),function(a){u.v(this,a);a instanceof K||u.sc(a,"Spot",Be,"start");this.Am=a.B();this.Ef=m});u.a(Be,"end",Be.prototype.end);u.defineProperty(Be,{end:"end"},r("am"),function(a){u.v(this,a);a instanceof K||u.sc(a,"Spot",Be,"end");this.am=a.B();this.Ef=m});u.a(Be,"startRadius",Be.prototype.Rn);u.defineProperty(Be,{Rn:"startRadius"},r("Gt"),function(a){u.v(this,a);u.i(a,Be,"startRadius");a<0&&u.ia(a,">= zero",Be,"startRadius");this.Gt=a;this.Ef=m});
u.a(Be,"endRadius",Be.prototype.cn);u.defineProperty(Be,{cn:"endRadius"},r("As"),function(a){u.v(this,a);u.i(a,Be,"endRadius");a<0&&u.ia(a,">= zero",Be,"endRadius");this.As=a;this.Ef=m});u.a(Be,"colorStops",Be.prototype.Zm);u.defineProperty(Be,{Zm:"colorStops"},r("Cf"),function(a){u.v(this,a);s&&u.c(a,ka,Be,"colorStops");this.Cf=a;this.Ef=m});u.a(Be,"pattern",Be.prototype.pattern);u.defineProperty(Be,{pattern:"pattern"},r("qt"),function(a){u.v(this,a);this.qt=a;this.Ef=m});
Be.randomColor=function(a,b){a===f&&(a=128);if(s){u.i(a,Be,"randomColor:min");(a<0||a>255)&&u.ia(a,"0 <= min <= 255",Be,"randomColor:min")}b===f&&(b=Math.max(a,255));if(s){u.i(b,Be,"randomColor:max");(b<a||b>255)&&u.ia(b,"min <= max <= 255",Be,"randomColor:max")}var c=Math.abs(b-a);return"#"+Math.floor(a+Math.random()*c).toString(16)+Math.floor(a+Math.random()*c).toString(16)+Math.floor(a+Math.random()*c).toString(16)};
function Q(){u.Gb(this);this.Hj=m;this.qb="";this.qd=this.Lg=h;this.fh=this.gh=m;this.kb=(new E(NaN,NaN)).freeze();this.Rd=(new eb(NaN,NaN)).freeze();this.Hc=Lc;this.Of=Ec;this.De=new Ya;this.Ml=new Ya;this.pm=new Ya;this.Ib=1;this.Nb=0;this.Dg=Jg;this.yp=(new qb(0)).freeze();this.yc=(new J(NaN,NaN,NaN,NaN)).freeze();this.Wb=(new J(NaN,NaN,NaN,NaN)).freeze();this.Ic=(new J(0,0,NaN,NaN)).freeze();this.Gc=this.Zb=this.Ek=this.hm=h;this.Sp=m;this.rg=Tb;this.og=10;this.ng=Mi;this.qg=0;this.Mo=m;this.Oo=
this.No=o;this.Po=Infinity;this.Jg=Tb;this.Gg=10;this.Fg=Mi;this.Ig=0;this.Cq=m;this.Eq=this.Dq=o;this.Fq=Infinity;this.fd=m;this.ka=Ub;this.fp=o;this.bo=Ub;this.gq=0;this.Mj=1;this.K=0;this.jj=1;this.jq=-Infinity;this.iq=0;this.kq=Dc;this.lq=Ni;this.qo="";this.kh=this.Fh=this.vh=this.Gp=this.Fp=this.wh=this.xh=this.yh=this.Ip=this.Hp=this.jh=this.lh=this.ih=m;this.$o=o;this.Ob=this.Xn=this.$n=this.Zn=this.Yn=m;this.Ol=o;this.yk=m;this.wA=new J(NaN,NaN,NaN,NaN);this.jo=o;this.ko=m;this.Nl=o;this.ri=
m}u.H("GraphObject",Q);
Q.prototype.fb=function(a){a.qb=this.qb;a.Lg=this.Lg;a.qd=this.qd;a.gh=this.gh;a.fh=this.fh;a.kb.Oa(this.kb);a.Rd.Oa(this.Rd);a.Hc=this.Hc.B();a.Of=this.Of.B();a.Ib=this.Ib;a.Nb=this.Nb;a.Dg=this.Dg;a.yp.Oa(this.yp);a.yc.Oa(this.yc);a.Wb.Oa(this.Wb);a.Ic.Oa(this.Ic);a.Sp=this.Sp;a.rg=this.rg.B();a.og=this.og;a.ng=this.ng;a.qg=this.qg;a.Mo=this.Mo;a.No=this.No;a.Oo=this.Oo;a.Po=this.Po;a.Jg=this.Jg.B();a.Gg=this.Gg;a.Fg=this.Fg;a.Ig=this.Ig;a.Cq=this.Cq;a.Dq=this.Dq;a.Eq=this.Eq;a.Fq=this.Fq;a.ka=
this.ka.B();a.fp=this.fp;a.bo=this.bo.B();a.gq=this.gq;a.Mj=this.Mj;a.K=this.K;a.jj=this.jj;a.jq=this.jq;a.iq=this.iq;a.kq=this.kq.B();a.lq=this.lq;a.qo=this.qo;a.ih=this.ih;a.lh=this.lh;a.jh=this.jh;a.Hp=this.Hp;a.Ip=this.Ip;a.yh=this.yh;a.xh=this.xh;a.wh=this.wh;a.Fp=this.Fp;a.Gp=this.Gp;a.vh=this.vh;a.Fh=this.Fh;a.kh=this.kh;a.$o=this.$o;a.Yn=this.Yn;a.Zn=this.Zn;a.$n=this.$n;a.Xn=this.Xn;a.Ob=this.Ob;a.Ol=this.Ol;if(this.yk instanceof Array){a.yk=this.yk.slice(0);for(var b=0;b<this.yk.length;b++){var c=
this.yk[b];a[c]=this[c]}}a.Nl=this.Nl};Q.prototype.Qg=function(a){a.fd=m;a.ri=m;a.L()};Q.prototype.copy=Q.prototype.copy=function(){var a=new this.constructor;this.fb(a);return a};Q.prototype.toString=function(){return u.Ii(Object.getPrototypeOf(this))+"#"+u.dc(this)};var Oi;Q.None=Oi=u.l(Q,"None",0);var Jg;Q.Default=Jg=u.l(Q,"Default",0);var Ad;Q.Fill=Ad=u.l(Q,"Fill",3);var Kg;Q.Uniform=Kg=u.l(Q,"Uniform",1);var Lg;Q.UniformToFill=Lg=u.l(Q,"UniformToFill",2);var Pi;
Q.Vertical=Pi=u.l(Q,"Vertical",4);var Qi;Q.Horizontal=Qi=u.l(Q,"Horizontal",5);Q.prototype.ke=function(a,b,c,d,e,g,i){var j=this.W;if(j!==m){j.vl(a,b,c,d,e,g,i);if(this.Ol&&c===this&&a===ue){a=this.hr();if(a!==m)for(c=this.Ob.f;c.next();){d=c.value;e=a.data;g=d.Qn;g!==m&&(e=a.Le(g));if(e!==m){d.xD(this,e,b);g=d.Qn;if(g!==m){e=a;g!==""&&(e=a.Le(g));if(e!==m){g=d.Cl;if(g!==m){i=a;g!==""&&(i=a.Le(g));i!==m&&d.yD(i,e,b)}}}}}}}};Q.prototype.d=function(a,b,c){this.ke(ue,a,this,b,c)};
function Ri(a,b,c,d,e){var g=a.yc,i=a.pm;i.reset();Si(a,i,b,c,d,e);a.pm=i;g.x=b;g.y=c;g.width=d;g.height=e;i.ay()||i.sD(g)}Q.prototype.AB=function(a,b){if(this.qd===o)return o;var c=this.ma,d=a.Ph(b);return bb(a.x,a.y,0,0,0,c.height)<d||bb(a.x,a.y,0,c.height,c.width,c.height)<d||bb(a.x,a.y,c.width,c.height,c.width,0)<d||bb(a.x,a.y,c.width,0,0,0)<d?h:o};
function Ti(a,b,c,d){if(a instanceof v)for(var e=a.wa.length;e--;){var g=a.wa.j[e];if(g.visible){var i=g.pa,j=a.pa;if(!(i.x>j.width||i.y>j.height||i.x+i.width<0||i.y+i.height<0)){Ti(g,b,c,d);i=g;b!==m&&(i=b(i));i&&(c===m||c(i))&&d.add(g)}}}}
Q.prototype.containsPoint=Q.prototype.ea=function(a){s&&u.c(a,E,Q,"containsPoint:p");var b=Ab(this.transform,a),c=this.pa;if(u.Qw){var d=this.ma,e=this.ml()*(this.b!==m?this.b.scale:1),g=1/e;if(d.width*e<10&&d.height*e<10)return tb(c.x-5*g,c.y-5*g,c.width+10*g,c.height+10*g,b.x,b.y)}return(this.Gd!==f||this instanceof X?tb(c.x-5,c.y-5,c.width+10,c.height+10,b.x,b.y):c.ea(b))?this.ko&&!this.ko.ea(b)?o:this.fh!==m&&c.ea(b)||this.gh!==m&&this.Ic.ea(a)?h:this.Bi(a):o};
Q.prototype.Bi=function(a){var b=this.ma;return tb(0,0,b.width,b.height,a.x,a.y)};Q.prototype.containsRect=Q.prototype.el=function(a){s&&u.c(a,J,Q,"containsRect:r");if(this.Ka===0)return this.pa.el(a);var b=this.ma,b=new J(0,0,b.width,b.height),c=this.transform;return b.ea(c.Vh(new E(a.x,a.y)))&&b.ea(c.Vh(new E(a.x,a.bottom)))&&b.ea(c.Vh(new E(a.right,a.bottom)))&&b.ea(c.Vh(new E(a.right,a.y)))};
Q.prototype.containedInRect=Q.prototype.eu=function(a,b){s&&u.c(a,J,Q,"containedInRect:r");if(b===f)return a.el(this.pa);var c=this.ma;return!a.ea(b.vb(new E(0,0)))||!a.ea(b.vb(new E(0,c.height)))||!a.ea(b.vb(new E(c.width,c.height)))||!a.ea(b.vb(new E(c.width,0)))?o:h};
Q.prototype.intersectsRect=Q.prototype.de=function(a,b){s&&u.c(a,J,Q,"intersectsRect:r");if(b===f){b=this.transform;if(this.Ka===0)return a.de(this.pa)}var c=this.ma,d=b,e=new E(0,0),g=new E(0,c.height),i=new E(c.width,c.height),j=new E(c.width,0);if(a.ea(d.vb(e))||a.ea(d.vb(g))||a.ea(d.vb(i))||a.ea(d.vb(j)))return h;c=new J(0,0,c.width,c.height);return c.ea(d.Vh(new E(a.x,a.y)))||c.ea(d.Vh(new E(a.x,a.bottom)))||c.ea(d.Vh(new E(a.right,a.bottom)))||c.ea(d.Vh(new E(a.right,a.y)))||dd(a,e,g)||dd(a,
g,i)||dd(a,i,j)||dd(a,j,e)?h:o};Q.prototype.getDocumentPoint=Q.prototype.tb=function(a){Pb(a)&&u.g("Spot must be real");var b=this.ma,a=new E(a.x*b.width+a.offsetX,a.y*b.height+a.offsetY);this.Yd.vb(a);return a};Q.prototype.getDocumentAngle=Q.prototype.ln=function(){var a=this.Yd;return Math.atan2(a.m12,a.m11)*(180/Math.PI)};Q.prototype.getDocumentScale=Q.prototype.ml=function(){var a=this.Ib;return this.U!==m?a*this.U.ml():a};Q.prototype.getLocalPoint=Q.prototype.GB=function(a){return this.Yd.Vh(a.copy())};
Q.prototype.getNearestIntersectionPoint=Q.prototype.xu=function(a,b,c){var d=this.transform.copy();d.zu();if(this.Mg!==m)return cd(this.pa,a,b,c);if(!(this instanceof v)||this instanceof v&&this.background!==m){var e=Ab(d,a),b=Ab(d,b),a=new E,b=cd(new J(0,0,this.ma.width,this.ma.height),e,b,a),a=Ab(this.transform,a);c.x=a.x;c.y=a.y;return b}if(this instanceof v&&(this.Mg===m||this.Mg===f)){e=this.wa.j;a=Ab(d,a);d=Ab(d,b);c.set(d);for(var g=(d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y),b=o,i=e.length,j=
new E,k=0;k<i;k++){var l=e[k];if(l.visible&&l.xu(a,d,j)){b=h;l=(a.x-j.x)*(a.x-j.x)+(a.y-j.y)*(a.y-j.y);if(l<g){g=l;c.set(j)}}}c.transform(this.transform);return b}u.g("Unknown GraphObject case");return o};
function gh(a,b,c,d,e){if(a.Zb!==o){var g=a.margin,i=g.top+g.bottom,b=Math.max(b-(g.right+g.left),0),c=Math.max(c-i,0),g=a.ja,i=0;if(a.Na)i=a.Na;var b=isFinite(g.width)?g.width+i:b,c=isFinite(g.height)?g.height+i:c,g=d,i=e,j=a instanceof v;switch(Ui(a)){case Oi:i=g=0;if(j)c=b=Infinity;break;case Ad:isFinite(b)&&b>d&&(g=b);isFinite(c)&&c>e&&(i=c);break;case Qi:isFinite(b)&&b>d&&(g=b);i=0;j&&(c=Infinity);break;case Pi:isFinite(c)&&c>e&&(i=c);g=0;j&&(b=Infinity)}var j=a.yd,k=a.Pd;if(g>j.width&&k.width<
j.width)g=j.width;if(i>j.height&&k.height<j.height)i=j.height;d=Math.max(g/a.scale,k.width);e=Math.max(i/a.scale,k.height);j.width<d&&(d=Math.min(k.width,d));j.height<e&&(e=Math.min(k.height,e));b=Math.min(j.width,b);c=Math.min(j.height,c);b=Math.max(d,b);c=Math.max(e,c);g=a.Ka;if(g===90||g===270){g=b;b=c;c=g;g=d;d=e;e=g}a.yc.xa();a.xr(b,c,d,e);a.yc.freeze();a.yc.V()||u.g("Non-real measuredBounds has been set");a.Zb=o}}ea=Q.prototype;
ea.nc=function(a,b,c,d,e){Vi(this);var g=this.wA;g.set(this.Wb);this.Wb.xa();if(this.Gc===o){var i=this.Wb;i.x=a;i.y=b;i.width=c;i.height=d}else this.zi(a,b,c,d);this.Wb.freeze();this.ko=e===f?m:e;if(e!==f)this.jo=h;else if(this.U){c=this.U.Ic;d=this.ga;if(this.Mg!==m)d=this.Wb;e=b+d.height;i=a+d.width;this.jo=!(0<=a&&i<=c.width&&0<=b&&e<=c.height);if(this instanceof na){if(this.Vs>d.height)this.jo=h;if(this.om.Yh>d.width)this.jo=h}}this.Wb.V()||u.g("Non-real actualBounds has been set");Wi(this,g,
this.Wb)};ea.zi=aa();function Xi(a,b,c,d,e){var g=a.pa;g.x=b;g.y=c;g.width=d;g.height=e;if(!a.ja.V()){var g=a.yc,c=a.margin,b=c.right+c.left,i=c.top+c.bottom,c=g.width+b,g=g.height+i,d=d+b,e=e+i,b=Ui(a);c===d&&g===e&&(b=Oi);switch(b){case Oi:if(c>d||g>e){a.Zb=h;gh(a,c>d?d:c,g>e?e:g)}break;case Ad:a.Zb=h;gh(a,d,e,0,0);break;case Qi:a.Zb=h;gh(a,d,g,0,0);break;case Pi:a.Zb=h;gh(a,c,e,0,0)}}}
function Wi(a,b,c){a.Gc=o;var d=a.W;if(d!==m){var e=d.b;if(e!==m){Yi(d);if(a instanceof T){d=o;if(e.uj===o){var g=e.qc,i=e.padding,e=g.x+i.left,j=g.y+i.top,k=g.width-i.right*2,g=g.height-i.bottom*2;b.V()&&(b.x>e&&b.y>j&&b.right<k&&b.bottom<g&&c.x>e&&c.y>j&&c.right<k&&c.bottom<g)&&(d=h)}(a.kt===h||!b.u(c))&&pi(a,d)}else{Zi(a,d);$i(a);b=a.W;if(b!==m&&(b.Pj===a||b.Uk===a||b.Vk===a))b.kt=h}}}}function Zi(a,b){if(a.je!==m)b.kt=h;if(a instanceof v)for(var c=a.wa,d=c.length,e=0;e<d;e++)Zi(c.j[e],b)}
ea.bg=function(a,b){if(this.Lg){var c=o;if(this instanceof T){c=h;if(!this.gb())return;if(this.Ze){var d=this.zm;a.shadowOffsetX=d.x*b.scale;a.shadowOffsetY=d.y*b.scale;a.shadowColor=this.ym;a.shadowBlur=this.xm}}var e=this.Wb;if(!(e.width===0||e.height===0||isNaN(e.x)||isNaN(e.y))){var d=this.transform,g=this.U,i=this.Ml;i.reset();g!==m&&i.multiply(g.Yd);i.multiply(this.De);if(i=this.jo){s&&s.hF&&s.trace("clip"+this.toString());var j=g.ma;if(this.ko)var k=this.ko,l=Math.max(k.x,Math.max(e.x,j.x)),
n=Math.max(k.y,Math.max(e.y,j.y)),q=Math.abs(l-Math.min(k.right,Math.min(e.right,j.right))),k=Math.abs(n-Math.min(k.bottom,Math.min(e.bottom,j.bottom)));else{l=Math.max(e.x,j.x);n=Math.max(e.y,j.y);q=Math.min(e.right,j.right)-l;k=Math.min(e.bottom,j.bottom)-n}if(l>e.width+e.x||e.x>j.width+j.x||n>e.height+e.y||e.y>j.height+j.y)return;a.save();a.beginPath();a.rect(l,n,q,k);a.clip()}if(this.fh!==m){aj(this,a,this.fh,h,h);a.fillRect(e.x,e.y,e.width,e.height)}d.ay()||a.transform(d.m11,d.m12,d.m21,d.m22,
d.Pa,d.Qa);if(this.gh!==m){n=this.ma;j=e=0;l=n.width;n=n.height;q=0;if(this instanceof X){n=this.ua.hb;e=n.x;j=n.y;l=n.width;n=n.height;q=this.Eh}aj(this,a,this.gh,h);a.fillRect(e-q/2,j-q/2,l+q,n+q)}if(this.gh!==m||this.fh!==m||g!==m&&g.Nl||g!==m&&g.type===Hh&&g.zq!==this){this.Nl=h;var p=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}else this.Nl=o;this.br(a,b);if(this.Nl===h){a.shadowOffsetX=p[0];a.shadowOffsetY=p[1];a.shadowBlur=p[2]}if(c&&this.Ze){a.shadowOffsetX=
0;a.shadowOffsetY=0;a.shadowBlur=0}if(i){a.restore();Nh(b,a)}else if(!d.ay()){c=1/(d.m11*d.m22-d.m12*d.m21);a.transform(d.m22*c,-d.m12*c,-d.m21*c,d.m11*c,c*(d.m21*d.Qa-d.m22*d.Pa),c*(d.m12*d.Pa-d.m11*d.Qa))}}}};ea.br=aa();
ea.hg=function(){var a=this.b;if(a!==m){Ei(a,"naturalBounds",this.ma);Ei(a,"actualBounds",this.pa);this.Ka!==0&&Ei(a,"angle",this.Ka);this.scale!==1&&Ei(a,"scale",this.scale);var b=this.Yd;Ei(a,"allTransforms",[b.m11,b.m12,b.m21,b.m22,b.Pa,b.Qa]);this.background!==m&&Ei(a,"background",this.background);this.Mg!==m&&Ei(a,"areaBackground",this.Mg)}};
function aj(a,b,c,d,e){if(c!==m)if(typeof c==="string")if(d){if(b.Il!==c){b.fillStyle=c;b.Il=c}}else{if(b.Jl!==c){b.strokeStyle=c;b.Jl=c}}else if(c.type===Le){c=c.color;if(d){if(b.Il!==c){b.fillStyle=c;b.Il=c}}else if(b.Jl!==c){b.strokeStyle=c;b.Jl=c}}else{var g,i=a.ma,j=i.width,i=i.height;if(c.Ef&&c.type===Li||c.kz==j&&c.jz==i)g=c.Ef;else{var k,l,n,q=n=0;if(e){a=a.pa;j=a.width;i=a.height;n=a.x;q=a.y}if(c.start instanceof E){a=c.start.x;e=c.start.y}else if(c.start instanceof K){a=c.start.x*j;e=c.start.y*
i}else{a=Zb.x*j;e=Zb.y*i}if(c.end instanceof E){k=c.end.x;l=c.end.y}else if(c.end instanceof K){k=c.end.x*j;l=c.end.y*i}else if(c.type===Me){k=ec.x*j;l=ec.y*i}else{k=Zb.x*j;l=Zb.y*i}a=a+n;k=k+n;e=e+q;l=l+q;if(c.type===Me)g=b.createLinearGradient(a,e,k,l);else if(c.type===Ne){n=isNaN(c.cn)?Math.max(j,i)/2:c.cn;if(isNaN(c.Rn)){g=0;n=Math.max(j,i)/2}else g=c.Rn;g=b.createRadialGradient(a,e,g,k,l,n)}else c.type===Li?g=b.createPattern(c.pattern,"repeat"):u.sc(c.type,"Brush type");if(c.type!==Li)if(n=c.Zm)for(n=
n.f;n.next();)g.addColorStop(n.key,n.value);c.Ef=g;c.kz=j;c.jz=i}if(d){if(b.Il!==g){b.fillStyle=g;b.Il=g}}else if(b.Jl!==g){b.strokeStyle=g;b.Jl=g}}}Q.prototype.isContainedBy=Q.prototype.Wh=function(a){if(a instanceof v)a:{if(!(this===a||a===m))for(var b=this.U;b!==m;){if(b===a){a=h;break a}b=b.U}a=o}else a=o;return a};Q.prototype.isVisibleObject=Q.prototype.dk=function(){if(!this.visible)return o;var a=this.U;return a!==m?a.dk():h};
function bj(a){if(a.hm===h){var b=a.De;b.reset();if(!a.Wb.V()||!a.yc.V()){a.hm=o;return}b.translate(a.Wb.x,a.Wb.y);b.translate(-a.ga.x,-a.ga.y);var c=a.ma;Si(a,b,c.x,c.y,c.width,c.height);a.hm=o;a.Ek=h}if(a.Ek===h)if(a.U===m){a.Ml.set(a.De);a.Ek=o}else if(a.U.Yd!==m){b=a.Ml;b.reset();b.multiply(a.U.Ml);b.multiply(a.De);a.Ek=o}}
function Si(a,b,c,d,e,g){a.scale!==1&&b.scale(a.scale);if(a.Ka!==0){var i=Zb;if(a.nf&&Nb(a.nf))i=a.nf;var j=new E;if(a instanceof T&&a.ub!==a){c=a.ub;d=c.ma;j.zl(d.x,d.y,d.width,d.height,i);c.pm.vb(j);j.offset(-c.ga.x,-c.ga.y);for(i=c.U;i!==m&&i!==a;){i.pm.vb(j);j.offset(-i.ga.x,-i.ga.y);i=i.U}}else j.zl(c,d,e,g,i);b.rotate(a.Ka,j.x,j.y)}}
Q.prototype.L=function(){if(this.Zb!==h){this.Gc=this.Zb=h;if(this.U!==m){this.U.Zb=o;this.U.L()}else{var a=this.b;if(a!==m){a.tg.add(this);this instanceof U&&!a.ca.$a&&this.kf();pf(a)}}if(this instanceof v)for(var a=this.I===Hh,b=this.wa.j,c=b.length,d=0;d<c;d++){var e=b[d];(a||!e.ja.V()||Ui(e)!==Oi)&&e.L()}$i(this)}};function cj(a){if(a.Zb===o){a.Zb=h;a.Gc=h;if(a instanceof v)for(var a=a.wa.j,b=a.length,c=0;c<b;c++)cj(a[c])}}
function dj(a){if(a.Gc===o){if(a.U!==m)dj(a.U);else{var b=a.b;if(b!==m){b.tg.add(a);a instanceof U&&a.kf();pf(b)}}a.Gc=h}}function Vi(a){if(a.hm===o){a.hm=h;a.Ek=h;if(a instanceof v)for(a=a.elements;a.next();)ej(a.value)}}function ej(a){a.Ek=h;if(a instanceof v)for(a=a.elements;a.next();)ej(a.value)}function $i(a){if(a.U!==m)$i(a.U);else{var b=a.b;b!==m&&a.Wb.V()&&ph(b,a.Wb)}}
function Ui(a){var b=a.ah,c=a.U;if(c&&c.I===fj)return gj(a,c.td(a.ld),c.td(a.jd));if(c&&c.I===Hh&&c.zq===a)return Ad;if(b===Jg){if(c){if(c.zq===a)return Ad;a=c.Fx;return a===Jg?Oi:a}return Oi}return b}function gj(a,b,c){var d=a.ah;if(d!==Jg)return d;var e=d=f;switch(b.ah){case Pi:e=h;break;case Ad:e=h}switch(c.ah){case Qi:d=h;break;case Ad:d=h}a=a.U.Fx;d=d===f&&(a===Qi||a===Ad)?h:o;e=e===f&&(a===Pi||a===Ad)?h:o;return d===h&&e===h?Ad:d===h?Qi:e===h?Pi:Oi}u.a(Q,"segmentOrientation",Q.prototype.Lr);
u.defineProperty(Q,{Lr:"segmentOrientation"},r("lq"),function(a){var b=this.lq;if(b!==a){s&&u.Ra(a,W,Q,"segmentOrientation");this.lq=a;this.L();this.d("segmentOrientation",b,a)}});u.a(Q,"segmentIndex",Q.prototype.$g);u.defineProperty(Q,{$g:"segmentIndex"},r("jq"),function(a){s&&u.e(a,"number",Q,"segmentIndex");var a=Math.round(a),b=this.jq;if(b!==a){this.jq=a;this.L();this.d("segmentIndex",b,a)}});u.a(Q,"segmentFraction",Q.prototype.Dy);
u.defineProperty(Q,{Dy:"segmentFraction"},r("iq"),function(a){s&&u.e(a,"number",Q,"segmentFraction");isNaN(a)?a=0:a<0?a=0:a>1&&(a=1);var b=this.iq;if(b!==a){this.iq=a;this.L();this.d("segmentFraction",b,a)}});u.a(Q,"segmentOffset",Q.prototype.Ey);u.defineProperty(Q,{Ey:"segmentOffset"},r("kq"),function(a){var b=this.kq;if(!b.u(a)){s&&u.c(a,E,Q,"segmentOffset");this.kq=a=a.B();this.L();this.d("segmentOffset",b,a)}});u.a(Q,"stretch",Q.prototype.ah);
u.defineProperty(Q,{ah:"stretch"},r("Dg"),function(a){var b=this.Dg;if(b!==a){s&&u.Ra(a,Q,Q,"stretch");this.Dg=a;this.L();this.d("stretch",b,a)}});u.a(Q,"name",Q.prototype.name);u.defineProperty(Q,{name:"name"},r("qb"),function(a){var b=this.qb;if(b!==a){s&&u.e(a,"string",Q,"name");this.qb=a;this.d("name",b,a)}});u.a(Q,"visible",Q.prototype.visible);
u.defineProperty(Q,{visible:"visible"},r("Lg"),function(a){var b=this.Lg;if(b!==a){s&&u.e(a,"boolean",Q,"visible");this.Lg=a;this.d("visible",b,a);b=this.U;if(b!==m)b.L();else if(this instanceof T){this.L();Yi(this);if(a){this.r(hj);this.$h()}else{this.r(ij);this.Og()}}$i(this);jj(this)}});u.a(Q,"areaBackground",Q.prototype.Mg);
u.defineProperty(Q,{Mg:"areaBackground"},r("fh"),function(a){var b=this.fh;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.fh=a;$i(this);this.d("areaBackground",b,a)}});u.a(Q,"background",Q.prototype.background);u.defineProperty(Q,{background:"background"},r("gh"),function(a){var b=this.gh;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.gh=a;$i(this);this.d("background",b,a)}});
u.m(Q,{W:"part"},function(){if(this instanceof T)return this;if(this.ri)return this.ri;var a;for(a=this.U;a;){if(a instanceof T)return this.ri=a;a=a.U}return m});Q.prototype.yl=ba("Hj");u.m(Q,{U:"panel"},r("Hj"));u.m(Q,{sa:"layer"},function(){var a=this.W;return a!==m?a.sa:m});u.m(Q,{b:"diagram"},function(){var a=this.W;return a!==m?a.b:m},{configurable:h});u.a(Q,"position",Q.prototype.position);
u.defineProperty(Q,{position:"position"},r("kb"),function(a){var b=this.kb;if(!b.u(a)){s&&u.c(a,E,Q,"position");if(this instanceof T){if(!a.V())return;var c=this.ki,d=this.Rs,e=c.copy();c.Wd(a.x+d.x,a.y+d.y);c.u(e)||this.d("location",e,c);if(this.Gc===o){this.kb=a=a.B();kj(this);Vi(this);this.d("position",b,a);return}}this.kb=a=a.B();dj(this);Vi(this);this.d("position",b,a)}});u.m(Q,{pa:"actualBounds"},r("Wb"));u.a(Q,"scale",Q.prototype.scale);
u.defineProperty(Q,{scale:"scale"},r("Ib"),function(a){var b=this.Ib;if(b!==a){s&&u.i(a,Q,"scale");a<=0&&u.g("GraphObject.scale must be greater than zero");this.Ib=a;Vi(this);this.L();this.d("scale",b,a)}});u.a(Q,"angle",Q.prototype.Ka);u.defineProperty(Q,{Ka:"angle"},r("Nb"),function(a){var b=this.Nb;if(b!==a){s&&u.i(a,Q,"angle");this.Nb=a;this.L();Vi(this);this.d("angle",b,a)}});u.a(Q,"desiredSize",Q.prototype.ja);
u.defineProperty(Q,{ja:"desiredSize"},r("Rd"),function(a){var b=this.Rd;if(!b.u(a)){s&&u.c(a,eb,Q,"desiredSize");this.Rd=a=a.B();this.L();this instanceof X&&this.Ye();this.d("desiredSize",b,a)}});u.a(Q,"width",Q.prototype.width);u.defineProperty(Q,{width:"width"},function(){return this.Rd.width},function(a){if(this.Rd.width!==a){s&&u.e(a,"number",Q,"width");var b=this.Rd;this.Rd=a=(new eb(a,this.Rd.height)).freeze();this.L();this instanceof X&&this.Ye();this.d("desiredSize",b,a)}});
u.a(Q,"height",Q.prototype.height);u.defineProperty(Q,{height:"height"},function(){return this.Rd.height},function(a){if(this.Rd.height!==a){s&&u.e(a,"number",Q,"height");var b=this.Rd;this.Rd=a=(new eb(this.Rd.width,a)).freeze();this.L();this instanceof X&&this.Ye();this.d("desiredSize",b,a)}});u.a(Q,"minSize",Q.prototype.Pd);
u.defineProperty(Q,{Pd:"minSize"},r("Hc"),function(a){var b=this.Hc;if(!b.u(a)){s&&u.c(a,eb,Q,"minSize");a=a.copy();if(isNaN(a.width))a.width=0;if(isNaN(a.height))a.height=0;a.freeze();this.Hc=a;this.L();this.d("minSize",b,a)}});u.a(Q,"maxSize",Q.prototype.yd);u.defineProperty(Q,{yd:"maxSize"},r("Of"),function(a){var b=this.Of;if(!b.u(a)){s&&u.c(a,eb,Q,"maxSize");a=a.copy();if(isNaN(a.width))a.width=Infinity;if(isNaN(a.height))a.height=Infinity;a.freeze();this.Of=a;this.L();this.d("maxSize",b,a)}});
u.m(Q,{ga:"measuredBounds"},r("yc"));u.m(Q,{ma:"naturalBounds"},r("Ic"),{configurable:h});u.a(Q,"margin",Q.prototype.margin);u.defineProperty(Q,{margin:"margin"},r("yp"),function(a){typeof a==="number"?a=new qb(a):s&&u.c(a,qb,Q,"margin");var b=this.yp;if(!b.u(a)){this.yp=a=a.B();this.L();this.d("margin",b,a)}});u.m(Q,{transform:m},function(){this.hm===h&&bj(this);return this.De});u.m(Q,{Yd:m},function(){this.Ek===h&&bj(this);return this.Ml});u.a(Q,"alignment",Q.prototype.lb);
u.defineProperty(Q,{lb:"alignment"},r("ka"),function(a){var b=this.ka;if(!b.u(a)){s?u.c(a,K,Q,"alignment"):Pb(a)&&!Qb(a)&&u.g("alignment must be a real Spot or Spot.Default");this.ka=a=a.B();dj(this);this.d("alignment",b,a)}});u.a(Q,"column",Q.prototype.jd);u.defineProperty(Q,{jd:"column"},r("K"),function(a){s&&u.i(a,Q,"column");var a=Math.round(a),b=this.K;if(b!==a){a<0&&u.ia(a,">= 0",Q,"column");this.K=a;this.L();this.d("column",b,a)}});u.a(Q,"columnSpan",Q.prototype.YA);
u.defineProperty(Q,{YA:"columnSpan"},r("jj"),function(a){s&&u.i(a,Q,"columnSpan");var a=Math.round(a),b=this.jj;if(b!==a){a<1&&u.ia(a,">= 1",Q,"columnSpan");this.jj=a;this.L();this.d("columnSpan",b,a)}});u.a(Q,"row",Q.prototype.ld);u.defineProperty(Q,{ld:"row"},r("gq"),function(a){s&&u.i(a,Q,"row");var a=Math.round(a),b=this.gq;if(b!==a){a<0&&u.ia(a,">= 0",Q,"row");this.gq=a;this.L();this.d("row",b,a)}});u.a(Q,"rowSpan",Q.prototype.rowSpan);
u.defineProperty(Q,{rowSpan:"rowSpan"},r("Mj"),function(a){s&&u.i(a,Q,"rowSpan");var a=Math.round(a),b=this.Mj;if(b!==a){a<1&&u.ia(a,">= 1",Q,"rowSpan");this.Mj=a;this.L();this.d("rowSpan",b,a)}});u.a(Q,"isPanelMain",Q.prototype.Mi);u.defineProperty(Q,{Mi:"isPanelMain"},r("fp"),function(a){var b=this.fp;if(b!==a){s&&u.e(a,"boolean",Q,"isPanelMain");this.fp=a;this.L();this.d("isPanelMain",b,a)}});u.a(Q,"alignmentFocus",Q.prototype.xi);
u.defineProperty(Q,{xi:"alignmentFocus"},r("bo"),function(a){var b=this.bo;if(!b.u(a)){s?u.c(a,K,Q,"alignmentFocus"):Pb(a)&&!Qb(a)&&u.g("alignmentFocus must be a real Spot or Spot.Default");this.bo=a=a.B();this.L();this.d("alignmentFocus",b,a)}});u.a(Q,"portId",Q.prototype.je);
u.defineProperty(Q,{je:"portId"},r("Sp"),function(a){var b=this.Sp;if(b!==a){s&&a!==m&&u.e(a,"string",Q,"portId");var c=this.W;if(c!==m&&!(c instanceof U)){u.g("portID being set on a Link: "+a);c=m}b!==m&&c&&uj(c,this);this.Sp=a;if(a!==m&&c){c.jc===m&&xj(c);yj(c,this)}this.d("portId",b,a)}});function zj(a){var b={value:m};Aj(a,b);return b.value}function Aj(a,b){var c=a.U;if(c===m){b.value=a;return o}if(!Aj(c,b)&&a.visible){b.value=a;return o}return h}
function jj(a){var b=a.W;if(b instanceof U)(a=a.b)&&!a.ca.$a&&b.kf()}u.a(Q,"toSpot",Q.prototype.Wa);u.defineProperty(Q,{Wa:"toSpot"},r("Jg"),function(a){var b=this.Jg;if(!b.u(a)){s&&u.c(a,K,Q,"toSpot");this.Jg=a=a.B();this.d("toSpot",b,a);jj(this)}});u.a(Q,"toEndSegmentLength",Q.prototype.jk);
u.defineProperty(Q,{jk:"toEndSegmentLength"},r("Gg"),function(a){var b=this.Gg;if(b!==a){s&&u.e(a,"number",Q,"toEndSegmentLength");a<0&&u.ia(a,">= 0",Q,"toEndSegmentLength");this.Gg=a;this.d("toEndSegmentLength",b,a);jj(this)}});u.a(Q,"toEndSegmentDirection",Q.prototype.Ur);u.defineProperty(Q,{Ur:"toEndSegmentDirection"},r("Fg"),function(a){var b=this.Fg;if(b!==a){s&&u.Ra(a,U,Q,"toEndSegmentDirection");this.Fg=a;this.d("toEndSegmentDirection",b,a);jj(this)}});u.a(Q,"toShortLength",Q.prototype.Vr);
u.defineProperty(Q,{Vr:"toShortLength"},r("Ig"),function(a){var b=this.Ig;if(b!==a){s&&u.e(a,"number",Q,"toShortLength");this.Ig=a;this.d("toShortLength",b,a);jj(this)}});u.a(Q,"toLinkable",Q.prototype.Qy);u.defineProperty(Q,{Qy:"toLinkable"},r("Cq"),function(a){var b=this.Cq;if(b!==a){s&&a!==m&&u.e(a,"boolean",Q,"toLinkable");this.Cq=a;this.d("toLinkable",b,a)}});u.a(Q,"toLinkableDuplicates",Q.prototype.kD);
u.defineProperty(Q,{kD:"toLinkableDuplicates"},r("Dq"),function(a){var b=this.Dq;if(b!==a){s&&u.e(a,"boolean",Q,"toLinkableDuplicates");this.Dq=a;this.d("toLinkableDuplicates",b,a)}});u.a(Q,"toLinkableSelfNode",Q.prototype.lD);u.defineProperty(Q,{lD:"toLinkableSelfNode"},r("Eq"),function(a){var b=this.Eq;if(b!==a){s&&u.e(a,"boolean",Q,"toLinkableSelfNode");this.Eq=a;this.d("toLinkableSelfNode",b,a)}});u.a(Q,"toMaxLinks",Q.prototype.mD);
u.defineProperty(Q,{mD:"toMaxLinks"},r("Fq"),function(a){var b=this.Fq;if(b!==a){s&&u.i(a,Q,"toMaxLinks");a<0&&u.ia(a,">= 0",Q,"toMaxLinks");this.Fq=a;this.d("toMaxLinks",b,a)}});u.a(Q,"fromSpot",Q.prototype.Ua);u.defineProperty(Q,{Ua:"fromSpot"},r("rg"),function(a){var b=this.rg;if(!b.u(a)){s&&u.c(a,K,Q,"fromSpot");this.rg=a=a.B();this.d("fromSpot",b,a);jj(this)}});u.a(Q,"fromEndSegmentLength",Q.prototype.ak);
u.defineProperty(Q,{ak:"fromEndSegmentLength"},r("og"),function(a){var b=this.og;if(b!==a){s&&u.e(a,"number",Q,"fromEndSegmentLength");a<0&&u.ia(a,">= 0",Q,"fromEndSegmentLength");this.og=a;this.d("fromEndSegmentLength",b,a);jj(this)}});u.a(Q,"fromEndSegmentDirection",Q.prototype.ir);u.defineProperty(Q,{ir:"fromEndSegmentDirection"},r("ng"),function(a){var b=this.ng;if(b!==a){s&&u.Ra(a,U,Q,"fromEndSegmentDirection");this.ng=a;this.d("fromEndSegmentDirection",b,a);jj(this)}});
u.a(Q,"fromShortLength",Q.prototype.jr);u.defineProperty(Q,{jr:"fromShortLength"},r("qg"),function(a){var b=this.qg;if(b!==a){s&&u.e(a,"number",Q,"fromShortLength");this.qg=a;this.d("fromShortLength",b,a);jj(this)}});u.a(Q,"fromLinkable",Q.prototype.Rx);u.defineProperty(Q,{Rx:"fromLinkable"},r("Mo"),function(a){var b=this.Mo;if(b!==a){s&&a!==m&&u.e(a,"boolean",Q,"fromLinkable");this.Mo=a;this.d("fromLinkable",b,a)}});u.a(Q,"fromLinkableDuplicates",Q.prototype.BB);
u.defineProperty(Q,{BB:"fromLinkableDuplicates"},r("No"),function(a){var b=this.No;if(b!==a){s&&u.e(a,"boolean",Q,"fromLinkableDuplicates");this.No=a;this.d("fromLinkableDuplicates",b,a)}});u.a(Q,"fromLinkableSelfNode",Q.prototype.CB);u.defineProperty(Q,{CB:"fromLinkableSelfNode"},r("Oo"),function(a){var b=this.Oo;if(b!==a){s&&u.e(a,"boolean",Q,"fromLinkableSelfNode");this.Oo=a;this.d("fromLinkableSelfNode",b,a)}});u.a(Q,"fromMaxLinks",Q.prototype.DB);
u.defineProperty(Q,{DB:"fromMaxLinks"},r("Po"),function(a){var b=this.Po;if(b!==a){s&&u.i(a,Q,"fromMaxLinks");a<0&&u.ia(a,">= 0",Q,"fromMaxLinks");this.Po=a;this.d("fromMaxLinks",b,a)}});u.a(Q,"cursor",Q.prototype.cursor);u.defineProperty(Q,{cursor:"cursor"},r("qo"),function(a){var b=this.qo;if(b!==a){u.e(a,"string",Q,"cursor");this.qo=a;this.d("cursor",b,a)}});u.a(Q,"click",Q.prototype.click);
u.defineProperty(Q,{click:"click"},r("ih"),function(a){var b=this.ih;if(b!==a){a!==m&&u.e(a,"function",Q,"click");this.ih=a;this.d("click",b,a)}});u.a(Q,"doubleClick",Q.prototype.jl);u.defineProperty(Q,{jl:"doubleClick"},r("lh"),function(a){var b=this.lh;if(b!==a){a!==m&&u.e(a,"function",Q,"doubleClick");this.lh=a;this.d("doubleClick",b,a)}});u.a(Q,"contextClick",Q.prototype.Zq);
u.defineProperty(Q,{Zq:"contextClick"},r("jh"),function(a){var b=this.jh;if(b!==a){a!==m&&u.e(a,"function",Q,"contextClick");this.jh=a;this.d("contextClick",b,a)}});u.a(Q,"mouseEnter",Q.prototype.py);u.defineProperty(Q,{py:"mouseEnter"},r("Hp"),function(a){var b=this.Hp;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseEnter");this.Hp=a;this.d("mouseEnter",b,a)}});u.a(Q,"mouseLeave",Q.prototype.qy);
u.defineProperty(Q,{qy:"mouseLeave"},r("Ip"),function(a){var b=this.Ip;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseLeave");this.Ip=a;this.d("mouseLeave",b,a)}});u.a(Q,"mouseOver",Q.prototype.Cr);u.defineProperty(Q,{Cr:"mouseOver"},r("yh"),function(a){var b=this.yh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseOver");this.yh=a;this.d("mouseOver",b,a)}});u.a(Q,"mouseHover",Q.prototype.Br);
u.defineProperty(Q,{Br:"mouseHover"},r("xh"),function(a){var b=this.xh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseHover");this.xh=a;this.d("mouseHover",b,a)}});u.a(Q,"mouseHold",Q.prototype.Ar);u.defineProperty(Q,{Ar:"mouseHold"},r("wh"),function(a){var b=this.wh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseHold");this.wh=a;this.d("mouseHold",b,a)}});u.a(Q,"mouseDragEnter",Q.prototype.rC);
u.defineProperty(Q,{rC:"mouseDragEnter"},r("Fp"),function(a){var b=this.Fp;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseDragEnter");this.Fp=a;this.d("mouseDragEnter",b,a)}});u.a(Q,"mouseDragLeave",Q.prototype.oy);u.defineProperty(Q,{oy:"mouseDragLeave"},r("Gp"),function(a){var b=this.Gp;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseDragLeave");this.Gp=a;this.d("mouseDragLeave",b,a)}});u.a(Q,"mouseDrop",Q.prototype.zr);
u.defineProperty(Q,{zr:"mouseDrop"},r("vh"),function(a){var b=this.vh;if(b!==a){a!==m&&u.e(a,"function",Q,"mouseDrop");this.vh=a;this.d("mouseDrop",b,a)}});u.a(Q,"actionDown",Q.prototype.gx);u.defineProperty(Q,{gx:"actionDown"},r("Yn"),function(a){var b=this.Yn;if(b!==a){a!==m&&u.e(a,"function",Q,"actionDown");this.Yn=a;this.d("actionDown",b,a)}});u.a(Q,"actionUp",Q.prototype.ix);
u.defineProperty(Q,{ix:"actionUp"},r("$n"),function(a){var b=this.$n;if(b!==a){a!==m&&u.e(a,"function",Q,"actionUp");this.$n=a;this.d("actionUp",b,a)}});u.a(Q,"actionMove",Q.prototype.hx);u.defineProperty(Q,{hx:"actionMove"},r("Zn"),function(a){var b=this.Zn;if(b!==a){a!==m&&u.e(a,"function",Q,"actionMove");this.Zn=a;this.d("actionMove",b,a)}});u.a(Q,"actionCancel",Q.prototype.fx);
u.defineProperty(Q,{fx:"actionCancel"},r("Xn"),function(a){var b=this.Xn;if(b!==a){a!==m&&u.e(a,"function",Q,"actionCancel");this.Xn=a;this.d("actionCancel",b,a)}});u.a(Q,"toolTip",Q.prototype.Wr);u.defineProperty(Q,{Wr:"toolTip"},r("Fh"),function(a){var b=this.Fh;if(b!==a){a!==m&&u.c(a,bf,Q,"toolTip");this.Fh=a;this.d("toolTip",b,a)}});u.a(Q,"contextMenu",Q.prototype.contextMenu);
u.defineProperty(Q,{contextMenu:"contextMenu"},r("kh"),function(a){var b=this.kh;if(b!==a){a!==m&&u.c(a,bf,Q,"contextMenu");this.kh=a;this.d("contextMenu",b,a)}});u.a(Q,"isActionable",Q.prototype.Au);u.defineProperty(Q,{Au:"isActionable"},r("$o"),function(a){var b=this.$o;if(b!==a){u.e(a,"boolean",Q,"isActionable");this.$o=a;this.d("isActionable",b,a)}});u.a(Q,"pickable",Q.prototype.zC);
u.defineProperty(Q,{zC:"pickable"},r("qd"),function(a){var b=this.qd;if(b!==a){u.e(a,"boolean",Q,"pickable");this.qd=a;this.d("pickable",b,a)}});Q.prototype.bind=Q.prototype.bind=function(a){a.df=this;var b=this.hr();b!==m&&Bj(b)&&u.g("Cannot add a Binding to a template that has already been copied: "+a);if(this.Ob===m)this.Ob=new z(Se);this.Ob.add(a)};Q.prototype.findTemplateBinder=Q.prototype.hr=function(){for(var a=this instanceof v?this:this.U;a!==m;){if(a.tk!==m&&a instanceof v)return a;a=a.U}return m};
var Cj;
Q.make=Cj=function(a,b){var c=m,d=m;if(typeof a==="function")d=a;else if(typeof a==="string"){var e=Dj.$(a);typeof e==="function"?c=e():d=ga[a]}if(c===m){(d===m||!d.constructor)&&u.g("GraphObject.make requires a class function or class name, not: "+a);c=new d}e=1;if(c instanceof B&&arguments.length>1){d=arguments[1];if(typeof d==="string"||d instanceof HTMLDivElement){c.Qh=m;Fh(c,d);e++}else u.g("Unknown argument to Diagram constructor: "+d)}for(;e<arguments.length;e++){d=arguments[e];if(typeof d==="string")c instanceof
na?c.text=d:c instanceof X?c.Ta=d:c instanceof Ej?c.source=d:u.g("Unable to use a string as an argument to GraphObject.make: "+d);else if(d instanceof Q){c instanceof v||u.g("A GraphObject can only be added to a Panel, not to: "+c);c.add(d)}else if(d instanceof Fj){c instanceof v||u.g("A RowColumnDefinition can only be added to a Panel, not to: "+c);var g=d.Cu?c.ce(d.index):c.td(d.index);u.c(d,Fj,Fj,"copyFrom:pd");d.Cu?g.height=d.height:g.width=d.width;g.of=d.of;g.zd=d.zd;g.lb=d.lb;g.Qr=d.Qr;g.Ob=
d.Ob}else if(d instanceof ja)c instanceof W&&d.Jd===W?d===Hf||d===oh?c.Te=d:d===Gj||d===Hj||d===Ij?c.Ie=d:d===Jj||d===Kj||d===Lj?c.Wt=d:d===Mj||d===Ni||u.g("Unknown Link enum value for a Link property: "+d):c instanceof v&&d.Jd===v?c.type=d:c instanceof na&&d.Jd===na?c.Wy=d:c instanceof Q&&d.Jd===W?d.name.indexOf("Orient")===0?c.Lr=d:u.g("Unknown Link enum value for GraphObject.segmentOrientation property: "+d):c instanceof Q&&d.Jd===Q?c.ah=d:c instanceof B&&d.Jd===B?c.px=d:c instanceof Be&&d.Jd===
Be?c.type=d:c instanceof md&&d.Jd===md?c.type=d:c instanceof pe&&d.Jd===pe?c.type=d:c instanceof Se&&d.Jd===Se?c.mode=d:c instanceof se&&d.Jd===se?c.Mc=d:c instanceof Y&&d.Jd===Y?d.name.indexOf("Alignment")===0?c.lb=d:d.name.indexOf("Arrangement")===0?c.Id=d:d.name.indexOf("Compaction")===0?c.du=d:d.name.indexOf("Path")===0?c.path=d:d.name.indexOf("Sorting")===0?c.uf=d:d.name.indexOf("Style")===0?c.vD=d:u.g("Unknown enum value: "+d):c instanceof Z&&d.Jd===Z?d.name.indexOf("Aggressive")===0?c.JA=d:
d.name.indexOf("Cycle")===0?c.fB=d:d.name.indexOf("Init")===0?c.UB=d:d.name.indexOf("Layer")===0?c.cC=d:u.g("Unknown enum value: "+d):c instanceof Hi&&d.Jd===Hi?d===Nj||d===Oj||d===Pj||d===Qj?c.uf=d:d===Rj||d===Sj?c.Id=d:d===Tj||d===Uj?c.lb=d:u.g("Unknown enum value: "+d):c instanceof Vj&&d.Jd===Vj?d===Wj||d===Xj||d===Yj||d===Zj||d===$j?c.uf=d:d===ak||d===bk||d===ck||d===dk?c.direction=d:d===ek||d===fk||d===gk||d===hk?c.Id=d:d===ik||d===jk?c.Fr=d:u.g("Unknown enum value: "+d):u.g("No property to set for this enum value: "+
d);else if(d instanceof Se)c instanceof Q||c instanceof Fj?c.bind(d):u.g("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+c);else if(d instanceof zd)c instanceof md?c.rc.add(d):u.g("A PathFigure can only be added to a Geometry, not to: "+c);else if(d instanceof pe)c instanceof zd?c.sb.add(d):u.g("A PathSegment can only be added to a PathFigure, not to: "+c);else if(d instanceof Object){d.constructor!==Object&&u.g("Can only get property values from a plain Object, not a: "+
d);if(c instanceof Be){var g={},i;for(i in d){var j=parseFloat(i);isNaN(j)?g[i]=d[i]:c.addColorStop(j,d[i])}u.Gy(c,g)}else if(c instanceof Fj){if(d.row!==f){g=d.row;(g===f||g===m||g===Infinity||isNaN(g)||g<0)&&u.g("Must specify non-negative integer row for RowColumnDefinition "+d);c.Hk=h;c.T=g}else if(d.column!==f){g=d.column;(g===f||g===m||g===Infinity||isNaN(g)||g<0)&&u.g("Must specify non-negative integer column for RowColumnDefinition "+d);c.Hk=o;c.T=g}else u.g("Must specify row or column value in a RowColumnDefinition "+
d);g=u.TE(d,"row","column");u.Gy(c,g)}else u.Gy(c,d)}else u.g("Unknown initializer: "+d)}return c};var Dj;Q.Builders=Dj=new ka("string","function");
Dj.add("Button",function(){var a=new Be(Me);a.addColorStop(0,"white");a.addColorStop(1,"lightgray");var b=new Be(Me);b.addColorStop(0,"white");b.addColorStop(1,"dodgerblue");var c=Cj(v,Hh,{Au:h},Cj(X,{name:"ButtonBorder",Ta:"RoundedRectangle",fill:a,stroke:"gray"}));c.py=function(a,c){var g=c.Z(0),i=c._buttonFillOver;i===f&&(i=b);c._buttonFillNormal=g.fill;g.fill=i;i=c._buttonStrokeOver;i===f&&(i="blue");c._buttonStrokeNormal=g.stroke;g.stroke=i};c.qy=function(b,c){var g=c.Z(0),i=c._buttonFillNormal;
i===f&&(i=a);g.fill=i;i=c._buttonStrokeNormal;i===f&&(i="gray");g.stroke=i};return c});
Dj.add("TreeExpanderButton",function(){var a=Cj("Button",Cj(X,{name:"ButtonIcon",Ta:"MinusLine",ja:new eb(6,6)},(new Se("figure","isTreeExpanded",function(a,c){var d=m,e=c.U;e&&(d=a?e._treeExpandedFigure:e._treeCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).wy("")),{visible:o},(new Se("visible","isTreeLeaf",function(a){return!a})).wy(""));a.click=function(a,c){var d=c.W;if(d instanceof U){var e=d.b;if(!(e===m||e.Ja)){a.ud=h;d.Od?e.Kd.Yq(d):e.Kd.er(d)}}};return a});
Dj.add("SubGraphExpanderButton",function(){var a=Cj("Button",Cj(X,{name:"ButtonIcon",Ta:"MinusLine",ja:new eb(6,6)},(new Se("figure","isSubGraphExpanded",function(a,c){var d=m,e=c.U;e&&(d=a?e._subGraphExpandedFigure:e._subGraphCollapsedFigure);d||(d=a?"MinusLine":"PlusLine");return d})).wy("")));a.click=function(a,c){var d=c.W;if(d instanceof V){var e=d.b;if(!(e===m||e.Ja)){a.ud=h;d.ee?e.Kd.Xq(d):e.Kd.dr(d)}}};return a});
Dj.add("ContextMenuButton",function(){var a=Cj("Button");a.ah=Qi;var b=a.Le("ButtonBorder");if(b instanceof X){b.Ta="Rectangle";b.n=new K(0,0,2,2);b.o=new K(1,1,-2,-2)}return a});
function v(a){Q.call(this);if(a===f)arguments.length===0?this.I=Og:u.g("invalid argument to Panel constructor: undefined");else{u.Ra(a,v,v,"type");this.I=a}this.wa=new z(Q);this.Fd=(new qb).freeze();this.to=Ub;this.Hb=Jg;this.ze=[];this.qe=[];this.lo=this.hq=kk;this.nm=this.Im=0;this.Jm=Kg;this.To=(new eb(10,10)).freeze();this.Uo=(new E(0,0)).freeze();this.tk=this.Vl=m;this.mw="";this.Kf=this.yj=m;this.jm="category";this.$e=m;this.qk=new J(NaN,NaN,NaN,NaN);this.aE=new J(0,0,0,0);this.SG=new eb(0,
0);this.zq=m}u.H("Panel",v);u.na(v,Q);
v.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.I=this.I;a.Fd.Oa(this.Fd);a.to=this.to.B();a.Hb=this.Hb;if(this.ze.length>0){for(var b=[],c=this.ze,d=c.length,e=0;e<d;e++)if(c[e]!==f){var g=c[e].copy();g.yl(a);b[e]=g}a.ze=b}if(this.qe.length>0){b=[];c=this.qe;d=c.length;for(e=0;e<d;e++)if(c[e]!==f){g=c[e].copy();g.yl(a);b[e]=g}a.qe=b}a.hq=this.hq;a.lo=this.lo;a.Im=this.Im;a.nm=this.nm;a.Jm=this.Jm;a.To.Oa(this.To);a.Uo.Oa(this.Uo);a.Vl=this.Vl;a.tk=this.tk;a.mw=this.mw;a.yj=this.yj;a.Kf=
this.Kf;a.jm=this.jm;this._buttonFillNormal&&(a._buttonFillNormal=this._buttonFillNormal);this._buttonFillOver&&(a._buttonFillOver=this._buttonFillOver);this._buttonStrokeNormal&&(a._buttonStrokeNormal=this._buttonStrokeNormal);this._buttonStrokeOver&&(a._buttonStrokeOver=this._buttonStrokeOver);this._treeExpandedFigure&&(a._treeExpandedFigure=this._treeExpandedFigure);this._treeCollapsedFigure&&(a._treeCollapsedFigure=this._treeCollapsedFigure);this._subGraphExpandedFigure&&(a._subGraphExpandedFigure=
this._subGraphExpandedFigure);this._subGraphCollapsedFigure&&(a._subGraphCollapsedFigure=this._subGraphCollapsedFigure)};v.prototype.Qg=function(a){Q.prototype.Qg.call(this,a);a.wa=this.wa;for(var b=a.wa.f;b.next();)b.value.Hj=a};
v.prototype.copy=v.prototype.copy=function(){var a=Q.prototype.copy.call(this);if(a instanceof v){var b=this.wa;if(b.length>0)for(var c=b.length,d=0;d<c;d++){var e=b.j[d].copy(),g=a;e.yl(g);e.ri=m;var i=g.wa,j=i.count;i.ec(j,e);i=g.W;if(i!==m){var k=g.b;k!==m&&k.ca.$a||i.ke(ve,"elements",g,m,e,m,j)}}return a}return m};v.prototype.toString=function(){return"Panel("+this.type+")#"+u.dc(this)};var Og;v.Position=Og=u.l(v,"Position",0);v.Horizontal=u.l(v,"Horizontal",1);var Gh;
v.Vertical=Gh=u.l(v,"Vertical",2);var Hg;v.Spot=Hg=u.l(v,"Spot",3);var Hh;v.Auto=Hh=u.l(v,"Auto",4);var fj;v.Table=fj=u.l(v,"Table",5);v.Viewbox=u.l(v,"Viewbox",6);var lk;v.TableRow=lk=u.l(v,"TableRow",7);var mk;v.TableColumn=mk=u.l(v,"TableColumn",8);var ng;v.Link=ng=u.l(v,"Link",9);var Ph;v.Grid=Ph=u.l(v,"Grid",10);u.m(v,{elements:"elements"},function(){return this.wa.f});u.m(v,{ma:"naturalBounds"},r("Ic"));u.a(v,"padding",v.prototype.padding);
u.defineProperty(v,{padding:"padding"},r("Fd"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,v,"padding");var b=this.Fd;if(!b.u(a)){this.Fd=a=a.B();this.L();this.d("padding",b,a)}});u.a(v,"type",v.prototype.type);u.defineProperty(v,{type:"type"},r("I"),function(a){var b=this.I;if(b!==a){s&&u.Ra(a,v,v,"type");this.I=a;this.L();this.d("type",b,a)}});u.a(v,"defaultAlignment",v.prototype.Di);
u.defineProperty(v,{Di:"defaultAlignment"},r("to"),function(a){var b=this.to;if(!b.u(a)){s&&u.c(a,K,v,"defaultAlignment");this.to=a=a.B();this.L();this.d("defaultAlignment",b,a)}});u.a(v,"defaultStretch",v.prototype.Fx);u.defineProperty(v,{Fx:"defaultStretch"},r("Hb"),function(a){var b=this.Hb;if(b!==a){u.Ra(a,Q,v,"defaultStretch");this.Hb=a;this.L();this.d("defaultStretch",b,a)}});u.a(v,"viewboxStretch",v.prototype.Vy);
u.defineProperty(v,{Vy:"viewboxStretch"},r("Jm"),function(a){var b=this.Jm;if(b!==a){u.Ra(a,Q,v,"viewboxStretch");this.Jm=a;this.d("viewboxStretch",b,a)}});u.a(v,"gridCellSize",v.prototype.mr);u.defineProperty(v,{mr:"gridCellSize"},r("To"),function(a){var b=this.To;if(!b.u(a)){u.c(a,eb,v,"gridCellSize");(!a.V()||a.width===0||a.height===0)&&u.g("Invalid Panel.gridCellSize: "+a);this.To=a.B();this.b!==m&&this===this.b.yu&&ii(this.b);$i(this);this.d("gridCellSize",b,a)}});u.a(v,"gridOrigin",v.prototype.Ux);
u.defineProperty(v,{Ux:"gridOrigin"},r("Uo"),function(a){var b=this.Uo;if(!b.u(a)){u.c(a,E,v,"gridOrigin");a.V()||u.g("Invalid Panel.gridOrigin: "+a);this.Uo=a.B();$i(this);this.d("gridOrigin",b,a)}});ea=v.prototype;
ea.br=function(a,b){if(this.I===Ph){var c=this.ml()*b.scale;c<=0&&(c=1);var d=this.mr,e=d.width,d=d.height,g=this.ma,i=g.width,g=g.height,j=Math.ceil(i/e),k=Math.ceil(g/d),l=this.Ux;a.save();a.beginPath();a.rect(0,0,i,g);a.clip();for(var n=[],q=this.wa.j,p=this.wa.length,t=0;t<p;t++){var w=[];n.push(w);var A=q[t];if(A.visible)for(var A=A.Ta==="LineV",F=t+1;F<p;F++){var H=q[F];if(H.visible&&H.Ta==="LineV"===A){H=H.Uh;H>=2&&w.push(H)}}}q=this.wa.length;for(p=0;p<q;p++){A=this.wa.j[p];if(A.visible){t=
n[p];w=A.Uh;if(A.Ta==="LineV"){a.lineWidth=A.Na;aj(this,a,A.stroke,o);a.beginPath();for(F=A=Math.floor(-l.x/e);F<=A+j;F++){H=F*e+l.x;if(0<=H&&H<i&&nk(F,w,t)){a.moveTo(H,0);a.lineTo(H,g);if(e*w*c<2)break}}}else{a.lineWidth=A.Na;aj(this,a,A.stroke,o);a.beginPath();for(F=A=Math.floor(-l.y/d);F<=A+k;F++){H=F*d+l.y;if(0<=H&&H<=g&&nk(F,w,t)){a.moveTo(0,H);a.lineTo(i,H);if(d*w*c<2)break}}}a.stroke()}}a.restore();Nh(b,a)}else{c=this.wa.length;for(e=0;e<c;e++)this.wa.j[e].bg(a,b)}};
ea.hg=function(){Q.prototype.hg.call(this);var a=this.b;if(a!==m){Ei(a,"type",this.type);this.Vy!==Kg&&Ei(a,"viewboxStretch",this.Vy);Ei(a,"elements",this.elements)}};function nk(a,b,c){if(a%b!==0)return o;for(var b=c.length,d=0;d<b;d++)if(a%c[d]===0)return o;return h}
ea.xr=function(a,b,c,d){var e=this.qk;e.width=0;e.height=0;var g=this.ja,i=this.Pd;if(c===f){c=i.width;d=i.height}var c=Math.max(c/this.scale,i.width),d=Math.max(d/this.scale,i.height),j=this.yd;isNaN(g.width)||(a=Math.min(g.width,j.width));isNaN(g.height)||(b=Math.min(g.height,j.height));var a=Math.max(c,a),b=Math.max(d,b),k=this.padding,a=Math.max(a-k.left-k.right,0),b=Math.max(b-k.top-k.bottom,0),l=this.wa,n=l.length;if(n===0){var q=this.Ic;jb(q,!isNaN(g.width)?a:0,!isNaN(g.height)?b:0);Ri(this,
0,0,q.width,q.height)}else{var p=this.I.qb;switch(p){case "Position":var t=a,w=b,A=c,F=d;e.x=0;e.y=0;e.width=0;for(var H=e.height=0;H<n;H++){var x=l.j[H];if(x.visible||x===this.ub){var I=x.margin,y=I.right+I.left,G=I.top+I.bottom;gh(x,t,w,A,F);var fa=x.ga,R=Math.max(fa.width+y,0),S=Math.max(fa.height+G,0),da=x.position.x,ma=x.position.y;isFinite(da)||(da=0);isFinite(ma)||(ma=0);mb(e,da,ma,R,S)}}break;case "Vertical":for(var ua=a,sa=c,ib=d,db=[],$a=0;$a<n;$a++){var Oa=l.j[$a];if(Oa.visible||Oa===this.ub){var fb=
Ui(Oa);if(fb!==Oi&&fb!==Pi)db.push(Oa);else{var Va=Oa.margin,vc=Va.right+Va.left,Cd=Va.top+Va.bottom;gh(Oa,ua,Infinity,sa,ib);var Wa=Oa.ga,Fc=Math.max(Wa.width+vc,0),Dd=Math.max(Wa.height+Cd,0);e.width=Math.max(e.width,Fc);e.height=e.height+Dd}}}var qc=db.length;if(qc!==0){this.ja.width?ua=Math.min(this.ja.width,this.yd.width):e.width!==0&&(ua=Math.min(e.width,this.yd.width));for($a=0;$a<qc;$a++){Oa=db[$a];if(Oa.visible||Oa===this.ub){Va=Oa.margin;vc=Va.right+Va.left;Cd=Va.top+Va.bottom;gh(Oa,ua,
Infinity,sa,ib);Wa=Oa.ga;Fc=Math.max(Wa.width+vc,0);Dd=Math.max(Wa.height+Cd,0);e.width=Math.max(e.width,Fc);e.height=e.height+Dd}}}break;case "Horizontal":for(var Wb=b,hc=c,Gc=d,Gb=[],Hb=0;Hb<n;Hb++){var Ib=l.j[Hb];if(Ib.visible||Ib===this.ub){var Ce=Ui(Ib);if(Ce!==Oi&&Ce!==Qi)Gb.push(Ib);else{var Oc=Ib.margin,nd=Oc.right+Oc.left,Hc=Oc.top+Oc.bottom;gh(Ib,Infinity,Wb,hc,Gc);var xc=Ib.ga,ed=Math.max(xc.width+nd,0),rb=Math.max(xc.height+Hc,0);e.width=e.width+ed;e.height=Math.max(e.height,rb)}}}var yc=
Gb.length;if(yc!==0){this.ja.height?Wb=Math.min(this.ja.height,this.yd.height):e.height!==0&&(Wb=Math.min(e.height,this.yd.height));for(Hb=0;Hb<yc;Hb++){Ib=Gb[Hb];if(Ib.visible||Ib===this.ub){Oc=Ib.margin;nd=Oc.right+Oc.left;Hc=Oc.top+Oc.bottom;gh(Ib,Infinity,Wb,hc,Gc);xc=Ib.ga;ed=Math.max(xc.width+nd,0);rb=Math.max(xc.height+Hc,0);e.width=e.width+ed;e.height=Math.max(e.height,rb)}}}break;case "Spot":a:{var Ed=a,Fd=b,qa=c,Ea=d,zc=ok(this,l,n),lb=zc.margin,Pc,Gd,od=lb.right+lb.left,Jb=lb.top+lb.bottom;
gh(zc,Ed,Fd,qa,Ea);var vb=zc.ga,pd=vb.width,Qc=vb.height,Rc=Math.max(pd+od,0),Ud=Math.max(Qc+Jb,0);e.x=-lb.left;e.y=-lb.top;e.width=Rc;e.height=Ud;for(var Vd=0;Vd<n;Vd++){var ic=l.j[Vd];if(ic!==zc&&(ic.visible||ic===this.ub)){lb=ic.margin;Pc=lb.right+lb.left;Gd=lb.top+lb.bottom;gh(ic,Ed,Fd,0,0);var vb=ic.ga,Rc=Math.max(vb.width+Pc,0),Ud=Math.max(vb.height+Gd,0),$b=ic.lb;if(Qb($b))$b=this.Di;Nb($b)||($b=Zb);var Za=ic.xi;Qb(Za)&&(Za=Zb);mb(e,$b.x*pd+$b.offsetX-(Za.x*vb.width-Za.offsetX)-lb.left,$b.y*
Qc+$b.offsetY-(Za.y*vb.height-Za.offsetY)-lb.top,Rc,Ud)}}var Cb=zc.ah;Cb===Jg&&(Cb=Ui(zc));switch(Cb){case Oi:break a;case Ad:if(!isFinite(Ed)&&!isFinite(Fd))break a;break;case Qi:if(!isFinite(Ed))break a;break;case Pi:if(!isFinite(Fd))break a}vb=zc.ga;pd=vb.width;Qc=vb.height;Rc=Math.max(pd+od,0);Ud=Math.max(Qc+Jb,0);lb=zc.margin;e.x=-lb.left;e.y=-lb.top;e.width=Rc;e.height=Ud;for(Vd=0;Vd<n;Vd++){ic=l.j[Vd];if(ic!==zc&&(ic.visible||ic===this.ub)){lb=ic.margin;Pc=lb.right+lb.left;Gd=lb.top+lb.bottom;
vb=ic.ga;Rc=Math.max(vb.width+Pc,0);Ud=Math.max(vb.height+Gd,0);$b=ic.lb;if(Qb($b))$b=this.Di;Nb($b)||($b=Zb);Za=ic.xi;Qb(Za)&&(Za=Zb);mb(e,$b.x*pd+$b.offsetX-(Za.x*vb.width-Za.offsetX)-lb.left,$b.y*Qc+$b.offsetY-(Za.y*vb.height-Za.offsetY)-lb.top,Rc,Ud)}}}break;case "Auto":var qd=a,ac=b,wb=c,Wd=d,Rb=ok(this,l,n),bc=Rb.margin,Xd=bc.right+bc.left,De=bc.top+bc.bottom;gh(Rb,qd,ac,wb,Wd);var rd=Rb.ga,fd=Math.max(rd.width+Xd,0),Ic=Math.max(rd.height+De,0),cc=(new E).zl(0,0,fd,Ic,pk(Rb)),Hd=(new E).zl(0,
0,fd,Ic,qk(Rb)),df=new J(cc,Hd),Yd=qd,Zd=ac;if(isFinite(qd))Yd=df.width;if(isFinite(ac))Zd=df.height;for(var he=new eb(0,0),sd=0;sd<n;sd++){var td=l.j[sd];if(td!==Rb&&(td.visible||td===this.ub)){var bc=td.margin,gb=bc.right+bc.left,ob=bc.top+bc.bottom;gh(td,Yd,Zd,wb,Wd);rd=td.ga;fd=Math.max(rd.width+gb,0);Ic=Math.max(rd.height+ob,0);he=new eb(Math.max(fd,he.width),Math.max(Ic,he.height))}}if(n===1){e.width=fd;e.height=Ic}else{var Zc=pk(Rb),ha=qk(Rb),Ta,Ba;if(ha.x!==Zc.x&&ha.y!==Zc.y){Ta=he.width/
Math.abs(ha.x-Zc.x);Ba=he.height/Math.abs(ha.y-Zc.y)}var xb=0;Rb instanceof X&&(xb=Rb.Na*Rb.scale);Ta=Ta+(Math.abs(Zc.offsetX)+Math.abs(ha.offsetX)+xb);Ba=Ba+(Math.abs(Zc.offsetY)+Math.abs(ha.offsetY)+xb);var jc=Rb.ah;jc===Jg&&(jc=Ui(Rb));switch(jc){case Oi:Wd=wb=0;break;case Ad:isFinite(qd)&&(Ta=qd);isFinite(ac)&&(Ba=ac);break;case Qi:isFinite(qd)&&(Ta=qd);Wd=0;break;case Pi:wb=0;isFinite(ac)&&(Ba=ac)}if(Rb instanceof X)Rb.ua=m;Rb.Zb=h;gh(Rb,Ta,Ba,wb,Wd);e.width=Rb.ga.width+Xd;e.height=Rb.ga.height+
De}break;case "Table":for(var ud=a,vd=b,Qa=n,Sb=c,ef=d,Kf=[],Ca=0;Ca<Qa;Ca++){var ia=l.j[Ca];if(ia instanceof v&&(ia.type===lk||ia.type===mk))for(var ie=ia.wa,Id=ie.length,Db=0;Db<Id;Db++){var wd=ie.j[Db];if(ia.type===lk)wd.ld=ia.ld;else if(ia.type===mk)wd.jd=ia.jd;Kf.push(wd)}else Kf.push(ia)}for(var Qa=Kf.length,Jd=[],Ca=0;Ca<Qa;Ca++){ia=Kf[Ca];ia.Zb=h;ia.Gc=h;Jd[ia.ld]||(Jd[ia.ld]=[]);Jd[ia.ld][ia.jd]||(Jd[ia.ld][ia.jd]=[]);Jd[ia.ld][ia.jd].push(ia)}for(var Th=[],ff=[],vg=[],gf={count:0},je={count:0},
hf=ud,ke=vd,za,xd,ih=Jd.length,Ca=0;Ca<ih;Ca++)if(Jd[Ca]){var cl=Jd[Ca].length,yb=this.ce(Ca);rk(yb,0);for(Db=0;Db<cl;Db++)if(Jd[Ca][Db]){var zb=this.td(Db);if(Th[Db]===f){rk(zb,0);Th[Db]=h}for(var $d=Jd[Ca][Db],Uh=$d.length,jf=0;jf<Uh;jf++){ia=$d[jf];if(ia.visible||ia===this.ub)if(ia.Mj>1||ia.jj>1)ff.push(ia);else{var Sc=gj(ia,yb,zb);if(Sc!==Oi&&!ia.ja.V()){if(gf[Db]===f){gf[Db]=-1;gf.count++}if(je[Ca]===f){je[Ca]=-1;je.count++}vg.push(ia);gh(ia,Infinity,Infinity,Sb,ef)}else{var wg=isFinite(zb.width)?
zb.width:ud,jh=isFinite(yb.height)?yb.height:vd,Kb=new eb(Math.max(zb.of,Math.min(wg,zb.zd)),Math.max(yb.of,Math.min(jh,yb.zd))),kc=ia.margin,kf=kc.right+kc.left,Ac=kc.top+kc.bottom;gh(ia,Infinity,Infinity,Sb,ef);var ae=ia.ga,Ee=Math.max(ae.width+kf,0),gd=Math.max(ae.height+Ac,0);za=this.ce(Ca);xd=Math.max(gd-za.Fa,0);xd>ke&&(xd=ke);rk(za,za.Fa+xd);ke=Math.max(ke-xd,0);za=this.td(Db);xd=Math.max(Ee-za.Fa,0);xd>hf&&(xd=hf);rk(za,za.Fa+xd);hf=Math.max(hf-xd,0)}}}}}for(var Fe=0,le=0,Qa=this.bu,Ca=0;Ca<
Qa;Ca++)this.qe[Ca]!==f&&(Fe=Fe+this.td(Ca).Fa);Qa=this.Ou;for(Ca=0;Ca<Qa;Ca++)this.ze[Ca]!==f&&(le=le+this.ce(Ca).Fa);hf=Math.max(ud-Fe,0);ke=Math.max(vd-le,0);Qa=vg.length;for(Ca=0;Ca<Qa;Ca++){var ia=vg[Ca],yb=this.ce(ia.ld),zb=this.td(ia.jd),xg=ia.ga,kc=ia.margin,kf=kc.right+kc.left,Ac=kc.top+kc.bottom;gf[ia.jd]=Math.max(xg.width+kf-zb.Ee,0);je[ia.ld]=Math.max(xg.height+Ac-yb.Ee,0)}var Vh=0,Lf=0;for(Ca in je)Ca!=="count"&&(Vh=Vh+je[Ca]);for(Ca in gf)Ca!=="count"&&(Lf=Lf+gf[Ca]);for(Ca=0;Ca<Qa;Ca++){ia=
vg[Ca];if(ia.visible||ia===this.ub){yb=this.ce(ia.ld);zb=this.td(ia.jd);wg=isFinite(zb.width)?zb.width:isFinite(hf)?zb.Ee+gf[ia.jd]/Lf*hf:zb.Ee||hf;jh=isFinite(yb.height)?yb.height:isFinite(ke)?yb.Ee+je[ia.ld]/Vh*ke:yb.Ee||ke;Kb=new eb(Math.max(zb.of,Math.min(wg,zb.zd)),Math.max(yb.of,Math.min(jh,yb.zd)));Sc=gj(ia,yb,zb);switch(Sc){case Qi:Kb.height=Math.max(Kb.height,ia.ga.height);break;case Pi:Kb.width=Math.max(Kb.width,ia.ga.width)}kc=ia.margin;kf=kc.right+kc.left;Ac=kc.top+kc.bottom;cj(ia);gh(ia,
Kb.width,Kb.height,zb.of,yb.of);ae=ia.ga;Ee=Math.max(ae.width+kf,0);gd=Math.max(ae.height+Ac,0);rk(yb,Math.max(yb.Fa,gd));rk(zb,Math.max(zb.Fa,Ee))}}Qa=ff.length;for(Ca=0;Ca<Qa;Ca++){ia=ff[Ca];if(ia.visible||ia===this.ub){yb=this.ce(ia.ld);zb=this.td(ia.jd);Kb=new eb(Math.max(zb.of,Math.min(ud,zb.zd)),Math.max(yb.of,Math.min(vd,yb.zd)));Sc=gj(ia,yb,zb);switch(Sc){case Ad:if(zb.Ee!==0)Kb.width=Math.min(Kb.width,zb.Ee);if(yb.Ee!==0)Kb.height=Math.min(Kb.height,yb.Ee);break;case Qi:if(zb.Ee!==0)Kb.width=
Math.min(Kb.width,zb.Ee);break;case Pi:if(yb.Ee!==0)Kb.height=Math.min(Kb.height,yb.Ee)}if(isFinite(zb.width))Kb.width=zb.width;if(isFinite(yb.height))Kb.height=yb.height;for(var me=new eb(0,0),lc=1;lc<ia.Mj;lc++){if(ia.ld+lc>=this.Ou)break;za=this.ce(ia.ld+lc);me.height=me.height+Math.max(za.of,isNaN(za.Be)?za.zd:Math.min(za.Be,za.zd))}for(lc=1;lc<ia.jj;lc++){if(ia.jd+lc>=this.bu)break;za=this.td(ia.jd+lc);me.width=me.width+Math.max(za.of,isNaN(za.Be)?za.zd:Math.min(za.Be,za.zd))}Kb.width=Kb.width+
me.width;Kb.height=Kb.height+me.height;kc=ia.margin;kf=kc.right+kc.left;Ac=kc.top+kc.bottom;gh(ia,Kb.width,Kb.height,Sb,ef);for(var ae=ia.ga,Ee=Math.max(ae.width+kf,0),gd=Math.max(ae.height+Ac,0),yg=0,lc=0;lc<ia.Mj;lc++){za=this.ce(ia.ld+lc);yg=yg+(za.Fa||0)}if(yg<gd)for(var Ld=gd-yg;Ld>0;){var Bc=za.Fa||0;if(isNaN(za.height)&&za.zd>Bc){rk(za,Math.min(za.zd,Bc+Ld));za.Fa!==Bc&&(Ld=Ld-(za.Fa-Bc))}if(za.index-1===-1)break;za=this.ce(za.index-1)}for(var Ge=0,lc=0;lc<ia.jj;lc++){za=this.td(ia.jd+lc);
Ge=Ge+(za.Fa||0)}if(Ge<Ee)for(Ld=Ee-Ge;Ld>0;){Bc=za.Fa||0;if(isNaN(za.width)&&za.zd>Bc){rk(za,Math.min(za.zd,Bc+Ld));za.Fa!==Bc&&(Ld=Ld-(za.Fa-Bc))}if(za.index-1===-1)break;za=this.td(za.index-1)}}}for(var lf=0,He=0,Sc=Ui(this),zg=this.ja,Ag=this.yd,be=le=Fe=0,Mf=0,Qa=this.bu,Ca=0;Ca<Qa;Ca++)if(this.qe[Ca]!==f){za=this.td(Ca);isFinite(za.width)?be=be+za.width:sk(za)===tk?be=be+za.Fa:Fe=Fe+za.Fa}var lf=isFinite(zg.width)?Math.min(zg.width,Ag.width):Sc!==Oi&&isFinite(ud)?ud:Fe,lf=Math.max(lf,this.Pd.width),
lf=Math.max(lf-be,0),Cg=Math.max(lf/Fe,1);isFinite(Cg)||(Cg=1);for(Ca=0;Ca<Qa;Ca++)if(this.qe[Ca]!==f){za=this.td(Ca);!isFinite(za.width)&&sk(za)!==tk&&rk(za,za.Fa*Cg);za.kb=e.width;e.width=e.width+za.Fa}Qa=this.Ou;for(Ca=0;Ca<Qa;Ca++)if(this.ze[Ca]!==f){za=this.ce(Ca);isFinite(za.height)?Mf=Mf+za.height:sk(za)===tk?Mf=Mf+za.Fa:le=le+za.Fa}var He=isFinite(zg.height)?Math.min(zg.height,Ag.height):Sc!==Oi&&isFinite(vd)?vd:le,He=Math.max(He,this.Pd.height),He=Math.max(He-Mf,0),Ie=Math.max(He/le,1);isFinite(Ie)||
(Ie=1);for(Ca=0;Ca<Qa;Ca++)if(this.ze[Ca]!==f){za=this.ce(Ca);!isFinite(za.height)&&sk(za)!==tk&&rk(za,za.Fa*Ie);za.kb=e.height;e.height=e.height+za.Fa}this.ZD=Jd;break;case "Viewbox":var lj=a,mj=b,Kn=c,Ln=d;n>1&&u.g("Viewbox Panel cannot contain more than one GraphObject.");var ce=l.j[0];ce.Ib=1;cj(ce);gh(ce,Infinity,Infinity,Kn,Ln);var Wh=ce.ga,nj=ce.margin,Mn=nj.right+nj.left,Nn=nj.top+nj.bottom;if(isFinite(lj)||isFinite(mj)){var Bp=ce.scale,On=Wh.width,Pn=Wh.height,Qn=Math.max(lj-Mn,0),Rn=Math.max(mj-
Nn,0);ce.Ib=this.Jm===Kg?ce.Ib*Math.min(Qn/On,Rn/Pn):ce.Ib*Math.max(Qn/On,Rn/Pn);if(Bp!==ce.scale){ce.Zb=h;gh(ce,Infinity,Infinity,Kn,Ln)}}Wh=ce.ga;e.width=isFinite(lj)?lj:Math.max(Wh.width+Mn,0);e.height=isFinite(mj)?mj:Math.max(Wh.height+Nn,0);break;case "Link":var Sn=this instanceof bf?this.Pm:this;if(n===0){var oj=this.Ic;jb(oj,0,0);var Md=this.ga;Md.Wd(0,0,0,0)}else{var pj=this.So(),Je=this.oj(),Ke=Je.copy();Ke.x=0;Ke.y=0;var Dg,kh=this.bw();Dg=this.Y!==f?this.Y:kh.count;for(var qj=new E(Infinity,
Infinity),Eg=0;Eg<Dg;Eg++){var Tn=kh.j[Eg];qj.x=Math.min(Tn.x,qj.x);qj.y=Math.min(Tn.y,qj.y)}this.ki=new E(Je.x,Je.y);this.hh.clear();if(pj!==m){uk(pj,Je.width,Je.height);Md=pj.ga;Ke.mk(Md);this.hh.add(Md)}for(var Fg=m,hg=m,Nf=m,Eg=0;Eg<n;Eg++){var mc=l.j[Eg];if(mc!==pj)if(mc.Mi&&mc instanceof X){uk(mc,Je.width,Je.height);Md=mc.ga;Ke.mk(Md);this.hh.add(Md)}else if(Dg<2){gh(mc,Infinity,Infinity);Md=mc.ga;Ke.mk(Md);this.hh.add(Md)}else{if(Fg===m){Fg=new Ya;hg=new E;Nf=new E}var Of=mc.$g,Vn=mc.Dy,dl=
mc.xi;Pb(dl)&&(dl=Zb);var rj=mc.Lr,Cp=mc.Ey,Xh,Yh,sj=0;if(Of<-Dg||Of>=Dg){var Wn=Sn.pC,tj=Sn.oC;if(rj!==Ni){sj=vk(rj,tj);mc.Ka=sj}Xh=Wn.x-Je.x;Yh=Wn.y-Je.y}else{var mf,lh;if(Of>=0){mf=kh.j[Of];lh=Of<Dg-1?kh.j[Of+1]:mf}else{var el=Dg+Of;mf=kh.j[el];lh=el>0?kh.j[el-1]:mf}tj=Of>=0?mf.Oh(lh):lh.Oh(mf);if(rj!==Ni){sj=vk(rj,tj);mc.Nb=sj}Xh=mf.x+(lh.x-mf.x)*Vn-Je.x;Yh=mf.y+(lh.y-mf.y)*Vn-Je.y}gh(mc,Infinity,Infinity);var Md=mc.ga,oj=mc.ma,Zh=0;if(mc instanceof X)Zh=mc.Na;var Xn=oj.width+Zh,Yn=oj.height+
Zh;Fg.reset();Fg.translate(-Md.x,-Md.y);Fg.scale(mc.scale,mc.scale);Fg.rotate(mc.Ka,Xn/2,Yn/2);var Zn=new J(0,0,Xn,Yn);hg.On(Zn,dl);Fg.vb(hg);var Dp=-hg.x+Zh/2,Ep=-hg.y+Zh/2;Nf.set(Cp);if(isNaN(Nf.x))Nf.x=Of>=0?hg.x+3:-(hg.x+3);if(isNaN(Nf.y))Nf.y=-(hg.y+3);Nf.rotate(tj);Xh=Xh+Nf.x;Yh=Yh+Nf.y;var $h=Zn;$h.set(Md);$h.x=Xh+Dp;$h.y=Yh+Ep;this.hh.add($h);Ke.mk($h)}}if(this.af)for(var $n=this.Xh;$n.next();)gh($n.value,Infinity,Infinity);this.qk=Ke;var vj=this.ki;vj&&vj.Wd(vj.x+Ke.x,vj.y+Ke.y);jb(e,Ke.width||
0,Ke.height||0)}break;case "Grid":break;default:u.g("Unknown panel type: "+p)}var ne=e.width,oe=e.height,wj=this.padding,Fp=wj.top+wj.bottom,ne=ne+(wj.left+wj.right),oe=oe+Fp;if(isFinite(g.width))ne=g.width;if(isFinite(g.height))oe=g.height;ne=Math.min(j.width,ne);oe=Math.min(j.height,oe);ne=Math.max(i.width,ne);oe=Math.max(i.height,oe);ne=Math.max(c,ne);oe=Math.max(d,oe);e.width=ne;e.height=oe;q=this.Ic;jb(q,ne,oe);Ri(this,0,0,ne,oe)}};
function ok(a,b,c){for(var d=0;d<c;d++){var e=b.j[d];if(e.Mi===h)return a.zq=e}b=b.j[0];return a.zq=b}
ea.zi=function(a,b,c,d){var e=this.qk,g=this.wa,i=g.length,j=this.aE;j.reset();if(i===0){var k=this.pa;k.x=a;k.y=b;k.width=c;k.height=d}else{if(!this.ja.V()){var l=Ui(this),n=this.yc,q=n.width,p=n.height;q===c&&p===d&&(l=Oi);switch(l){case Oi:if(q>c||p>d){this.L();gh(this,q>c?c:q,p>d?d:p)}break;case Ad:this.Zb=h;gh(this,c,d,0,0);break;case Qi:this.Zb=h;gh(this,c,p,0,0);break;case Pi:this.Zb=h;gh(this,q,d,0,0)}}k=this.pa;k.x=a;k.y=b;k.width=c;k.height=d;var t=this.I.qb;switch(t){case "Position":for(var w=
e.x+this.padding.left,A=e.y+this.padding.top,F=0;F<i;F++){var H=g.j[F],x=H.ga,I=H.margin,y=H.position.x,G=H.position.y;j.x=isNaN(y)?-w:y-w;j.y=isNaN(G)?-A:G-A;j.x=j.x+I.left;j.y=j.y+I.top;j.width=x.width;j.height=x.height;H.visible&&H.nc(j.x,j.y,j.width,j.height)}break;case "Vertical":for(var fa=this.padding.left,R=this.padding.top,S=0;S<i;S++){var da=fa,ma=g.j[S],ua=ma.ga,sa=ma.margin,ib=sa.left+sa.right,db=ua.width,$a=Ui(ma);if(isNaN(ma.ja.width)&&$a===Ad||$a===Qi)db=Math.max(e.width-ib,0);var Oa=
db+ib,fb=ma.lb;if(Qb(fb))fb=this.Di;Nb(fb)||(fb=Zb);j.x=da+fb.offsetX+sa.left+(e.width*fb.x-Oa*fb.x);j.y=R+fb.offsetY+sa.top;j.width=db;j.height=ua.height;if(ma.visible){ma.nc(j.x,j.y,j.width,j.height);R=R+(ua.height+sa.bottom+sa.top)}}break;case "Horizontal":for(var Va=this.padding.top,vc=this.padding.left,Cd=0;Cd<i;Cd++){var Wa=Va,Fc=g.j[Cd],Dd=Fc.ga,qc=Fc.margin,Wb=qc.top+qc.bottom,hc=Dd.height,Gc=Ui(Fc);if(isNaN(Fc.ja.height)&&Gc===Ad||Gc===Pi)hc=Math.max(e.height-Wb,0);var Gb=hc+Wb,Hb=Fc.lb;
if(Qb(Hb))Hb=this.Di;Nb(Hb)||(Hb=Zb);j.x=vc+Hb.offsetX+qc.left;j.y=Wa+Hb.offsetY+qc.top+(e.height*Hb.y-Gb*Hb.y);j.width=Dd.width;j.height=hc;if(Fc.visible){Fc.nc(j.x,j.y,j.width,j.height);vc=vc+(Dd.width+qc.left+qc.right)}}break;case "Spot":var Ib=ok(this,g,i),Ce=Ib.ga,Oc=Ce.width,nd=Ce.height,Hc=this.padding,xc=Hc.left,ed=Hc.top;j.x=xc-e.x;j.y=ed-e.y;Ib.nc(j.x,j.y,Oc,nd);for(var rb=0;rb<i;rb++){var yc=g.j[rb];if(yc!==Ib){var Ed=yc.ga,Fd=Ed.width,qa=Ed.height,Ea=yc.lb;if(Qb(Ea))Ea=this.Di;Nb(Ea)||
(Ea=Zb);var zc=yc.xi;Qb(zc)&&(zc=Zb);j.x=Ea.x*Oc+Ea.offsetX-(zc.x*Fd-zc.offsetX);j.y=Ea.y*nd+Ea.offsetY-(zc.y*qa-zc.offsetY);j.x=j.x-e.x;j.y=j.y-e.y;yc.visible&&yc.nc(xc+j.x,ed+j.y,Fd,qa)}}break;case "Auto":var lb=ok(this,g,i),Pc=lb.ga,Gd=0;if(lb instanceof X)Gd=lb.Na;var od=new J(0,0,Pc.width-Gd,Pc.height-Gd),Jb=new J(0,0,1,1),vb=lb.margin,pd=vb.left,Qc=vb.top,Rc=this.padding,Ud=Rc.left,Vd=Rc.top;j.x=pd;j.y=Qc;j.width=Pc.width;j.height=Pc.height;lb.nc(Ud+j.x,Vd+j.y,j.width,j.height);var ic=pk(lb),
$b=qk(lb),Za=(new E).On(od,ic),Cb=(new E).On(od,$b);Jb.x=Za.x;Jb.y=Za.y;Jb.Yu(Cb);Jb.x=Jb.x+(pd+Ud+Gd/2);Jb.y=Jb.y+(Qc+Vd+Gd/2);for(var qd=0;qd<i;qd++){var ac=g.j[qd];if(ac!==lb){var wb=ac.ga,vb=ac.margin,Wd=Math.max(wb.width+vb.right+vb.left,0),Rb=Math.max(wb.height+vb.top+vb.bottom,0),bc=ac.lb;if(Qb(bc))bc=this.Di;Nb(bc)||(bc=Zb);j.x=Jb.width*bc.x+bc.offsetX-Wd*bc.x+vb.left+Jb.x;j.y=Jb.height*bc.y+bc.offsetY-Rb*bc.y+vb.top+Jb.y;j.width=Jb.width;j.height=Jb.height;ac.visible&&(tb(Jb.x,Jb.y,Jb.width,
Jb.height,j.x,j.y,wb.width,wb.height)?ac.nc(j.x,j.y,wb.width,wb.height):ac.nc(j.x,j.y,wb.width,wb.height,new J(Jb.x,Jb.y,Jb.width,Jb.height)))}}break;case "Table":for(var Xd=this.ZD,De,rd,fd=Xd.length,Ic=0,cc=0;cc<fd;cc++)Xd[cc]&&(Ic=Math.max(Ic,Xd[cc].length));for(var Hd=Math.min(this.Im,fd-1);Hd!==fd&&(this.ze[Hd]===f||this.ze[Hd].Fa===0);)Hd++;for(var Hd=Math.min(Hd,fd-1),df=-this.ze[Hd].kb,Yd=Math.min(this.nm,Ic-1);Yd!==Ic&&(this.qe[Yd]===f||this.qe[Yd].Fa===0);)Yd++;for(var Yd=Math.min(Yd,Ic-
1),Zd=-this.qe[Yd].kb,cc=0;cc<fd;cc++)if(Xd[cc]){var Ic=Xd[cc].length,he=this.ce(cc);rd=he.kb+df;for(var sd=0;sd<Ic;sd++)if(Xd[cc][sd]){var td=this.td(sd);De=td.kb+Zd;for(var gb=Xd[cc][sd],ob=gb.length,Zc=0;Zc<ob;Zc++){for(var ha=gb[Zc],Ta=ha.ga,Ba=new eb(0,0),xb=1;xb<ha.rowSpan;xb++){if(cc+xb>=this.Ou)break;var jc=this.ce(cc+xb);Ba.height=Ba.height+jc.Fa}for(xb=1;xb<ha.YA;xb++){if(sd+xb>=this.bu)break;var ud=this.td(sd+xb);Ba.width=Ba.width+ud.Fa}var vd=td.Fa+Ba.width,Qa=he.Fa+Ba.height;j.x=De;j.y=
rd;j.width=vd;j.height=Qa;var Sb=De,ef=rd,Kf=vd,Ca=Qa,ia=ha.lb.copy();if(Qb(ia)){ia.Oa(this.Di);Nb(ia)||ia.Oa(Zb);var ie=td.lb;if(Nb(ie)){ia.x=ie.x;ia.offsetX=ie.offsetX}var Id=he.lb;if(Nb(Id)){ia.y=Id.y;ia.offsetY=Id.offsetY}}Nb(ia)||(ia=Zb);var Db=Ta.width,wd=Ta.height,Jd=ha.yd,Th=ha.Pd,Db=Math.min(Jd.width,Db),wd=Math.min(Jd.height,wd),Db=Math.max(Th.width,Db),wd=Math.max(Th.height,wd),ff=ha.margin,vg=ff.left+ff.right,gf=ff.top+ff.bottom,je=gj(ha,he,td);if(isNaN(ha.ja.width)&&je===Ad||je===Qi)Db=
Math.max(vd-vg,0);if(isNaN(ha.ja.height)&&je===Ad||je===Pi)wd=Math.max(Qa-gf,0);var hf=wd+gf;j.x=j.x+(j.width*ia.x-(Db+vg)*ia.x+ia.offsetX+ff.left);j.y=j.y+(j.height*ia.y-hf*ia.y+ia.offsetY+ff.top);ha.visible&&(tb(Sb,ef,Kf,Ca,j.x,j.y,Db,wd)?ha.nc(j.x,j.y,Db,wd):ha.nc(j.x,j.y,Db,wd,new J(Sb,ef,Kf,Ca)))}}}for(cc=0;cc<i;cc++){ha=g.j[cc];if(ha instanceof v&&(ha.type===lk||ha.type===mk)){ha.Ml=this.Yd.copy();ha.yc=this.ga.B();var ke=this.pa.copy();ke.x=0;ke.y=0;ke.freeze();ha.Ic=this.ma.B()}}break;case "Viewbox":var za=
g.j[0],xd=za.ga,ih=za.margin,cl=ih.top+ih.bottom,yb=Math.max(xd.width+(ih.right+ih.left),0),zb=Math.max(xd.height+cl,0),$d=za.lb;if(Qb($d))$d=this.Di;Nb($d)||($d=Zb);j.x=e.width*$d.x-yb*$d.x+$d.offsetX;j.y=e.height*$d.y-zb*$d.y+$d.offsetY;j.width=xd.width;j.height=xd.height;za.nc(j.x,j.y,j.width,j.height);break;case "Link":var Uh=this.So(),jf=0;if(Uh!==m&&jf<this.hh.count){var Sc=this.hh.j[jf];jf++;Uh.nc(Sc.x-this.qk.x,Sc.y-this.qk.y,Sc.width,Sc.height)}for(var wg=0;wg<i;wg++){var jh=g.j[wg];if(jh!==
Uh&&jf<this.hh.count){Sc=this.hh.j[jf];jf++;jh.nc(Sc.x-this.qk.x,Sc.y-this.qk.y,Sc.width,Sc.height)}}var Kb=this.bw(),kc=Kb.count;if(kc>=2&&this.af)for(var kf=this.Xh;kf.next();){var Ac=kf.value,ae=kc,Ee=Kb,gd=Ac.$g,Fe=Ac.Dy,le=Ac.xi;Pb(le)&&(le=Zb);var xg=Ac.Lr,Vh=Ac.Ey,Lf=f,me=f,lc=0;if(gd<-ae||gd>=ae){var yg=this.pC,Ld=this.oC;if(xg!==Ni){lc=vk(xg,Ld);Ac.Ka=lc}Lf=yg.x;me=yg.y}else{var Bc=f,Ge=f;if(gd>=0){Bc=Ee.j[gd];Ge=gd<ae-1?Ee.j[gd+1]:Bc}else var lf=ae+gd,Bc=Ee.j[lf],Ge=lf>0?Ee.j[lf-1]:Bc;Ld=
gd>=0?Bc.Oh(Ge):Ge.Oh(Bc);if(xg!==Ni){lc=vk(xg,Ld);Ac.Ka=lc}Lf=Bc.x+(Ge.x-Bc.x)*Fe;me=Bc.y+(Ge.y-Bc.y)*Fe}var He=new Ya;He.scale(Ac.scale,Ac.scale);He.rotate(Ac.Ka,0,0);var zg=Ac.ma,Ag=new J(0,0,zg.width,zg.height),be=new E;be.On(Ag,le);He.vb(be);var Mf=-be.x,Cg=-be.y,Ie=Vh.copy();if(isNaN(Ie.x))Ie.x=gd>=0?be.x+3:-(be.x+3);if(isNaN(Ie.y))Ie.y=-(be.y+3);Ie.rotate(Ld);Lf=Lf+Ie.x;me=me+Ie.y;He.sD(Ag);Mf=Mf+Ag.x;Cg=Cg+Ag.y;Ac.position=new E(Lf+Mf,me+Cg)}break;case "Grid":break;default:u.g("Unknown panel type: "+
t)}}};ea.Bi=function(a){var b=this.ma;if(tb(0,0,b.width,b.height,a.x,a.y)){for(var c=this.wa.length,b=new E;c--;){var d=this.wa.j[0];if(d.visible||d===this.ub){ab(b.set(a),d.transform);if(d.ea(b))return h}}return this.gh===m&&this.fh===m?o:h}return o};function wk(a,b,c){c(a,b);if(b instanceof v)for(b=b.elements;b.next();)wk(a,b.value,c)}function ni(a,b,c){c(b);for(b=b.elements;b.next();){var d=b.value;d instanceof v&&ni(a,d,c)}}
function xk(a,b,c){if(c(b))return b;if(b instanceof v)for(b=b.elements;b.next();){var d=xk(a,b.value,c);if(d!==m){b.Gf();return d}}return m}v.prototype.findObject=v.prototype.Le=function(a){if(this.name===a)return this;for(var b=this.elements;b.next();){var c=b.value;if(c.name===a)return c;if(c instanceof v&&!c.FF()){c=c.Le(a);if(c!==m)return c}}return m};Q.prototype.findObjectByPred=v.prototype.zB=function(a){return a(this)?this:yk(this,a)};
function yk(a,b){for(var c=a.elements;c.next();){var d=c.value;if(b(d))return d;if(d instanceof v){d=yk(d,b);if(d!==m)return d}}return m}
v.prototype.Yc=function(a,b,c){if(this.qd===o)return m;if(this.I===Ph){if(this.qd===o)a=m;else if(this.Gc)a=m;else{b=this.ma;a=tb(0,0,b.width,b.height,a.x,a.y)?this:m}return a}b===f&&(b=m);c===f&&(c=m);if(this.Gc)return m;var d=this.ma,e=1/this.ml();if(tb(-(5*e),-(5*e),d.width+10*e,d.height+10*e,a.x,a.y)){for(var g=this.wa.length,e=new E;g--;){var i=this.wa.j[g];if(i.visible||i===this.ub){ab(e.set(a),i.transform);var j=m;i instanceof v?j=i.Yc(e,b,c):i.qd===h&&i.ea(e)&&(j=i);if(j!==m){b!==m&&(j=b(j));
if(j&&(c===m||c(j)))return j}}}return this.background===m&&this.Mg===m?m:tb(0,0,d.width,d.height,a.x,a.y)?this:m}return m};
v.prototype.hn=function(a,b,c,d){if(this.qd===o)return o;if(this.I===Ph){if(this.qd===o)a=o;else{!(d instanceof z)&&!(d instanceof la)&&new z(Q);b=this.ma;a=tb(0,0,b.width,b.height,a.x,a.y)?this.background!==m||this.Mg!==m:o}return a}b===f&&(b=m);c===f&&(c=m);!(d instanceof z)&&!(d instanceof la)&&(d=new z(Q));var e=this.ma;if(tb(0,0,e.width,e.height,a.x,a.y)){for(var g=this.wa.length,e=new E;g--;){var i=this.wa.j[g];if(i.visible||i===this.ub){ab(e.set(a),i.transform);if((i instanceof v?i.hn(e,b,
c,d):i.ea(e))&&i.qd!==o){b!==m&&(i=b(i));i&&(c===m||c(i))&&d.add(i)}}}return this.background!==m||this.Mg!==m}return o};
v.prototype.ll=function(a,b,c,d,e,g){if(this.qd===o)return o;if(this.I===Ph){if(this.qd===o)a=o;else{g===f&&(g=new Ya);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.eu(a,g)){Ti(this,b,c,e);a=h}else a=this.de(a,g)?d:o}return a}g===f&&(g=new Ya);b===f&&(b=m);c===f&&(c=m);g.multiply(this.transform);if(this.eu(a,g)){Ti(this,b,c,e);return h}if(this.de(a,g)){for(var i=this.wa.length;i--;){var j=this.wa.j[i];if(j.visible||j===this.ub){var k=j.pa,l=this.pa;if(!(k.x>l.width||k.y>l.height||k.x+
k.width<0||k.y+k.height<0)){if(j instanceof v)k=j.ll(a,b,c,d,e,g.copy());else{var k=j,l=a,n=d,q=g.copy();if(k.qd===o)k=o;else{q===f&&(q=new Ya);q.multiply(k.transform);k=n?k.de(l,q):k.eu(l,q)}}if(k){b!==m&&(j=b(j));j&&(c===m||c(j))&&e.add(j)}}}}return d}return o};
v.prototype.jn=function(a,b,c,d,e){if(this.qd===o)return o;if(this.I===Ph){if(this.qd===o)a=o;else{c=this.ma;b=a.Ph(b);a=a.x>0&&a.x<c.width&&a.y>0&&a.y<c.height||bb(a.x,a.y,0,0,0,c.height)<b||bb(a.x,a.y,0,c.height,c.width,c.height)<b||bb(a.x,a.y,c.width,c.height,c.width,0)<b||bb(a.x,a.y,c.width,0,0,0)<b?h:o}return a}c===f&&(c=m);d===f&&(d=m);var g=this.ma,i=a.Ph(b);if(a.x>0&&a.x<g.width&&a.y>0&&a.y<g.height||bb(a.x,a.y,0,0,0,g.height)<i||bb(a.x,a.y,0,g.height,g.width,g.height)<i||bb(a.x,a.y,g.width,
g.height,g.width,0)<i||bb(a.x,a.y,g.width,0,0,0)<i){for(var g=new E,i=new E,j=this.wa.length;j--;){var k=this.wa.j[j];if(k.visible||k===this.ub){var l=k.pa,n=this.pa;if(!(l.x>n.width||l.y>n.height||l.x+l.width<0||l.y+l.height<0)){l=k.transform;ab(g.set(a),l);ab(i.set(b),l);if(k instanceof v?k.jn(g,i,c,d,e):k.AB(g,i)){c!==m&&(k=c(k));k&&(d===m||d(k))&&e.add(k)}}}}return h}return o};
function pk(a){var b=a.n;if(b===f||b===Ub)b=m;if(b===m&&a instanceof X){a=a.ua;if(a!==m)b=a.n}b===m&&(b=Vb);return b}function qk(a){var b=a.o;if(b===f||b===Ub)b=m;if(b===m&&a instanceof X){a=a.ua;if(a!==m)b=a.o}b===m&&(b=fc);return b}v.prototype.add=v.prototype.add=function(a){u.c(a,Q,v,"add:element");this.ec(this.wa.count,a)};v.prototype.elt=v.prototype.Z=function(a){return this.wa.Z(a)};
v.prototype.insertAt=v.prototype.ec=function(a,b){b instanceof T&&u.g("Cannot add a Part to a Panel: "+b);if(this===b||this.Wh(b)){this===b&&u.g("Cannot make a Panel contain itself: "+this.toString());u.g("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+b.toString())}this.I===Ph&&!(b instanceof X)&&u.g("Can only add Shapes to a Grid Panel, not: "+b);b.yl(this);b.ri=m;if(this.gy!==m){var c=b.data;if(c!==m&&typeof c==="object"){if(this.$e===m)this.$e=new ka(Object,
v);this.$e.add(c,b)}}c=this.wa;c.ec(a,b);a>=c.count&&(a=c.count-1);this.L();b.L();c=this.W;if(c!==m){var d=this.b;d!==m&&d.ca.$a||c.ke(ve,"elements",this,m,b,m,a)}};v.prototype.remove=v.prototype.remove=function(a){u.c(a,Q,v,"remove:element");for(var b=this.wa,c=b.count,d=-1,e=0;e<c;e++)if(b.j[e]===a){d=e;break}d!==-1&&this.vd(d)};v.prototype.removeAt=v.prototype.Se=function(a){s&&u.i(a,v,"removeAt:idx");a>=0&&this.vd(a)};
v.prototype.vd=function(a){var b=this.wa,c=b.Z(a);c.ri=m;if(this.$e!==m){var d=c.data;typeof d==="object"&&this.$e.remove(d)}b.Se(a);this.Zb=o;this.L();if(this instanceof W&&c===this.ri)this.ri=m;b=this.W;if(b!==m){d=this.b;d!==m&&d.ca.$a||b.ke(we,"elements",this,c,m,a,m)}};u.m(v,{Ou:"rowCount"},function(){return this.ze.length});
v.prototype.getRowDefinition=v.prototype.ce=function(a){s&&u.i(a,v,"getRowDefinition:idx");a<0&&u.ia(a,">= 0",v,"getRowDefinition:idx");var a=Math.round(a),b=this.ze;if(b[a]===f){var c=new Fj;c.yl(this);c.Hk=h;c.T=a;b[a]=c}return b[a]};v.prototype.removeRowDefinition=v.prototype.TJ=function(a){s&&u.i(a,v,"removeRowDefinition:idx");a<0&&u.ia(a,">= 0",v,"removeRowDefinition:idx");var a=Math.round(a),b=this.ze;b[a]&&(b[a]=f)};u.m(v,{bu:"columnCount"},function(){return this.qe.length});
v.prototype.getColumnDefinition=v.prototype.td=function(a){s&&u.i(a,v,"getColumnDefinition:idx");a<0&&u.ia(a,">= 0",v,"getColumnDefinition:idx");var a=Math.round(a),b=this.qe;if(b[a]===f){var c=new Fj;c.yl(this);c.Hk=h;c.T=a;b[a]=c}return b[a]};v.prototype.removeColumnDefinition=v.prototype.RJ=function(a){s&&u.i(a,v,"removeColumnDefinition:idx");a<0&&u.ia(a,">= 0",v,"removeColumnDefinition:idx");var a=Math.round(a),b=this.qe;b[a]&&(b[a]=f)};u.a(v,"rowSizing",v.prototype.UC);
u.defineProperty(v,{UC:"rowSizing"},r("hq"),function(a){var b=this.hq;if(b!==a){a!==kk&&a!==tk&&u.g("rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None");this.hq=a;this.L();this.d("rowSizing",b,a)}});u.a(v,"columnSizing",v.prototype.XA);
u.defineProperty(v,{XA:"columnSizing"},r("lo"),function(a){var b=this.lo;if(b!==a){a!==kk&&a!==tk&&u.g("columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None");this.lo=a;this.L();this.d("columnSizing",b,a)}});u.a(v,"topIndex",v.prototype.KG);u.defineProperty(v,{KG:"topIndex"},r("Im"),function(a){var b=this.Im;if(b!==a){(!isFinite(a)||a<0)&&u.g("topIndex must be greater than zero and a real number. Was "+a);this.Im=a;dj(this);this.d("topIndex",b,a)}});
u.a(v,"leftIndex",v.prototype.NF);u.defineProperty(v,{NF:"leftIndex"},r("nm"),function(a){var b=this.nm;if(b!==a){(!isFinite(a)||a<0)&&u.g("leftIndex must be greater than zero and a real number. Was "+a);this.nm=a;dj(this);this.d("leftIndex",b,a)}});u.a(v,"data",v.prototype.data);
u.defineProperty(v,{data:"data"},r("Vl"),function(a){var b=this.Vl;if(b!==a){var c=this instanceof T&&!(this instanceof bf);c&&u.e(a,"object",v,"data");nf(this);this.Vl=a;var d=this.b;if(d!==m)if(c){b!==m&&d.Ff.remove(b);a!==m&&d.Ff.add(a,this)}else{c=this.U;if(c!==m&&c.$e!==m){b!==m&&c.$e.remove(b);a!==m&&c.$e.add(a,this)}}this.d("data",b,a);d!==m&&d.ca.$a||a!==m&&this.gc()}});function Bj(a){a=a.tk;return a!==m&&a.Ha}
function nf(a){var b=a.tk;if(b===m){a.data!==m&&u.g("Template cannot have .data be non-null: "+a);a.tk=b=new z(Se)}else if(b.Ha)return;var c=new z(Q);wk(a,a,function(a,d){var e=d.Ob;if(e!==m){d.Ol=o;for(var g=e.f;g.next();){e=g.value;if(e.mode===Ue)d.Ol=h;var i=e.Qn;if(i!==m){var p=a;i!==""&&(p=a.Le(i));if(p!==m){c.add(p);if(p.vq===f)p.vq=new z(Se);p.vq.add(e)}}b.add(e)}}if(d instanceof v){if(d.ze.length>0){g=d.ze;i=g.length;for(p=0;p<i;p++){var t=g[p];if(t!==f&&t.Ob!==m)for(var w=t.Ob.f;w.next();){e=
w.value;e.df=t;e.Sw=2;e.Kt=t.index;b.add(e)}}}if(d.qe.length>0){g=d.qe;i=g.length;for(p=0;p<i;p++){t=g[p];if(t!==f&&t.Ob!==m)for(w=t.Ob.f;w.next();){e=w.value;e.df=t;e.Sw=1;e.Kt=t.index;b.add(e)}}}}});for(var d=c.f;d.next();){var e=d.value;if(e.vq!==f){e.Ol=h;for(var g=e.vq.f;g.next();){var i=g.value;if(e.Ob===m)e.Ob=new z(Se);e.Ob.add(i)}}delete e.vq}for(d=b.f;d.next();){e=d.value;g=e.df;if(g!==m){e.df=m;if(g===a)e.Cl="";else{if(g instanceof Fj)g=g.U;e.Cl=g.name!==""?g.name:g.name="_"+u.dc(g)}}}b.freeze()}
v.prototype.updateTargetBindings=v.prototype.gc=function(a){var b=this.tk;if(b!==m){a===f&&(a="");for(b=b.f;b.next();){var c=b.value,d=c.Jy;if(!(a!==""&&d!==a)){d=c.Oy;if(!(c.$A===m&&d==="")){var d=this.data,e=c.Qn;e!==m&&(d=this.Le(e));if(d===m)s&&u.trace("Binding error: missing GraphObject named "+e+" in "+this.toString());else{var e=this,g=c.Cl;if(g!==""){e=this.Le(g);if(e===m)continue}else if(c.df!==m)e=c.df;g=c.Sw;if(g!==0){if(!(e instanceof v))continue;g===1?e=e.td(c.Kt):g===2&&(e=e.ce(c.Kt))}e!==
f&&c.yD(e,d)}}}}}};u.a(v,"itemArray",v.prototype.gy);u.defineProperty(v,{gy:"itemArray"},r("yj"),function(a){var b=this.yj;if(b!==a){s&&(a!==m&&!u.isArray(a))&&u.g("Panel.itemArray must be an Array-like object or null, not: "+a);var c=this.b;c!==m&&b!==m&&qi(c,this);this.yj=a;c!==m&&a!==m&&oi(c,this);this.d("itemArray",b,a);c!==m&&c.ca.$a||this.Ay()}});
v.prototype.rebuildItemElements=v.prototype.Ay=function(){for(;this.wa.length>0;)this.vd(0);var a=this.gy;if(a!==m)for(var b=u.wb(a),c=0;c<b;c++)zh(this,u.mb(a,c))};
function zh(a,b,c){if(!(b===f||b===m)){var d=a.getCategoryForItemData(b),e=a.aC,g=m;e!==m&&(g=e.$(d));if(g===m){if(u.fE===f){u.fE=h;u.trace('No item template Panel found for category "'+d+'" on '+a);u.trace("  Using default item template.")}g=a.b.ND}if(g instanceof v){nf(g);e=g.copy();if(typeof b==="object"){if(a.$e===m)a.$e=new ka(Object,v);a.$e.add(b,e)}typeof c==="number"?a.ec(c,e):a.add(e);e.mw=d;e.data=b}}}v.prototype.isItemPanel=v.prototype.FF=function(){return this.yj!==m||this.Kf!==m};
u.a(v,"itemTemplate",v.prototype.JF);u.defineProperty(v,{JF:"itemTemplate"},function(){return this.Kf===m?m:this.Kf.$("")},function(a){if(this.Kf===m)this.Kf=new ka("string",v);var b=this.Kf.$("");if(b!==a){u.c(a,v,v,"itemTemplate");a instanceof T&&u.g("itemTemplate must not be a Part: "+a);this.Kf.add("",a);this.d("itemTemplate",b,a);a=this.b;a!==m&&a.ca.$a||this.Ay()}});u.a(v,"itemTemplateMap",v.prototype.aC);
u.defineProperty(v,{aC:"itemTemplateMap"},r("Kf"),function(a){var b=this.Kf;if(b!==a){u.c(a,ka,v,"itemTemplateMap");for(var c=a.f;c.next();){var d=c.value;d instanceof T&&u.g("Template in itemTemplateMap must not be a Part: "+d)}this.Kf=a;this.d("itemTemplateMap",b,a);a=this.b;a!==m&&a.ca.$a||this.Ay()}});u.a(v,"itemCategoryProperty",v.prototype.IF);
u.defineProperty(v,{IF:"itemCategoryProperty"},r("jm"),function(a){var b=this.jm;if(b!==a){typeof a!=="string"&&typeof a!=="function"&&u.sc(a,"string or function",v,"itemCategoryProperty");this.jm=a;this.d("itemCategoryProperty",b,a)}});
v.prototype.getCategoryForItemData=v.prototype.II=function(a){if(a===m)return"";var b=this.jm;if(typeof b==="function")b=b(a);else if(typeof b==="string"&&typeof a==="object"){if(b==="")return"";b=u.Va(a,b)}else return"";if(b===f)return"";if(typeof b==="string")return b;s&&u.trace("Panel.getCategoryForItemData found a non-string category for "+a+": "+b);return""};
function Fj(){u.Gb(this);this.Hj=m;this.Hk=h;this.T=0;this.Be=NaN;this.Nk=0;this.Mk=Infinity;this.ka=Ub;this.kb=this.Fa=0;this.Ob=m;this.sq=zk;this.Dg=Jg}u.H("RowColumnDefinition",Fj);Fj.prototype.copy=function(){var a=new Fj;a.Hk=this.Hk;a.T=this.T;a.Be=this.Be;a.Nk=this.Nk;a.Mk=this.Mk;a.ka=this.ka;a.Fa=this.Fa;a.kb=this.kb;a.Dg=this.Dg;a.sq=this.sq;a.Ob=this.Ob;return a};var zk;Fj.Default=zk=u.l(Fj,"Default",0);var tk;Fj.None=tk=u.l(Fj,"None",1);var kk;
Fj.ProportionalExtra=kk=u.l(Fj,"ProportionalExtra",2);Fj.prototype.yl=ba("Hj");function rk(a,b){a.Fa=isNaN(a.Be)?Math.max(Math.min(a.Mk,b),a.Nk):Math.max(Math.min(a.Mk,a.Be),a.Nk)}Fj.prototype.rd=function(a,b,c,d,e){var g=this.Hj;if(g!==m){g.L();for(var i=this.Cu,j=g.wa,k=j.length,l=0;l<k;l++){var n=j.j[l];(i?n.ld:n.jd)===this.index&&n.L()}g.ke(ue,a,this,b,c,d,e);if(this.Ob!==m){b=g.hr();if(b!==m){b=b.data;if(b!==m)for(c=this.Ob.f;c.next();)c.value.xD(this,b,a)}}}};u.m(Fj,{U:"panel"},r("Hj"));
u.m(Fj,{Cu:"isRow"},r("Hk"));u.m(Fj,{index:"index"},r("T"));u.a(Fj,"height",Fj.prototype.height);u.defineProperty(Fj,{height:"height"},r("Be"),function(a){var b=this.Be;if(b!==a){s&&u.e(a,"number",Fj,"height");a<0&&u.ia(a,">= 0",Fj,"height");this.Be=a;rk(this,this.Fa);this.rd("size",b,a)}});u.a(Fj,"width",Fj.prototype.width);
u.defineProperty(Fj,{width:"width"},r("Be"),function(a){var b=this.Be;if(b!==a){s&&u.e(a,"number",Fj,"width");a<0&&u.ia(a,">= 0",Fj,"width");this.Be=a;rk(this,this.Fa);this.rd("size",b,a)}});u.a(Fj,"minimum",Fj.prototype.of);u.defineProperty(Fj,{of:"minimum"},r("Nk"),function(a){var b=this.Nk;if(b!==a){s&&u.e(a,"number",Fj,"minimum");(a<0||!isFinite(a))&&u.ia(a,">= 0",Fj,"minimum");this.Nk=a;rk(this,this.Fa);this.rd("minimum",b,a)}});u.a(Fj,"maximum",Fj.prototype.zd);
u.defineProperty(Fj,{zd:"maximum"},r("Mk"),function(a){var b=this.Mk;if(b!==a){s&&u.e(a,"number",Fj,"maximum");a<0&&u.ia(a,">= 0",Fj,"maximum");this.Mk=a;rk(this,this.Fa);this.rd("maximum",b,a)}});u.a(Fj,"alignment",Fj.prototype.lb);u.defineProperty(Fj,{lb:"alignment"},r("ka"),function(a){var b=this.ka;if(!b.u(a)){s&&u.c(a,K,Fj,"alignment");this.ka=a.B();this.rd("alignment",b,a)}});u.a(Fj,"stretch",Fj.prototype.ah);
u.defineProperty(Fj,{ah:"stretch"},r("Dg"),function(a){var b=this.Dg;if(b!==a){s&&u.Ra(a,Q,Fj,"stretch");this.Dg=a;this.rd("stretch",b,a)}});u.a(Fj,"sizing",Fj.prototype.Qr);u.defineProperty(Fj,{Qr:"sizing"},r("sq"),function(a){var b=this.sq;if(b!==a){s&&u.Ra(a,Fj,Fj,"sizing");this.sq=a;this.rd("sizing",b,a)}});function sk(a){if(a.Qr===zk){var b=a.Hj;return a.Cu?b.UC:b.XA}return a.Qr}u.m(Fj,{Ee:"actual"},r("Fa"));u.m(Fj,{position:"position"},r("kb"));
Fj.prototype.bind=Fj.prototype.bind=function(a){a.df=this;var b=this.U;if(b!==m){b=b.hr();b!==m&&Bj(b)&&u.g("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+a)}if(this.Ob===m)this.Ob=new z(Se);this.Ob.add(a)};function X(){Q.call(this);this.ua=m;this.Jo="None";this.Ah=o;this.Ro=Jg;this.wk=m;this.mc=this.Ve="black";this.Eh=1;this.Cm="butt";this.Dm="miter";this.Em=10;this.Ch=this.Bh=Ub;this.Rp=this.Qp=0;this.gp=h;this.bE=new J;this.cm=this.Hm="None";this.Zo=1}u.H("Shape",X);
u.na(X,Q);X.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.ua=this.ua;a.Jo=this.Jo;a.Ah=this.Ah;a.Ro=this.Ro;a.wk=this.wk;a.Ve=this.Ve;a.mc=this.mc;a.Eh=this.Eh;a.Cm=this.Cm;a.Dm=this.Dm;a.Em=this.Em;a.Bh=this.Bh.B();a.Ch=this.Ch.B();a.Qp=this.Qp;a.Rp=this.Rp;a.gp=this.gp;a.Hm=this.Hm;a.cm=this.cm;a.Zo=this.Zo};X.prototype.toString=function(){return"Shape("+(this.Ta!=="None"?this.Ta:this.Fl!=="None"?this.Fl:this.wu)+")#"+u.dc(this)};
X.prototype.br=function(a){if(!(this.mc===m&&this.Ve===m)){this.Ve!==m&&aj(this,a,this.Ve,h);this.mc!==m&&aj(this,a,this.mc,o);a.lineWidth=this.Eh;a.lineJoin=this.Dm;a.lineCap=this.Cm;a.miterLimit=this.Em;var b=h;this.mc!==m&&this.Ve===m&&(b=o);var c=this.ua;if(c!==m)if(c.I===Bd){a.beginPath();a.moveTo(c.Jb,c.Ub);a.lineTo(c.vc,c.Fc);this.Ve!==m&&a.fill();this.mc!==m&&a.stroke()}else if(c.I===Kd){var d=c.Jb,e=c.Ub,g=c.vc,c=c.Fc,i=Math.min(d,g),j=Math.min(e,c),d=Math.abs(g-d),e=Math.abs(c-e);this.Ve!==
m&&a.fillRect(i,j,d,e);if(this.mc!==m){if(b){var k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.strokeRect(i,j,d,e);if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=k[1];a.shadowBlur=k[2]}}}else if(c.I===Nd){d=c.Jb;e=c.Ub;g=c.vc;c=c.Fc;i=Math.abs(g-d)/2;j=Math.abs(c-e)/2;d=Math.min(d,g)+i;e=Math.min(e,c)+j;a.beginPath();a.moveTo(d,e-j);a.bezierCurveTo(d+Cc*i,e-j,d+i,e-Cc*j,d+i,e);a.bezierCurveTo(d+i,e+Cc*j,d+Cc*i,e+j,d,e+j);a.bezierCurveTo(d-Cc*i,e+
j,d-i,e+Cc*j,d-i,e);a.bezierCurveTo(d-i,e-Cc*j,d-Cc*i,e-j,d,e-j);a.closePath();this.Ve!==m&&a.fill();if(this.mc!==m){if(b){k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.stroke();if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=k[1];a.shadowBlur=k[2]}}}else if(c.I===yd){e=c.Bk;c=e.length;for(d=0;d<c;d++){b=e.j[d];a.beginPath();a.moveTo(b.La,b.Ma);g=b.sb.j;i=g.length;for(j=0;j<i;j++){var l=g[j];switch(l.I){case Rd:a.moveTo(l.aa,l.ba);break;case Qd:a.lineTo(l.aa,
l.ba);break;case Sd:a.bezierCurveTo(l.Ij,l.Jj,l.Qk,l.Rk,l.Sk,l.Tk);break;case Td:a.quadraticCurveTo(l.Ij,l.Jj,l.Sk,l.Tk);break;case de:var n=Math.PI/180;a.arc(l.Ql,l.Rl,l.yy,l.hk*n,(l.hk+l.Bl)*n,l.Bl<0?h:o);break;default:u.g("Segment not of valid type")}l.ii&&a.closePath()}if(b.ap===h&&this.Ve!==m){a.fill();b=h}else b=b.Ze?o:h;if(this.mc!==m){if(b){k=[a.shadowOffsetX,a.shadowOffsetY,a.shadowBlur];a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=0}a.stroke();if(b){a.shadowOffsetX=k[0];a.shadowOffsetY=
k[1];a.shadowBlur=k[2]}}}}}};X.prototype.hg=function(){Q.prototype.hg.call(this);var a=this.b;if(a!==m){Ei(a,"fill",this.fill);Ei(a,"geometry",this.kr);this.kn!==Jg&&Ei(a,"geometryStretch",this.kn);Ei(a,"stroke",this.stroke);this.Ly!=="butt"&&Ei(a,"strokeCap",this.Ly);this.My!=="miter"&&Ei(a,"strokeJoin",this.My);this.Ny!==10&&Ei(a,"strokeMiterLimit",this.Ny);Ei(a,"strokeWidth",this.Na)}};
X.prototype.getDocumentPoint=X.prototype.tb=function(a){Pb(a)&&u.g("Spot must be real");var b=this.ma,c=this.Na,a=new E(a.x*(b.width+c)-c/2+b.x+a.offsetX,a.y*(b.height+c)-c/2+b.y+a.offsetY);this.Yd.vb(a);return a};
X.prototype.Bi=function(a,b){var c=this.ua;if(c===m||this.fill===m&&this.stroke===m)return o;var d=c.hb,e=this.Na/2;c.type===Bd&&!b&&(e=e+2);var g=this.bE;g.set(d);g.jf(e+2,e+2);if(!g.ea(a))return o;d=e+1E-4;if(c.type===Bd){if(this.stroke===m)return o;d=(c.aa-c.La)*(a.x-c.La)+(c.ba-c.Ma)*(a.y-c.Ma);return(c.La-c.aa)*(a.x-c.aa)+(c.Ma-c.ba)*(a.y-c.ba)<0||d<0?o:Nc(c.La,c.Ma,c.aa,c.ba,e,a.x,a.y)}if(c.type===Kd){var i=c.La,j=c.Ma,k=c.aa,l=c.ba,c=Math.min(i,k),n=Math.min(j,l),i=Math.abs(k-i),j=Math.abs(l-
j);g.x=c;g.y=n;g.width=i;g.height=j;if(this.fill===m){g.jf(-d,-d);if(g.ea(a))return o;g.jf(d,d)}this.stroke!==m&&g.jf(e,e);return g.ea(a)}if(c.type===Nd){i=c.La;j=c.Ma;k=c.aa;l=c.ba;c=Math.min(i,k);n=Math.min(j,l);i=Math.abs(k-i);j=Math.abs(l-j);g=i/2;j=j/2;c=a.x-(c+g);n=a.y-(n+j);if(this.fill===m){g=g-d;j=j-d;if(g<=0||j<=0||c*c/(g*g)+n*n/(j*j)<=1)return o;g=g+d;j=j+d}if(this.stroke!==m){g=g+e;j=j+e}return g<=0||j<=0?o:c*c/(g*g)+n*n/(j*j)<=1}if(c.type===yd)return this.fill===m?ge(c,a.x,a.y,e):c.ea(a,
e,this.Na>1,b);u.g("Unknown Geometry type");return o};
X.prototype.xr=function(a,b,c,d){var e=this.ja,g=this.Eh,a=Math.max(a,0),b=Math.max(b,0),i;if(this.Ah)i=this.ua.hb;else{Ak[this.Ta]===f&&u.g("Unsupported Figure:"+this.Ta);i=Ak[this.Ta].hb}var j=i.width,k=i.height,l=i.width;i=i.height;switch(Ui(this)){case Oi:d=c=0;break;case Ad:l=Math.max(a-g,0);i=Math.max(b-g,0);break;case Qi:l=Math.max(a-g,0);d=0;break;case Pi:c=0;i=Math.max(b-g,0)}if(isFinite(e.width))l=e.width;if(isFinite(e.height))i=e.height;var e=this.yd,n=this.Pd,c=Math.max(c/this.scale,n.width)-
g,d=Math.max(d/this.scale,n.height)-g,l=Math.min(e.width,l);i=Math.min(e.height,i);l=Math.max(c,l);i=Math.max(d,i);c=this.kn;c=this.Ah?c===Jg?Ad:c:c===Jg?Ak[this.Ta].Hb:c;switch(c){case Oi:break;case Ad:j=l;k=i;break;case Kg:l=Math.min(l/j,i/k);isFinite(l)||(l=1);j=j*l;k=k*l;break;default:u.g(c+"is not a valid geometryStretch.")}if(this.Ah){d=this.kr;i=j;c=k;l=d.copy();d=d.hb;i=i/d.width;c=c/d.height;isFinite(i)||(i=1);isFinite(c)||(c=1);if(!(i===1&&c===1)){switch(l.type){case Bd:case Kd:case Nd:l.Jb=
l.Jb*i;l.Ub=l.Ub*c;l.vc=l.vc*i;l.Fc=l.Fc*c;break;case yd:d=l.rc;e=d.length;for(n=0;n<e;n++){var q=d.j[n];q.La=q.La*i;q.Ma=q.Ma*c;for(var q=q.sb,p=q.length,t=0;t<p;t++){var w=q.j[t];switch(w.type){case Qd:w.aa=w.aa*i;w.ba=w.ba*c;break;case Sd:w.Ij=w.Ij*i;w.Jj=w.Jj*c;w.Qk=w.Qk*i;w.Rk=w.Rk*c;w.vc=w.vc*i;w.Fc=w.Fc*c;break;case Td:w.Ad=w.Ad*i;w.sf=w.sf*c;w.aa=w.aa*i;w.ba=w.ba*c;break;default:u.g("Unknown Segment type: "+w.type)}}}}l.Ea=h}this.ua=l}else if(this.ua===m||this.ua.Js!==a||this.ua.Is!==b){l=
j;i=k;d=this.ja;c=d.width;d=d.height;l!==f&&(!isNaN(l)&&isFinite(l))&&(c=l);i!==f&&(!isNaN(i)&&isFinite(i))&&(d=i);isFinite(c)||(c=100);isFinite(d)||(d=100);e=f;if(this.Fl!=="None")e=Bk(this.Fl);else if(this.wu!=="None")e=Bk(this.wu);else{n=Ck[this.Ta];typeof n==="string"&&(n=Ck[n]);n===f&&u.g("Unknown Shape.figure: "+this.Ta);e=n(this,c,d);e.Hc=new eb(c,d)}if(e===f)(n=Ck.Rectangle)&&(e=n(this,c,d));e.Js=l;e.Is=i;this.ua=e}i=this.ua.hb;Ri(this,i.x-g/2,i.y-g/2,a===0&&j===0?0:i.width+g,b===0&&k===0?
0:i.height+g)};function uk(a,b,c){if(a.Zb!==o){a.yc.xa();var d=a.Eh*a.Ib;Ri(a,-(d/2),-(d/2),b+d,c+d);b=a.yc;c=a.yd;d=a.Pd;b.width=Math.min(c.width,b.width);b.height=Math.min(c.height,b.height);b.width=Math.max(d.width,b.width);b.height=Math.max(d.height,b.height);a.yc.freeze();a.yc.V()||u.g("Non-real measuredBounds has been set");a.Zb=o}}X.prototype.zi=function(a,b,c,d){Xi(this,a,b,c,d)};
X.prototype.xu=function(a,b,c){var d=this.transform.copy();d.zu();var e=Ab(d,a),g=Ab(d,b),i=this.Na/2,d=this.ua;if(d===m){gh(this,Infinity,Infinity);d=this.ua}var j=d.hb,k=o;if(d.type===Bd)if(this.Na<=1.5)k=ad(d.Jb,d.Ub,d.vc,d.Fc,e.x,e.y,g.x,g.y,c);else{if(d.Jb===d.vc){a=i;k=0}else{a=(d.Fc-d.Ub)/(d.vc-d.Jb);k=i/Math.sqrt(1+a*a);a=k*a}i=[];b=new E;ad(d.Jb+a,d.Ub+k,d.vc+a,d.Fc+k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;ad(d.Jb-a,d.Ub-k,d.vc-a,d.Fc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;ad(d.Jb+a,d.Ub+
k,d.Jb-a,d.Ub-k,e.x,e.y,g.x,g.y,b)&&i.push(b);b=new E;ad(d.vc+a,d.Fc+k,d.vc-a,d.Fc-k,e.x,e.y,g.x,g.y,b)&&i.push(b);if(i.length===0)return o;k=h;g=Infinity;for(j=0;j<i.length;j++){var d=i[j],l=(d.x-e.x)*(d.x-e.x)+(d.y-e.y)*(d.y-e.y);if(l<g){g=l;c.x=d.x;c.y=d.y}}}else if(d.type===Kd)k=cd(j.copy().jf(i,i),e,g,c);else if(d.type===Nd)a:{d=j.copy().jf(i,i);if(d.width===0)k=ad(d.x,d.y,d.x,d.y+d.height,e.x,e.y,g.x,g.y,c);else if(d.height===0)k=ad(d.x,d.y,d.x+d.width,d.y,e.x,e.y,g.x,g.y,c);else{var a=d.width/
2,n=d.height/2,k=d.x+a,d=d.y+n,b=9999;e.x!==g.x&&(b=(e.y-g.y)/(e.x-g.x));if(Math.abs(b)<9999){g=e.y-d-b*(e.x-k);if(a*a*b*b+n*n-g*g<0){c.x=NaN;c.y=NaN;k=o;break a}j=Math.sqrt(a*a*b*b+n*n-g*g);i=(-(a*a*b*g)+a*n*j)/(n*n+a*a*b*b)+k;n=(-(a*a*b*g)-a*n*j)/(n*n+a*a*b*b)+k;a=b*(i-k)+g+d;d=b*(n-k)+g+d;k=Math.abs((e.x-i)*(e.x-i))+Math.abs((e.y-a)*(e.y-a));b=Math.abs((e.x-n)*(e.x-n))+Math.abs((e.y-d)*(e.y-d));if(k<b){c.x=i;c.y=a}else{c.x=n;c.y=d}}else{i=n*n;k=e.x-k;k=i-i/(a*a)*k*k;if(k<0){c.x=NaN;c.y=NaN;k=o;
break a}j=Math.sqrt(k);a=d+j;d=d-j;k=Math.abs(a-e.y);b=Math.abs(d-e.y);if(k<b){c.x=e.x;c.y=a}else{c.x=e.x;c.y=d}}k=h}}else if(d.type===yd){var q,p,t,w=e.x,A=e.y,F=g.x,H=g.y,x=new E,g=e.Ph(g);c.x=F;c.y=H;for(j=0;j<d.rc.count;j++){p=d.rc.j[j];var I=p.sb;q=p.La;p=p.Ma;for(var y=q,G=p,fa,R,S=0;S<I.count;S++){fa=I.j[S];R=fa.type;l=fa.aa;t=fa.ba;var da=o;switch(R){case Rd:y=l;G=t;break;case Qd:da=Dk(q,p,l,t,w,A,F,H,x);break;case Sd:da=fa.Ad;R=fa.sf;var ma=fa.In,ua=fa.Jn,da=Xc(q,p,da,R,ma,ua,l,t,w,A,F,H,
0.5,x);break;case Td:da=(q+2*fa.Ad)/3;R=(p+2*fa.sf)/3;ma=(fa.Ad*2+l)/3;ua=(fa.Ad*2+l)/3;da=Xc(q,p,da,R,ma,ua,l,t,w,A,F,H,0.5,x);break;case de:t=ee(fa);R=t.length;for(j=0;j<R;j++){n=t[j];if(j===0&&Dk(q,p,n.Gl,n.Hl,w,A,F,H,x)){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}if(Xc(n.Gl,n.Hl,n.cv,n.ev,n.dv,n.fv,n.nk,n.ok,w,A,F,H,0.5,x)){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}}l=n.nk;t=n.ok;break;default:u.g("Unknown Segment type: "+fa.type)}q=l;p=t;if(da){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}if(fa.VB){l=y;t=G;if(Dk(q,p,l,t,w,A,F,H,
x)){l=Ek(e,x,g,c);if(l<g){g=l;k=h}}}}}e=b.x-a.x;d=b.y-a.y;a=Math.sqrt(e*e+d*d);c.x=c.x-e/a*i;c.y=c.y-d/a*i}else u.g("Invalid Geometry type");if(!k)return o;b=Ab(this.transform,c);c.x=b.x;c.y=b.y;return h};function Ek(a,b,c,d){a=a.Ph(b);if(a<c){d.x=b.x;d.y=b.y;return a}return c}
function Dk(a,b,c,d,e,g,i,j,k){var l=o,n=(e-i)*(b-d)-(g-j)*(a-c);if(n===0)return o;k.x=((e*j-g*i)*(a-c)-(e-i)*(a*d-b*c))/n;k.y=((e*j-g*i)*(b-d)-(g-j)*(a*d-b*c))/n;if((a>c?a-c:c-a)<(b>d?b-d:d-b)){e=b<d?b:d;a=b<d?d:b;if((k.y>e||Sa(k.y,e))&&(k.y<a||Sa(k.y,a)))l=h}else{e=a<c?a:c;a=a<c?c:a;if((k.x>e||Sa(k.x,e))&&(k.x<a||Sa(k.x,a)))l=h}return l}
X.prototype.containedInRect=X.prototype.eu=function(a,b){if(b===f)return a.el(this.pa);var c=this.ua;if(c===m){gh(this,Infinity,Infinity);c=this.ua}var c=c.hb,d=this.Na/2;return!a.ea(b.vb(new E(c.x-d,c.y-d)))||!a.ea(b.vb(new E(c.x-d,c.bottom+d)))||!a.ea(b.vb(new E(c.right+d,c.bottom+d)))||!a.ea(b.vb(new E(c.right+d,c.y-d)))?o:h};
X.prototype.intersectsRect=X.prototype.de=function(a){function b(a,b){i.x=a*c.m11+b*c.m21+c.Pa;i.y=a*c.m12+b*c.m22+c.Qa}if(a.el(this.pa))return h;var c=this.transform.copy();c.zu();var d=a.left,e=a.right,g=a.top,a=a.bottom,i=new E;b(d,g);if(this.Bi(i,h))return h;b(e,g);if(this.Bi(i,h))return h;b(d,a);if(this.Bi(i,h))return h;b(e,a);if(this.Bi(i,h))return h;var j=new E,k=new E;j.x=e;j.y=g;i.x=d;i.y=g;if(Fk(this,i,j,k))return h;i.x=e;i.y=a;if(Fk(this,i,j,k))return h;j.x=d;j.y=a;if(Fk(this,i,j,k))return h;
i.x=d;i.y=g;return Fk(this,i,j,k)?h:o};function Fk(a,b,c,d){if(!a.xu(b,c,d))return o;var a=b.x,b=b.y,e=c.x,g=c.y,c=d.x,d=d.y;if(a===e){var i;if(b<g){i=b;a=g}else{i=g;a=b}return d>=i&&d<=a}if(a<e){i=a;a=e}else i=e;return c>=i&&c<=a}
X.prototype.AB=function(a,b){if(this.fill!==m&&this.Bi(a,h))return h;var c=a.Ph(b),d=c;if(this.Na>1.5){c=this.Na/2+Math.sqrt(c);c=c*c}var e=this.ua;if(e===m){gh(this,Infinity,Infinity);e=this.ua}var g=e.Jb,i=e.Ub,j=e.vc,k=e.Fc;if(e.type===Bd){var e=bb(a.x,a.y,g,i,j,k),l=(g-j)*(a.x-j)+(i-k)*(a.y-k);if(e<=((j-g)*(a.x-g)+(k-i)*(a.y-i)>=0&&l>=0?c:d))return h}else if(e.type===Kd){if(bb(a.x,a.y,g,i,g,k)<=c||bb(a.x,a.y,g,i,j,i)<=c||bb(a.x,a.y,j,i,j,k)<=c||bb(a.x,a.y,g,k,j,k)<=c)return h}else if(e.type===
Nd){var e=a.x-(g+j)/2,d=a.y-(i+k)/2,l=Math.abs(j-g)/2,n=Math.abs(k-i)/2;if(l===0||n===0){e=bb(a.x,a.y,g,i,j,k);return e<=c?h:o}g=new E(Infinity,Infinity);bd(e,d,0,0,-l,-n,l,n,g);bd(e,d,0,n,-l,-n,l,n,g);bd(e,d,0,-n,-l,-n,l,n,g);bd(e,d,0,l,-l,-n,l,n,g);bd(e,d,0,-l,-l,-n,l,n,g);bd(e,d,l/2,n/2,-l,-n,l,n,g);bd(e,d,-l/2,n/2,-l,-n,l,n,g);bd(e,d,l/2,-n/2,-l,-n,l,n,g);bd(e,d,-l/2,-n/2,-l,-n,l,n,g);if((g.x-e)*(g.x-e)+(g.y-d)*(g.y-d)<c)return h}else if(e.type===yd){k=e.hb;g=k.x;i=k.y;j=k.x+k.width;k=k.y+k.height;
if(a.x>j&&a.x<g&&a.y>k&&a.y<i&&bb(a.x,a.y,g,i,g,k)>c&&bb(a.x,a.y,g,i,j,i)>c&&bb(a.x,a.y,j,k,g,k)>c&&bb(a.x,a.y,j,k,j,i)>c)return o;c=Math.sqrt(c);if(this.fill===m?ge(e,a.x,a.y,c):e.ea(a,c,h))return h}return o};u.a(X,"geometry",X.prototype.kr);u.defineProperty(X,{kr:"geometry"},function(){return this.wk?this.wk:this.ua},function(a){var b=this.ua;if(b!==a){if(a!==m){s&&u.c(a,md,X,"geometry");this.wk=this.ua=a.freeze()}else this.wk=this.ua=m;this.Ah=h;this.L();this.d("geometry",b,a)}});
X.prototype.Ye=function(){this.Ah?this.wk=m:this.ua=m;this.L()};u.a(X,"fill",X.prototype.fill);u.defineProperty(X,{fill:"fill"},r("Ve"),function(a){var b=this.Ve;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.Ve=a;$i(this);this.d("fill",b,a)}});u.a(X,"stroke",X.prototype.stroke);
u.defineProperty(X,{stroke:"stroke"},r("mc"),function(a){var b=this.mc;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.mc=a;$i(this);this.d("stroke",b,a)}});u.a(X,"strokeWidth",X.prototype.Na);u.defineProperty(X,{Na:"strokeWidth"},r("Eh"),function(a){var b=this.Eh;if(b!==a){s&&u.i(a,X,"strokeWidth");if(a>=0){this.Eh=a;this.L();this.d("strokeWidth",b,a)}}});u.a(X,"strokeCap",X.prototype.Ly);
u.defineProperty(X,{Ly:"strokeCap"},r("Cm"),function(a){var b=this.Cm;if(b!==a)if(typeof a==="string"&&(a==="butt"||a==="round"||a==="square")){this.Cm=a;$i(this);this.d("strokeCap",b,a)}else u.ia(a,'"butt", "round", or "square"',X,"strokeCap")});u.a(X,"strokeJoin",X.prototype.My);
u.defineProperty(X,{My:"strokeJoin"},r("Dm"),function(a){var b=this.Dm;if(b!==a)if(typeof a==="string"&&(a==="miter"||a==="bevel"||a==="round")){this.Dm=a;$i(this);this.d("strokeJoin",b,a)}else u.ia(a,'"miter", "bevel", or "round"',X,"strokeJoin")});u.a(X,"strokeMiterLimit",X.prototype.Ny);u.defineProperty(X,{Ny:"strokeMiterLimit"},r("Em"),function(a){var b=this.Em;if(b!==a){s&&u.i(a,X,"strokeMiterLimit");if(a>0){this.Em=a;$i(this);this.d("strokeMiterLimit",b,a)}}});u.a(X,"figure",X.prototype.Ta);
u.defineProperty(X,{Ta:"figure"},r("Jo"),function(a){var b=this.Jo;if(b!==a){s&&u.e(a,"string",X,"figure");var c=Ck[a];if(typeof c==="function")c=a;else(c=Ck[a.toLowerCase()])||u.g("Unknown Shape.figure: "+a);if(b!==c){this.Jo=c;this.Ah=o;this.Ye();this.d("figure",b,c)}}});u.a(X,"toArrow",X.prototype.Fl);
u.defineProperty(X,{Fl:"toArrow"},r("Hm"),function(a){var b=this.Hm;a===h?a="Standard":a===o&&(a="None");if(b!==a){s&&u.e(a,"string",X,"toArrow");var c=Bk(a);if(c instanceof md)c=a;else(c=Bk(a.toLowerCase()))||u.g("Unknown Shape.toArrow: "+a);if(b!==c){this.Hm=c;this.Ah=o;this.Ye();Gk(this,c);this.d("toArrow",b,c)}}});u.a(X,"fromArrow",X.prototype.wu);
u.defineProperty(X,{wu:"fromArrow"},r("cm"),function(a){var b=this.cm;a===h?a="Standard":a===o&&(a="None");if(b!==a){s&&u.e(a,"string",X,"fromArrow");var c=Bk(a);if(c instanceof md)c=a;else(c=Bk(a.toLowerCase()))||u.g("Unknown Shape.fromArrow: "+a);if(b!==c){this.cm=c;this.Ah=o;this.Ye();Gk(this,c);this.d("fromArrow",b,c)}}});
function Gk(a,b){var c=a.b;if(!(c!==m&&c.ca.$a)){a.Lr=Hk;c=oc;switch(b){case "halfarrowtop":c=fc;break;case "halftriangletop":c=fc;break;case "openrighttriangletop":c=fc;break;case "opentriangletop":c=fc}if(a.Hm!=="None"){a.$g=-1;a.xi=c}else if(a.cm!=="None"){a.$g=0;a.xi=new K(1-c.x,c.y)}}}u.defineProperty(X,{n:"spot1"},r("Bh"),function(a){u.c(a,K,X,"spot1");var b=this.Bh;if(!b.u(a)){this.Bh=a=a.B();this.L();this.d("spot1",b,a)}});
u.defineProperty(X,{o:"spot2"},r("Ch"),function(a){u.c(a,K,X,"spot2");var b=this.Ch;if(!b.u(a)){this.Ch=a=a.B();this.L();this.d("spot2",b,a)}});u.defineProperty(X,{Eb:"parameter1"},r("Qp"),function(a){var b=this.Qp;if(b!==a){this.Qp=a;this.L();this.d("parameter1",b,a)}});u.defineProperty(X,{Hr:"parameter2"},r("Rp"),function(a){var b=this.Rp;if(b!==a){this.Rp=a;this.L();this.d("parameter2",b,a)}});
u.m(X,{ma:"naturalBounds"},function(){if(this.ua!==m){this.Ic.Oa(this.ua.hb);return this.Ic}var a=this.ja;return new J(0,0,a.width,a.height)});u.a(X,"isRectangular",X.prototype.HF);u.defineProperty(X,{HF:"isRectangular"},r("gp"),function(a){var b=this.gp;if(b!==a){s&&u.e(a,"boolean",X,"isRectangular");this.gp=a;this.L();this.d("isRectangular",b,a)}});u.a(X,"geometryStretch",X.prototype.kn);
u.defineProperty(X,{kn:"geometryStretch"},r("Ro"),function(a){var b=this.Ro;if(b!==a){u.Ra(a,Q,X,"geometryStretch");this.Ro=a;this.d("geometryStretch",b,a)}});u.a(X,"interval",X.prototype.Uh);u.defineProperty(X,{Uh:"interval"},r("Zo"),function(a){var b=this.Zo;s&&u.i(a,X,"interval");a=Math.floor(a);if(b!==a&&a>=0){this.Zo=a;this.L();this.d("interval",b,a)}});
function na(){Q.call(this);this.gd="";this.mc="black";this.fi="13px sans-serif";this.Ce="start";this.dp=h;this.Os=o;this.Yk=Ik;this.Vs=this.Lk=0;this.nj=this.qw=this.rw=m;this.om={};this.Ho=o;this.Sd=this.vi=this.Bq=m}u.H("TextBlock",na);u.na(na,Q);
na.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.gd=this.gd;a.mc=this.mc;a.fi=this.fi;a.Ce=this.Ce;a.dp=this.dp;a.Os=this.Os;a.Yk=this.Yk;a.Lk=this.Lk;a.Vs=this.Vs;a.rw=this.rw;a.qw=this.qw;a.nj=this.nj;a.om=this.om;a.Ho=this.Ho;a.Bq=this.Bq;a.vi=this.vi;a.Sd=this.Sd};na.prototype.toString=function(){return this.gd.length>22?'TextBlock("'+this.gd.substring(0,20)+'"...)':'TextBlock("'+this.gd+'")'};var Jk;na.None=Jk=u.l(na,"None",0);var Kk;na.WrapFit=Kk=u.l(na,"WrapFit",1);var Ik;
na.WrapDesiredSize=Ik=u.l(na,"WrapDesiredSize",2);na.prototype.L=function(){Q.prototype.L.call(this);this.nj=this.qw=this.rw=m};u.a(na,"font",na.prototype.font);u.defineProperty(na,{font:"font"},r("fi"),function(a){var b=this.fi;if(b!==a){s&&u.e(a,"string",na,"font");this.fi=a;this.L();this.d("font",b,a)}});u.a(na,"text",na.prototype.text);u.defineProperty(na,{text:"text"},r("gd"),function(a){var b=this.gd,a=a!==m&&a!==f?a.toString():"";if(b!==a){this.gd=a;this.L();this.d("text",b,a)}});
u.a(na,"textAlign",na.prototype.textAlign);u.defineProperty(na,{textAlign:"textAlign"},r("Ce"),function(a){var b=this.Ce;if(b!==a){s&&u.e(a,"string",na,"textAlign");if(a==="start"||a==="end"||a==="left"||a==="right"||a==="center"){this.Ce=a;$i(this);this.d("textAlign",b,a)}else u.ia(a,'"start", "end", "left", "right", or "center"',na,"textAlign")}});
u.m(na,{ma:"naturalBounds"},function(){if(!this.Ic.V()){var a=Lk(this,this.gd,this.font,{},999999).width,b=Mk(this,a,{}),c=this.ja;if(!isNaN(c.width))a=c.width;if(!isNaN(c.height))b=c.height;jb(this.Ic,a,b)}return this.Ic});u.a(na,"isMultiline",na.prototype.Bu);u.defineProperty(na,{Bu:"isMultiline"},r("dp"),function(a){var b=this.dp;if(b!==a){s&&u.e(a,"boolean",na,"isMultiline");this.dp=a;this.L();this.d("isMultiline",b,a)}});u.a(na,"wrap",na.prototype.Wy);
u.defineProperty(na,{Wy:"wrap"},r("Yk"),function(a){var b=this.Yk;if(b!==a){s&&u.Ra(a,na,na,"wrap");this.Yk=a;this.L();this.d("wrap",b,a)}});u.a(na,"stroke",na.prototype.stroke);u.defineProperty(na,{stroke:"stroke"},r("mc"),function(a){var b=this.mc;if(b!==a&&(a===m||typeof a==="string"||a instanceof Be)){a instanceof Be&&a.freeze();this.mc=a;$i(this);this.d("stroke",b,a)}});u.m(na,{mJ:"lineCount"},r("Lk"));u.a(na,"editable",na.prototype.mu);
u.defineProperty(na,{mu:"editable"},r("Ho"),function(a){var b=this.Ho;if(b!==a){s&&u.e(a,"boolean",na,"editable");this.Ho=a;this.d("editable",b,a)}});u.a(na,"textEditor",na.prototype.Py);u.defineProperty(na,{Py:"textEditor"},r("Bq"),function(a){var b=this.Bq;if(b!==a){a instanceof HTMLElement||u.g("textEditor must be an HTMLElement");this.Bq=a;this.d("textEditor",b,a)}});u.a(na,"errorFunction",na.prototype.cr);
u.defineProperty(na,{cr:"errorFunction"},r("Sd"),function(a){var b=this.Sd;if(b!==a){a!==m&&u.e(a,"function",na,"errorFunction");this.Sd=a;this.d("errorFunction",b,a)}});
na.prototype.br=function(a,b){if(this.mc!==m&&this.gd.length!==0){var c=this.fi;if(c!==m){var d=this.ma.width,e=hh(this,c);if(a.Bv!==c){a.font=c;a.Bv=c}a.textAlign=this.Ce;aj(this,a,this.mc,h);if(this.Os){aj(this,a,this.mc,o);a.lineWidth=e*0.05}var c=this.om,g=0,i=o,j=this.Yd.vb(new E(0,0)),k=this.Yd.vb(new E(0,e)),j=j.Ph(k),k=b.scale;j*k*k<3&&(i=h);j=c.Ih.length;for(k=0;k<j;k++){var l=c.Ih[k],n=c.al[k];l>d&&(l=d);var q=a,p=g,t=e,w=i,A=0;this.Ce==="start"||this.Ce==="left"?A=0:this.Ce==="end"||this.Ce===
"right"?A=d:this.Ce==="center"?A=d/2:u.g("textAlign must be start, end, left, right, or center");if(w)q.fillRect(0+A-l/2,p+t*0.25,l,1);else{q.fillText(n,0+A,p+t-t*0.25);if(this.Os){this.Ce==="end"||this.Ce==="right"?A=A-l:this.Ce==="center"&&(A=A-l/2);q.moveTo(0+A,p+t-t*0.2);q.lineTo(0+A+l,p+t-t*0.2);q.stroke()}}g=g+e}}}};
na.prototype.xr=function(a,b,c,d){var b={},e=0,g=0;if(isNaN(this.ja.width)){e=this.gd;if(e.length===0)e=0;else if(this.Bu){for(var i=g=0,j=o,k={eh:0};!j;){var l=Nk(e,i,k);if(l===-1){l=e.length;j=h}i=Ok(e.substr(i,l-i).replace(/^\s+|\s+$/g,""),this.fi);i>g&&(g=i);i=k.eh}e=g}else{g=Nk(e,0,{});g>=0&&(e=e.substr(0,g));e=i=Ok(e,this.fi)}e=Math.min(e,a/this.scale)}else e=this.ja.width;if(this.U){e=Math.min(e,this.U.yd.width);e=Math.max(e,this.U.Pd.width)}g=Mk(this,e,b);if(!isNaN(this.ja.height))g=this.ja.height;
if(this.Wy===Kk||isNaN(this.ja.width))e=b.Yh;e=Math.max(c,e);g=Math.max(d,g);jb(this.Ic,e,g);Ri(this,0,0,e,g);this.om=b};na.prototype.zi=function(a,b,c,d){Xi(this,a,b,c,d)};
function Lk(a,b,c,d,e){b=b.replace(/^\s+|\s+$/g,"");if(d.Yh===f)d.Yh=0;if(d.Ih===f)d.Ih=[];if(d.al===f)d.al=[];var g=0,i;if(a.Yk===Jk){d.eh=1;d.Yh=Ok(b,c);d.Ih.push(d.Yh);d.al.push(b);return new eb(d.Yh,hh(a,c))}if(a.nj===m)a.nj=hh(a,c);var a=a.nj,j=b,k=0;if(j.length===0){k=1;d.Ih.push(0);d.al.push(j)}for(;j.length>0;){for(var l=Pk(j),j=j.substr(l.length);Ok(l,c)>e;){var n=1,b=Ok(l.substr(0,n),c);for(i=0;b<=e;){n++;i=b;b=Ok(l.substr(0,n),c)}if(n===1){d.Ih[k]=b;g=Math.max(g,b)}else{d.Ih[k]=i;g=Math.max(g,
i)}n--;n<1&&(n=1);d.al[k]=l.substr(0,n);k++;l=l.substr(n)}i=Pk(j);for(b=Ok(l+i,c);i.length>0&&b<=e;){l=l+i;j=j.substr(i.length);i=Pk(j);b=Ok((l+i).replace(/^\s+|\s+$/g,""),c)}l=l.replace(/^\s+|\s+$/g,"");if(l!==""){if(i.length===0){d.Ih.push(b);g=Math.max(g,b)}else{i=Ok(l,c);d.Ih.push(i);g=Math.max(g,i)}d.al.push(l);k++}}d.eh=k;d.Yh=Math.max(d.Yh,g);return new eb(d.Yh,a*d.eh)}
function Pk(a){for(var b=a.length,c=0;c<b&&a.charAt(c)!==" ";)c++;for(;c<b&&a.charAt(c)===" ";)c++;return c>=b?a:a.substr(0,c)}function Ok(a,b){if(u.Dt!==b){u.Ct.font=b;u.Dt=b}return u.Ct.measureText(a).width}function hh(a,b){if(a.nj!==m)return a.nj;if(u.Dt!==b){u.Ct.font=b;u.Dt=b}var c=0;if(u.aw[b]!==f&&u.Az<5E3)c=u.aw[b];else{c=u.Ct.measureText("M").width*1.3;u.aw[b]=c;u.Az++}return c}
function Nk(a,b,c){if(c.eh===f)c.eh=0;var d=a.indexOf("\r",b);d===-1&&(d=a.indexOf("\n",b));if(d>=0)c.eh=a[d]==="\r"&&d+1<a.length&&a[d+1]==="\n"?d+2:d+1;return d}
function Mk(a,b,c){var d=a.gd,e=a.fi,g=hh(a,e);if(d.length===0){c.Yh=0;a.Lk=1;return g}if(!a.Bu){var i=Nk(d,0,{});i>=0&&(d=d.substr(0,i))}for(var j=i=0,k=0,l=-1,n={eh:0},q=o;!q;){l=Nk(d,k,n);if(l===-1){l=d.length;q=h}if(k<=l){k=d.substr(k,l-k);if(a.Yk!==Jk){c.eh=0;k=Lk(a,k,e,c,b);i=i+k.height;j=j+c.eh}else{Lk(a,k,e,c,Infinity);i=i+g;j++}}k=n.eh}a.Lk=j;return a.Vs=i}
na.prototype.hg=function(){Q.prototype.hg.call(this);var a=this.b;if(a!==m){var b=this.om;if(b!==m){Ei(a,"sizeArray",b.Ih);Ei(a,"textArray",b.al);Ei(a,"font",this.font);Ei(a,"stroke",this.stroke);Ei(a,"textAlign",this.textAlign)}}};u.a(na,"textValidation",na.prototype.Tr);u.defineProperty(na,{Tr:"textValidation"},r("vi"),function(a){var b=this.vi;if(b!==a){a!==m&&u.e(a,"function",na,"textValidation");this.vi=a;this.d("textValidation",b,a)}});
function Ej(){Q.call(this);this.Hf=m;this.uq="";this.ui=(new J(NaN,NaN,NaN,NaN)).freeze();this.em=Ad;this.Gm=this.Sd=m;this.Dj=o}u.H("Picture",Ej);u.na(Ej,Q);Ej.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.Hf=this.Hf;a.uq=this.uq;a.ui.Oa(this.ui);a.em=this.em;a.Sd=this.Sd};Ej.prototype.toString=function(){return"Picture("+this.source+")#"+u.dc(this)};u.a(Ej,"element",Ej.prototype.element);
u.defineProperty(Ej,{element:"element"},r("Hf"),function(a){var b=this.Hf;if(b!==a){a instanceof HTMLImageElement||(a instanceof HTMLVideoElement||a instanceof HTMLCanvasElement)||u.g("Picture.element must be an instance of Image, Canvas, or Video.");var c=this;a.onerror=function(a){c.Sd!==m&&c.Sd(c,a)};this.Hf=a;this.d("element",b,a);if(a.complete===h||a.complete===f){this.Dj=h;if(!this.ja.V()){this.Zb=o;this.L()}}else{u.ax.push(this);if(u.rt===m)u.rt=setInterval(function(){for(var a=[],b=u.ax,c=
b.length,i=0;i<c;i++){var j=b[i];Qk(j)||a.push(j)}if(a.length===0){clearInterval(u.rt);u.rt=m}u.ax=a},600)}}});function Qk(a){var b=a.Hf;if(!b)return h;if(!b.complete)return o;if(a.Dj===h)return h;a.Dj=h;if(a.b){if(!a.ja.V())a.Zb=o;a.ja.V()||a.L();ph(a.b)}else{var a=u.tz,c=a.length;if(c===0)for(var c=document.getElementsByTagName("canvas"),d=c.length,b=0;b<d;b++){var e=c[b];e.parentElement&&e.parentElement.M&&a.push(e.parentElement.M)}c=a.length;for(b=0;b<c;b++)ph(a[b])}return h}
function Rk(a){var b=document.createElement("canvas").getContext("2d");b.drawImage(a.Hf,0,0);try{b.getImageData(0,0,1,1);a.Gm=o}catch(c){a.Gm=h}}u.a(Ej,"source",Ej.prototype.source);u.defineProperty(Ej,{source:"source"},r("uq"),function(a){var b=this.uq;if(b!==a){u.e(a,"string",Ej,"source");this.uq=a;this.d("source",b,a);b=u.SD;if(b[a]!==f)this.element=b[a];else{var c=new Image;c.src=a;this.element=b[a]=c}}});u.a(Ej,"sourceRect",Ej.prototype.vf);
u.defineProperty(Ej,{vf:"sourceRect"},r("ui"),function(a){var b=this.ui;if(!b.u(a)){u.c(a,J,Ej,"sourceRect");this.ui=a=a.B();this.d("sourceRect",b,a)}});u.a(Ej,"imageStretch",Ej.prototype.RB);u.defineProperty(Ej,{RB:"imageStretch"},r("em"),function(a){var b=this.em;if(b!==a){u.Ra(a,Q,Ej,"imageStretch");this.em=a;this.d("imageStretch",b,a)}});u.a(Ej,"errorFunction",Ej.prototype.cr);
u.defineProperty(Ej,{cr:"errorFunction"},r("Sd"),function(a){var b=this.Sd;if(b!==a){a!==m&&u.e(a,"function",Ej,"errorFunction");this.Sd=a;if(this.Hf){var c=this;this.Hf.onerror=function(a){c.Sd!==m&&c.Sd(c,a)}}this.d("errorFunction",b,a)}});
Ej.prototype.br=function(a,b){if(!b.Do){this.Gm===m&&Rk(this);if(this.Gm)return}var c=this.Hf;if(c!==m){var d=c.src;(d===m||d==="")&&u.g("Element has no source attribute: "+c);var d=this.ma,e=0,g=0,i=c.naturalWidth,j=c.naturalHeight;if(!(i===0||j===0)){i===f&&c.videoWidth&&(i=c.videoWidth||d.width);j===f&&c.videoHeight&&(j=c.videoHeight||d.height);if(this.vf.V()){e=this.ui.x;g=this.ui.y;i=this.ui.width;j=this.ui.height}var k=i,l=j,n=this.em;switch(n){case Oi:if(this.vf.V())break;e=e+Math.max((k-d.width)/
2,0);g=g+Math.max((l-d.height)/2,0);i=Math.min(d.width,k);j=Math.min(d.height,l);break;case Ad:k=d.width;l=d.height;break;case Kg:case Lg:if(n===Kg){n=Math.min(d.height/l,d.width/k);k=k*n;l=l*n}else if(n===Lg){n=Math.max(d.height/l,d.width/k);k=k*n;l=l*n;e=e+(k-d.width)/2;g=g+(l-d.height)/2;i=i*(1/(k/d.width));j=j*(1/(l/d.height));k=d.width;l=d.height}}a.drawImage(c,e,g,i,j,Math.max((d.width-k)/2,0),Math.max((d.height-l)/2,0),Math.min(d.width,k),Math.min(d.height,l))}}};
u.m(Ej,{ma:"naturalBounds"},r("Ic"));
Ej.prototype.xr=function(a,b,c,d){var e=this.ja,g=Ui(this),i=this.Hf;if(!this.Dj&&i&&i.complete)this.Dj=h;if(i===m)b=a=0;if(g!==Ad&&g!==Qi)isFinite(e.width)?a=e.width:i!==m&&this.Dj!==o&&(a=this.vf.V()?this.vf.width:i.naturalWidth);else{isFinite(a)||(a=this.vf.V()?this.vf.width:i.naturalWidth);c=0}if(g!==Ad&&g!==Pi)isFinite(e.height)?b=e.height:i!==m&&this.Dj!==o&&(b=this.vf.V()?this.vf.height:i.naturalHeight);else{isFinite(b)||(b=this.vf.V()?this.vf.height:i.naturalHeight);d=0}e=this.yd;g=this.Pd;
c=Math.max(c/this.scale,g.width);d=Math.max(d/this.scale,g.height);a=Math.min(e.width,a);b=Math.min(e.height,b);a=Math.max(c,a);b=Math.max(d,b);if(i!==m&&!i.complete){isFinite(a)||(a=0);isFinite(b)||(b=0)}jb(this.Ic,a,b);Ri(this,0,0,a,b)};Ej.prototype.zi=function(a,b,c,d){Xi(this,a,b,c,d)};
Ej.prototype.hg=function(){Q.prototype.hg.call(this);var a=this.b;if(a!==m){Ei(a,"source",this.source);Ei(a,"imageStretch",this.RB);this.vf.V()&&Ei(a,"sourceRect",this.vf);var b,c;this instanceof Ej&&this.element!==m&&(c=a.mh.$(u.dc(this.element)));b=typeof c==="number"?c:-1;if(b>-1){a=a.mg;a.add(",");Da(a);a.add('"base64": { "class":"ref", "id":'+b+" }")}else{c=this.Hf;b=c.naturalWidth;var d=c.naturalHeight;this.Gm===m&&Rk(this);if(!(this.Dj===o||this.Gm===h||b===0||d===0)){if(b===f&&c.videoWidth)b=
c.videoWidth;if(d===f&&c.videoHeight)d=c.videoHeight;var e=document.createElement("canvas");e.width=b;e.height=d;e.getContext("2d").drawImage(c,0,0);c=e.toDataURL();b=-1;if(this instanceof Ej&&this.element!==m){u.on(this.element);b=a.mh.count;a.mh.add(u.dc(this.element),b)}if(b>-1){a=a.mg;a.add(",");Da(a);a.add('"base64": { "id":'+b+', "value":"'+c+'" }')}else Ei(a,"base64",c)}}}};function L(){this.k=new md;this.Yb=m}
function M(a,b,c,d,e){a.k===m&&u.g("StreamGeometryContext has been closed");if(e!==f&&e===h){a.Yb===m&&u.g("Need to call beginFigure first");d=new pe(Rd);d.aa=b;d.ba=c;a.Yb.sb.add(d)}else{a.Yb=new zd;a.Yb.La=b;a.Yb.Ma=c;a.Yb.qr=d;a.k.rc.add(a.Yb)}}function O(a){a.k===m&&u.g("StreamGeometryContext has been closed");a.Yb===m&&u.g("Need to call beginFigure first");var b=a.Yb.sb.length;b>0&&a.Yb.sb.j[b-1].close()}
function Sk(a){a.k===m&&u.g("StreamGeometryContext has been closed");a.Yb===m&&u.g("Need to call beginFigure first");a.Yb.rr=o}L.prototype.moveTo=function(a,b,c){this.k===m&&u.g("StreamGeometryContext has been closed");this.Yb===m&&u.g("Need to call beginFigure first");var d=new pe(Rd);d.aa=a;d.ba=b;c&&d.close();this.Yb.sb.add(d)};
L.prototype.lineTo=function(a,b,c){this.k===m&&u.g("StreamGeometryContext has been closed");this.Yb===m&&u.g("Need to call beginFigure first");var d=new pe(Qd);d.aa=a;d.ba=b;c&&d.close();this.Yb.sb.add(d)};function N(a,b,c,d,e,g,i,j){a.k===m&&u.g("StreamGeometryContext has been closed");a.Yb===m&&u.g("Need to call beginFigure first");var k=new pe(Sd);k.Ad=b;k.sf=c;k.In=d;k.Jn=e;k.aa=g;k.ba=i;j&&k.close();a.Yb.sb.add(k)}
function Pd(a,b,c,d,e){a.k===m&&u.g("StreamGeometryContext has been closed");a.Yb===m&&u.g("Need to call beginFigure first");var g=new pe(Td);g.Ad=b;g.sf=c;g.aa=d;g.ba=e;a.Yb.sb.add(g)}L.prototype.arcTo=function(a,b,c,d,e,g,i){this.k===m&&u.g("StreamGeometryContext has been closed");this.Yb===m&&u.g("Need to call beginFigure first");var j=new pe(de);j.hk=a;j.Bl=b;j.za=c;j.Aa=d;j.yy=e;if(g)j.fG=g;i&&j.close();this.Yb.sb.add(j)};
function Tk(a,b,c,d,e,g,i,j,k,l,n,q,p,t){var w=1-k,a=a*w+c*k,b=b*w+d*k,c=c*w+e*k,d=d*w+g*k,e=e*w+i*k,g=g*w+j*k,j=a*w+c*k,i=b*w+d*k,c=c*w+e*k,d=d*w+g*k;l.x=a;l.y=b;n.x=j;n.y=i;q.x=j*w+c*k;q.y=i*w+d*k;p.x=c;p.y=d;t.x=e;t.y=g}function Uk(a){var a=Vk(a),b=[];b[0]=a[0];for(var c=1,d=1;c<a.length;c=c+2,d=d+3){b[d]=a[c];b[d+1]=a[c];b[d+2]=a[c+1]}return b}
function Vk(a){for(var b=Wk(a),c=[],d=Math.floor(b.length/2),e=b.length-1,a=a%2===0?2:1,g=0;g<e;g++){var i=b[g],j=b[g+1],k=b[(d+g-1)%e],l=b[(d+g+a)%e];c[g*2]=i;c[g*2+1]=Xk(i.x,i.y,k.x,k.y,j.x,j.y,l.x,l.y)}c[c.length]=c[0];return c}function Xk(a,b,c,d,e,g,i,j){c=a-c;i=e-i;if(c===0||i===0)if(c===0){i=(g-j)/i;j=a;e=i*j+(g-i*e)}else{d=(b-d)/c;j=e;e=d*j+(b-d*a)}else{d=(b-d)/c;i=(g-j)/i;a=b-d*a;j=(g-i*e-a)/(d-i);e=d*j+a}return new E(j,e)}
function Wk(a){for(var b=[],c=Math.PI*1.5,d=0,e=0;e<a;e++){d=2*Math.PI/a*e+c;b[e]=new E(0.5+0.5*Math.cos(d),0.5+0.5*Math.sin(d))}b.push(b[0]);return b}
var Ck={None:"Rectangle",Rectangle:function(a,b,c){a=new md;a.type=Kd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;return a},Circle:function(a,b,c){a=new md;a.Hb=Kg;a.type=Nd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;a.n=new K(0.156,0.156);a.o=new K(0.844,0.844);return a},Connector:"Ellipse",Ellipse:function(a,b,c){a=new md;a.type=Nd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;a.n=new K(0.156,0.156);a.o=new K(0.844,0.844);return a},TriangleRight:function(a,b,c){var a=new md,d=new zd,e=new pe;e.aa=b;e.ba=0.5*c;d.sb.add(e);b=new pe;b.aa=0;b.ba=
c;d.sb.add(b.close());a.rc.add(d);a.n=new K(0,0.25);a.o=new K(0.5,0.75);return a},TriangleDown:function(a,b,c){var a=new md,d=new zd,e=new pe;e.aa=b;e.ba=0;d.sb.add(e);e=new pe;e.aa=0.5*b;e.ba=c;d.sb.add(e.close());a.rc.add(d);a.n=new K(0.25,0);a.o=new K(0.75,0.5);return a},TriangleLeft:function(a,b,c){var a=new md,d=new zd;d.La=b;d.Ma=c;var e=new pe;e.aa=0;e.ba=0.5*c;d.sb.add(e);c=new pe;c.aa=b;c.ba=0;d.sb.add(c.close());a.rc.add(d);a.n=new K(0.5,0.25);a.o=new K(1,0.75);return a},TriangleUp:function(a,
b,c){var a=new md,d=new zd;d.La=b;d.Ma=c;var e=new pe;e.aa=0;e.ba=c;d.sb.add(e);c=new pe;c.aa=0.5*b;c.ba=0;d.sb.add(c.close());a.rc.add(d);a.n=new K(0.25,0.5);a.o=new K(0.75,1);return a},Line1:function(a,b,c){a=new md;a.type=Bd;a.La=0;a.Ma=0;a.aa=b;a.ba=c;return a},Line2:function(a,b,c){a=new md;a.type=Bd;a.La=b;a.Ma=0;a.aa=0;a.ba=c;return a},MinusLine:"LineH",LineH:function(a,b,c){a=new md;a.type=Bd;a.La=0;a.Ma=c/2;a.aa=b;a.ba=c/2;return a},LineV:function(a,b,c){a=new md;a.type=Bd;a.La=b/2;a.Ma=
0;a.aa=b/2;a.ba=c;return a},Curve1:function(a,b,c){a=new L;M(a,0,0,o);N(a,Cc*b,0,1*b,(1-Cc)*c,b,c);return a.k},Curve2:function(a,b,c){a=new L;M(a,0,0,o);N(a,0,Cc*c,(1-Cc)*b,c,b,c);return a.k},Curve3:function(a,b,c){a=new L;M(a,1*b,0,o);N(a,1*b,Cc*c,Cc*b,1*c,0,1*c);return a.k},Curve4:function(a,b,c){a=new L;M(a,1*b,0,o);N(a,(1-Cc)*b,0,0,(1-Cc)*c,0,1*c);return a.k},Alternative:"Triangle",Merge:"Triangle",Triangle:function(a,b,c){a=new L;M(a,0.5*b,0*c,h);a.lineTo(0*b,1*c);a.lineTo(1*b,1*c,h);b=a.k;b.n=
new K(0.25,0.5);b.o=new K(0.75,1);return b},Decision:"Diamond",Diamond:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0.5*c,h);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.75);return b},Pentagon:function(a,b,c){var a=Wk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<5;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.2,0.22);b.o=new K(0.8,0.9);return b},DataTransmission:"Hexagon",Hexagon:function(a,b,c){var a=Wk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);
for(var e=1;e<6;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.07,0.25);b.o=new K(0.93,0.75);return b},Heptagon:function(a,b,c){var a=Wk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<7;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.2,0.15);b.o=new K(0.8,0.85);return b},Octagon:function(a,b,c){var a=Wk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<8;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.15,0.15);b.o=new K(0.85,0.85);return b},Nonagon:function(a,b,c){var a=Wk(9),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<9;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.17,0.13);b.o=new K(0.82,0.82);return b},Decagon:function(a,b,c){var a=Wk(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<10;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.16,0.16);b.o=new K(0.84,0.84);return b},Dodecagon:function(a,b,c){var a=Wk(12),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<12;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.16,0.16);b.o=new K(0.84,0.84);return b},
FivePointedStar:function(a,b,c){var a=Vk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<10;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.312,0.383);b.o=new K(0.693,0.765);return b},SixPointedStar:function(a,b,c){var a=Vk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<12;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.17,0.251);b.o=new K(0.833,0.755);return b},SevenPointedStar:function(a,b,c){var a=Vk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<14;e++)d.lineTo(a[e].x*b,
a[e].y*c);O(d);b=d.k;b.n=new K(0.363,0.361);b.o=new K(0.641,0.709);return b},EightPointedStar:function(a,b,c){var a=Vk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<16;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.252,0.255);b.o=new K(0.75,0.75);return b},NinePointedStar:function(a,b,c){var a=Vk(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<18;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.355,0.361);b.o=new K(0.645,0.651);return b},TenPointedStar:function(a,b,c){var a=Vk(10),
d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<20;e++)d.lineTo(a[e].x*b,a[e].y*c);O(d);b=d.k;b.n=new K(0.281,0.261);b.o=new K(0.723,0.748);return b},FivePointedBurst:function(a,b,c){var a=Uk(5),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.312,0.383);b.o=new K(0.693,0.765);return b},SixPointedBurst:function(a,b,c){var a=Uk(6),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*
b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.17,0.251);b.o=new K(0.833,0.755);return b},SevenPointedBurst:function(a,b,c){var a=Uk(7),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.363,0.361);b.o=new K(0.641,0.709);return b},EightPointedBurst:function(a,b,c){var a=Uk(8),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*
b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.252,0.255);b.o=new K(0.75,0.75);return b},NinePointedBurst:function(a,b,c){var a=Uk(9),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.355,0.361);b.o=new K(0.645,0.651);return b},TenPointedBurst:function(a,b,c){var a=Uk(10),d=new L;M(d,a[0].x*b,a[0].y*c,h);for(var e=1;e<a.length;e=e+3)N(d,a[e].x*b,a[e].y*c,a[e+1].x*b,a[e+1].y*c,a[e+2].x*
b,a[e+2].y*c);O(d);b=d.k;b.n=new K(0.281,0.261);b.o=new K(0.723,0.748);return b},Cloud:function(a,b,c){a=new L;M(a,0.08034461*b,0.1944299*c,h);N(a,-0.09239631*b,0.07836421*c,0.1406031*b,-0.0542823*c,0.2008615*b,0.05349299*c);N(a,0.2450511*b,-0.00697547*c,0.3776197*b,-0.01112067*c,0.4338609*b,0.074219*c);N(a,0.4539471*b,0,0.6066018*b,-0.02526587*c,0.6558228*b,0.07004196*c);N(a,0.6914277*b,-0.01904177*c,0.8921095*b,-0.01220843*c,0.8921095*b,0.08370865*c);N(a,1.036446*b,0.04105738*c,1.020377*b,0.3022052*
c,0.9147671*b,0.3194596*c);N(a,1.04448*b,0.360238*c,0.992256*b,0.5219009*c,0.9082935*b,0.562044*c);N(a,1.032337*b,0.5771781*c,1.018411*b,0.8120651*c,0.9212406*b,0.8217117*c);N(a,1.028411*b,0.9571472*c,0.8556702*b,1.052487*c,0.7592566*b,0.9156953*c);N(a,0.7431877*b,1.009325*c,0.5624123*b,1.021761*c,0.5101666*b,0.9310455*c);N(a,0.4820677*b,1.031761*c,0.3030112*b,1.002796*c,0.2609328*b,0.9344623*c);N(a,0.2329994*b,1.01518*c,0.03213784*b,1.01518*c,0.08034461*b,0.870098*c);N(a,-0.02812061*b,0.9032597*
c,-0.01205169*b,0.6835638*c,0.06829292*b,0.6545475*c);N(a,-0.01812061*b,0.6089503*c,-0.00606892*b,0.4555777*c,0.06427569*b,0.4265613*c);N(a,-0.01606892*b,0.3892545*c,-0.01205169*b,0.1944299*c,0.08034461*b,0.1944299*c);O(a);b=a.k;b.n=new K(0.1,0.1);b.o=new K(0.9,0.9);return b},Gate:"Crescent",Crescent:function(a,b,c){a=new L;M(a,0,0,h);N(a,1*b,0,1*b,1*c,0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.511,0.19);b.o=new K(0.776,0.76);return b},FramedRectangle:function(a,b,c){var d=new L,
e=a?a.Eb:0,a=a?a.Hr:0;e===0&&(e=0.1);a===0&&(a=0.1);M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c,h);M(d,e*b,a*c,o,h);d.lineTo(e*b,(1-a)*c);d.lineTo((1-e)*b,(1-a)*c);d.lineTo((1-e)*b,a*c,h);b=d.k;b.n=new K(e,a);b.o=new K(1-e,1-a);return b},Delay:"HalfEllipse",HalfEllipse:function(a,b,c){a=new L;M(a,0,0,h);N(a,Cc*b,0,1*b,(0.5-Cc/2)*c,1*b,0.5*c);N(a,1*b,(0.5+Cc/2)*c,Cc*b,1*c,0,1*c);O(a);b=a.k;b.n=new K(0,0.2);b.o=new K(0.75,0.8);return b},Heart:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);
N(a,0.1*b,0.8*c,0,0.5*c,0*b,0.3*c);N(a,0*b,0,0.45*b,0,0.5*b,0.3*c);N(a,0.55*b,0,1*b,0,1*b,0.3*c);N(a,b,0.5*c,0.9*b,0.8*c,0.5*b,1*c);O(a);b=a.k;b.n=new K(0.15,0.29);b.o=new K(0.86,0.68);return b},Spade:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(0.51*b,0.01*c);N(a,0.6*b,0.2*c,b,0.25*c,b,0.5*c);N(a,b,0.8*c,0.6*b,0.8*c,0.55*b,0.7*c);N(a,0.5*b,0.75*c,0.55*b,0.95*c,0.75*b,c);a.lineTo(0.25*b,c);N(a,0.45*b,0.95*c,0.5*b,0.75*c,0.45*b,0.7*c);N(a,0.4*b,0.8*c,0,0.8*c,0,0.5*c);N(a,0,0.25*c,0.4*b,0.2*c,0.49*
b,0.01*c);O(a);b=a.k;b.n=new K(0.19,0.26);b.o=new K(0.8,0.68);return b},Club:function(a,b,c){a=new L;M(a,0.4*b,0.6*c,h);N(a,0.5*b,0.75*c,0.45*b,0.95*c,0.15*b,1*c);a.lineTo(0.85*b,c);N(a,0.55*b,0.95*c,0.5*b,0.75*c,0.6*b,0.6*c);var d=0.2,e=0.3,g=0,i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-
i+e)*b,(0.5-d+g)*c,(0.5-d+e+0.05)*b,(0.5-i+g-0.02)*c,0.65*b,0.36771243*c);d=0.2;e=0;g=-0.3;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,0.35*b,0.36771243*c);d=0.2;e=-0.3;g=0;i=d*(4*(Math.SQRT2-1)/3);N(a,(0.5+d+e-0.05)*b,(0.5-i+g-0.02)*c,(0.5+i+
e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,0.4*b,0.6*c);O(a);b=a.k;b.n=new K(0.06,0.39);b.o=new K(0.93,0.58);return b},YinYang:function(a,b,c){var a=0.5,d=new L,a=0.5;M(d,b*0.5,0,h);d.arcTo(270,180,b*0.5,b*0.5,b*0.5);N(d,1*b,a*c,0,a*c,a*b,0,h);var a=0.1,e=0.25;M(d,(0.5+a)*b,e*c,h,h);d.arcTo(0,-360,b*0.5,
c*e,a*b);O(d);M(d,b*0.5,0,o);d.arcTo(270,-180,b*0.5,b*0.5,b*0.5);Sk(d);e=0.75;M(d,(0.5+a)*b,e*c,h);d.arcTo(0,360,b*0.5,c*e,a*b);O(d);b=d.k;b.Hb=Kg;return b},Peace:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,b,0.5*c,h);N(a,b,(0.5-d)*c,(0.5+d)*b,0,0.5*b,0);N(a,(0.5-d)*b,0,0,(0.5-d)*c,0,0.5*c);N(a,0,(0.5+d)*c,(0.5-d)*b,c,0.5*b,c);N(a,(0.5+d)*b,c,b,(0.5+d)*c,b,0.5*c);d=0.4*(4*(Math.SQRT2-1)/3);M(a,0.5*b,0.1*c,h,h);N(a,(0.5+d)*b,0.1*c,0.9*b,(0.5-d)*c,0.9*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.5+
d)*b,0.9*c,0.5*b,0.9*c);N(a,(0.5-d)*b,0.9*c,0.1*b,(0.5+d)*c,0.1*b,0.5*c);N(a,0.1*b,(0.5-d)*c,(0.5-d)*b,0.1*c,0.5*b,0.1*c);var d=0.07,e=0,g=-0.707*0.11,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*
c);d=0.07;e=-0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);d=0.07;e=0.707*0.11;g=0.707*0.11;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h);N(a,(0.5+d+e)*b,(0.5-i+
g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);b=a.k;b.n=new K(0.146,0.146);b.o=new K(0.853,0.853);b.Hb=Kg;return b},NotAllowed:function(a,b,c){var a=Cc*0.5,d=0.5,e=new L;M(e,0.5*b,(0.5-d)*c,h);N(e,(0.5-a)*b,(0.5-d)*c,(0.5-d)*b,(0.5-a)*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5+
a)*c,(0.5-a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,(0.5+a)*b,(0.5+d)*c,(0.5+d)*b,(0.5+a)*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5-a)*c,(0.5+a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);var d=0.4,a=Cc*0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);Tk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.42,g,i,j,k,k);var l=new E(0,0),n=new E(0,0),q=new E(0,0);Tk(0.5,0.5-d,0.5+a,0.5-d,0.5+d,0.5-a,0.5+d,0.5,0.58,k,k,q,l,n);var p=new E(0,0),t=new E(0,0),w=new E(0,0);Tk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.42,p,
t,w,k,k);var A=new E(0,0),F=new E(0,0),H=new E(0,0);Tk(0.5,0.5+d,0.5-a,0.5+d,0.5-d,0.5+a,0.5-d,0.5,0.58,k,k,H,A,F);M(e,H.x*b,H.y*c,h,h);N(e,A.x*b,A.y*c,F.x*b,F.y*c,(0.5-d)*b,0.5*c);N(e,(0.5-d)*b,(0.5-a)*c,(0.5-a)*b,(0.5-d)*c,0.5*b,(0.5-d)*c);N(e,g.x*b,g.y*c,i.x*b,i.y*c,j.x*b,j.y*c);e.lineTo(H.x*b,H.y*c);O(e);M(e,w.x*b,w.y*c,h,h);e.lineTo(q.x*b,q.y*c);N(e,l.x*b,l.y*c,n.x*b,n.y*c,(0.5+d)*b,0.5*c);N(e,(0.5+d)*b,(0.5+a)*c,(0.5+a)*b,(0.5+d)*c,0.5*b,(0.5+d)*c);N(e,p.x*b,p.y*c,t.x*b,t.y*c,w.x*b,w.y*c);O(e);
e.k.Hb=Kg;return e.k},Fragile:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.25*b,0);a.lineTo(0.2*b,0.15*c);a.lineTo(0.3*b,0.25*c);a.lineTo(0.29*b,0.33*c);a.lineTo(0.35*b,0.25*c);a.lineTo(0.3*b,0.15*c);a.lineTo(0.4*b,0);a.lineTo(1*b,0);N(a,1*b,0.25*c,0.75*b,0.5*c,0.55*b,0.5*c);a.lineTo(0.55*b,0.9*c);a.lineTo(0.7*b,0.9*c);a.lineTo(0.7*b,1*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.9*c);a.lineTo(0.45*b,0.9*c);a.lineTo(0.45*b,0.5*c);N(a,0.25*b,0.5*c,0,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,
0.4);return b},HourGlass:function(a,b,c){a=new L;M(a,0.65*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.35*b,0.5*c);a.lineTo(0,0);a.lineTo(1*b,0);O(a);return a.k},Lightning:function(a,b,c){a=new L;M(a,0*b,0.55*c,h);a.lineTo(0.75*b,0);a.lineTo(0.25*b,0.45*c);a.lineTo(0.9*b,0.48*c);a.lineTo(0.4*b,1*c);a.lineTo(0.65*b,0.55*c);O(a);return a.k},Parallelogram1:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.1);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=
new K(a,0);b.o=new K(1-a,1);return b},Input:"Output",Output:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.1*b,0);a.lineTo(1*b,0);a.lineTo(0.9*b,1*c);O(a);b=a.k;b.n=new K(0.1,0);b.o=new K(0.9,1);return b},Parallelogram2:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.25);var d=new L;M(d,a*b,0,h);d.lineTo(1*b,0);d.lineTo((1-a)*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},ThickCross:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.25);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*
b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);b=d.k;b.n=new K(0.5-a/2,0.5-a/2);b.o=new K(0.5+a/2,0.5+a/2);return b},ThickX:function(a,b,c){var a=0.25/Math.SQRT2,d=new L;M(d,0.3*b,0,h);d.lineTo(0.5*b,0.2*c);d.lineTo(0.7*b,0);d.lineTo(1*b,0.3*c);d.lineTo(0.8*
b,0.5*c);d.lineTo(1*b,0.7*c);d.lineTo(0.7*b,1*c);d.lineTo(0.5*b,0.8*c);d.lineTo(0.3*b,1*c);d.lineTo(0,0.7*c);d.lineTo(0.2*b,0.5*c);d.lineTo(0,0.3*c);O(d);b=d.k;b.n=new K(0.5-a,0.5-a);b.o=new K(0.5+a,0.5+a);return b},ThinCross:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.1);var d=new L;M(d,(0.5-a/2)*b,0,h);d.lineTo((0.5+a/2)*b,0);d.lineTo((0.5+a/2)*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5-a/2)*c);d.lineTo(1*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,(0.5+a/2)*c);d.lineTo((0.5+a/2)*b,1*c);d.lineTo((0.5-a/2)*b,1*c);d.lineTo((0.5-
a/2)*b,(0.5+a/2)*c);d.lineTo(0,(0.5+a/2)*c);d.lineTo(0,(0.5-a/2)*c);d.lineTo((0.5-a/2)*b,(0.5-a/2)*c);O(d);return d.k},ThinX:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.5*b,0.4*c);a.lineTo(0.9*b,0);a.lineTo(1*b,0.1*c);a.lineTo(0.6*b,0.5*c);a.lineTo(1*b,0.9*c);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.6*c);a.lineTo(0.1*b,1*c);a.lineTo(0,0.9*c);a.lineTo(0.4*b,0.5*c);a.lineTo(0,0.1*c);O(a);return a.k},RightTriangle:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=
new K(0,0.5);b.o=new K(0.5,1);return b},RoundedIBeam:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);N(a,0.5*b,0.25*c,0.5*b,0.75*c,1*b,1*c);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);return a.k},RoundedRectangle:function(a,b,c){var d=a?a.Eb:0;d<=0&&(d=5);var d=Math.min(d,b/3),d=Math.min(d,c/3),a=d*Cc,e=new L;M(e,d,0,h);e.lineTo(b-d,0);N(e,b-a,0,b,a,b,d);e.lineTo(b,c-d);N(e,b,c-a,b-a,c,b-d,c);e.lineTo(d,c);N(e,a,c,0,c-a,0,c-d);e.lineTo(0,d);N(e,0,a,a,0,d,0);O(e);b=e.k;if(a>1){b.n=new K(0,
0,a,a);b.o=new K(1,1,-a,-a)}else{b.n=Vb;b.o=fc}return b},Border:function(a,b,c){a=a?a.Eb:0;a<=0&&(a=5);var a=Math.min(a,b/3),a=Math.min(a,c/3),d=new L;M(d,a,0,h);d.lineTo(b-a,0);N(d,b-0,0,b,0,b,a);d.lineTo(b,c-a);N(d,b,c-0,b-0,c,b-a,c);d.lineTo(a,c);N(d,0,c,0,c-0,0,c-a);d.lineTo(0,a);N(d,0,0,0,0,a,0);O(d);b=d.k;b.n=Vb;b.o=fc;return b},SquareIBeam:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,a*c);d.lineTo((0.5+a/2)*b,a*c);d.lineTo((0.5+a/2)*b,(1-a)*
c);d.lineTo(1*b,(1-a)*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);d.lineTo(0,(1-a)*c);d.lineTo((0.5-a/2)*b,(1-a)*c);d.lineTo((0.5-a/2)*b,a*c);d.lineTo(0,a*c);O(d);return d.k},Trapezoid:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.2);var d=new L;M(d,a*b,0,h);d.lineTo((1-a)*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},ManualLoop:"ManualOperation",ManualOperation:function(a,b,c){var a=a?a.Eb:0,d=new L;M(d,a,0,h);d.lineTo(0,0);d.lineTo(1*b,0);d.lineTo(0.9*b,1*c);d.lineTo(0.1*
b,1*c);O(d);b=d.k;b.n=new K(0.1,0);b.o=new K(0.9,1);return b},GenderMale:function(a,b,c){var a=new L,d=Cc*0.4,e=0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);M(a,(0.5-e)*b,0.5*c,h);N(a,(0.5-e)*b,(0.5-d)*c,(0.5-d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.44,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);var l=new E(i.x,i.y);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.56,g,g,i,j,k);g=new E(i.x,i.y);a.lineTo((l.x*0.1+0.855)*b,l.y*0.1*c);a.lineTo(0.85*
b,l.y*0.1*c);a.lineTo(0.85*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.15*c);a.lineTo((g.x*0.1+0.9)*b,0.15*c);a.lineTo((g.x*0.1+0.9)*b,(g.y*0.1+0.05*0.9)*c);a.lineTo(g.x*b,g.y*c);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);e=0.35;d=Cc*0.35;M(a,0.5*b,(0.5-e)*c,h,h);N(a,(0.5-d)*b,(0.5-e)*c,(0.5-e)*b,(0.5-d)*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,(0.5+d)*c,(0.5-d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);
N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5-d)*c,(0.5+d)*b,(0.5-e)*c,0.5*b,(0.5-e)*c);M(a,(0.5-e)*b,0.5*c,h);b=a.k;b.n=new K(0.202,0.257);b.o=new K(0.692,0.839);b.Hb=Kg;return b},GenderFemale:function(a,b,c){var a=new L,d=0.375,e=0,g=-0.125,i=d*(4*(Math.SQRT2-1)/3);M(a,(0.525+e)*b,(0.5+d+g)*c,h);N(a,(0.5+i+e)*b,(0.5+d+g)*c,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+d+e)*b,(0.5+g)*c);N(a,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5-i+e)*b,(0.5-
d+g)*c,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-i+e)*b,(0.5+d+g)*c,(0.475+e)*b,(0.5+d+g)*c);a.lineTo(0.475*b,0.85*c);a.lineTo(0.425*b,0.85*c);a.lineTo(0.425*b,0.9*c);a.lineTo(0.475*b,0.9*c);a.lineTo(0.475*b,1*c);a.lineTo(0.525*b,1*c);a.lineTo(0.525*b,0.9*c);a.lineTo(0.575*b,0.9*c);a.lineTo(0.575*b,0.85*c);a.lineTo(0.525*b,0.85*c);O(a);d=0.325;e=0;g=-0.125;i=d*(4*(Math.SQRT2-1)/3);M(a,(0.5+d+e)*b,(0.5+g)*c,h,h);N(a,(0.5+d+e)*b,(0.5+i+g)*c,(0.5+i+e)*b,(0.5+d+g)*
c,(0.5+e)*b,(0.5+d+g)*c);N(a,(0.5-i+e)*b,(0.5+d+g)*c,(0.5-d+e)*b,(0.5+i+g)*c,(0.5-d+e)*b,(0.5+g)*c);N(a,(0.5-d+e)*b,(0.5-i+g)*c,(0.5-i+e)*b,(0.5-d+g)*c,(0.5+e)*b,(0.5-d+g)*c);N(a,(0.5+i+e)*b,(0.5-d+g)*c,(0.5+d+e)*b,(0.5-i+g)*c,(0.5+d+e)*b,(0.5+g)*c);M(a,(0.525+e)*b,(0.5+d+g)*c,h);b=a.k;b.n=new K(0.232,0.136);b.o=new K(0.782,0.611);b.Hb=Kg;return b},PlusLine:function(a,b,c){a=new L;M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},XLine:function(a,b,c){a=new L;M(a,
0,1*c,o);a.lineTo(1*b,0);a.moveTo(0,0);a.lineTo(1*b,1*c);return a.k},AsteriskLine:function(a,b,c){var a=new L,d=0.2/Math.SQRT2;M(a,d*b,(1-d)*c,o);a.lineTo((1-d)*b,d*c);a.moveTo(d*b,d*c);a.lineTo((1-d)*b,(1-d)*c);a.moveTo(0*b,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0*c);a.lineTo(0.5*b,1*c);return a.k},CircleLine:function(a,b,c){var a=Cc*0.5,d=new L;M(d,1*b,0.5*c,o);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,
0,1*b,(0.5-a)*c,1*b,0.5*c);b=d.k;b.n=new K(0.146,0.146);b.o=new K(0.853,0.853);b.Hb=Kg;return b},Pie:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(0.5-0.5*Math.SQRT2/2)*c,h);N(a,0.7*b,0*c,0.5*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.5*b,1*c);N(a,(0.5+d+0)*b,1*c,1*b,(0.5+d+0)*c,1*b,0.5*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},PiePiece:function(a,b,c){var a=Cc/Math.SQRT2*0.5,d=Math.SQRT2/2,e=1-Math.SQRT2/
2,g=new L;M(g,b,c,h);N(g,b,(1-a)*c,(d+a)*b,(e+a)*c,d*b,e*c);g.lineTo(0,c);O(g);return g.k},StopSign:function(a,b,c){var d=1/(Math.SQRT2+2),e=new L;M(e,d*b,0,h);e.lineTo((1-d)*b,0);e.lineTo(1*b,d*c);e.lineTo(1*b,(1-d)*c);e.lineTo((1-d)*b,1*c);e.lineTo(d*b,1*c);e.lineTo(0,(1-d)*c);e.lineTo(0,d*c);O(e);b=e.k;if(a&&Qb(a.n))a.n=new K(d/2,d/2);if(a&&Qb(a.o))a.o=new K(1-d/2,1-d/2);return b},LogicImplies:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,o);d.lineTo(1*b,0.5*c);d.lineTo((1-
a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);b=d.k;b.n=new K(0,0);b.o=new K(0.8,0.5);return b},LogicIff:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.2);var d=new L;M(d,(1-a)*b,0*c,o);d.lineTo(1*b,0.5*c);d.lineTo((1-a)*b,c);d.moveTo(0,0.5*c);d.lineTo(b,0.5*c);d.moveTo(a*b,0);d.lineTo(0,0.5*c);d.lineTo(a*b,c);b=d.k;b.n=new K(0.2,0);b.o=new K(0.8,0.5);return b},LogicNot:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.lineTo(1*b,1*c);return a.k},LogicAnd:function(a,b,c){a=new L;M(a,0,1*c,o);a.lineTo(0.5*
b,0);a.lineTo(1*b,1*c);b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,1);return b},LogicOr:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);b=a.k;b.n=new K(0.219,0);b.o=new K(0.78,0.409);return b},LogicXor:function(a,b,c){a=new L;M(a,0.5*b,0,o);a.lineTo(0.5*b,1*c);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);var d=Cc*0.5;N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.Hb=
Kg;return b},LogicTruth:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);return a.k},LogicFalsity:function(a,b,c){a=new L;M(a,0,1*c,o);a.lineTo(1*b,1*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);return a.k},LogicThereExists:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0,0.5*c);a.moveTo(1*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);return a.k},LogicForAll:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0.5*b,1*c);a.lineTo(1*b,0);a.moveTo(0.25*
b,0.5*c);a.lineTo(0.75*b,0.5*c);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,0.5);return b},LogicIsDefinedAs:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(b,0);a.moveTo(0,0.5*c);a.lineTo(b,0.5*c);a.moveTo(0,c);a.lineTo(b,c);b=a.k;b.n=new K(0.01,0.01);b.o=new K(0.99,0.49);return b},LogicIntersect:function(a,b,c){var a=Cc*0.5,d=new L;M(d,0,1*c,o);d.lineTo(0,0.5*c);N(d,0,(0.5-a)*c,(0.5-a)*b,0,0.5*b,0);N(d,(0.5+a)*b,0,1*b,(0.5-a)*c,1*b,0.5*c);d.lineTo(1*b,1*c);b=d.k;b.n=new K(0,0.5);b.o=new K(1,1);return b},
LogicUnion:function(a,b,c){var a=Cc*0.5,d=new L;M(d,1*b,0,o);d.lineTo(1*b,0.5*c);N(d,1*b,(0.5+a)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(d,(0.5-a)*b,1*c,0,(0.5+a)*c,0,0.5*c);d.lineTo(0,0);b=d.k;b.n=new K(0,0);b.o=new K(1,0.5);return b},Arrow:function(a,b,c){var d=a?a.Eb:0,a=a?a.Hr:0;d===0&&(d=0.3);a===0&&(a=0.3);var e=new L;M(e,0,(0.5-a/2)*c,h);e.lineTo((1-d)*b,(0.5-a/2)*c);e.lineTo((1-d)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-d)*b,1*c);e.lineTo((1-d)*b,(0.5+a/2)*c);e.lineTo(0,(0.5+a/2)*c);O(e);b=e.k;b.n=new K(0,
0.5-a/2);d=Xk(0,0.5+a/2,1,0.5+a/2,1-d,1,1,0.5);b.o=new K(d.x,d.y);return b},ISOProcess:"Chevron",Chevron:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.5*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},DoubleArrow:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.3*b,0.214*c);a.lineTo(0.3*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.3*b,1*c);a.lineTo(0.3*b,0.786*c);a.lineTo(0,1*c);O(a);M(a,0.3*b,0.214*c,o);a.lineTo(0.3*b,0.786*c);Sk(a);return a.k},DoubleEndArrow:function(a,
b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.3*b,0.7*c);a.lineTo(0.3*b,1*c);a.lineTo(0,0.5*c);a.lineTo(0.3*b,0);a.lineTo(0.3*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;c=Xk(0,0.5,0.3,0,0,0.3,0.3,0.3);b.n=new K(c.x,c.y);c=Xk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},IBeamArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0.2*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);
a.lineTo(0.2*b,0);a.lineTo(0.2*b,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new K(0,0.3);c=Xk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},Pointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0);O(a);b=a.k;b.n=new K(0.2,0.35);c=Xk(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new K(c.x,c.y);return b},RoundedPointer:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);N(a,0.5*b,0.75*c,0.5*b,0.25*c,0,0);O(a);b=a.k;b.n=new K(0.4,0.35);c=
Xk(0.2,0.65,1,0.65,0,1,1,0.5);b.o=new K(c.x,c.y);return b},SplitEndArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0.7*b,0.7*c);a.lineTo(0,0.7*c);a.lineTo(0.2*b,0.5*c);a.lineTo(0,0.3*c);a.lineTo(0.7*b,0.3*c);a.lineTo(0.7*b,0);O(a);b=a.k;b.n=new K(0.2,0.3);c=Xk(0.7,1,1,0.5,0.7,0.7,1,0.7);b.o=new K(c.x,c.y);return b},MessageToUser:"SquareArrow",SquareArrow:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0.7*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.7*b,0);O(a);b=
a.k;b.n=new K(0,0);b.o=new K(0.7,1);return b},Cone1:function(a,b,c){var a=Cc*0.5,d=Cc*0.1,e=new L;M(e,0,0.9*c,h);e.lineTo(0.5*b,0);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);O(e);b=e.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.97);return b},Cone2:function(a,b,c){a=new L;M(a,0,0.9*c,h);N(a,(1-0.85/0.9)*b,1*c,0.85/0.9*b,1*c,1*b,0.9*c);a.lineTo(0.5*b,0);a.lineTo(0,0.9*c);O(a);M(a,0,0.9*c,o);N(a,(1-0.85/0.9)*b,0.8*c,0.85/0.9*b,0.8*c,1*b,0.9*c);Sk(a);
b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.82);return b},Cube1:function(a,b,c){a=new L;M(a,0.5*b,1*c,h);a.lineTo(1*b,0.85*c);a.lineTo(1*b,0.15*c);a.lineTo(0.5*b,0*c);a.lineTo(0*b,0.15*c);a.lineTo(0*b,0.85*c);O(a);M(a,0.5*b,1*c,o);a.lineTo(0.5*b,0.3*c);a.lineTo(0,0.15*c);a.moveTo(0.5*b,0.3*c);a.lineTo(1*b,0.15*c);Sk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(0.5,0.85);return b},Cube2:function(a,b,c){a=new L;M(a,0,0.3*c,h);a.lineTo(0*b,1*c);a.lineTo(0.7*b,c);a.lineTo(1*b,0.7*c);a.lineTo(1*b,0*c);a.lineTo(0.3*
b,0*c);O(a);M(a,0,0.3*c,o);a.lineTo(0.7*b,0.3*c);a.lineTo(1*b,0*c);a.moveTo(0.7*b,0.3*c);a.lineTo(0.7*b,1*c);Sk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(0.7,1);return b},MagneticData:"Cylinder1",Cylinder1:function(a,b,c){var a=Cc*0.5,d=Cc*0.1,e=new L;M(e,0,0.1*c,h);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);e.lineTo(0,0.1*c);M(e,0,0.1*c,o);N(e,0,(0.1+d)*c,(0.5-a)*b,0.2*
c,0.5*b,0.2*c);N(e,(0.5+a)*b,0.2*c,1*b,(0.1+d)*c,1*b,0.1*c);Sk(e);b=e.k;b.n=new K(0,0.2);b.o=new K(1,0.9);return b},Cylinder2:function(a,b,c){var a=Cc*0.5,d=Cc*0.1,e=new L;M(e,0,0.9*c,h);e.lineTo(0,0.1*c);N(e,0,(0.1-d)*c,(0.5-a)*b,0,0.5*b,0);N(e,(0.5+a)*b,0,1*b,(0.1-d)*c,1*b,0.1*c);e.lineTo(1*b,0.9*c);N(e,1*b,(0.9+d)*c,(0.5+a)*b,1*c,0.5*b,1*c);N(e,(0.5-a)*b,1*c,0,(0.9+d)*c,0,0.9*c);M(e,0,0.9*c,o);N(e,0,(0.9-d)*c,(0.5-a)*b,0.8*c,0.5*b,0.8*c);N(e,(0.5+a)*b,0.8*c,1*b,(0.9-d)*c,1*b,0.9*c);Sk(e);b=e.k;
b.n=new K(0,0.1);b.o=new K(1,0.8);return b},Cylinder3:function(a,b,c){var a=Cc*0.1,d=Cc*0.5,e=new L;M(e,0.1*b,0,h);e.lineTo(0.9*b,0);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);M(e,0.1*b,0,o);N(e,(0.1+a)*b,0,0.2*b,(0.5-d)*c,0.2*b,0.5*c);N(e,0.2*b,(0.5+d)*c,(0.1+a)*b,1*c,0.1*b,1*c);Sk(e);b=e.k;b.n=new K(0.2,0);b.o=new K(0.9,1);return b},DirectData:"Cylinder4",Cylinder4:function(a,
b,c){var a=Cc*0.1,d=Cc*0.5,e=new L;M(e,0.9*b,0,h);N(e,(0.9+a)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(e,1*b,(0.5+d)*c,(0.9+a)*b,1*c,0.9*b,1*c);e.lineTo(0.1*b,1*c);N(e,(0.1-a)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(e,0,(0.5-d)*c,(0.1-a)*b,0,0.1*b,0);e.lineTo(0.9*b,0);M(e,0.9*b,0,o);N(e,(0.9-a)*b,0,0.8*b,(0.5-d)*c,0.8*b,0.5*c);N(e,0.8*b,(0.5+d)*c,(0.9-a)*b,1*c,0.9*b,1*c);Sk(e);b=e.k;b.n=new K(0.1,0);b.o=new K(0.8,1);return b},Prism1:function(a,b,c){a=new L;M(a,0.25*b,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(b,0.5*c);a.lineTo(0.5*
b,c);a.lineTo(0,c);O(a);M(a,0.25*b,0.25*c,o);a.lineTo(0.5*b,c);Sk(a);b=a.k;b.n=new K(0.408,0.172);b.o=new K(0.833,0.662);return b},Prism2:function(a,b,c){a=new L;M(a,0,0.25*c,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);M(a,0,c,o);a.lineTo(0.25*b,0.5*c);a.lineTo(b,0.25*c);a.moveTo(0,0.25*c);a.lineTo(0.25*b,0.5*c);Sk(a);b=a.k;b.n=new K(0.25,0.5);b.o=new K(0.75,0.75);return b},Pyramid1:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.75*c);a.lineTo(0.5*
b,1*c);a.lineTo(0,0.75*c);O(a);M(a,0.5*b,0,o);a.lineTo(0.5*b,1*c);Sk(a);b=a.k;b.n=new K(0.25,0.367);b.o=new K(0.75,0.875);return b},Pyramid2:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(b,0.85*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.85*c);O(a);M(a,0.5*b,0,o);a.lineTo(0.5*b,0.7*c);a.lineTo(0,0.85*c);a.moveTo(0.5*b,0.7*c);a.lineTo(1*b,0.85*c);Sk(a);b=a.k;b.n=new K(0.25,0.367);b.o=new K(0.75,0.875);return b},Actor:function(a,b,c){var d=Cc*0.2,e=Cc*0.1,a=0.5,g=0.1,i=new L;M(i,a*b,(g+0.1)*c,h);N(i,(a-d)*
b,(g+0.1)*c,(a-0.2)*b,(g+e)*c,(a-0.2)*b,g*c);N(i,(a-0.2)*b,(g-e)*c,(a-d)*b,(g-0.1)*c,a*b,(g-0.1)*c);N(i,(a+d)*b,(g-0.1)*c,(a+0.2)*b,(g-e)*c,(a+0.2)*b,g*c);N(i,(a+0.2)*b,(g+e)*c,(a+d)*b,(g+0.1)*c,a*b,(g+0.1)*c);d=0.05;e=Cc*d;M(i,0.5*b,0.2*c,h);i.lineTo(0.95*b,0.2*c);a=0.95;g=0.25;N(i,(a+e)*b,(g-d)*c,(a+d)*b,(g-e)*c,(a+d)*b,g*c);i.lineTo(1*b,0.6*c);i.lineTo(0.85*b,0.6*c);i.lineTo(0.85*b,0.35*c);d=0.025;e=Cc*d;a=0.825;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*
b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.8*b,1*c);i.lineTo(0.55*b,1*c);i.lineTo(0.55*b,0.7*c);d=0.05;e=Cc*d;a=0.5;g=0.7;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.45*b,1*c);i.lineTo(0.2*b,1*c);i.lineTo(0.2*b,0.35*c);d=0.025;e=Cc*d;a=0.175;g=0.35;N(i,(a+d)*b,(g-e)*c,(a+e)*b,(g-d)*c,a*b,(g-d)*c);N(i,(a-e)*b,(g-d)*c,(a-d)*b,(g-e)*c,(a-d)*b,g*c);i.lineTo(0.15*b,0.6*c);i.lineTo(0*b,0.6*c);i.lineTo(0*b,0.25*c);d=0.05;e=Cc*d;a=0.05;g=0.25;N(i,(a-
d)*b,(g-e)*c,(a-e)*b,(g-d)*c,a*b,(g-d)*c);i.lineTo(0.5*b,0.2*c);b=i.k;b.n=new K(0.2,0.2);b.o=new K(0.8,0.65);return b},Card:function(a,b,c){a=new L;M(a,1*b,0*c,h);a.lineTo(1*b,1*c);a.lineTo(0*b,1*c);a.lineTo(0*b,0.2*c);a.lineTo(0.2*b,0*c);O(a);b=a.k;b.n=new K(0,0.2);b.o=new K(1,1);return b},Collate:function(a,b,c){a=new L;M(a,0.5*b,0.5*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);M(a,0.5*b,0.5*c,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0.5*b,0.5*c);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,
0.25);return b},CreateRequest:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,o);d.lineTo(1*b,a*c);d.moveTo(0,(1-a)*c);d.lineTo(1*b,(1-a)*c);Sk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},Database:function(a,b,c){var a=new L,d=Cc*0.5,e=Cc*0.1;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,o);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);a.moveTo(1*b,0.3*c);N(a,1*b,(0.3+e)*c,(0.5+d)*b,0.4*c,0.5*b,0.4*c);N(a,(0.5-d)*b,0.4*c,0,(0.3+e)*c,0,0.3*c);Sk(a);b=a.k;b.n=new K(0,0.4);b.o=new K(1,0.9);return b},StoredData:"DataStorage",DataStorage:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*
b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0,1*c);N(a,0.25*b,0.9*c,0.25*b,0.1*c,0,0);O(a);b=a.k;b.n=new K(0.226,0);b.o=new K(0.81,1);return b},DiskStorage:function(a,b,c){var a=new L,d=Cc*0.5,e=Cc*0.1;M(a,1*b,0.1*c,h);a.lineTo(1*b,0.9*c);N(a,1*b,(0.9+e)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.9+e)*c,0,0.9*c);a.lineTo(0,0.1*c);N(a,0,(0.1-e)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.1-e)*c,1*b,0.1*c);M(a,1*b,0.1*c,o);N(a,1*b,(0.1+e)*c,(0.5+d)*b,0.2*c,0.5*b,0.2*c);N(a,(0.5-d)*b,0.2*c,
0,(0.1+e)*c,0,0.1*c);a.moveTo(1*b,0.2*c);N(a,1*b,(0.2+e)*c,(0.5+d)*b,0.3*c,0.5*b,0.3*c);N(a,(0.5-d)*b,0.3*c,0,(0.2+e)*c,0,0.2*c);Sk(a);b=a.k;b.n=new K(0,0.3);b.o=new K(1,0.9);return b},Display:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);a.lineTo(0,0.5*c);O(a);b=a.k;b.n=new K(0.25,0);b.o=new K(0.75,1);return b},DividedEvent:function(a,b,c){a=a?a.Eb:0;a===0?a=0.2:a<0.15&&(a=0.15);var d=new L,e=Cc*0.2;M(d,0,0.2*c,h);N(d,0,(0.2-e)*c,(0.2-
e)*b,0,0.2*b,0);d.lineTo(0.8*b,0);N(d,(0.8+e)*b,0,1*b,(0.2-e)*c,1*b,0.2*c);d.lineTo(1*b,0.8*c);N(d,1*b,(0.8+e)*c,(0.8+e)*b,1*c,0.8*b,1*c);d.lineTo(0.2*b,1*c);N(d,(0.2-e)*b,1*c,0,(0.8+e)*c,0,0.8*c);d.lineTo(0,0.2*c);M(d,0,a*c,o);d.lineTo(1*b,a*c);Sk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},DividedProcess:function(a,b,c){a=a?a.Eb:0;a<0.1&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,0,a*c,o);d.lineTo(1*b,a*c);Sk(d);b=d.k;b.n=new K(0,a);b.o=new K(1,
1);return b},Document:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new K(0,0);b.o=new K(1,0.6);return b},ExternalOrganization:function(a,b,c){a=a?a.Eb:0;a<0.2&&(a=0.2);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,o);d.lineTo(0,a*c);d.moveTo(1*b,a*c);d.lineTo((1-a)*b,0);d.moveTo(0,(1-a)*c);d.lineTo(a*b,1*c);d.moveTo((1-a)*b,1*c);d.lineTo(1*b,(1-a)*c);Sk(d);
b=d.k;b.n=new K(a/2,a/2);b.o=new K(1-a/2,1-a/2);return b},ExternalProcess:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0.1*b,0.4*c,o);a.lineTo(0.1*b,0.6*c);a.moveTo(0.9*b,0.6*c);a.lineTo(0.9*b,0.4*c);a.moveTo(0.6*b,0.1*c);a.lineTo(0.4*b,0.1*c);a.moveTo(0.4*b,0.9*c);a.lineTo(0.6*b,0.9*c);Sk(a);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.75);return b},File:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*
b,1*c);a.lineTo(0,1*c);O(a);M(a,0.75*b,0,o);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.25*c);Sk(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},Interrupt:function(a,b,c){a=new L;M(a,1*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,1*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,0);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},InternalStorage:function(a,b,c){var d=a?a.Eb:0,a=a?a.Hr:0;d===0&&(d=0.1);a===0&&(a=0.1);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(1*
b,1*c);e.lineTo(0,1*c);O(e);M(e,d*b,0,o);e.lineTo(d*b,1*c);e.moveTo(0,a*c);e.lineTo(1*b,a*c);Sk(e);b=e.k;b.n=new K(d,a);b.o=new K(1,1);return b},Junction:function(a,b,c){var a=new L,d=1/Math.SQRT2,e=(1-1/Math.SQRT2)/2,g=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.5+g)*b,1*c,0.5*b,1*c);N(a,(0.5-g)*b,1*c,0,(0.5+g)*c,0,0.5*c);N(a,0,(0.5-g)*c,(0.5-g)*b,0,0.5*b,0);N(a,(0.5+g)*b,0,1*b,(0.5-g)*c,1*b,0.5*c);M(a,(e+d)*b,(e+d)*c,o);a.lineTo(e*b,e*c);a.moveTo(e*b,(e+d)*c);a.lineTo((e+d)*b,e*c);Sk(a);b=a.k;
b.Hb=Kg;return b},LinedDocument:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0);a.lineTo(1*b,0);a.lineTo(1*b,0.7*c);N(a,0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);M(a,0.1*b,0,o);a.lineTo(0.1*b,0.75*c);Sk(a);b=a.k;b.n=new K(0.1,0);b.o=new K(1,0.6);return b},LoopLimit:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0,0.25*c);a.lineTo(0.25*b,0);a.lineTo(0.75*b,0);a.lineTo(1*b,0.25*c);a.lineTo(1*b,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},SequentialData:"MagneticTape",MagneticTape:function(a,
b,c){var a=new L,d=Cc*0.5;M(a,0.5*b,1*c,h);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,0.9*c,0.6*b,0.9*c);a.lineTo(1*b,0.9*c);a.lineTo(1*b,1*c);a.lineTo(0.5*b,1*c);b=a.k;b.n=new K(0.15,0.15);b.o=new K(0.85,0.8);return b},ManualInput:function(a,b,c){a=new L;M(a,1*b,0,h);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.25*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,1);return b},MessageFromUser:function(a,
b,c){a=a?a.Eb:0;a===0&&(a=0.7);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(a*b,0.5*c);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(0,0);b.o=new K(a,1);return b},MicroformProcessing:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.25);var d=new L;M(d,0,0,h);d.lineTo(0.5*b,a*c);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.5*b,(1-a)*c);d.lineTo(0,1*c);O(d);b=d.k;b.n=new K(0,a);b.o=new K(1,1-a);return b},MicroformRecording:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0.25*c);a.lineTo(1*b,0.15*
c);a.lineTo(1*b,0.85*c);a.lineTo(0.75*b,0.75*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(1,0.75);return b},MultiDocument:function(a,b,c){c=c/0.8;a=new L;M(a,b,0,h);a.lineTo(b,0.5*c);N(a,0.96*b,0.47*c,0.93*b,0.45*c,0.9*b,0.44*c);a.lineTo(0.9*b,0.6*c);N(a,0.86*b,0.57*c,0.83*b,0.55*c,0.8*b,0.54*c);a.lineTo(0.8*b,0.7*c);N(a,0.4*b,0.4*c,0.4*b,1*c,0,0.7*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);a.lineTo(0.1*b,0.1*c);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);O(a);M(a,0.1*b,0.2*c,o);a.lineTo(0.8*
b,0.2*c);a.lineTo(0.8*b,0.54*c);a.moveTo(0.2*b,0.1*c);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.44*c);Sk(a);b=a.k;b.n=new K(0,0.25);b.o=new K(0.8,0.77);return b},MultiProcess:function(a,b,c){a=new L;M(a,0.1*b,0.1*c,h);a.lineTo(0.2*b,0.1*c);a.lineTo(0.2*b,0);a.lineTo(1*b,0);a.lineTo(1*b,0.8*c);a.lineTo(0.9*b,0.8*c);a.lineTo(0.9*b,0.9*c);a.lineTo(0.8*b,0.9*c);a.lineTo(0.8*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.2*c);a.lineTo(0.1*b,0.2*c);O(a);M(a,0.2*b,0.1*c,o);a.lineTo(0.9*b,0.1*c);a.lineTo(0.9*b,0.8*c);
a.moveTo(0.1*b,0.2*c);a.lineTo(0.8*b,0.2*c);a.lineTo(0.8*b,0.9*c);Sk(a);b=a.k;b.n=new K(0,0.2);b.o=new K(0.8,1);return b},OfflineStorage:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.1);var d=1-a,e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo(0.5*b,1*c);O(e);M(e,0.5*a*b,a*c,o);e.lineTo((1-0.5*a)*b,a*c);Sk(e);b=e.k;b.n=new K(d/4+0.5*a,a);b.o=new K(3*d/4+0.5*a,a+0.5*d);return b},OffPageConnector:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(0.75*b,0);a.lineTo(1*b,0.5*c);a.lineTo(0.75*b,1*c);a.lineTo(0,1*c);O(a);
b=a.k;b.n=new K(0,0);b.o=new K(0.75,1);return b},Or:function(a,b,c){var a=new L,d=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(0,0.5*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0);Sk(a);b=a.k;b.Hb=Kg;return b},PaperTape:function(a,b,c){c=c/0.8;a=new L;M(a,0,0.7*c,h);a.lineTo(0,0.3*c);N(a,0.5*b,0.6*c,0.5*b,0,1*b,0.3);a.lineTo(1*b,0.7*c);N(a,
0.5*b,0.4*c,0.5*b,1*c,0,0.7*c);O(a);b=a.k;b.n=new K(0,0.49);b.o=new K(1,0.75);return b},PrimitiveFromCall:function(a,b,c){var d=a?a.Eb:0,a=a?a.Hr:0;d===0&&(d=0.1);a===0&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo(1*b,0);e.lineTo((1-a)*b,0.5*c);e.lineTo(1*b,1*c);e.lineTo(0,1*c);O(e);b=e.k;b.n=new K(d,0);b.o=new K(1-a,1);return b},PrimitiveToCall:function(a,b,c){var d=a?a.Eb:0,a=a?a.Hr:0;d===0&&(d=0.1);a===0&&(a=0.3);var e=new L;M(e,0,0,h);e.lineTo((1-a)*b,0);e.lineTo(1*b,0.5*c);e.lineTo((1-a)*b,1*c);
e.lineTo(0,1*c);O(e);b=e.k;b.n=new K(d,0);b.o=new K(1-a,1);return b},Subroutine:"Procedure",Procedure:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,(1-a)*b,0,o);d.lineTo((1-a)*b,1*c);d.moveTo(a*b,0);d.lineTo(a*b,1*c);Sk(d);b=d.k;b.n=new K(a,0);b.o=new K(1-a,1);return b},Process:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0,1*c);O(d);M(d,a*b,0,o);d.lineTo(a*
b,1*c);Sk(d);b=d.k;b.n=new K(a,0);b.o=new K(1,1);return b},Sort:function(a,b,c){a=new L;M(a,0.5*b,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0.5*b,1*c);a.lineTo(0,0.5*c);O(a);M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);Sk(a);b=a.k;b.n=new K(0.25,0.25);b.o=new K(0.75,0.5);return b},Start:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);M(a,0.25*b,0,o);a.lineTo(0.25*b,1*c);a.moveTo(0.75*b,0);a.lineTo(0.75*b,1*c);Sk(a);b=a.k;b.n=new K(0.25,
0);b.o=new K(0.75,1);return b},Terminator:function(a,b,c){a=new L;M(a,0.25*b,0,h);a.lineTo(0.75*b,0);N(a,1*b,0,1*b,1*c,0.75*b,1*c);a.lineTo(0.25*b,1*c);N(a,0,1*c,0,0,0.25*b,0);b=a.k;b.n=new K(0.23,0);b.o=new K(0.77,1);return b},TransmittalTape:function(a,b,c){a=a?a.Eb:0;a===0&&(a=0.1);var d=new L;M(d,0,0,h);d.lineTo(1*b,0);d.lineTo(1*b,1*c);d.lineTo(0.75*b,(1-a)*c);d.lineTo(0,(1-a)*c);O(d);b=d.k;b.n=new K(0,0);b.o=new K(1,1-a);return b},AndGate:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0,0,h);a.lineTo(0.5*
b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0);b.o=new K(0.55,1);return b},Buffer:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);O(a);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},Clock:function(a,b,c){var a=new L,d=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*
c,1*b,0.5*c);M(a,1*b,0.5*c,o);a.lineTo(1*b,0.5*c);M(a,0.8*b,0.75*c,o);a.lineTo(0.8*b,0.25*c);a.lineTo(0.6*b,0.25*c);a.lineTo(0.6*b,0.75*c);a.lineTo(0.4*b,0.75*c);a.lineTo(0.4*b,0.25*c);a.lineTo(0.2*b,0.25*c);a.lineTo(0.2*b,0.75*c);Sk(a);b=a.k;b.Hb=Kg;return b},Ground:function(a,b,c){a=new L;M(a,0.5*b,0,o);a.lineTo(0.5*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.3*b,0.8*c);a.lineTo(0.7*b,0.8*c);a.moveTo(0.4*b,1*c);a.lineTo(0.6*b,1*c);return a.k},Inverter:function(a,b,c){var a=new L,
d=Cc*0.1;M(a,0.8*b,0.5*c,h);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.9+d)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-d)*b,0.6*c,0.8*b,(0.5+d)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-d)*c,(0.9-d)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+d)*b,0.4*c,1*b,(0.5-d)*c,1*b,0.5*c);b=a.k;b.n=new K(0,0.25);b.o=new K(0.4,0.75);return b},NandGate:function(a,b,c){var a=new L,d=Cc*0.5,e=Cc*0.4,g=Cc*0.1;M(a,0.8*b,0.5*c,h);N(a,0.8*b,(0.5+e)*c,(0.4+d)*b,1*c,0.4*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(0.4*
b,0);N(a,(0.4+d)*b,0,0.8*b,(0.5-e)*c,0.8*b,0.5*c);M(a,1*b,0.5*c,h);N(a,1*b,(0.5+g)*c,(0.9+g)*b,0.6*c,0.9*b,0.6*c);N(a,(0.9-g)*b,0.6*c,0.8*b,(0.5+g)*c,0.8*b,0.5*c);N(a,0.8*b,(0.5-g)*c,(0.9-g)*b,0.4*c,0.9*b,0.4*c);N(a,(0.9+g)*b,0.4*c,1*b,(0.5-g)*c,1*b,0.5*c);b=a.k;b.n=new K(0,0.05);b.o=new K(0.55,0.95);return b},NorGate:function(a,b,c){var a=new L,d=0.5,e=Cc*d,g=0,i=0.5;M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,
0.8*b,0.5*c);d=0.1;e=Cc*0.1;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new K(0.2,0.25);b.o=new K(0.6,0.75);return b},OrGate:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0,0,h);N(a,(0+d+d)*b,0*c,0.8*b,(0.5-d)*c,1*b,0.5*c);N(a,0.8*b,(0.5+d)*c,(0+d+d)*b,1*c,0,1*c);N(a,0.25*b,0.75*c,0.25*b,0.25*c,0,0);O(a);b=a.k;b.n=
new K(0.2,0.25);b.o=new K(0.75,0.75);return b},XnorGate:function(a,b,c){var a=new L,d=0.5,e=Cc*d,g=0.2,i=0.5;M(a,0.1*b,0,o);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.8*b,0.5*c,h);N(a,0.7*b,(i+e)*c,(g+e)*b,(i+d)*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);N(a,(g+e)*b,(i-d)*c,0.7*b,(i-e)*c,0.8*b,0.5*c);d=0.1;e=Cc*0.1;g=0.9;i=0.5;M(a,(g-d)*b,i*c,h);N(a,(g-d)*b,(i-e)*c,(g-e)*b,(i-d)*c,g*b,(i-d)*c);N(a,(g+e)*b,(i-d)*c,(g+d)*b,(i-e)*c,(g+d)*b,i*c);N(a,(g+d)*b,(i+e)*c,(g+e)*b,(i+d)*c,g*
b,(i+d)*c);N(a,(g-e)*b,(i+d)*c,(g-d)*b,(i+e)*c,(g-d)*b,i*c);b=a.k;b.n=new K(0.4,0.25);b.o=new K(0.65,0.75);return b},XorGate:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0.1*b,0,o);N(a,0.35*b,0.25*c,0.35*b,0.75*c,0.1*b,1*c);M(a,0.2*b,0,h);N(a,(0.2+d)*b,0*c,0.9*b,(0.5-d)*c,1*b,0.5*c);N(a,0.9*b,(0.5+d)*c,(0.2+d)*b,1*c,0.2*b,1*c);N(a,0.45*b,0.75*c,0.45*b,0.25*c,0.2*b,0);O(a);b=a.k;b.n=new K(0.4,0.25);b.o=new K(0.8,0.75);return b},Capacitor:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0,1*c);a.moveTo(1*b,
0);a.lineTo(1*b,1*c);return a.k},Resistor:function(a,b,c){a=new L;M(a,0,0.5*c,o);a.lineTo(0.1*b,0);a.lineTo(0.2*b,1*c);a.lineTo(0.3*b,0);a.lineTo(0.4*b,1*c);a.lineTo(0.5*b,0);a.lineTo(0.6*b,1*c);a.lineTo(0.7*b,0.5*c);return a.k},Inductor:function(a,b,c){var a=new L,d=Cc*0.1,e=0.1,g=0.5;M(a,(e-d*0.5)*b,(g+0.1)*c,o);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.3;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);
g=e=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.7;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,e*b,(g+0.1)*c);N(a,(e-d)*b,(g+0.1)*c,(e-0.1)*b,(g+d)*c,(e+0.1)*b,(g+d)*c);e=0.9;g=0.5;N(a,(e+0.1)*b,(g+d)*c,(e+d)*b,(g+0.1)*c,(e+d*0.5)*b,(g+0.1)*c);return a.k},ACvoltageSource:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0*b,0.5*c,o);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+
d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);a.moveTo(0.1*b,0.5*c);N(a,0.5*b,0*c,0.5*b,1*c,0.9*b,0.5*c);b=a.k;b.Hb=Kg;return b},DCvoltageSource:function(a,b,c){a=new L;M(a,0,0.75*c,o);a.lineTo(0,0.25*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},Diode:function(a,b,c){a=new L;M(a,1*b,0,o);a.lineTo(1*b,0.5*c);a.lineTo(0,1*c);a.lineTo(0,0);a.lineTo(1*b,0.5*c);a.lineTo(1*b,1*c);b=a.k;b.n=new K(0,0.25);b.o=new K(0.5,0.75);return b},Wifi:function(a,b,c){var d=b,e=c,b=b*0.38,
c=c*0.6,a=new L,g=Cc*0.8,i=0.8,j=0,k=0.5,d=(d-b)/2,e=(e-c)/2;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+g*0.5)*b+d,(k-g)*c+e,(j-i+g*0.5)*b+d,k*c+e);N(a,(j-i+g*0.5)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=Cc*0.4;i=0.4;j=0.2;k=0.5;M(a,j*b+d,(k+i)*c+e,h);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+
d,(k-i)*c+e);N(a,j*b+d,(k-i)*c+e,(j-i+g*0.5)*b+d,(k-g)*c+e,(j-i+g*0.5)*b+d,k*c+e);N(a,(j-i+g*0.5)*b+d,(k+g)*c+e,j*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);O(a);g=Cc*0.2;i=0.2;k=j=0.5;M(a,(j-i)*b+d,k*c+e,h);N(a,(j-i)*b+d,(k-g)*c+e,(j-g)*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,(j-g)*b+d,(k+i)*c+e,(j-i)*b+d,(k+g)*c+e,(j-i)*b+d,k*c+e);g=Cc*0.4;i=0.4;j=0.8;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*b+
d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-g*0.5)*b+d,(k+g)*c+e,(j+i-g*0.5)*b+d,k*c+e);N(a,(j+i-g*0.5)*b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);g=Cc*0.8;i=0.8;j=1;k=0.5;M(a,j*b+d,(k-i)*c+e,h);N(a,(j+g)*b+d,(k-i)*c+e,(j+i)*b+d,(k-g)*c+e,(j+i)*b+d,k*c+e);N(a,(j+i)*b+d,(k+g)*c+e,(j+g)*b+d,(k+i)*c+e,j*b+d,(k+i)*c+e);N(a,j*b+d,(k+i)*c+e,(j+i-g*0.5)*b+d,(k+g)*c+e,(j+i-g*0.5)*b+d,k*c+e);N(a,(j+i-g*0.5)*
b+d,(k-g)*c+e,j*b+d,(k-i)*c+e,j*b+d,(k-i)*c+e);O(a);return a.k},Email:function(a,b,c){a=new L;M(a,0,0,h);a.lineTo(1*b,0);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0);O(a);M(a,0,0,o);a.lineTo(0.5*b,0.6*c);a.lineTo(1*b,0);a.moveTo(0,1*c);a.lineTo(0.45*b,0.54*c);a.moveTo(1*b,1*c);a.lineTo(0.55*b,0.54*c);Sk(a);return a.k},Ethernet:function(a,b,c){a=new L;M(a,0.35*b,0,h);a.lineTo(0.65*b,0);a.lineTo(0.65*b,0.4*c);a.lineTo(0.35*b,0.4*c);a.lineTo(0.35*b,0);O(a);M(a,0.1*b,1*c,h,h);a.lineTo(0.4*b,1*c);a.lineTo(0.4*
b,0.6*c);a.lineTo(0.1*b,0.6*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.6*b,1*c,h,h);a.lineTo(0.9*b,1*c);a.lineTo(0.9*b,0.6*c);a.lineTo(0.6*b,0.6*c);a.lineTo(0.6*b,1*c);O(a);M(a,0,0.5*c,o);a.lineTo(1*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.5*b,0.4*c);a.moveTo(0.75*b,0.5*c);a.lineTo(0.75*b,0.6*c);a.moveTo(0.25*b,0.5*c);a.lineTo(0.25*b,0.6*c);Sk(a);return a.k},Power:function(a,b,c){var a=new L,d=Cc*0.4,e=0.4,g=new E(0,0),i=new E(0,0),j=new E(0,0),k=new E(0,0);new E(0,0);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,
0.5+e,0.5,0.5,g,g,i,j,k);new E(i.x,i.y);M(a,i.x*b,i.y*c,h);N(a,j.x*b,j.y*c,k.x*b,k.y*c,(0.5+e)*b,0.5*c);N(a,(0.5+e)*b,(0.5+d)*c,(0.5+d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5-d)*b,(0.5+e)*c,(0.5-e)*b,(0.5+d)*c,(0.5-e)*b,0.5*c);Tk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);N(a,j.x*b,j.y*c,k.x*b,k.y*c,i.x*b,i.y*c);d=Cc*0.3;e=0.3;Tk(0.5-e,0.5,0.5-e,0.5-d,0.5-d,0.5-e,0.5,0.5-e,0.5,j,k,i,g,g);a.lineTo(i.x*b,i.y*c);N(a,k.x*b,k.y*c,j.x*b,j.y*c,(0.5-e)*b,0.5*c);N(a,(0.5-e)*b,(0.5+d)*c,(0.5-
d)*b,(0.5+e)*c,0.5*b,(0.5+e)*c);N(a,(0.5+d)*b,(0.5+e)*c,(0.5+e)*b,(0.5+d)*c,(0.5+e)*b,0.5*c);Tk(0.5,0.5-e,0.5+d,0.5-e,0.5+e,0.5-d,0.5+e,0.5,0.5,g,g,i,j,k);N(a,k.x*b,k.y*c,j.x*b,j.y*c,i.x*b,i.y*c);O(a);M(a,0.45*b,0,h);a.lineTo(0.45*b,0.5*c);a.lineTo(0.55*b,0.5*c);a.lineTo(0.55*b,0);O(a);b=a.k;b.n=new K(0.25,0.55);b.o=new K(0.75,0.8);return b},Fallout:function(a,b,c){var a=new L,d=Cc*0.5;M(a,0*b,0.5*c,h);N(a,0*b,(0.5-d)*c,(0.5-d)*b,0*c,0.5*b,0*c);N(a,(0.5+d)*b,0*c,1*b,(0.5-d)*c,1*b,0.5*c);N(a,1*b,(0.5+
d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0*b,(0.5+d)*c,0*b,0.5*c);var e=d=0;M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.4;e=0;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);d=0.2;e=-0.3;O(a);M(a,(0.3+d)*b,(0.8+e)*c,h,h);a.lineTo((0.5+d)*b,(0.5+e)*c);a.lineTo((0.1+d)*b,(0.5+e)*c);a.lineTo((0.3+d)*b,(0.8+e)*c);O(a);b=a.k;b.Hb=Kg;return b},
IrritationHazard:function(a,b,c){a=new L;M(a,0.2*b,0*c,h);a.lineTo(0.5*b,0.3*c);a.lineTo(0.8*b,0*c);a.lineTo(1*b,0.2*c);a.lineTo(0.7*b,0.5*c);a.lineTo(1*b,0.8*c);a.lineTo(0.8*b,1*c);a.lineTo(0.5*b,0.7*c);a.lineTo(0.2*b,1*c);a.lineTo(0*b,0.8*c);a.lineTo(0.3*b,0.5*c);a.lineTo(0*b,0.2*c);O(a);b=a.k;b.n=new K(0.3,0.3);b.o=new K(0.7,0.7);return b},ElectricalHazard:function(a,b,c){a=new L;M(a,0.37,0*c,h);a.lineTo(0.5*b,0.11*c);a.lineTo(0.77*b,0.04*c);a.lineTo(0.33*b,0.49*c);a.lineTo(1*b,0.37*c);a.lineTo(0.63*
b,0.86*c);a.lineTo(0.77*b,0.91*c);a.lineTo(0.34*b,1*c);a.lineTo(0.34*b,0.78*c);a.lineTo(0.44*b,0.8*c);a.lineTo(0.65*b,0.56*c);a.lineTo(0*b,0.68*c);O(a);return a.k},FireHazard:function(a,b,c){a=new L;M(a,0.1*b,1*c,h);N(a,-0.25*b,0.63*c,0.45*b,0.44*c,0.29*b,0*c);N(a,0.48*b,0.17*c,0.54*b,0.35*c,0.51*b,0.42*c);N(a,0.59*b,0.29*c,0.58*b,0.28*c,0.59*b,0.18*c);N(a,0.8*b,0.34*c,0.88*b,0.43*c,0.75*b,0.6*c);N(a,0.87*b,0.48*c,0.88*b,0.43*c,0.88*b,0.31*c);N(a,1.17*b,0.76*c,0.82*b,0.8*c,0.9*b,1*c);O(a);b=a.k;b.n=
new K(0.05,0.645);b.o=new K(0.884,0.908);return b},BpmnActivityLoop:function(a,b,c){var a=new L,d=0.5*(4*(Math.SQRT2-1)/3);M(a,(0.5*Math.SQRT2/2+0.5)*b,(1-(0.5-0.5*Math.SQRT2/2))*c,o);N(a,1*b,0.7*c,1*b,0.5*c,1*b,0.5*c);N(a,1*b,(0.5-d+0)*c,(0.5+d+0)*b,0*c,0.5*b,0*c);N(a,(0.5-d+0)*b,0*c,0*b,(0.5-d+0)*c,0*b,0.5*c);N(a,0*b,(0.5+d+0)*c,(0.5-d+0)*b,1*c,0.35*b,0.98*c);a.moveTo(0.35*b,0.8*c);a.lineTo(0.35*b,1*c);a.lineTo(0.15*b,1*c);return a.k},BpmnActivityParallel:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(0,
1*c);a.moveTo(0.5*b,0);a.lineTo(0.5*b,1*c);a.moveTo(1*b,0);a.lineTo(1*b,1*c);return a.k},BpmnActivitySequential:function(a,b,c){a=new L;M(a,0,0,o);a.lineTo(1*b,0);a.moveTo(0,0.5*c);a.lineTo(1*b,0.5*c);a.moveTo(0,1*c);a.lineTo(1*b,1*c);return a.k},BpmnActivityAdHoc:function(a,b,c){a=new L;M(a,0,0,o);M(a,1*b,1*c,o);M(a,0,0.5*c,o);N(a,0.2*b,0.35*c,0.3*b,0.35*c,0.5*b,0.5*c);N(a,0.7*b,0.65*c,0.8*b,0.65*c,1*b,0.5*c);return a.k},BpmnActivityCompensation:function(a,b,c){a=new L;M(a,0,0.5*c,h);a.lineTo(0.5*
b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,1*c);a.lineTo(1*b,0);a.lineTo(0.5*b,0.5*c);a.lineTo(0.5*b,1*c);O(a);return a.k},BpmnTaskMessage:function(a,b,c){a=new L;M(a,0,0.2*c,h);a.lineTo(1*b,0.2*c);a.lineTo(1*b,0.8*c);a.lineTo(0,0.8*c);a.lineTo(0,0.8*c);O(a);M(a,0,0.2*c,o);a.lineTo(0.5*b,0.5*c);a.lineTo(1*b,0.2*c);Sk(a);return a.k},BpmnTaskScript:function(a,b,c){a=new L;M(a,0.7*b,1*c,h);a.lineTo(0.3*b,1*c);N(a,0.6*b,0.5*c,0,0.5*c,0.3*b,0);a.lineTo(0.7*b,0);N(a,0.4*b,0.5*c,1*b,0.5*c,0.7*b,1*c);O(a);M(a,
0.45*b,0.73*c,o);a.lineTo(0.7*b,0.73*c);a.moveTo(0.38*b,0.5*c);a.lineTo(0.63*b,0.5*c);a.moveTo(0.31*b,0.27*c);a.lineTo(0.56*b,0.27*c);Sk(a);return a.k},BpmnTaskUser:function(a,b,c){a=new L;M(a,0,0,o);M(a,0.335*b,(1-0.555)*c,h);a.lineTo(0.335*b,0.595*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.665*b,(1-0.555)*c);N(a,0.88*b,0.46*c,0.98*b,0.54*c,1*b,0.68*c);a.lineTo(1*b,1*c);a.lineTo(0,1*c);a.lineTo(0,0.68*c);N(a,0.02*b,0.54*c,0.12*b,0.46*c,0.335*b,(1-0.555)*c);a.lineTo(0.365*b,0.405*c);var d=0.5-0.285,
e=Math.PI/4,g=4*(1-Math.cos(e))/(3*Math.sin(e)),e=g*d,g=g*d;N(a,(0.5-(e+d)/2)*b,(d+(d+g)/2)*c,(0.5-d)*b,(d+g)*c,(0.5-d)*b,d*c);N(a,(0.5-d)*b,(d-g)*c,(0.5-e)*b,(d-d)*c,0.5*b,(d-d)*c);N(a,(0.5+e)*b,(d-d)*c,(0.5+d)*b,(d-g)*c,(0.5+d)*b,d*c);N(a,(0.5+d)*b,(d+g)*c,(0.5+(e+d)/2)*b,(d+(d+g)/2)*c,0.635*b,0.405*c);a.lineTo(0.635*b,0.405*c);a.lineTo(0.665*b,(1-0.555)*c);a.lineTo(0.665*b,0.595*c);a.lineTo(0.335*b,0.595*c);M(a,0.2*b,1*c,o);a.lineTo(0.2*b,0.8*c);M(a,0.8*b,1*c,o);a.lineTo(0.8*b,0.8*c);return a.k},
BpmnEventConditional:function(a,b,c){a=new L;M(a,0.1*b,0,h);a.lineTo(0.9*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.1*b,1*c);O(a);M(a,0.2*b,0.2*c,o);a.lineTo(0.8*b,0.2*c);a.moveTo(0.2*b,0.4*c);a.lineTo(0.8*b,0.4*c);a.moveTo(0.2*b,0.6*c);a.lineTo(0.8*b,0.6*c);a.moveTo(0.2*b,0.8*c);a.lineTo(0.8*b,0.8*c);Sk(a);return a.k},BpmnEventError:function(a,b,c){a=new L;M(a,0,1*c,h);a.lineTo(0.33*b,0);a.lineTo(0.66*b,0.5*c);a.lineTo(1*b,0);a.lineTo(0.66*b,1*c);a.lineTo(0.33*b,0.5*c);O(a);return a.k},BpmnEventEscalation:function(a,
b,c){a=new L;M(a,0,0,o);M(a,1*b,1*c,o);M(a,0.1*b,1*c,h);a.lineTo(0.5*b,0);a.lineTo(0.9*b,1*c);a.lineTo(0.5*b,0.5*c);O(a);return a.k},BpmnEventTimer:function(a,b,c){var a=new L,d=Cc*0.5;M(a,1*b,0.5*c,h);N(a,1*b,(0.5+d)*c,(0.5+d)*b,1*c,0.5*b,1*c);N(a,(0.5-d)*b,1*c,0,(0.5+d)*c,0,0.5*c);N(a,0,(0.5-d)*c,(0.5-d)*b,0,0.5*b,0);N(a,(0.5+d)*b,0,1*b,(0.5-d)*c,1*b,0.5*c);M(a,0.5*b,0,o);a.lineTo(0.5*b,0.15*c);a.moveTo(0.5*b,1*c);a.lineTo(0.5*b,0.85*c);a.moveTo(0,0.5*c);a.lineTo(0.15*b,0.5*c);a.moveTo(1*b,0.5*
c);a.lineTo(0.85*b,0.5*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.58*b,0.1*c);a.moveTo(0.5*b,0.5*c);a.lineTo(0.78*b,0.54*c);Sk(a);b=a.k;b.Hb=Kg;return b}},Yk;for(Yk in Ck)Ck[Yk.toLowerCase()]=Yk;
var Zk={None:"",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",OpenTriangle:"m 0,0 l 8,4 -8,4",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",Line:"m 0,0 l 0,8",
DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",
BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 12,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -4 0 4 z",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",
HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",
ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 -8,-4 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 -8,0 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",Fork:"m 0,4 l 8,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleFork:"F1 m 6,3 b 0 360 -3 0 3 m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",
LineFork:"m 0,0 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",CircleLine:"F1 m 8 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",CircleLineFork:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m 4 -4 l 0 8",OpenTriangleTop:"m 0,0 l 8,4 -8,0 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4 -8,0",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",
OpenTriangleLine:"m 0,0 8,4 -8,4 m 8.5,0 l 0,-8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z",ForwardSlash:"m 0,8 l 5,-8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",BackSlash:"m 0,0 l 5,8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",
BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3"},Ak,$k={},al;for(al in Ck){var bl=Ck[al];"string"===typeof bl&&(bl=Ck[bl]);"string"===typeof bl&&(bl=Ck[bl]);bl&&($k[al]=bl(m,100,100));$k[al].Zd()}Ak=$k;var fl={};function Bk(a){if(Zk){for(var b in Zk){var c=Od(Zk[b],o);fl[b]=c;fl[b.toLowerCase()]=b}Zk=f}return fl[a]}X.FigureGenerators=Ck;X.ArrowheadGeometries=fl;
function T(a){arguments.length===0?v.call(this):v.call(this,a);this.lm=this.ij="";this.np=m;this.Tp=this.Jp=this.Vo=this.Aq=this.Bo=this.oo=h;this.dq=this.Zp=this.Yp=o;this.wm=h;this.qq="";this.nq=h;this.Pj=this.eq=this.$p=this.oq=m;this.Ms=o;this.ig=this.pq=m;this.bq="";this.Uk=m;this.aq=(new eb(NaN,NaN)).freeze();this.fq="";this.Vk=m;this.gd="";this.bp=h;this.s=this.no=this.kj=m;this.ki=(new E(NaN,NaN)).freeze();this.Rs=new E(NaN,NaN);this.wp="";this.li=m;this.xp=Vb;this.Ep=Jc;this.zp=Kc;this.Co=
m;this.cp=h;this.op=gl;this.Ze=o;this.zm=(new E(6,6)).freeze();this.ym="gray";this.xm=4;this.UD=-1;this.vj=h;this.kt=this.Xe=o}u.H("Part",T);u.na(T,v);
T.prototype.fb=function(a){v.prototype.fb.call(this,a);a.ij=this.ij;a.lm=this.lm;a.np=this.np;a.oo=this.oo;a.Bo=this.Bo;a.Aq=this.Aq;a.Vo=this.Vo;a.Jp=this.Jp;a.Tp=this.Tp;a.Yp=this.Yp;a.Zp=this.Zp;a.dq=this.dq;a.wm=this.wm;a.qq=this.qq;a.nq=this.nq;a.oq=this.oq;a.$p=this.$p;a.eq=this.eq;a.Ms=o;a.pq=this.pq;a.ig=m;a.bq=this.bq;a.aq.Oa(this.aq);a.fq=this.fq;a.gd=this.gd;a.bp=this.bp;a.no=this.no;a.ki.Oa(this.ki);a.wp=this.wp;a.xp=this.xp.B();a.Ep=this.Ep.B();a.zp=this.zp.B();a.Co=this.Co;a.cp=this.cp;
a.op=this.op;a.Ze=this.Ze;a.zm.Oa(this.zm);a.ym=this.ym;a.xm=this.xm};T.prototype.Qg=function(a){v.prototype.Qg.call(this,a);Yi(a);a.Pj=m;a.Uk=m;a.Vk=m;a.li=m};T.prototype.toString=function(){var a=u.Ii(Object.getPrototypeOf(this))+"#"+u.dc(this);this.data&&(a=a+("("+xe(this.data)+")"));return a};
T.prototype.dumpReferences=T.prototype.wB=function(){u.trace("References for "+this);this.sa&&u.trace("  "+this.sa.toString()+' LayerName: "'+this.xd+'"');this.Mn!==this&&u.trace("  SelectionObject: "+this.Mn.toString()+' SelectionObjectName: "'+this.Nn+'"');this.ub!==this&&u.trace("  LocationObject: "+this.ub.toString()+' LocationObjectName: "'+this.wr+'"');if(this.ig){for(var a="",b=this.ig.f;b.next();)a=a+(b.key+" ");u.trace("  Adornments: "+a)}this.Sa&&u.trace("  ContainingGroup: "+this.Sa.toString());
if(this instanceof U){if(this.jc)for(b=this.jc.f;b.next(););if(this.ge.count>0){a="";for(b=this.ge;b.next();)a=a+(b.value.toString()+", ");u.trace("  Links: "+a)}this.fe&&u.trace("  LabeledLink: "+this.fe.toString());if(this instanceof V){u.trace("  Placeholder: "+this.placeholder);a="";for(b=this.fc;b.next();)a=a+(b.value.toString()+", ");u.trace("  Members: "+a);a="";for(b=this.Pk.f;b.next();)a=a+(b.value.toString()+", ");u.trace("  NestedGroups: "+a);u.trace("  Layout: "+this.rb)}}else if(this instanceof
W){u.trace("  Path: "+this.path);u.trace("  From: "+this.da+" "+this.Ac+' "'+this.Ug+'"');u.trace("  To: "+this.fa+" "+this.md+' "'+this.Zh+'"');a="";for(b=this.Xh;b.next();)a=a+(b.value.toString()+", ");u.trace("  LabelNodes: "+a)}};T.LayoutNone=0;var mi;T.LayoutAdded=mi=1;var ri;T.LayoutRemoved=ri=2;var hj;T.LayoutShown=hj=4;var ij;T.LayoutHidden=ij=8;T.LayoutNodeSized=16;var wi;T.LayoutGroupLayout=wi=32;var gl;T.LayoutStandard=gl=mi|ri|hj|ij|16|wi;
T.prototype.hg=function(){v.prototype.hg.call(this);var a=this.b;if(a!==m&&this.rr){Ei(a,"shadowOffset",this.bD);Ei(a,"shadowColor",this.shadowColor);Ei(a,"shadowBlur",this.shadowBlur)}};T.prototype.vl=function(a,b,c,d,e,g,i){var j=this.b;if(j!==m){a===ve&&b==="elements"?e instanceof v&&ni(e,e,function(a){oi(j,a)}):a===we&&b==="elements"&&e instanceof v&&ni(e,e,function(a){qi(j,a)});j.ke(a,b,c,d,e,g,i)}};
T.prototype.updateTargetBindings=T.prototype.gc=function(a){v.prototype.gc.call(this,a);if(this.data!==m)for(a=this.elements;a.next();){var b=a.value;b instanceof v&&ni(b,b,function(a){a.data!==m&&a.gc()})}};u.m(T,{nE:"adornments"},function(){return this.ig===m?m:this.ig.f});T.prototype.findAdornment=T.prototype.dn=function(a){s&&u.e(a,"string",T,"findAdornment:category");var b=this.ig;return b===m?m:b.$(a)};
T.prototype.addAdornment=T.prototype.Lm=function(a,b){if(b!==m){if(s){u.e(a,"string",T,"addAdornment:category");u.c(b,bf,T,"addAdornment:ad")}var c=m,d=this.ig;d!==m&&(c=d.$(a));if(c!==b){if(c!==m){var e=c.sa;e!==m&&e.vd(-1,c)}if(d===m)this.ig=d=new ka("string",bf);d.add(a,b);c=this.b;if(c!==m){d=c.en("Adornment");d===m&&(d=c.en(""));if(d!==m){d.bk(99999999,b);b.data=this.data}}}}};
T.prototype.removeAdornment=T.prototype.xl=function(a){s&&u.e(a,"string",T,"removeAdornment:category");var b=this.ig;if(b!==m){var c=b.$(a);if(c!==m){var d=c.sa;d!==m&&d.vd(-1,c)}b.remove(a);if(b.count===0)this.ig=m}};T.prototype.clearAdornments=T.prototype.Og=function(){var a=this.ig;if(a!==m){for(var b=[],a=a.f;a.next();)b.push(a.key);for(var a=b.length,c=0;c<a;c++)this.xl(b[c])}};
T.prototype.updateAdornments=T.prototype.$h=function(){a:{var a=this.b;if(a!==m){var b=m;if(this.Da&&this.XC){var c=this.Mn;if(c!==m&&this.gb()&&c.dk()&&c.pa.V()){b=this.dn("Selection");if(b===m){b=this.YC;if(b===m)this instanceof W?b=a.hC:this instanceof T&&(b=this instanceof V?a.KB:a.vC);if(!(b instanceof bf))break a;nf(b);b=b.copy();if(!(b instanceof bf))break a;b.hd="Selection";b.Gd=c}if(b!==m){a=b.placeholder;if(a!==m){var d=c.ml(),e=0;if(c instanceof X)e=c.Na;a.ja=new eb((c.ma.width+e)*d,(c.ma.height+
e)*d)}else if(this instanceof W){a=b.wa;a=ok(b,a,a.length);d=this.path;if(a instanceof X&&d===c){d=c.ua;ki(this);d=c.ua;a.kr=d;if(a.Na===0)a.Na=c.Na}}b.Ka=c.ln();if(b.type!==ng)b.location=c.tb(Vb)}}this.Lm("Selection",b)}else this.xl("Selection")}}c=this.b;if(c!==m){c=c.Mb.ie.j;b=c.length;for(a=0;a<b;a++){d=c[a];d.isEnabled&&d.updateAdornments(this)}}};u.m(T,{sa:"layer"},r("s"));u.m(T,{b:"diagram"},function(){var a=this.s;return a!==m?a.b:m});u.a(T,"layerName",T.prototype.xd);
u.defineProperty(T,{xd:"layerName"},r("lm"),function(a){var b=this.lm;if(b!==a){s&&u.e(a,"string",T,"layerName");this.lm=a;this.d("layerName",b,a);b=this.sa;if(b!==m&&b.name!==a){var c=b.b;if(c!==m){a=c.en(a);if(a!==m&&a!==b){var d=b.vd(-1,this,h);d>=0&&c.ke(we,"parts",b,this,m,d,h);d=a.bk(99999999,this,h);d>=0&&c.ke(ve,"parts",a,m,this,h,d);d=this.tr;if(d!==m){var e=c.va;c.va=h;d(this,b,a);c.va=e}}}}}});u.a(T,"layerChanged",T.prototype.tr);
u.defineProperty(T,{tr:"layerChanged"},r("np"),function(a){var b=this.np;if(b!==a){a!==m&&u.e(a,"function",T,"layerChanged");this.np=a;this.d("layerChanged",b,a)}});u.a(T,"location",T.prototype.location);u.defineProperty(T,{location:"location"},r("ki"),function(a){var b=this.ki;if(!b.u(a)){s&&u.c(a,E,T,"location");this.ki=a=a.B();if(this.Gc===o){var c=this.kb,d=this.Rs,e=c.copy();c.Wd(a.x-d.x,a.y-d.y);c.u(e)||this.d("position",e,c);kj(this)}this.d("location",b,a)}});
function kj(a){if(a.vj===o){var b=a.b;if(b!==m){b.tg.add(a);a instanceof U&&!b.ca.$a&&a.kf();pf(b)}a.vj=h}}function hl(a){if(a.vj!==o){var b=a.kb,c=a.Wb,d=c.copy();c.xa();c.x=b.x;c.y=b.y;c.freeze();Wi(a,d,c);a.vj=o}}u.m(T,{ub:"locationObject"},function(){if(this.li===m){var a=this.wr;if(a!==f&&a!==m&&a!==""){a=this.Le(a);this.li=a!==m?a:this}else this.li=this}return this.li.visible?this.li:this});u.a(T,"minLocation",T.prototype.qC);
u.defineProperty(T,{qC:"minLocation"},r("Ep"),function(a){var b=this.Ep;if(!b.u(a)){s&&u.c(a,E,T,"minLocation");this.Ep=a=a.B();this.d("minLocation",b,a)}});u.a(T,"maxLocation",T.prototype.kC);u.defineProperty(T,{kC:"maxLocation"},r("zp"),function(a){var b=this.zp;if(!b.u(a)){s&&u.c(a,E,T,"maxLocation");this.zp=a=a.B();this.d("maxLocation",b,a)}});u.a(T,"locationObjectName",T.prototype.wr);
u.defineProperty(T,{wr:"locationObjectName"},r("wp"),function(a){var b=this.wp;if(b!==a){s&&u.e(a,"string",T,"locationObjectName");this.wp=a;this.li=m;dj(this);this.d("locationObjectName",b,a)}});u.a(T,"locationSpot",T.prototype.nf);u.defineProperty(T,{nf:"locationSpot"},r("xp"),function(a){var b=this.xp;if(!b.u(a)){if(s){u.c(a,K,T,"locationSpot");Nb(a)||u.g("Part.locationSpot must be a specific Spot value, not: "+a)}this.xp=a=a.B();dj(this);this.d("locationSpot",b,a)}});
T.prototype.move=T.prototype.move=function(a){this.position=a;this.Gc===o&&hl(this)};
T.prototype.isVisible=T.prototype.gb=function(){if(!this.Lg)return o;var a=this.sa;if(a!==m&&!a.visible)return o;var b=this.Sa;if(b!==m&&!b.ee)return o;if(this instanceof U){if(a!==m)if(a.b.mf)for(a=this.hf();a.next();){b=a.value;b=b.da;if(b!==m&&!b.Od)return o}else for(a=this.ru();a.next();){b=a.value;b=b.fa;if(b!==m&&!b.Od)return o}a=this.fe;if(a!==m&&!a.gb())return o}else if(this instanceof W){b=this.da;if(b!==m&&il(b)===m)return o;b=this.fa;if(b!==m&&il(b)===m)return o}return h};
function jl(a,b,c){Pb(c)&&(c=Zb);var d=b.ma;if(b===m||b===a)return new E(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);c=new E(d.width*c.x+c.offsetX,d.height*c.y+c.offsetY);b.transform.vb(c);for(b=b.U;b!==m&&b!==a;){b.transform.vb(c);b=b.U}a.pm.vb(c);c.offset(-a.yc.x,-a.yc.y);return c}T.prototype.ensureBounds=T.prototype.Sh=function(){gh(this,Infinity,Infinity);this.nc()};
T.prototype.nc=function(){Vi(this);if(this.Gc===o)hl(this);else{if(this instanceof bf&&this.I!==ng&&this.Ya!==m)this.li=this.Ya;var a=this.wA;a.set(this.Wb);bj(this);this.Wb.xa();var b=this.Xe;this.zi(0,0,this.yc.width,this.yc.height);var c=NaN,d=NaN,e=this.nf,g=this.ub;Pb(e)&&u.g("Spot must be real: "+e.toString());var i=g.ma,j=this.Rs;j.zl(0,0,i.width,i.height,e);if(g!==this){g.transform.vb(j);if(g.Na){e=g.Eh/2;j.offset(-e,-e)}for(g=g.U;g!==m&&g!==this;){g.transform.vb(j);g=g.U}}this.pm.vb(j);j.offset(-this.yc.x,
-this.yc.y);j=this.Rs;g=this.position;e=this.location;if(e.V()){c=e.x-j.x;d=e.y-j.y;g.copy();g.Wd(c,d)}else if(g.V()){c=g.x;d=g.y;e.copy();e.Wd(c+j.x,d+j.y)}j=this.Wb;j.x=c;j.y=d;j.freeze();Vi(this);Wi(this,a,j);a.u(j)?this.Xe=b:(this instanceof U||this.constructor===T)&&(!Ua(a.width,j.width)||!Ua(a.height,j.height))&&this.r(16);this.vj=o}};
function pi(a,b){a.kt=o;var c=a.b;if(c!==m){a.updateAdornments();var d=a.nE;if(d!==m){Vi(a);for(bj(a);d.next();){gh(d.value,Infinity,Infinity);d.value.nc()}}a instanceof U&&Bi(c,a);!a.sa.Zc&&!b&&fi(c);var d=a.Wb,e=c.jb;if(e.V())if(a.Xe){if(!d.de(e)){a.Xe=o;ph(c)}}else{if(d.de(e))a.Xe=h}else c.im=h;a.Wb.V()&&ph(c,a.Wb)}}T.prototype.ck=ca(h);u.a(T,"isInDocumentBounds",T.prototype.by);
u.defineProperty(T,{by:"isInDocumentBounds"},r("bp"),function(a){var b=this.bp;if(b!==a){s&&u.e(a,"boolean",T,"isInDocumentBounds");this.bp=a;this.d("isInDocumentBounds",b,a)}});u.a(T,"category",T.prototype.hd);
u.defineProperty(T,{hd:"category"},r("ij"),function(a){var b=this.ij;if(b!==a){s&&u.e(a,"string",T,"category");this.ij=a;this.d("category",b,a);var b=this.b,c=this.data;if(b!==m&&c!==m)if(this instanceof U||this.constructor===T){b=b.findTemplateForNodeData(c,a);if(b instanceof T){nf(b);b=b.copy();b instanceof T&&kl(this,b,a)}}else if(this instanceof W){b=b.findTemplateForLinkData(c,a);if(b instanceof W){nf(b);b=b.copy();b instanceof W&&kl(this,b,a)}}}});
function kl(a,b,c){a.Og();var d=a.data,e=a.xd,g=a.Da;b.Qg(a);b.fb(a);a.ij=c;a.L();$i(a);a.Vl=d;d!==m&&a.gc();b=a.xd;if(b!==e){a.lm=e;a.xd=b}a.Da=g}T.prototype.canCopy=T.prototype.eH=function(){if(!this.dB)return o;var a=this.sa;if(a===m)return h;if(!a.Hh)return o;a=a.b;return a===m?h:!a.Hh?o:h};T.prototype.canDelete=T.prototype.iH=function(){if(!this.nB)return o;var a=this.sa;if(a===m)return h;if(!a.Sj)return o;a=a.b;return a===m?h:!a.Sj?o:h};
T.prototype.canEdit=T.prototype.kH=function(){if(!this.iD)return o;var a=this.sa;if(a===m)return h;if(!a.Wm)return o;a=a.b;return a===m?h:!a.Wm?o:h};T.prototype.canGroup=T.prototype.oH=function(){if(!this.LB)return o;var a=this.sa;if(a===m)return h;if(!a.Qm)return o;a=a.b;return a===m?h:!a.Qm?o:h};T.prototype.canMove=T.prototype.rH=function(){if(!this.tC)return o;var a=this.sa;if(a===m)return h;if(!a.Tj)return o;a=a.b;return a===m?h:!a.Tj?o:h};
T.prototype.canPrint=T.prototype.ME=function(){if(!this.BC)return o;var a=this.sa;if(a===m)return h;if(!a.Sm)return o;a=a.b;return a===m?h:!a.Sm?o:h};T.prototype.canReshape=T.prototype.wH=function(){if(!this.KC)return o;var a=this.sa;if(a===m)return h;if(!a.Tm)return o;a=a.b;return a===m?h:!a.Tm?o:h};T.prototype.canResize=T.prototype.xH=function(){if(!this.LC)return o;var a=this.sa;if(a===m)return h;if(!a.Um)return o;a=a.b;return a===m?h:!a.Um?o:h};
T.prototype.canRotate=T.prototype.yH=function(){if(!this.QC)return o;var a=this.sa;if(a===m)return h;if(!a.Vm)return o;a=a.b;return a===m?h:!a.Vm?o:h};T.prototype.canSelect=T.prototype.sx=function(){if(!this.gk)return o;var a=this.sa;if(a===m)return h;if(!a.Hd)return o;a=a.b;return a===m?h:!a.Hd?o:h};u.a(T,"copyable",T.prototype.dB);u.defineProperty(T,{dB:"copyable"},r("oo"),function(a){var b=this.oo;if(b!==a){s&&u.e(a,"boolean",T,"copyable");this.oo=a;this.d("copyable",b,a)}});
u.a(T,"deletable",T.prototype.nB);u.defineProperty(T,{nB:"deletable"},r("Bo"),function(a){var b=this.Bo;if(b!==a){s&&u.e(a,"boolean",T,"deletable");this.Bo=a;this.d("deletable",b,a)}});u.a(T,"textEditable",T.prototype.iD);u.defineProperty(T,{iD:"textEditable"},r("Aq"),function(a){var b=this.Aq;if(b!==a){s&&u.e(a,"boolean",T,"textEditable");this.Aq=a;this.d("textEditable",b,a);this.updateAdornments()}});u.a(T,"groupable",T.prototype.LB);
u.defineProperty(T,{LB:"groupable"},r("Vo"),function(a){var b=this.Vo;if(b!==a){s&&u.e(a,"boolean",T,"groupable");this.Vo=a;this.d("groupable",b,a)}});u.a(T,"movable",T.prototype.tC);u.defineProperty(T,{tC:"movable"},r("Jp"),function(a){var b=this.Jp;if(b!==a){s&&u.e(a,"boolean",T,"movable");this.Jp=a;this.d("movable",b,a)}});u.a(T,"printable",T.prototype.BC);
u.defineProperty(T,{BC:"printable"},r("Tp"),function(a){var b=this.Tp;if(b!==a){s&&u.e(a,"boolean",T,"printable");this.Tp=a;this.d("printable",b,a)}});u.a(T,"reshapable",T.prototype.KC);u.defineProperty(T,{KC:"reshapable"},r("Yp"),function(a){var b=this.Yp;if(b!==a){s&&u.e(a,"boolean",T,"reshapable");this.Yp=a;this.d("reshapable",b,a);this.updateAdornments()}});u.a(T,"resizable",T.prototype.LC);
u.defineProperty(T,{LC:"resizable"},r("Zp"),function(a){var b=this.Zp;if(b!==a){s&&u.e(a,"boolean",T,"resizable");this.Zp=a;this.d("resizable",b,a);this.updateAdornments()}});u.a(T,"rotatable",T.prototype.QC);u.defineProperty(T,{QC:"rotatable"},r("dq"),function(a){var b=this.dq;if(b!==a){s&&u.e(a,"boolean",T,"rotatable");this.dq=a;this.d("rotatable",b,a);this.updateAdornments()}});u.a(T,"selectable",T.prototype.gk);
u.defineProperty(T,{gk:"selectable"},r("wm"),function(a){var b=this.wm;if(b!==a){s&&u.e(a,"boolean",T,"selectable");this.wm=a;this.d("selectable",b,a);this.updateAdornments()}});u.a(T,"selectionObjectName",T.prototype.Nn);u.defineProperty(T,{Nn:"selectionObjectName"},r("qq"),function(a){var b=this.qq;if(b!==a){s&&u.e(a,"string",T,"selectionObjectName");this.qq=a;this.Pj=m;this.d("selectionObjectName",b,a)}});u.a(T,"selectionAdorned",T.prototype.XC);
u.defineProperty(T,{XC:"selectionAdorned"},r("nq"),function(a){var b=this.nq;if(b!==a){s&&u.e(a,"boolean",T,"selectionAdorned");this.nq=a;this.d("selectionAdorned",b,a);this.updateAdornments()}});u.a(T,"selectionAdornmentTemplate",T.prototype.YC);u.defineProperty(T,{YC:"selectionAdornmentTemplate"},r("oq"),function(a){var b=this.oq;if(b!==a){s&&u.c(a,bf,T,"selectionAdornmentTemplate");if(this instanceof W)a.type=ng;this.oq=a;this.d("selectionAdornmentTemplate",b,a)}});
u.m(T,{Mn:"selectionObject"},function(){if(this.Pj===m){var a=this.Nn;if(a!==m&&a!==""){a=this.Le(a);this.Pj=a!==m?a:this}else if(this instanceof W){a=this.path;this.Pj=a!==m?a:this}else this.Pj=this}return this.Pj});u.a(T,"isSelected",T.prototype.Da);
u.defineProperty(T,{Da:"isSelected"},r("Ms"),function(a){var b=this.Ms;if(b!==a){s&&u.e(a,"boolean",T,"isSelected");var c=this.b;if(!a||this.sx()&&!(c!==m&&c.selection.count>=c.lC)){this.Ms=a;var d=o;if(c!==m){d=c.bb;c.bb=h;a?c.selection.add(this):c.selection.remove(this)}this.d("isSelected",b,a);this.updateAdornments();a=this.ZC;a!==m&&a(this);if(c!==m){pf(c);c.bb=d}}}});u.a(T,"selectionChanged",T.prototype.ZC);
u.defineProperty(T,{ZC:"selectionChanged"},r("pq"),function(a){var b=this.pq;if(b!==a){a!==m&&u.e(a,"function",T,"selectionChanged");this.pq=a;this.d("selectionChanged",b,a)}});u.a(T,"resizeAdornmentTemplate",T.prototype.MC);u.defineProperty(T,{MC:"resizeAdornmentTemplate"},r("$p"),function(a){var b=this.$p;if(b!==a){s&&u.c(a,bf,T,"resizeAdornmentTemplate");this.$p=a;this.d("resizeAdornmentTemplate",b,a)}});u.a(T,"resizeObjectName",T.prototype.OC);
u.defineProperty(T,{OC:"resizeObjectName"},r("bq"),function(a){var b=this.bq;if(b!==a){s&&u.e(a,"string",T,"resizeObjectName");this.bq=a;this.Uk=m;this.d("resizeObjectName",b,a)}});u.m(T,{nG:"resizeObject"},function(){if(this.Uk===m){var a=this.OC;if(a!==m&&a!==""){a=this.Le(a);this.Uk=a!==m?a:this}else this.Uk=this}return this.Uk});u.a(T,"resizeCellSize",T.prototype.NC);
u.defineProperty(T,{NC:"resizeCellSize"},r("aq"),function(a){var b=this.aq;if(!b.u(a)){s&&u.c(a,eb,T,"resizeCellSize");this.aq=a=a.B();this.d("resizeCellSize",b,a)}});u.a(T,"rotateAdornmentTemplate",T.prototype.RC);u.defineProperty(T,{RC:"rotateAdornmentTemplate"},r("eq"),function(a){var b=this.eq;if(b!==a){s&&u.c(a,bf,T,"rotateAdornmentTemplate");this.eq=a;this.d("rotateAdornmentTemplate",b,a)}});u.a(T,"rotateObjectName",T.prototype.SC);
u.defineProperty(T,{SC:"rotateObjectName"},r("fq"),function(a){var b=this.fq;if(b!==a){s&&u.e(a,"string",T,"rotateObjectName");this.fq=a;this.Vk=m;this.d("rotateObjectName",b,a)}});u.m(T,{rG:"rotateObject"},function(){if(this.Vk===m){var a=this.SC;if(a!==m&&a!==""){a=this.Le(a);this.Vk=a!==m?a:this}else this.Vk=this}return this.Vk});u.a(T,"text",T.prototype.text);u.defineProperty(T,{text:"text"},r("gd"),function(a){var b=this.gd;if(b!==a){s&&u.e(a,"string",T,"text");this.gd=a;this.d("text",b,a)}});
u.a(T,"containingGroup",T.prototype.Sa);
u.defineProperty(T,{Sa:"containingGroup"},r("kj"),function(a){if(this instanceof U||this.constructor===T){var b=this.kj;if(b!==a){s&&a!==m&&u.c(a,V,T,"containingGroup");if(a!==m&&(this===a||a.ql(this))){this===a&&u.g("Cannot make a Group a member of itself: "+this.toString());u.g("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+a.toString())}this.r(ri);var c=this.b;b!==m?ll(b,this):this instanceof V&&c!==m&&c.Wk.remove(this);this.kj=a;a!==m?ml(a,this):this instanceof
V&&c!==m&&c.Wk.add(this);this.r(mi);if(c!==m){var d=this.data,e=c.J;d!==m&&e instanceof P&&e.Hy(d,e.Vb(a!==m?a.data:m))}d=this.Dx;if(d!==m){e=h;if(c!==m){e=c.va;c.va=h}d(this,b,a);if(c!==m)c.va=e}if(this instanceof V){c=new la(T);af(c,this,h,o);for(c=c.f;c.next();){d=c.value;if(d instanceof U)for(d=d.ge;d.next();){e=d.value;ti(e)}}}if(this instanceof U)for(d=this.ge;d.next();){e=d.value;ti(e)}this.d("containingGroup",b,a);a!==m&&a.Uu()}}else u.g("cannot set the Part.containingGroup of a Link or Adornment")});
function nl(a,b){var c=a.kj;if(c!==b){c!==m&&ll(c,a);a.kj=b;b!==m&&ml(b,a);var d=a.Dx;if(d!==m){var e=h,g=a.b;if(g!==m){e=g.va;g.va=h}d(a,c,b);if(g!==m)g.va=e}}}function Yi(a){a=a.Sa;if(a!==m){a.L();a.Ya!==m&&a.Ya.L();a.kf()}}T.prototype.or=function(){var a=this.kj;a!==m&&ml(a,this)};T.prototype.pr=function(){var a=this.kj;a!==m&&ll(a,this)};T.prototype.il=function(){var a=this.data;if(a!==m){var b=this.b;if(b!==m){b=b.J;b!==m&&b.IC(a)}}};u.a(T,"containingGroupChanged",T.prototype.Dx);
u.defineProperty(T,{Dx:"containingGroupChanged"},r("no"),function(a){var b=this.no;if(b!==a){a!==m&&u.e(a,"function",T,"containingGroupChanged");this.no=a;this.d("containingGroupChanged",b,a)}});u.m(T,{pK:"topLevelPart"},function(){return ol(this,this)});function ol(a,b){var c=b.Sa;if(c!==m)return ol(a,c);if(b instanceof U){c=b.fe;if(c!==m)return ol(a,c)}return b}u.m(T,{sr:"isTopLevel"},function(){return this.Sa!==m||this instanceof U&&this.Li?o:h});
T.prototype.isMemberOf=T.prototype.ql=function(a){return!(a instanceof V)?o:pl(this,this,a)};function pl(a,b,c){if(b===c||c===m)return o;var d=b.Sa;if(d!==m&&(d===c||pl(a,d,c)))return h;if(b instanceof U){b=b.fe;if(b!==m)return pl(a,b,c)}return o}T.prototype.findCommonContainingGroup=T.prototype.jF=function(a){return ql(this,this,a)};function ql(a,b,c){if(b===m||c===m)return m;var d=b.Sa;if(d===m)return m;if(b===c)return d;var e=c.Sa;return e===m?m:d===e?e:pl(a,c,d)?d:pl(a,b,e)?e:ql(a,d,e)}
u.a(T,"isLayoutPositioned",T.prototype.dy);u.defineProperty(T,{dy:"isLayoutPositioned"},r("cp"),function(a){var b=this.cp;if(b!==a){s&&u.e(a,"boolean",T,"isLayoutPositioned");this.cp=a;this.d("isLayoutPositioned",b,a);this.r(a?hj:ij)}});u.a(T,"layoutConditions",T.prototype.dC);u.defineProperty(T,{dC:"layoutConditions"},r("op"),function(a){var b=this.op;if(b!==a){s&&u.e(a,"number",T,"layoutConditions");this.op=a;this.d("layoutConditions",b,a)}});
T.prototype.canLayout=T.prototype.Vq=function(){if(!this.dy||!this.gb())return o;var a=this.sa;return a!==m&&a.Zc||this instanceof U&&this.Li?o:h};T.prototype.invalidateLayout=T.prototype.r=function(a){a===f&&(a=16777215);var b;if(!this.dy||(a&this.dC)===0)b=o;else{b=this.sa;if(b!==m&&b.Zc||this instanceof U&&this.Li)b=o;else{b=this.b;b=b!==m&&b.ca.$a?o:h}}if(b){b=this.kj;if(b!==m){var c=b.rb;c!==m?c.r():b.r(a)}else{a=this.b;if(a!==m){c=a.rb;c!==m&&c.r()}}}};u.a(T,"dragComputation",T.prototype.Jx);
u.defineProperty(T,{Jx:"dragComputation"},r("Co"),function(a){var b=this.Co;if(b!==a){a!==m&&u.e(a,"function",T,"dragComputation");this.Co=a;this.d("dragComputation",b,a)}});u.a(T,"isShadowed",T.prototype.rr);u.defineProperty(T,{rr:"isShadowed"},r("Ze"),function(a){var b=this.Ze;if(b!==a){s&&u.e(a,"boolean",T,"isShadowed");this.Ze=a;$i(this);this.d("isShadowed",b,a)}});u.a(T,"shadowOffset",T.prototype.bD);
u.defineProperty(T,{bD:"shadowOffset"},r("zm"),function(a){var b=this.zm;if(!b.u(a)){s&&u.c(a,E,T,"shadowOffset");this.zm=a=a.B();$i(this);this.d("shadowOffset",b,a)}});u.a(T,"shadowColor",T.prototype.shadowColor);u.defineProperty(T,{shadowColor:"shadowColor"},r("ym"),function(a){var b=this.ym;if(b!==a){s&&u.e(a,"string",T,"shadowColor");this.ym=a;$i(this);this.d("shadowColor",b,a)}});u.a(T,"shadowBlur",T.prototype.shadowBlur);
u.defineProperty(T,{shadowBlur:"shadowBlur"},r("xm"),function(a){var b=this.xm;if(b!==a){s&&u.e(a,"number",T,"shadowBlur");this.xm=a;$i(this);this.d("shadowBlur",b,a)}});function bf(a){arguments.length===0?T.call(this,Og):T.call(this,a);this.xd="Adornment";this.ta=m;this.wm=o;this.ki=new E(NaN,NaN);this.hh=new z(J);this.$b=m;this.zc=(new z(E)).freeze();this.Nt=new E;this.Ya=m}u.H("Adornment",bf);u.na(bf,T);
bf.prototype.toString=function(){var a=this.Pm;return"Adornment("+this.hd+")"+(a!==m?a.toString():"")};bf.prototype.oj=function(){return this.ta&&this.ta.W instanceof W?this.ta.W.oj():m};bf.prototype.So=ca(m);bf.prototype.bw=function(){var a=this.Pm;return a instanceof W?a.zc:m};u.m(bf,{placeholder:"placeholder"},r("Ya"));u.a(bf,"adornedObject",bf.prototype.Gd);u.defineProperty(bf,{Gd:"adornedObject"},r("ta"),ba("ta"));u.m(bf,{Pm:"adornedPart"},function(){var a=this.ta;return a!==m?a.W:m});
bf.prototype.ck=function(){var a=this.ta;if(a===m)return h;a=a.W;return a===m||!a.Gc};u.m(bf,{Sa:"containingGroup"},ca(m));
bf.prototype.vl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")if(e instanceof Ig)this.Ya===m?this.Ya=e:this.Ya!==e&&u.g("Cannot insert a second Placeholder into the visual tree of an Adornment.");else{if(e instanceof v){var j=xk(e,e,function(a){return a instanceof Ig});if(j instanceof Ig)this.Ya===m?this.Ya=j:this.Ya!==j&&u.g("Cannot insert a second Placeholder into the visual tree of an Adornment.")}}else if(a===we&&b==="elements")if(d===this.Ya)this.Ya=m;else if(d instanceof v&&this.Ya.Wh(d))this.Ya=
m;T.prototype.vl.call(this,a,b,c,d,e,g,i)};bf.prototype.updateAdornments=bf.prototype.$h=aa();bf.prototype.il=aa();function U(a){arguments.length===0?T.call(this,Og):T.call(this,a);this.pd=new z(W);this.km=this.tp=this.rp=m;this.ip=h;this.Oq=o;this.Hq=m;this.ho=this.jp=h;this.io=(new qb(2)).freeze();this.jc=this.kg=m}u.H("Node",U);u.na(U,T);U.prototype.fb=function(a){T.prototype.fb.call(this,a);a.rp=this.rp;a.tp=this.tp;a.ip=this.ip;a.Oq=this.Oq;a.Hq=this.Hq;a.jp=this.jp;a.ho=this.ho;a.io.Oa(this.io)};
U.prototype.Qg=function(a){T.prototype.Qg.call(this,a);a.kf();a.kg=this.kg;a.jc=m};var rl;U.DirectionDefault=rl=u.l(U,"DirectionDefault",0);U.DirectionAbsolute=u.l(U,"DirectionAbsolute",1);var sl;U.DirectionRotatedNode=sl=u.l(U,"DirectionRotatedNode",2);var Mi;U.DirectionRotatedNodeOrthogonal=Mi=u.l(U,"DirectionRotatedNodeOrthogonal",3);function tl(a,b){if(b!==m){if(a.kg==m)a.kg=new la(ul);a.kg.add(b)}}
U.prototype.vl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")this.jc=m;else if(a===we&&b==="elements")this.b===m?this.jc=m:d instanceof Q&&wk(this,d,function(a,b){uj(a,b,h)});T.prototype.vl.call(this,a,b,c,d,e,g,i)};U.prototype.invalidateConnectedLinks=U.prototype.kf=function(a){a===f&&(a=m);for(var b=this.ge;b.next();){var c=b.value;if(!(a!==m&&a.contains(c))){var d=c.Ac;if(d!==m)d.fd=m;var e=c.md;if(e!==m&&e!==d)e.fd=m;If(c)}}};
U.prototype.ck=function(){if(this.Li===o)return h;var a=this.fe;return a===m?h:!a.Gc};u.a(U,"avoidable",U.prototype.qx);u.defineProperty(U,{qx:"avoidable"},r("ho"),function(a){var b=this.ho;if(b!==a){s&&u.e(a,"boolean",U,"avoidable");this.ho=a;var c=this.b;c!==m&&Bi(c,this);this.d("avoidable",b,a)}});u.a(U,"avoidableMargin",U.prototype.QA);
u.defineProperty(U,{QA:"avoidableMargin"},r("io"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,U,"avoidableMargin");var b=this.io;if(!b.u(a)){this.io=a=a.B();var c=this.b;c!==m&&Bi(c,this);this.d("avoidableMargin",b,a)}});U.prototype.canAvoid=U.prototype.bH=function(){return this.qx&&!this.Li};U.prototype.getAvoidableRectangle=U.prototype.HI=function(a){a===f&&(a=new J);a.set(this.pa);a.kx(this.QA);return a};function il(a){for(;a!==m&&!a.gb();)a=a.Sa;return a}u.m(U,{ge:"linksConnected"},function(){return this.pd.f});
U.prototype.findLinksConnected=U.prototype.Ox=function(a){a===f&&(a=m);if(a===m)return this.pd.f;s&&u.e(a,"string",U,"findLinksConnected:pid");var b=new Ha(this.pd),c=this;b.Ku=function(b){return b.da===c&&b.Ug===a||b.fa===c&&b.Zh===a};return b};U.prototype.findLinksOutOf=U.prototype.ru=function(a){a===f&&(a=m);var b=new Ha(this.pd),c=this;b.Ku=function(b){return b.da!==c?o:a===m?h:b.Ug===a};return b};
U.prototype.findLinksInto=U.prototype.hf=function(a){a===f&&(a=m);var b=new Ha(this.pd),c=this;b.Ku=function(b){return b.fa!==c?o:a===m?h:b.Zh===a};return b};
U.prototype.findNodesConnected=U.prototype.yB=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.pd.f;d.next();){var e=d.value;if(e.da===this){if(a===m||e.Ug===a){e=e.fa;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}else if(e.fa===this&&(a===m||e.Zh===a)){e=e.da;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ga(c):u.zf};
U.prototype.findNodesOutOf=U.prototype.gn=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.pd.f;d.next();){var e=d.value;if(e.da===this&&(a===m||e.Ug===a)){e=e.fa;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ga(c):u.zf};
U.prototype.findNodesInto=U.prototype.fn=function(a){a===f&&(a=m);for(var b=m,c=m,d=this.pd.f;d.next();){var e=d.value;if(e.fa===this&&(a===m||e.Zh===a)){e=e.da;if(b!==m)b.add(e);else if(c!==m&&c!==e){b=new la(U);b.add(c);b.add(e)}else c=e}}return b!==m?b.f:c!==m?new Ga(c):u.zf};u.a(U,"linkConnected",U.prototype.eC);u.defineProperty(U,{eC:"linkConnected"},r("rp"),function(a){var b=this.rp;if(b!==a){a!==m&&u.e(a,"function",U,"linkConnected");this.rp=a;this.d("linkConnected",b,a)}});
u.a(U,"linkDisconnected",U.prototype.fC);u.defineProperty(U,{fC:"linkDisconnected"},r("tp"),function(a){var b=this.tp;if(b!==a){a!==m&&u.e(a,"function",U,"linkDisconnected");this.tp=a;this.d("linkDisconnected",b,a)}});function vl(a,b,c){if(!a.pd.contains(b)){a.pd.add(b);var d=a.eC;if(d!==m){var e=h,g=a.b;if(g!==m){e=g.va;g.va=h}d(a,b,c);if(g!==m)g.va=e}if(a.Ni){c=h;g=a.b;if(g!==m)c=g.mf;if(c){if(b.da===a)a.Ni=o}else if(b.fa===a)a.Ni=o}}}
function wl(a,b,c){if(a.pd.remove(b)){var d=a.fC,e=a.b;if(d!==m){var g=h;if(e!==m){g=e.va;e.va=h}d(a,b,c);if(e!==m)e.va=g}if(!a.Ni&&!(e!==m&&e.ca.$a)){b=a.pd.count;b===0?a.Ni=h:b===1&&xi(a)}}}function xi(a){if(a.pd.count!==0){var b=h,c=a.b;if(c!==m)b=c.mf;for(c=a.pd.f;c.next();){var d=c.value;if(b){if(d.da===a){a.Ni=o;return}}else if(d.fa===a){a.Ni=o;return}}a.Ni=h}}U.prototype.or=function(){T.prototype.or.call(this);xi(this);var a=this.km;a!==m&&xl(a,this)};
U.prototype.pr=function(){T.prototype.pr.call(this);var a=this.km;if(a!==m&&a.af!==m){a.af.remove(this);a.L()}};U.prototype.il=function(){if(this.pd.count>0){var a=this.b;if(a===m)return;for(var b=this.pd.copy().f;b.next();)a.remove(b.value)}T.prototype.il.call(this)};u.m(U,{Li:"isLinkLabel"},function(){return this.km!==m});u.a(U,"labeledLink",U.prototype.fe);
u.defineProperty(U,{fe:"labeledLink"},r("km"),function(a){var b=this.km;if(b!==a){s&&a!==m&&u.c(a,W,U,"labeledLink");var c=this.b,d=this.data;if(b!==m){if(b.af!==m){b.af.remove(this);b.L()}if(c!==m&&d!==m){var e=b.data,g=c.J;if(e!==m&&g instanceof P){var i=g.Vb(d);i!==f&&g.jG(e,i)}}}this.km=a;if(a!==m){xl(a,this);if(c!==m&&d!==m){e=a.data;g=c.J;if(e!==m&&g instanceof P){i=g.Vb(d);i!==f&&g.GA(e,i)}}}dj(this);this.d("labeledLink",b,a)}});
U.prototype.findPort=U.prototype.gr=function(a){s&&u.e(a,"string",U,"findPort:pid");this.jc===m&&xj(this);if(this.jc!==m){var b=this.jc.$(a);if(b!==m)return b}if(a!==""&&this.jc!==m){b=this.jc.$("");if(b!==m)return b}this.jc===m&&xj(this);return this};u.m(U,{port:"port"},function(){return this.gr("")});u.m(U,{ports:"ports"},function(){this.jc===m&&xj(this);return this.jc!==m?this.jc.f:u.zf});function xj(a){a.jc!==m&&a.jc.clear();wk(a,a,function(a,c){yj(a,c)})}
function yj(a,b){var c=b.je;if(c!==m){if(a.jc===m)a.jc=new ka("string",Q);a.jc.add(c,b)}}function uj(a,b,c){var d=b.je;if(d!==m){a.jc!==m&&a.jc.remove(d);b=a.b;if(b!==m&&c){c=m;for(a=a.Ox(d);a.next();){c===m&&(c=[]);c.push(a.value)}if(c!==m)for(a=0;a<c.length;a++)b.remove(c[a])}}}
U.prototype.isInTreeOf=U.prototype.eJ=function(a){if(a===m||a===this)return o;var b=h,c=this.b;if(c!==m)b=c.mf;if(b)a:{for(b=this;b!==a;){for(var c=m,d=b.hf();d.next();){c=d.value.da;if(c!==b)break}if(c===m){a=o;break a}b=c}a=h}else a:{for(b=this;b!==a;){c=m;for(d=b.ru();d.next();){c=d.value.fa;if(c!==b)break}if(c===m){a=o;break a}b=c}a=h}return a};U.prototype.findTreeParts=U.prototype.FI=function(){var a=new la(T);af(a,this,o,h);return a};
U.prototype.collapseTree=U.prototype.Yq=function(){var a=this.b;if(a!==m&&!a.lf){a.lf=h;var b=a.mf,c=new la(U);c.add(this);yl(this,c,b);a.lf=o}};function yl(a,b,c){a.Od=o;for(var d=c?a.ru():a.hf();d.next();){var e=d.value,g=e.HB(a);if(g!==m&&g!==a&&!b.contains(g)){b.add(g);$i(e);e.Og();$i(g);g.Og();Yi(g);g.r(ij);if(g.Od){g.av=g.Od;yl(g,b,c)}}}}U.prototype.expandTree=U.prototype.er=function(){var a=this.b;if(a!==m&&!a.lf){a.lf=h;var b=a.mf,c=new la(U);c.add(this);zl(this,c,b);a.lf=o}};
function zl(a,b,c){a.Od=h;for(var d=c?a.ru():a.hf();d.next();){var e=d.value,g=e.HB(a);if(g!==m&&g!==a&&!b.contains(g)){b.add(g);$i(e);e.$h();$i(g);g.$h();Yi(g);g.r(hj);if(g.av){g.av=o;zl(g,b,c)}}}}u.a(U,"isTreeExpanded",U.prototype.Od);
u.defineProperty(U,{Od:"isTreeExpanded"},r("ip"),function(a){var b=this.ip;if(b!==a){s&&u.e(a,"boolean",U,"isTreeExpanded");this.ip=a;var c=this.b;c!==m&&ph(c);this.d("isTreeExpanded",b,a);b=this.uD;if(b!==m){var d=h;if(c!==m){d=c.va;c.va=h}b(this);if(c!==m)c.va=d}c!==m&&c.ca.$a||(a?this.er():this.Yq())}});u.a(U,"wasTreeExpanded",U.prototype.av);
u.defineProperty(U,{av:"wasTreeExpanded"},r("Oq"),function(a){var b=this.Oq;if(b!==a){s&&u.e(a,"boolean",U,"wasTreeExpanded");this.Oq=a;this.d("wasTreeExpanded",b,a)}});u.a(U,"treeExpandedChanged",U.prototype.uD);u.defineProperty(U,{uD:"treeExpandedChanged"},r("Hq"),function(a){var b=this.Hq;if(b!==a){a!==m&&u.e(a,"function",U,"treeExpandedChanged");this.Hq=a;this.d("treeExpandedChanged",b,a)}});u.a(U,"isTreeLeaf",U.prototype.Ni);
u.defineProperty(U,{Ni:"isTreeLeaf"},r("jp"),function(a){var b=this.jp;if(b!==a){s&&u.e(a,"boolean",U,"isTreeLeaf");this.jp=a;this.d("isTreeLeaf",b,a)}});
function W(){T.call(this,ng);this.pg=m;this.gi="";this.Qo=m;this.rg=Ub;this.og=NaN;this.ng=rl;this.qg=NaN;this.Hg=m;this.wi="";this.Gq=m;this.Jg=Ub;this.Gg=NaN;this.Fg=rl;this.Ig=NaN;this.Xp=this.Wp=o;this.ao=Ni;this.po=0;this.ro=Ni;this.so=NaN;this.si=Mj;this.tq=0.5;this.$b=this.af=m;this.zc=(new z(E)).freeze();this.Uf=m;this.Xk=o;this.Hw=m;this.Fm=o;this.uk=this.nh=this.ua=m;this.Cd=0;this.hh=new z(J);this.Nt=new E;this.Mv=o}u.H("Link",W);u.na(W,T);
W.prototype.fb=function(a){T.prototype.fb.call(this,a);a.gi=this.gi;a.Qo=this.Qo;a.rg=this.rg.B();a.og=this.og;a.ng=this.ng;a.qg=this.qg;a.wi=this.wi;a.Gq=this.Gq;a.Jg=this.Jg.B();a.Gg=this.Gg;a.Fg=this.Fg;a.Ig=this.Ig;a.Wp=this.Wp;a.Xp=this.Xp;a.ao=this.ao;a.po=this.po;a.ro=this.ro;a.so=this.so;a.si=this.si;a.tq=this.tq};W.prototype.Qg=function(a){T.prototype.Qg.call(this,a);a.$b=m;a.Uf=m;If(a);a.uk=this.uk;a.Cd=this.Cd};var Mj;W.Normal=Mj=u.l(W,"Normal",1);var oh;
W.Orthogonal=oh=u.l(W,"Orthogonal",2);var Hf;W.AvoidsNodes=Hf=u.l(W,"AvoidsNodes",3);var Ni;W.None=Ni=u.l(W,"None",0);var Gj;W.Bezier=Gj=u.l(W,"Bezier",9);var Hj;W.JumpGap=Hj=u.l(W,"JumpGap",10);var Ij;W.JumpOver=Ij=u.l(W,"JumpOver",11);var Jj;W.End=Jj=u.l(W,"End",17);var Kj;W.Scale=Kj=u.l(W,"Scale",18);var Lj;W.Stretch=Lj=u.l(W,"Stretch",19);var Hk;W.OrientAlong=Hk=u.l(W,"OrientAlong",21);var Al;W.OrientPlus90=Al=u.l(W,"OrientPlus90",22);var Bl;W.OrientMinus90=Bl=u.l(W,"OrientMinus90",23);var Cl;
W.OrientOpposite=Cl=u.l(W,"OrientOpposite",24);var Dl;W.OrientUpright=Dl=u.l(W,"OrientUpright",25);var El;W.OrientPlus90Upright=El=u.l(W,"OrientPlus90Upright",26);var Fl;W.OrientMinus90Upright=Fl=u.l(W,"OrientMinus90Upright",27);var Gl;W.OrientUpright45=Gl=u.l(W,"OrientUpright45",28);W.prototype.ck=function(){var a=this.da;if(a!==m&&(a.Gc||a.vj))return o;a=this.fa;return a!==m&&(a.Gc||a.vj)?o:h};
function vk(a,b){var c;switch(a){default:case Ni:c=0;break;case Hk:c=b;break;case Al:c=b+90;break;case Bl:c=b-90;break;case Cl:c=b+180;break;case Dl:c=jd(b);c>90&&c<270&&(c=c-180);break;case El:c=jd(b+90);c>90&&c<270&&(c=c-180);break;case Fl:c=jd(b-90);c>90&&c<270&&(c=c-180);break;case Gl:c=jd(b);if(c>45&&c<135||c>225&&c<315)return 0;c>90&&c<270&&(c=c-180)}return jd(c)}u.a(W,"fromNode",W.prototype.da);
u.defineProperty(W,{da:"fromNode"},r("pg"),function(a){var b=this.pg;if(b!==a){s&&a!==m&&u.c(a,U,W,"fromNode");var c=this.Ac;if(b!==m){this.Hg!==b&&wl(b,this,c);if(c!==m)c.fd=m;Hl(this);b.r(ri)}this.pg=a;this.nh=m;If(this);var d=this.b;if(d!==m){var e=this.data,g=d.J;e!==m&&g instanceof P&&g.Su(e,g.Vb(a!==m?a.data:m))}e=this.Ac;g=this.Sx;if(g!==m){var i=h;if(d!==m){i=d.va;d.va=h}g(this,c,e);if(d!==m)d.va=i}if(a!==m){this.Hg!==a&&vl(a,this,e);if(e!==m)e.fd=m;Il(this);a.r(mi)}this.d("fromNode",b,a);
ti(this)}});u.a(W,"fromPortId",W.prototype.Ug);u.defineProperty(W,{Ug:"fromPortId"},r("gi"),function(a){var b=this.gi;if(b!==a){s&&u.e(a,"string",W,"fromPortId");var c=this.Ac;if(c!==m)c.fd=m;Hl(this);this.gi=a;var d=this.Ac;if(d!==m)d.fd=m;var e=this.b;if(e!==m){var g=this.data,i=e.J;g!==m&&i instanceof P&&i.Mr(g,a)}if(c!==d){this.nh=m;If(this);g=this.Sx;if(g!==m){i=h;if(e!==m){i=e.va;e.va=h}g(this,c,d);if(e!==m)e.va=i}}Il(this);this.d("fromPortId",b,a)}});
u.m(W,{Ac:"fromPort"},function(){var a=this.pg;return a===m?m:a.gr(this.gi)});u.a(W,"fromPortChanged",W.prototype.Sx);u.defineProperty(W,{Sx:"fromPortChanged"},r("Qo"),function(a){var b=this.Qo;if(b!==a){a!==m&&u.e(a,"function",W,"fromPortChanged");this.Qo=a;this.d("fromPortChanged",b,a)}});u.a(W,"toNode",W.prototype.fa);
u.defineProperty(W,{fa:"toNode"},r("Hg"),function(a){var b=this.Hg;if(b!==a){s&&a!==m&&u.c(a,U,W,"toNode");var c=this.md;if(b!==m){this.pg!==b&&wl(b,this,c);if(c!==m)c.fd=m;Hl(this);b.r(ri)}this.Hg=a;this.nh=m;If(this);var d=this.b;if(d!==m){var e=this.data,g=d.J;e!==m&&g instanceof P&&g.Tu(e,g.Vb(a!==m?a.data:m))}e=this.md;g=this.Ry;if(g!==m){var i=h;if(d!==m){i=d.va;d.va=h}g(this,c,e);if(d!==m)d.va=i}if(a!==m){this.pg!==a&&vl(a,this,e);if(e!==m)e.fd=m;Il(this);a.r(mi)}this.d("toNode",b,a);ti(this)}});
u.a(W,"toPortId",W.prototype.Zh);u.defineProperty(W,{Zh:"toPortId"},r("wi"),function(a){var b=this.wi;if(b!==a){s&&u.e(a,"string",W,"toPortId");var c=this.md;if(c!==m)c.fd=m;Hl(this);this.wi=a;var d=this.md;if(d!==m)d.fd=m;var e=this.b;if(e!==m){var g=this.data,i=e.J;g!==m&&i instanceof P&&i.Pr(g,a)}if(c!==d){this.nh=m;If(this);g=this.Ry;if(g!==m){i=h;if(e!==m){i=e.va;e.va=h}g(this,c,d);if(e!==m)e.va=i}}Il(this);this.d("toPortId",b,a)}});
u.m(W,{md:"toPort"},function(){var a=this.Hg;return a===m?m:a.gr(this.wi)});u.a(W,"toPortChanged",W.prototype.Ry);u.defineProperty(W,{Ry:"toPortChanged"},r("Gq"),function(a){var b=this.Gq;if(b!==a){a!==m&&u.e(a,"function",W,"toPortChanged");this.Gq=a;this.d("toPortChanged",b,a)}});u.a(W,"fromSpot",W.prototype.Ua);u.defineProperty(W,{Ua:"fromSpot"},r("rg"),function(a){var b=this.rg;if(!b.u(a)){s&&u.c(a,K,W,"fromSpot");this.rg=a=a.B();this.d("fromSpot",b,a);If(this)}});
u.a(W,"fromEndSegmentLength",W.prototype.ak);u.defineProperty(W,{ak:"fromEndSegmentLength"},r("og"),function(a){var b=this.og;if(b!==a){s&&u.e(a,"number",W,"fromEndSegmentLength");a<0&&u.ia(a,">= 0",W,"fromEndSegmentLength");this.og=a;this.d("fromEndSegmentLength",b,a);If(this)}});u.a(W,"fromEndSegmentDirection",W.prototype.ir);
u.defineProperty(W,{ir:"fromEndSegmentDirection"},r("ng"),function(a){var b=this.ng;if(b!==a){s&&u.Ra(a,U,W,"fromEndSegmentDirection");this.ng=a;this.d("fromEndSegmentDirection",b,a);If(this)}});u.a(W,"fromShortLength",W.prototype.jr);u.defineProperty(W,{jr:"fromShortLength"},r("qg"),function(a){var b=this.qg;if(b!==a){s&&u.e(a,"number",W,"fromShortLength");this.qg=a;this.d("fromShortLength",b,a);If(this)}});u.a(W,"toSpot",W.prototype.Wa);
u.defineProperty(W,{Wa:"toSpot"},r("Jg"),function(a){var b=this.Jg;if(!b.u(a)){s&&u.c(a,K,W,"toSpot");this.Jg=a=a.B();this.d("toSpot",b,a);If(this)}});u.a(W,"toEndSegmentLength",W.prototype.jk);u.defineProperty(W,{jk:"toEndSegmentLength"},r("Gg"),function(a){var b=this.Gg;if(b!==a){s&&u.e(a,"number",W,"toEndSegmentLength");a<0&&u.ia(a,">= 0",W,"toEndSegmentLength");this.Gg=a;this.d("toEndSegmentLength",b,a);If(this)}});u.a(W,"toEndSegmentDirection",W.prototype.Ur);
u.defineProperty(W,{Ur:"toEndSegmentDirection"},r("Fg"),function(a){var b=this.Fg;if(b!==a){s&&u.Ra(a,U,W,"toEndSegmentDirection");this.Fg=a;this.d("toEndSegmentDirection",b,a);If(this)}});u.a(W,"toShortLength",W.prototype.Vr);u.defineProperty(W,{Vr:"toShortLength"},r("Ig"),function(a){var b=this.Ig;if(b!==a){s&&u.e(a,"number",W,"toShortLength");this.Ig=a;this.d("toShortLength",b,a);If(this)}});function ti(a){var b=a.da,c=a.fa;b!==m&&c!==m?nl(a,b.jF(c)):nl(a,m)}
W.prototype.getOtherNode=W.prototype.HB=function(a){s&&u.c(a,U,W,"getOtherNode:node");var b=this.da;return a===b?this.fa:b};W.prototype.getOtherPort=W.prototype.JI=function(a){s&&u.c(a,Q,W,"getOtherPort:port");var b=this.Ac;return a===b?this.md:b};u.m(W,{Xh:"labelNodes"},function(){return this.af===m?u.zf:this.af.f});function xl(a,b){if(a.af===m)a.af=new la(U);a.af.add(b);a.L()}
W.prototype.or=function(){T.prototype.or.call(this);var a=this.pg,b=this.Hg;if(a!==m){var c=this.Ac;if(c!==m)c.fd=m;vl(a,this,c);Il(this)}if(b!==m){c=this.md;if(c!==m)c.fd=m;vl(b,this,c);Il(this)}};W.prototype.pr=function(){T.prototype.pr.call(this);var a=this.pg,b=this.Hg;if(a!==m){var c=this.Ac;if(c!==m)c.fd=m;wl(a,this,c);Hl(this)}if(b!==m){c=this.md;if(c!==m)c.fd=m;wl(b,this,c);Hl(this)}};
W.prototype.il=function(){if(this.af!==m){var a=this.b;if(a===m)return;for(var b=this.af.copy().f;b.next();)a.remove(b.value)}b=this.data;if(b!==m){a=this.b;if(a!==m){a=a.J;a instanceof P&&a.kG(b)}}};W.prototype.move=W.prototype.move=function(a){var b=this.position,c=a.x-b.x,b=a.y-b.y;T.prototype.move.call(this,a);this.ek(c,b);for(a=this.Xh;a.next();){var d=a.value,e=d.position;d.move(new E(e.x+c,e.y+b))}};u.a(W,"relinkableFrom",W.prototype.EC);
u.defineProperty(W,{EC:"relinkableFrom"},r("Wp"),function(a){var b=this.Wp;if(b!==a){s&&u.e(a,"boolean",W,"relinkableFrom");this.Wp=a;this.d("relinkableFrom",b,a)}});u.a(W,"relinkableTo",W.prototype.FC);u.defineProperty(W,{FC:"relinkableTo"},r("Xp"),function(a){var b=this.Xp;if(b!==a){s&&u.e(a,"boolean",W,"relinkableTo");this.Xp=a;this.d("relinkableTo",b,a)}});
W.prototype.canRelinkFrom=W.prototype.tH=function(){if(!this.EC)return o;var a=this.sa;if(a!==m&&!a.yi)return o;a=a.b;return a!==m&&!a.yi?o:h};W.prototype.canRelinkTo=W.prototype.uH=function(){if(!this.FC)return o;var a=this.sa;if(a!==m&&!a.yi)return o;a=a.b;return a!==m&&!a.yi?o:h};u.m(W,{path:"path"},function(){var a=this.$b;if(a!==m)return a;a=this.wa;a=ok(this,a,a.length);if(a instanceof X)return this.$b=a;return m});W.prototype.So=r("path");W.prototype.bw=r("zc");
W.prototype.oj=function(){Jl(this);var a=this.Zd();return this.Hw=a};
W.prototype.Zd=function(){var a=Infinity,b=Infinity,c=this.Y,d;if(c===0)return new J(NaN,NaN,0,0);if(c===1){c=this.h(0);a=Math.min(c.x,a);b=Math.min(c.y,b);d=new J(c.x,c.y,0,0)}else if(c===2){d=this.h(0);var e=this.h(1),a=Math.min(d.x,e.x),b=Math.min(d.y,e.y);d=new J(d,e)}else if(Kl(this)===Gj&&c>=4&&!ug(this)){d=this.h(0);var a=Math.min(d.x,a),b=Math.min(d.y,b),e=d.x,g=d.y,i=d.x,j=d.y,k,l,n,q;d=new J(e,g,0,0);for(var p=3;p<c;p=p+3){k=this.h(p-3);l=this.h(p-2);p+3>=c&&(p=c-1);n=this.h(p-1);q=this.h(p);
Uc(k.x,k.y,l.x,l.y,n.x,n.y,q.x,q.y,0.5,d);e=Math.min(e,d.x);g=Math.min(g,d.y);i=Math.max(i,d.x+d.width);j=Math.max(j,d.y+d.height);a=Math.min(q.x,a);b=Math.min(q.y,b)}}else{d=this.h(0);e=this.h(1);a=Math.min(d.x,e.x);b=Math.min(d.y,e.y);d=new J(d,e);for(p=2;p<c;p++){e=this.h(p);a=Math.min(e.x,a);b=Math.min(e.y,b);d.Yu(e)}}this.Nt.Wd(a-d.x,b-d.y);return d};u.m(W,{pC:"midPoint"},function(){Jl(this);return Ll(this)});
function Ll(a){var b=a.Y;if(b===0)return Mc;if(b===1)return a.h(0);if(b===2){var c=a.h(0),d=a.h(1);return new E((c.x+d.x)/2,(c.y+d.y)/2)}if(Kl(a)===Gj&&b>=3&&!ug(a)){if(b===3)return a.h(1);var c=(b-1)/3|0,e=(c/2|0)*3;if(c%2===1){var c=a.h(e),d=a.h(e+1),g=a.h(e+2),a=a.h(e+3),e=new E,b=d.x,i=d.y,d=g.x,j=g.y,g=(b+d)/2,k=(i+j)/2,i=((c.y+i)/2+k)/2,j=(k+(j+a.y)/2)/2;e.x=(((c.x+b)/2+g)/2+(g+(d+a.x)/2)/2)/2;e.y=(i+j)/2;return e}return a.h(e)}e=0;g=[];for(i=0;i<b-1;i++){c=a.h(i);d=a.h(i+1);if(Sa(c.x,d.x)){c=
d.y-c.y;c<0&&(c=-c)}else if(Sa(c.y,d.y)){c=d.x-c.x;c<0&&(c=-c)}else c=Math.sqrt(c.Ph(d));g.push(c);e=e+c}for(d=i=c=0;c<e/2&&i<b;){d=g[i];if(c+d>e/2)break;c=c+d;i++}b=a.h(i);a=a.h(i+1);if(b.x===a.x)return b.y>a.y?new E(b.x,b.y-(e/2-c)):new E(b.x,b.y+(e/2-c));if(b.y===a.y)return b.x>a.x?new E(b.x-(e/2-c),b.y):new E(b.x+(e/2-c),b.y);c=(e/2-c)/d;return new E(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))}u.m(W,{oC:"midAngle"},function(){Jl(this);return Ml(this)});
function Ml(a){var b=a.Y;if(b<2)return NaN;if(Kl(a)===Gj&&b>=4&&!ug(a)){var c=(b-1)/3|0,d=(c/2|0)*3;if(c%2===1){var d=Math.floor(d),b=a.h(d),e=a.h(d+1),c=a.h(d+2),a=a.h(d+3),d=e.x,e=e.y,g=c.x,c=c.y,i=(d+g)/2,j=(e+c)/2;return cb(((b.x+d)/2+i)/2,((b.y+e)/2+j)/2,(i+(g+a.x)/2)/2,(j+(c+a.y)/2)/2)}if(d>0&&d+1<b){b=a.h(d-1);e=a.h(d+1);return b.Oh(e)}}c=b/2|0;if(b%2===0){b=a.h(c-1);e=a.h(c);return b.Oh(e)}b=a.h(c-1);e=a.h(c);c=a.h(c+1);a=b.Ph(e);d=e.Ph(c);return a>d?b.Oh(e):e.Oh(c)}u.a(W,"points",W.prototype.ib);
u.defineProperty(W,{ib:"points"},r("zc"),function(a){s&&u.c(a,z,W,"points");var b=this.zc;if(b!==a&&a!==m){for(var c=a.f;c.next();){var d=c.value;d.freeze()}a.freeze();this.zc=a.copy();this.Ye();Nl(this);for(var c=a.count,e=new z,g=0;g<c;g++){d=a.j[g];e.add(d.copy())}this.d("points",b,e)}});u.m(W,{Y:"pointsCount"},function(){return this.zc.count});W.prototype.getPoint=W.prototype.h=function(a){return this.zc.j[a]};
W.prototype.setPoint=W.prototype.w=function(a,b){if(s){u.c(b,E,W,"setPoint");b.V()||u.g("Link.setPoint called with a Point that does not have real numbers: "+b.toString())}this.Uf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.zc.Ru(a,b)};
W.prototype.insertPoint=W.prototype.q=function(a,b){if(s){u.c(b,E,W,"insertPoint");b.V()||u.g("Link.insertPoint called with a Point that does not have real numbers: "+b.toString())}this.Uf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.zc.ec(a,b)};
W.prototype.addPoint=W.prototype.Wc=function(a){if(s){u.c(a,E,W,"addPoint");a.V()||u.g("Link.addPoint called with a Point that does not have real numbers: "+a.toString())}this.Uf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.zc.add(a)};W.prototype.removePoint=W.prototype.JC=function(a){this.Uf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.zc.Se(a)};
W.prototype.clearPoints=W.prototype.Ym=function(){this.Uf===m&&u.g("Call Link.startRoute before modifying the points of the route.");this.zc.clear()};W.prototype.movePoints=W.prototype.ek=function(a,b){for(var c=new z(E),d=this.zc.f;d.next();){var e=d.value;c.add(new E(e.x+a,e.y+b))}this.ib=c};W.prototype.startRoute=W.prototype.ik=function(){if(this.Uf===m){for(var a=new z(E),b=this.zc.f;b.next();)a.add(b.value.B());this.Uf=a;this.zc.xa()}};
W.prototype.commitRoute=W.prototype.Mh=function(){if(this.Uf!==m){for(var a=this.Uf,b=Infinity,c=Infinity,d=a.count,e=0;e<d;e++)var g=a.j[e],b=Math.min(g.x,b),c=Math.min(g.y,c);for(var i=Infinity,j=Infinity,k=this.zc,l=k.count,e=0;e<l;e++){g=k.j[e];i=Math.min(g.x,i);j=Math.min(g.y,j)}if(l===d)for(e=0;e<l;e++){g=a.j[e];d=k.j[e];if(g.x-b!==d.x-i||g.y-c!==d.y-j){this.Ye();break}}this.Uf=m;this.zc.freeze();Nl(this);b=new z(E);for(e=0;e<l;e++){g=k.j[e];b.add(g.copy())}this.d("points",a,b)}};
W.prototype.rollbackRoute=W.prototype.oG=function(){this.Uf=m};function Nl(a){if(a.zc.count===0)a.Xk=o;else{a.Xk=h;Ol(a,o)}}function If(a){if(!a.Fm&&(!a.b||!a.b.ca.$a)&&a.gb()){a.Xk=o;a.Ye();a=a.So();a!==m&&a.L()}}
function Jl(a){if(!a.Xk&&!a.Mv){var b=h;try{a.Mv=h;a.ik();var c=a.da,d=m,d=c===m?m:a.Ac;if(d!==m){var e=zj(d);if(e===c||!c.gb()){var g=il(c);if(g!==m&&g!==c){c=g;d=g.gr("")}else c=g}else d=e}if(c===m||d===m||!c.location.V())b=o;else{var i=a.fa,e=m,e=i===m?m:a.md;if(e!==m){var j=zj(e);if(j===i||!i.gb()){var k=il(i);if(k!==m&&k!==i){i=k;e=k.gr("")}else i=k}else e=j}if(i===m||e===m||!i.location.V())b=o;else{var l=a.Y,n=Pl(a,d),q=Ql(a,e),j=d===e,p=ug(a),t=a.Ie===Gj;if(j&&!p){t=h;a.nh=h}else a.nh=o;var w=
a.Wt===Ni||j;if(!p&&n===Tb&&q===Tb&&!j){q=o;if(!w&&l>=3)var A=a.Md(c,d,Tb,h,o,i,e),F=a.Md(i,e,Tb,o,o,c,d),q=Rl(a,0,A,l-1,F);if(!q){a.Ym();if(t){var q=c,p=d,H=e,x=a.Md(q,p,Tb,h,o,i,H),I=a.Md(i,H,Tb,o,o,q,p),y=I.x-x.x,G=I.y-x.y,fa=Sl(a),R=0,S=0,da=x.x+y/3,ma=x.y+G/3,ua=da,sa=ma;if(Ua(G,0))sa=y>0?sa-fa:sa+fa;else{R=-y/G;S=Math.sqrt(fa*fa/(R*R+1));fa<0&&(S=-S);ua=(G<0?-1:1)*S+da;sa=R*(ua-da)+ma}var da=x.x+2*y/3,ma=x.y+2*G/3,ib=da,db=ma;if(Ua(G,0))db=y>0?db-fa:db+fa;else{ib=(G<0?-1:1)*S+da;db=R*(ib-da)+
ma}a.Ym();a.Wc(x);a.Wc(new E(ua,sa));a.Wc(new E(ib,db));a.Wc(I);a.w(0,a.Md(q,p,Tb,h,o,i,H));a.w(3,a.Md(i,H,Tb,o,o,q,p))}else{var q=c,p=d,H=e,$a=a.Md(q,p,Tb,h,o,i,H),Oa=a.Md(i,H,Tb,o,o,q,p);if(!isNaN(a.hu)||a.Cd!==0&&!ug(a)){var fb=Oa.x-$a.x,Va=Oa.y-$a.y,vc=Sl(a),Cd=$a.x+fb/2,Wa=$a.y+Va/2,i=Cd,q=Wa;if(Ua(Va,0))q=fb>0?q-vc:q+vc;else{var p=-fb/Va,Fc=Math.sqrt(vc*vc/(p*p+1));vc<0&&(Fc=-Fc);i=(Va<0?-1:1)*Fc+Cd;q=p*(i-Cd)+Wa}a.Wc($a);a.Wc(new E(i,q))}else a.Wc($a);a.Wc(Oa)}}}else{var Dd=a.Te===Hf;w&&(p&&
Dd||j)&&a.Ym();var qc=Sl(a),Wb=a.Md(c,d,n,h,p,i,e),I=G=y=0;if(p||n!==Tb||j){var hc=Tl(a,d,n,h),I=Ul(a,c,d,Wb,n,h,p,e);if(j){I=I-(p?90:30);qc<0&&(I=I-180)}I<0?I=I+360:I>=360&&(I=I-360);j&&(hc=hc+Math.abs(qc));if(I===0)y=hc;else if(I===90)G=hc;else if(I===180)y=-hc;else if(I===270)G=-hc;else{y=hc*Math.cos(I*Math.PI/180);G=hc*Math.sin(I*Math.PI/180)}if(Pb(n)&&j)var Gc=d.tb(Zb),Wb=a.Tx(c,d,Gc,new E(Gc.x+y*1E3,Gc.y+G*1E3),h)}H=a.Md(i,e,q,o,p,c,d);x=da=fa=0;if(p||q!==Tb||j){var Gb=Tl(a,e,q,o),x=Ul(a,i,
e,H,q,o,p,d);if(j){x=x+(p?0:30);qc<0&&(x=x+180)}x<0?x=x+360:x>=360&&(x=x-360);j&&(Gb=Gb+Math.abs(qc));if(x===0)fa=Gb;else if(x===90)da=Gb;else if(x===180)fa=-Gb;else if(x===270)da=-Gb;else{fa=Gb*Math.cos(x*Math.PI/180);da=Gb*Math.sin(x*Math.PI/180)}if(Pb(q)&&j){Gc=e.tb(Zb);H=a.Tx(i,e,Gc,new E(Gc.x+fa*1E3,Gc.y+da*1E3),o)}}ma=Wb;if(p||n!==Tb||j)ma=new E(Wb.x+y,Wb.y+G);e=H;if(p||q!==Tb||j)e=new E(H.x+fa,H.y+da);if(w||p||!Pb(n)||!(l>3&&Rl(a,0,Wb,l-2,e)))if(!w&&!p&&Pb(q)&&l>3&&Rl(a,1,ma,l-1,H))a.w(0,Wb);
else if(!w&&!p&&l>4&&Rl(a,1,ma,l-2,e)){a.w(0,Wb);a.w(l-1,H)}else if(!w&&p&&l>=6&&!Dd&&Rl(a,1,ma,l-2,e)){a.w(0,Wb);a.w(l-1,H)}else{a.Ym();a.Wc(Wb);(p||n!==Tb||j)&&a.Wc(ma);if(p)b:{y=ma;G=e;I=-45<=I&&I<45?0:45<=I&&I<135?90:135<=I&&I<225?180:270;x=-45<=x&&x<45?0:45<=x&&x<135?90:135<=x&&x<225?180:270;R=c.pa.copy();S=i.pa.copy();if(R.V()&&S.V()){R.jf(8,8);S.jf(8,8);R.Yu(y);S.Yu(G);ua=a.b;if(a.Te===Hf&&ua!==m&&!R.ea(G)&&!S.ea(y)&&c!==i&&!a.sa.Zc){if(ua.Jc===m)ua.Jc=new Vl;i=m;ua.Jc.pn||(i=a!==m?a.Sa:m);
if(ua.Jc.pn||ua.Jc.group!==i){if(i===m){ua.uj&&ei(ua,ua.Zd());ib=ua.qc.copy();ib.jf(100,100);Wl(ua.Jc,ib);for(db=ua.fk;db.next();){var Hb=db.value,Ib=Hb.sa;Ib===m||(!Ib.visible||Ib.Zc)||zi(ua,Hb)}}else{var Ce=i.pa.copy();Ce.jf(20,20);Wl(ua.Jc,Ce);for(var Oc=i.fc;Oc.next();){var nd=Oc.value;nd instanceof U&&zi(ua,nd)}}ua.Jc.group=i;ua.Jc.pn=o}else Xl(ua.Jc);var sa=ua.Jc,Hc=R.copy().mk(S);Hc.jf(sa.cl*2,sa.bl*2);Yl(sa,y,I,G,x,Hc);var xc=Zl(sa,G.x,G.y);if(!sa.abort&&xc===$l){Xl(sa);var ed=sa.cD;Hc.jf(sa.cl*
ed,sa.bl*ed);Yl(sa,y,I,G,x,Hc);xc=Zl(sa,G.x,G.y)}if(!sa.abort&&xc===$l){Xl(sa);ed=sa.bC;Hc.jf(sa.cl*ed,sa.bl*ed);Yl(sa,y,I,G,x,Hc);xc=Zl(sa,G.x,G.y)}if(!sa.abort&&xc===$l&&sa.AD){Xl(sa);Yl(sa,y,I,G,x,sa.hb);xc=Zl(sa,G.x,G.y)}if(!sa.abort&&xc<$l&&Zl(sa,G.x,G.y)!==0){am(a,sa,G.x,G.y,x,h);var rb=a.h(2);if(a.Y<4){if(I===0||I===180){rb.x=y.x;rb.y=G.y}else{rb.x=G.x;rb.y=y.y}a.w(2,rb);a.q(3,rb)}else{var yc=a.h(3);if(I===0||I===180)if(Ua(rb.x,yc.x)){var Ed=I===0?Math.max(rb.x,y.x):Math.min(rb.x,y.x);a.w(2,
new E(Ed,y.y));a.w(3,new E(Ed,yc.y))}else if(Ua(rb.y,yc.y)){if(Math.abs(y.y-rb.y)<=sa.bl/2){a.w(2,new E(rb.x,y.y));a.w(3,new E(yc.x,y.y))}a.q(2,new E(rb.x,y.y))}else a.w(2,new E(y.x,rb.y));else if(I===90||I===270)if(Ua(rb.y,yc.y)){var Fd=I===90?Math.max(rb.y,y.y):Math.min(rb.y,y.y);a.w(2,new E(y.x,Fd));a.w(3,new E(yc.x,Fd))}else if(Ua(rb.x,yc.x)){if(Math.abs(y.x-rb.x)<=sa.cl/2){a.w(2,new E(y.x,rb.y));a.w(3,new E(y.x,yc.y))}a.q(2,new E(y.x,rb.y))}else a.w(2,new E(rb.x,y.y))}break b}}var qa,Ea;if(I===
0)if(G.x>y.x||x===270&&G.y<y.y&&S.right>y.x||x===90&&G.y>y.y&&S.right>y.x){qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===180){qa.x=bm(a,y.x,G.x);Ea.x=qa.x;Ea.y=G.y}else if(x===270&&G.y<y.y||x===90&&G.y>y.y){qa.x=y.x<S.left?bm(a,y.x,S.left):y.x<S.right&&(x===270&&y.y<S.top||x===90&&y.y>S.bottom)?bm(a,y.x,G.x):S.right;Ea.x=qa.x;Ea.y=G.y}else if(x===0&&y.x<S.left&&y.y>S.top&&y.y<S.bottom){qa.x=y.x;qa.y=y.y<G.y?Math.min(G.y,S.top):Math.max(G.y,S.bottom);Ea.y=qa.y}}else{qa=new E(y.x,G.y);Ea=new E((y.x+
G.x)/2,G.y);if(x===180||x===90&&G.y<R.top||x===270&&G.y>R.bottom){if(x===180&&(S.ea(y)||R.ea(G)))qa.y=bm(a,y.y,G.y);else if(G.y<y.y&&(x===180||x===90))qa.y=bm(a,R.top,Math.max(G.y,S.bottom));else if(G.y>y.y&&(x===180||x===270))qa.y=bm(a,R.bottom,Math.min(G.y,S.top));Ea.x=G.x;Ea.y=qa.y}if(qa.y>R.top&&qa.y<R.bottom)if(G.x>=R.left&&G.x<=y.x||y.x<=S.right&&y.x>=G.x){if(x===90||x===270){qa=new E(Math.max((y.x+G.x)/2,y.x),y.y);Ea=new E(qa.x,G.y)}}else{qa.y=x===270||(x===0||x===180)&&G.y<y.y?Math.min(G.y,
x===0?R.top:Math.min(R.top,S.top)):Math.max(G.y,x===0?R.bottom:Math.max(R.bottom,S.bottom));Ea.x=G.x;Ea.y=qa.y}}else if(I===180)if(G.x<y.x||x===270&&G.y<y.y&&S.left<y.x||x===90&&G.y>y.y&&S.left<y.x){qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===0){qa.x=bm(a,y.x,G.x);Ea.x=qa.x;Ea.y=G.y}else if(x===270&&G.y<y.y||x===90&&G.y>y.y){qa.x=y.x>S.right?bm(a,y.x,S.right):y.x>S.left&&(x===270&&y.y<S.top||x===90&&y.y>S.bottom)?bm(a,y.x,G.x):S.left;Ea.x=qa.x;Ea.y=G.y}else if(x===180&&y.x>S.right&&y.y>S.top&&
y.y<S.bottom){qa.x=y.x;qa.y=y.y<G.y?Math.min(G.y,S.top):Math.max(G.y,S.bottom);Ea.y=qa.y}}else{qa=new E(y.x,G.y);Ea=new E((y.x+G.x)/2,G.y);if(x===0||x===90&&G.y<R.top||x===270&&G.y>R.bottom){if(x===0&&(S.ea(y)||R.ea(G)))qa.y=bm(a,y.y,G.y);else if(G.y<y.y&&(x===0||x===90))qa.y=bm(a,R.top,Math.max(G.y,S.bottom));else if(G.y>y.y&&(x===0||x===270))qa.y=bm(a,R.bottom,Math.min(G.y,S.top));Ea.x=G.x;Ea.y=qa.y}if(qa.y>R.top&&qa.y<R.bottom)if(G.x<=R.right&&G.x>=y.x||y.x>=S.left&&y.x<=G.x){if(x===90||x===270){qa=
new E(Math.min((y.x+G.x)/2,y.x),y.y);Ea=new E(qa.x,G.y)}}else{qa.y=x===270||(x===0||x===180)&&G.y<y.y?Math.min(G.y,x===180?R.top:Math.min(R.top,S.top)):Math.max(G.y,x===180?R.bottom:Math.max(R.bottom,S.bottom));Ea.x=G.x;Ea.y=qa.y}}else if(I===90)if(G.y>y.y||x===180&&G.x<y.x&&S.bottom>y.y||x===0&&G.x>y.x&&S.bottom>y.y){qa=new E(y.x,G.y);Ea=new E((y.x+G.x)/2,G.y);if(x===270){qa.y=bm(a,y.y,G.y);Ea.x=G.x;Ea.y=qa.y}else if(x===180&&G.x<y.x||x===0&&G.x>y.x){qa.y=y.y<S.top?bm(a,y.y,S.top):y.y<S.bottom&&
(x===180&&y.x<S.left||x===0&&y.x>S.right)?bm(a,y.y,G.y):S.bottom;Ea.x=G.x;Ea.y=qa.y}else if(x===90&&y.y<S.top&&y.x>S.left&&y.x<S.right){qa.x=y.x<G.x?Math.min(G.x,S.left):Math.max(G.x,S.right);qa.y=y.y;Ea.x=qa.x}}else{qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===270||x===0&&G.x<R.left||x===180&&G.x>R.right){if(x===270&&(S.ea(y)||R.ea(G)))qa.x=bm(a,y.x,G.x);else if(G.x<y.x&&(x===270||x===0))qa.x=bm(a,R.left,Math.max(G.x,S.right));else if(G.x>y.x&&(x===270||x===180))qa.x=bm(a,R.right,Math.min(G.x,
S.left));Ea.x=qa.x;Ea.y=G.y}if(qa.x>R.left&&qa.x<R.right)if(G.y>=R.top&&G.y<=y.y||y.y<=S.bottom&&y.y>=G.y){if(x===0||x===180){qa=new E(y.x,Math.max((y.y+G.y)/2,y.y));Ea=new E(G.x,qa.y)}}else{qa.x=x===180||(x===90||x===270)&&G.x<y.x?Math.min(G.x,x===90?R.left:Math.min(R.left,S.left)):Math.max(G.x,x===90?R.right:Math.max(R.right,S.right));Ea.x=qa.x;Ea.y=G.y}}else if(G.y<y.y||x===180&&G.x<y.x&&S.top<y.y||x===0&&G.x>y.x&&S.top<y.y){qa=new E(y.x,G.y);Ea=new E((y.x+G.x)/2,G.y);if(x===90){qa.y=bm(a,y.y,
G.y);Ea.x=G.x;Ea.y=qa.y}else if(x===180&&G.x<y.x||x===0&&G.x>=y.x){qa.y=y.y>S.bottom?bm(a,y.y,S.bottom):y.y>S.top&&(x===180&&y.x<S.left||x===0&&y.x>S.right)?bm(a,y.y,G.y):S.top;Ea.x=G.x;Ea.y=qa.y}else if(x===270&&y.y>S.bottom&&y.x>S.left&&y.x<S.right){qa.x=y.x<G.x?Math.min(G.x,S.left):Math.max(G.x,S.right);qa.y=y.y;Ea.x=qa.x}}else{qa=new E(G.x,y.y);Ea=new E(G.x,(y.y+G.y)/2);if(x===90||x===0&&G.x<R.left||x===180&&G.x>R.right){if(x===90&&(S.ea(y)||R.ea(G)))qa.x=bm(a,y.x,G.x);else if(G.x<y.x&&(x===90||
x===0))qa.x=bm(a,R.left,Math.max(G.x,S.right));else if(G.x>y.x&&(x===90||x===180))qa.x=bm(a,R.right,Math.min(G.x,S.left));Ea.x=qa.x;Ea.y=G.y}if(qa.x>R.left&&qa.x<R.right)if(G.y<=R.bottom&&G.y>=y.y||y.y>=S.top&&y.y<=G.y){if(x===0||x===180){qa=new E(y.x,Math.min((y.y+G.y)/2,y.y));Ea=new E(G.x,qa.y)}}else{qa.x=x===180||(x===90||x===270)&&G.x<y.x?Math.min(G.x,x===270?R.left:Math.min(R.left,S.left)):Math.max(G.x,x===270?R.right:Math.max(R.right,S.right));Ea.x=qa.x;Ea.y=G.y}}a.Wc(qa);a.Wc(Ea)}}(p||q!==
Tb||j)&&a.Wc(e);a.Wc(H)}}b=h}}}finally{a.Mv=o;b?a.Mh():a.oG()}}}function cm(a,b){if(Math.abs(b.x-a.x)>Math.abs(b.y-a.y)){b.x=b.x>=a.x?a.x+9E9:a.x-9E9;b.y=a.y}else{b.y=b.y>=a.y?a.y+9E9:a.y-9E9;b.x=a.x}return b}W.prototype.getLinkPointFromPoint=W.prototype.Tx=function(a,b,c,d){if(a===m||b===m)return c;if(!a.gb()){var e=il(a);if(e!==m&&e!==a)b=e.port}a=b.U===m?new Ya:b.U.Yd.copy();e=a.copy();e.zu();d=Ab(e,d);e=Ab(e,c);c=e.copy();b.xu(d,e,c);b=Ab(a,c);c.x=b.x;c.y=b.y;return c};
function dm(a,b){var c=a.fd;if(c===m){c=new em;c.port=a;c.Xg=a.W;a.fd=c}return fm(c,b)}W.prototype.getLinkPoint=W.prototype.Md=function(a,b,c,d,e,g,i){if(Nb(c))return c=b.tb(c);if(Ob(c)){c=dm(b,this);if(c!==m)return c=c.xn}c=b.tb(Zb);if(this.Y>(e?6:2)){i=d?this.h(1):this.h(this.Y-2);e&&(i=cm(c,i.copy()))}else{i=i.tb(Zb);e&&(i=cm(c,i))}return this.Tx(a,b,c,i,d)};
function Ul(a,b,c,d,e,g,i,j){a:if(Nb(e))d=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:e.x<0.5?225:e.x>0.5?45:0;else{if(Ob(e)){e=dm(c,a);if(e!==m)switch(e.Bd){case u.Nc:d=270;break a;case u.tc:d=180;break a;default:case u.Ec:d=0;break a;case u.Dc:d=90;break a}}e=c.tb(Zb);if(a.Y>(i?6:2)){j=g?a.h(1):a.h(a.Y-2);j=i?cm(e,j.copy()):d}else j=j.tb(Zb);d=Math.abs(j.x-e.x)>Math.abs(j.y-e.y)?j.x>=e.x?0:180:j.y>=e.y?90:270}i=rl;i=g?a.ir:a.Ur;i===rl&&(i=g?c.ir:c.Ur);switch(i){case sl:a=
b.Ka;d=d+a;d>=360&&(d=d-360);break;case rl:case Mi:a=b.Ka;if(a===0)break;45<=a&&a<135?d=d+90:135<=a&&a<225?d=d+180:225<=a&&a<315&&(d=d+270);d>=360&&(d=d-360)}return d}function Tl(a,b,c,d){if(Ob(c)){c=dm(b,a);if(c!==m)return c.nu}c=NaN;c=d?a.ak:a.jk;isNaN(c)&&(c=d?b.ak:b.jk);isNaN(c)&&(c=10);return c}function Pl(a,b){var c=a.Ua;if(Qb(c)){if(b===f)b=a.Ac;if(b!==m)c=b.Ua}return c===Ub?Tb:c}function Ql(a,b){var c=a.Wa;if(Qb(c)){if(b===f)b=a.md;if(b!==m)c=b.Wa}return c===Ub?Tb:c}
function gm(a){var b=a.jr;if(isNaN(b)){a=a.Ac;if(a!==m)b=a.jr}return isNaN(b)?0:b}function hm(a){var b=a.Vr;if(isNaN(b)){a=a.md;if(a!==m)b=a.Vr}return isNaN(b)?0:b}function ug(a){a=a.Te;return a===oh||a===Hf}function Kl(a){if(a.nh===m){var b=ug(a);a.nh=a.Ac===a.md&&!b}return a.nh?Gj:a.Ie}function im(a){if(a.Ie===Gj)return 0;a=a.eB;if(isNaN(a)||a<0)a=10;return a}
function Sl(a){var b=a.hu;if(isNaN(b)){var c=a.Cd;if(c!==0){b=a.uk;b=b!==m?b.Ti:10;a=Math.abs(c);b=b/2+((a-1)/2|0)*b;a%2===0&&(b=-b);c<0&&(b=-b)}else b=10}return b}
function Rl(a,b,c,d,e){var g=a.Wt;if(ug(a)){if(g===Kj)return o;g===Lj&&(g=Jj)}switch(g){case Kj:var i=a.h(b),j=a.h(d);if(!i.u(c)||!j.u(e)){var g=i.x,i=i.y,k=j.x-g,l=j.y-i,n=Math.sqrt(k*k+l*l);if(!Ua(n,0)){var q;if(Ua(k,0))q=l<0?-Math.PI/2:Math.PI/2;else{q=Math.atan(l/Math.abs(k));k<0&&(q=Math.PI-q)}var j=c.x,p=c.y,k=e.x-j,t=e.y-p,l=Math.sqrt(k*k+t*t);if(Ua(k,0))t=t<0?-Math.PI/2:Math.PI/2;else{t=Math.atan(t/Math.abs(k));k<0&&(t=Math.PI-t)}n=l/n;q=t-q;a.w(b,c);for(b=b+1;b<d;b++){c=a.h(b);k=c.x-g;l=
c.y-i;c=Math.sqrt(k*k+l*l);if(!Ua(c,0)){if(Ua(k,0))l=l<0?-Math.PI/2:Math.PI/2;else{l=Math.atan(l/Math.abs(k));k<0&&(l=Math.PI-l)}k=l+q;c=c*n;a.w(b,new E(j+c*Math.cos(k),p+c*Math.sin(k)))}}a.w(d,e)}}return h;case Lj:i=a.h(b);p=a.h(d);if(!i.u(c)||!p.u(e)){g=i.x;i=i.y;j=p.x;p=p.y;n=(j-g)*(j-g)+(p-i)*(p-i);k=c.x;q=c.y;var l=e.x,t=e.y,w=0,A=1,w=l-k!==0?(t-q)/(l-k):9E9;w!==0&&(A=Math.sqrt(1+1/(w*w)));a.w(b,c);for(b=b+1;b<d;b++){var c=a.h(b),F=c.x,H=c.y,x=0.5;n!==0&&(x=((g-F)*(g-j)+(i-H)*(i-p))/n);var I=
g+x*(j-g),y=i+x*(p-i),c=Math.sqrt((F-I)*(F-I)+(H-y)*(H-y));H<w*(F-I)+y&&(c=-c);w>0&&(c=-c);F=k+x*(l-k);x=q+x*(t-q);if(w!==0){c=F+c/A;a.w(b,new E(c,x-(c-F)/w))}else a.w(b,new E(F,x+c))}a.w(d,e)}return h;case Jj:if(ug(a)){g=a.h(b+1);i=a.h(b+2);Ua(g.x,i.x)&&!Ua(g.y,i.y)?a.w(b+1,new E(g.x,c.y)):Ua(g.y,i.y)&&a.w(b+1,new E(c.x,g.y));g=a.h(d-1);i=a.h(d-2);Ua(g.x,i.x)&&!Ua(g.y,i.y)?a.w(d-1,new E(g.x,e.y)):Ua(g.y,i.y)&&a.w(d-1,new E(e.x,g.y))}a.w(b,c);a.w(d,e);return h;default:return o}}
function bm(a,b,c){return!isNaN(a.hu)||a.Cd!==0&&!ug(a)?(b+c)/2+Sl(a):(b+c)/2}
function am(a,b,c,d,e,g){var i=b.cl,j=b.bl,k=Zl(b,c,d),l=c,n=d;for(e===0?l=l+i:e===90?n=n+j:e===180?l=l-i:n=n-j;k>jm&&Zl(b,l,n)===k-km;){c=l;d=n;e===0?l=l+i:e===90?n=n+j:e===180?l=l-i:n=n-j;k=k-km}if(g){if(k>jm)if(e===180||e===0)c=Math.floor(c/i)*i+i/2;else if(e===90||e===270)d=Math.floor(d/j)*j+j/2}else{c=Math.floor(c/i)*i+i/2;d=Math.floor(d/j)*j+j/2}if(k>jm){g=e;l=c;n=d;if(e===0){g=90;n=n+j}else if(e===90){g=180;l=l-i}else if(e===180){g=270;n=n-j}else if(e===270){g=0;l=l+i}if(Zl(b,l,n)===k-km)am(a,
b,l,n,g,o);else{l=c;n=d;if(e===0){g=270;n=n-j}else if(e===90){g=0;l=l+i}else if(e===180){g=90;n=n+j}else if(e===270){g=180;l=l-i}Zl(b,l,n)===k-km&&am(a,b,l,n,g,o)}}a.Wc(new E(c,d))}W.prototype.findClosestSegment=W.prototype.wI=function(a){s&&u.c(a,E,W,"findClosestSegment:p");for(var b=a.x,a=a.y,c=this.h(0),d=this.h(1),e=bb(b,a,c.x,c.y,d.x,d.y),g=0,i=1;i<this.Y-1;i++){var c=this.h(i+1),j=bb(b,a,d.x,d.y,c.x,c.y),d=c;if(j<e){g=i;e=j}}return g};W.prototype.Ye=function(){this.$b=this.ua=m;this.L()};
u.m(W,{kr:"geometry"},function(){if(this.ua===m){Jl(this);this.ua=lm(this)}return this.ua});function ki(a){if(a.ua===m&&a.Xk!==o){a.ua=lm(a);var b=a.So();if(b!==m){b.ua=a.ua;for(var c=a.wa,d=c.length,e=0;e<d;e++){var g=c.j[e];if(g!==b&&g.Mi&&g instanceof X)g.ua=a.ua}}}}
function lm(a){var b=a.Y;if(b<2){var a=new md(yd),c=new zd(0,0);a.rc.add(c);return a}var d,e=a.h(0).copy(),g=new E(Infinity,Infinity);g.x=Math.min(e.x,g.x);g.y=Math.min(e.y,g.y);var i=Kl(a);if(i===Gj&&b>=3&&!Sa(a.Rr,0))if(b===3){var j=a.h(2).copy(),c=Math.min(e.x,j.x);d=Math.min(e.y,j.y)}else{if(ug(a))for(j=0;j<b;j++){c=a.zc.j[j];g.x=Math.min(c.x,g.x);g.y=Math.min(c.y,g.y)}else for(var k,j=3;j<b;j=j+3){j+3>=b&&(j=b-1);k=a.h(j);g.x=Math.min(k.x,g.x);g.y=Math.min(k.y,g.y)}c=g.x;d=g.y}else{for(j=0;j<
b;j++){c=a.zc.j[j];g.x=Math.min(c.x,g.x);g.y=Math.min(c.y,g.y)}c=g.x;d=g.y}c=c-a.Nt.x;d=d-a.Nt.y;e.x=e.x-c;e.y=e.y-d;if(b===2){var l=a.h(1).copy();l.x=l.x-c;l.y=l.y-d;gm(a)!==0&&mm(a,e,h,g);hm(a)!==0&&mm(a,l,o,g);a=new md(Bd);a.La=e.x;a.Ma=e.y;a.aa=l.x;a.ba=l.y;return a}l=new L;gm(a)!==0&&mm(a,e,h,g);M(l,e.x,e.y,o,o);if(i===Gj&&b>=3&&!Sa(a.Rr,0))if(b===3){j=a.h(1);b=j.x-c;e=j.y-d;j=a.h(2).copy();j.x=j.x-c;j.y=j.y-d;hm(a)!==0&&mm(a,j,o,g);N(l,b,e,b,e,j.x,j.y)}else if(ug(a)){e=new E(c,d);i=a.h(1).copy();
k=new E(c,d);for(var b=new E(c,d),g=a.h(0),n=m,q=a.Rr/3,j=1;j<a.Y-1;j++){var n=a.h(j),p=g,t=n,w=a.h(nm(a,n,j,o));if(!Sa(p.x,t.x)||!Sa(t.x,w.x))if(!Sa(p.y,t.y)||!Sa(t.y,w.y)){var A=q,F=k,H=b;isNaN(A)&&(A=a.Rr/3);var x=p.x,p=p.y,I=t.x,t=t.y,y=w.x,w=w.y,G=A*om(x,p,I,t),A=A*om(I,t,y,w);if(Sa(p,t)&&Sa(I,y))if(I>x)if(w>t){F.x=I-G;F.y=t-G;H.x=I+A;H.y=t+A}else{F.x=I-G;F.y=t+G;H.x=I+A;H.y=t-A}else if(w>t){F.x=I+G;F.y=t-G;H.x=I-A;H.y=t+A}else{F.x=I+G;F.y=t+G;H.x=I-A;H.y=t-A}if(Sa(x,I)&&Sa(t,w))if(t>p){if(y>
I){F.x=I-G;F.y=t-G;H.x=I+A}else{F.x=I+G;F.y=t-G;H.x=I-A}H.y=t+A}else{if(y>I){F.x=I-G;F.y=t+G;H.x=I+A}else{F.x=I+G;F.y=t+G;H.x=I-A}H.y=t-A}if(Sa(x,I)&&Sa(I,y)||Sa(p,t)&&Sa(t,w)){x=0.5*(x+y);p=0.5*(p+w);F.x=x;F.y=p;H.x=x;H.y=p}if(j===1){i.x=(g.x+n.x)*0.5;i.y=(g.y+n.y)*0.5}else if(j===2&&Sa(g.x,a.h(0).x)&&Sa(g.y,a.h(0).y)){i.x=(g.x+n.x)*0.5;i.y=(g.y+n.y)*0.5}N(l,i.x-c,i.y-d,k.x-c,k.y-d,n.x-c,n.y-d);e.set(k);i.set(b);g=n}}j=g.x;g=g.y;a=a.h(a.Y-1);j=0.5*(j+a.x);g=0.5*(g+a.y);N(l,b.x-c,b.y-d,j-c,g-d,a.x-
c,a.y-d)}else for(j=3;j<b;j=j+3){g=a.h(j-2);j+3>=b&&(j=b-1);e=a.h(j-1);k=a.h(j);if(j===b-1&&hm(a)!==0){k=k.copy();mm(a,k,o,Dc)}N(l,g.x-c,g.y-d,e.x-c,e.y-d,k.x-c,k.y-d)}else{n=a.h(0);for(j=1;j<b;){j=nm(a,n,j,j>1);q=a.h(j);if(j>=b-1){if(n!==q){if(hm(a)!==0){q=q.copy();mm(a,q,o,Dc)}pm(a,l,-c,-d,n,q)}break}j=nm(a,q,j+1,j<b-3);g=a;e=l;i=-c;k=-d;F=a.h(j);if(Ua(n.y,q.y)&&Ua(q.x,F.x)){H=im(g);H=Math.min(H,Math.abs(q.x-n.x)/2);H=x=Math.min(H,Math.abs(F.y-q.y)/2);if(Ua(H,0)){pm(g,e,i,k,n,q);n=q}else{p=q.x;
A=q.y;I=p;t=A;p=q.x>n.x?q.x-H:q.x+H;t=F.y>q.y?q.y+x:q.y-x;pm(g,e,i,k,n,new E(p,A));Pd(e,q.x+i,q.y+k,I+i,t+k);n=new E(I,t)}}else if(Ua(n.x,q.x)&&Ua(q.y,F.y)){H=im(g);x=Math.min(H,Math.abs(q.y-n.y)/2);x=H=Math.min(x,Math.abs(F.x-q.x)/2);if(Ua(H,0)){pm(g,e,i,k,n,q);n=q}else{p=q.x;t=A=q.y;A=q.y>n.y?q.y-x:q.y+x;I=F.x>q.x?q.x+H:q.x-H;pm(g,e,i,k,n,new E(p,A));Pd(e,q.x+i,q.y+k,I+i,t+k);n=new E(I,t)}}else{pm(g,e,i,k,n,q);n=q}}}return l.k}
function om(a,b,c,d){a=c-a;if(isNaN(a)||a===Infinity||a===-Infinity)return NaN;a<0&&(a=-a);b=d-b;if(isNaN(b)||b===Infinity||b===-Infinity)return NaN;b<0&&(b=-b);return Sa(a,0)?b:Sa(b,0)?a:Math.sqrt(a*a+b*b)}
function mm(a,b,c,d){var e=a.Y;if(!(e<2))if(c){var g=a.h(1),c=g.x-d.x,d=g.y-d.y,g=om(b.x,b.y,c,d);if(g!==0){e=e===2?g*0.5:g;a=gm(a);a>e&&(a=e);c=a*(c-b.x)/g;a=a*(d-b.y)/g;b.x=b.x+c;b.y=b.y+a}}else{g=a.h(e-2);c=g.x-d.x;d=g.y-d.y;g=om(b.x,b.y,c,d);if(g!==0){e=e===2?g*0.5:g;a=hm(a);a>e&&(a=e);c=a*(b.x-c)/g;a=a*(b.y-d)/g;b.x=b.x-c;b.y=b.y-a}}}
function nm(a,b,c,d){for(var e=a.Y,g=b;Sa(b.x,g.x)&&Sa(b.y,g.y);){if(c>=e)return e-1;g=a.h(c++)}if(!Sa(b.x,g.x)&&!Sa(b.y,g.y))return c-1;for(var i=g;Sa(b.x,g.x)&&Sa(g.x,i.x)&&(!d||(b.y>=g.y?g.y>=i.y:g.y<=i.y))||Sa(b.y,g.y)&&Sa(g.y,i.y)&&(!d||(b.x>=g.x?g.x>=i.x:g.x<=i.x));){if(c>=e)return e-1;i=a.h(c++)}return c-2}
function pm(a,b,c,d,e,g){if(qm(a)){var i=new z("number"),j;a:{j=a.b;if(j===m)j=0;else{Math.min(e.x,g.x);Math.min(e.y,g.y);Math.max(e.x,g.x);Math.max(e.y,g.y);for(j=j.vr;j.next();){var k=j.value;if(k!==m&&k.visible)for(k=k.Qi;k.next();){var l=k.value;if(l===a){i.length>0&&i.sort(function(a,b){return a-b});j=i.length;break a}if(l instanceof W&&a.gb()&&l.gb()&&qm(l)&&a.oj().de(l.oj())&&!(a.da===l.da||a.fa===l.fa)){var n=l.path;if(n!==m&&n.dk())for(var n=e,q=g,p=i,t=l.Y,w=1;w<t;w++){var A=l.h(w-1),F=
l.h(w),H=new E,x;b:{x=n;var I=q,y=H;if(Ua(x.x,I.x)){if(Ua(A.y,F.y)&&Math.min(x.y,I.y)<A.y&&Math.max(x.y,I.y)>A.y&&Math.min(A.x,F.x)<x.x&&Math.max(A.x,F.x)>x.x){y.x=x.x;y.y=A.y;x=h;break b}}else if(Ua(A.x,F.x)&&Math.min(x.x,I.x)<A.x&&Math.max(x.x,I.x)>A.x&&Math.min(A.y,F.y)<x.y&&Math.max(A.y,F.y)>x.y){y.x=A.x;y.y=x.y;x=h;break b}y.x=0;y.y=0;x=o}x&&(Ua(n.y,q.y)?p.add(H.x):p.add(H.y))}}}}i.length>0&&i.sort(function(a,b){return a-b});j=i.length}}n=e.x;n=e.y;if(j>0)if(Ua(e.y,g.y))if(e.x<g.x)for(k=0;k<
j;){p=Math.max(e.x,Math.min(i.j[k++]-5,g.x-10));b.lineTo(p+c,g.y+d);n=p+c;for(q=Math.min(p+10,g.x);k<j;){l=i.j[k];if(l<q+10){k++;q=Math.min(l+5,g.x)}else break}l=(p+q)/2+c;l=g.y-10+d;p=q+c;q=g.y+d;a.Ie===Hj?M(b,p,q,o,o):N(b,n,l,p,l,p,q)}else for(k=j-1;k>=0;){p=Math.min(e.x,Math.max(i.j[k--]+5,g.x+10));b.lineTo(p+c,g.y+d);n=p+c;for(q=Math.max(p-10,g.x);k>=0;){l=i.j[k];if(l>q-10){k--;q=Math.max(l-5,g.x)}else break}l=g.y-10+d;p=q+c;q=g.y+d;a.Ie===Hj?M(b,p,q,o,o):N(b,n,l,p,l,p,q)}else if(Ua(e.x,g.x))if(e.y<
g.y)for(k=0;k<j;){p=Math.max(e.y,Math.min(i.j[k++]-5,g.y-10));b.lineTo(g.x+c,p+d);n=p+d;for(q=Math.min(p+10,g.y);k<j;){l=i.j[k];if(l<q+10){k++;q=Math.min(l+5,g.y)}else break}l=g.x-10+c;p=g.x+c;q=q+d;a.Ie===Hj?M(b,p,q,o,o):N(b,l,n,l,q,p,q)}else for(k=j-1;k>=0;){p=Math.min(e.y,Math.max(i.j[k--]+5,g.y+10));b.lineTo(g.x+c,p+d);n=p+d;for(q=Math.max(p-10,g.y);k>=0;){l=i.j[k];if(l>q-10){k--;q=Math.max(l-5,g.y)}else break}l=g.x-10+c;p=g.x+c;q=q+d;a.Ie===Hj?M(b,p,q,o,o):N(b,l,n,l,q,p,q)}}b.lineTo(g.x+c,g.y+
d)}u.m(W,{tu:"firstPickIndex"},function(){return this.Y<=2?0:ug(this)||Pl(this)!==Tb?1:0});u.m(W,{hy:"lastPickIndex"},function(){var a=this.Y;return a===0?0:a<=2?a-1:ug(this)||Ql(this)!==Tb?a-2:a-1});function qm(a){a=a.Ie;return a===Ij||a===Hj}function Ol(a,b){if(b||qm(a)){var c=a.b;c!==m&&(!c.Yl.contains(a)&&a.Hw!==m)&&c.Yl.add(a,a.Hw)}}
function og(a,b){var c=a.sa;if(!(c===m||!c.visible||c.Zc)){var d=c.b;if(d!==m)for(var e=o,d=d.vr;d.next();){var g=d.value;if(g.visible)if(g===c)for(var e=h,i=o,g=g.Qi;g.next();){var j=g.value;j instanceof W&&(j===a?i=h:i&&rm(a,j,b))}else if(e)for(g=g.Qi;g.next();){j=g.value;j instanceof W&&rm(a,j,b)}}}}function rm(a,b,c){if(b!==m&&qm(b)&&b.ua!==m&&(a.oj().de(b.oj())||c.de(b.oj())))a.da===b.da||a.fa===b.fa||b.Ye()}u.a(W,"adjusting",W.prototype.Wt);
u.defineProperty(W,{Wt:"adjusting"},r("ao"),function(a){var b=this.ao;if(b!==a){s&&u.Ra(a,W,W,"adjusting");this.ao=a;this.d("adjusting",b,a)}});u.a(W,"corner",W.prototype.eB);u.defineProperty(W,{eB:"corner"},r("po"),function(a){var b=this.po;if(b!==a){s&&u.e(a,"number",W,"corner");this.po=a;this.Ye();this.d("corner",b,a)}});u.a(W,"curve",W.prototype.Ie);
u.defineProperty(W,{Ie:"curve"},r("ro"),function(a){var b=this.ro;if(b!==a){s&&u.Ra(a,W,W,"curve");this.ro=a;If(this);Ol(this,b===Hj||b===Ij||a===Hj||a===Ij);this.d("curve",b,a)}});u.a(W,"curviness",W.prototype.hu);u.defineProperty(W,{hu:"curviness"},r("so"),function(a){var b=this.so;if(b!==a){s&&u.e(a,"number",W,"curviness");this.so=a;If(this);this.d("curviness",b,a)}});u.a(W,"routing",W.prototype.Te);
u.defineProperty(W,{Te:"routing"},r("si"),function(a){var b=this.si;if(b!==a){s&&u.Ra(a,W,W,"routing");this.si=a;this.nh=m;If(this);Ol(this,b===oh||b===Hf||a===oh||a===Hf);this.d("routing",b,a)}});u.a(W,"smoothness",W.prototype.Rr);u.defineProperty(W,{Rr:"smoothness"},r("tq"),function(a){var b=this.tq;if(b!==a){s&&u.e(a,"number",W,"smoothness");this.tq=a;this.Ye();this.d("smoothness",b,a)}});
function Il(a){var b=a.pg;if(b!==m){var c=a.Hg;if(c!==m){var d=a.gi,a=a.wi,e;a:{if(!(c===m||b.kg===m))for(e=b.kg.f;e.next();){var g=e.value;if(g.En===b&&g.Er===c&&g.Hu===d&&g.Iu===a||g.En===c&&g.Er===b&&g.Hu===a&&g.Iu===d){e=g;break a}}e=m}for(var i=g=m,j=b.pd.j,k=j.length,l=0;l<k;l++){var n=j[l];if(n.pg===b&&n.gi===d&&n.Hg===c&&n.wi===a||n.pg===c&&n.gi===a&&n.Hg===b&&n.wi===d)if(i===m)i=n;else{if(g===m){g=new z(W);g.add(i)}g.add(n)}}if(g!==m){if(e===m){e=new ul;e.En=b;e.Hu=d;e.Er=c;e.Iu=a;tl(b,e);
tl(c,e)}e.links=g;for(l=0;l<g.count;l++){n=g.j[l];if(n.Cd===0){b=1;for(c=0;c<g.count;c++)if(Math.abs(g.j[c].Cd)===b){b++;c=-1}n.uk=e;n.Cd=n.da===e.En?b:-b;If(n)}}}}}}
function Hl(a){var b=a.uk;if(b!==m){var c=a.Cd;a.uk=m;a.Cd=0;If(a);b.links.remove(a);if(b.links.count<2){if(b.links.count===1){c=b.links.j[0];c.uk=m;c.Cd=0;If(c)}c=b.En;b!==m&&c.kg!==m&&c.kg.remove(b);c=b.Er;b!==m&&c.kg!==m&&c.kg.remove(b)}else{c=Math.abs(c);a=c%2===0;for(b=b.links.f;b.next();){var d=b.value,e=Math.abs(d.Cd),g=e%2===0;if(e>c&&a===g){d.Cd=d.Cd>0?d.Cd-2:d.Cd+2;If(d)}}}}}function ul(){u.Gb(this);this.links=this.Iu=this.Er=this.Hu=this.En=m;this.Ti=10}
u.kd(ul,{En:h,Hu:h,Er:h,Iu:h,links:h,Ti:h});function Vl(){u.Gb(this);this.group=m;this.pn=h;this.abort=o;this.yg=this.xg=1;this.Zs=this.Ys=-1;this.Ed=this.Dd=8;this.xb=m;this.AD=o;this.cD=22;this.bC=111}u.kd(Vl,{group:h,pn:h,abort:h,AD:h,cD:h,bC:h});var jm=1,km=1,$l=999999999,sm=$l;
function Wl(a,b){if(!(b.width<=0||b.height<=0)){var c=b.y,d=b.x+b.width,e=b.y+b.height;a.xg=Math.floor((b.x-a.Dd)/a.Dd)*a.Dd;a.yg=Math.floor((c-a.Ed)/a.Ed)*a.Ed;a.Ys=Math.ceil((d+2*a.Dd)/a.Dd)*a.Dd;a.Zs=Math.ceil((e+2*a.Ed)/a.Ed)*a.Ed;c=1+(Math.ceil((a.Ys-a.xg)/a.Dd)|0);d=1+(Math.ceil((a.Zs-a.yg)/a.Ed)|0);if(a.xb===m||a.Kq<c-1||a.Lq<d-1){for(var e=[],g=0;g<=c;g++){for(var i=[],j=0;j<=d;j++)i[j]=0;e[g]=i}a.xb=e;a.Kq=c-1;a.Lq=d-1}if(a.xb!==m)for(c=0;c<=a.Kq;c++)for(d=0;d<=a.Lq;d++)a.xb[c][d]=sm}}
u.m(Vl,{hb:m},function(){return new J(this.xg,this.yg,this.Ys-this.xg,this.Zs-this.yg)});u.a(Vl,"cellWidth",Vl.prototype.cl);u.defineProperty(Vl,{cl:m},r("Dd"),function(a){if(a>0&&a!==this.Dd){this.Dd=a;Wl(this,this.hb)}});u.a(Vl,"cellHeight",Vl.prototype.bl);u.defineProperty(Vl,{bl:m},r("Ed"),function(a){if(a>0&&a!==this.Ed){this.Ed=a;Wl(this,this.hb)}});function tm(a,b,c){return a.xg<=b&&b<=a.Ys&&a.yg<=c&&c<=a.Zs}
function Zl(a,b,c){if(!tm(a,b,c))return 0;b=b-a.xg;b=b/a.Dd;c=c-a.yg;c=c/a.Ed;return a.xb[b|0][c|0]}function Ai(a,b,c){if(tm(a,b,c)){b=b-a.xg;b=b/a.Dd;c=c-a.yg;c=c/a.Ed;a.xb[b|0][c|0]=0}}function Xl(a){if(a.xb!==m)for(var b=0;b<=a.Kq;b++)for(var c=0;c<=a.Lq;c++)a.xb[b][c]>=jm&&(a.xb[b][c]=a.xb[b][c]|$l)}
function um(a,b,c,d,e,g,i,j,k){if(!(b<g||b>i||c<j||c>k)){var l,n;l=b|0;n=c|0;var q=a.xb[l][n];if(q>=jm&&q<$l){e?n=n+d:l=l+d;for(q=q+km;g<=l&&l<=i&&j<=n&&n<=k;){if(q>=a.xb[l][n])break;a.xb[l][n]=q;q=q+km;e?n=n+d:l=l+d}}l=e?n:l;if(e)if(d>0)for(c=c+d;c<l;c=c+d){um(a,b,c,1,!e,g,i,j,k);um(a,b,c,-1,!e,g,i,j,k)}else for(c=c+d;c>l;c=c+d){um(a,b,c,1,!e,g,i,j,k);um(a,b,c,-1,!e,g,i,j,k)}else if(d>0)for(b=b+d;b<l;b=b+d){um(a,b,c,1,!e,g,i,j,k);um(a,b,c,-1,!e,g,i,j,k)}else for(b=b+d;b>l;b=b+d){um(a,b,c,1,!e,g,
i,j,k);um(a,b,c,-1,!e,g,i,j,k)}}}function vm(a,b,c,d,e,g,i,j,k,l,n){for(var q=b|0,p=c|0,t=a.xb[q][p];t===0&&q>j&&q<k&&p>l&&p<n;){i?p=p+g:q=q+g;t=a.xb[q][p];if(Math.abs(q-d)<=1&&Math.abs(p-e)<=1){a.abort=h;return 0}}q=b|0;p=c|0;t=a.xb[q][p];b=jm;for(a.xb[q][p]=b;t===0&&q>j&&q<k&&p>l&&p<n;){i?p=p+g:q=q+g;t=a.xb[q][p];a.xb[q][p]=b;b=b+km}return i?p:q}
function Yl(a,b,c,d,e,g){if(a.xb!==m){a.abort=o;var i=b.x,j=b.y;if(tm(a,i,j)){var i=i-a.xg,i=i/a.Dd,j=j-a.yg,j=j/a.Ed,k=d.x,l=d.y;if(tm(a,k,l)){k=k-a.xg;k=k/a.Dd;l=l-a.yg;l=l/a.Ed;if(Math.abs(i-k)<=1&&Math.abs(j-l)<=1)a.abort=h;else{var n=g.x,b=g.y,d=g.x+g.width,q=g.y+g.height,n=n-a.xg,n=n/a.Dd,b=b-a.yg,b=b/a.Ed,d=d-a.xg,d=d/a.Dd,q=q-a.yg,q=q/a.Ed,g=Math.max(0,Math.min(a.Kq,n|0)),d=Math.min(a.Kq,Math.max(0,d|0)),b=Math.max(0,Math.min(a.Lq,b|0)),q=Math.min(a.Lq,Math.max(0,q|0)),i=i|0,j=j|0,k=k|0,l=
l|0,n=i,p=j,t=c===0||c===90?1:-1;(c=c===90||c===270)?p=vm(a,i,j,k,l,t,c,g,d,b,q):n=vm(a,i,j,k,l,t,c,g,d,b,q);if(!a.abort){a:{for(var c=e===0||e===90?1:-1,e=e===90||e===270,t=k|0,w=l|0,A=a.xb[t][w];A===0&&t>g&&t<d&&w>b&&w<q;){e?w=w+c:t=t+c;A=a.xb[t][w];if(Math.abs(t-i)<=1&&Math.abs(w-j)<=1){a.abort=h;break a}}t=k|0;w=l|0;A=a.xb[t][w];for(a.xb[t][w]=sm;A===0&&t>g&&t<d&&w>b&&w<q;){e?w=w+c:t=t+c;A=a.xb[t][w];a.xb[t][w]=sm}}if(!a.abort){um(a,n,p,1,o,g,d,b,q);um(a,n,p,-1,o,g,d,b,q);um(a,n,p,1,h,g,d,b,q);
um(a,n,p,-1,h,g,d,b,q)}}}}}}}function em(){u.Gb(this);this.pf=this.port=this.Xg=m;this.Dr=o}u.kd(em,{Xg:h,port:h,pf:h,Dr:h});em.prototype.toString=function(){for(var a=this.pf,b=this.Xg.toString()+" "+a.length.toString()+":",c=0;c<a.length;c++){var d=a[c];d!==m&&(b=b+("\n  "+d.toString()))}return b};
function wm(a,b,c,d){b=b.offsetY;switch(b){case u.Dc:return 90;case u.tc:return 180;case u.Nc:return 270;case u.Ec:return 0}switch(b){case u.Dc|u.Nc:return c>180?270:90;case u.tc|u.Ec:return c>90&&c<=270?180:0}a=Math.atan2(a.height,a.width)*180/Math.PI;switch(b){case u.tc|u.Nc:return c>a&&c<=180+a?180:270;case u.Nc|u.Ec:return c>180-a&&c<=360-a?270:0;case u.Ec|u.Dc:return c>a&&c<=180+a?90:0;case u.Dc|u.tc:return c>180-a&&c<=360-a?180:90;case u.tc|u.Nc|u.Ec:return c>90&&c<=180+a?180:c>180+a&&c<=360-
a?270:0;case u.Nc|u.Ec|u.Dc:return c>180&&c<=360-a?270:c>a&&c<=180?90:0;case u.Ec|u.Dc|u.tc:return c>a&&c<=180-a?90:c>180-a&&c<=270?180:0;case u.Dc|u.tc|u.Nc:return c>180-a&&c<=180+a?180:c>180+a?270:90}if(d&&b!==(u.tc|u.Nc|u.Ec|u.Dc)){c=c-15;c<0&&(c=c+360)}return c>a&&c<180-a?90:c>=180-a&&c<=180+a?180:c>180+a&&c<360-a?270:0}
function fm(a,b){var c=a.pf;if(c===m){if(!a.Dr){c=a.Dr;a.Dr=h;var d=a.Xg.ge;a.pf=[];for(var e=0,g=new J(a.port.tb(Vb),a.port.tb(fc)),d=d.f;d.next();){var i=d.value;if(i.gb()){var j=Tb,j=i.Ac===a.port?Pl(i,a.port):Ql(i,a.port);if(Ob(j)){var k;k=i.Ac===a.port?i.md:i.Ac;if(k!==m&&k.W!==m){var l=k.tb(Zb);k=k.fd;k=k!==m?fm(k,i):m;if(k!==m)l=k.xn;k=g.au.Oh(l);var j=wm(g,j,k,ug(i)),n;if(j===0){n=u.Ec;k>180&&(k=k-360)}else n=j===90?u.Dc:j===180?u.tc:u.Nc;if(j=a.pf[e]){j.link=i;j.Ka=k;j.Bd=n}else{j=new xm(i,
k,n);a.pf[e]=j}j.Gu.set(l);e++}}}}a.pf.sort(em.prototype.XF);g=a.pf.length;d=-1;for(e=i=0;e<g;e++){j=a.pf[e];if(j!==m){if(j.Bd!==d){d=j.Bd;i=0}j.ol=i;i++}}d=-1;i=0;for(e=g-1;e>=0;e--){j=a.pf[e];if(j!==m){if(j.Bd!==d){d=j.Bd;i=j.ol+1}j.$q=i}}e=a.pf;for(g=0;g<e.length;g++){d=e[g];if(d!==m){l=d;j=a.port;i=d=f;switch(l.Bd){case u.Dc:d=j.tb(fc);i=j.tb(dc);break;case u.tc:d=j.tb(dc);i=j.tb(Vb);break;case u.Nc:d=j.tb(Vb);i=j.tb(Yb);break;default:case u.Ec:d=j.tb(Yb);i=j.tb(fc)}j=i.y-d.y;k=(l.ol+1)/(l.$q+
1);l=l.xn;l.x=d.x+(i.x-d.x)*k;l.y=d.y+j*k}}e=a.pf;for(g=0;g<e.length;g++){i=e[g];if(i!==m){d=i;k=i;n=k.link;i=Tl(n,a.port,Tb,n.Ac===a.port);l=k.ol;if(!(l<0)){j=k.$q;if(!(j<=1)&&ug(n)){n=k.Gu;var q=k.xn;if(k.Bd===u.tc||k.Bd===u.Dc)l=j-1-l;i=((k=k.Bd===u.tc||k.Bd===u.Ec)?n.y<q.y:n.x<q.x)?i+l*8:(k?n.y===q.y:n.x===q.x)?i:i+(j-1-l)*8}}d.nu=i}}a.Dr=c}c=a.pf}for(e=0;e<c.length;e++){g=c[e];if(g!==m&&g.link===b)return g}return m}
em.prototype.XF=function(a,b){return a===b?0:a===m?-1:b===m?1:a.Bd<b.Bd?-1:a.Bd>b.Bd?1:a.Ka<b.Ka?-1:a.Ka>b.Ka?1:0};function xm(a,b,c){this.link=a;this.Ka=b;this.Bd=c;this.Gu=new E;this.ol=this.$q=this.ol=0;this.xn=new E;this.nu=0}u.kd(xm,{link:h,Ka:h,Bd:h,Gu:h,ol:h,$q:h,xn:h,nu:h});xm.prototype.toString=function(){return this.link.toString()+" "+this.Ka.toString()+" "+this.Bd.toString()+":"+this.ol.toString()+"/"+this.$q.toString()+" "+this.xn.toString()+" "+this.nu.toString()+" "+this.Gu.toString()};
function V(a){arguments.length===0?U.call(this,Og):U.call(this,a);this.Bp=new la(T);this.Pk=new la(V);this.Ej=this.Cp=this.Ap=m;this.Iq=o;this.hp=h;this.Nq=o;this.Ya=this.yq=m;this.mo=o;this.Sc=new Dh;this.Sc.group=this}u.H("Group",V);u.na(V,U);ea=V.prototype;
ea.fb=function(a){U.prototype.fb.call(this,a);a.Ap=this.Ap;a.Cp=this.Cp;a.Ej=this.Ej;a.Iq=this.Iq;a.hp=this.hp;a.Nq=this.Nq;a.yq=this.yq;var b=xk(a,a,function(a){return a instanceof Ig});a.Ya=b instanceof Ig?b:m;a.mo=this.mo;if(this.Sc!==m){a.Sc=this.Sc.copy();if(a instanceof V)a.Sc.group=a}else{if(a.Sc!==m)a.Sc.group=m;a.Sc=m}};
ea.Qg=function(a){U.prototype.Qg.call(this,a);for(var b=a.su(),a=a.fc;a.next();){var c=a.value;c.L();c.r(ij);c.Og();if(c instanceof V){c.$u=c.ee;ym(c,b)}if(c instanceof U)c.kf(b);else if(c instanceof W)for(c=c.Xh;c.next();)c.value.kf(b)}};
ea.vl=function(a,b,c,d,e,g,i){if(a===ve&&b==="elements")if(e instanceof Ig)this.Ya===m?this.Ya=e:this.Ya!==e&&u.g("Cannot insert a second Placeholder into the visual tree of a Group.");else{if(e instanceof v){var j=xk(e,e,function(a){return a instanceof Ig});if(j instanceof Ig)this.Ya===m?this.Ya=j:this.Ya!==j&&u.g("Cannot insert a second Placeholder into the visual tree of a Group.")}}else if(a===we&&b==="elements")if(d===this.Ya)this.Ya=m;else if(d instanceof v&&this.Ya.Wh(d))this.Ya=m;U.prototype.vl.call(this,
a,b,c,d,e,g,i)};ea.zi=function(a,b,c,d){this.li=this.Ya;v.prototype.zi.call(this,a,b,c,d);if(this.Ya!==m){a=this.Ya.vm;this.location=new E(a.x,a.y)}};ea.ck=function(){if(!U.prototype.ck.call(this))return o;for(var a=this.fc;a.next();){var b=a.value;if(b instanceof U){if(b.gb()&&b.Gc)return o}else if(b instanceof W&&b.gb()&&b.Gc&&b.da!==this&&b.fa!==this)return o}return h};u.m(V,{placeholder:"placeholder"},r("Ya"));u.a(V,"computesBoundsAfterDrag",V.prototype.Cx);
u.defineProperty(V,{Cx:"computesBoundsAfterDrag"},r("mo"),function(a){var b=this.mo;if(b!==a){u.e(a,"boolean",V,"computesBoundsAfterDrag");this.mo=a;this.d("computesBoundsAfterDrag",b,a)}});u.m(V,{fc:"memberParts"},function(){return this.Bp.f});function ml(a,b){if(a.Bp.add(b)){b instanceof V&&a.Pk.add(b);var c=a.mC;if(c!==m){var d=h,e=a.b;if(e!==m){d=e.va;e.va=h}c(a,b);if(e!==m)e.va=d}}c=a.Ya;c===m&&(c=a);c.L()}
function ll(a,b){if(a.Bp.remove(b)){b instanceof V&&a.Pk.remove(b);var c=a.nC;if(c!==m){var d=h,e=a.b;if(e!==m){d=e.va;e.va=h}c(a,b);if(e!==m)e.va=d}}c=a.Ya;c===m&&(c=a);c.L()}V.prototype.il=function(){if(this.Bp.count>0){var a=this.b;if(a===m)return;for(var b=this.Bp.copy().f;b.next();)a.remove(b.value)}U.prototype.il.call(this)};V.prototype.Uu=function(){var a=this.sa;a!==m&&a.Uu(this)};u.a(V,"layout",V.prototype.rb);
u.defineProperty(V,{rb:"layout"},r("Sc"),function(a){var b=this.Sc;if(b!==a){a!==m&&u.c(a,Dh,V,"layout");if(b!==m){b.b=m;b.group=m}this.Sc=a;if(a!==m){a.b=this.b;a.group=this}this.d("layout",b,a)}});u.a(V,"memberAdded",V.prototype.mC);u.defineProperty(V,{mC:"memberAdded"},r("Ap"),function(a){var b=this.Ap;if(b!==a){a!==m&&u.e(a,"function",V,"memberAdded");this.Ap=a;this.d("memberAdded",b,a)}});u.a(V,"memberRemoved",V.prototype.nC);
u.defineProperty(V,{nC:"memberRemoved"},r("Cp"),function(a){var b=this.Cp;if(b!==a){a!==m&&u.e(a,"function",V,"memberRemoved");this.Cp=a;this.d("memberRemoved",b,a)}});u.a(V,"memberValidation",V.prototype.yr);u.defineProperty(V,{yr:"memberValidation"},r("Ej"),function(a){var b=this.Ej;if(b!==a){a!==m&&u.e(a,"function",V,"memberValidation");this.Ej=a;this.d("memberValidation",b,a)}});
V.prototype.canAddMembers=V.prototype.aH=function(a){var b=this.b;if(b===m)return o;b=b.Kd;for(a=b.Px(a).f;a.next();)if(!b.fy(this,a.value))return o;return h};V.prototype.addMembers=V.prototype.YG=function(a,b){var c=this.b;if(c===m)return o;for(var c=c.Kd,d=h,e=c.Px(a).f;e.next();){var g=e.value;!b||c.fy(this,g)?g.Sa=this:d=o}return d};u.a(V,"ungroupable",V.prototype.wD);
u.defineProperty(V,{wD:"ungroupable"},r("Iq"),function(a){var b=this.Iq;if(b!==a){u.e(a,"boolean",V,"ungroupable");this.Iq=a;this.d("ungroupable",b,a)}});V.prototype.canUngroup=V.prototype.BH=function(){if(!this.wD)return o;var a=this.sa;if(a!==m&&!a.Xm)return o;a=a.b;return a!==m&&!a.Xm?o:h};V.prototype.findSubGraphParts=V.prototype.su=function(){var a=new la(T);af(a,this,h,o);a.remove(this);return a};
V.prototype.collapseSubGraph=V.prototype.Xq=function(){var a=this.b;if(a!==m&&!a.lf){a.lf=h;var b=this.su();ym(this,b);a.lf=o}};function ym(a,b){a.ee=o;for(var c=a.fc;c.next();){var d=c.value;d.L();d.r(ij);d.Og();if(d instanceof V){d.$u=d.ee;ym(d,b)}if(d instanceof U)d.kf(b);else if(d instanceof W)for(d=d.Xh;d.next();)d.value.kf(b)}}V.prototype.expandSubGraph=V.prototype.dr=function(){var a=this.b;if(a!==m&&!a.lf){a.lf=h;var b=this.su();zm(this,b);a.lf=o}};
function zm(a,b){a.ee=h;for(var c=a.fc;c.next();){var d=c.value;d.L();d.r(hj);d.$h();d instanceof V&&d.$u&&zm(d,b);if(d instanceof U)d.kf(b);else if(d instanceof W)for(d=d.Xh;d.next();)d.value.kf(b)}}u.a(V,"isSubGraphExpanded",V.prototype.ee);
u.defineProperty(V,{ee:"isSubGraphExpanded"},r("hp"),function(a){var b=this.hp;if(b!==a){u.e(a,"boolean",V,"isSubGraphExpanded");this.hp=a;var c=this.b;c!==m&&ph(c);this.d("isSubGraphExpanded",b,a);b=this.hD;if(b!==m){var d=h;if(c!==m){d=c.va;c.va=h}b(this);if(c!==m)c.va=d}c!==m&&c.ca.$a||(a?this.dr():this.Xq())}});u.a(V,"wasSubGraphExpanded",V.prototype.$u);
u.defineProperty(V,{$u:"wasSubGraphExpanded"},r("Nq"),function(a){var b=this.Nq;if(b!==a){u.e(a,"boolean",V,"wasSubGraphExpanded");this.Nq=a;this.d("wasSubGraphExpanded",b,a)}});u.a(V,"subGraphExpandedChanged",V.prototype.hD);u.defineProperty(V,{hD:"subGraphExpandedChanged"},r("yq"),function(a){var b=this.yq;if(b!==a){a!==m&&u.e(a,"function",V,"subGraphExpandedChanged");this.yq=a;this.d("subGraphExpandedChanged",b,a)}});
V.prototype.move=V.prototype.move=function(a){var b=this.position,c=a.x-b.x,b=a.y-b.y;U.prototype.move.call(this,a);for(a=this.su().f;a.next();){var d=a.value,e=d.position;U.prototype.move.call(d,new E(e.x+c,e.y+b))}};function Ig(){Q.call(this);this.Fd=(new qb(0)).freeze();this.vm=new J(NaN,NaN,NaN,NaN)}u.H("Placeholder",Ig);u.na(Ig,Q);Ig.prototype.fb=function(a){Q.prototype.fb.call(this,a);a.Fd=this.Fd.B();a.vm=this.vm.copy()};
Ig.prototype.Bi=function(a){if(this.background===m&&this.Mg===m)return o;var b=this.ma;return tb(0,0,b.width,b.height,a.x,a.y)};
Ig.prototype.xr=function(){var a=this.W;(a===m||!(a instanceof V)&&!(a instanceof bf))&&u.g("Placeholder is not inside a Group or Adornment.");if(a instanceof V){var b;a:{b=this.W;if(b instanceof V&&b.Cx&&this.vm.V()){var c=b.b;if(c!==m){c=c.qa;if(c instanceof vf&&!c.Eo&&c.Kb!==m&&!c.Kb.contains(b)){b=this.vm;break a}}}b=this.W;if(b instanceof V){for(var d=c=Infinity,e=-Infinity,g=-Infinity,i=b.fc;i.next();){var j=i.value;if(j.gb()){if(j instanceof W){if(j.Zb)continue;if(j.da===b||j.fa===b)continue}j=
j.pa;if(j.left<c)c=j.left;if(j.top<d)d=j.top;if(j.right>e)e=j.right;if(j.bottom>g)g=j.bottom}}if(!isFinite(c)||!isFinite(d)){b=b.location;c=this.padding;b=new J(b.x+c.left,b.y+c.top,0,0)}else b=new J(c,d,e-c,g-d)}else b=new J;c=this.padding;b=new J(b.x-c.left,b.y-c.top,b.width+c.left+c.right,b.height+c.top+c.bottom)}this.vm=b;c=this.Ic;jb(c,b.width||0,b.height||0);Ri(this,0,0,c.width,c.height);c=a.fc;for(d=o;c.next();)if(c.value.gb()){d=h;break}if(d&&!isNaN(b.x)&&!isNaN(b.y))a.location=new E(b.x,
b.y)}else{b=this.ja;c=this.Ic;jb(c,b.width||0,b.height||0);Ri(this,0,0,c.width,c.height)}};Ig.prototype.zi=function(a,b,c,d){var e=this.pa;e.x=a;e.y=b;e.width=c;e.height=d};u.a(Ig,"padding",Ig.prototype.padding);u.defineProperty(Ig,{padding:"padding"},r("Fd"),function(a){typeof a==="number"?a=new qb(a):u.c(a,qb,v,"padding");var b=this.Fd;if(!b.u(a)){this.Fd=a=a.B();this.d("padding",b,a)}});
function Dh(){u.Gb(this);this.fw=this.M=m;this.Ls=this.ep=h;this.lp=this.kp=o;this.co=(new E(0,0)).freeze();this.p=m}u.H("Layout",Dh);Dh.prototype.cloneProtected=Dh.prototype.fb=function(a){a.ep=this.ep;a.Ls=this.Ls;a.lp=this.lp;a.co=this.co.B()};Dh.prototype.copy=Dh.prototype.copy=function(){var a=new this.constructor;this.fb(a);return a};
Dh.prototype.toString=function(){var a=u.Ii(Object.getPrototypeOf(this)),a=a+"(";this.group!==m&&(a=a+(" in "+this.group));this.b!==m&&(a=a+(" for "+this.b));return a+")"};u.a(Dh,"diagram",Dh.prototype.b);u.defineProperty(Dh,{b:"diagram"},r("M"),function(a){if(this.M!==a){a!==m&&u.c(a,B,Dh,"diagram");this.M=a}});u.a(Dh,"group",Dh.prototype.group);u.defineProperty(Dh,{group:"group"},r("fw"),function(a){if(this.fw!==a){a!==m&&u.c(a,V,Dh,"group");this.fw=a}});u.a(Dh,"isOngoing",Dh.prototype.ZB);
u.defineProperty(Dh,{ZB:"isOngoing"},r("ep"),function(a){if(this.ep!==a){u.e(a,"boolean",Dh,"isOngoing");this.ep=a}});u.a(Dh,"isInitial",Dh.prototype.YB);u.defineProperty(Dh,{YB:"isInitial"},r("Ls"),function(a){u.e(a,"boolean",Dh,"isInitial");this.Ls=a;if(!a)this.kp=h});u.a(Dh,"isValidLayout",Dh.prototype.Ne);u.defineProperty(Dh,{Ne:"isValidLayout"},r("kp"),function(a){if(this.kp!==a){this.kp=a;if(!a){a=this.b;if(a!==m)a.fs=h}}});
Dh.prototype.invalidateLayout=Dh.prototype.r=function(){if(this.kp){var a=this.b;if(a!==m&&!a.ca.$a&&(this.ZB&&a.sg||this.YB&&!a.sg)){this.Ne=o;a.Jq=h;pf(a)}}};u.a(Dh,"isViewportSized",Dh.prototype.Du);u.defineProperty(Dh,{Du:"isViewportSized"},r("lp"),function(a){if(this.lp!==a)(this.lp=a)&&this.r()});u.a(Dh,"network",Dh.prototype.Cc);u.defineProperty(Dh,{Cc:"network"},r("p"),function(a){var b=this.p;if(b!==a){a!==m&&u.c(a,Am,Dh,"network");b!==m&&Bm(b,m);this.p=a;a!==m&&Bm(a,this)}});
Dh.prototype.createNetwork=Dh.prototype.gu=function(){var a=new Am;Bm(a,this);return a};Dh.prototype.makeNetwork=Dh.prototype.RF=function(a){var b=this.createNetwork();if(a instanceof B){b.Sq(a.fk,h);b.Sq(a.links,h)}else a instanceof V?b.Sq(a.fc):a.f&&b.Sq(a.f);return b};Dh.prototype.updateParts=Dh.prototype.tK=function(){var a=this.b;if(a===m&&this.p!==m)for(var b=this.p.P.f;b.next();){var c=b.value.ya;if(c!==m){a=c.b;if(a!==m)break}}a!==m&&a.Fb("Layout");this.commitLayout();a!==m&&a.Ld("Layout")};
Dh.prototype.commitLayout=Dh.prototype.cu=aa();
Dh.prototype.doLayout=Dh.prototype.ar=function(a){a===m&&u.g("Layout.doLayout(collection) argument must not be null");var b=new la(T);if(a===this.b){Cm(this,b,a.fk,h,this.ry,h,o,h);Cm(this,b,a.Qi,h,this.ry,h,o,h)}else a===this.group&&Cm(this,b,a.fc,o,this.ry,h,o,h);var c=b.count;if(c>0){a=this.b;a!==m&&a.Fb("Layout");for(var c=Math.ceil(Math.sqrt(c)),d=this.Lc.x,e=d,g=this.Lc.y,i=0,j=0,b=b.f;b.next();){var k=b.value;k.Sh();var l=k.pa.width,n=k.pa.height;k.move(new E(e,g));delete k.Wz;e=e+(Math.max(l,
50)+20);j=Math.max(j,Math.max(n,50));if(i>=c-1){i=0;e=d;g=g+(j+20);j=0}else i++}a!==m&&a.Ld("Layout")}this.Ne=h};Dh.prototype.ry=function(a){return!a.location.V()||a instanceof V&&a.Wz?h:o};function Cm(a,b,c,d,e,g,i,j){for(c=c.f;c.next();){var k=c.value;if(!d||k.sr)if(!e||e(k))k.Vq()&&(g&&k instanceof U?k.Li||(k instanceof V&&k.rb===m?Cm(a,b,k.fc,o,e,g,i,j):b.add(k)):i&&k instanceof W?b.add(k):j&&k.constructor===T&&b.add(k))}}u.a(Dh,"arrangementOrigin",Dh.prototype.Lc);
u.defineProperty(Dh,{Lc:"arrangementOrigin"},r("co"),function(a){if(!this.co.u(a)){s&&u.c(a,E,Dh,"arrangementOrigin");this.co.Oa(a);this.r()}});function Dm(a,b){var c=a.group;if(c!==m){var d=c.location;if(isNaN(d.x)||isNaN(d.y))return b;var e=c.placeholder;if(e!==m){d=e.tb(Vb);d.x=d.x+e.padding.left;d.y=d.y+e.padding.top}else d=c.position.copy();return d}return b}function Am(){u.Gb(this);this.Sc=m;this.clear()}u.H("LayoutNetwork",Am);
Am.prototype.clear=function(){if(this.Mq)for(var a=this.Mq.f;a.next();){var b=a.value;b.clear();b.p=m}if(this.Go)for(a=this.Go.f;a.next();){b=a.value;b.clear();b.p=m}this.Mq=new la(Em);this.Go=new la(Fm);this.xw=new ka(U,Em);this.pw=new ka(W,Fm)};Am.prototype.toString=function(){return"LayoutNetwork"+(this.rb!==m?"("+this.rb.toString()+")":"")};u.m(Am,{rb:"layout"},r("Sc"));function Bm(a,b){s&&b!==m&&u.c(b,Dh,Am,"setLayout");a.Sc=b}u.m(Am,{P:"vertexes"},r("Mq"));u.m(Am,{Lb:"edges"},r("Go"));
Am.prototype.createVertex=Am.prototype.Ci=function(){return new Em};Am.prototype.createEdge=Am.prototype.an=function(){return new Fm};
Am.prototype.addParts=Am.prototype.Sq=function(a,b){if(a!==m){b===f&&(b=o);u.e(b,"boolean",Am,"addParts:toplevelonly");for(var c=a.f;c.next();){var d=c.value;if(d instanceof U&&(!b||d.sr)&&d.Vq()&&!d.Li)if(d instanceof V&&d.rb===m)this.Sq(d.fc,o);else if(this.be(d)===m){var e=this.Ci();e.Xg=d;this.Rj(e)}}for(c.reset();c.next();){d=c.value;if(d instanceof W&&(!b||d.sr)&&d.Vq()&&this.pu(d)===m){var g=d.da,e=d.fa;if(g!==e){g=this.qu(g);e=this.qu(e);g!==m&&e!==m&&this.rl(g,e,d)}}}}};
Am.prototype.findGroupVertex=Am.prototype.qu=function(a){if(a===m)return m;a=il(a);if(a===m)return m;var b=this.be(a);if(b!==m)return b;a=a.Sa;if(a!==m){b=this.be(a);if(b!==m)return b}return m};Am.prototype.addVertex=Am.prototype.Rj=function(a){if(a!==m){s&&u.c(a,Em,Am,"addVertex:vertex");this.Mq.add(a);var b=a.ya;b!==m&&this.xw.add(b,a);a.p=this}};Am.prototype.addNode=Am.prototype.Nm=function(a){if(a===m)return m;s&&u.c(a,U,Am,"addNode:node");var b=this.be(a);if(b===m){b=this.Ci();b.Xg=a;this.Rj(b)}return b};
Am.prototype.deleteVertex=Am.prototype.qB=function(a){if(a!==m){s&&u.c(a,Em,Am,"deleteVertex:vertex");if(Gm(this,a)){for(var b=a.cf,c=b.count-1;c>=0;c--){var d=b.Z(c);this.bn(d)}b=a.re;for(c=b.count-1;c>=0;c--){d=b.Z(c);this.bn(d)}}}};function Gm(a,b){if(b===m)return o;var c=a.Mq.remove(b);if(c){a.xw.remove(b.ya);b.p=m}return c}Am.prototype.deleteNode=Am.prototype.ZH=function(a){if(a!==m){s&&u.c(a,U,Am,"deleteNode:node");a=this.be(a);a!==m&&this.qB(a)}};
Am.prototype.findVertex=Am.prototype.be=function(a){if(a===m)return m;s&&u.c(a,U,Am,"findVertex:node");return this.xw.$(a)};Am.prototype.addEdge=Am.prototype.Mm=function(a){if(a!==m){s&&u.c(a,Fm,Am,"addEdge:edge");this.Go.add(a);var b=a.Ba;b!==m&&this.pu(b)===m&&this.pw.add(b,a);b=a.D;b!==m&&b.IA(a);b=a.G;b!==m&&b.EA(a);a.p=this}};
Am.prototype.addLink=Am.prototype.XG=function(a){if(a===m)return m;s&&u.c(a,W,Am,"addLink:link");var b=a.da,c=a.fa,d=this.pu(a);if(d===m){d=this.an();d.Ba=a;if(b!==m)d.G=this.Nm(b);if(c!==m)d.D=this.Nm(c);this.Mm(d)}else{d.G=b!==m?this.Nm(b):m;d.D=c!==m?this.Nm(c):m}return d};Am.prototype.deleteEdge=Am.prototype.bn=function(a){if(a!==m){s&&u.c(a,Fm,Am,"deleteEdge:edge");var b=a.D;b!==m&&b.pB(a);b=a.G;b!==m&&b.oB(a);Hm(this,a)}};function Hm(a,b){if(b!==m&&a.Go.remove(b)){a.pw.remove(b.Ba);b.p=m}}
Am.prototype.deleteLink=Am.prototype.YH=function(a){if(a!==m){s&&u.c(a,W,Am,"deleteLink:link");a=this.pu(a);a!==m&&this.bn(a)}};Am.prototype.findEdge=Am.prototype.pu=function(a){if(a===m)return m;s&&u.c(a,W,Am,"findEdge:link");return this.pw.$(a)};
Am.prototype.linkVertexes=Am.prototype.rl=function(a,b,c){if(a===m||b===m)return m;if(s){u.c(a,Em,Am,"linkVertexes:fromVertex");u.c(b,Em,Am,"linkVertexes:toVertex");u.c(c,W,Am,"linkVertexes:link")}if(a.p===this&&b.p===this){var d=this.an();d.Ba=c;d.G=a;d.D=b;this.Mm(d);return d}return m};Am.prototype.reverseEdge=Am.prototype.Nu=function(a){if(a!==m){s&&u.c(a,Fm,Am,"reverseEdge:edge");var b=a.G,c=a.D;if(!(b===m||c===m)){b.oB(a);c.pB(a);a.Nu();b.IA(a);c.EA(a)}}};
Am.prototype.deleteSelfEdges=Am.prototype.ku=function(){for(var a=[],b=this.Lb.f;b.next();){var c=b.value;c.G===c.D&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.bn(a[c])};Am.prototype.deleteArtificialVertexes=Am.prototype.ZE=function(){for(var a=[],b=this.P.f;b.next();){var c=b.value;c.ya===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.qB(a[b]);a=[];for(b=this.Lb.f;b.next();){c=b.value;c.Ba===m&&a.push(c)}c=a.length;for(b=0;b<c;b++)this.bn(a[b])};
Am.prototype.splitIntoSubNetworks=Am.prototype.zG=function(){this.ZE();for(var a=[],b=this.Lb.f;b.next();){var c=b.value;(c.G===m||c.D===m)&&a.push(c)}b=a.length;for(c=0;c<b;c++)this.bn(a[c]);this.ku();a=new z(Am);for(c=h;c;)for(var c=o,d=this.P.f;d.next();){b=d.value;if(b.cf.count>0||b.re.count>0){c=this.rb.createNetwork();a.add(c);Im(this,c,b);c=h;break}}a.sort(function(a,b){return a===m||b===m||a===b?0:b.P.count-a.P.count});return a};
function Im(a,b,c){if(c!==m&&c.p!==b){Gm(a,c);b.Rj(c);for(var d=c.ob;d.next();){var e=d.value;if(e.p!==b){Hm(a,e);b.Mm(e);Im(a,b,e.G)}}for(d=c.nb;d.next();){e=d.value;if(e.p!==b){Hm(a,e);b.Mm(e);Im(a,b,e.D)}}}}Am.prototype.getParts=Am.prototype.LI=function(){for(var a=new la(T),b=this.P.f;b.next();)a.add(b.value.ya);for(b=this.Lb.f;b.next();)a.add(b.value.Ba);return a};function Em(){u.Gb(this);this.p=m;this.A=(new J(0,0,10,10)).freeze();this.z=(new E(5,5)).freeze();this.clear()}
u.H("LayoutVertex",Em);Em.prototype.clear=function(){this.ya=m;this.cf=new z(Fm);this.re=new z(Fm)};Em.prototype.toString=function(){return"LayoutVertex#"+u.dc(this)+(this.ya!==m?"("+this.ya.toString()+")":"")};u.a(Em,"network",Em.prototype.Cc);u.defineProperty(Em,{Cc:"network"},r("p"),function(a){if(this.p!==a){a!==m&&u.c(a,Am,Em,"network");this.p=a}});u.a(Em,"node",Em.prototype.Xg);
u.defineProperty(Em,{Xg:"node"},r("ya"),function(a){if(this.ya!==a){s&&a!==m&&u.c(a,U,Em,"node");this.ya=a;a.Sh();var b=a.pa;if(b.V()){this.A.Oa(b);a=a.location;if(a.V()){var c=this.z;c.xa();c.x=a.x-b.x;c.y=a.y-b.y;c.freeze()}}}});u.a(Em,"bounds",Em.prototype.hb);u.defineProperty(Em,{hb:"bounds"},r("A"),function(a){if(!this.A.u(a)){s&&u.c(a,J,Em,"bounds");this.A.Oa(a)}});u.a(Em,"focus",Em.prototype.focus);
u.defineProperty(Em,{focus:"focus"},r("z"),function(a){if(!this.z.u(a)){s&&u.c(a,E,Em,"focus");this.z.Oa(a)}});u.a(Em,"centerX",Em.prototype.za);u.defineProperty(Em,{za:"centerX"},function(){return this.A.x+this.z.x},function(a){var b=this.A;if(b.x+this.z.x!==a){s&&u.i(a,Em,"centerX");b.xa();b.x=a-this.z.x;b.freeze()}});u.a(Em,"centerY",Em.prototype.Aa);
u.defineProperty(Em,{Aa:"centerY"},function(){return this.A.y+this.z.y},function(a){var b=this.A;if(b.y+this.z.y!==a){s&&u.i(a,Em,"centerY");b.xa();b.y=a-this.z.y;b.freeze()}});u.a(Em,"focusX",Em.prototype.uu);u.defineProperty(Em,{uu:"focusX"},function(){return this.z.x},function(a){var b=this.z;if(b.x!==a){b.xa();b.x=a;b.freeze()}});u.a(Em,"focusY",Em.prototype.vu);u.defineProperty(Em,{vu:"focusY"},function(){return this.z.y},function(a){var b=this.z;if(b.y!==a){b.xa();b.y=a;b.freeze()}});
u.a(Em,"x",Em.prototype.x);u.defineProperty(Em,{x:"x"},function(){return this.A.x},function(a){var b=this.A;if(b.x!==a){b.xa();b.x=a;b.freeze()}});u.a(Em,"y",Em.prototype.y);u.defineProperty(Em,{y:"y"},function(){return this.A.y},function(a){var b=this.A;if(b.y!==a){b.xa();b.y=a;b.freeze()}});u.a(Em,"width",Em.prototype.width);u.defineProperty(Em,{width:"width"},function(){return this.A.width},function(a){var b=this.A;if(b.width!==a){b.xa();b.width=a;b.freeze()}});u.a(Em,"height",Em.prototype.height);
u.defineProperty(Em,{height:"height"},function(){return this.A.height},function(a){var b=this.A;if(b.height!==a){b.xa();b.height=a;b.freeze()}});Em.prototype.commit=Em.prototype.Lh=function(){var a=this.ya;a!==m&&a.move(this.hb.position)};Em.prototype.addSourceEdge=Em.prototype.IA=function(a){if(a!==m){s&&u.c(a,Fm,Em,"addSourceEdge:edge");this.cf.contains(a)||this.cf.add(a)}};Em.prototype.deleteSourceEdge=Em.prototype.pB=function(a){if(a!==m){s&&u.c(a,Fm,Em,"deleteSourceEdge:edge");this.cf.remove(a)}};
Em.prototype.addDestinationEdge=Em.prototype.EA=function(a){if(a!==m){s&&u.c(a,Fm,Em,"addDestinationEdge:edge");this.re.contains(a)||this.re.add(a)}};Em.prototype.deleteDestinationEdge=Em.prototype.oB=function(a){if(a!==m){s&&u.c(a,Fm,Em,"deleteDestinationEdge:edge");this.re.remove(a)}};u.m(Em,{yG:"sourceVertexes"},function(){for(var a=new la(Em),b=this.ob;b.next();){var c=b.value.G;c!==m&&!a.contains(c)&&a.add(c)}return a.f});
u.m(Em,{aF:"destinationVertexes"},function(){for(var a=new la(Em),b=this.nb;b.next();){var c=b.value.D;c!==m&&!a.contains(c)&&a.add(c)}return a.f});u.m(Em,{P:"vertexes"},function(){for(var a=new la(Em),b=this.ob;b.next();){var c=b.value,c=c.G;c!==m&&!a.contains(c)&&a.add(c)}for(b=this.nb;b.next();){c=b.value;c=c.D;c!==m&&!a.contains(c)&&a.add(c)}return a.f});u.m(Em,{ob:"sourceEdges"},function(){return this.cf.f});u.m(Em,{nb:"destinationEdges"},function(){return this.re.f});
u.m(Em,{Lb:"edges"},function(){for(var a=new z(Fm),b=this.ob;b.next();){var c=b.value;a.add(c)}for(b=this.nb;b.next();){c=b.value;a.add(c)}return a.f});u.m(Em,{iF:"edgesCount"},function(){return this.cf.count+this.re.count});var Jm;Em.standardComparer=Jm=function(a,b){s&&u.c(a,Em,Em,"standardComparer:m");s&&u.c(b,Em,Em,"standardComparer:n");var c=a.ya,d=b.ya;if(c){if(d){c=c.text;d=d.text;return c<d?-1:c>d?1:0}return 1}return d!==m?-1:0};
Em.smartComparer=function(a,b){s&&u.c(a,Em,Em,"smartComparer:m");s&&u.c(b,Em,Em,"smartComparer:n");if(a!==m){if(b!==m){var c=a.ya,d=b.ya;if(c!==m){if(d!==m){var c=c.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=d.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(d[e]!==""&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(c[e].localeCompare(d[e])!==0)return c[e].localeCompare(d[e])}else return 1;
else{if(isNaN(i))return-1;if(g-i!==0)return g-i}}else if(c[e]!=="")return 1;return d[e]!==""&&d[e]!==f?-1:0}return 1}return d!==m?-1:0}return 1}return b!==m?-1:0};function Fm(){u.Gb(this);this.p=m;this.clear()}u.H("LayoutEdge",Fm);Fm.prototype.clear=function(){this.D=this.G=this.Ba=m};Fm.prototype.toString=function(){return"LayoutEdge#"+u.dc(this)+(this.Ba!==m?"("+this.Ba.toString()+")":"")};u.a(Fm,"network",Fm.prototype.Cc);
u.defineProperty(Fm,{Cc:"network"},r("p"),function(a){if(this.p!==a){s&&a!==m&&u.c(a,Am,Fm,"network");this.p=a}});u.a(Fm,"link",Fm.prototype.link);u.defineProperty(Fm,{link:"link"},r("Ba"),function(a){if(this.Ba!==a){s&&a!==m&&u.c(a,W,Fm,"link");this.Ba=a}});u.a(Fm,"fromVertex",Fm.prototype.pF);u.defineProperty(Fm,{pF:"fromVertex"},r("G"),function(a){if(this.G!==a){s&&a!==m&&u.c(a,Em,Fm,"fromVertex");this.G=a}});u.a(Fm,"toVertex",Fm.prototype.JG);
u.defineProperty(Fm,{JG:"toVertex"},r("D"),function(a){if(this.D!==a){s&&a!==m&&u.c(a,Em,Fm,"toVertex");this.D=a}});Fm.prototype.Nu=function(){var a=this.G;this.G=this.D;this.D=a};Fm.prototype.commit=Fm.prototype.Lh=aa();Fm.prototype.getOtherVertex=Fm.prototype.rF=function(a){s&&u.c(a,Em,Fm,"getOtherVertex:v");return this.D===a?this.G:this.G===a?this.D:m};
function Hi(){Dh.call(this);this.Du=h;this.Pq=this.Qq=NaN;this.bi=(new eb(NaN,NaN)).freeze();this.Bg=(new eb(10,10)).freeze();this.ka=Tj;this.uc=Rj;this.Tb=Nj;this.Rb=Km}u.H("GridLayout",Hi);u.na(Hi,Dh);Hi.prototype.cloneProtected=Hi.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.Qq=this.Qq;a.Pq=this.Pq;a.bi=this.bi.B();a.Bg=this.Bg.B();a.ka=this.ka;a.uc=this.uc;a.Tb=this.Tb;a.Rb=this.Rb};
Hi.prototype.doLayout=Hi.prototype.ar=function(a){var b=this.b;b===m&&u.g("The diagram for this layout is not set.");this.Lc=Dm(this,this.Lc);var c=new la(T);if(a===this.b){Cm(this,c,a.fk,h,m,h,o,h);Cm(this,c,a.links,h,m,h,o,h);Cm(this,c,a.Qi,h,m,h,o,h)}else a===this.group&&Cm(this,c,a.fc,o,m,h,o,h);for(a=c.copy().f;a.next();){var d=a.value;if(d instanceof W&&(d.da!==m||d.fa!==m))c.remove(d);else{d.Sh();if(d instanceof V)for(d=d.fc;d.next();)c.remove(d.value)}}c=c.yf();if(c.length!==0){switch(this.uf){case Qj:c.reverse();
break;case Nj:c.sort(this.Pg);break;case Oj:c.sort(this.Pg);c.reverse()}d=this.BD;isNaN(d)&&(d=0);a=this.Xy;a=isNaN(a)?Math.max(this.b.jb.width-b.padding.left-b.padding.right,0):Math.max(this.Xy,0);d<=0&&a<=0&&(d=1);var e=this.Ti.width;isFinite(e)||(e=0);var g=this.Ti.height;isFinite(g)||(g=0);b.Fb("Layout");switch(this.lb){case Uj:var i=Math.max(this.Wj.width,1);if(!isFinite(i))for(var j=i=0;j<c.length;j++)var k=c[j],l=k.ma,i=Math.max(i,l.width);var i=Math.max(i+e,1),n=Math.max(this.Wj.height,1);
if(!isFinite(n))for(j=n=0;j<c.length;j++){k=c[j];l=k.ma;n=Math.max(n,l.height)}for(var n=Math.max(n+g,1),q=this.Id,p=this.Lc.x,t=p,w=this.Lc.y,A=0,F=0,j=0;j<c.length;j++){var k=c[j],l=k.ma,H=Math.ceil((l.width+e)/i)*i,x=Math.ceil((l.height+g)/n)*n,I;switch(q){case Sj:I=Math.abs(t-l.width)+p;break;default:I=t+l.width-p}if(d>0&&A>d-1||a>0&&A>0&&I>a){A=0;t=p;w=w+F;F=0}F=Math.max(F,x);switch(q){case Sj:l=-l.width;break;default:l=0}k.move(new E(t+l,w));switch(q){case Sj:t=t-H;break;default:t=t+H}A++}break;
case Tj:i=Math.max(this.Wj.width,1);for(k=j=A=w=0;k<c.length;k++){n=c[k];q=n.ma;p=jl(n,n.ub,n.nf);w=Math.max(w,p.x);A=Math.max(A,q.width-p.x);j=Math.max(j,p.y)}t=this.Id;switch(t){case Sj:w=w+e;break;default:A=A+e}var i=isFinite(i)?Math.max(i+e,1):Math.max(w+A,1),y=w=this.Lc.x,A=this.Lc.y,H=F=0,l=Math.max(this.Wj.height,1),x=j=0;I=h;for(k=0;k<c.length;k++){n=c[k];q=n.ma;p=jl(n,n.ub,n.nf);if(F>0)switch(t){case Sj:y=Math.floor((y-w-(q.width-p.x))/i)*i+w;break;default:y=Math.ceil((y-w+p.x)/i)*i+w}else switch(t){case Sj:H=
y+p.x+q.width;break;default:H=y-p.x}var G;switch(t){case Sj:G=-(y+p.x)+w+H;break;default:G=y+q.width-p.x-w-H}if(d>0&&F>d-1||a>0&&F>0&&G>a){for(y=0;y<F;y++){if(k===F)break;G=c[k-F+y];var fa=jl(G,G.ub,G.nf);G.move(new E(G.position.x,G.position.y+j-fa.y))}x=x+g;A=I?A+x:A+(x+j);F=x=j=0;y=w;I=o}j=Math.max(j,p.y);x=Math.max(x,q.height-p.y);isFinite(l)&&(x=Math.max(x,Math.max(q.height,l)-p.y));I?n.move(new E(y-p.x,A-p.y)):n.move(new E(y-p.x,A));switch(t){case Sj:y=y-(p.x+e);break;default:y=y+(q.width-p.x+
e)}F++}for(y=0;y<F;y++){if(k===F)break;G=c[k-F+y];fa=jl(G,G.ub,G.nf);G.move(new E(G.position.x,G.position.y+j-fa.y))}}b.Ld("Layout");this.Ne=h}};u.a(Hi,"wrappingWidth",Hi.prototype.Xy);u.defineProperty(Hi,{Xy:"wrappingWidth"},r("Qq"),function(a){if(this.Qq!==a&&(a>0||isNaN(a))){this.Qq=a;this.Du=isNaN(a);this.r()}});u.a(Hi,"wrappingColumn",Hi.prototype.BD);u.defineProperty(Hi,{BD:"wrappingColumn"},r("Pq"),function(a){if(this.Pq!==a&&(a>0||isNaN(a))){this.Pq=a;this.r()}});u.a(Hi,"cellSize",Hi.prototype.Wj);
u.defineProperty(Hi,{Wj:"cellSize"},r("bi"),function(a){if(!this.bi.u(a)){this.bi.Oa(a);this.r()}});u.a(Hi,"spacing",Hi.prototype.Ti);u.defineProperty(Hi,{Ti:"spacing"},r("Bg"),function(a){if(!this.Bg.u(a)){this.Bg.Oa(a);this.r()}});u.a(Hi,"alignment",Hi.prototype.lb);u.defineProperty(Hi,{lb:"alignment"},r("ka"),function(a){if(this.ka!==a){s&&u.c(a,ja,Hi,"alignment");if(a===Tj||a===Uj){this.ka=a;this.r()}}});u.a(Hi,"arrangement",Hi.prototype.Id);
u.defineProperty(Hi,{Id:"arrangement"},r("uc"),function(a){if(this.uc!==a){s&&u.c(a,ja,Hi,"arrangement");if(a===Rj||a===Sj){this.uc=a;this.r()}}});u.a(Hi,"sorting",Hi.prototype.uf);u.defineProperty(Hi,{uf:"sorting"},r("Tb"),function(a){if(this.Tb!==a){s&&u.c(a,ja,Hi,"sorting");if(a===Pj||a===Qj||a===Nj||Oj){this.Tb=a;this.r()}}});u.a(Hi,"comparer",Hi.prototype.Pg);u.defineProperty(Hi,{Pg:"comparer"},r("Rb"),function(a){if(this.Rb!==a){s&&u.e(a,"function",Hi,"comparer");this.Rb=a;this.r()}});var Km;
Hi.standardComparer=Km=function(a,b){s&&u.c(a,T,Hi,"standardComparer:a");s&&u.c(b,T,Hi,"standardComparer:b");var c=a.text,d=b.text;return c<d?-1:c>d?1:0};
Hi.smartComparer=function(a,b){s&&u.c(a,T,Hi,"standardComparer:a");s&&u.c(b,T,Hi,"standardComparer:b");if(a!==m){if(b!==m){var c=a.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),d=b.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e;for(e=0;e<c.length;e++)if(d[e]!==""&&d[e]!==f){var g=parseFloat(c[e]),i=parseFloat(d[e]);if(isNaN(g))if(isNaN(i)){if(c[e].localeCompare(d[e])!==0)return c[e].localeCompare(d[e])}else return 1;else{if(isNaN(i))return-1;
if(g-i!==0)return g-i}}else if(c[e]!=="")return 1;return d[e]!==""&&d[e]!==f?-1:0}return 1}return b!==m?-1:0};var Uj;Hi.Position=Uj=u.l(Hi,"Position",0);var Tj;Hi.Location=Tj=u.l(Hi,"Location",1);var Rj;Hi.LeftToRight=Rj=u.l(Hi,"LeftToRight",2);var Sj;Hi.RightToLeft=Sj=u.l(Hi,"RightToLeft",3);var Pj;Hi.Forward=Pj=u.l(Hi,"Forward",4);var Qj;Hi.Reverse=Qj=u.l(Hi,"Reverse",5);var Nj;Hi.Ascending=Nj=u.l(Hi,"Ascending",6);var Oj;Hi.Descending=Oj=u.l(Hi,"Descending",7);
function Vj(){Dh.call(this);this.Yv=this.$l=this.Xb=0;this.Fo=360;this.Xv=gk;this.ps=this.Xd=this.zA=this.mj=0;this.Rt=new Lm;this.ss=this.tm=0;this.eA=function(a){a||(a=(new Date).getTime());return(a*9301+49297)%233280/233280};this.YD=600;this.Up=NaN;this.fo=1;this.Cg=0;this.Eg=360;this.uc=gk;this.O=ck;this.Tb=$j;this.Rb=Jm;this.Bg=6;this.Np=jk}u.H("CircularLayout",Vj);u.na(Vj,Dh);
Vj.prototype.cloneProtected=Vj.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.Up=this.Up;a.fo=this.fo;a.Cg=this.Cg;a.Eg=this.Eg;a.uc=this.uc;a.O=this.O;a.Tb=this.Tb;a.Rb=this.Rb;a.Bg=this.Bg;a.Np=this.Np};Vj.prototype.createNetwork=Vj.prototype.gu=function(){var a=new Mm;Bm(a,this);return a};
Vj.prototype.doLayout=Vj.prototype.ar=function(a){if(this.Cc===m)this.Cc=this.makeNetwork(a);if(this.p.P.count===1){a=this.p.P.Z(0);a.za=0;a.Aa=0}else{for(var a=this.p.P.f,b=new z(Nm);a.next();){var c=a.value,d=c.ya;if(d!==m){c.width=d.ga.width;c.height=d.ga.height}b.add(c)}var a=new z(Nm),c=new z(Nm),b=this.sort(b),a=new z(Nm),c=new z(Nm),d=this.Xv,e=this.QD,g=this.Xb,i=this.$l,j=this.Yv,k=this.Fo,l=this.mj,n=this.zA,q=this.Xd,p=this.ps,d=this.Id,e=this.Fr,g=this.CC;if(!isFinite(g)||g<=0)g=NaN;i=
this.OA;if(!isFinite(i)||i<=0)i=1;j=this.hk;isFinite(j)||(j=0);k=this.Bl;if(!isFinite(k)||k>360||k<1)k=360;l=this.Ti;isFinite(l)||(l=NaN);if(d===hk&&e===ik)d=gk;else if(d===hk&&e!==ik){e=ik;d=this.Id}if((this.direction===ak||this.direction===bk)&&this.uf!==$j){for(var t=0;;t=t+2){if(t>=b.length)break;a.add(b.Z(t));if(t+1>=b.length)break;c.add(b.Z(t+1))}if(this.direction===ak){this.Id===hk&&a.reverse();b=new z(Nm);b.Yf(a);b.Yf(c)}else{this.Id===hk&&c.reverse();b=new z(Nm);b.Yf(c);b.Yf(a)}}for(var w=
b.length,A=n=0,t=0;t<b.length;t++){var q=j+k*A*(this.direction===ck?1:-1)/w,F=b.Z(t).Je;isNaN(F)&&(F=Om(b.Z(t),q));if(k<360&&(t===0||t===b.length-1))F=F/2;n=n+F;A++}if(isNaN(g)||d===hk){isNaN(l)&&(l=6);if(d!==gk&&d!==hk){F=-Infinity;for(t=0;t<w;t++){var p=b.Z(t),H=b.Z(t===w-1?0:t+1);isNaN(p.Je)&&Om(p,0);isNaN(H.Je)&&Om(H,0);F=Math.max(F,(p.Je+H.Je)/2)}p=F+l;if(d===ek){q=2*Math.PI/w;g=(F+l)/q}else g=Pm(this,p*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180)}else g=Pm(this,n+(k>=360?w:w-1)*(d!==hk?l:l*
1.6),i,j*Math.PI/180,k*Math.PI/180);q=g*i}else{q=g*i;A=Qm(this,g,q,j*Math.PI/180,k*Math.PI/180);if(isNaN(l)){if(d===gk||d===hk)l=(A-n)/(k>=360?w:w-1)}else if(d===gk||d===hk){t=(A-n)/(k>=360?w:w-1);if(t<l){g=Pm(this,n+l*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180);q=g*i}else l=t}else{F=-Infinity;for(t=0;t<w;t++){p=b.Z(t);H=b.Z(t===w-1?0:t+1);isNaN(p.Je)&&Om(p,0);isNaN(H.Je)&&Om(H,0);F=Math.max(F,(p.Je+H.Je)/2)}p=F+l;t=Pm(this,p*(k>=360?w:w-1),i,j*Math.PI/180,k*Math.PI/180);if(t>g){g=t;q=g*i}else p=
A/(k>=360?w:w-1)}}this.Xv=d;this.QD=e;this.Xb=g;this.$l=i;this.Yv=j;this.Fo=k;this.mj=l;this.zA=n;this.Xd=q;this.ps=p;c=[b,a,c];b=c[0];a=c[1];c=c[2];d=this.Xv;e=this.Xb;i=this.Yv;j=this.Fo;k=this.mj;l=this.Xd;n=this.ps;if((this.direction===ak||this.direction===bk)&&d===hk)Rm(this,b,j,i-j/2,ck);else if(this.direction===ak||this.direction===bk){g=0;switch(d){case fk:g=Sm(this,e,l,i,n)*180/Math.PI;break;case gk:n=b=0;g=a.bc();g!==m&&(b=Om(g,Math.PI/2));g=c.bc();g!==m&&(n=Om(g,Math.PI/2));g=Sm(this,e,
l,i,k+(b+n)/2)*180/Math.PI;break;case ek:g=j/b.length}if(this.direction===ak){switch(d){case fk:Tm(this,a,i,dk);break;case gk:Um(this,a,i,dk);break;case ek:Vm(this,a,j/2,i,dk)}switch(d){case fk:Tm(this,c,i+g,ck);break;case gk:Um(this,c,i+g,ck);break;case ek:Vm(this,c,j/2,i+g,ck)}}else{switch(d){case fk:Tm(this,c,i,dk);break;case gk:Um(this,c,i,dk);break;case ek:Vm(this,c,j/2,i,dk)}switch(d){case fk:Tm(this,a,i+g,ck);break;case gk:Um(this,a,i+g,ck);break;case ek:Vm(this,a,j/2,i+g,ck)}}}else switch(d){case fk:Tm(this,
b,i,this.direction);break;case gk:Um(this,b,i,this.direction);break;case ek:Vm(this,b,j,i,this.direction);break;case hk:Rm(this,b,j,i,this.direction)}this.updateParts();this.Cc=m;this.Ne=h}};function Vm(a,b,c,d,e){for(var g=a.Fo,i=a.Xb,a=a.Xd,d=d*Math.PI/180,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=d+(e===ck?k*c/(g>=360?j:j-1):-(k*c)/j),n=b.Z(k),q=i*Math.tan(l)/a,q=Math.sqrt((i*i+a*a*q*q)/(1+q*q));n.za=q*Math.cos(l);n.Aa=q*Math.sin(l);n.Ut=l*180/Math.PI}}
function Um(a,b,c,d){for(var e=a.Xb,g=a.Xd,i=a.mj,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k),n=b.Z(k===j-1?0:k+1),q=g*Math.sin(c);l.za=e*Math.cos(c);l.Aa=q;l.Ut=c*180/Math.PI;isNaN(l.Je)&&Om(l,0);isNaN(n.Je)&&Om(n,0);l=Sm(a,e,g,d===ck?c:-c,(l.Je+n.Je)/2+i);c=c+(d===ck?l:-l)}}function Tm(a,b,c,d){for(var e=a.Xb,g=a.Xd,i=a.ps,c=c*Math.PI/180,j=b.length,k=0;k<j;k++){var l=b.Z(k);l.za=e*Math.cos(c);l.Aa=g*Math.sin(c);l.Ut=c*180/Math.PI;l=Sm(a,e,g,d===ck?c:-c,i);c=c+(d===ck?l:-l)}}
function Rm(a,b,c,d,e){var g=a.ss,g=a.Fo;a.dA=0;a.Rt=new Lm;if(c<360){for(g=d+(e===ck?g:-g);g<0;)g=g+360;g=g%360;g>180&&(g=g-360);g=g*(Math.PI/180);a.ss=g;Wm(a,b,c,d,e)}else Xm(a,b,c,d,e);a.Rt.Lh(b)}
function Xm(a,b,c,d,e){for(var g=a.mj,i=a.$l,j=a.Xb*Math.cos(d*Math.PI/180),k=a.Xd*Math.sin(d*Math.PI/180),l=b.yf(),n=0;n<l.length;n++){l[n].za=j;l[n].Aa=k;if(n===l.length-1)break;var q=[],q=Ym(a,j,k,l,n,e);q[0]||(q=Zm(a,j,k,l,n,e));j=q[1];k=q[2]}a.tm++;if(!(a.tm>128)){var j=l[0].za,k=l[0].Aa,n=l[l.length-1].za,q=l[l.length-1].Aa,p=Math.abs(j-n)-((l[0].width+l[l.length-1].width)/2+g),t=Math.abs(k-q)-((l[0].height+l[l.length-1].height)/2+g),g=0;Math.abs(t)<2.5?Math.abs(j-n)<(l[0].width+l[l.length-
1].width)/2&&(g=0):g=t>0?t:Math.abs(p)<2.5?0:p;p=o;p=Math.abs(n)>Math.abs(q)?n>0^k>q:q>0^j<n;if(p=e===ck?p:!p){g=-Math.abs(g);g=Math.min(g,-l[l.length-1].width);g=Math.min(g,-l[l.length-1].height)}j=a.Rt;if(g>0&&j.dm<0||Math.abs(g)<Math.abs(j.dm)&&!(g<0&&j.dm>0)){j.dm=g;j.Zk=[];j.Km=[];for(k=0;k<l.length;k++){j.Zk[k]=l[k].hb.x;j.Km[k]=l[k].hb.y}}l=a.tm;if(l>36&&l%13===0){a.Xb=a.Xb*((l%2===0?0.75:1.1)+a.eA(a.tm)*0.15);a.Xd=a.Xb*i}if(Math.abs(g)>2.5){a.Xb=a.Xb-g/(2*Math.PI);a.Xd=a.Xb*i;Xm(a,b,c,d,e)}}}
function Wm(a,b,c,d,e){for(var g=a.Xb,i=a.Xd,j=a.$l,k=g*Math.cos(d*Math.PI/180),l=i*Math.sin(d*Math.PI/180),n=b.yf(),q=0;q<n.length;q++){n[q].za=k;n[q].Aa=l;if(q===n.length-1)break;var p=[],p=Ym(a,k,l,n,q,e);p[0]||(p=Zm(a,k,l,n,q,e));k=p[1];l=p[2]}a.dA++;if(!(a.dA>128)){b.Z(b.length-1);k=Math.atan2(l,k);k=e===ck?a.ss-k:k-a.ss;k=Math.abs(k)<Math.abs(k-2*Math.PI)?k:k-2*Math.PI;g=k*(g+i)/2;i=a.Rt;if(Math.abs(g)<Math.abs(i.dm)){i.dm=g;i.Zk=[];i.Km=[];for(k=0;k<n.length;k++){i.Zk[k]=n[k].hb.x;i.Km[k]=
n[k].hb.y}}n=a.tm;if(n>36&&n%13===0){a.Xb=a.Xb*((n%2==0?0.75:1.1)+a.eA(a.tm)*0.15);a.Xd=a.Xb*j}if(Math.abs(g)>2.5){a.Xb=a.Xb-g/(2*Math.PI);a.Xd=a.Xb*j;Wm(a,b,c,d,e)}}}
function Ym(a,b,c,d,e,g){var i=a.mj,j=a.Xb,a=a.Xd,k=0,l=0,n=o;if(c>=0^g===ck){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j){k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j)return[o,k,l];n=h}}else{k=b-((d[e].width+d[e+1].width)/2+i);if(k<-j){k=b+((d[e].width+d[e+1].width)/2+i);if(k>j)return[o,k,l];n=h}}l=Math.sqrt(1-k*k/(j*j))*a;c<0^n&&(l=-l);return Math.abs(c-l)>(d[e].height+d[e+1].height)/2?[o,k,l]:[h,k,l]}
function Zm(a,b,c,d,e,g){var i=a.mj,j=a.Xb,a=a.Xd,k=0,l=0,n=o;if(b>=0^g===ck){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a){l=c+((d[e].height+d[e+1].height)/2+i);if(l>a)return[o,k,l];n=h}}else{l=c+((d[e].height+d[e+1].height)/2+i);if(l>a){l=c-((d[e].height+d[e+1].height)/2+i);if(l<-a)return[o,k,l];n=h}}k=Math.sqrt(1-l*l/(a*a))*j;b<0^n&&(k=-k);return Math.abs(b-k)>(d[e].width+d[e+1].width)/2?[o,k,l]:[h,k,l]}function Lm(){this.dm=-Infinity;this.Km=this.Zk=m}
Lm.prototype.Lh=function(a){if(!(this.Zk===m||this.Km===m))for(var b=0;b<this.Zk.length;b++){var c=a.Z(b);c.x=this.Zk[b];c.y=this.Km[b]}};Vj.prototype.commitLayout=Vj.prototype.cu=function(){this.commitNodes();this.commitLinks()};Vj.prototype.commitNodes=Vj.prototype.Bx=function(){for(var a=this.iE,b=this.p.P.f,c;b.next();){c=b.value;c.x=c.x+a.x;c.y=c.y+a.y;c.Lh()}};Vj.prototype.commitLinks=Vj.prototype.Ax=function(){for(var a=this.p.Lb.f;a.next();)a.value.Lh()};
function Qm(a,b,c,d,e){var g=a.YD;if(Math.abs(a.$l-1)<0.0010)return d!==f&&e!==f?e*b:2*Math.PI*b;var a=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,j;j=d!==f&&e!==f?e/(g+1):Math.PI/(2*(g+1));for(var k=0;k<=g;k++)var l=Math.sin(d!==f&&e!==f?d+k*e/g:k*Math.PI/(2*g)),i=i+Math.sqrt(1-a*a*l*l)*j;return d!==f&&e!==f?(b>c?b:c)*i:4*(b>c?b:c)*i}function Pm(a,b,c,d,e){return b/(d!==f&&e!==f?Qm(a,1,c,d,e):Qm(a,1,c))}
function Sm(a,b,c,d,e){if(Math.abs(a.$l-1)<0.0010)return e/b;var g=b>c?Math.sqrt(b*b-c*c)/b:Math.sqrt(c*c-b*b)/c,i=0,a=2*Math.PI/(a.p.P.count*700);b>c&&(d=d+Math.PI/2);for(var j=0;;j++){var k=Math.sin(d+j*a),i=i+(b>c?b:c)*Math.sqrt(1-g*g*k*k)*a;if(i>=e)return j*a}return 0}
Vj.prototype.sort=function(a){switch(this.uf){case Yj:break;case Zj:a.reverse();break;case Wj:a.sort(this.Pg);break;case Xj:a.sort(this.Pg);a.reverse();break;case $j:for(var b=[],c=0;c<a.length;c++)b.push(0);for(var d=new z(Nm),c=0;c<a.length;c++){var e=-1,g=-1;if(c===0)for(var i=0;i<a.length;i++){var j=a.Z(i).iF;if(j>e){e=j;g=i}}else for(i=0;i<a.length;i++){j=b[i];if(j>e){e=j;g=i}}d.add(a.Z(g));b[g]=-1;g=a.Z(g);e=g.ob;for(g=g.nb;e.next();){i=e.value;i=i.G;i=a.indexOf(i);i<0||b[i]>=0&&b[i]++}for(;g.next();){i=
g.value;i=i.D;i=a.indexOf(i);i<0||b[i]>=0&&b[i]++}}a=[];for(b=0;b<d.length;b++){j=d.Z(b);a[b]=[];for(var c=j.nb,e=j.ob,k,l;c.next();){k=c.value;l=d.indexOf(k.D);l!==b&&a[b].indexOf(l)<0&&a[b].push(l)}for(;e.next();){k=e.value;l=d.indexOf(k.G);l!==b&&a[b].indexOf(l)<0&&a[b].push(l)}}j=[];for(b=0;b<a.length;b++)j[b]=0;for(var c=[],n=[],q=[],e=[],g=new z(Nm),i=b=0;b<a.length;b++){var p=a[b].length;if(p===1)e.push(b);else if(p===0)g.add(d.Z(b));else{if(i===0)c.push(b);else{for(var t=Infinity,w=Infinity,
A=-1,F=[],p=0;p<c.length;p++)if(a[c[p]].indexOf(c[p===c.length-1?0:p+1])<0)F.push(p===c.length-1?0:p+1);if(F.length===0)for(p=0;p<c.length;p++)F.push(p);for(p=0;p<F.length;p++){var H=F[p],x;l=a[b];k=n;x=q;for(var I=j,y=H,G=c,fa=0,R=0;R<k.length;R++){var S=I[k[R]],da=I[x[R]],ma=0,ua=0;if(S<da){ma=S;ua=da}else{ma=da;ua=S}if(ma<y&&y<=ua)for(S=0;S<l.length;S++){da=l[S];G.indexOf(da)<0||ma<I[da]&&I[da]<ua||(ma===I[da]||ua===I[da])||fa++}else for(S=0;S<l.length;S++){da=l[S];G.indexOf(da)<0||ma<I[da]&&I[da]<
ua&&!(ma===I[da]||ua===I[da])&&fa++}}x=fa;for(k=I=0;k<a[b].length;k++){l=c.indexOf(a[b][k]);if(l>=0){l=Math.abs(H-(l>=H?l+1:l));I=I+(l<c.length+1-l?l:c.length+1-l)}}for(k=0;k<n.length;k++){l=j[n[k]];y=j[q[k]];l>=H&&l++;y>=H&&y++;if(l>y){G=y;y=l;l=G}y-l<(c.length+2)/2^(l<H&&H<=y)||I++}if(x<t||x===t&&I<w){t=x;w=I;A=H}}c.splice(A,0,b);for(p=0;p<c.length;p++)j[c[p]]=p;for(p=0;p<a[b].length;p++){t=a[b][p];if(c.indexOf(t)>=0){n.push(b);q.push(t)}}}i++}}n=o;for(q=c.length;;){n=h;for(j=0;j<e.length;j++){b=
e[j];p=a[b][0];l=c.indexOf(p);if(l>=0){for(i=w=0;i<a[p].length;i++){t=a[p][i];t=c.indexOf(t);if(!(t<0||t===l)){A=t>l?t-l:l-t;w=w+(t<l^A>q-A?1:-1)}}c.splice(w<0?l:l+1,0,b);e.splice(j,1);j--}else n=o}if(n)break;else{c.push(e[0]);e.splice(0,1)}}for(b=0;b<c.length;b++){l=c[b];g.add(d.Z(l))}return g;default:u.g("Invalid sorting type.")}return a};u.a(Vj,"radius",Vj.prototype.CC);u.defineProperty(Vj,{CC:"radius"},r("Up"),function(a){if(this.Up!==a&&(a>0||isNaN(a))){this.Up=a;this.r()}});
u.a(Vj,"aspectRatio",Vj.prototype.OA);u.defineProperty(Vj,{OA:"aspectRatio"},r("fo"),function(a){if(this.fo!==a&&a>0){this.fo=a;this.r()}});u.a(Vj,"startAngle",Vj.prototype.hk);u.defineProperty(Vj,{hk:"startAngle"},r("Cg"),function(a){if(this.Cg!==a){this.Cg=a;this.r()}});u.a(Vj,"sweepAngle",Vj.prototype.Bl);u.defineProperty(Vj,{Bl:"sweepAngle"},r("Eg"),function(a){if(this.Eg!==a){this.Eg=a>0&&a<=360?a:360;this.r()}});u.a(Vj,"arrangement",Vj.prototype.Id);
u.defineProperty(Vj,{Id:"arrangement"},r("uc"),function(a){if(this.uc!==a){s&&u.c(a,ja,Vj,"arrangement");if(a===hk||a===gk||a===fk||a===ek){this.uc=a;this.r()}}});u.a(Vj,"direction",Vj.prototype.direction);u.defineProperty(Vj,{direction:"direction"},r("O"),function(a){if(this.O!==a){s&&u.c(a,ja,Vj,"direction");if(a===ck||a===dk||a===ak||a===bk){this.O=a;this.r()}}});u.a(Vj,"sorting",Vj.prototype.uf);
u.defineProperty(Vj,{uf:"sorting"},r("Tb"),function(a){if(this.Tb!==a){s&&u.c(a,ja,Vj,"sorting");if(a===Yj||a===Zj||a===Wj||Xj||a===$j){this.Tb=a;this.r()}}});u.a(Vj,"comparer",Vj.prototype.Pg);u.defineProperty(Vj,{Pg:"comparer"},r("Rb"),function(a){if(this.Rb!==a){s&&u.e(a,"function",Vj,"comparer");this.Rb=a;this.r()}});u.a(Vj,"spacing",Vj.prototype.Ti);u.defineProperty(Vj,{Ti:"spacing"},r("Bg"),function(a){if(this.Bg!==a){this.Bg=a;this.r()}});u.a(Vj,"nodeDiameterFormula",Vj.prototype.Fr);
u.defineProperty(Vj,{Fr:"nodeDiameterFormula"},r("Np"),function(a){if(this.Np!==a){s&&u.c(a,ja,Vj,"nodeDiameterFormula");if(a===jk||a===ik){this.Np=a;this.r()}}});u.m(Vj,{jE:"actualXRadius"},r("Xb"));u.m(Vj,{kE:"actualYRadius"},r("Xd"));u.m(Vj,{VG:"actualSpacing"},r("mj"));u.m(Vj,{iE:"actualCenter"},function(){return isNaN(this.Lc.x)||isNaN(this.Lc.y)?new E(0,0):new E(this.Lc.x+this.jE,this.Lc.y+this.kE)});var gk;Vj.ConstantSpacing=gk=u.l(Vj,"ConstantSpacing",0);var fk;
Vj.ConstantDistance=fk=u.l(Vj,"ConstantDistance",1);var ek;Vj.ConstantAngle=ek=u.l(Vj,"ConstantAngle",2);var hk;Vj.Packed=hk=u.l(Vj,"Packed",3);var ck;Vj.Clockwise=ck=u.l(Vj,"Clockwise",4);var dk;Vj.Counterclockwise=dk=u.l(Vj,"Counterclockwise",5);var ak;Vj.BidirectionalLeft=ak=u.l(Vj,"BidirectionalLeft",6);var bk;Vj.BidirectionalRight=bk=u.l(Vj,"BidirectionalRight",7);var Yj;Vj.Forwards=Yj=u.l(Vj,"Forwards",8);var Zj;Vj.Reverse=Zj=u.l(Vj,"Reverse",9);var Wj;Vj.Ascending=Wj=u.l(Vj,"Ascending",10);
var Xj;Vj.Descending=Xj=u.l(Vj,"Descending",11);var $j;Vj.Optimized=$j=u.l(Vj,"Optimized",12);var jk;Vj.Pythagorean=jk=u.l(Vj,"Pythagorean",13);var ik;Vj.Circular=ik=u.l(Vj,"Circular",14);function Mm(){Am.call(this)}u.H("CircularNetwork",Mm);u.na(Mm,Am);Mm.prototype.createVertex=Mm.prototype.Ci=function(){return new Nm};Mm.prototype.createEdge=Mm.prototype.an=function(){return new $m};function Nm(){Em.call(this);this.ez=this.Zl=NaN}u.H("CircularVertex",Nm);u.na(Nm,Em);
function Om(a,b){var c=a.p;if(c===m)return NaN;c=c.rb;if(c===m)return NaN;if(c.Id===hk)if(c.Fr===ik)a.Zl=Math.max(a.width,a.height);else{var c=Math.abs(Math.sin(b)),d=Math.abs(Math.cos(b));if(c===0)return a.width;if(d===0)return a.height;a.Zl=Math.min(a.height/c,a.width/d)}else a.Zl=c.Fr===ik?Math.max(a.width,a.height):Math.sqrt(a.width*a.width+a.height*a.height);return a.Zl}u.a(Nm,"diameter",Nm.prototype.Je);u.defineProperty(Nm,{Je:"diameter"},r("Zl"),ba("Zl"));u.a(Nm,"actualAngle",Nm.prototype.Ut);
u.defineProperty(Nm,{Ut:"actualAngle"},r("ez"),ba("ez"));function $m(){Fm.call(this)}u.H("CircularEdge",$m);u.na($m,Fm);function an(){Dh.call(this);this.ef=m;this.mp=0;this.Ue=(new eb(100,100)).freeze();this.eo=o;this.dd=this.Ag=h;this.rm=100;this.Io=1;this.Yo=1E3;this.Ao=0.05;this.zo=50;this.xo=150;this.yo=0;this.vo=20;this.uo=25}u.H("ForceDirectedLayout",an);u.na(an,Dh);
an.prototype.cloneProtected=an.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.Ue=this.Ue.B();a.eo=this.eo;a.Ag=this.Ag;a.dd=this.dd;a.rm=this.rm;a.Io=this.Io;a.Yo=this.Yo;a.Ao=this.Ao;a.zo=this.zo;a.xo=this.xo;a.yo=this.yo;a.vo=this.vo;a.uo=this.uo};an.prototype.createNetwork=an.prototype.gu=function(){var a=new bn;Bm(a,this);return a};
an.prototype.doLayout=an.prototype.ar=function(a){if(this.Cc===m)this.Cc=this.makeNetwork(a);a=this.Eu;if(this.p.P.count>0){this.p.ku();for(var b=this.p.P.f;b.next();){var c=b.value;c.di=this.electricalCharge(c);c.qm=this.gravitationalMass(c);var d=c.ya;if(d!==m){var e=d.pa.width,d=d.pa.height;c.width=e;c.height=d;c.uu=e*0.5;c.vu=d*0.5}}for(b=this.p.Lb.f;b.next();){c=b.value;c.wq=this.springStiffness(c);c.sh=this.springLength(c)}this.mp=0;a:{if(!(this.p.P.count<3)){e=b=0;c=this.p.P.f;c.next();for(d=
c.value.A;c.next();){if(c.value.A.de(d)){b++;if(b>1){b=h;break a}}if(e>10)break;e++}}b=o}if(b){b=this.p;for(e=b.zG().f;e.next();){this.Cc=d=e.value;for(c=this.p.P.f;c.next();){for(var d=c.value,g=0,i=d.P;i.next();)g++;d.ue=g;d.pi=1;d.vk=m;d.Vf=m}cn(this,0,a)}this.Cc=b;e.reset();s&&u.c(b,bn,an,"arrangeConnectedGraphs:singletons");for(var c=this.Zt,j=e.count,d=h,i=g=0,k=[],l=0;l<j+b.P.count+2;l++)k[l]=m;j=0;for(e.reset();e.next();){var n=e.value,l=this.Zd(n);if(d){d=o;g=l.x+l.width/2;i=l.y+l.height/
2;k[0]=new E(l.right+c.width,l.top);k[1]=new E(l.left,l.bottom+c.height);j=2}else{var q=dn(k,j,new E(g,i),new eb(l.width,l.height),c),p=k[q],t=new E(p.x+l.width+c.width,p.y),w=new E(p.x,p.y+l.height+c.height);q+1<j&&k.splice(q+1,0,m);k[q]=t;k[q+1]=w;j++;q=p.x-l.x;l=p.y-l.y;for(n=n.P.f;n.next();){var A=n.value;A.za=A.za+q;A.Aa=A.Aa+l}}}for(n=b.P.f;n.next();){A=n.value;l=A.A;if(j<2){g=l.x+l.width/2;i=l.y+l.height/2;k[0]=new E(l.right+c.width,l.top);k[1]=new E(l.left,l.bottom+c.height);j=2}else{q=dn(k,
j,new E(g,i),new eb(l.width,l.height),c);p=k[q];t=new E(p.x+l.width+c.width,p.y);w=new E(p.x,p.y+l.height+c.height);q+1<j&&k.splice(q+1,0,m);k[q]=t;k[q+1]=w;j++;A.za=p.x+A.width/2;A.Aa=p.y+A.height/2}}for(e.reset();e.next();){d=e.value;for(g=d.P.f;g.next();){c=g.value;b.Rj(c)}for(d=d.Lb.f;d.next();){c=d.value;b.Mm(c)}}}en(this,a);this.updateParts()}this.rm=a;this.Cc=m;this.Ne=h};
an.prototype.Zd=function(a){s&&u.c(a,bn,an,"computeBounds:net");for(var b=new J,c=h,a=a.P.f;a.next();){var d=a.value;if(c){c=o;b.set(d.A)}else b.mk(d.A)}return b};function fn(a,b,c){if(s){u.i(b,an,"computeClusterLayoutIterations:level");u.i(c,an,"computeClusterLayoutIterations:maxiter")}return Math.max(Math.min(a.p.P.count,c*(b+1)/11),10)}
function cn(a,b,c){if(s){u.i(b,an,"layoutClusters:level");u.i(c,an,"layoutClusters:maxiter")}var d;s&&u.i(b,an,"hasClusters:level");if(b>10||a.p.P.count<3)d=o;else{a.ef===m?a.ef=new z(gn):a.ef.clear();a.ef.Yf(a.p.P);d=a.ef;d.sort(function(a,b){return a===m||b===m||a===b?0:b.ue-a.ue});for(var e=d.count-1;e>=0&&d.j[e].ue<=1;)e--;d=d.count-e>1}if(d){d=a.pl;a.pl=a.pl*(1+1/(b+1));s&&u.i(b,an,"pushSubNetwork:level");for(var e=a.p,g=new bn,i=a.ef.f;i.next();){var j=i.value;if(j.ue>1){g.Rj(j);var k={$y:j.ue,
az:j.width,Zy:j.height,ED:j.z.x,FD:j.z.y};if(j.Vf===m)j.Vf=new z;j.Vf.add(k);j.Kw=j.Vf.count-1}else break}for(var l=e.Lb.f;l.next();){var n=l.value;if(n.G.p===g&&n.D.p===g)g.Mm(n);else if(n.G.p===g){var q=n.G.vk;if(q===m){q=new z(gn);n.G.vk=q}q.add(n.D);n.G.ue--;n.G.pi=n.G.pi+n.D.pi}else if(n.D.p===g){q=n.D.vk;if(q===m){q=new z(gn);n.D.vk=q}q.add(n.G);n.D.ue--;n.D.pi=n.D.pi+n.G.pi}}for(l=g.Lb.f;l.next();){n=l.value;n.sh=n.sh*Math.max(1,Math.sqrt((n.G.pi+n.D.pi)/(4*b+1)))}for(i=g.P.f;i.next();){j=
i.value;q=j.vk;if(q!==m&&q.count>0){k=j.Vf.j[j.Vf.count-1];k=k.$y-j.ue;if(!(k<=0)){for(var p=0,t=0,w=q.count-k;w<q.count;w++){for(var A=q.j[w],n=m,l=A.Lb.f;l.next();){var F=l.value;if(F.rF(A)===j){n=F;break}}if(n!==m){t=t+n.sh;p=p+A.width*A.height}}q=j.za;l=j.Aa;n=j.width;w=j.height;A=j.z;F=n*w;F<1&&(F=1);p=Math.sqrt((p+F+t*t*4/(k*k))/F);k=(p-1)*n/2;p=(p-1)*w/2;j.hb=new J(q-A.x-k,l-A.y-p,n+k*2,w+p*2);j.focus=new E(A.x+k,A.y+p)}}}a.Cc=g;g=Math.max(0,fn(a,b,c));a.Eu=a.Eu+g;cn(a,b+1,c);en(a,g);if(s){u.c(e,
bn,an,"popNetwork:oldnet");u.i(b,an,"popNetwork:level")}for(c=a.p.P.f;c.next();){g=c.value;g.p=e;if(g.Vf!==m){i=g.Vf.j[g.Kw];g.ue=i.$y;j=i.ED;k=i.FD;g.hb=new J(g.za-j,g.Aa-k,i.az,i.Zy);g.focus=new E(j,k);g.Kw--}}for(c=a.p.Lb.f;c.next();)c.value.p=e;a.Cc=e;c=a.ef;c===m?c=new z(gn):c.clear();c.Yf(e.P);c.sort(function(a,b){return a===m||b===m||a===b?0:b.ue-a.ue});for(e=c.f;e.next();)hn(a,e.value,b);a.pl=d}}
function hn(a,b,c){if(s){u.c(b,gn,an,"surroundNode:oldnet");u.i(c,an,"surroundNode:level")}var d=b.vk;if(!(d===m||d.count===0)){var c=b.za,e=b.Aa,g=b.width,i=b.height;if(b.Vf!==m&&b.Vf.count>0){i=b.Vf.j[0];g=i.az;i=i.Zy}for(var g=Math.sqrt(g*g+i*i)/2,j=o,k=i=0,l=0,n=b.P.f;n.next();){var q=n.value;if(q.ue<=1)k++;else{j=h;l++;i=i+Math.atan2(b.Aa-q.Aa,b.za-q.za)}}if(k!==0){l>0&&(i=i/l);l=b=0;b=j?Math.PI*2/(k+1):Math.PI*2/k;k%2===0&&(l=b/2);d.count>1&&d.sort(function(a,b){return a===m||b===m||a===b?0:
b.width*b.height-a.width*a.height});j=k%2===0?0:1;for(n=d.f;n.next();){q=n.value;if(!(q.ue>1)&&!a.isFixed(q)){d=m;for(k=q.Lb.f;k.next();){d=k.value;break}var k=q.width,p=q.height,d=g+d.sh+Math.sqrt(k*k+p*p)/2,k=i+(b*(j/2>>1)+l)*(j%2==0?1:-1);q.za=c+d*Math.cos(k);q.Aa=e+d*Math.sin(k);j++}}}}}
function dn(a,b,c,d,e){var g=9E19,i=-1,j=0;a:for(;j<b;j++){var k=a[j],l=k.x-c.x,n=k.y-c.y,l=l*l+n*n;if(l<g){for(n=j-1;n>=0;n--)if(a[n].y>k.y&&a[n].x-k.x<d.width+e.width)continue a;for(n=j+1;n<b;n++)if(a[n].x>k.x&&a[n].y-k.y<d.height+e.height)continue a;i=j;g=l}}return i}an.prototype.DA=function(a){var b=a.ya;if(b!==m)for(b=b.yB();b.next();){var c=b.value;if(c.hd==="Comment"){var d=this.p.be(c);if(d===m){d=this.p.Nm(c);d.di=this.gB;c=this.p.rl(a,d,m);if(c!==m)c.sh=this.hB}}}};
function jn(a,b){if(s){u.c(a,gn,an,"getNodeDistance:vertexA");u.c(b,gn,an,"getNodeDistance:vertexB")}var c=a.hb,d=c.x,e=c.y,g=c.width,c=c.height,i=b.hb,j=i.x,k=i.y,l=i.width,i=i.height;if(d+g<j){if(e>k+i){d=d+g-j;e=e-k-i;return Math.sqrt(d*d+e*e)}if(e+c<k){d=d+g-j;e=e+c-k;return Math.sqrt(d*d+e*e)}return j-(d+g)}if(d>j+l){if(e>k+i){d=d-j-l;e=e-k-i;return Math.sqrt(d*d+e*e)}if(e+c<k){d=d-j-l;e=e+c-k;return Math.sqrt(d*d+e*e)}return d-(j+l)}return e>k+i?e-(k+i):e+c<k?k-(e+c):0.1}
function en(a,b){s&&u.i(b,an,"performIterations:num");a.ef=m;for(var c=a.mp+b;a.mp<c;){a.mp++;if(!kn(a))break}a.ef=m}
function kn(a){if(a.ef===m){a.ef=new z(gn);a.ef.Yf(a.p.P)}var b=a.ef;if(b.count<=0)return o;var c=b.j[0];c.nd=0;c.od=0;for(var d=c.za,e=d,g=c.Aa,i=g,c=1;c<b.count;c++){var j=b.j[c];j.nd=0;j.od=0;var k=j.za,j=j.Aa,d=Math.min(d,k),e=Math.max(e,k),g=Math.min(g,j),i=Math.max(i,j)}(i=e-d>i-g)?b.sort(function(a,b){return a===m||b===m||a===b?0:a.za-b.za}):b.sort(function(a,b){return a===m||b===m||a===b?0:a.Aa-b.Aa});for(var l=0,n=k=0,c=0;c<b.count;c++){j=b.j[c];d=j.za;e=j.Aa;k=j.di*a.electricalFieldX(d,
e);n=j.di*a.electricalFieldY(d,e);j.nd=j.nd+k;j.od=j.od+n;k=j.qm*a.gravitationalFieldX(d,e);n=j.qm*a.gravitationalFieldY(d,e);j.nd=j.nd+k;j.od=j.od+n;for(var q=a.pl,p=c+1;p<b.count;p++){g=b.j[p];if(g!==j){var n=g.za,t=g.Aa;if(Math.abs(d-n)>q){if(i)break}else if(Math.abs(e-t)>q){if(!i)break}else{var w=jn(j,g);if(w<1){if(d>n){k=Math.abs(g.A.right-j.A.left);k=ln(1+k)}else if(d<n){k=Math.abs(g.A.left-j.A.right);k=-ln(1+k)}else{k=Math.max(g.width,j.width);k=ln(1+k)-k/2}if(e>t){n=Math.abs(g.A.bottom-j.A.top);
n=ln(1+n)}else if(d<n){n=Math.abs(g.A.top-j.A.bottom);n=-ln(1+n)}else{n=Math.max(g.height,j.height);n=ln(1+n)-n/2}}else{l=-(j.di*g.di)/(w*w);k=l*((n-d)/w);n=l*((t-e)/w)}j.nd=j.nd+k;j.od=j.od+n;g.nd=g.nd-k;g.od=g.od-n}}}}for(c=a.p.Lb.f;c.next();){i=c.value;j=i.G;g=i.D;d=j.za;e=j.Aa;n=g.za;t=g.Aa;w=jn(j,g);if(w<1){k=(d>n?1:-1)*ln(1+Math.max(g.width,j.width));n=(e>t?1:-1)*ln(1+Math.max(g.height,j.height))}else{l=i.wq*(w-i.sh);k=l*((n-d)/w);n=l*((t-e)/w)}j.nd=j.nd+k;j.od=j.od+n;g.nd=g.nd-k;g.od=g.od-
n}c=0;d=Math.max(a.pl/20,50);for(e=0;e<b.count;e++){j=b.j[e];if(!a.isFixed(j)){g=j.nd;i=j.od;g<-d?g=-d:g>d&&(g=d);i<-d?i=-d:i>d&&(i=d);j.za=j.za+g;j.Aa=j.Aa+i;c=Math.max(c,g*g+i*i)}}return c>a.Lx*a.Lx}function ln(a){s&&u.i(a,an,"randNext:max");return Math.floor(a*Math.random())}an.prototype.commitLayout=an.prototype.cu=function(){this.Iy();this.commitNodes();this.commitLinks()};an.prototype.Iy=function(){if(this.Al)for(var a=this.p.Lb.f;a.next();){var b=a.value.Ba;if(b!==m){b.Ua=Ub;b.Wa=Ub}}};
an.prototype.commitNodes=an.prototype.Bx=function(){var a=0,b=0;if(this.NA)var b=this.Zd(this.p),c=this.Lc,a=c.x-b.x,b=c.y-b.y;for(var c=new J,d=this.p.P.f;d.next();){var e=d.value;if(a!==0||b!==0){c.set(e.A);c.x=c.x+a;c.y=c.y+b;e.hb=c}e.Lh()}};an.prototype.commitLinks=an.prototype.Ax=function(){for(var a=this.p.Lb.f;a.next();)a.value.Lh()};an.prototype.springStiffness=an.prototype.gK=function(a){a=a.wq;return!isNaN(a)?a:this.lB};
an.prototype.springLength=an.prototype.fK=function(a){a=a.sh;return!isNaN(a)?a:this.kB};an.prototype.electricalCharge=an.prototype.tI=function(a){a=a.di;return!isNaN(a)?a:this.iB};an.prototype.electricalFieldX=an.prototype.uI=ca(0);an.prototype.electricalFieldY=an.prototype.vI=ca(0);an.prototype.gravitationalMass=an.prototype.OI=function(a){a=a.qm;return!isNaN(a)?a:this.jB};an.prototype.gravitationalFieldX=an.prototype.MI=ca(0);an.prototype.gravitationalFieldY=an.prototype.NI=ca(0);
an.prototype.isFixed=an.prototype.XB=function(a){return a.kw};u.m(an,{VH:"currentIteration"},r("mp"));u.a(an,"arrangementSpacing",an.prototype.Zt);u.defineProperty(an,{Zt:"arrangementSpacing"},r("Ue"),function(a){if(!this.Ue.u(a)){this.Ue.Oa(a);this.r()}});u.a(an,"arrangesToOrigin",an.prototype.NA);u.defineProperty(an,{NA:"arrangesToOrigin"},r("eo"),function(a){if(this.eo!==a){this.eo=a;this.r()}});u.a(an,"setsPortSpots",an.prototype.Al);
u.defineProperty(an,{Al:"setsPortSpots"},r("Ag"),function(a){if(this.Ag!==a){this.Ag=a;this.r()}});u.a(an,"comments",an.prototype.zx);u.defineProperty(an,{zx:"comments"},r("dd"),function(a){if(this.dd!==a){this.dd=a;this.r()}});u.a(an,"maxIterations",an.prototype.Eu);u.defineProperty(an,{Eu:"maxIterations"},r("rm"),function(a){if(this.rm!==a&&a>=0){this.rm=a;this.r()}});u.a(an,"epsilonDistance",an.prototype.Lx);
u.defineProperty(an,{Lx:"epsilonDistance"},r("Io"),function(a){if(this.Io!==a&&a>0){this.Io=a;this.r()}});u.a(an,"infinityDistance",an.prototype.pl);u.defineProperty(an,{pl:"infinityDistance"},r("Yo"),function(a){if(this.Yo!==a&&a>1){this.Yo=a;this.r()}});u.a(an,"defaultSpringStiffness",an.prototype.lB);u.defineProperty(an,{lB:"defaultSpringStiffness"},r("Ao"),function(a){if(this.Ao!==a){this.Ao=a;this.r()}});u.a(an,"defaultSpringLength",an.prototype.kB);
u.defineProperty(an,{kB:"defaultSpringLength"},r("zo"),function(a){if(this.zo!==a){this.zo=a;this.r()}});u.a(an,"defaultElectricalCharge",an.prototype.iB);u.defineProperty(an,{iB:"defaultElectricalCharge"},r("xo"),function(a){if(this.xo!==a){this.xo=a;this.r()}});u.a(an,"defaultGravitationalMass",an.prototype.jB);u.defineProperty(an,{jB:"defaultGravitationalMass"},r("yo"),function(a){if(this.yo!==a){this.yo=a;this.r()}});u.a(an,"defaultCommentSpringLength",an.prototype.hB);
u.defineProperty(an,{hB:"defaultCommentSpringLength"},r("vo"),function(a){if(this.vo!==a){this.vo=a;this.r()}});u.a(an,"defaultCommentElectricalCharge",an.prototype.gB);u.defineProperty(an,{gB:"defaultCommentElectricalCharge"},r("uo"),function(a){if(this.uo!==a){this.uo=a;this.r()}});function bn(){Am.call(this)}u.H("ForceDirectedNetwork",bn);u.na(bn,Am);bn.prototype.createVertex=bn.prototype.Ci=function(){return new gn};bn.prototype.createEdge=bn.prototype.an=function(){return new mn};
function gn(){Em.call(this);this.kw=o;this.qm=this.di=NaN;this.pi=this.ue=this.od=this.nd=0;this.Vf=this.vk=m;this.Kw=0}u.H("ForceDirectedVertex",gn);u.na(gn,Em);u.a(gn,"isFixed",gn.prototype.XB);u.defineProperty(gn,{XB:"isFixed"},r("kw"),ba("kw"));u.a(gn,"charge",gn.prototype.NE);u.defineProperty(gn,{NE:"charge"},r("di"),ba("di"));u.a(gn,"mass",gn.prototype.TF);u.defineProperty(gn,{TF:"mass"},r("qm"),ba("qm"));u.a(gn,"forceX",gn.prototype.lF);u.defineProperty(gn,{lF:"forceX"},r("nd"),ba("nd"));
u.a(gn,"forceY",gn.prototype.mF);u.defineProperty(gn,{mF:"forceY"},r("od"),ba("od"));function mn(){Fm.call(this);this.sh=this.wq=NaN}u.H("ForceDirectedEdge",mn);u.na(mn,Fm);u.a(mn,"stiffness",mn.prototype.BG);u.defineProperty(mn,{BG:"stiffness"},r("wq"),ba("wq"));u.a(mn,"length",mn.prototype.length);u.defineProperty(mn,{length:"length"},r("sh"),ba("sh"));
function Z(){Dh.call(this);this.Oc=this.ed=25;this.O=0;this.Ul=nn;this.mm=on;this.gm=pn;this.Jk=4;this.Ll=qn;this.zh=rn;this.Ag=h;this.Xa=this.Us=this.Ia=-1;this.te=this.Dp=0;this.Rc=this.se=this.Lf=this.wg=this.Qc=m;this.Kp=0;this.et=this.Ok=m;this.bf=0;this.Lp=m;this.Qf=[];this.Qf.length=100}u.H("LayeredDigraphLayout",Z);u.na(Z,Dh);
Z.prototype.cloneProtected=Z.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.ed=this.ed;a.Oc=this.Oc;a.O=this.O;a.Ul=this.Ul;a.mm=this.mm;a.gm=this.gm;a.Jk=this.Jk;a.Ll=this.Ll;a.zh=this.zh;a.Ag=this.Ag};Z.prototype.createNetwork=Z.prototype.gu=function(){var a=new sn;Bm(a,this);return a};
Z.prototype.doLayout=Z.prototype.ar=function(a){if(this.Cc===m)this.Cc=this.makeNetwork(a);this.Lc=Dm(this,this.Lc);this.Us=-1;this.te=this.Dp=0;this.Lp=this.et=this.Ok=m;var b;for(b=0;b<this.Qf.length;b++)this.Qf[b]=m;if(this.p.P.count>0){this.p.ku();for(var c=this.p.Lb.f;c.next();)c.value.eb=o;switch(this.Ul){default:case tn:var d=0,e=this.p.P.count-1,g=[];g.length=e+1;for(var i=this.p.P.f;i.next();)i.value.la=h;for(;un(this.p)!==m;){var j;for(j=vn(this.p);j!==m;){g[e]=j;e--;j.la=o;j=vn(this.p)}for(j=
wn(this.p);j!==m;){g[d]=j;d++;j.la=o;j=wn(this.p)}s&&u.c(this.p,Am,Z,"greedyCycleRemovalFindNodeMaxDegDiff:network");for(var k=m,l=0,n=this.p.P.f;n.next();){var q=n.value;if(q.la){for(var p=0,t=q.nb;t.next();)t.value.D.la&&p++;for(var w=0,A=q.ob;A.next();)A.value.G.la&&w++;if(k===m||l<p-w){k=q;l=p-w}}}j=k;if(j!==m){g[d]=j;d++;j.la=o}}var F;for(F=0;F<this.p.P.count;F++)g[F].T=F;for(var H=this.p.Lb.f;H.next();){var x=H.value;if(x.G.T>x.D.T){this.p.Nu(x);x.eb=h}}break;case nn:for(var I=this.p.P.f;I.next();){I.value.lj=
-1;I.value.bm=-1}for(var y=this.p.Lb.f;y.next();)y.value.Lo=o;this.Kp=0;for(I.reset();I.next();)I.value.ob.count===0&&xn(this,I.value);for(I.reset();I.next();)I.value.lj===-1&&xn(this,I.value);for(y.reset();y.next();){var G=y.value;if(!G.Lo){var fa=G.G,R=fa.bm,S=G.D,da=S.bm;if(S.lj<fa.lj&&R<da){this.p.Nu(G);G.eb=h}}}}for(var ma=this.p.P.f,ua;ma.next();){ua=ma.value;ua.s=-1;var sa=ua.ya;if(typeof sa!=="undefined"&&sa!==m){var ib=sa.pa.width,db=sa.pa.height;ua.width=ib;ua.height=db;ua.uu=ib*0.5;ua.vu=
db*0.5}}this.Ia=-1;switch(this.mm){case yn:zn(this);break;case An:for(var $a,Oa=this.p.P.f;Oa.next();){$a=Bn(this,Oa.value);this.Ia=Math.max($a,this.Ia)}Oa.reset();for(var fb;Oa.next();){fb=Oa.value;fb.s=this.Ia-fb.s}break;default:case on:zn(this);for(var Va=this.p.P.f;Va.next();)Va.value.la=o;for(Va.reset();Va.next();)Va.value.ob.count===0&&Cn(this,Va.value);var vc=Infinity;for(Va.reset();Va.next();)vc=Math.min(vc,Va.value.s);this.Ia=-1;for(Va.reset();Va.next();){Va.value.s=Va.value.s-vc;this.Ia=
Math.max(this.Ia,Va.value.s)}}for(ma.reset();ma.next();)this.Ia=Math.max(this.Ia,ma.value.s);for(var Cd=this.p.Lb.f,Wa,Fc=[];Cd.next();){Wa=Cd.value;Wa.la=o;Fc.push(Wa)}for(var Dd=0;Dd<Fc.length;Dd++){Wa=Fc[Dd];if(!Wa.la&&!((Wa.G.ya===m||Wa.D.ya===m)&&Wa.G.s===Wa.D.s)){var qc,Wb,hc,Gc;qc=Wb=hc=Gc=0;var Gb=Wa.G,Hb=Wa.D;if(Wa.Ba!==m){var Ib=Wa.Ba;if(Ib===m)continue;var Ce=Gb.ya,Oc=Hb.ya;if(Ce===m||Oc===m)continue;var nd=Ib.da,Hc=Ib.fa,xc=Ib.Ac,ed=Ib.md;if(Wa.eb)var rb=nd,yc=xc,nd=Hc,xc=ed,Hc=rb,ed=
yc;var Ed=Gb.z.copy(),Fd=Wa.D.z.copy(),qa=Wa.eb?Hb.A.copy():Gb.A.copy(),Ea=isNaN(qa.x)?Ed.copy():jl(nd,xc,Zb);if(Ce!==nd&&!isNaN(qa.x)&&nd.gb()){var zc=Gb.A.copy();if(!isNaN(zc.x)){Ea.x=Ea.x+(qa.x-zc.x);Ea.y=Ea.y+(qa.y-zc.y)}}var lb=Wa.eb?Gb.A.copy():Hb.A.copy(),Pc=isNaN(lb.x)?Fd.copy():jl(Hc,ed,Zb);if(Oc!==Hc&&!isNaN(lb.x)&&Hc.gb()){var Gd=Hb.A;if(!isNaN(Gd.x)){Pc.x=Pc.x+(lb.x-Gd.x);Pc.y=Pc.y+(lb.y-Gd.y)}}if(this.O===90||this.O===270){qc=Math.round((Ea.x-Ed.x)/this.Oc);hc=Ea.x;Wb=Math.round((Pc.x-
Fd.x)/this.Oc);Gc=Pc.x}else{qc=Math.round((Ea.y-Ed.y)/this.Oc);hc=Ea.y;Wb=Math.round((Pc.y-Fd.y)/this.Oc);Gc=Pc.y}Wa.ve=qc;Wa.we=hc;Wa.Ud=Wb;Wa.ye=Gc}else{Wa.ve=0;Wa.we=0;Wa.Ud=0;Wa.ye=0}var od=Gb.s,Jb=Hb.s,vb,pd=Wa;s&&u.c(pd,Dn,Z,"_goesAround:edge");var Qc=0,Rc=pd.Ba;if(Rc!==m){if(Rc.Ac!==m){var Ud=Rc.da;Pl(Rc)===En(this,pd,h)?Qc=Qc+1:this.Al&&Ud!==m&&Ud.ports.count===1&&pd.eb&&(Qc=Qc+1)}if(Rc.md!==m){var Vd=Rc.fa;Ql(Rc)===En(this,pd,o)?Qc=Qc+2:this.Al&&Vd!==m&&Vd.ports.count===1&&pd.eb&&(Qc=Qc+
2)}}vb=Qc;var ic=vb===1||vb===3?h:o,$b=vb===2||vb===3?h:o,Za,Cb;if($b){Cb=this.p.Ci();Cb.ya=m;Cb.rk=1;Cb.s=od;Cb.mi=Gb;this.p.Rj(Cb);Za=this.p.rl(Gb,Cb,Wa.Ba);Za.la=o;Za.eb=Wa.eb;Za.ve=qc;Za.Ud=0;Za.we=hc;Za.ye=0;Gb=Cb}var qd=1;ic&&qd--;if(od-Jb>qd&&od>0){Wa.la=o;Cb=this.p.Ci();Cb.ya=m;Cb.rk=2;Cb.s=od-1;this.p.Rj(Cb);Za=this.p.rl(Gb,Cb,Wa.Ba);Za.la=h;Za.eb=Wa.eb;Za.ve=$b?0:qc;Za.Ud=0;Za.we=$b?0:hc;Za.ye=0;Gb=Cb;for(od--;od-Jb>qd&&od>0;){Cb=this.p.Ci();Cb.ya=m;Cb.rk=3;Cb.s=od-1;this.p.Rj(Cb);Za=this.p.rl(Gb,
Cb,Wa.Ba);Za.la=h;Za.eb=Wa.eb;Za.ve=0;Za.Ud=0;Za.we=0;Za.ye=0;Gb=Cb;od--}Za=this.p.rl(Cb,Hb,Wa.Ba);Za.la=!ic;if(ic)Cb.mi=Hb;Za.eb=Wa.eb;Za.ve=0;Za.Ud=Wb;Za.we=0;Za.ye=Gc}else Wa.la=h}}var ac=this.Qc=[],wb;for(wb=0;wb<=this.Ia;wb++)ac[wb]=0;for(var Wd=this.p.P.f;Wd.next();)Wd.value.T=-1;switch(this.gm){default:case Fn:for(var Rb,bc=this.p.P.f;bc.next();){var Xd=bc.value;Rb=Xd.s;Xd.T=this.Qc[Rb];this.Qc[Rb]++}break;case pn:var De,rd=this.p.P.f;for(De=this.Ia;De>=0;De--){for(;rd.next();)rd.value.s===
De&&rd.value.T===-1&&Gn(this,rd.value);rd.reset()}break;case Hn:var fd,Ic=this.p.P.f;for(fd=0;fd<=this.Ia;fd++){for(;Ic.next();)Ic.value.s===fd&&Ic.value.T===-1&&In(this,Ic.value);Ic.reset()}}this.Us=-1;for(wb=this.te=this.Dp=0;wb<=this.Ia;wb++){if(ac[wb]>ac[this.te]){this.Us=ac[wb]-1;this.te=wb}if(ac[wb]<ac[this.Dp])this.Dp=wb}this.Lp=[];for(wb=0;wb<ac.length;wb++)this.Lp[wb]=[];Wd.reset();for(var cc,Hd;Wd.next();){Hd=Wd.value;cc=Hd.s;this.Lp[cc][Hd.T]=Hd}this.Xa=-1;for(var df=0;df<=this.Ia;df++){for(var Yd=
Jn(this,df),Zd=0,he=this.Qc[df],sd=0;sd<he;sd++){var td=Yd[sd],Zd=Zd+Un(this,td,h);td.K=Zd;Zd=Zd+1;Zd=Zd+Un(this,td,o)}this.Xa=Math.max(this.Xa,Zd-1);ao(this,df,Yd)}var gb=bo(this),ob=co(this),Zc,ha,Ta;for(Zc=0;Zc<this.Jk;Zc++){for(ha=0;ha<=this.Ia;ha++){eo(this,ha,1);fo(this,ha,1,1)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}for(ha=this.Ia;ha>=0;ha--){eo(this,ha,-1);fo(this,ha,-1,-1)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}}ho(this,ob);for(Zc=0;Zc<this.Jk;Zc++){for(ha=0;ha<=this.Ia;ha++){eo(this,ha,
0);fo(this,ha,0,0)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}for(ha=this.Ia;ha>=0;ha--){eo(this,ha,0);fo(this,ha,0,0)}Ta=bo(this);if(Ta<gb){gb=Ta;ob=co(this)}}ho(this,ob);var Ba,xb,jc,ud,vd;switch(this.Ll){case io:break;case jo:for(ud=gb+1;(vd=bo(this))<ud;){ud=vd;for(xb=this.Ia;xb>=0;xb--)for(jc=0;jc<=xb;jc++){for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=jc;ha--)Ba=fo(this,ha,-1,-1)||Ba}Ta=bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=jc;ha--)Ba=fo(this,ha,1,1)||Ba}Ta=
bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=jc;ha<=xb;ha++)Ba=fo(this,ha,1,1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=jc;ha<=xb;ha++)Ba=fo(this,ha,-1,-1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=jc;ha--)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=jc;ha<=xb;ha++)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}}}break;default:case qn:xb=
this.Ia;jc=0;for(ud=gb+1;(vd=bo(this))<ud;){ud=vd;for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=jc;ha--)Ba=fo(this,ha,-1,-1)||Ba}Ta=bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=jc;ha--)Ba=fo(this,ha,1,1)||Ba}Ta=bo(this);if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=jc;ha<=xb;ha++)Ba=fo(this,ha,1,1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=jc;ha<=xb;ha++)Ba=fo(this,ha,-1,-1)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;
ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=xb;ha>=jc;ha--)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}for(Ba=h;Ba;){Ba=o;for(ha=jc;ha<=xb;ha++)Ba=fo(this,ha,0,0)||Ba}if(Ta>=gb)ho(this,ob);else{gb=Ta;ob=co(this)}}}ho(this,ob);var Qa,Sb,ef=(this.zh&ko)!==0,Kf=this.zh===rn;this.p.Lb.count>1E3&&!Kf&&(ef=o);if(ef){var Ca=[],ia;for(ia=0;ia<=this.Ia;ia++)Ca[ia]=0;for(var ie=this.p.P.f,Id,Db;ie.next();){Id=ie.value;Qa=Id.s;Db=Id.K;var wd=Un(this,Id,o);Ca[Qa]=Math.max(Ca[Qa],Db+wd)}for(ie.reset();ie.next();){Id=
ie.value;Qa=Id.s;Db=Id.K;Id.K=((this.Xa-Ca[Qa])*8>>1)+Db*8}this.Xa=this.Xa*8}if((this.zh&lo)!==0)for(Sb=h;Sb;){Sb=o;for(Qa=this.te+1;Qa<=this.Ia;Qa++)Sb=mo(this,Qa,1)||Sb;for(Qa=this.te-1;Qa>=0;Qa--)Sb=mo(this,Qa,-1)||Sb;Sb=mo(this,this.te,0)||Sb}if((this.zh&no)!==0){for(Qa=this.te+1;Qa<=this.Ia;Qa++)oo(this,Qa,1);for(Qa=this.te-1;Qa>=0;Qa--)oo(this,Qa,-1);oo(this,this.te,0)}if(ef){po(this,-1);po(this,1)}if((this.zh&lo)!==0)for(Sb=h;Sb;){Sb=o;Sb=mo(this,this.te,0)||Sb;for(Qa=this.te+1;Qa<=this.Ia;Qa++)Sb=
mo(this,Qa,0)||Sb;for(Qa=this.te-1;Qa>=0;Qa--)Sb=mo(this,Qa,0)||Sb}this.updateParts()}this.Cc=m;this.Ne=h};function qo(a){s&&u.c(a,Fm,Z,"linkMinLength:edge");for(var b=a.D,c=0,a=a.G.nb;a.next();)a.value.D===b&&c++;return c>1?2:1}function ro(a){s&&u.c(a,Fm,Z,"linkLengthWeight:edge");return 1}function so(a){s&&u.c(a,Fm,Z,"linkStraightenWeight:edge");var b=a.G.ya,a=a.D.ya;return b===m&&a===m?8:b===m||a===m?4:1}
function to(a,b,c){if(s){u.c(b,uo,Z,"nodeMinLayerSpace:v");u.e(c,"boolean",Z,"nodeMinLayerSpace:topleft")}return b.ya===m?0:a.O===90||a.O===270?c?b.z.y+10:b.A.height-b.z.y+10:c?b.z.x+10:b.A.width-b.z.x+10}
function Un(a,b,c){if(s){u.c(b,uo,Z,"nodeMinColumnSpace:v");u.e(c,"boolean",Z,"nodeMinColumnSpace:topleft")}if(b.ya===m)return 0;var d=c?b.vw:b.uw;if(d!==f)return d;d=a.O;return d===90||d===270?c?b.vw=b.z.x/a.Oc+1|0:b.uw=(b.A.width-b.z.x)/a.Oc+1|0:c?b.vw=b.z.y/a.Oc+1|0:b.uw=(b.A.height-b.z.y)/a.Oc+1|0}function co(a){if(a.Ok===m)a.Ok=[];for(var b=0,c=a.p.P.f,d;c.next();){d=c.value;a.Ok[b]=d.s;b++;a.Ok[b]=d.K;b++;a.Ok[b]=d.T;b++}return a.Ok}
function ho(a,b){s&&u.c(b,Array,Z,"restoreLayout:layout");for(var c=0,d=a.p.P.f,e;d.next();){e=d.value;e.s=b[c];c++;e.K=b[c];c++;e.T=b[c];c++}}
function vo(a,b,c){if(s){u.i(b,Z,"crossingMatrix:unfixedLayer");u.i(c,Z,"crossingMatrix:direction")}var d=Jn(a,b),e=a.Qc[b];if(!a.et)a.et=[];for(var g=a.et,i,j=0;j<e;j++){i=0;var k=d[j],l=k.mi,n,q;if(l!==m&&l.s===k.s){k=l.T;if(k>j)for(q=j+1;q<k;q++){n=d[q];(n.mi!==l||n.rk!==l.rk)&&i++}else for(q=j-1;q>k;q--){n=d[q];(n.mi!==l||n.rk!==l.rk)&&i++}}var p,t,w,A,F,H;if(c>=0){k=d[j].cf;for(l=0;l<k.count;l++){p=k.j[l];if(p.la&&p.G.s!==b){n=p.G.T;q=p.ye;p=p.we;for(t=l+1;t<k.count;t++){w=k.j[t];if(w.la&&w.G.s!==
b){A=w.G.T;F=w.ye;w=w.we;q<F&&(n>A||n===A&&p>w)&&i++;F<q&&(A>n||A===n&&w>p)&&i++}}}}}if(c<=0){k=d[j].re;for(l=0;l<k.count;l++){p=k.j[l];if(p.la&&p.D.s!==b){n=p.D.T;q=p.ye;p=p.we;for(t=l+1;t<k.count;t++){w=k.j[t];if(w.la&&w.D.s!==b){A=w.D.T;F=w.ye;w=w.we;p<w&&(n>A||n===A&&q>F)&&i++;w<p&&(A>n||A===n&&F>q)&&i++}}}}}g[j*e+j]=i;for(k=j+1;k<e;k++){var x=0,I=0;if(c>=0){i=d[j].cf;H=d[k].cf;for(l=0;l<i.count;l++){p=i.j[l];if(p.la&&p.G.s!==b){n=p.G.T;p=p.we;for(t=0;t<H.count;t++){w=H.j[t];if(w.la&&w.G.s!==
b){A=w.G.T;w=w.we;(n<A||n===A&&p<w)&&I++;(A<n||A===n&&w<p)&&x++}}}}}if(c<=0){i=d[j].re;H=d[k].re;for(l=0;l<i.count;l++){p=i.j[l];if(p.la&&p.D.s!==b){n=p.D.T;q=p.ye;for(t=0;t<H.count;t++){w=H.j[t];if(w.la&&w.D.s!==b){A=w.D.T;F=w.ye;(n<A||n===A&&q<F)&&I++;(A<n||A===n&&F<q)&&x++}}}}}g[j*e+k]=x;g[k*e+j]=I}}ao(a,b,d);return g}function bo(a){var b,c=0,d,e;for(b=0;b<=a.Ia;b++){d=vo(a,b,1);e=a.Qc[b];for(var g=0;g<e;g++)for(var i=g;i<e;i++)c=c+d[g*e+i]}return c}
function wo(a){s&&u.e(h,"boolean",Z,"countBends:weighted");for(var b=0,c=0;c<=a.Ia;c++){var d=a,e=c;if(s){u.i(e,Z,"bends:unfixedLayer");u.i(1,Z,"bends:direction");u.e(h,"boolean",Z,"bends:weighted")}for(var g=Jn(d,e),i=d.Qc[e],j=0,k=f,k=0;k<i;k++){var l=g[k].re,n,q,p;if(typeof l!=="undefined")for(var t=0;t<l.count;t++){n=l.j[t];if(n.la&&n.D.s!==e){q=n.G.K+n.ve;p=n.D.K+n.Ud;j=j+(Math.abs(q-p)+1)*so(n)}}}ao(d,e,g);b=b+j}return b}
Z.prototype.normalize=function(){var a=Infinity;this.Xa=-1;for(var b=this.p.P.f,c;b.next();){c=b.value;a=Math.min(a,c.K-Un(this,c,h));this.Xa=Math.max(this.Xa,c.K+Un(this,c,o))}for(b.reset();b.next();)b.value.K=b.value.K-a;this.Xa=this.Xa-a};
function xo(a,b,c){if(s){u.i(b,Z,"barycenters:unfixedLayer");u.i(c,Z,"barycenters:direction")}var d=Jn(a,b),e=a.Qc[b],g=[],i;for(i=0;i<e;i++){var j=d[i],k=m;if(c<=0)k=j.cf;var l=m;if(c>=0)l=j.re;var n=0,q=0,p=j.mi;if(p!==m&&p.s===j.s){n=n+(p.K-1);q++}if(k!==m)for(p=0;p<k.count;p++){var j=k.j[p],t=j.G;if(j.la&&!j.eb&&t.s!==b){n=n+(t.K+j.ve);q++}}if(l!==m)for(k=0;k<l.count;k++){j=l.j[k];p=j.D;if(j.la&&!j.eb&&p.s!==b){n=n+(p.K+j.Ud);q++}}g[i]=q===0?-1:n/q}ao(a,b,d);return g}
function yo(a,b,c){if(s){u.i(b,Z,"medians:unfixedLayer");u.i(c,Z,"medians:direction")}for(var d=Jn(a,b),e=a.Qc[b],g=[],i=0;i<e;i++){var j=d[i],k=m;if(c<=0)k=j.cf;var l=m;if(c>=0)l=j.re;var n=0,q=[],p=j.mi;if(p!==m&&p.s===j.s){q[n]=p.K-1;n++}if(k!==m)for(p=0;p<k.count;p++){var j=k.j[p],t=j.G;if(j.la&&!j.eb&&t.s!==b){q[n]=t.K+j.ve;n++}}if(l!==m)for(k=0;k<l.count;k++){j=l.j[k];p=j.D;if(j.la&&!j.eb&&p.s!==b){q[n]=p.K+j.Ud;n++}}if(n===0)g[i]=-1;else{q.sort(function(a,b){return a-b});l=n>>1;g[i]=n&1?q[l]:
q[l-1]+q[l]>>1}}ao(a,b,d);return g}function zo(a,b,c,d,e,g){if(s){u.c(b,uo,Z,"tightComponentUnset:v");u.i(c,Z,"tightComponentUnset:component");u.i(d,Z,"tightComponentUnset:unset");u.e(e,"boolean",Z,"tightComponentUnset:forward");u.e(g,"boolean",Z,"tightComponentUnset:backward")}if(b.pb===d){b.pb=c;var i,j;if(e)for(var k=b.nb;k.next();){var l=k.value.D;i=b.s-l.s;j=qo(k.value);i===j&&zo(a,l,c,d,e,g)}if(g)for(k=b.ob;k.next();){l=k.value.G;i=l.s-b.s;j=qo(k.value);i===j&&zo(a,l,c,d,e,g)}}}
function Ao(a,b,c,d,e,g){if(s){u.c(b,uo,Z,"componentUnset:v");u.i(c,Z,"componentUnset:component");u.i(d,Z,"componentUnset:unset");u.e(e,"boolean",Z,"componentUnset:forward");u.e(g,"boolean",Z,"componentUnset:backward")}if(b.pb===d){b.pb=c;if(e)for(var i=b.nb,j;i.next();){j=i.value.D;Ao(a,j,c,d,e,g)}if(g)for(b=b.ob;b.next();){i=b.value.G;Ao(a,i,c,d,e,g)}}}function un(a){s&&u.c(a,Am,Z,"greedyCycleRemovalFindNode:network");for(a=a.P.f;a.next();){var b=a.value;if(b.la)return b}return m}
function vn(a){s&&u.c(a,Am,Z,"greedyCycleRemovalFindSink:network");for(a=a.P.f;a.next();){var b=a.value;if(b.la){for(var c=h,d=b.nb;d.next();)if(d.value.D.la){c=o;break}if(c)return b}}return m}function wn(a){s&&u.c(a,Am,Z,"greedyCycleRemovalFindSource:network");for(a=a.P.f;a.next();){var b=a.value;if(b.la){for(var c=h,d=b.ob;d.next();)if(d.value.G.la){c=o;break}if(c)return b}}return m}
function xn(a,b){s&&u.c(b,uo,Z,"depthFirstSearchCycleRemovalVisit:v");b.lj=a.Kp;a.Kp++;for(var c=b.nb;c.next();){var d=c.value,e=d.D;if(e.lj===-1){d.Lo=h;xn(a,e)}}b.bm=a.Kp;a.Kp++}function zn(a){for(var b=a.p.P.f;b.next();){var c=Bo(a,b.value);a.Ia=Math.max(c,a.Ia)}}function Bo(a,b){s&&u.c(b,uo,Z,"longestPathSinkLayeringLength:v");var c=0;if(b.s===-1){for(var d=b.nb;d.next();)var e=d.value,g=qo(e),c=Math.max(c,Bo(a,e.D)+g);b.s=c}else c=b.s;return c}
function Bn(a,b){s&&u.c(b,uo,Z,"longestPathSourceLayeringLength:v");var c=0;if(b.s===-1){for(var d,e,g=b.ob;g.next();){e=g.value;d=qo(e);c=Math.max(c,Bn(a,e.G)+d)}b.s=c}else c=b.s;return c}
function Cn(a,b){s&&u.c(b,uo,Z,"optimalLinkLengthLayeringDepthFirstSearch:v");if(!b.la){b.la=h;for(var c=b.nb;c.next();)Cn(a,c.value.D);s&&u.c(b,uo,Z,"optimalLinkLengthLayeringPull:v");for(c=a.p.P.f;c.next();)c.value.pb=-1;for(var d=b.ob;d.next();){var e=d.value,g=qo(e);e.G.s-e.D.s>g&&zo(a,e.G,0,-1,h,o)}for(zo(a,b,1,-1,h,h);b.pb!==0;){for(var g=0,d=Infinity,i=0,j=m,k=a.p.P.f;k.next();){var l=k.value;if(l.pb===1){for(var n=0,q=o,p=l.ob;p.next();){var e=p.value,t=e.G,n=n+ro(e);if(t.pb!==1){g=g+ro(e);
t=t.s-l.s;e=qo(e);d=Math.min(d,t-e)}}for(e=l.nb;e.next();){p=e.value;t=p.D;n=n-ro(p);t.pb!==1?g=g-ro(p):q=h}if((j===m||n<i)&&!q){j=l;i=n}}}if(g>0){for(c.reset();c.next();){g=c.value;if(g.pb===1)g.s=g.s+d}b.pb=0}else j.pb=0}s&&u.c(b,uo,Z,"optimalLinkLengthLayeringPush:v");for(c=a.p.P.f;c.next();)c.value.pb=-1;for(zo(a,b,1,-1,h,o);b.pb!==0;){g=0;d=Infinity;i=0;j=m;for(k=a.p.P.f;k.next();){l=k.value;if(l.pb===1){n=0;q=o;for(e=l.ob;e.next();){p=e.value.G;n=n+ro(e.value);p.pb!==1?g=g+ro(e.value):q=h}for(e=
k.value.nb;e.next();){p=e.value;t=p.D;n=n-ro(p);if(t.pb!==1){g=g-ro(p);t=l.s-t.s;p=qo(p);d=Math.min(d,t-p)}}if((j===m||n>i)&&!q){j=l;i=n}}}if(g<0){for(c.reset();c.next();){g=c.value;if(g.pb===1)g.s=g.s-d}b.pb=0}else j.pb=0}}}function En(a,b,c){if(s){u.c(b,Dn,Z,"_oppositeSpotDir:edge");u.e(c,"boolean",Z,"_oppositeSpotDir:from")}return a.O===90?c&&!b.eb||!c&&b.eb?Xb:ec:a.O===180?c&&!b.eb||!c&&b.eb?oc:nc:a.O===270?c&&!b.eb||!c&&b.eb?ec:Xb:c&&!b.eb||!c&&b.eb?nc:oc}
function Gn(a,b){s&&u.c(b,uo,Z,"depthFirstOutInitializeIndicesVisit:v");var c=b.s;b.T=a.Qc[c];a.Qc[c]++;for(var c=b.re.yf(),d=h,e;d;){d=o;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];if(g.ve>i.ve){d=h;c[e]=i;c[e+1]=g}}}for(e=0;e<c.length;e++){d=c[e];if(d.la){d=d.D;d.T===-1&&Gn(a,d)}}}
function In(a,b){s&&u.c(b,uo,Z,"depthFirstInInitializeIndicesVisit:v");var c=b.s;b.T=a.Qc[c];a.Qc[c]++;for(var c=b.cf.yf(),d=h,e;d;){d=o;for(e=0;e<c.length-1;e++){var g=c[e],i=c[e+1];if(g.Ud>i.Ud){d=h;c[e]=i;c[e+1]=g}}}for(e=0;e<c.length;e++){d=c[e];if(d.la){d=d.G;d.T===-1&&In(a,d)}}}
function eo(a,b,c){if(s){u.i(b,Z,"medianBarycenterCrossingReduction:unfixedLayer");u.i(c,Z,"medianBarycenterCrossingReduction:direction")}for(var d=Jn(a,b),e=a.Qc[b],g=yo(a,b,c),i=xo(a,b,c),c=0;c<e;c++){if(i[c]===-1)i[c]=d[c].K;if(g[c]===-1)g[c]=d[c].K}for(var j=h,k;j;){j=o;for(c=0;c<e-1;c++)if(g[c+1]<g[c]||g[c+1]===g[c]&&i[c+1]<i[c]){j=h;k=g[c];g[c]=g[c+1];g[c+1]=k;k=i[c];i[c]=i[c+1];i[c+1]=k;k=d[c];d[c]=d[c+1];d[c+1]=k}}for(c=g=0;c<e;c++){k=d[c];k.T=c;g=g+Un(a,k,h);k.K=g;g=g+1;g=g+Un(a,k,o)}ao(a,
b,d)}
function fo(a,b,c,d){if(s){u.i(b,Z,"adjacentExchangeCrossingReductionBendStraighten:unfixedLayer");u.i(c,Z,"adjacentExchangeCrossingReductionBendStraighten:directionCR");u.e(o,"boolean",Z,"adjacentExchangeCrossingReductionBendStraighten:straighten");u.i(d,Z,"adjacentExchangeCrossingReductionBendStraighten:directionBS")}var d=Jn(a,b),e=a.Qc[b],c=vo(a,b,c),g,i;i=[];for(g=0;g<e;g++)i[g]=-1;var j;j=[];for(g=0;g<e;g++)j[g]=-1;for(var k=o,l=h;l;){l=o;for(g=0;g<e-1;g++){var n=c[d[g].T*e+d[g+1].T],q=c[d[g+
1].T*e+d[g].T],p=0,t=0,w=d[g].K,A=d[g+1].K,F=Un(a,d[g],h),H=Un(a,d[g],o),x=Un(a,d[g+1],h),I=Un(a,d[g+1],o),F=w-F+x,H=A-H+I,y=d[g].ob.f;for(y.reset();y.next();){I=y.value;if(I.la&&I.G.s===b){I=I.G;for(x=0;d[x]!==I;)x++;if(x<g){p=p+2*(g-x);t=t+2*(g+1-x)}x===g+1&&(p=p+1);if(x>g+1){p=p+4*(x-g);t=t+4*(x-(g+1))}}}y=d[g].nb.f;for(y.reset();y.next();){I=y.value;if(I.la&&I.D.s===b){I=I.D;for(x=0;d[x]!==I;)x++;x===g+1&&(t=t+1)}}y=d[g+1].ob.f;for(y.reset();y.next();){I=y.value;if(I.la&&I.G.s===b){I=I.G;for(x=
0;d[x]!==I;)x++;if(x<g){p=p+2*(g+1-x);t=t+2*(g-x)}x===g&&(t=t+1);if(x>g+1){p=p+4*(x-(g+1));t=t+4*(x-g)}}}y=d[g+1].nb.f;for(y.reset();y.next();){I=y.value;if(I.la&&I.D.s===b){I=I.D;for(x=0;d[x]!==I;)x++;x===g&&(p=p+1)}}var x=I=0,y=i[d[g].T],G=j[d[g].T],fa=i[d[g+1].T],R=j[d[g+1].T];if(y!==-1){I=I+Math.abs(y-w);x=x+Math.abs(y-H)}if(G!==-1){I=I+Math.abs(G-w);x=x+Math.abs(G-H)}if(fa!==-1){I=I+Math.abs(fa-A);x=x+Math.abs(fa-F)}if(R!==-1){I=I+Math.abs(R-A);x=x+Math.abs(R-F)}if(t<p-0.5||t===p&&q<n-0.5||t===
p&&q===n&&x<I-0.5){l=k=h;d[g].K=H;d[g+1].K=F;n=d[g];d[g]=d[g+1];d[g+1]=n}}}for(g=0;g<e;g++)d[g].T=g;ao(a,b,d);return k}function mo(a,b,c){if(s){u.i(b,Z,"bendStraighten:unfixedLayer");u.i(c,Z,"bendStraighten:direction")}for(var d=o;Co(a,b,c);)d=h;return d}
function Co(a,b,c){if(s){u.i(b,Z,"shiftbendStraighten:unfixedLayer");u.i(c,Z,"shiftbendStraighten:direction")}var d,e=Jn(a,b),g=a.Qc[b],i=xo(a,b,-1);if(c>0)for(d=0;d<g;d++)i[d]=-1;var j=xo(a,b,1);if(c<0)for(d=0;d<g;d++)j[d]=-1;for(var k=o,l=h;l;){l=o;for(d=0;d<g;d++){var n=e[d].K,q=Un(a,e[d],h),p=Un(a,e[d],o),q=d-1<0||n-e[d-1].K-1>q+Un(a,e[d-1],o)?n-1:n,p=d+1>=g||e[d+1].K-n-1>p+Un(a,e[d+1],h)?n+1:n,t=0,w=0,A=0,F,H,x,I;if(c<=0)for(var y=e[d].ob.f;y.next();){F=y.value;if(F.la&&F.G.s!==b){H=so(F);x=
F.ve;I=F.Ud;F=F.G.K;t=t+(Math.abs(n+I-(F+x))+1)*H;w=w+(Math.abs(q+I-(F+x))+1)*H;A=A+(Math.abs(p+I-(F+x))+1)*H}}if(c>=0)for(y=e[d].nb.f;y.next();){F=y.value;if(F.la&&F.D.s!==b){H=so(F);x=F.ve;I=F.Ud;F=F.D.K;t=t+(Math.abs(n+x-(F+I))+1)*H;w=w+(Math.abs(q+x-(F+I))+1)*H;A=A+(Math.abs(p+x-(F+I))+1)*H}}I=x=H=0;F=i[e[d].T];y=j[e[d].T];if(F!==-1){H=H+Math.abs(F-n);x=x+Math.abs(F-q);I=I+Math.abs(F-p)}if(y!==-1){H=H+Math.abs(y-n);x=x+Math.abs(y-q);I=I+Math.abs(y-p)}if(w<t||w===t&&x<H){l=k=h;e[d].K=q}if(A<t||
A===t&&I<H){l=k=h;e[d].K=p}}}ao(a,b,e);a.normalize();return k}
function oo(a,b,c){if(s){u.i(b,Z,"medianStraighten:unfixedLayer");u.i(c,Z,"medianStraighten:direction")}for(var d=Jn(a,b),e=a.Qc[b],g=yo(a,b,c),i=[],c=0;c<e;c++)i[c]=g[c];for(g=h;g;){g=o;for(c=0;c<e;c++){var j=d[c].K,k=Un(a,d[c],h),l=Un(a,d[c],o),n=0,q;if(i[c]===-1)if(c===0&&c===e-1)n=j;else if(c===0){q=d[c+1].K;n=q-j===l+Un(a,d[c+1],h)?j-1:j}else if(c===e-1){q=d[c-1].K;n=j-q===k+Un(a,d[c-1],o)?j+1:j}else{q=d[c-1].K;k=q+Un(a,d[c-1],o)+k+1;q=d[c+1].K;l=q-Un(a,d[c+1],h)-l-1;n=(k+l)/2|0}else if(c===
0&&c===e-1)n=i[c];else if(c===0){q=d[c+1].K;l=q-Un(a,d[c+1],h)-l-1;n=Math.min(i[c],l)}else if(c===e-1){q=d[c-1].K;k=q+Un(a,d[c-1],o)+k+1;n=Math.max(i[c],k)}else{q=d[c-1].K;k=q+Un(a,d[c-1],o)+k+1;q=d[c+1].K;l=q-Un(a,d[c+1],h)-l-1;k<i[c]&&i[c]<l?n=i[c]:k>=i[c]?n=k:l<=i[c]&&(n=l)}if(n!==j){g=h;d[c].K=n}}}ao(a,b,d);a.normalize()}
function Do(a,b){if(s){u.i(b,Z,"packAux:column");u.i(1,Z,"packAux:direction")}for(var c=h,d=a.p.P.f,e;d.next();){e=d.value;var g=Un(a,e,h),i=Un(a,e,o);if(e.K-g<=b&&e.K+i>=b){c=o;break}}g=o;if(c)for(d.reset();d.next();){e=d.value;if(e.K>b){e.K=e.K-1;g=h}}return g}
function Eo(a,b){if(s){u.i(b,Z,"tightPackAux:column");u.i(1,Z,"tightPackAux:direction")}var c=b,c=b+1,d,e=[],g=[];for(d=0;d<=a.Ia;d++){e[d]=o;g[d]=o}for(var i=a.p.P.f;i.next();){d=i.value;var j=d.K-Un(a,d,h),k=d.K+Un(a,d,o);j<=b&&k>=b&&(e[d.s]=h);j<=c&&k>=c&&(g[d.s]=h)}j=h;c=o;for(d=0;d<=a.Ia;d++)j=j&&!(e[d]&&g[d]);if(j)for(i.reset();i.next();){d=i.value;if(d.K>b){d.K=d.K-1;c=h}}return c}
function po(a,b){s&&u.i(b,Z,"componentPack:direction");for(var c=0;c<=a.Xa;c++)for(;Do(a,c););a.normalize();for(c=0;c<a.Xa;c++)for(;Eo(a,c););a.normalize();var d,e,g,i;if(b>0)for(c=0;c<=a.Xa;c++){d=co(a);e=wo(a);for(g=e+1;e<g;){g=e;Fo(a,c,1);i=wo(a);if(i>e)ho(a,d);else if(i<e){e=i;d=co(a)}}}if(b<0)for(c=a.Xa;c>=0;c--){d=co(a);e=wo(a);for(g=e+1;e<g;){g=e;Fo(a,c,-1);i=wo(a);if(i>e)ho(a,d);else if(i<e){e=i;d=co(a)}}}a.normalize()}
function Fo(a,b,c){if(s){u.i(b,Z,"componentPackAux:column");u.i(c,Z,"componentPackAux:direction")}a.bf=0;for(var d=a.p.P.f,e;d.next();)d.value.pb=-1;if(c>0)for(d.reset();d.next();){e=d.value;if(e.K-Un(a,e,h)<=b)e.pb=a.bf}if(c<0)for(d.reset();d.next();){e=d.value;if(e.K+Un(a,e,o)>=b)e.pb=a.bf}a.bf++;for(d.reset();d.next();){e=d.value;if(e.pb===-1){Ao(a,e,a.bf,-1,h,h);a.bf++}}b=[];for(e=0;e<a.bf*a.bf;e++)b[e]=o;var g=[];for(e=0;e<(a.Ia+1)*(a.Xa+1);e++)g[e]=-1;for(d.reset();d.next();){e=d.value;for(var i=
e.s,j=Math.max(0,e.K-Un(a,e,h)),k=Math.min(a.Xa,e.K+Un(a,e,o));j<=k;j++)g[i*(a.Xa+1)+j]=e.pb}for(e=0;e<=a.Ia;e++){if(c>0)for(j=0;j<a.Xa;j++)g[e*(a.Xa+1)+j]!==-1&&(g[e*(a.Xa+1)+j+1]!==-1&&g[e*(a.Xa+1)+j]!==g[e*(a.Xa+1)+j+1])&&(b[g[e*(a.Xa+1)+j]*a.bf+g[e*(a.Xa+1)+j+1]]=h);if(c<0)for(j=a.Xa;j>0;j--)g[e*(a.Xa+1)+j]!==-1&&(g[e*(a.Xa+1)+j-1]!==-1&&g[e*(a.Xa+1)+j]!==g[e*(a.Xa+1)+j-1])&&(b[g[e*(a.Xa+1)+j]*a.bf+g[e*(a.Xa+1)+j-1]]=h)}g=[];for(e=0;e<a.bf;e++)g[e]=h;i=new z("number");for(i.add(0);i.count!==0;){k=
i.j[i.count-1];i.Se(i.count-1);if(g[k]){g[k]=o;for(e=0;e<a.bf;e++)b[k*a.bf+e]&&i.ec(0,e)}}if(c>0)for(d.reset();d.next();){e=d.value;if(g[e.pb])e.K=e.K-1}if(c<0)for(d.reset();d.next();){e=d.value;if(g[e.pb])e.K=e.K+1}}Z.prototype.commitLayout=Z.prototype.cu=function(){if(this.Al){var a,b;if(this.O===270){a=gc;b=pc}else if(this.O===90){a=pc;b=gc}else if(this.O===180){a=nc;b=oc}else{a=oc;b=nc}for(var c=this.p.Lb.f,d;c.next();){d=c.value.Ba;if(d!==m){d.Ua=a;d.Wa=b}}}this.commitNodes();this.commitLinks()};
Z.prototype.commitNodes=Z.prototype.Bx=function(){this.wg=[];this.Lf=[];this.se=[];this.Rc=[];for(var a=0;a<=this.Ia;a++){this.wg[a]=0;this.Lf[a]=0;this.se[a]=0;this.Rc[a]=0}for(var a=this.p.P.f,b,c;a.next();){b=a.value;c=b.s;this.wg[c]=Math.max(this.wg[c],to(this,b,h));this.Lf[c]=Math.max(this.Lf[c],to(this,b,o))}b=0;for(var d=this.ed,e=0;e<=this.Ia;e++){c=d;this.wg[e]+this.Lf[e]<=0&&(c=0);e>0&&(b=b+c/2);if(this.O===90||this.O===0){b=b+this.Lf[e];this.se[e]=b;b=b+this.wg[e]}else{b=b+this.wg[e];this.se[e]=
b;b=b+this.Lf[e]}e<this.Ia&&(b=b+c/2);this.Rc[e]=b}d=this.Lc.copy();for(e=0;e<=this.Ia;e++)if(this.O===270){this.se[e]=d.y+this.se[e];this.Rc[e]=d.y+this.Rc[e]}else if(this.O===90){this.se[e]=d.y+b-this.se[e];this.Rc[e]=d.y+b-this.Rc[e]}else if(this.O===180){this.se[e]=d.x+this.se[e];this.Rc[e]=d.x+this.Rc[e]}else{this.se[e]=d.x+b-this.se[e];this.Rc[e]=d.x+b-this.Rc[e]}for(a.reset();a.next();){b=a.value;c=b.s;var g=b.K|0;if(this.O===270||this.O===90){e=d.x+this.Oc*g;c=this.se[c]}else{e=this.se[c];
c=d.y+this.Oc*g}b.za=e;b.Aa=c;b.Lh()}};
Z.prototype.commitLinks=Z.prototype.Ax=function(){for(var a=this.p.Lb.f,b,c;a.next();){c=a.value.Ba;if(typeof c!=="undefined"&&c!==m){c.ik();c.Ym();c.Mh()}}for(a.reset();a.next();){c=a.value.Ba;typeof c!=="undefined"&&c!==m&&Jl(c)}for(a.reset();a.next();){b=a.value;c=b.Ba;if(!(typeof c==="undefined"&&c===m)){c.ik();var d=b.G.ya,e=b.D.ya,g=c,i=g.Ac;if(typeof d==="Group"&&d!==g.da)i=d.port;var j=g.md;if(typeof e==="Group"&&e!==g.fa)j=e.port;if(b.la){if(c.Ie===Gj&&c.Y===4){if(b.eb){g=d;d=e;e=g;g=i;i=
j;j=g}var k,l,n,q;if(b.G.K===b.D.K){k=c.Md(d,i,Pl(c),h,o,e,j).copy();l=c.Md(e,j,Ql(c),o,o,d,i).copy();n=new E((2*k.x+l.x)/3,(2*k.y+l.y)/3);q=new E((k.x+2*l.x)/3,(k.y+2*l.y)/3);c.Ym();c.Wc(k);c.Wc(n);c.Wc(q);c.Wc(l)}else{g=b=o;i!==m&&Pl(c)===Tb&&(b=h);j!==m&&Ql(c)===Tb&&(g=h);if(b||g){k=c.h(0).copy();n=c.h(1).copy();q=c.h(2).copy();l=c.h(3).copy()}if(b){if(this.O===90||this.O===270){n.x=k.x;n.y=(k.y+l.y)/2}else{n.x=(k.x+l.x)/2;n.y=k.y}c.w(1,n);c.w(0,c.Md(d,i,Pl(c),h,o,e,j).copy())}if(g){if(this.O===
90||this.O===270){q.x=l.x;q.y=(k.y+l.y)/2}else{q.x=(k.x+l.x)/2;q.y=l.y}c.w(2,q);c.w(3,c.Md(e,j,Ql(c),o,o,d,i).copy())}}}c.Mh()}else if(b.G.s===b.D.s)c.Mh();else{var p=o,t=o,w,A=c.tu+1;if(ug(c)){t=h;w=c.Y;w>4&&c.ib.removeRange(2,w-3)}else if(c.Ie===Gj){p=h;w=c.Y;w>4&&c.ib.removeRange(2,w-3);A=2}else{w=c.Y;var F=Pl(c)===Tb,H=Ql(c)===Tb;w>2&&F&&H?c.ib.removeRange(1,w-2):w>3&&F&&!H?c.ib.removeRange(1,w-3):w>3&&!F&&H?c.ib.removeRange(2,w-2):w>4&&(!F&&!H)&&c.ib.removeRange(2,w-3)}w=b.G;var H=b.D,x;if(b.eb){for(;H!==
m&&w!==H;){x=F=m;for(var I=H.ob.f;I.next();){y=I.value;if(y.Ba===b.Ba){F=y.G;x=y.D;if(F.ya===m)break}}if(F!==w){y=c.h(A-1).copy();I=new E(F.za,F.Aa);if(t)if(this.O===180||this.O===0)if(A===2){c.q(A++,new E(y.x,y.y));c.q(A++,new E(y.x,I.y))}else{x=x!==m?new E(x.za,x.Aa):y.copy();if(x.y!==I.y){x=this.Rc[F.s-1];c.q(A++,new E(x,y.y));c.q(A++,new E(x,I.y))}}else if(A===2){c.q(A++,new E(y.x,y.y));c.q(A++,new E(I.x,y.y))}else{x=x!==m?new E(x.za,x.Aa):y.copy();if(x.x!==I.x){x=this.Rc[F.s-1];c.q(A++,new E(y.x,
x));c.q(A++,new E(I.x,x))}}else if(A===2)if(p){x=Math.max(10,this.wg[H.s]);G=Math.max(10,this.Lf[H.s]);if(this.O===180){H=H.A.x;c.q(A++,new E(H-x,I.y));c.q(A++,new E(H,I.y));c.q(A++,new E(H+G,I.y))}else if(this.O===90){H=H.A.y+H.A.height;c.q(A++,new E(I.x,H+G));c.q(A++,new E(I.x,H));c.q(A++,new E(I.x,H-x))}else if(this.O===270){H=H.A.y;c.q(A++,new E(I.x,H-x));c.q(A++,new E(I.x,H));c.q(A++,new E(I.x,H+G))}else{H=H.A.x+H.A.width;c.q(A++,new E(H+G,I.y));c.q(A++,new E(H,I.y));c.q(A++,new E(H-x,I.y))}}else{c.q(A++,
y);this.O===180||this.O===0?c.q(A++,new E(y.x,I.y)):c.q(A++,new E(I.x,y.y));c.q(A++,new E(I.x,I.y))}else{x=Math.max(10,this.wg[F.s]);G=Math.max(10,this.Lf[F.s]);if(this.O===180){p&&c.q(A++,new E(I.x-x,I.y));c.q(A++,I);p&&c.q(A++,new E(I.x+G,I.y))}else if(this.O===90){p&&c.q(A++,new E(I.x,I.y+G));c.q(A++,I);p&&c.q(A++,new E(I.x,I.y-x))}else if(this.O===270){p&&c.q(A++,new E(I.x,I.y-x));c.q(A++,I);p&&c.q(A++,new E(I.x,I.y+G))}else{p&&c.q(A++,new E(I.x+G,I.y));c.q(A++,I);p&&c.q(A++,new E(I.x-x,I.y))}}}H=
F}if(j===m||!Ql(c).u(Tb)){y=c.h(A-1).copy();I=c.h(A).copy();if(t){F=this.Lf[w.s];if(this.O===180||this.O===0){t=y.y;if(t>=w.A.y&&t<=w.A.bottom){H=w.za+F;t=t<w.A.y+w.A.height/2?w.A.y-this.Oc/2:w.A.bottom+this.Oc/2;c.q(A++,new E(H,y.y));c.q(A++,new E(H,t))}c.q(A++,new E(I.x,t))}else{t=y.x;if(t>=w.A.x&&t<=w.A.right){H=w.Aa+F;t=t<w.A.x+w.A.width/2?w.A.x-this.Oc/2:w.A.right+this.Oc/2;c.q(A++,new E(y.x,H));c.q(A++,new E(t,H))}c.q(A++,new E(t,I.y))}c.q(A++,I)}else if(p){x=Math.max(10,this.wg[w.s]);G=Math.max(10,
this.Lf[w.s]);if(this.O===180){H=w.A.x+w.A.width;c.w(A-2,new E(H,y.y));c.w(A-1,new E(H+G,y.y))}else if(this.O===90){H=w.A.y;c.w(A-2,new E(y.x,H));c.w(A-1,new E(y.x,H-x))}else if(this.O===270){H=w.A.y+w.A.height;c.w(A-2,new E(y.x,H));c.w(A-1,new E(y.x,H+G))}else{H=w.A.x;c.w(A-2,new E(H,y.y));c.w(A-1,new E(H-x,y.y))}}else{this.O===180||this.O===0?c.q(A++,new E(I.x,y.y)):c.q(A++,new E(y.x,I.y));c.q(A++,I)}}}else{for(;w!==m&&w!==H;){x=F=m;w=w.nb.f;for(var y;w.next();){y=w.value;if(y.Ba===b.Ba){F=y.D;
x=y.G;x.ya!==m&&(x=m);if(F.ya===m)break}}var G;if(F!==H){y=c.h(A-1).copy();I=new E(F.za,F.Aa);if(t)if(this.O===180||this.O===0){x=x!==m?new E(x.za,x.Aa):y.copy();if(x.y!==I.y){x=this.Rc[F.s];A===2&&(x=this.O===0?Math.max(x,y.x):Math.min(x,y.x));c.q(A++,new E(x,y.y));c.q(A++,new E(x,I.y))}}else{x=x!==m?new E(x.za,x.Aa):y.copy();if(x.x!==I.x){x=this.Rc[F.s];A===2&&(x=this.O===90?Math.max(x,y.y):Math.min(x,y.y));c.q(A++,new E(y.x,x));c.q(A++,new E(I.x,x))}}else{x=Math.max(10,this.wg[F.s]);G=Math.max(10,
this.Lf[F.s]);if(this.O===180){c.q(A++,new E(I.x+G,I.y));p&&c.q(A++,I);c.q(A++,new E(I.x-x,I.y))}else if(this.O===90){c.q(A++,new E(I.x,I.y-x));p&&c.q(A++,I);c.q(A++,new E(I.x,I.y+G))}else if(this.O===270){c.q(A++,new E(I.x,I.y+G));p&&c.q(A++,I);c.q(A++,new E(I.x,I.y-x))}else{c.q(A++,new E(I.x-x,I.y));p&&c.q(A++,I);c.q(A++,new E(I.x+G,I.y))}}}w=F}if(t){y=c.h(A-1).copy();I=c.h(A).copy();if(this.O===180||this.O===0){if(y.y!==I.y){x=this.O===0?Math.min(Math.max((I.x+y.x)/2,this.Rc[H.s]),I.x):Math.max(Math.min((I.x+
y.x)/2,this.Rc[H.s]),I.x);c.q(A++,new E(x,y.y));c.q(A++,new E(x,I.y))}}else if(y.x!==I.x){x=this.O===90?Math.min(Math.max((I.y+y.y)/2,this.Rc[H.s]),I.y):Math.max(Math.min((I.y+y.y)/2,this.Rc[H.s]),I.y);c.q(A++,new E(y.x,x));c.q(A++,new E(I.x,x))}}}if(g!==m&&p){if(i!==m){if(Pb(Pl(c))){g=c.h(0).copy();p=c.h(2).copy();g.u(p)||c.w(1,new E((g.x+p.x)/2,(g.y+p.y)/2))}c.w(0,c.Md(d,i,Tb,h,o,e,j))}if(j!==m){if(Pb(Ql(c))){g=c.h(c.Y-1);p=c.h(c.Y-3);g.u(p)||c.w(c.Y-2,new E((g.x+p.x)/2,(g.y+p.y)/2))}c.w(c.Y-1,
c.Md(e,j,Tb,o,o,d,i))}}c.Mh();b.Lh()}}}d=new z(W);for(a=this.p.Lb.f;a.next();){c=a.value.Ba;c!==m&&(ug(c)&&!d.contains(c))&&d.add(c)}if(d.count>0)if(this.O===90||this.O===270){s&&u.c(d,z,Z,"adjustOverlapsH:routables");a=0;c=new z(Go);for(k=d.f;k.next();){e=k.value;if(e!==m&&ug(e))for(d=2;d<e.Y-3;d++){i=e.h(d).copy();j=e.h(d+1).copy();if(Ho(i.y,j.y)&&!Ho(i.x,j.x)){l=new Go;l.s=Math.floor(i.y/2);n=e.h(0).copy();q=e.h(e.Y-1).copy();l.bc=n.x*n.x+n.y;l.$c=q.x*q.x+q.y;l.sd=Math.min(i.x,j.x);l.Xc=Math.max(i.x,
j.x);l.T=d;l.Ba=e;if(d+2<e.Y){n=e.h(d-1).copy();q=e.h(d+2).copy();b=0;n.y<i.y?b=q.y<i.y?3:i.x<j.x?2:1:n.y>i.y&&(b=q.y>i.y?0:j.x<i.x?2:1);l.dh=b}c.add(l)}}}if(c.count>1){c.sort(this.WC);for(k=0;k<c.count;){d=c.j[k].s;for(l=k+1;l<c.count&&c.j[l].s===d;)l++;if(l-k>1)for(e=k;e<l;){d=c.j[e].Xc;for(n=k+1;n<l&&c.j[n].sd<d;){d=Math.max(d,c.j[n].Xc);n++}i=n-e;if(i>1){c.Pn(this.Qu,e,e+i);j=1;q=c.j[e].$c;for(d=e;d<n;d++){b=c.j[d];if(b.$c!==q){j++;q=b.$c}}c.Pn(this.VC,e,e+i);p=1;q=c.j[e].bc;for(d=e;d<n;d++){b=
c.j[d];if(b.bc!==q){p++;q=b.bc}}if(j<p){g=o;p=j;q=c.j[e].$c;c.Pn(this.Qu,e,e+i)}else{g=h;q=c.j[e].bc}A=0;for(d=e;d<n;d++){b=c.j[d];if((g?b.bc:b.$c)!==q){A++;q=g?b.bc:b.$c}e=b.Ba;i=e.h(b.T).copy();j=e.h(b.T+1).copy();t=4*(A-(p-1)/2);if(e.Te!==Hf||Io(i.x,i.y+t,j.x,j.y+t)){a++;e.ik();e.w(b.T,new E(i.x,i.y+t));e.w(b.T+1,new E(j.x,j.y+t));e.Mh()}}}e=n}k=l}}}else{s&&u.c(d,z,Z,"adjustOverlapsV:routables");a=0;c=new z(Go);for(k=d.f;k.next();){e=k.value;if(e!==m&&ug(e))for(d=2;d<e.Y-3;d++){i=e.h(d).copy();
j=e.h(d+1).copy();if(Ho(i.x,j.x)&&!Ho(i.y,j.y)){l=new Go;l.s=Math.floor(i.x/2);n=e.h(0).copy();q=e.h(e.Y-1).copy();l.bc=n.x+n.y*n.y;l.$c=q.x+q.y*q.y;l.sd=Math.min(i.y,j.y);l.Xc=Math.max(i.y,j.y);l.T=d;l.Ba=e;if(d+2<e.Y){n=e.h(d-1).copy();q=e.h(d+2).copy();b=0;n.x<i.x?b=q.x<i.x?3:i.y<j.y?2:1:n.x>i.x&&(b=q.x>i.x?0:j.y<i.y?2:1);l.dh=b}c.add(l)}}}if(c.count>1){c.sort(this.WC);for(k=0;k<c.count;){d=c.j[k].s;for(l=k+1;l<c.count&&c.j[l].s===d;)l++;if(l-k>1)for(e=k;e<l;){d=c.j[e].Xc;for(n=k+1;n<l&&c.j[n].sd<
d;){d=Math.max(d,c.j[n].Xc);n++}i=n-e;if(i>1){c.Pn(this.Qu,e,e+i);j=1;q=c.j[e].$c;for(d=e;d<n;d++){b=c.j[d];if(b.$c!==q){j++;q=b.$c}}c.Pn(this.VC,e,e+i);p=1;q=c.j[e].bc;for(d=e;d<n;d++){b=c.j[d];if(b.bc!==q){p++;q=b.bc}}if(j<p){g=o;p=j;q=c.j[e].$c;c.Pn(this.Qu,e,e+i)}else{g=h;q=c.j[e].bc}A=0;for(d=e;d<n;d++){b=c.j[d];if((g?b.bc:b.$c)!==q){A++;q=g?b.bc:b.$c}e=b.Ba;i=e.h(b.T).copy();j=e.h(b.T+1).copy();t=4*(A-(p-1)/2);if(e.Te!==Hf||Io(i.x+t,i.y,j.x+t,j.y)){a++;e.ik();e.w(b.T,new E(i.x+t,i.y));e.w(b.T+
1,new E(j.x+t,j.y));e.Mh()}}}e=n}k=l}}}};function Go(){this.T=this.Xc=this.sd=this.$c=this.bc=this.s=0;this.Ba=m;this.dh=0}u.kd(Go,{sa:h,bc:h,$c:h,sd:h,Xc:h,index:h,link:h,dh:h});Z.prototype.WC=function(a,b){return!(a instanceof Go)||!(b instanceof Go)||a===b?0:a.s<b.s?-1:a.s>b.s?1:a.sd<b.sd?-1:a.sd>b.sd?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:0};
Z.prototype.VC=function(a,b){return!(a instanceof Go)||!(b instanceof Go)||a===b?0:a.bc<b.bc?-1:a.bc>b.bc||a.dh<b.dh?1:a.dh>b.dh||a.sd<b.sd?-1:a.sd>b.sd?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:0};Z.prototype.Qu=function(a,b){return!(a instanceof Go)||!(b instanceof Go)||a===b?0:a.$c<b.$c?-1:a.$c>b.$c||a.dh<b.dh?1:a.dh>b.dh||a.sd<b.sd?-1:a.sd>b.sd?1:a.Xc<b.Xc?-1:a.Xc>b.Xc?1:0};function Ho(a,b){if(s){u.i(a,Z,"isApprox:a");u.i(b,Z,"isApprox:b")}var c=a-b;return c>-1&&c<1}
function Io(a,b,c,d){if(s){u.i(a,Z,"isUnoccupied2:px");u.i(b,Z,"isUnoccupied2:py");u.i(c,Z,"isUnoccupied2:qx");u.i(d,Z,"isUnoccupied2:qy")}return h}function Jn(a,b){var c,d=a.Qc[b];if(d>=a.Qf.length){c=[];var e;for(e=0;e<a.Qf.length;e++)c[e]=a.Qf[e];a.Qf=c}if(typeof a.Qf[d]==="undefined"||a.Qf[d]===m)c=[];else{c=a.Qf[d];a.Qf[d]=m}var d=a.Lp[b],g;for(e=0;e<d.length;e++){g=d[e];g instanceof uo&&(c[g.T]=g)}return c}function ao(a,b,c){a.Qf[a.Qc[b]]=c}u.a(Z,"layerSpacing",Z.prototype.ur);
u.defineProperty(Z,{ur:"layerSpacing"},r("ed"),function(a){if(this.ed!==a&&typeof a==="number"&&a>=0){this.ed=a;this.r()}});u.a(Z,"columnSpacing",Z.prototype.RE);u.defineProperty(Z,{RE:"columnSpacing"},r("Oc"),function(a){if(this.Oc!==a&&typeof a==="number"&&a>=0){this.Oc=a;this.r()}});u.a(Z,"direction",Z.prototype.direction);u.defineProperty(Z,{direction:"direction"},r("O"),function(a){if(this.O!==a&&typeof a==="number"){this.O=a;this.r()}});u.a(Z,"cycleRemoveOption",Z.prototype.fB);
u.defineProperty(Z,{fB:"cycleRemoveOption"},r("Ul"),function(a){if(this.Ul!==a){s&&u.c(a,ja,sn,"cycleRemoveOption");if(a===tn||a===nn){this.Ul=a;this.r()}}});u.a(Z,"layeringOption",Z.prototype.cC);u.defineProperty(Z,{cC:"layeringOption"},r("mm"),function(a){if(this.mm!==a){s&&u.c(a,ja,sn,"layeringOption");if(a===on||a===yn||a===An){this.mm=a;this.r()}}});u.a(Z,"initializeOption",Z.prototype.UB);
u.defineProperty(Z,{UB:"initializeOption"},r("gm"),function(a){if(this.gm!==a){s&&u.c(a,ja,sn,"initializeOption");if(a===pn||a===Hn||a===Fn){this.gm=a;this.r()}}});u.a(Z,"iterations",Z.prototype.KF);u.defineProperty(Z,{KF:"iterations"},r("Jk"),function(a){s&&u.i(a,sn,"iterations");if(this.Jk!==a&&typeof a==="number"&&a>=0){this.Jk=a;this.r()}});u.a(Z,"aggressiveOption",Z.prototype.JA);
u.defineProperty(Z,{JA:"aggressiveOption"},r("Ll"),function(a){if(this.Ll!==a){s&&u.c(a,ja,sn,"cycleRemoveOption");if(a===io||a===qn||a===jo){this.Ll=a;this.r()}}});u.a(Z,"packOption",Z.prototype.aG);u.defineProperty(Z,{aG:"packOption"},r("zh"),function(a){if(this.zh!==a&&typeof a==="number"&&a>=0&&a<8){this.zh=a;this.r()}});u.a(Z,"setsPortSpots",Z.prototype.Al);u.defineProperty(Z,{Al:"setsPortSpots"},r("Ag"),function(a){if(this.Ag!==a&&typeof a==="boolean"){this.Ag=a;this.r()}});
u.m(Z,{tJ:"maxLayer"},r("Ia"));u.m(Z,{rJ:"maxIndex"},r("Us"));u.m(Z,{qJ:"maxColumn"},r("Xa"));u.m(Z,{zJ:"minIndexLayer"},r("Dp"));u.m(Z,{sJ:"maxIndexLayer"},r("te"));var nn;Z.CycleDepthFirst=nn=u.l(Z,"CycleDepthFirst",0);var tn;Z.CycleGreedy=tn=u.l(Z,"CycleGreedy",1);var on;Z.LayerOptimalLinkLength=on=u.l(Z,"LayerOptimalLinkLength",0);var yn;Z.LayerLongestPathSink=yn=u.l(Z,"LayerLongestPathSink",1);var An;Z.LayerLongestPathSource=An=u.l(Z,"LayerLongestPathSource",2);var pn;
Z.InitDepthFirstOut=pn=u.l(Z,"InitDepthFirstOut",0);var Hn;Z.InitDepthFirstIn=Hn=u.l(Z,"InitDepthFirstIn",1);var Fn;Z.InitNaive=Fn=u.l(Z,"InitNaive",2);var io;Z.AggressiveNone=io=u.l(Z,"AggressiveNone",0);var qn;Z.AggressiveLess=qn=u.l(Z,"AggressiveLess",1);var jo;Z.AggressiveMore=jo=u.l(Z,"AggressiveMore",2);Z.PackNone=0;var ko;Z.PackExpand=ko=1;var lo;Z.PackStraighten=lo=2;var no;Z.PackMedian=no=4;var rn;Z.PackAll=rn=7;function sn(){Am.call(this)}u.H("LayeredDigraphNetwork",sn);u.na(sn,Am);
sn.prototype.createVertex=sn.prototype.Ci=function(){return new uo};sn.prototype.createEdge=sn.prototype.an=function(){return new Dn};function uo(){Em.call(this);this.T=this.K=this.s=-1;this.la=o;this.pb=this.bm=this.lj=NaN;this.mi=m;this.rk=0;this.uw=this.vw=f}u.H("LayeredDigraphVertex",uo);u.na(uo,Em);u.a(uo,"layer",uo.prototype.sa);u.defineProperty(uo,{sa:"layer"},r("s"),ba("s"));u.a(uo,"column",uo.prototype.jd);u.defineProperty(uo,{jd:"column"},r("K"),ba("K"));u.a(uo,"index",uo.prototype.index);
u.defineProperty(uo,{index:"index"},r("T"),ba("T"));u.a(uo,"valid",uo.prototype.valid);u.defineProperty(uo,{valid:"valid"},r("la"),ba("la"));u.a(uo,"discover",uo.prototype.bF);u.defineProperty(uo,{bF:"discover"},r("lj"),ba("lj"));u.a(uo,"finish",uo.prototype.finish);u.defineProperty(uo,{finish:"finish"},r("bm"),ba("bm"));u.a(uo,"component",uo.prototype.SE);u.defineProperty(uo,{SE:"component"},r("pb"),ba("pb"));u.a(uo,"near",uo.prototype.YF);
u.defineProperty(uo,{YF:"near"},r("mi"),function(a){a!==m&&u.c(a,uo,uo,"layeredDigraphVertex");this.mi=a});function Dn(){Fm.call(this);this.Lo=this.eb=this.la=o;this.ye=this.we=NaN;this.Ud=this.QG=0}u.H("LayeredDigraphEdge",Dn);u.na(Dn,Fm);u.a(Dn,"valid",Dn.prototype.valid);u.defineProperty(Dn,{valid:"valid"},r("la"),ba("la"));u.a(Dn,"rev",Dn.prototype.rev);u.defineProperty(Dn,{rev:"rev"},r("eb"),ba("eb"));u.a(Dn,"forest",Dn.prototype.nF);u.defineProperty(Dn,{nF:"forest"},r("Lo"),ba("Lo"));
u.a(Dn,"portFromPos",Dn.prototype.cG);u.defineProperty(Dn,{cG:"portFromPos"},r("we"),ba("we"));u.a(Dn,"portToPos",Dn.prototype.eG);u.defineProperty(Dn,{eG:"portToPos"},r("ye"),ba("ye"));u.a(Dn,"portFromColOffset",Dn.prototype.bG);u.defineProperty(Dn,{bG:"portFromColOffset"},r("ve"),ba("ve"));u.a(Dn,"portToColOffset",Dn.prototype.dG);u.defineProperty(Dn,{dG:"portToColOffset"},r("Ud"),ba("Ud"));
function Y(){Dh.call(this);this.lc=new z(U);this.$b=Jo;this.xq=Ko;this.uc=Lo;this.Ue=(new eb(10,10)).freeze();this.S=new $;this.R=new $}u.H("TreeLayout",Y);u.na(Y,Dh);Y.prototype.cloneProtected=Y.prototype.fb=function(a){Dh.prototype.fb.call(this,a);a.$b=this.$b;a.xq=this.xq;a.uc=this.uc;a.Ue=this.Ue.B();Mo(a.S,this.S);Mo(a.R,this.R)};Y.prototype.createNetwork=Y.prototype.gu=function(){var a=new No;Bm(a,this);return a};
Y.prototype.makeNetwork=Y.prototype.RF=function(a){var b=this.createNetwork();if(a instanceof B){Oo(this,b,a.fk,h);Oo(this,b,a.links,h)}else a instanceof V?Oo(this,b,a.fc,o):a.f&&Oo(this,b,a.f,o);return b};
function Oo(a,b,c,d){for(c=c.f;c.next();){var e=c.value;if(e instanceof U&&e.Vq()&&e.hd!=="Comment"&&(!d||e.sr))e.Li||(e instanceof V&&e.rb===m?Oo(a,b,e.fc,o):b.Nm(e))}for(c.reset();c.next();){e=c.value;if(e instanceof W&&e.Vq()&&e.hd!=="Comment"&&(!d||e.sr)){var g=e.da,a=e.fa;if(!(g===m||a===m||g===a)&&g.hd!=="Comment"&&a.hd!=="Comment"){g=b.qu(g);a=b.qu(a);g!==m&&a!==m&&b.rl(g,a,e)}}}}
Y.prototype.doLayout=Y.prototype.ar=function(a){if(this.Cc===m)this.Cc=this.makeNetwork(a);if(this.lc===m)this.lc=new z(U);if(this.Id!==Po)this.Lc=Dm(this,this.Lc);if(this.p.P.count>0){this.p.ku();for(var b=this.p.P.f;b.next();){a=b.value;a.tj=o;a.Kk=0;a.cb=m;a.yb=[]}for(var c=this.lc.f;c.next();){b=c.value;a=this.p.be(b);a===m&&this.lc.remove(b)}if(this.lc.length===0){for(a=this.p.P.f;a.next();){b=a.value;switch(this.$b){case Jo:b.ob.count===0&&this.lc.add(b.ya);break;case Qo:b.nb.count===0&&this.lc.add(b.ya);
break;default:u.g("Unhandled path value "+this.$b.toString())}}if(this.lc.count===0){a=999999;b=m;for(c=this.p.P.f;c.next();){var d=c.value;switch(this.$b){case Jo:if(d.ob.count<a){a=d.ob.count;b=d}break;case Qo:if(d.nb.count<a){a=d.nb.count;b=d}break;default:u.g("Unhandled path value "+this.$b.toString())}}b!==m&&this.lc.add(b.ya)}}for(c=this.lc.f;c.next();){b=c.value;a=this.p.be(b);if(a!==m&&!a.tj){a.tj=h;Ro(this,a)}}for(a=this.lc.f;a.next();){b=this.p.be(a.value);So(this,b)}for(a=this.lc.f;a.next();){b=
this.p.be(a.value);To(this,b)}for(a=this.lc.f;a.next();)Uo(this,this.p.be(a.value));for(a=this.p.P.f;a.next();)this.DA(a.value);for(a=this.lc.f;a.next();)Vo(this,this.p.be(a.value));if(this.uc===Po)for(a=this.lc.f;a.next();){c=a.value;b=this.p.be(c);d=c.position;c=d.x;d=d.y;isFinite(c)||(c=0);isFinite(d)||(d=0);Wo(this,b,c,d)}else{d=this.Lc.copy();for(a=this.lc.f;a.next();){c=a.value;b=this.p.be(c);if(b!==m){Wo(this,b,d.x+b.ra.x,d.y+b.ra.y);switch(this.uc){case Lo:d.y=d.y+(b.Ca.height+this.Ue.height);
break;case Xo:d.x=d.x+(b.Ca.width+this.Ue.width);break;default:u.g("Unhandled arrangement value "+this.uc.toString())}}}d.freeze()}this.updateParts()}this.lc=this.Cc=m;this.Ne=h};
function Ro(a,b){s&&u.c(b,$,Y,"walkTree:v");if(b!==m){var c,d,e;switch(a.$b){case Jo:if(b.nb.count>0){c=new z($);for(d=b.aF;d.next();){e=d.value;Yo(a,b,e)&&c.add(e)}if(c.count>0)b.yb=c.yf()}break;case Qo:if(b.ob.count>0){c=new z($);for(d=b.yG;d.next();){e=d.value;Yo(a,b,e)&&c.add(e)}if(c.count>0)b.yb=c.yf()}break;default:u.g("Unhandled path value"+a.$b.toString())}d=b.yb;var g=d.length;for(c=0;c<g;c++){e=d[c];e.tj=h;e.Kk=b.Kk+1;e.cb=b;a.lc.remove(e.ya)}for(c=0;c<g;c++){e=d[c];Ro(a,e)}}}
function Yo(a,b,c){s&&u.c(b,$,Y,"walkOK:v");s&&u.c(c,$,Y,"walkOK:c");if(c.tj){var d;s&&u.c(c,$,Y,"isAncestor:a");s&&u.c(b,$,Y,"isAncestor:b");if(b===m)d=o;else{for(d=b.cb;d!==m&&d!==c;)d=d.cb;d=d===c}if(d||c.Kk>b.Kk)return o;a.removeChild(c.cb,c)}return h}
Y.prototype.removeChild=function(a,b){s&&u.c(a,$,Y,"removeChild:p");s&&u.c(b,$,Y,"removeChild:c");if(a!==m&&b!==m){var c=a.yb,d=0,e;for(e=0;e<c.length;e++)c[e]===b&&d++;if(d>0){var d=Array(c.length-d),g=0;for(e=0;e<c.length;e++)c[e]!==b&&(d[g++]=c[e]);a.yb=d}}};
function So(a,b){s&&u.c(b,$,Y,"initializeTree:v");if(b!==m){s&&u.c(b,$,Y,"initializeTreeVertexValues:v");var c=Zo(a,b);Mo(b,c);if(b.cb!==m&&b.cb.ka===$o){for(var c=b.Ka,d=b.cb.yb,e=0;e<d.length;){if(b===d[e])break;e++}e%2===0?e!==d.length-1&&(c=c===90?180:c===180?270:c===270?180:270):c=c===90?0:c===180?90:c===270?0:90;b.Ka=c}d=b.ya;if(d!==m){c=d.ga.width;d=d.ga.height;b.width=c;b.height=d;b.uu=c/2;b.vu=d/2}b.tj=h;b.ka===$o&&ap(b);for(var c=0,d=b.dl,e=0,g=b.yb,i=g.length,j=0;j<i;j++){var k=g[j];So(a,
k);c=c+(k.xs+1);d=Math.max(d,k.Ts);e=Math.max(e,k.uh)}b.xs=c;b.Ts=d;b.uh=d>0?e+1:0}}function Zo(a,b){s&&u.c(b,$,Y,"mom:v");switch(a.xq){default:case Ko:return b.cb!==m?b.cb:a.S;case bp:return b.cb===m?a.S:b.cb.cb===m?a.R:b.cb;case cp:if(b.cb!==m)return b.cb.cb!==m?b.cb.cb:a.R;case dp:var c=h;if(b.dl===0)c=o;else for(var d=b.yb,e=d.length,g=0;g<e;g++)if(d[g].dl>0){c=o;break}return c&&b.cb!==m?a.R:b.cb!==m?b.cb:a.S}}
function To(a,b){s&&u.c(b,$,Y,"assignTree:v");if(b!==m){s&&u.c(b,$,Y,"assignTreeVertexValues:v");for(var c=b.yb,d=c.length,e=0;e<d;e++)To(a,c[e])}}function Uo(a,b){s&&u.c(b,$,Y,"sortTree:v");if(b!==m){b.ka!==$o&&ap(b);for(var c=b.yb,d=c.length,e=0;e<d;e++)Uo(a,c[e])}}
function ap(a){s&&u.c(a,$,Y,"sortTreeVertexChildren:v");switch(a.Tb){case ep:break;case fp:a.yb.reverse();break;case gp:a.yb.sort(a.Rb);break;case hp:a.yb.sort(a.Rb);a.yb.reverse();break;default:u.g("Unhandled sorting value "+a.Tb.toString())}}
Y.prototype.DA=function(a){s&&u.c(a,$,Y,"addComments:v");var b=a.Nb,c=a.cb,d=0,e=ip,e=o;if(c!==m){d=c.Nb;e=c.ka;e=jp(e)}var b=b===90||b===270,d=d===90||d===270,c=a.dl===0,g=new J,i=g.width,g=g.height,j=0,k=a.cd;if(a.ya!==m)for(var l=a.ya.yB();l.next();){var n=l.value;if(n.hd==="Comment"&&n.gb()){if(a.dd===m)a.dd=[];a.dd.push(n);n.Sh();n=n.ga;if(b&&!c||!e&&!d&&c||e&&d&&c){i=Math.max(i,n.width);g=g+(n.height+Math.abs(j))}else{i=i+(n.width+Math.abs(j));g=Math.max(g,n.height)}j=k}}if(a.dd!==m){if(b&&
!c||!e&&!d&&c||e&&d&&c){i=i+Math.abs(a.Qb);g=Math.max(0,g-a.height)}else{g=g+Math.abs(a.Qb);i=Math.max(0,i-a.width)}a.hb=new J(0,0,a.A.width+i,a.A.height+g)}};function jp(a){return a===kp||a===$o||a===lp||a===mp}function np(a){return a===kp||a===$o}function op(a){s&&u.c(a,$,Y,"isLeftSideBus:v");var b=a.cb;if(b!==m){var c=b.lb;if(jp(c)){if(np(c)){b=b.children;for(c=0;c<b.length;){if(a===b[c])break;c++}return c%2===0}if(c===lp)return h}}return o}
function Vo(a,b){s&&u.c(b,$,Y,"layoutTree:v");if(b!==m){var c=b.yb,d=c.length,e,g;for(g=0;g<d;g++){e=c[g];Vo(a,e)}switch(b.Df){case pp:qp(a,b);break;case rp:if(b.ka===$o)qp(a,b);else{s&&u.c(b,$,Y,"layoutTreeBlock:v");if(b.dl===0){e=b.cb;c=o;d=0;g=ip;if(e!==m){d=e.Nb;g=e.ka;c=jp(g)}e=op(b);b.N=new E(0,0);b.Ca=new eb(b.width,b.height);b.ra=b.cb!==m&&b.dd!==m&&((d===180||d===270)&&!c||e)?d===180&&!c||(d===90||d===270)&&e?new E(b.width-b.z.x*2,0):new E(0,b.height-b.z.y*2):new E(0,0);b.pp=m;b.cq=m}else{var i=
sp(b),c=i===90||i===270,j=0,k,l,n=b.yb,q=n.length;for(k=0;k<q;k++){l=n[k];j=Math.max(j,c?l.Ca.width:l.Ca.height)}var p=b.ka;e=p===tp;var t=p===up,w=jp(p),A=Math.max(0,b.Af),d=vp(b),F=b.Vc,H=wp(b),x=b.Vd,I=0;if(e||t||b.Kj||b.Lj&&b.uh===1)I=Math.max(0,b.Kc);e=b.width;g=b.height;var y=0,G=0,fa=0,R=m,S=m,da=new eb(0,0),ma=0,ua=0,sa=0,ib=0,db=0,$a=0;l=0;w&&!np(p)&&i>135&&n.reverse();if(np(p))if(q>1)for(k=0;k<q;k++)k%2===0&&k!==q-1?$a=Math.max($a,c?n[k].Ca.width:n[k].Ca.height):k%2!==0&&(l=Math.max(l,c?
n[k].Ca.width:n[k].Ca.height));else q===1&&($a=c?n[0].Ca.width:n[0].Ca.height);var Oa;if(w){switch(p){case kp:k=i<135?xp(b,n,$a,y,G):yp(b,n,$a,y,G);$a=k[0];y=k[1];G=k[2];break;case lp:for(k=0;k<q;k++){l=n[k];Oa=l.Ca;R=ib===0?0:x;if(c){l.N=new E(j-Oa.width,ua+R);y=Math.max(y,Oa.width);G=Math.max(G,ua+R+Oa.height);ua=ua+(R+Oa.height)}else{l.N=new E(ma+R,j-Oa.height);y=Math.max(y,ma+R+Oa.width);G=Math.max(G,Oa.height);ma=ma+(R+Oa.width)}ib++}break;case mp:for(k=0;k<q;k++){l=n[k];Oa=l.Ca;R=ib===0?0:x;
if(c){l.N=new E(F/2+b.z.x,ua+R);y=Math.max(y,Oa.width);G=Math.max(G,ua+R+Oa.height);ua=ua+(R+Oa.height)}else{l.N=new E(ma+R,F/2+b.z.y);y=Math.max(y,ma+R+Oa.width);G=Math.max(G,Oa.height);ma=ma+(R+Oa.width)}ib++}}R=[];S=[];if(c){R[0]=new E(0,0);R[1]=new E(0,G);S[0]=new E(y,0)}else{R[0]=new E(0,0);R[1]=new E(y,0);S[0]=new E(0,G)}S[1]=new E(y,G)}else for(var fb,Va=0;Va<q;Va++){l=n[Va];Oa=l.Ca;if(c){if(A>0&&ib>0&&ma+F+Oa.width>A){ma<j&&zp(b,p,j-ma,0,db,Va-1);sa++;ib=0;db=Va;fa=G;ma=0;ua=i>135?-G-x:G+
x}Ap(a,l,new E(0,ua));fb=0;if(ib===0){R=l.pp;S=l.cq;da=Oa.copy();if(R===m||S===m||i!==sp(l)){R=[];S=[];R[0]=new E(0,0);R[1]=new E(0,da.height);S[0]=new E(da.width,0);S[1]=new E(da.width,da.height)}}else{k=Gp(b,l,R,S,da.width,da.height);fb=k[0];R=k[1];S=k[2];da.width=k[3];da.height=k[4];if(ma<Oa.width&&fb<0){Hp(b,-fb,0,db,Va-1);Ip(R,-fb,0);Ip(S,-fb,0);fb=0}}l.N=new E(fb,ua);y=Math.max(y,da.width);G=Math.max(G,fa+(sa===0?0:x)+Oa.height);ma=da.width}else{if(A>0&&ib>0&&ua+F+Oa.height>A){ua<j&&zp(b,p,
0,j-ua,db,Va-1);sa++;ib=0;db=Va;fa=y;ua=0;ma=i>135?-y-x:y+x}Ap(a,l,new E(ma,0));fb=0;if(ib===0){R=l.pp;S=l.cq;da=Oa.copy();if(R===m||S===m||i!==sp(l)){R=[];S=[];R[0]=new E(0,0);R[1]=new E(da.width,0);S[0]=new E(0,da.height);S[1]=new E(da.width,da.height)}}else{k=Gp(b,l,R,S,da.width,da.height);fb=k[0];R=k[1];S=k[2];da.width=k[3];da.height=k[4];if(ua<Oa.height&&fb<0){Hp(b,0,-fb,db,Va-1);Ip(R,0,-fb);Ip(S,0,-fb);fb=0}}l.N=new E(ma,fb);G=Math.max(G,da.height);y=Math.max(y,fa+(sa===0?0:x)+Oa.width);ua=
da.height}ib++}if(sa>0)if(c){G=G+Math.max(0,d);ma<y&&zp(b,p,y-ma,0,db,q-1);if(I>0){t||Hp(b,I,0,0,q-1);y=y+I}}else{y=y+Math.max(0,d);ua<G&&zp(b,p,0,G-ua,db,q-1);if(I>0){t||Hp(b,0,I,0,q-1);G=G+I}}j=new E(0,0);switch(p){case Jp:c?j.x=j.x+(y/2-b.z.x-H/2):j.y=j.y+(G/2-b.z.y-H/2);break;case ip:if(sa>0)c?j.x=j.x+(y/2-b.z.x-H/2):j.y=j.y+(G/2-b.z.y-H/2);else if(c){k=n[0].N.x+n[0].ra.x;t=n[q-1].N.x+n[q-1].ra.x+n[q-1].z.x*2;j.x=j.x+((t+k)/2-b.z.x-H/2)}else{k=n[0].N.y+n[0].ra.y;t=n[q-1].N.y+n[q-1].ra.y+n[q-1].z.y*
2;j.y=j.y+((t+k)/2-b.z.y-H/2)}break;case tp:if(c){j.x=j.x-H;y=y+H}else{j.y=j.y-H;G=G+H}break;case up:if(c){j.x=j.x+(y-b.width+H);y=y+H}else{j.y=j.y+(G-b.height+H);G=G+H}break;case kp:c?j.x=q>1?j.x+($a+F/2-b.z.x):j.x+(n[0].z.x-b.z.x+n[0].ra.x):j.y=q>1?j.y+($a+F/2-b.z.y):j.y+(n[0].z.y-b.z.y+n[0].ra.y);break;case lp:c?j.x=j.x+(y+F/2-b.z.x):j.y=j.y+(G+F/2-b.z.y);break;case mp:break;default:u.g("Unhandled alignment value "+p.toString())}for(k=0;k<q;k++){l=n[k];l.N=c?new E(l.N.x+l.ra.x-j.x,l.N.y+(i>135?
(w?-G:-l.Ca.height)+l.ra.y-d:g+d+l.ra.y)):new E(l.N.x+(i>135?(w?-y:-l.Ca.width)+l.ra.x-d:e+d+l.ra.x),l.N.y+l.ra.y-j.y)}n=new eb(0,0);if(w)if(c){y=Kp(b,y,j.x);if(j.x<0)j.x=0;if(i>135)j.y=j.y+(G+d);G=G+(g+d);if(p===mp)n.width=n.width+(F/2+b.z.x);n.height=n.height+(g+d)}else{if(i>135)j.x=j.x+(y+d);y=y+(e+d);G=Lp(b,G,j.y);if(j.y<0)j.y=0;if(p===mp)n.height=n.height+(F/2+b.z.y);n.width=n.width+(e+d)}else if(c){if(b.dd===m){if(e>y){p=Mp(p,e-y,0);n.width=p[0];n.height=p[1];y=e;j.x=0}}else y=Kp(b,y,j.x);if(j.x<
0){n.width=n.width-j.x;j.x=0}if(i>135)j.y=j.y+(G+d);G=Math.max(Math.max(G,g),G+g+d);n.height=n.height+(g+d)}else{if(i>135)j.x=j.x+(y+d);y=Math.max(Math.max(y,e),y+e+d);if(b.dd===m){if(g>G){p=Mp(p,0,g-G);n.width=p[0];n.height=p[1];G=g;j.y=0}}else G=Lp(b,G,j.y);if(j.y<0){n.height=n.height-j.y;j.y=0}n.width=n.width+(e+d)}if(sa>0){i=[];p=[];if(c){i[2]=new E(0,g+d);i[3]=new E(i[2].x,G);p[2]=new E(y,i[2].y);p[3]=new E(p[2].x,i[3].y)}else{i[2]=new E(e+d,0);i[3]=new E(y,i[2].y);p[2]=new E(i[2].x,G);p[3]=
new E(i[3].x,p[2].y)}}else{i=[];p=[];for(k=0;k<R.length;k++){w=R[k];i[k+2]=new E(w.x+n.width,w.y+n.height)}for(k=0;k<S.length;k++){w=S[k];p[k+2]=new E(w.x+n.width,w.y+n.height)}}if(c){i[0]=new E(j.x,0);i[1]=new E(i[0].x,g);i[2].y<i[1].y&&(i[2].x>i[0].x?i[2]=i[1].copy():i[1]=i[2].copy());i[3].y<i[2].y&&(i[3].x>i[0].x?i[3]=i[2].copy():i[2]=i[3].copy());p[0]=new E(j.x+e,0);p[1]=new E(p[0].x,g);p[2].y<p[1].y&&(p[2].x<p[0].x?p[2]=p[1].copy():p[1]=p[2].copy());p[3].y<p[2].y&&(p[3].x<p[0].x?p[3]=p[2].copy():
p[2]=p[3].copy());i[2].y=i[2].y-d/2;p[2].y=p[2].y-d/2}else{i[0]=new E(0,j.y);i[1]=new E(e,i[0].y);i[2].x<i[1].x&&(i[2].y>i[0].y?i[2]=i[1].copy():i[1]=i[2].copy());i[3].x<i[2].x&&(i[3].y>i[0].y?i[3]=i[2].copy():i[2]=i[3].copy());p[0]=new E(0,j.y+g);p[1]=new E(e,p[0].y);p[2].x<p[1].x&&(p[2].y<p[0].y?p[2]=p[1].copy():p[1]=p[2].copy());p[3].x<p[2].x&&(p[3].y<p[0].y?p[3]=p[2].copy():p[2]=p[3].copy());i[2].x=i[2].x-d/2;p[2].x=p[2].x-d/2}b.pp=i;b.cq=p;b.ra=j;b.Ca=new eb(y,G)}}break;default:u.g("Unhandled compaction value "+
b.Df.toString())}}}
function qp(a,b){s&&u.c(b,$,Y,"layoutTreeNone:v");if(b.dl===0){var c=b.cb,d=o,e=0,g=ip;if(c!==m){e=c.Nb;g=c.ka;d=jp(g)}c=op(b);b.N=new E(0,0);b.Ca=new eb(b.width,b.height);b.ra=b.cb!==m&&b.dd!==m&&((e===180||e===270)&&!d||c)?e===180&&!d||(e===90||e===270)&&c?new E(b.width-b.z.x*2,0):new E(0,b.height-b.z.y*2):new E(0,0)}else{var d=sp(b),e=d===90||d===270,i=0,j,k,c=b.yb,g=c.length,l;for(j=0;j<g;j++){k=c[j];i=Math.max(i,e?k.Ca.width:k.Ca.height)}var n=b.ka,q=n===tp,p=n===up,t=jp(n),w=Math.max(0,b.Af),
A=vp(b),F=b.Vc,H=wp(b),x=q||p?0:H/2,I=b.Vd,y=0;if(q||p||b.Kj||b.Lj&&b.uh===1)y=Math.max(0,b.Kc);var q=b.width,G=b.height,fa=0,R=0,S=0,da=0,ma=0,ua=0,sa=0,ib=0,db=0,$a=0;t&&!np(n)&&d>135&&c.reverse();if(np(n))if(g>1)for(j=0;j<g;j++){k=c[j];l=k.Ca;j%2===0&&j!==g-1?db=Math.max(db,(e?l.width:l.height)+Np(k)-F):j%2!==0&&($a=Math.max($a,(e?l.width:l.height)+Np(k)-F))}else g===1&&(db=e?c[0].Ca.width:c[0].Ca.height);if(t)switch(n){case kp:case $o:k=[];k=d<135?xp(b,c,db,fa,R):yp(b,c,db,fa,R);db=k[0];fa=k[1];
R=k[2];break;case lp:for(j=0;j<g;j++){k=c[j];l=k.Ca;w=sa===0?0:I;if(e){k.N=new E(i-l.width,ma+w);fa=Math.max(fa,l.width);R=Math.max(R,ma+w+l.height);ma=ma+(w+l.height)}else{k.N=new E(da+w,i-l.height);fa=Math.max(fa,da+w+l.width);R=Math.max(R,l.height);da=da+(w+l.width)}sa++}break;case mp:for(i=0;i<g;i++){k=c[i];l=k.Ca;w=sa===0?0:I;if(e){k.N=new E(F/2+b.z.x,ma+w);fa=Math.max(fa,l.width);R=Math.max(R,ma+w+l.height);ma=ma+(w+l.height)}else{k.N=new E(da+w,F/2+b.z.y);fa=Math.max(fa,da+w+l.width);R=Math.max(R,
l.height);da=da+(w+l.width)}sa++}}else for($a=0;$a<g;$a++){k=c[$a];l=k.Ca;if(e){if(w>0&&sa>0&&da+F+l.width>w){da<i&&zp(b,n,i-da,0,ib,$a-1);ua++;sa=0;ib=$a;S=R;da=0;ma=d>135?-R-I:R+I}j=sa===0?x:F;Ap(a,k,new E(0,ma));k.N=new E(da+j,ma);fa=Math.max(fa,da+j+l.width);R=Math.max(R,S+(ua===0?0:I)+l.height);da=da+(j+l.width)}else{if(w>0&&sa>0&&ma+F+l.height>w){ma<i&&zp(b,n,0,i-ma,ib,$a-1);ua++;sa=0;ib=$a;S=fa;ma=0;da=d>135?-fa-I:fa+I}j=sa===0?x:F;Ap(a,k,new E(da,0));k.N=new E(da,ma+j);R=Math.max(R,ma+j+l.height);
fa=Math.max(fa,S+(ua===0?0:I)+l.width);ma=ma+(j+l.height)}sa++}if(ua>0)if(e){R=R+Math.max(0,A);da<fa&&zp(b,n,fa-da,0,ib,g-1);if(y>0){p||Hp(b,y,0,0,g-1);fa=fa+y}}else{fa=fa+Math.max(0,A);ma<R&&zp(b,n,0,R-ma,ib,g-1);if(y>0){p||Hp(b,0,y,0,g-1);R=R+y}}p=new E(0,0);switch(n){case Jp:e?p.x=p.x+(fa/2-b.z.x-H/2):p.y=p.y+(R/2-b.z.y-H/2);break;case ip:if(ua>0)e?p.x=p.x+(fa/2-b.z.x-H/2):p.y=p.y+(R/2-b.z.y-H/2);else if(e){n=c[0].N.x+c[0].ra.x;F=c[g-1].N.x+c[g-1].ra.x+c[g-1].z.x*2;p.x=p.x+(n+(F-n)/2-b.z.x-H/2)}else{n=
c[0].N.y+c[0].ra.y;F=c[g-1].N.y+c[g-1].ra.y+c[g-1].z.y*2;p.y=p.y+(n+(F-n)/2-b.z.y-H/2)}break;case tp:if(e){p.x=p.x-H;fa=fa+H}else{p.y=p.y-H;R=R+H}break;case up:if(e){p.x=p.x+(fa-b.width+H);fa=fa+H}else{p.y=p.y+(R-b.height+H);R=R+H}break;case kp:case $o:e?p.x=g>1?p.x+(db+F/2-b.z.x):p.x+(c[0].z.x-b.z.x+c[0].ra.x):p.y=g>1?p.y+(db+F/2-b.z.y):p.y+(c[0].z.y-b.z.y+c[0].ra.y);break;case lp:e?p.x=p.x+(fa+F/2-b.z.x):p.y=p.y+(R+F/2-b.z.y);break;case mp:break;default:u.g("Unhandled alignment value "+n.toString())}for(j=
0;j<g;j++){k=c[j];k.N=e?new E(k.N.x+k.ra.x-p.x,k.N.y+(d>135?(t?-R:-k.Ca.height)+k.ra.y-A:G+A+k.ra.y)):new E(k.N.x+(d>135?(t?-fa:-k.Ca.width)+k.ra.x-A:q+A+k.ra.x),k.N.y+k.ra.y-p.y)}if(e){fa=Kp(b,fa,p.x);if(p.x<0)p.x=0;if(d>135)p.y=p.y+(R+A);R=R+(G+A)}else{if(d>135)p.x=p.x+(fa+A);fa=fa+(q+A);R=Lp(b,R,p.y);if(p.y<0)p.y=0}b.ra=p;b.Ca=new eb(fa,R)}}
function xp(a,b,c,d,e){s&&u.c(a,$,Y,"layoutBusChildrenPosDir:v");var g=b.length,i,j;if(g===0)return a=[c,d,e];if(g===1){i=b[0];j=i.Ca;d=j.width;e=j.height;return a=[c,d,e]}var k=a.Vc,l=a.Vd,n=sp(a)===90,q=0,p=0,t=0,w=0,A=0,F=0,w=F=0,H,x;for(H=0;H<g;H++)if(!(H%2!==0||g>1&&H===g-1)){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;i.N=new E(c-(j.width+F),t+x);d=Math.max(d,j.width+F);e=Math.max(e,t+x+j.height);t=t+(x+j.height)}else{F=Np(i)-k;i.N=new E(p+x,c-(j.height+F));e=Math.max(e,j.height+F);d=Math.max(d,
p+x+j.width);p=p+(x+j.width)}q++}q=0;w=p;A=t;if(n){p=c+k;t=0}else{p=0;t=c+k}for(H=0;H<g;H++)if(H%2!==0){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;i.N=new E(p+F,t+x);d=Math.max(d,p+j.width+F);e=Math.max(e,t+x+j.height);t=t+(x+j.height)}else{F=Np(i)-k;i.N=new E(p+x,t+F);d=Math.max(d,p+x+j.width);e=Math.max(e,t+j.height+F);p=p+(x+j.width)}q++}if(g>1&&g%2===1){i=b[g-1];j=i.Ca;if(n){b=Op(i,Math.max(Math.abs(A),Math.abs(t)));i.N=new E(c+k/2-i.z.x-i.ra.x,e+b);w=c+k/2-i.z.x-i.ra.x;d=Math.max(d,w+j.width);
w<0&&(d=d-w);e=Math.max(e,Math.max(A,t)+b+j.height);i.N.x<0&&(c=Pp(a,i.N.x,o,c,k))}else{b=Op(i,Math.max(Math.abs(w),Math.abs(p)));i.N=new E(d+b,c+k/2-i.z.y-i.ra.y);d=Math.max(d,Math.max(w,p)+b+j.width);w=c+k/2-i.z.y-i.ra.y;e=Math.max(e,w+j.height);w<0&&(e=e-w);i.N.y<0&&(c=Pp(a,i.N.y,h,c,k))}}return a=[c,d,e]}
function yp(a,b,c,d,e){s&&u.c(a,$,Y,"layoutBusChildrenNegDir:v");var g=b.length,i,j;if(g===0)return a=[c,d,e];if(g===1){i=b[0];j=i.Ca;d=j.width;e=j.height;return a=[c,d,e]}var k=a.Vc,l=a.Vd,n=sp(a)===270,q=0,p=0,t=0,w=0,A=0,F=0,w=F=0,H,x;for(H=0;H<g;H++)if(!(H%2!==0||g>1&&H===g-1)){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;t=t-(x+j.height);i.N=new E(c-(j.width+F),t);d=Math.max(d,j.width+F);e=Math.max(e,Math.abs(t))}else{F=Np(i)-k;p=p-(x+j.width);i.N=new E(p,c-(j.height+F));e=Math.max(e,j.height+F);
d=Math.max(d,Math.abs(p))}q++}q=0;w=p;A=t;if(n){p=c+k;t=0}else{p=0;t=c+k}for(H=0;H<g;H++)if(H%2!==0){i=b[H];j=i.Ca;x=q===0?0:l;if(n){F=Np(i)-k;t=t-(x+j.height);i.N=new E(p+F,t);d=Math.max(d,p+j.width+F);e=Math.max(e,Math.abs(t))}else{F=Np(i)-k;p=p-(x+j.width);i.N=new E(p,t+F);e=Math.max(e,t+j.height+F);d=Math.max(d,Math.abs(p))}q++}if(g>1&&g%2===1){i=b[g-1];j=i.Ca;if(n){l=Op(i,Math.max(Math.abs(A),Math.abs(t)));i.N=new E(c+k/2-i.z.x-i.ra.x,-e-j.height-l);w=c+k/2-i.z.x-i.ra.x;d=Math.max(d,w+j.width);
w<0&&(d=d-w);e=Math.max(e,Math.abs(Math.min(A,t))+l+j.height);i.N.x<0&&(c=Pp(a,i.N.x,o,c,k))}else{l=Op(i,Math.max(Math.abs(p),Math.abs(p)));i.N=new E(-d-j.width-l,c+k/2-i.z.y-i.ra.y);d=Math.max(d,Math.abs(Math.min(w,p))+l+j.width);w=c+k/2-i.z.y-i.ra.y;e=Math.max(e,w+j.height);w<0&&(e=e-w);i.N.y<0&&(c=Pp(a,i.N.y,h,c,k))}}for(H=0;H<g;H++){i=b[H];i.N=n?new E(i.N.x,i.N.y+e):new E(i.N.x+d,i.N.y)}return a=[c,d,e]}
function Np(a){s&&u.c(a,$,Y,"fixRelativePostions:child");return a.parent===m?0:a.parent.Fu}function Op(a){s&&u.c(a,$,Y,"fixRelativePostions:lastchild");return a.parent===m?0:a.parent.Pu}function Pp(a,b,c,d,e){s&&u.c(a,$,Y,"fixRelativePostions:v");for(var a=a.yb,g=a.length,i=0;i<g;i++)a[i].N=c?new E(a[i].N.x,a[i].N.y-b):new E(a[i].N.x-b,a[i].N.y);b=a[g-1];return Math.max(d,c?b.ra.y-b.z.y-e/2:b.ra.x-b.z.x-e/2)}
function Kp(a,b,c){s&&u.c(a,$,Y,"calculateSubwidth:v");switch(a.ka){case ip:case Jp:var d=b;c+a.width>d&&(d=c+a.width);c<0&&(d=d-c);return d;case tp:return a.width>b?a.width:b;case up:return a.z.x*2>b?a.width:b+a.width-a.z.x*2;case kp:case $o:d=Math.min(0,c);c=Math.max(b,c+a.width);return Math.max(a.width,c-d);case lp:return a.width-a.z.x+a.Vc/2+b;case mp:return Math.max(a.width,a.z.x+a.Vc/2+b);default:return b}}
function Lp(a,b,c){s&&u.c(a,$,Y,"calculateSubheight:v");switch(a.ka){case ip:case Jp:var d=b;c+a.height>d&&(d=c+a.height);c<0&&(d=d-c);return d;case tp:return a.height>b?a.height:b;case up:return a.z.y*2>b?a.height:b+a.height-a.z.y*2;case kp:case $o:d=Math.min(0,c);c=Math.max(b,c+a.height);return Math.max(a.height,c-d);case lp:return a.height-a.z.y+a.Vc/2+b;case mp:return Math.max(a.height,a.z.y+a.Vc/2+b);default:return b}}
function Mp(a,b,c){s&&u.c(a,ja,Y,"alignOffset:align");switch(a){case Jp:b=b/2;c=c/2;break;case ip:b=b/2;c=c/2;break;case tp:c=b=0;break;case up:break;default:u.g("Unhandled alignment value "+a.toString())}return[b,c]}function zp(a,b,c,d,e,g){s&&u.c(a,$,Y,"shiftRelPosAlign:v");s&&u.c(b,ja,Y,"shiftRelPosAlign:align");b=Mp(b,c,d);Hp(a,b[0],b[1],e,g)}function Hp(a,b,c,d,e){s&&u.c(a,$,Y,"shiftRelPos:v");if(!(b===0&&c===0))for(a=a.yb;d<=e;d++){var g=a[d];g.N.x=g.N.x+b;g.N.y=g.N.y+c}}
function Ap(a,b,c){s&&u.c(b,$,Y,"recordMidPoints:v");s&&u.c(c,E,Y,"recordMidPoints:p");var d=b.cb;switch(a.$b){case Jo:for(a=b.ob;a.next();){b=a.value;if(b.G===d)b.Vp=c}break;case Qo:for(a=b.nb;a.next();){b=a.value;if(b.D===d)b.Vp=c}break;default:u.g("Unhandled path value "+a.$b.toString())}}function Ip(a,b,c){for(var d=0;d<a.length;d++){a[d].x=a[d].x+b;a[d].y=a[d].y+c}}
function Gp(a,b,c,d,e,g){s&&u.c(a,$,Y,"mergeFringes:parent");s&&u.c(b,$,Y,"mergeFringes:child");var i=sp(a),j=i===90||i===270,k=a.Vc,l=e,n=g,q=b.pp,e=b.cq,g=b.Ca,a=j?Math.max(n,g.height):Math.max(l,g.width);if(q===m||i!==sp(b)){q=[];e=[];if(j){q[0]=new E(0,0);q[1]=new E(0,g.height);e[0]=new E(g.width,0);e[1]=new E(e[0].x,q[1].y)}else{q[0]=new E(0,0);q[1]=new E(g.width,0);e[0]=new E(0,g.height);e[1]=new E(q[1].x,e[0].y)}}if(j){b=j=l;i=q;l=9999999;if(!(d===m||d.length<2||i===m||i.length<2))for(var p=
n=0;n<d.length&&p<i.length;){var t=d[n],w=i[p].copy();w.x=w.x+j;var A=t;n+1<d.length&&(A=d[n+1]);var F=w;if(p+1<i.length){F=i[p+1].copy();F.x=F.x+j}var H=l;t.y===w.y?H=w.x-t.x:t.y>w.y&&t.y<F.y?H=w.x+(t.y-w.y)/(F.y-w.y)*(F.x-w.x)-t.x:w.y>t.y&&w.y<A.y&&(H=w.x-(t.x+(w.y-t.y)/(A.y-t.y)*(A.x-t.x)));H<l&&(l=H);if(A.y<=t.y)n++;else if(F.y<=w.y)p++;else{A.y<=F.y&&n++;F.y<=A.y&&p++}}k=b-l+k;b=k;if(c===m||c.length<2||q===m||q.length<2)c=m;else{i=[];for(l=j=p=0;j<q.length&&q[j].y<c[0].y;){n=q[j++].copy();n.x=
n.x+b;i[l++]=n}for(;p<c.length;){n=c[p++];i[l++]=n}for(c=c[c.length-1].y;j<q.length&&q[j].y<=c;)j++;for(;j<q.length&&q[j].y>c;){n=q[j++].copy();n.x=n.x+b;i[l++]=n}c=i}j=e;l=k;if(d===m||d.length<2||j===m||j.length<2)d=m;else{e=[];for(b=n=q=0;q<d.length&&d[q].y<j[0].y;){i=d[q++];e[b++]=i}for(;n<j.length;){i=j[n++].copy();i.x=i.x+l;e[b++]=i}for(j=j[j.length-1].y;q<d.length&&d[q].y<=j;)q++;for(;q<d.length&&d[q].y>j;){i=d[q++];e[b++]=i}d=e}e=Math.max(0,k)+g.width;return[k,c,d,e,a]}b=j=n;i=q;l=9999999;
if(!(d===m||d.length<2||i===m||i.length<2))for(p=n=0;n<d.length&&p<i.length;){t=d[n];w=i[p].copy();w.y=w.y+j;A=t;n+1<d.length&&(A=d[n+1]);F=w;if(p+1<i.length){F=i[p+1].copy();F.y=F.y+j}H=l;t.x===w.x?H=w.y-t.y:t.x>w.x&&t.x<F.x?H=w.y+(t.x-w.x)/(F.x-w.x)*(F.y-w.y)-t.y:w.x>t.x&&w.x<A.x&&(H=w.y-(t.y+(w.x-t.x)/(A.x-t.x)*(A.y-t.y)));H<l&&(l=H);if(A.x<=t.x)n++;else if(F.x<=w.x)p++;else{A.x<=F.x&&n++;F.x<=A.x&&p++}}k=b-l+k;b=k;if(c===m||c.length<2||q===m||q.length<2)c=m;else{i=[];for(l=j=p=0;j<q.length&&q[j].x<
c[0].x;){n=q[j++].copy();n.y=n.y+b;i[l++]=n}for(;p<c.length;){n=c[p++];i[l++]=n}for(c=c[c.length-1].x;j<q.length&&q[j].x<=c;)j++;for(;j<q.length&&q[j].x>c;){n=q[j++].copy();n.y=n.y+b;i[l++]=n}c=i}j=e;l=k;if(d===m||d.length<2||j===m||j.length<2)d=m;else{e=[];for(b=n=q=0;q<d.length&&d[q].x<j[0].x;){i=d[q++];e[b++]=i}for(;n<j.length;){i=j[n++].copy();i.y=i.y+l;e[b++]=i}for(j=j[j.length-1].x;q<d.length&&d[q].x<=j;)q++;for(;q<d.length&&d[q].x>j;){i=d[q++];e[b++]=i}d=e}e=a;g=Math.max(0,k)+g.height;return[k,
c,d,e,g]}function Wo(a,b,c,d){s&&u.c(b,$,Y,"assignAbsolutePositions:v");if(b!==m){b.x=c;b.y=d;for(var b=b.yb,e=b.length,g=0;g<e;g++){var i=b[g];Wo(a,i,c+i.N.x,d+i.N.y)}}}Y.prototype.commitLayout=Y.prototype.cu=function(){this.Iy();this.commitNodes();this.commitLinks()};
Y.prototype.commitNodes=Y.prototype.Bx=function(){for(var a=this.p.P.f,b;a.next();){b=a.value;b.commit()}for(a.reset();a.next();){b=a.value;s&&u.c(b,$,Y,"layoutComments:v");if(b.dd!==m){var c=b.Xg.pa,d=b.cb,e=f,e=f,e=b.Nb,g=0,i=ip,i=o;if(d!==m){g=d.Nb;i=d.ka;i=jp(i)}for(var d=e===90||e===270,j=g===90||g===270,k=b.dl===0,l=op(b),n=0,q=b.dd,p=q.length,t=0;t<p;t++){var e=q[t],w=e.ga,A;if(d&&!k||!i&&!j&&k||i&&j&&k){if(g>135&&!i||j&&l)if(b.Qb>=0){e.location=new E(b.A.x-b.Qb-w.width,b.A.y+n);for(A=e.hf();A.next();){e=
A.value;e.Ua=nc;e.Wa=oc}}else{e.location=new E(b.A.x+b.z.x*2-b.Qb,b.A.y+n);for(A=e.hf();A.next();){e=A.value;e.Ua=oc;e.Wa=nc}}else if(b.Qb>=0){e.location=new E(b.A.x+b.z.x*2+b.Qb,b.A.y+n);for(A=e.hf();A.next();){e=A.value;e.Ua=oc;e.Wa=nc}}else{e.location=new E(b.A.x+b.Qb-w.width,b.A.y+n);for(A=e.hf();A.next();){e=A.value;e.Ua=nc;e.Wa=oc}}n=b.cd>=0?n+(w.height+b.cd):n+(b.cd-w.height)}else{if(g>135&&!i||!j&&l)if(b.Qb>=0){e.location=new E(b.A.x+n,b.A.y-b.Qb-w.height);for(A=e.hf();A.next();){e=A.value;
e.Ua=Xb;e.Wa=ec}}else{e.location=new E(b.A.x+n,b.A.y+b.z.y*2-b.Qb);for(A=e.hf();A.next();){e=A.value;e.Ua=ec;e.Wa=Xb}}else if(b.Qb>=0){e.location=new E(b.A.x+n,b.A.y+b.z.y*2+b.Qb);for(A=e.hf();A.next();){e=A.value;e.Ua=ec;e.Wa=Xb}}else{e.location=new E(b.A.x+n,b.A.y+b.Qb-w.height);for(A=e.hf();A.next();){e=A.value;e.Ua=Xb;e.Wa=ec}}n=b.cd>=0?n+(w.width+b.cd):n+(b.cd-w.width)}}c=n-b.cd-(d?c.height:c.width);if(this.path===Jo)for(b=b.nb;b.next();){e=b.value;if((e=e.link)&&e.Te!==Hf)e.ak=c>0?c:NaN}else for(b=
b.ob;b.next();){e=b.value;if((e=e.link)&&e.Te!==Hf)e.jk=c>0?c:NaN}}}};Y.prototype.commitLinks=Y.prototype.Ax=function(){for(var a=this.p.Lb.f;a.next();)a.value.commit()};Y.prototype.Iy=function(){for(var a=this.lc.f;a.next();){var b=this.p.be(a.value);Qp(this,b)}};
function Qp(a,b){s&&u.c(b,$,Y,"setPortSpotsTree:v");if(b!==m){s&&u.c(b,$,Y,"setPortSpots:v");var c=b.ka;if(jp(c)){s&&u.c(b,$,Y,"setPortSpotsBus:v");s&&u.c(c,ja,Y,"setPortSpots:align");var d=a.$b===Jo,e=sp(b),g;switch(e){case 0:g=oc;break;case 90:g=ec;break;case 180:g=nc;break;default:g=Xb}var i,j,k,l=b.yb,n=l.length;switch(c){case kp:case $o:for(c=0;c<n;c++){i=l[c];j=d?i.ob:i.nb;j.next();k=j.value;if(k!==m){k=k.Ba;if(k!==m){i=e===90||e===270?nc:Xb;if(n===1||c===n-1&&n%2===1)switch(e){case 0:i=nc;
break;case 90:i=Xb;break;case 180:i=oc;break;default:i=ec}else c%2===0&&(i=e===90||e===270?oc:ec);if(d){if(b.Si)k.Ua=g;if(b.Ri)k.Wa=i}else{if(b.Si)k.Ua=i;if(b.Ri)k.Wa=g}}}}break;case lp:i=e===90||e===270?oc:ec;for(j=d?b.nb:b.ob;j.next();){k=j.value;k=k.Ba;if(k!==m)if(d){if(b.Si)k.Ua=g;if(b.Ri)k.Wa=i}else{if(b.Si)k.Ua=i;if(b.Ri)k.Wa=g}}break;case mp:i=e===90||e===270?nc:Xb;for(j=d?b.nb:b.ob;j.next();){k=j.value;k=k.Ba;if(k!==m)if(d){if(b.Si)k.Ua=g;if(b.Ri)k.Wa=i}else{if(b.Si)k.Ua=i;if(b.Ri)k.Wa=g}}}}else{d=
sp(b);if(a.$b===Jo)for(e=b.nb;e.next();){g=e.value;g=g.Ba;if(g!==m){if(b.Xf)if(Qb(b.xe))switch(d){case 0:g.Ua=oc;break;case 90:g.Ua=ec;break;case 180:g.Ua=nc;break;default:g.Ua=Xb}else g.Ua=b.xe;if(b.Wf)if(Qb(b.pe))switch(d){case 0:g.Wa=nc;break;case 90:g.Wa=Xb;break;case 180:g.Wa=oc;break;default:g.Wa=ec}else g.Wa=b.pe}}else for(e=b.ob;e.next();){g=e.value;g=g.Ba;if(g!==m){if(b.Xf)if(Qb(b.xe))switch(d){case 0:g.Wa=oc;break;case 90:g.Wa=ec;break;case 180:g.Wa=nc;break;default:g.Wa=Xb}else g.Wa=b.xe;
if(b.Wf)if(Qb(b.pe))switch(d){case 0:g.Ua=nc;break;case 90:g.Ua=Xb;break;case 180:g.Ua=oc;break;default:g.Ua=ec}else g.Ua=b.pe}}}d=b.yb;e=d.length;for(g=0;g<e;g++)Qp(a,d[g])}}function sp(a){s&&u.c(a,$,Y,"orthoAngle:v");a=a.Nb;return a<=45?0:a<=135?90:a<=225?180:a<=315?270:0}function vp(a){s&&u.c(a,$,Y,"computeLayerSpacing:v");var b=sp(a),b=b===90||b===270,c=a.ed;if(a.Mf>0)var d=Math.min(1,a.Mf),c=c-(b?a.height*d:a.width*d);if(c<(b?-a.height:-a.width))c=b?-a.height:-a.width;return c}
function wp(a){s&&u.c(a,$,Y,"computeNodeIndent:v");var b=sp(a),b=b===90||b===270,c=a.zg;if(a.Tf>0)var d=Math.min(1,a.Tf),c=c+(b?a.width*d:a.height*d);return c=Math.max(0,c)}u.a(Y,"roots",Y.prototype.qG);u.defineProperty(Y,{qG:"roots"},r("lc"),function(a){if(this.lc!==a){this.lc=a;this.r()}});u.a(Y,"path",Y.prototype.path);u.defineProperty(Y,{path:"path"},r("$b"),function(a){if(this.$b!==a){s&&u.c(a,ja,Y,"path");if(a===Jo||a===Qo){this.$b=a;this.r()}}});u.a(Y,"treeStyle",Y.prototype.vD);
u.defineProperty(Y,{vD:"treeStyle"},r("xq"),function(a){if(this.uc!==a){s&&u.c(a,ja,Y,"treeStyle");if(a===Ko||a===cp||a===dp||a===bp){this.xq=a;this.r()}}});u.a(Y,"arrangement",Y.prototype.Id);u.defineProperty(Y,{Id:"arrangement"},r("uc"),function(a){if(this.uc!==a){s&&u.c(a,ja,Y,"arrangement");if(a===Lo||a===Xo||a===Po){this.uc=a;this.r()}}});u.a(Y,"arrangementSpacing",Y.prototype.Zt);u.defineProperty(Y,{Zt:"arrangementSpacing"},r("Ue"),function(a){if(!this.Ue.u(a)){this.Ue.Oa(a);this.r()}});
u.a(Y,"rootDefaults",Y.prototype.pG);u.defineProperty(Y,{pG:"rootDefaults"},r("S"),function(a){if(this.S!==a){s&&u.c(a,$,Y,"rootDefaults");this.S=a;this.r()}});u.a(Y,"alternateDefaults",Y.prototype.xE);u.defineProperty(Y,{xE:"alternateDefaults"},r("R"),function(a){if(this.R!==a){s&&u.c(a,$,Y,"alternateDefaults");this.R=a;this.r()}});u.a(Y,"sorting",Y.prototype.uf);
u.defineProperty(Y,{uf:"sorting"},function(){return this.S.Tb},function(a){if(this.S.Tb!==a){s&&u.c(a,ja,Y,"sorting");if(a===ep||a===fp||a===gp||hp){this.S.Tb=a;this.r()}}});u.a(Y,"comparer",Y.prototype.Pg);u.defineProperty(Y,{Pg:"comparer"},function(){return this.S.Rb},function(a){if(this.S.Rb!==a){s&&u.e(a,"function",Y,"comparer");this.S.Rb=a;this.r()}});u.a(Y,"angle",Y.prototype.Ka);
u.defineProperty(Y,{Ka:"angle"},function(){return this.S.Nb},function(a){if(this.S.Nb!==a&&(a===0||a===90||a===180||a===270)){this.S.Nb=a;this.r()}});u.a(Y,"alignment",Y.prototype.lb);u.defineProperty(Y,{lb:"alignment"},function(){return this.S.ka},function(a){if(this.S.ka!==a){s&&u.Ra(a,Y,Y,"alignment");this.S.ka=a;this.r()}});u.a(Y,"nodeIndent",Y.prototype.sy);u.defineProperty(Y,{sy:"nodeIndent"},function(){return this.S.zg},function(a){if(this.S.zg!==a&&a>=0){this.S.zg=a;this.r()}});
u.a(Y,"nodeIndentPastParent",Y.prototype.ty);u.defineProperty(Y,{ty:"nodeIndentPastParent"},function(){return this.S.Tf},function(a){if(this.S.Tf!==a&&a>=0&&a<=1){this.S.Tf=a;this.r()}});u.a(Y,"nodeSpacing",Y.prototype.Fu);u.defineProperty(Y,{Fu:"nodeSpacing"},function(){return this.S.Vc},function(a){if(this.S.Vc!==a){this.S.Vc=a;this.r()}});u.a(Y,"layerSpacing",Y.prototype.ur);u.defineProperty(Y,{ur:"layerSpacing"},function(){return this.S.ed},function(a){if(this.S.ed!==a){this.S.ed=a;this.r()}});
u.a(Y,"layerSpacingParentOverlap",Y.prototype.iy);u.defineProperty(Y,{iy:"layerSpacingParentOverlap"},function(){return this.S.Mf},function(a){if(this.S.Mf!==a&&a>=0&&a<=1){this.S.Mf=a;this.r()}});u.a(Y,"compaction",Y.prototype.du);u.defineProperty(Y,{du:"compaction"},function(){return this.S.Df},function(a){if(this.S.Df!==a){s&&u.c(a,ja,Y,"compaction");if(a===pp||a===rp){this.S.Df=a;this.r()}}});u.a(Y,"breadthLimit",Y.prototype.rx);
u.defineProperty(Y,{rx:"breadthLimit"},function(){return this.S.Af},function(a){if(this.S.Af!==a&&a>=0){this.S.Af=a;this.r()}});u.a(Y,"rowSpacing",Y.prototype.Pu);u.defineProperty(Y,{Pu:"rowSpacing"},function(){return this.S.Vd},function(a){if(this.S.Vd!==a){this.S.Vd=a;this.r()}});u.a(Y,"rowIndent",Y.prototype.Cy);u.defineProperty(Y,{Cy:"rowIndent"},function(){return this.S.Kc},function(a){if(this.S.Kc!==a&&a>=0){this.S.Kc=a;this.r()}});u.a(Y,"commentSpacing",Y.prototype.yx);
u.defineProperty(Y,{yx:"commentSpacing"},function(){return this.S.cd},function(a){if(this.S.cd!==a){this.S.cd=a;this.r()}});u.a(Y,"commentMargin",Y.prototype.xx);u.defineProperty(Y,{xx:"commentMargin"},function(){return this.S.Qb},function(a){if(this.S.Qb!==a){this.S.Qb=a;this.r()}});u.a(Y,"setsPortSpot",Y.prototype.Si);u.defineProperty(Y,{Si:"setsPortSpot"},function(){return this.S.Xf},function(a){if(this.S.Xf!==a){this.S.Xf=a;this.r()}});u.a(Y,"portSpot",Y.prototype.xy);
u.defineProperty(Y,{xy:"portSpot"},function(){return this.S.xe},function(a){if(!this.S.xe.u(a)){this.S.xe=a;this.r()}});u.a(Y,"setsChildPortSpot",Y.prototype.Ri);u.defineProperty(Y,{Ri:"setsChildPortSpot"},function(){return this.S.Wf},function(a){if(this.S.Wf!==a){this.S.Wf=a;this.r()}});u.a(Y,"childPortSpot",Y.prototype.vx);u.defineProperty(Y,{vx:"childPortSpot"},function(){return this.S.pe},function(a){if(!this.S.pe.u(a)){this.S.pe=a;this.r()}});u.a(Y,"alternateSorting",Y.prototype.IE);
u.defineProperty(Y,{IE:"alternateSorting"},function(){return this.R.Tb},function(a){if(this.R.Tb!==a){s&&u.c(a,ja,Y,"alternateSorting");if(a===ep||a===fp||a===gp||hp){this.R.Tb=a;this.r()}}});u.a(Y,"alternateComparer",Y.prototype.wE);u.defineProperty(Y,{wE:"alternateComparer"},function(){return this.R.Rb},function(a){if(this.R.Rb!==a){s&&u.e(a,"function",Y,"alternateComparer");this.R.Rb=a;this.r()}});u.a(Y,"alternateAngle",Y.prototype.qE);
u.defineProperty(Y,{qE:"alternateAngle"},function(){return this.R.Nb},function(a){if(this.R.Nb!==a&&(a===0||a===90||a===180||a===270)){this.R.Nb=a;this.r()}});u.a(Y,"alternateAlignment",Y.prototype.pE);u.defineProperty(Y,{pE:"alternateAlignment"},function(){return this.R.ka},function(a){if(this.R.ka!==a){s&&u.Ra(a,Y,Y,"alternateAlignment");this.R.ka=a;this.r()}});u.a(Y,"alternateNodeIndent",Y.prototype.AE);
u.defineProperty(Y,{AE:"alternateNodeIndent"},function(){return this.R.zg},function(a){if(this.R.zg!==a&&a>=0){this.R.zg=a;this.r()}});u.a(Y,"alternateNodeIndentPastParent",Y.prototype.BE);u.defineProperty(Y,{BE:"alternateNodeIndentPastParent"},function(){return this.R.Tf},function(a){if(this.R.Tf!==a&&a>=0&&a<=1){this.R.Tf=a;this.r()}});u.a(Y,"alternateNodeSpacing",Y.prototype.CE);
u.defineProperty(Y,{CE:"alternateNodeSpacing"},function(){return this.R.Vc},function(a){if(this.R.Vc!==a){this.R.Vc=a;this.r()}});u.a(Y,"alternateLayerSpacing",Y.prototype.yE);u.defineProperty(Y,{yE:"alternateLayerSpacing"},function(){return this.R.ed},function(a){if(this.R.ed!==a){this.R.ed=a;this.r()}});u.a(Y,"alternateLayerSpacingParentOverlap",Y.prototype.zE);
u.defineProperty(Y,{zE:"alternateLayerSpacingParentOverlap"},function(){return this.R.Mf},function(a){if(this.R.Mf!==a&&a>=0&&a<=1){this.R.Mf=a;this.r()}});u.a(Y,"alternateCompaction",Y.prototype.vE);u.defineProperty(Y,{vE:"alternateCompaction"},function(){return this.R.Df},function(a){if(this.R.Df!==a){s&&u.c(a,ja,Y,"alternateCompaction");if(a===pp||a===rp){this.R.Df=a;this.r()}}});u.a(Y,"alternateBreadthLimit",Y.prototype.rE);
u.defineProperty(Y,{rE:"alternateBreadthLimit"},function(){return this.R.Af},function(a){if(this.R.Af!==a&&a>=0){this.R.Af=a;this.r()}});u.a(Y,"alternateRowSpacing",Y.prototype.FE);u.defineProperty(Y,{FE:"alternateRowSpacing"},function(){return this.R.Vd},function(a){if(this.R.Vd!==a){this.R.Vd=a;this.r()}});u.a(Y,"alternateRowIndent",Y.prototype.EE);u.defineProperty(Y,{EE:"alternateRowIndent"},function(){return this.R.Kc},function(a){if(this.R.Kc!==a&&a>=0){this.R.Kc=a;this.r()}});
u.a(Y,"alternateCommentSpacing",Y.prototype.uE);u.defineProperty(Y,{uE:"alternateCommentSpacing"},function(){return this.R.cd},function(a){if(this.R.cd!==a){this.R.cd=a;this.r()}});u.a(Y,"alternateCommentMargin",Y.prototype.tE);u.defineProperty(Y,{tE:"alternateCommentMargin"},function(){return this.R.Qb},function(a){if(this.R.Qb!==a){this.R.Qb=a;this.r()}});u.a(Y,"alternateSetsPortSpot",Y.prototype.HE);
u.defineProperty(Y,{HE:"alternateSetsPortSpot"},function(){return this.R.Xf},function(a){if(this.R.Xf!==a){this.R.Xf=a;this.r()}});u.a(Y,"alternatePortSpot",Y.prototype.DE);u.defineProperty(Y,{DE:"alternatePortSpot"},function(){return this.R.xe},function(a){if(!this.R.xe.u(a)){this.R.xe=a;this.r()}});u.a(Y,"alternateSetsChildPortSpot",Y.prototype.GE);u.defineProperty(Y,{GE:"alternateSetsChildPortSpot"},function(){return this.R.Wf},function(a){if(this.R.Wf!==a){this.R.Wf=a;this.r()}});
u.a(Y,"alternateChildPortSpot",Y.prototype.sE);u.defineProperty(Y,{sE:"alternateChildPortSpot"},function(){return this.R.pe},function(a){if(!this.R.pe.u(a)){this.R.pe=a;this.r()}});var Jo;Y.PathDestination=Jo=u.l(Y,"PathDestination",0);var Qo;Y.PathSource=Qo=u.l(Y,"PathSource",1);var ep;Y.SortingForwards=ep=u.l(Y,"SortingForwards",10);var fp;Y.SortingReverse=fp=u.l(Y,"SortingReverse",11);var gp;Y.SortingAscending=gp=u.l(Y,"SortingAscending",12);var hp;
Y.SortingDescending=hp=u.l(Y,"SortingDescending",13);var Jp;Y.AlignmentCenterSubtrees=Jp=u.l(Y,"AlignmentCenterSubtrees",20);var ip;Y.AlignmentCenterChildren=ip=u.l(Y,"AlignmentCenterChildren",21);var tp;Y.AlignmentStart=tp=u.l(Y,"AlignmentStart",22);var up;Y.AlignmentEnd=up=u.l(Y,"AlignmentEnd",23);var kp;Y.AlignmentBus=kp=u.l(Y,"AlignmentBus",24);var $o;Y.AlignmentBusBranching=$o=u.l(Y,"AlignmentBusBranching",25);var lp;Y.AlignmentTopLeftBus=lp=u.l(Y,"AlignmentTopLeftBus",26);var mp;
Y.AlignmentBottomRightBus=mp=u.l(Y,"AlignmentBottomRightBus",27);var pp;Y.CompactionNone=pp=u.l(Y,"CompactionNone",30);var rp;Y.CompactionBlock=rp=u.l(Y,"CompactionBlock",31);var Ko;Y.StyleLayered=Ko=u.l(Y,"StyleLayered",40);var dp;Y.StyleLastParents=dp=u.l(Y,"StyleLastParents",41);var cp;Y.StyleAlternating=cp=u.l(Y,"StyleAlternating",42);var bp;Y.StyleRootOnly=bp=u.l(Y,"StyleRootOnly",43);var Lo;Y.ArrangementVertical=Lo=u.l(Y,"ArrangementVertical",50);var Xo;
Y.ArrangementHorizontal=Xo=u.l(Y,"ArrangementHorizontal",51);var Po;Y.ArrangementFixedRoots=Po=u.l(Y,"ArrangementFixedRoots",52);function No(){Am.call(this)}u.H("TreeNetwork",No);u.na(No,Am);No.prototype.createVertex=No.prototype.Ci=function(){return new $};No.prototype.createEdge=No.prototype.an=function(){return new Rp};
function $(){Em.call(this);this.tj=o;this.cb=m;this.yb=[];this.uh=this.Ts=this.xs=this.Kk=this.LG=0;this.cq=this.pp=this.dd=this.ra=this.Ca=this.N=m;this.Lj=this.Kj=this.Jw=o;this.Tb=ep;this.Rb=Jm;this.Nb=0;this.ka=ip;this.Tf=this.zg=0;this.Vc=20;this.ed=50;this.Mf=0;this.Df=rp;this.Af=0;this.Vd=25;this.cd=this.Kc=10;this.Qb=20;this.Xf=h;this.xe=Ub;this.Wf=h;this.pe=Ub}u.H("TreeVertex",$);u.na($,Em);
function Mo(a,b){if(b!==m){a.Tb=b.Tb;a.Rb=b.Rb;a.Nb=b.Nb;a.ka=b.ka;a.zg=b.zg;a.Tf=b.Tf;a.Vc=b.Vc;a.ed=b.ed;a.Mf=b.Mf;a.Df=b.Df;a.Af=b.Af;a.Vd=b.Vd;a.Kc=b.Kc;a.cd=b.cd;a.Qb=b.Qb;a.Xf=b.Xf;a.xe=b.xe;a.Wf=b.Wf;a.pe=b.pe}}u.a($,"initialized",$.prototype.BF);u.defineProperty($,{BF:"initialized"},r("tj"),ba("tj"));u.a($,"parent",$.prototype.parent);u.defineProperty($,{parent:"parent"},r("cb"),ba("cb"));u.a($,"children",$.prototype.children);u.defineProperty($,{children:"children"},r("yb"),ba("yb"));
u.m($,{dl:"childrenCount"},function(){return this.yb.length});u.a($,"level",$.prototype.OF);u.defineProperty($,{OF:"level"},r("Kk"),ba("Kk"));u.a($,"descendantCount",$.prototype.$E);u.defineProperty($,{$E:"descendantCount"},r("xs"),ba("xs"));u.a($,"maxChildrenCount",$.prototype.UF);u.defineProperty($,{UF:"maxChildrenCount"},r("Ts"),ba("Ts"));u.a($,"maxGenerationCount",$.prototype.VF);u.defineProperty($,{VF:"maxGenerationCount"},r("uh"),ba("uh"));u.a($,"relativePosition",$.prototype.iG);
u.defineProperty($,{iG:"relativePosition"},r("N"),function(a){u.c(a,E,$,"relativePosition");this.N=a});u.a($,"subtreeSize",$.prototype.EG);u.defineProperty($,{EG:"subtreeSize"},r("Ca"),function(a){u.c(a,eb,$,"subtreeSize");this.Ca=a});u.a($,"subtreeOffset",$.prototype.DG);u.defineProperty($,{DG:"subtreeOffset"},r("ra"),function(a){u.c(a,E,$,"subtreeOffset");this.ra=a});u.a($,"comments",$.prototype.zx);u.defineProperty($,{zx:"comments"},r("dd"),ba("dd"));u.a($,"sorting",$.prototype.uf);
u.defineProperty($,{uf:"sorting"},r("Tb"),ba("Tb"));u.a($,"comparer",$.prototype.Pg);u.defineProperty($,{Pg:"comparer"},r("Rb"),ba("Rb"));u.a($,"angle",$.prototype.Ka);u.defineProperty($,{Ka:"angle"},r("Nb"),ba("Nb"));u.a($,"alignment",$.prototype.lb);u.defineProperty($,{lb:"alignment"},r("ka"),ba("ka"));u.a($,"nodeIndent",$.prototype.sy);u.defineProperty($,{sy:"nodeIndent"},r("zg"),ba("zg"));u.a($,"nodeIndentPastParent",$.prototype.ty);u.defineProperty($,{ty:"nodeIndentPastParent"},r("Tf"),ba("Tf"));
u.a($,"nodeSpacing",$.prototype.Fu);u.defineProperty($,{Fu:"nodeSpacing"},r("Vc"),ba("Vc"));u.a($,"layerSpacing",$.prototype.ur);u.defineProperty($,{ur:"layerSpacing"},r("ed"),ba("ed"));u.a($,"layerSpacingParentOverlap",$.prototype.iy);u.defineProperty($,{iy:"layerSpacingParentOverlap"},r("Mf"),ba("Mf"));u.a($,"compaction",$.prototype.du);u.defineProperty($,{du:"compaction"},r("Df"),ba("Df"));u.a($,"breadthLimit",$.prototype.rx);u.defineProperty($,{rx:"breadthLimit"},r("Af"),ba("Af"));
u.a($,"rowSpacing",$.prototype.Pu);u.defineProperty($,{Pu:"rowSpacing"},r("Vd"),ba("Vd"));u.a($,"rowIndent",$.prototype.Cy);u.defineProperty($,{Cy:"rowIndent"},r("Kc"),ba("Kc"));u.a($,"commentSpacing",$.prototype.yx);u.defineProperty($,{yx:"commentSpacing"},r("cd"),ba("cd"));u.a($,"commentMargin",$.prototype.xx);u.defineProperty($,{xx:"commentMargin"},r("Qb"),ba("Qb"));u.a($,"setsPortSpot",$.prototype.Si);u.defineProperty($,{Si:"setsPortSpot"},r("Xf"),ba("Xf"));u.a($,"portSpot",$.prototype.xy);
u.defineProperty($,{xy:"portSpot"},r("xe"),ba("xe"));u.a($,"setsChildPortSpot",$.prototype.Ri);u.defineProperty($,{Ri:"setsChildPortSpot"},r("Wf"),ba("Wf"));u.a($,"childPortSpot",$.prototype.vx);u.defineProperty($,{vx:"childPortSpot"},r("pe"),ba("pe"));u.a($,"routeFirstRow",$.prototype.uG);u.defineProperty($,{uG:"routeFirstRow"},r("Jw"),ba("Jw"));u.a($,"routeAroundCentered",$.prototype.sG);u.defineProperty($,{sG:"routeAroundCentered"},r("Kj"),ba("Kj"));u.a($,"routeAroundLastParent",$.prototype.tG);
u.defineProperty($,{tG:"routeAroundLastParent"},r("Lj"),ba("Lj"));function Rp(){Fm.call(this);this.Vp=new E(0,0)}u.H("TreeEdge",Rp);u.na(Rp,Fm);
Rp.prototype.commit=Rp.prototype.Lh=function(){var a=this.Ba;if(a!==m&&a.Te!==Hf){var b=this.p.rb,c=m,d=m;switch(b.$b){case Jo:c=this.G;d=this.D;break;case Qo:c=this.D;d=this.G;break;default:u.g("Unhandled path value "+b.$b.toString())}if(!(c===m||d===m)){b=this.Vp;if(b.x===0&&b.y===0&&!c.Jw){var e=c;s&&u.c(e,$,Rp,"adjustRouteForAngleChange:parent");s&&u.c(d,$,Rp,"adjustRouteForAngleChange:child");a=this.Ba;c=sp(e);b=sp(d);if(c!==b){b=vp(e);e=e.hb;d=d.hb;if(!(c===0&&d.left-e.right<b+1||c===90&&d.top-
e.bottom<b+1||c===180&&e.left-d.right<b+1||c===270&&e.top-d.bottom<b+1)){Jl(a);var d=a.Ie===Gj,g=a.Te===oh,i=jp(this.G.ka);a.ik();if(c===0){c=e.right+b/2;if(d){if(a.Y===4){b=a.h(3).y;a.w(1,new E(c-20,a.h(1).y));a.q(2,new E(c-20,b));a.q(3,new E(c,b));a.q(4,new E(c+20,b));a.w(5,new E(a.h(5).x,b))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));else{if(a.Y===6){a.w(2,new E(c,a.h(2).y));a.w(3,new E(c,a.h(3).y))}}else a.Y===4?a.q(2,new E(c,a.h(2).y)):a.Y===3?a.w(1,new E(c,a.h(2).y)):a.Y===2&&a.q(1,new E(c,
a.h(1).y))}else if(c===90){b=e.bottom+b/2;if(d){if(a.Y===4){c=a.h(3).x;a.w(1,new E(a.h(1).x,b-20));a.q(2,new E(c,b-20));a.q(3,new E(c,b));a.q(4,new E(c,b+20));a.w(5,new E(c,a.h(5).y))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));else{if(a.Y===6){a.w(2,new E(a.h(2).x,b));a.w(3,new E(a.h(3).x,b))}}else a.Y===4?a.q(2,new E(a.h(2).x,b)):a.Y===3?a.w(1,new E(a.h(2).x,b)):a.Y===2&&a.q(1,new E(a.h(1).x,b))}else if(c===180){c=e.left-b/2;if(d){if(a.Y===4){b=a.h(3).y;a.w(1,new E(c+20,a.h(1).y));a.q(2,new E(c+
20,b));a.q(3,new E(c,b));a.q(4,new E(c-20,b));a.w(5,new E(a.h(5).x,b))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));else{if(a.Y===6){a.w(2,new E(c,a.h(2).y));a.w(3,new E(c,a.h(3).y))}}else a.Y===4?a.q(2,new E(c,a.h(2).y)):a.Y===3?a.w(1,new E(c,a.h(2).y)):a.Y===2&&a.q(1,new E(c,a.h(1).y))}else if(c===270){b=e.top-b/2;if(d){if(a.Y===4){c=a.h(3).x;a.w(1,new E(a.h(1).x,b+20));a.q(2,new E(c,b+20));a.q(3,new E(c,b));a.q(4,new E(c,b-20));a.w(5,new E(c,a.h(5).y))}}else if(g)if(i)a.w(3,new E(a.h(2).x,a.h(4).y));
else{if(a.Y===6){a.w(2,new E(a.h(2).x,b));a.w(3,new E(a.h(3).x,b))}}else a.Y===4?a.q(2,new E(a.h(2).x,b)):a.Y===3?a.w(1,new E(a.h(2).x,b)):a.Y===2&&a.q(1,new E(a.h(1).x,b))}a.Mh()}}}else{var e=c.hb,j=sp(c),d=vp(c),g=c.Vd;Jl(a);var i=a.Ie===Gj,k=a.Te===oh,l,n,q,p;a.ik();if(k||i){for(l=2;a.Y>4;)a.JC(2);n=a.h(1);q=a.h(2)}else{for(l=1;a.Y>3;)a.JC(1);n=a.h(0);q=a.h(a.Y-1)}p=a.h(a.Y-1);if(j===0){if(c.ka===up){j=e.bottom+b.y;b.y===0&&n.y>p.y+c.Kc&&(j=Math.min(j,Math.max(n.y,j-wp(c))))}else if(c.ka===tp){j=
e.top+b.y;b.y===0&&n.y<p.y-c.Kc&&(j=Math.max(j,Math.min(n.y,j+wp(c))))}else j=c.Kj||c.Lj&&c.uh===1?e.top-c.ra.y+b.y:e.y+e.height/2+b.y;if(i){a.q(l,new E(n.x,j));l++;a.q(l,new E(e.right+d,j));l++;a.q(l,new E(e.right+d+(b.x-g)/3,j));l++;a.q(l,new E(e.right+d+(b.x-g)*2/3,j));l++;a.q(l,new E(e.right+d+(b.x-g),j));l++;a.q(l,new E(q.x,j))}else{if(k){a.q(l,new E(e.right+d/2,n.y));l++}a.q(l,new E(e.right+d/2,j));l++;a.q(l,new E(e.right+d+b.x-(k?g/2:g),j));l++;k&&a.q(l,new E(a.h(l-1).x,q.y))}}else if(j===
90){if(c.ka===up){j=e.right+b.x;b.x===0&&n.x>p.x+c.Kc&&(j=Math.min(j,Math.max(n.x,j-wp(c))))}else if(c.ka===tp){j=e.left+b.x;b.x===0&&n.x<p.x-c.Kc&&(j=Math.max(j,Math.min(n.x,j+wp(c))))}else j=c.Kj||c.Lj&&c.uh===1?e.left-c.ra.x+b.x:e.x+e.width/2+b.x;if(i){a.q(l,new E(j,n.y));l++;a.q(l,new E(j,e.bottom+d));l++;a.q(l,new E(j,e.bottom+d+(b.y-g)/3));l++;a.q(l,new E(j,e.bottom+d+(b.y-g)*2/3));l++;a.q(l,new E(j,e.bottom+d+(b.y-g)));l++;a.q(l,new E(j,q.y))}else{if(k){a.q(l,new E(n.x,e.bottom+d/2));l++}a.q(l,
new E(j,e.bottom+d/2));l++;a.q(l,new E(j,e.bottom+d+b.y-(k?g/2:g)));l++;k&&a.q(l,new E(q.x,a.h(l-1).y))}}else if(j===180){if(c.ka===up){j=e.bottom+b.y;b.y===0&&n.y>p.y+c.Kc&&(j=Math.min(j,Math.max(n.y,j-wp(c))))}else if(c.ka===tp){j=e.top+b.y;b.y===0&&n.y<p.y-c.Kc&&(j=Math.max(j,Math.min(n.y,j+wp(c))))}else j=c.Kj||c.Lj&&c.uh===1?e.top-c.ra.y+b.y:e.y+e.height/2+b.y;if(i){a.q(l,new E(n.x,j));l++;a.q(l,new E(e.left-d,j));l++;a.q(l,new E(e.left-d+(b.x+g)/3,j));l++;a.q(l,new E(e.left-d+(b.x+g)*2/3,j));
l++;a.q(l,new E(e.left-d+(b.x+g),j));l++;a.q(l,new E(q.x,j))}else{if(k){a.q(l,new E(e.left-d/2,n.y));l++}a.q(l,new E(e.left-d/2,j));l++;a.q(l,new E(e.left-d+b.x+(k?g/2:g),j));l++;k&&a.q(l,new E(a.h(l-1).x,q.y))}}else if(j===270){if(c.ka===up){j=e.right+b.x;b.x===0&&n.x>p.x+c.Kc&&(j=Math.min(j,Math.max(n.x,j-wp(c))))}else if(c.ka===tp){j=e.left+b.x;b.x===0&&n.x<p.x-c.Kc&&(j=Math.max(j,Math.min(n.x,j+wp(c))))}else j=c.Kj||c.Lj&&c.uh===1?e.left-c.ra.x+b.x:e.x+e.width/2+b.x;if(i){a.q(l,new E(j,n.y));
l++;a.q(l,new E(j,e.top-d));l++;a.q(l,new E(j,e.top-d+(b.y+g)/3));l++;a.q(l,new E(j,e.top-d+(b.y+g)*2/3));l++;a.q(l,new E(j,e.top-d+(b.y+g)));l++;a.q(l,new E(j,q.y))}else{if(k){a.q(l,new E(n.x,e.top-d/2));l++}a.q(l,new E(j,e.top-d/2));l++;a.q(l,new E(j,e.top-d+b.y+(k?g/2:g)));l++;k&&a.q(l,new E(q.x,a.h(l-1).y))}}else u.g("Invalid angle "+j);a.Mh()}}}};u.a(Rp,"relativePoint",Rp.prototype.hG);u.defineProperty(Rp,{hG:"relativePoint"},r("Vp"),ba("Vp"));window.go=ga;ga.version="1.0.0"; })(window);
